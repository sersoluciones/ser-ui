!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(0,function(D){var d={animation:"fade",animationDuration:350,content:null,contentAsHTML:!1,contentCloning:!1,debug:!0,delay:300,delayTouch:[300,500],functionInit:null,functionBefore:null,functionReady:null,functionAfter:null,functionFormat:null,IEmin:6,interactive:!1,multiple:!1,parent:null,plugins:["sideTip"],repositionOnScroll:!1,restoration:"none",selfDestruction:!0,theme:[],timer:0,trackerInterval:500,trackOrigin:!1,trackTooltip:!1,trigger:"hover",triggerClose:{click:!1,mouseleave:!1,originClick:!1,scroll:!1,tap:!1,touchleave:!1},triggerOpen:{click:!1,mouseenter:!1,tap:!1,touchstart:!1},updateAnimation:"rotate",zIndex:9999999},o="undefined"!=typeof window?window:null,$={hasTouchCapability:!(!o||!("ontouchstart"in o||o.DocumentTouch&&o.document instanceof o.DocumentTouch||o.navigator.maxTouchPoints)),hasTransitions:function(){if(!o)return!1;var e=(o.document.body||o.document.documentElement).style,t="transition",n=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof e[t])return!0;t=t.charAt(0).toUpperCase()+t.substr(1);for(var i=0;i<n.length;i++)if("string"==typeof e[n[i]+t])return!0;return!1}(),IE:!1,semVer:"4.2.5",window:o},e=function(){this.__$emitterPrivate=D({}),this.__$emitterPublic=D({}),this.__instancesLatestArr=[],this.__plugins={},this._env=$};function t(e){this.$container,this.constraints=null,this.__$tooltip,this.__init(e)}function r(n,i){var o=!0;return D.each(n,function(e,t){if(void 0===i[e]||n[e]!==i[e])return o=!1}),o}function c(e){var t=e.attr("id"),n=t?$.window.document.getElementById(t):null;return n?n===e[0]:D.contains($.window.document.body,e[0])}e.prototype={__bridge:function(e,n,i){if(!n[i]){var t=function(){};t.prototype=e;var o=new t;o.__init&&o.__init(n),D.each(e,function(e,t){0!=e.indexOf("__")&&(n[e]?d.debug&&console.log("The "+e+" method of the "+i+" plugin conflicts with another plugin or native methods"):(n[e]=function(){return o[e].apply(o,Array.prototype.slice.apply(arguments))},n[e].bridged=o))}),n[i]=o}return this},__setWindow:function(e){return $.window=e,this},_getRuler:function(e){return new t(e)},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_plugin:function(e){var t=this;if("string"==typeof e){var n=e,i=null;return 0<n.indexOf(".")?i=t.__plugins[n]:D.each(t.__plugins,function(e,t){if(t.name.substring(t.name.length-n.length-1)=="."+n)return i=t,!1}),i}if(e.name.indexOf(".")<0)throw new Error("Plugins must be namespaced");return(t.__plugins[e.name]=e).core&&t.__bridge(e.core,t,e.name),this},_trigger:function(){var e=Array.prototype.slice.apply(arguments);return"string"==typeof e[0]&&(e[0]={type:e[0]}),this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,e),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,e),this},instances:function(e){var i=[];return D(e||".tooltipstered").each(function(){var n=D(this),e=n.data("tooltipster-ns");e&&D.each(e,function(e,t){i.push(n.data(t))})}),i},instancesLatest:function(){return this.__instancesLatestArr},off:function(){return this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},origins:function(e){return D((e?e+" ":"")+".tooltipstered").toArray()},setDefaults:function(e){return D.extend(d,e),this},triggerHandler:function(){return this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},D.tooltipster=new e,D.Tooltipster=function(e,t){this.__callbacks={close:[],open:[]},this.__closingTime,this.__Content,this.__contentBcr,this.__destroyed=!1,this.__$emitterPrivate=D({}),this.__$emitterPublic=D({}),this.__enabled=!0,this.__garbageCollector,this.__Geometry,this.__lastPosition,this.__namespace="tooltipster-"+Math.round(1e6*Math.random()),this.__options,this.__$originParents,this.__pointerIsOverOrigin=!1,this.__previousThemes=[],this.__state="closed",this.__timeouts={close:[],open:null},this.__touchEvents=[],this.__tracker=null,this._$origin,this._$tooltip,this.__init(e,t)},D.Tooltipster.prototype={__init:function(e,t){var n=this;if(n._$origin=D(e),n.__options=D.extend(!0,{},d,t),n.__optionsFormat(),!$.IE||$.IE>=n.__options.IEmin){var i=null;if(void 0===n._$origin.data("tooltipster-initialTitle")&&(void 0===(i=n._$origin.attr("title"))&&(i=null),n._$origin.data("tooltipster-initialTitle",i)),null!==n.__options.content)n.__contentSet(n.__options.content);else{var o,r=n._$origin.attr("data-tooltip-content");r&&(o=D(r)),o&&o[0]?n.__contentSet(o.first()):n.__contentSet(i)}n._$origin.removeAttr("title").addClass("tooltipstered"),n.__prepareOrigin(),n.__prepareGC(),D.each(n.__options.plugins,function(e,t){n._plug(t)}),$.hasTouchCapability&&D($.window.document.body).on("touchmove."+n.__namespace+"-triggerOpen",function(e){n._touchRecordEvent(e)}),n._on("created",function(){n.__prepareTooltip()})._on("repositioned",function(e){n.__lastPosition=e.position})}else n.__options.disabled=!0},__contentInsert:function(){var e=this,t=e._$tooltip.find(".tooltipster-content"),n=e.__Content;return e._trigger({type:"format",content:e.__Content,format:function(e){n=e}}),e.__options.functionFormat&&(n=e.__options.functionFormat.call(e,e,{origin:e._$origin[0]},e.__Content)),"string"!=typeof n||e.__options.contentAsHTML?t.empty().append(n):t.text(n),e},__contentSet:function(e){return e instanceof D&&this.__options.contentCloning&&(e=e.clone(!0)),this.__Content=e,this._trigger({type:"updated",content:e}),this},__destroyError:function(){throw new Error("This tooltip has been destroyed and cannot execute your method call.")},__geometry:function(){var e=this,t=e._$origin,n=e._$origin.is("area");if(n){var i=e._$origin.parent().attr("name");t=D('img[usemap="#'+i+'"]')}var o=t[0].getBoundingClientRect(),r=D($.window.document),a=D($.window),s=t,l={available:{document:null,window:null},document:{size:{height:r.height(),width:r.width()}},window:{scroll:{left:$.window.scrollX||$.window.document.documentElement.scrollLeft,top:$.window.scrollY||$.window.document.documentElement.scrollTop},size:{height:a.height(),width:a.width()}},origin:{fixedLineage:!1,offset:{},size:{height:o.bottom-o.top,width:o.right-o.left},usemapImage:n?t[0]:null,windowOffset:{bottom:o.bottom,left:o.left,right:o.right,top:o.top}}};if(n){var u=e._$origin.attr("shape"),c=e._$origin.attr("coords");if(c&&(c=c.split(","),D.map(c,function(e,t){c[t]=parseInt(e)})),"default"!=u)switch(u){case"circle":var d=c[0],h=c[1],p=c[2],f=h-p,g=d-p;l.origin.size.height=2*p,l.origin.size.width=l.origin.size.height,l.origin.windowOffset.left+=g,l.origin.windowOffset.top+=f;break;case"rect":var m=c[0],v=c[1],w=c[2],_=c[3];l.origin.size.height=_-v,l.origin.size.width=w-m,l.origin.windowOffset.left+=m,l.origin.windowOffset.top+=v;break;case"poly":for(var y=0,b=0,z=0,S=0,x="even",C=0;C<c.length;C++){var k=c[C];x="even"==x?(z<k&&(z=k,0===C&&(y=z)),k<y&&(y=k),"odd"):(S<k&&(S=k,1==C&&(b=S)),k<b&&(b=k),"even")}l.origin.size.height=S-b,l.origin.size.width=z-y,l.origin.windowOffset.left+=y,l.origin.windowOffset.top+=b}}for(e._trigger({type:"geometry",edit:function(e){l.origin.size.height=e.height,l.origin.windowOffset.left=e.left,l.origin.windowOffset.top=e.top,l.origin.size.width=e.width},geometry:{height:l.origin.size.height,left:l.origin.windowOffset.left,top:l.origin.windowOffset.top,width:l.origin.size.width}}),l.origin.windowOffset.right=l.origin.windowOffset.left+l.origin.size.width,l.origin.windowOffset.bottom=l.origin.windowOffset.top+l.origin.size.height,l.origin.offset.left=l.origin.windowOffset.left+l.window.scroll.left,l.origin.offset.top=l.origin.windowOffset.top+l.window.scroll.top,l.origin.offset.bottom=l.origin.offset.top+l.origin.size.height,l.origin.offset.right=l.origin.offset.left+l.origin.size.width,l.available.document={bottom:{height:l.document.size.height-l.origin.offset.bottom,width:l.document.size.width},left:{height:l.document.size.height,width:l.origin.offset.left},right:{height:l.document.size.height,width:l.document.size.width-l.origin.offset.right},top:{height:l.origin.offset.top,width:l.document.size.width}},l.available.window={bottom:{height:Math.max(l.window.size.height-Math.max(l.origin.windowOffset.bottom,0),0),width:l.window.size.width},left:{height:l.window.size.height,width:Math.max(l.origin.windowOffset.left,0)},right:{height:l.window.size.height,width:Math.max(l.window.size.width-Math.max(l.origin.windowOffset.right,0),0)},top:{height:Math.max(l.origin.windowOffset.top,0),width:l.window.size.width}};"html"!=s[0].tagName.toLowerCase();){if("fixed"==s.css("position")){l.origin.fixedLineage=!0;break}s=s.parent()}return l},__optionsFormat:function(){return"number"==typeof this.__options.animationDuration&&(this.__options.animationDuration=[this.__options.animationDuration,this.__options.animationDuration]),"number"==typeof this.__options.delay&&(this.__options.delay=[this.__options.delay,this.__options.delay]),"number"==typeof this.__options.delayTouch&&(this.__options.delayTouch=[this.__options.delayTouch,this.__options.delayTouch]),"string"==typeof this.__options.theme&&(this.__options.theme=[this.__options.theme]),null===this.__options.parent?this.__options.parent=D($.window.document.body):"string"==typeof this.__options.parent&&(this.__options.parent=D(this.__options.parent)),"hover"==this.__options.trigger?(this.__options.triggerOpen={mouseenter:!0,touchstart:!0},this.__options.triggerClose={mouseleave:!0,originClick:!0,touchleave:!0}):"click"==this.__options.trigger&&(this.__options.triggerOpen={click:!0,tap:!0},this.__options.triggerClose={click:!0,tap:!0}),this._trigger("options"),this},__prepareGC:function(){var e=this;return e.__options.selfDestruction?e.__garbageCollector=setInterval(function(){var n=(new Date).getTime();e.__touchEvents=D.grep(e.__touchEvents,function(e,t){return 6e4<n-e.time}),c(e._$origin)||e.close(function(){e.destroy()})},2e4):clearInterval(e.__garbageCollector),e},__prepareOrigin:function(){var t=this;if(t._$origin.off("."+t.__namespace+"-triggerOpen"),$.hasTouchCapability&&t._$origin.on("touchstart."+t.__namespace+"-triggerOpen touchend."+t.__namespace+"-triggerOpen touchcancel."+t.__namespace+"-triggerOpen",function(e){t._touchRecordEvent(e)}),t.__options.triggerOpen.click||t.__options.triggerOpen.tap&&$.hasTouchCapability){var e="";t.__options.triggerOpen.click&&(e+="click."+t.__namespace+"-triggerOpen "),t.__options.triggerOpen.tap&&$.hasTouchCapability&&(e+="touchend."+t.__namespace+"-triggerOpen"),t._$origin.on(e,function(e){t._touchIsMeaningfulEvent(e)&&t._open(e)})}if(t.__options.triggerOpen.mouseenter||t.__options.triggerOpen.touchstart&&$.hasTouchCapability){e="";t.__options.triggerOpen.mouseenter&&(e+="mouseenter."+t.__namespace+"-triggerOpen "),t.__options.triggerOpen.touchstart&&$.hasTouchCapability&&(e+="touchstart."+t.__namespace+"-triggerOpen"),t._$origin.on(e,function(e){!t._touchIsTouchEvent(e)&&t._touchIsEmulatedEvent(e)||(t.__pointerIsOverOrigin=!0,t._openShortly(e))})}if(t.__options.triggerClose.mouseleave||t.__options.triggerClose.touchleave&&$.hasTouchCapability){e="";t.__options.triggerClose.mouseleave&&(e+="mouseleave."+t.__namespace+"-triggerOpen "),t.__options.triggerClose.touchleave&&$.hasTouchCapability&&(e+="touchend."+t.__namespace+"-triggerOpen touchcancel."+t.__namespace+"-triggerOpen"),t._$origin.on(e,function(e){t._touchIsMeaningfulEvent(e)&&(t.__pointerIsOverOrigin=!1)})}return t},__prepareTooltip:function(){var n=this,e=n.__options.interactive?"auto":"";return n._$tooltip.attr("id",n.__namespace).css({"pointer-events":e,zIndex:n.__options.zIndex}),D.each(n.__previousThemes,function(e,t){n._$tooltip.removeClass(t)}),D.each(n.__options.theme,function(e,t){n._$tooltip.addClass(t)}),n.__previousThemes=D.merge([],n.__options.theme),n},__scrollHandler:function(e){var t=this;if(t.__options.triggerClose.scroll)t._close(e);else if(c(t._$origin)&&c(t._$tooltip)){var a=null;if(e.target===$.window.document)t.__Geometry.origin.fixedLineage||t.__options.repositionOnScroll&&t.reposition(e);else{a=t.__geometry();var s=!1;if("fixed"!=t._$origin.css("position")&&t.__$originParents.each(function(e,t){var n=D(t),i=n.css("overflow-x"),o=n.css("overflow-y");if("visible"!=i||"visible"!=o){var r=t.getBoundingClientRect();if("visible"!=i&&(a.origin.windowOffset.left<r.left||a.origin.windowOffset.right>r.right))return!(s=!0);if("visible"!=o&&(a.origin.windowOffset.top<r.top||a.origin.windowOffset.bottom>r.bottom))return!(s=!0)}if("fixed"==n.css("position"))return!1}),s)t._$tooltip.css("visibility","hidden");else if(t._$tooltip.css("visibility","visible"),t.__options.repositionOnScroll)t.reposition(e);else{var n=a.origin.offset.left-t.__Geometry.origin.offset.left,i=a.origin.offset.top-t.__Geometry.origin.offset.top;t._$tooltip.css({left:t.__lastPosition.coord.left+n,top:t.__lastPosition.coord.top+i})}}t._trigger({type:"scroll",event:e,geo:a})}return t},__stateSet:function(e){return this.__state=e,this._trigger({type:"state",state:e}),this},__timeoutsClear:function(){return clearTimeout(this.__timeouts.open),this.__timeouts.open=null,D.each(this.__timeouts.close,function(e,t){clearTimeout(t)}),this.__timeouts.close=[],this},__trackerStart:function(){var i=this,o=i._$tooltip.find(".tooltipster-content");return i.__options.trackTooltip&&(i.__contentBcr=o[0].getBoundingClientRect()),i.__tracker=setInterval(function(){if(c(i._$origin)&&c(i._$tooltip)){if(i.__options.trackOrigin){var e=i.__geometry(),t=!1;r(e.origin.size,i.__Geometry.origin.size)&&(i.__Geometry.origin.fixedLineage?r(e.origin.windowOffset,i.__Geometry.origin.windowOffset)&&(t=!0):r(e.origin.offset,i.__Geometry.origin.offset)&&(t=!0)),t||(i.__options.triggerClose.mouseleave?i._close():i.reposition())}if(i.__options.trackTooltip){var n=o[0].getBoundingClientRect();n.height===i.__contentBcr.height&&n.width===i.__contentBcr.width||(i.reposition(),i.__contentBcr=n)}}else i._close()},i.__options.trackerInterval),i},_close:function(n,e,t){var i=this,o=!0;if(i._trigger({type:"close",event:n,stop:function(){o=!1}}),o||t){e&&i.__callbacks.close.push(e),i.__callbacks.open=[],i.__timeoutsClear();var r=function(){D.each(i.__callbacks.close,function(e,t){t.call(i,i,{event:n,origin:i._$origin[0]})}),i.__callbacks.close=[]};if("closed"!=i.__state){var a=!0,s=(new Date).getTime()+i.__options.animationDuration[1];if("disappearing"==i.__state&&s>i.__closingTime&&0<i.__options.animationDuration[1]&&(a=!1),a){i.__closingTime=s,"disappearing"!=i.__state&&i.__stateSet("disappearing");var l=function(){clearInterval(i.__tracker),i._trigger({type:"closing",event:n}),i._$tooltip.off("."+i.__namespace+"-triggerClose").removeClass("tooltipster-dying"),D($.window).off("."+i.__namespace+"-triggerClose"),i.__$originParents.each(function(e,t){D(t).off("scroll."+i.__namespace+"-triggerClose")}),i.__$originParents=null,D($.window.document.body).off("."+i.__namespace+"-triggerClose"),i._$origin.off("."+i.__namespace+"-triggerClose"),i._off("dismissable"),i.__stateSet("closed"),i._trigger({type:"after",event:n}),i.__options.functionAfter&&i.__options.functionAfter.call(i,i,{event:n,origin:i._$origin[0]}),r()};$.hasTransitions?(i._$tooltip.css({"-moz-animation-duration":i.__options.animationDuration[1]+"ms","-ms-animation-duration":i.__options.animationDuration[1]+"ms","-o-animation-duration":i.__options.animationDuration[1]+"ms","-webkit-animation-duration":i.__options.animationDuration[1]+"ms","animation-duration":i.__options.animationDuration[1]+"ms","transition-duration":i.__options.animationDuration[1]+"ms"}),i._$tooltip.clearQueue().removeClass("tooltipster-show").addClass("tooltipster-dying"),0<i.__options.animationDuration[1]&&i._$tooltip.delay(i.__options.animationDuration[1]),i._$tooltip.queue(l)):i._$tooltip.stop().fadeOut(i.__options.animationDuration[1],l)}}else r()}return i},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_open:function(e,t){var n=this;if(!n.__destroying&&c(n._$origin)&&n.__enabled){var i=!0;if("closed"==n.__state&&(n._trigger({type:"before",event:e,stop:function(){i=!1}}),i&&n.__options.functionBefore&&(i=n.__options.functionBefore.call(n,n,{event:e,origin:n._$origin[0]}))),!1!==i&&null!==n.__Content){t&&n.__callbacks.open.push(t),n.__callbacks.close=[],n.__timeoutsClear();var o,r=function(){"stable"!=n.__state&&n.__stateSet("stable"),D.each(n.__callbacks.open,function(e,t){t.call(n,n,{origin:n._$origin[0],tooltip:n._$tooltip[0]})}),n.__callbacks.open=[]};if("closed"!==n.__state)o=0,"disappearing"===n.__state?(n.__stateSet("appearing"),$.hasTransitions?(n._$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-show"),0<n.__options.animationDuration[0]&&n._$tooltip.delay(n.__options.animationDuration[0]),n._$tooltip.queue(r)):n._$tooltip.stop().fadeIn(r)):"stable"==n.__state&&r();else{if(n.__stateSet("appearing"),o=n.__options.animationDuration[0],n.__contentInsert(),n.reposition(e,!0),$.hasTransitions?(n._$tooltip.addClass("tooltipster-"+n.__options.animation).addClass("tooltipster-initial").css({"-moz-animation-duration":n.__options.animationDuration[0]+"ms","-ms-animation-duration":n.__options.animationDuration[0]+"ms","-o-animation-duration":n.__options.animationDuration[0]+"ms","-webkit-animation-duration":n.__options.animationDuration[0]+"ms","animation-duration":n.__options.animationDuration[0]+"ms","transition-duration":n.__options.animationDuration[0]+"ms"}),setTimeout(function(){"closed"!=n.__state&&(n._$tooltip.addClass("tooltipster-show").removeClass("tooltipster-initial"),0<n.__options.animationDuration[0]&&n._$tooltip.delay(n.__options.animationDuration[0]),n._$tooltip.queue(r))},0)):n._$tooltip.css("display","none").fadeIn(n.__options.animationDuration[0],r),n.__trackerStart(),D($.window).on("resize."+n.__namespace+"-triggerClose",function(e){var t=D(document.activeElement);(t.is("input")||t.is("textarea"))&&D.contains(n._$tooltip[0],t[0])||n.reposition(e)}).on("scroll."+n.__namespace+"-triggerClose",function(e){n.__scrollHandler(e)}),n.__$originParents=n._$origin.parents(),n.__$originParents.each(function(e,t){D(t).on("scroll."+n.__namespace+"-triggerClose",function(e){n.__scrollHandler(e)})}),n.__options.triggerClose.mouseleave||n.__options.triggerClose.touchleave&&$.hasTouchCapability){n._on("dismissable",function(e){e.dismissable?e.delay?(u=setTimeout(function(){n._close(e.event)},e.delay),n.__timeouts.close.push(u)):n._close(e):clearTimeout(u)});var a=n._$origin,s="",l="",u=null;n.__options.interactive&&(a=a.add(n._$tooltip)),n.__options.triggerClose.mouseleave&&(s+="mouseenter."+n.__namespace+"-triggerClose ",l+="mouseleave."+n.__namespace+"-triggerClose "),n.__options.triggerClose.touchleave&&$.hasTouchCapability&&(s+="touchstart."+n.__namespace+"-triggerClose",l+="touchend."+n.__namespace+"-triggerClose touchcancel."+n.__namespace+"-triggerClose"),a.on(l,function(e){if(n._touchIsTouchEvent(e)||!n._touchIsEmulatedEvent(e)){var t="mouseleave"==e.type?n.__options.delay:n.__options.delayTouch;n._trigger({delay:t[1],dismissable:!0,event:e,type:"dismissable"})}}).on(s,function(e){!n._touchIsTouchEvent(e)&&n._touchIsEmulatedEvent(e)||n._trigger({dismissable:!1,event:e,type:"dismissable"})})}n.__options.triggerClose.originClick&&n._$origin.on("click."+n.__namespace+"-triggerClose",function(e){n._touchIsTouchEvent(e)||n._touchIsEmulatedEvent(e)||n._close(e)}),(n.__options.triggerClose.click||n.__options.triggerClose.tap&&$.hasTouchCapability)&&setTimeout(function(){if("closed"!=n.__state){var e="",t=D($.window.document.body);n.__options.triggerClose.click&&(e+="click."+n.__namespace+"-triggerClose "),n.__options.triggerClose.tap&&$.hasTouchCapability&&(e+="touchend."+n.__namespace+"-triggerClose"),t.on(e,function(e){n._touchIsMeaningfulEvent(e)&&(n._touchRecordEvent(e),n.__options.interactive&&D.contains(n._$tooltip[0],e.target)||n._close(e))}),n.__options.triggerClose.tap&&$.hasTouchCapability&&t.on("touchstart."+n.__namespace+"-triggerClose",function(e){n._touchRecordEvent(e)})}},0),n._trigger("ready"),n.__options.functionReady&&n.__options.functionReady.call(n,n,{origin:n._$origin[0],tooltip:n._$tooltip[0]})}if(0<n.__options.timer){u=setTimeout(function(){n._close()},n.__options.timer+o);n.__timeouts.close.push(u)}}}return n},_openShortly:function(e){var t=this,n=!0;if("stable"!=t.__state&&"appearing"!=t.__state&&!t.__timeouts.open&&(t._trigger({type:"start",event:e,stop:function(){n=!1}}),n)){var i=0==e.type.indexOf("touch")?t.__options.delayTouch:t.__options.delay;i[0]?t.__timeouts.open=setTimeout(function(){t.__timeouts.open=null,t.__pointerIsOverOrigin&&t._touchIsMeaningfulEvent(e)?(t._trigger("startend"),t._open(e)):t._trigger("startcancel")},i[0]):(t._trigger("startend"),t._open(e))}return t},_optionsExtract:function(e,t){var i=this,n=D.extend(!0,{},t),o=i.__options[e];return o||(o={},D.each(t,function(e,t){var n=i.__options[e];void 0!==n&&(o[e]=n)})),D.each(n,function(e,t){void 0!==o[e]&&("object"!=typeof t||t instanceof Array||null==t||"object"!=typeof o[e]||o[e]instanceof Array||null==o[e]?n[e]=o[e]:D.extend(n[e],o[e]))}),n},_plug:function(e){var t=D.tooltipster._plugin(e);if(!t)throw new Error('The "'+e+'" plugin is not defined');return t.instance&&D.tooltipster.__bridge(t.instance,this,t.name),this},_touchIsEmulatedEvent:function(e){for(var t=!1,n=(new Date).getTime(),i=this.__touchEvents.length-1;0<=i;i--){var o=this.__touchEvents[i];if(!(n-o.time<500))break;o.target===e.target&&(t=!0)}return t},_touchIsMeaningfulEvent:function(e){return this._touchIsTouchEvent(e)&&!this._touchSwiped(e.target)||!this._touchIsTouchEvent(e)&&!this._touchIsEmulatedEvent(e)},_touchIsTouchEvent:function(e){return 0==e.type.indexOf("touch")},_touchRecordEvent:function(e){return this._touchIsTouchEvent(e)&&(e.time=(new Date).getTime(),this.__touchEvents.push(e)),this},_touchSwiped:function(e){for(var t=!1,n=this.__touchEvents.length-1;0<=n;n--){var i=this.__touchEvents[n];if("touchmove"==i.type){t=!0;break}if("touchstart"==i.type&&e===i.target)break}return t},_trigger:function(){var e=Array.prototype.slice.apply(arguments);return"string"==typeof e[0]&&(e[0]={type:e[0]}),e[0].instance=this,e[0].origin=this._$origin?this._$origin[0]:null,e[0].tooltip=this._$tooltip?this._$tooltip[0]:null,this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,e),D.tooltipster._trigger.apply(D.tooltipster,e),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,e),this},_unplug:function(n){var i=this;if(i[n]){var e=D.tooltipster._plugin(n);e.instance&&D.each(e.instance,function(e,t){i[e]&&i[e].bridged===i[n]&&delete i[e]}),i[n].__destroy&&i[n].__destroy(),delete i[n]}return i},close:function(e){return this.__destroyed?this.__destroyError():this._close(null,e),this},content:function(e){var t=this;if(void 0===e)return t.__Content;if(t.__destroyed)t.__destroyError();else if(t.__contentSet(e),null!==t.__Content){if("closed"!==t.__state&&(t.__contentInsert(),t.reposition(),t.__options.updateAnimation))if($.hasTransitions){var n=t.__options.updateAnimation;t._$tooltip.addClass("tooltipster-update-"+n),setTimeout(function(){"closed"!=t.__state&&t._$tooltip.removeClass("tooltipster-update-"+n)},1e3)}else t._$tooltip.fadeTo(200,.5,function(){"closed"!=t.__state&&t._$tooltip.fadeTo(200,1)})}else t._close();return t},destroy:function(){var n=this;if(n.__destroyed)n.__destroyError();else{"closed"!=n.__state?n.option("animationDuration",0)._close(null,null,!0):n.__timeoutsClear(),n._trigger("destroy"),n.__destroyed=!0,n._$origin.removeData(n.__namespace).off("."+n.__namespace+"-triggerOpen"),D($.window.document.body).off("."+n.__namespace+"-triggerOpen");var e=n._$origin.data("tooltipster-ns");if(e)if(1===e.length){var t=null;"previous"==n.__options.restoration?t=n._$origin.data("tooltipster-initialTitle"):"current"==n.__options.restoration&&(t="string"==typeof n.__Content?n.__Content:D("<div></div>").append(n.__Content).html()),t&&n._$origin.attr("title",t),n._$origin.removeClass("tooltipstered"),n._$origin.removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else e=D.grep(e,function(e,t){return e!==n.__namespace}),n._$origin.data("tooltipster-ns",e);n._trigger("destroyed"),n._off(),n.off(),n.__Content=null,n.__$emitterPrivate=null,n.__$emitterPublic=null,n.__options.parent=null,n._$origin=null,n._$tooltip=null,D.tooltipster.__instancesLatestArr=D.grep(D.tooltipster.__instancesLatestArr,function(e,t){return n!==e}),clearInterval(n.__garbageCollector)}return n},disable:function(){return this.__destroyed?this.__destroyError():(this._close(),this.__enabled=!1),this},elementOrigin:function(){if(!this.__destroyed)return this._$origin[0];this.__destroyError()},elementTooltip:function(){return this._$tooltip?this._$tooltip[0]:null},enable:function(){return this.__enabled=!0,this},hide:function(e){return this.close(e)},instance:function(){return this},off:function(){return this.__destroyed||this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},open:function(e){return this.__destroyed?this.__destroyError():this._open(null,e),this},option:function(e,t){return void 0===t?this.__options[e]:(this.__destroyed?this.__destroyError():(this.__options[e]=t,this.__optionsFormat(),0<=D.inArray(e,["trigger","triggerClose","triggerOpen"])&&this.__prepareOrigin(),"selfDestruction"===e&&this.__prepareGC()),this)},reposition:function(e,t){var n=this;return n.__destroyed?n.__destroyError():"closed"!=n.__state&&c(n._$origin)&&(t||c(n._$tooltip))&&(t||n._$tooltip.detach(),n.__Geometry=n.__geometry(),n._trigger({type:"reposition",event:e,helper:{geo:n.__Geometry}})),n},show:function(e){return this.open(e)},status:function(){return{destroyed:this.__destroyed,enabled:this.__enabled,open:"closed"!==this.__state,state:this.__state}},triggerHandler:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},D.fn.tooltipster=function(){var o=Array.prototype.slice.apply(arguments),i="You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.";if(0===this.length)return this;if("string"==typeof o[0]){var r="#*$~&";return this.each(function(){var e=D(this).data("tooltipster-ns"),t=e?D(this).data(e[0]):null;if(!t)throw new Error("You called Tooltipster's \""+o[0]+'" method on an uninitialized element');if("function"!=typeof t[o[0]])throw new Error('Unknown method "'+o[0]+'"');1<this.length&&"content"==o[0]&&(o[1]instanceof D||"object"==typeof o[1]&&null!=o[1]&&o[1].tagName)&&!t.__options.contentCloning&&t.__options.debug&&console.log(i);var n=t[o[0]](o[1],o[2]);if(n!==t||"instance"===o[0])return r=n,!1}),"#*$~&"!==r?r:this}D.tooltipster.__instancesLatestArr=[];var e=o[0]&&void 0!==o[0].multiple,a=e&&o[0].multiple||!e&&d.multiple,t=o[0]&&void 0!==o[0].content,n=t&&o[0].content||!t&&d.content,s=o[0]&&void 0!==o[0].contentCloning,l=s&&o[0].contentCloning||!s&&d.contentCloning,u=o[0]&&void 0!==o[0].debug,c=u&&o[0].debug||!u&&d.debug;return 1<this.length&&(n instanceof D||"object"==typeof n&&null!=n&&n.tagName)&&!l&&c&&console.log(i),this.each(function(){var e=!1,t=D(this),n=t.data("tooltipster-ns"),i=null;n?a?e=!0:c&&(console.log("Tooltipster: one or more tooltips are already attached to the element below. Ignoring."),console.log(this)):e=!0,e&&(i=new D.Tooltipster(this,o[0]),n||(n=[]),n.push(i.__namespace),t.data("tooltipster-ns",n),t.data(i.__namespace,i),i.__options.functionInit&&i.__options.functionInit.call(i,i,{origin:this}),i._trigger("init")),D.tooltipster.__instancesLatestArr.push(i)}),this},t.prototype={__init:function(e){this.__$tooltip=e,this.__$tooltip.css({left:0,overflow:"hidden",position:"absolute",top:0}).find(".tooltipster-content").css("overflow","auto"),this.$container=D('<div class="tooltipster-ruler"></div>').append(this.__$tooltip).appendTo($.window.document.body)},__forceRedraw:function(){var e=this.__$tooltip.parent();this.__$tooltip.detach(),this.__$tooltip.appendTo(e)},constrain:function(e,t){return this.constraints={width:e,height:t},this.__$tooltip.css({display:"block",height:"",overflow:"auto",width:e}),this},destroy:function(){this.__$tooltip.detach().find(".tooltipster-content").css({display:"",overflow:""}),this.$container.remove()},free:function(){return this.constraints=null,this.__$tooltip.css({display:"",height:"",overflow:"visible",width:""}),this},measure:function(){this.__forceRedraw();var e=this.__$tooltip[0].getBoundingClientRect(),t={size:{height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}};if(this.constraints){var n=this.__$tooltip.find(".tooltipster-content"),i=this.__$tooltip.outerHeight(),o=n[0].getBoundingClientRect(),r={height:i<=this.constraints.height,width:e.width<=this.constraints.width&&o.width>=n[0].scrollWidth-1};t.fits=r.height&&r.width}return $.IE&&$.IE<=11&&t.size.width!==$.window.document.documentElement.clientWidth&&(t.size.width=Math.ceil(t.size.width)+1),t}};var n=navigator.userAgent.toLowerCase();-1!=n.indexOf("msie")?$.IE=parseInt(n.split("msie")[1]):-1!==n.toLowerCase().indexOf("trident")&&-1!==n.indexOf(" rv:11")?$.IE=11:-1!=n.toLowerCase().indexOf("edge/")&&($.IE=parseInt(n.toLowerCase().split("edge/")[1]));var i="tooltipster.sideTip";return D.tooltipster._plugin({name:i,instance:{__defaults:function(){return{arrow:!0,distance:6,functionPosition:null,maxWidth:null,minIntersection:16,minWidth:0,position:null,side:"top",viewportAware:!0}},__init:function(e){var t=this;t.__instance=e,t.__namespace="tooltipster-sideTip-"+Math.round(1e6*Math.random()),t.__previousState="closed",t.__options,t.__optionsFormat(),t.__instance._on("state."+t.__namespace,function(e){"closed"==e.state?t.__close():"appearing"==e.state&&"closed"==t.__previousState&&t.__create(),t.__previousState=e.state}),t.__instance._on("options."+t.__namespace,function(){t.__optionsFormat()}),t.__instance._on("reposition."+t.__namespace,function(e){t.__reposition(e.event,e.helper)})},__close:function(){this.__instance.content()instanceof D&&this.__instance.content().detach(),this.__instance._$tooltip.remove(),this.__instance._$tooltip=null},__create:function(){var e=D('<div class="tooltipster-base tooltipster-sidetip"><div class="tooltipster-box"><div class="tooltipster-content"></div></div><div class="tooltipster-arrow"><div class="tooltipster-arrow-uncropped"><div class="tooltipster-arrow-border"></div><div class="tooltipster-arrow-background"></div></div></div></div>');this.__options.arrow||e.find(".tooltipster-box").css("margin",0).end().find(".tooltipster-arrow").hide(),this.__options.minWidth&&e.css("min-width",this.__options.minWidth+"px"),this.__options.maxWidth&&e.css("max-width",this.__options.maxWidth+"px"),this.__instance._$tooltip=e,this.__instance._trigger("created")},__destroy:function(){this.__instance._off("."+self.__namespace)},__optionsFormat:function(){var e=this;if(e.__options=e.__instance._optionsExtract(i,e.__defaults()),e.__options.position&&(e.__options.side=e.__options.position),"object"!=typeof e.__options.distance&&(e.__options.distance=[e.__options.distance]),e.__options.distance.length<4&&(void 0===e.__options.distance[1]&&(e.__options.distance[1]=e.__options.distance[0]),void 0===e.__options.distance[2]&&(e.__options.distance[2]=e.__options.distance[0]),void 0===e.__options.distance[3]&&(e.__options.distance[3]=e.__options.distance[1]),e.__options.distance={top:e.__options.distance[0],right:e.__options.distance[1],bottom:e.__options.distance[2],left:e.__options.distance[3]}),"string"==typeof e.__options.side){e.__options.side=[e.__options.side,{top:"bottom",right:"left",bottom:"top",left:"right"}[e.__options.side]],"left"==e.__options.side[0]||"right"==e.__options.side[0]?e.__options.side.push("top","bottom"):e.__options.side.push("right","left")}6===D.tooltipster._env.IE&&!0!==e.__options.arrow&&(e.__options.arrow=!1)},__reposition:function(l,u){var t,c=this,d=c.__targetFind(u),h=[];c.__instance._$tooltip.detach();var n=c.__instance._$tooltip.clone(),p=D.tooltipster._getRuler(n),f=!1,e=c.__instance.option("animation");switch(e&&n.removeClass("tooltipster-"+e),D.each(["window","document"],function(e,o){var r=null;if(c.__instance._trigger({container:o,helper:u,satisfied:f,takeTest:function(e){r=e},results:h,type:"positionTest"}),1==r||0!=r&&0==f&&("window"!=o||c.__options.viewportAware))for(e=0;e<c.__options.side.length;e++){var a={horizontal:0,vertical:0},s=c.__options.side[e];"top"==s||"bottom"==s?a.vertical=c.__options.distance[s]:a.horizontal=c.__options.distance[s],c.__sideChange(n,s),D.each(["natural","constrained"],function(e,t){if(r=null,c.__instance._trigger({container:o,event:l,helper:u,mode:t,results:h,satisfied:f,side:s,takeTest:function(e){r=e},type:"positionTest"}),1==r||0!=r&&0==f){var n={container:o,distance:a,fits:null,mode:t,outerSize:null,side:s,size:null,target:d[s],whole:null},i=("natural"==t?p.free():p.constrain(u.geo.available[o][s].width-a.horizontal,u.geo.available[o][s].height-a.vertical)).measure();if(n.size=i.size,n.outerSize={height:i.size.height+a.vertical,width:i.size.width+a.horizontal},"natural"==t?u.geo.available[o][s].width>=n.outerSize.width&&u.geo.available[o][s].height>=n.outerSize.height?n.fits=!0:n.fits=!1:n.fits=i.fits,"window"==o&&(n.fits?n.whole="top"==s||"bottom"==s?u.geo.origin.windowOffset.right>=c.__options.minIntersection&&u.geo.window.size.width-u.geo.origin.windowOffset.left>=c.__options.minIntersection:u.geo.origin.windowOffset.bottom>=c.__options.minIntersection&&u.geo.window.size.height-u.geo.origin.windowOffset.top>=c.__options.minIntersection:n.whole=!1),h.push(n),n.whole)f=!0;else if("natural"==n.mode&&(n.fits||n.size.width<=u.geo.available[o][s].width))return!1}})}}),c.__instance._trigger({edit:function(e){h=e},event:l,helper:u,results:h,type:"positionTested"}),h.sort(function(e,t){return e.whole&&!t.whole?-1:!e.whole&&t.whole?1:e.whole&&t.whole?(n=c.__options.side.indexOf(e.side))<(i=c.__options.side.indexOf(t.side))?-1:i<n?1:"natural"==e.mode?-1:1:e.fits&&!t.fits?-1:!e.fits&&t.fits?1:e.fits&&t.fits?(n=c.__options.side.indexOf(e.side))<(i=c.__options.side.indexOf(t.side))?-1:i<n?1:"natural"==e.mode?-1:1:"document"==e.container&&"bottom"==e.side&&"natural"==e.mode?-1:1;var n,i}),(t=h[0]).coord={},t.side){case"left":case"right":t.coord.top=Math.floor(t.target-t.size.height/2);break;case"bottom":case"top":t.coord.left=Math.floor(t.target-t.size.width/2)}switch(t.side){case"left":t.coord.left=u.geo.origin.windowOffset.left-t.outerSize.width;break;case"right":t.coord.left=u.geo.origin.windowOffset.right+t.distance.horizontal;break;case"top":t.coord.top=u.geo.origin.windowOffset.top-t.outerSize.height;break;case"bottom":t.coord.top=u.geo.origin.windowOffset.bottom+t.distance.vertical}"window"==t.container?"top"==t.side||"bottom"==t.side?t.coord.left<0?0<=u.geo.origin.windowOffset.right-this.__options.minIntersection?t.coord.left=0:t.coord.left=u.geo.origin.windowOffset.right-this.__options.minIntersection-1:t.coord.left>u.geo.window.size.width-t.size.width&&(u.geo.origin.windowOffset.left+this.__options.minIntersection<=u.geo.window.size.width?t.coord.left=u.geo.window.size.width-t.size.width:t.coord.left=u.geo.origin.windowOffset.left+this.__options.minIntersection+1-t.size.width):t.coord.top<0?0<=u.geo.origin.windowOffset.bottom-this.__options.minIntersection?t.coord.top=0:t.coord.top=u.geo.origin.windowOffset.bottom-this.__options.minIntersection-1:t.coord.top>u.geo.window.size.height-t.size.height&&(u.geo.origin.windowOffset.top+this.__options.minIntersection<=u.geo.window.size.height?t.coord.top=u.geo.window.size.height-t.size.height:t.coord.top=u.geo.origin.windowOffset.top+this.__options.minIntersection+1-t.size.height):(t.coord.left>u.geo.window.size.width-t.size.width&&(t.coord.left=u.geo.window.size.width-t.size.width),t.coord.left<0&&(t.coord.left=0)),c.__sideChange(n,t.side),u.tooltipClone=n[0],u.tooltipParent=c.__instance.option("parent").parent[0],u.mode=t.mode,u.whole=t.whole,u.origin=c.__instance._$origin[0],u.tooltip=c.__instance._$tooltip[0],delete t.container,delete t.fits,delete t.mode,delete t.outerSize,delete t.whole,t.distance=t.distance.horizontal||t.distance.vertical;var i,o,r,a=D.extend(!0,{},t);if(c.__instance._trigger({edit:function(e){t=e},event:l,helper:u,position:a,type:"position"}),c.__options.functionPosition){var s=c.__options.functionPosition.call(c,c.__instance,u,a);s&&(t=s)}p.destroy(),o="top"==t.side||"bottom"==t.side?(i={prop:"left",val:t.target-t.coord.left},t.size.width-this.__options.minIntersection):(i={prop:"top",val:t.target-t.coord.top},t.size.height-this.__options.minIntersection),i.val<this.__options.minIntersection?i.val=this.__options.minIntersection:i.val>o&&(i.val=o),r=u.geo.origin.fixedLineage?u.geo.origin.windowOffset:{left:u.geo.origin.windowOffset.left+u.geo.window.scroll.left,top:u.geo.origin.windowOffset.top+u.geo.window.scroll.top},t.coord={left:r.left+(t.coord.left-u.geo.origin.windowOffset.left),top:r.top+(t.coord.top-u.geo.origin.windowOffset.top)},c.__sideChange(c.__instance._$tooltip,t.side),u.geo.origin.fixedLineage?c.__instance._$tooltip.css("position","fixed"):c.__instance._$tooltip.css("position",""),c.__instance._$tooltip.css({left:t.coord.left,top:t.coord.top,height:t.size.height,width:t.size.width}).find(".tooltipster-arrow").css({left:"",top:""}).css(i.prop,i.val),c.__instance._$tooltip.appendTo(c.__instance.option("parent")),c.__instance._trigger({type:"repositioned",event:l,position:t})},__sideChange:function(e,t){e.removeClass("tooltipster-bottom").removeClass("tooltipster-left").removeClass("tooltipster-right").removeClass("tooltipster-top").addClass("tooltipster-"+t)},__targetFind:function(e){var t={},n=this.__instance._$origin[0].getClientRects();1<n.length&&(1==this.__instance._$origin.css("opacity")&&(this.__instance._$origin.css("opacity",.99),n=this.__instance._$origin[0].getClientRects(),this.__instance._$origin.css("opacity",1)));if(n.length<2)t.top=Math.floor(e.geo.origin.windowOffset.left+e.geo.origin.size.width/2),t.bottom=t.top,t.left=Math.floor(e.geo.origin.windowOffset.top+e.geo.origin.size.height/2),t.right=t.left;else{var i=n[0];t.top=Math.floor(i.left+(i.right-i.left)/2),i=2<n.length?n[Math.ceil(n.length/2)-1]:n[0],t.right=Math.floor(i.top+(i.bottom-i.top)/2),i=n[n.length-1],t.bottom=Math.floor(i.left+(i.right-i.left)/2),i=2<n.length?n[Math.ceil((n.length+1)/2)-1]:n[n.length-1],t.left=Math.floor(i.top+(i.bottom-i.top)/2)}return t}}}),D}),!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(i){return function(e,t){if("__setXHR_"===e){var n=t(this);n instanceof Function&&n(this)}else i.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="12.2.13",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(s,e,l){var u=this;u.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var c=this.isResumeSupported();function t(n){n.method=n.method||"POST",n.headers=n.headers||{};var i=n._deferred=n._deferred||e.defer(),o=i.promise;function r(e){i.notify&&i.notify(e),o.progressFunc&&l(function(){o.progressFunc(e)})}function t(e){return null!=n._start&&c?{loaded:e.loaded+n._start,total:n._file&&n._file.size||e.total,type:e.type,config:n,lengthComputable:!0,target:e.target}:e}function a(){s(n).then(function(e){if(c&&n._chunkSize&&!n._finished&&n._file){var t=n._file&&n._file.size||0;r({loaded:Math.min(n._end,t),total:t,config:n,type:"progress"}),u.upload(n,!0)}else n._finished&&delete n._finished,i.resolve(e)},function(e){i.reject(e)},function(e){i.notify(e)})}return n.disableProgress||(n.headers.__setXHR_=function(){return function(e){e&&e.upload&&e.upload.addEventListener&&(n.__XHR=e,n.xhrFn&&n.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=n,r(t(e))},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=n,r(t(e)))},!1))}}),c?n._chunkSize&&n._end&&!n._finished?(n._start=n._end,n._end+=n._chunkSize,a()):n.resumeSizeUrl?s.get(n.resumeSizeUrl).then(function(e){n.resumeSizeResponseReader?n._start=n.resumeSizeResponseReader(e.data):n._start=parseInt((null==e.data.size?e.data:e.data.size).toString()),n._chunkSize&&(n._end=n._start+n._chunkSize),a()},function(e){throw e}):n.resumeSize?n.resumeSize().then(function(e){n._start=e,n._chunkSize&&(n._end=n._start+n._chunkSize),a()},function(e){throw e}):(n._chunkSize&&(n._start=0,n._end=n._start+n._chunkSize),a()):a(),o.success=function(t){return o.then(function(e){t(e.data,e.status,e.headers,n)}),o},o.error=function(t){return o.then(null,function(e){t(e.data,e.status,e.headers,n)}),o},o.progress=function(t){return o.progressFunc=t,o.then(null,null,function(e){t(e)}),o},o.abort=o.pause=function(){return n.__XHR&&l(function(){n.__XHR.abort()}),o},o.xhr=function(e){var t;return n.xhrFn=(t=n.xhrFn,function(){t&&t.apply(o,arguments),e.apply(o,arguments)}),o},u.promisesCount++,o.finally&&o.finally instanceof Function&&o.finally(function(){u.promisesCount--}),o}function n(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}this.isUploadInProgress=function(){return 0<u.promisesCount},this.rename=function(e,t){return e.ngfName=t,e},this.jsonBlob=function(e){null==e||angular.isString(e)||(e=JSON.stringify(e));var t=new window.Blob([e],{type:"application/json"});return t._ngfBlob=!0,t},this.json=function(e){return angular.toJson(e)},this.isFile=function(e){return null!=e&&(e instanceof window.Blob||e.flashId&&e.name&&e.size)},this.upload=function(s,e){function l(e,t,n){if(void 0!==t)if(angular.isDate(t)&&(t=t.toISOString()),angular.isString(t))e.append(n,t);else if(u.isFile(t)){var i=function(e,t){if(e._ngfBlob)return e;if(s._file=s._file||e,null!=s._start&&c){s._end&&s._end>=e.size&&(s._finished=!0,s._end=e.size);var n=e.slice(s._start,s._end||e.size);return n.name=e.name,n.ngfName=e.ngfName,s._chunkSize&&(t.append("_chunkSize",s._chunkSize),t.append("_currentChunkSize",s._end-s._start),t.append("_chunkNumber",Math.floor(s._start/s._chunkSize)),t.append("_totalSize",s._file.size)),n}return e}(t,e),o=n.split(",");o[1]&&(i.ngfName=o[1].replace(/^\s+|\s+$/g,""),n=o[0]),s._fileKey=s._fileKey||n,e.append(n,i,i.ngfName||i.name)}else if(angular.isObject(t)){if(t.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+n;t.$$ngfCircularDetection=!0;try{for(var r in t)if(t.hasOwnProperty(r)&&"$$ngfCircularDetection"!==r){var a=null==s.objectKey?"[i]":s.objectKey;t.length&&-1<parseInt(r)&&(a=null==s.arrayKey?a:s.arrayKey),l(e,t[r],n+a.replace(/[ik]/g,r))}}finally{delete t.$$ngfCircularDetection}}else e.append(n,t)}return e||(s=n(s)),s._isDigested||(s._isDigested=!0,s._chunkSize=u.translateScalars(s.resumeChunkSize),s._chunkSize=s._chunkSize?parseInt(s._chunkSize.toString()):null,s.headers=s.headers||{},s.headers["Content-Type"]=void 0,s.transformRequest=s.transformRequest?angular.isArray(s.transformRequest)?s.transformRequest:[s.transformRequest]:[],s.transformRequest.push(function(e){var t,n=new window.FormData;for(t in e=e||s.fields||{},s.file&&(e.file=s.file),e)if(e.hasOwnProperty(t)){var i=e[t];s.formDataAppender?s.formDataAppender(n,t,i):l(n,i,t)}return n})),t(s)},this.http=function(e){return(e=n(e)).transformRequest=e.transformRequest||function(e){return window.ArrayBuffer&&e instanceof window.ArrayBuffer||e instanceof window.Blob?e:s.defaults.transformRequest[0].apply(this,arguments)},e._chunkSize=u.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,t(e)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1024*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1048576*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1073741824*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.urlToBlob=function(r){var a=e.defer();return s({url:r,method:"get",responseType:"arraybuffer"}).then(function(e){var t=new Uint8Array(e.data),n=e.headers("content-type")||"image/WebP",i=new window.Blob([t],{type:n}),o=r.match(/.*\/(.+?)(\?.*)?$/);1<o.length&&(i.name=o[1]),a.resolve(i)},function(e){a.reject(e)}),a.promise},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(b,z,e,S,t){var x=t;function C(i,o,r,a,s){var l=[x.emptyPromise()];function e(n,t){if(0===n.type.indexOf("image")){if(i.pattern&&!x.validatePattern(n,i.pattern))return;i.resizeIf=function(e,t){return x.attrGetter("ngfResizeIf",r,a,{$width:e,$height:t,$file:n})};var e=x.resize(n,i);l.push(e),e.then(function(e){o.splice(t,1,e)},function(e){n.$error="resize",(n.$errorMessages=n.$errorMessages||{}).resize=!0,n.$errorParam=(e?(e.message?e.message:e)+": ":"")+(n&&n.name),s.$ngfValidations.push({name:"resize",valid:!1}),x.applyModelValidation(s,o)})}}for(var t=0;t<o.length;t++)e(o[t],t);return S.all(l)}return x.getAttrWithDefaults=function(e,t){if(null!=e[t])return e[t];var n=x.defaults[t];return null==n?n:angular.isString(n)?n:JSON.stringify(n)},x.attrGetter=function(t,e,n,i){var o=this.getAttrWithDefaults(e,t);if(!n)return o;try{return i?b(o)(n,i):b(o)(n)}catch(e){if(t.search(/min|max|pattern/i))return o;throw e}},x.shouldUpdateOn=function(e,t,n){var i=x.attrGetter("ngfModelOptions",t,n);return!i||!i.updateOn||-1<i.updateOn.split(" ").indexOf(e)},x.emptyPromise=function(){var e=S.defer(),t=arguments;return z(function(){e.resolve.apply(e,t)}),e.promise},x.rejectPromise=function(){var e=S.defer(),t=arguments;return z(function(){e.reject.apply(e,t)}),e.promise},x.happyPromise=function(e,t){var n=S.defer();return e.then(function(e){n.resolve(e)},function(e){z(function(){throw e}),n.resolve(t)}),n.promise},x.updateModel=function(l,u,c,d,r,h,t){function n(e,t,n,i,o){u.$$ngfPrevValidFiles=e,u.$$ngfPrevInvalidFiles=t;var r=e&&e.length?e[0]:null,a=t&&t.length?t[0]:null;l&&(x.applyModelValidation(l,e),l.$setViewValue(o?r:e)),d&&b(d)(c,{$files:e,$file:r,$newFiles:n,$duplicateFiles:i,$invalidFiles:t,$invalidFile:a,$event:h});var s=x.attrGetter("ngfModelInvalid",u);s&&z(function(){b(s).assign(c,o?a:t)}),z(function(){})}var a,s,p,e,f=[],g=[],m=[];function i(){function i(){z(function(){n(v?s.concat(m):m,v?p.concat(g):g,r,f,w)},y&&y.debounce?y.debounce.change||y.debounce:0)}var o=_?a:m;(function(t,n,i,o){var e=x.attrGetter("ngfResize",n,i);if(!e||!x.isResizeSupported()||!t.length)return x.emptyPromise();if(e instanceof Function){var r=S.defer();return e(t).then(function(e){C(e,t,n,i,o).then(function(e){r.resolve(e)},function(e){r.reject(e)})},function(e){r.reject(e)})}return C(e,t,n,i,o)})(o,u,c,l).then(function(){_?x.validate(a,v?s.length:0,l,u,c).then(function(e){m=e.validsFiles,g=e.invalidsFiles,i()}):i()},function(){for(var e=0;e<o.length;e++){var t=o[e];if("resize"===t.$error){var n=m.indexOf(t);-1<n&&(m.splice(n,1),g.push(t)),i()}}})}s=u.$$ngfPrevValidFiles||[],p=u.$$ngfPrevInvalidFiles||[],l&&l.$modelValue&&(e=l.$modelValue,s=angular.isArray(e)?e:[e]);var v=x.attrGetter("ngfKeep",u,c);a=(r||[]).slice(0),"distinct"!==v&&!0!==x.attrGetter("ngfKeepDistinct",u,c)||function(){function n(e,t){return e.name===t.name&&(e.$ngfOrigSize||e.size)===(t.$ngfOrigSize||t.size)&&e.type===t.type}function e(e){var t;for(t=0;t<s.length;t++)if(n(e,s[t]))return!0;for(t=0;t<p.length;t++)if(n(e,p[t]))return!0;return!1}if(r){a=[],f=[];for(var t=0;t<r.length;t++)e(r[t])?f.push(r[t]):a.push(r[t])}}();var w=!v&&!x.attrGetter("ngfMultiple",u,c)&&!x.attrGetter("multiple",u);if(!v||a.length){x.attrGetter("ngfBeforeModelChange",u,c,{$files:r,$file:r&&r.length?r[0]:null,$newFiles:a,$duplicateFiles:f,$event:h});var _=x.attrGetter("ngfValidateAfterResize",u,c),y=x.attrGetter("ngfModelOptions",u,c);x.validate(a,v?s.length:0,l,u,c).then(function(e){t?n(a,[],r,f,w):(y&&y.allowInvalid||_?m=a:(m=e.validFiles,g=e.invalidFiles),x.attrGetter("ngfFixOrientation",u,c)&&x.isExifSupported()?function(n,i,o){var r=[x.emptyPromise()];return angular.forEach(n,function(e,t){0===e.type.indexOf("image/jpeg")&&x.attrGetter("ngfFixOrientation",i,o,{$file:e})&&r.push(x.happyPromise(x.applyExifRotation(e),e).then(function(e){n.splice(t,1,e)}))}),S.all(r)}(m,u,c).then(function(){i()}):i())})}},x}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,o,t,v){var w=[];function r(o,r,a,s,e,t,n,l){var i=function(e,t){return l.attrGetter(e,a,t)};function u(){return"input"===r[0].tagName.toLowerCase()&&a.type&&"file"===a.type.toLowerCase()}function c(){return i("ngfChange")||i("ngfSelect")}function d(e){if(l.shouldUpdateOn("change",a,o)){var t=e.__files_||e.target&&e.target.files,n=[];if(!t)return;for(var i=0;i<t.length;i++)n.push(t[i]);l.updateModel(s,a,o,c(),n.length?n:null,e)}}l.registerModelChangeValidator(s,a,o);var h=[];i("ngfMultiple")&&h.push(o.$watch(i("ngfMultiple"),function(){g.attr("multiple",i("ngfMultiple",o))})),i("ngfCapture")&&h.push(o.$watch(i("ngfCapture"),function(){g.attr("capture",i("ngfCapture",o))})),i("ngfAccept")&&h.push(o.$watch(i("ngfAccept"),function(){g.attr("accept",i("ngfAccept",o))})),h.push(a.$observe("accept",function(){g.attr("accept",i("accept"))}));var p=0,f=0;var g=r;function m(e){l.shouldUpdateOn("click",a,o)&&g.val()&&(g.val(null),l.updateModel(s,a,o,c(),null,e,!0))}u()||(g=function(){if(u())return r;var e=angular.element('<input type="file">'),t=angular.element("<label>upload</label>");return t.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),function(t,n){function e(e){t.attr("id","ngf-"+e),n.attr("id","ngf-label-"+e)}for(var i=0;i<r[0].attributes.length;i++){var o=r[0].attributes[i];"type"!==o.name&&"class"!==o.name&&"style"!==o.name&&("id"===o.name?(e(o.value),h.push(a.$observe("id",e))):t.attr(o.name,o.value||"required"!==o.name&&"multiple"!==o.name?o.value:o.name))}}(e,t),w.push({el:r,ref:t}),document.body.appendChild(t.append(e)[0]),e}()),g.bind("change",d),u()?r.bind("click",m):r.bind("click touchstart touchend",function(e){if(r.attr("disabled"))return!1;if(!i("ngfSelectDisabled",o)){var t=function(e){var t=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches;if(t){if("touchstart"===e.type)return f=t[0].clientX,p=t[0].clientY,!0;if("touchend"===e.type){var n=t[0].clientX,i=t[0].clientY;if(20<Math.abs(n-f)||20<Math.abs(i-p))return e.stopPropagation(),e.preventDefault(),!1}return!0}}(e);if(null!=t)return t;m(e);try{u()||document.body.contains(g[0])||(w.push({el:r,ref:g.parent()}),document.body.appendChild(g.parent()[0]),g.bind("change",d))}catch(e){}return function(e){var t=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(t&&2<t.length){var n=v.defaults.androidFixMinorVersion||4;return parseInt(t[1])<4||parseInt(t[1])===n&&parseInt(t[2])<n}return-1===e.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(e)}(navigator.userAgent)?setTimeout(function(){g[0].click()},0):g[0].click(),!1}}),-1!==navigator.appVersion.indexOf("MSIE 10")&&g.bind("click",function e(t){if(g&&!g.attr("__ngf_ie10_Fix_")){if(!g[0].parentNode)return void(g=null);t.preventDefault(),t.stopPropagation(),g.unbind("click");var n=g.clone();return g.replaceWith(n),(g=n).attr("__ngf_ie10_Fix_","true"),g.bind("change",d),g.bind("click",e),g[0].click(),!1}g.removeAttr("__ngf_ie10_Fix_")}),s&&s.$formatters.push(function(e){return null!=e&&0!==e.length||g.val()&&g.val(null),e}),o.$on("$destroy",function(){u()||g.parent().remove(),angular.forEach(h,function(e){e()})}),t(function(){for(var e=0;e<w.length;e++){var t=w[e];document.body.contains(t.el[0])||(w.splice(e,1),t.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(r,g,d)}return{restrict:"AEC",require:"?ngModel",link:function(e,t,n,i){r(e,t,n,i,0,o,0,v)}}}]),function(){function a(i,e,o,r,a,s,l,u){function c(t){var n=i.attrGetter("ngfNoObjectUrl",a,o);i.dataUrl(t,n).finally(function(){e(function(){var e=(n?t.$ngfDataUrl:t.$ngfBlobUrl)||t.$ngfDataUrl;u?r.css("background-image","url('"+(e||"")+"')"):r.attr("src",e),e?r.removeClass("ng-hide"):r.addClass("ng-hide")})})}e(function(){var e=o.$watch(a[s],function(n){var e=l;if("ngfThumbnail"===s&&(e||(e={width:r[0].naturalWidth||r[0].clientWidth,height:r[0].naturalHeight||r[0].clientHeight}),0===e.width&&window.getComputedStyle)){var t=getComputedStyle(r[0]);t.width&&-1<t.width.indexOf("px")&&t.height&&-1<t.height.indexOf("px")&&(e={width:parseInt(t.width.slice(0,-2)),height:parseInt(t.height.slice(0,-2))})}if(angular.isString(n))return r.removeClass("ng-hide"),u?r.css("background-image","url('"+n+"')"):r.attr("src",n);!n||!n.type||0!==n.type.search(function(e){return"img"===e.tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./}(r[0]))||u&&0!==n.type.indexOf("image")?r.addClass("ng-hide"):e&&i.isResizeSupported()?(e.resizeIf=function(e,t){return i.attrGetter("ngfResizeIf",a,o,{$width:e,$height:t,$file:n})},i.resize(n,e).then(function(e){c(e)},function(e){throw e})):c(n)});o.$on("$destroy",function(){e()})})}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,n,s){var l=e;return l.base64DataUrl=function(n){if(angular.isArray(n)){var i=s.defer(),o=0;return angular.forEach(n,function(e){l.dataUrl(e,!0).finally(function(){if(++o===n.length){var t=[];angular.forEach(n,function(e){t.push(e.$ngfDataUrl)}),i.resolve(t,n)}})}),i.promise}return l.dataUrl(n,!0)},l.dataUrl=function(r,t){if(!r)return l.emptyPromise(r,r);if(t&&null!=r.$ngfDataUrl||!t&&null!=r.$ngfBlobUrl)return l.emptyPromise(t?r.$ngfDataUrl:r.$ngfBlobUrl,r);var e=t?r.$$ngfDataUrlPromise:r.$$ngfBlobUrlPromise;if(e)return e;var a=s.defer();return n(function(){if(window.FileReader&&r&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||r.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||r.size<4e6)){var i=window.URL||window.webkitURL;if(i&&i.createObjectURL&&!t){var o;try{o=i.createObjectURL(r)}catch(e){return void n(function(){r.$ngfBlobUrl="",a.reject()})}n(function(){if(r.$ngfBlobUrl=o){a.resolve(o,r),l.blobUrls=l.blobUrls||[],l.blobUrlsTotalSize=l.blobUrlsTotalSize||0,l.blobUrls.push({url:o,size:r.size}),l.blobUrlsTotalSize+=r.size||0;for(var e=l.defaults.blobUrlsMaxMemory||268435456,t=l.defaults.blobUrlsMaxQueueSize||200;(l.blobUrlsTotalSize>e||l.blobUrls.length>t)&&1<l.blobUrls.length;){var n=l.blobUrls.splice(0,1)[0];i.revokeObjectURL(n.url),l.blobUrlsTotalSize-=n.size}}})}else{var e=new FileReader;e.onload=function(e){n(function(){r.$ngfDataUrl=e.target.result,a.resolve(e.target.result,r),n(function(){delete r.$ngfDataUrl},1e3)})},e.onerror=function(){n(function(){r.$ngfDataUrl="",a.reject()})},e.readAsDataURL(r)}}else n(function(){r[t?"$ngfDataUrl":"$ngfBlobUrl"]="",a.reject()})}),(e=t?r.$$ngfDataUrlPromise=a.promise:r.$$ngfBlobUrlPromise=a.promise).finally(function(){delete r[t?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),e},l}]),ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(i,o){return{restrict:"AE",link:function(e,t,n){a(i,o,e,t,n,"ngfSrc",i.attrGetter("ngfResize",n,e),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(i,o){return{restrict:"AE",link:function(e,t,n){a(i,o,e,t,n,"ngfBackground",i.attrGetter("ngfResize",n,e),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(o,r){return{restrict:"AE",link:function(e,t,n){var i=o.attrGetter("ngfSize",n,e);a(o,r,e,t,n,"ngfThumbnail",i,o.attrGetter("ngfAsBackground",n,e))}}}]),ngFileUpload.config(["$compileProvider",function(e){e.imgSrcSanitizationWhitelist&&e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/),e.aHrefSanitizationWhitelist&&e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(o,r){return function(e,t,n){if(angular.isString(e))return r.trustAsResourceUrl(e);var i=e&&((t?e.$ngfDataUrl:e.$ngfBlobUrl)||e.$ngfDataUrl);return e&&!i?(!e.$ngfDataUrlFilterInProgress&&angular.isObject(e)&&(e.$ngfDataUrlFilterInProgress=!0,o.dataUrl(e,t)),""):(e&&delete e.$ngfDataUrlFilterInProgress,(e&&i?n?r.trustAsResourceUrl(i):i:e)||"")}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,v,s){var w=e;return w.validatePattern=function(e,t){if(!t)return!0;var n=function e(t){var n="",i=[];if(2<t.length&&"/"===t[0]&&"/"===t[t.length-1])n=t.substring(1,t.length-1);else{var o=t.split(",");if(1<o.length)for(var r=0;r<o.length;r++){var a=e(o[r]);a.regexp?(n+="("+a.regexp+")",r<o.length-1&&(n+="|")):i=i.concat(a.excludes)}else 0===t.indexOf("!")?i.push("^((?!"+e(t.substring(1)).regexp+").)*$"):(0===t.indexOf(".")&&(t="*"+t),n=(n="^"+t.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$").replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:n,excludes:i}}(t),i=!0;if(n.regexp&&n.regexp.length){var o=new RegExp(n.regexp,"i");i=null!=e.type&&o.test(e.type)||null!=e.name&&o.test(e.name)}for(var r=n.excludes.length;r--;){var a=new RegExp(n.excludes[r],"i");i=i&&(null==e.type||a.test(e.type))&&(null==e.name||a.test(e.name))}return i},w.ratioToFloat=function(e){var t=e.toString(),n=t.search(/[x:]/i);return t=-1<n?parseFloat(t.substring(0,n))/parseFloat(t.substring(n+1)):parseFloat(t)},w.registerModelChangeValidator=function(n,i,o){n&&n.$formatters.push(function(e){if(n.$dirty){var t=e;e&&!angular.isArray(e)&&(t=[e]),w.validate(t,0,n,i,o).then(function(){w.applyModelValidation(n,t)})}return e})},w.applyModelValidation=function(t,e){!function(e,t){null==t||e.$dirty||(e.$setDirty?e.$setDirty():e.$dirty=!0)}(t,e),angular.forEach(t.$ngfValidations,function(e){t.$setValidity(e.name,e.valid)})},w.getValidationAttr=function(e,t,n,i,o){var r="ngf"+n[0].toUpperCase()+n.substr(1),a=w.attrGetter(r,e,t,{$file:o});if(null==a&&(a=w.attrGetter("ngfValidate",e,t,{$file:o}))){var s=(i||n).split(".");a=a[s[0]],1<s.length&&(a=a&&a[s[1]])}return a},w.validate=function(u,i,c,d,h){(c=c||{}).$ngfValidations=c.$ngfValidations||[],angular.forEach(c.$ngfValidations,function(e){e.valid=!0});var p=function(e,t){return w.attrGetter(e,d,h,t)},f=(w.attrGetter("ngfIgnoreInvalid",d,h)||"").split(" "),g=w.attrGetter("ngfRunAllValidations",d,h);if(null==u||0===u.length)return w.emptyPromise({validFiles:u,invalidFiles:[]});u=void 0===u.length?[u]:u.slice(0);var m=[];function t(e,t,n){if(u){for(var i=u.length,o=null;i--;){var r=u[i];if(r){var a=w.getValidationAttr(d,h,e,t,r);null!=a&&(n(r,a,i)||(-1===f.indexOf(e)?(r.$error=e,(r.$errorMessages=r.$errorMessages||{})[e]=!0,r.$errorParam=a,-1===m.indexOf(r)&&m.push(r),g||u.splice(i,1),o=!1):u.splice(i,1)))}}null!==o&&c.$ngfValidations.push({name:e,valid:o})}}t("pattern",null,w.validatePattern),t("minSize","size.min",function(e,t){return e.size+.1>=w.translateScalars(t)}),t("maxSize","size.max",function(e,t){return e.size-.1<=w.translateScalars(t)});var n=0;if(t("maxTotalSize",null,function(e,t){return!((n+=e.size)>w.translateScalars(t))||(u.splice(0,u.length),!1)}),t("validateFn",null,function(e,t){return!0===t||null===t||""===t}),!u.length)return w.emptyPromise({validFiles:[],invalidFiles:m});function e(a,e,i,n,s){function o(i,o,r){function t(e){if(e())if(-1===f.indexOf(a)){if(o.$error=a,(o.$errorMessages=o.$errorMessages||{})[a]=!0,o.$errorParam=r,-1===m.indexOf(o)&&m.push(o),!g){var t=u.indexOf(o);-1<t&&u.splice(t,1)}i.resolve(!1)}else{var n=u.indexOf(o);-1<n&&u.splice(n,1),i.resolve(!0)}else i.resolve(!0)}null!=r?n(o,r).then(function(e){t(function(){return!s(e,r)})},function(){t(function(){return p("ngfValidateForce",{$file:o})})}):i.resolve(!0)}var r=[w.emptyPromise(!0)];u&&(u=void 0===u.length?[u]:u,angular.forEach(u,function(t){var n=v.defer();r.push(n.promise),!i||null!=t.type&&0===t.type.search(i)?"dimensions"===a&&null!=w.attrGetter("ngfDimensions",d)?w.imageDimensions(t).then(function(e){o(n,t,p("ngfDimensions",{$file:t,$width:e.width,$height:e.height}))},function(){n.resolve(!1)}):"duration"===a&&null!=w.attrGetter("ngfDuration",d)?w.mediaDuration(t).then(function(e){o(n,t,p("ngfDuration",{$file:t,$duration:e}))},function(){n.resolve(!1)}):o(n,t,w.getValidationAttr(d,h,a,e,t)):n.resolve(!0)}));var l=v.defer();return v.all(r).then(function(e){for(var t=!0,n=0;n<e.length;n++)if(!e[n]){t=!1;break}c.$ngfValidations.push({name:a,valid:t}),l.resolve(t)}),l.promise}var o=v.defer(),r=[];return r.push(e("maxHeight","height.max",/image/,this.imageDimensions,function(e,t){return e.height<=t})),r.push(e("minHeight","height.min",/image/,this.imageDimensions,function(e,t){return e.height>=t})),r.push(e("maxWidth","width.max",/image/,this.imageDimensions,function(e,t){return e.width<=t})),r.push(e("minWidth","width.min",/image/,this.imageDimensions,function(e,t){return e.width>=t})),r.push(e("dimensions",null,/image/,function(e,t){return w.emptyPromise(t)},function(e){return e})),r.push(e("ratio",null,/image/,this.imageDimensions,function(e,t){for(var n=t.toString().split(","),i=!1,o=0;o<n.length;o++)Math.abs(e.width/e.height-w.ratioToFloat(n[o]))<.01&&(i=!0);return i})),r.push(e("maxRatio","ratio.max",/image/,this.imageDimensions,function(e,t){return e.width/e.height-w.ratioToFloat(t)<1e-4})),r.push(e("minRatio","ratio.min",/image/,this.imageDimensions,function(e,t){return-1e-4<e.width/e.height-w.ratioToFloat(t)})),r.push(e("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(e,t){return e<=w.translateScalars(t)})),r.push(e("minDuration","duration.min",/audio|video/,this.mediaDuration,function(e,t){return e>=w.translateScalars(t)})),r.push(e("duration",null,/audio|video/,function(e,t){return w.emptyPromise(t)},function(e){return e})),r.push(e("validateAsyncFn",null,null,function(e,t){return t},function(e){return!0===e||null===e||""===e})),v.all(r).then(function(){if(g)for(var e=0;e<u.length;e++){u[e].$error&&u.splice(e--,1)}g=!1,t("maxFiles",null,function(e,t,n){return i+n<t}),o.resolve({validFiles:u,invalidFiles:m})}),o.promise},w.imageDimensions=function(r){if(r.$ngfWidth&&r.$ngfHeight){var e=v.defer();return s(function(){e.resolve({width:r.$ngfWidth,height:r.$ngfHeight})}),e.promise}if(r.$ngfDimensionPromise)return r.$ngfDimensionPromise;var a=v.defer();return s(function(){0===r.type.indexOf("image")?w.dataUrl(r).then(function(e){var n=angular.element("<img>").attr("src",e).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");function t(){var e=n[0].naturalWidth||n[0].clientWidth,t=n[0].naturalHeight||n[0].clientHeight;n.remove(),r.$ngfWidth=e,r.$ngfHeight=t,a.resolve({width:e,height:t})}function i(){n.remove(),a.reject("load error")}n.on("load",t),n.on("error",i);var o=0;!function e(){s(function(){n[0].parentNode&&(n[0].clientWidth?t():10<o++?i():e())},1e3)}(),angular.element(document.getElementsByTagName("body")[0]).append(n)},function(){a.reject("load error")}):a.reject("not image")}),r.$ngfDimensionPromise=a.promise,r.$ngfDimensionPromise.finally(function(){delete r.$ngfDimensionPromise}),r.$ngfDimensionPromise},w.mediaDuration=function(r){if(r.$ngfDuration){var e=v.defer();return s(function(){e.resolve(r.$ngfDuration)}),e.promise}if(r.$ngfDurationPromise)return r.$ngfDurationPromise;var a=v.defer();return s(function(){0===r.type.indexOf("audio")||0===r.type.indexOf("video")?w.dataUrl(r).then(function(e){var t=angular.element(0===r.type.indexOf("audio")?"<audio>":"<video>").attr("src",e).css("visibility","none").css("position","fixed");function n(){var e=t[0].duration;r.$ngfDuration=e,t.remove(),a.resolve(e)}function i(){t.remove(),a.reject("load error")}t.on("loadedmetadata",n),t.on("error",i);var o=0;!function e(){s(function(){t[0].parentNode&&(t[0].duration?n():10<o?i():e())},1e3)}(),angular.element(document.body).append(t)},function(){a.reject("load error")}):a.reject("not media")}),r.$ngfDurationPromise=a.promise,r.$ngfDurationPromise.finally(function(){delete r.$ngfDurationPromise}),r.$ngfDurationPromise},w}]),ngFileUpload.service("UploadResize",["UploadValidate","$q",function(e,t){var f=e,a=function(e,o,r,a,s,l,u,c){var d=t.defer(),h=document.createElement("canvas"),p=document.createElement("img");return p.setAttribute("style","visibility:hidden;position:fixed;z-index:-100000"),document.body.appendChild(p),p.onload=function(){var e=p.width,t=p.height;if(p.parentNode.removeChild(p),null==c||!1!==c(e,t))try{if(l){var n=f.ratioToFloat(l);e/t<n?r=(o=e)/n:o=(r=t)*n}o||(o=e),r||(r=t);var i=function(e,t,n,i,o){var r=o?Math.max(n/e,i/t):Math.min(n/e,i/t);return{width:e*r,height:t*r,marginX:e*r-n,marginY:t*r-i}}(e,t,o,r,u);h.width=Math.min(i.width,o),h.height=Math.min(i.height,r),h.getContext("2d").drawImage(p,Math.min(0,-i.marginX/2),Math.min(0,-i.marginY/2),i.width,i.height),d.resolve(h.toDataURL(s||"image/WebP",a||.934))}catch(e){d.reject(e)}else d.reject("resizeIf")},p.onerror=function(){p.parentNode.removeChild(p),d.reject()},p.src=e,d.promise};return f.dataUrltoBlob=function(e,t,n){for(var i=e.split(","),o=i[0].match(/:(.*?);/)[1],r=atob(i[1]),a=r.length,s=new Uint8Array(a);a--;)s[a]=r.charCodeAt(a);var l=new window.Blob([s],{type:o});return l.name=t,l.$ngfOrigSize=n,l},f.isResizeSupported=function(){var e=document.createElement("canvas");return window.atob&&e.getContext&&e.getContext("2d")&&window.Blob},f.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(e){this.$ngfName=e},configurable:!0}),f.resize=function(i,o){if(0!==i.type.indexOf("image"))return f.emptyPromise(i);var r=t.defer();return f.dataUrl(i,!0).then(function(n){a(n,o.width,o.height,o.quality,o.type||i.type,o.ratio,o.centerCrop,o.resizeIf).then(function(e){if("image/jpeg"===i.type&&!1!==o.restoreExif)try{e=f.restoreExif(n,e)}catch(e){setTimeout(function(){throw e},1)}try{var t=f.dataUrltoBlob(e,i.name,i.size);r.resolve(t)}catch(e){r.reject(e)}},function(e){"resizeIf"===e&&r.resolve(i),r.reject(e)})},function(e){r.reject(e)}),r.promise},f}]),function(){function p(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$window","Upload","$http","$q",function(o,r,a,s,e,l){return{restrict:"AEC",require:"?ngModel",link:function(e,t,n,i){!function(v,n,w,i,e,o,_,y,t,b){var r=p(),z=function(e,t,n){return y.attrGetter(e,w,t,n)};z("dropAvailable")&&o(function(){v[z("dropAvailable")]?v[z("dropAvailable")].value=r:v[z("dropAvailable")]=r});if(!r)return!0===z("ngfHideOnDropNotAvailable",v)&&n.css("display","none");function a(){return n.attr("disabled")||z("ngfDropDisabled",v)}null==z("ngfSelect")&&y.registerModelChangeValidator(i,w,v);var s,l=null,u=e(z("ngfStopPropagation")),c=1;n[0].addEventListener("dragover",function(t){if(!a()&&y.shouldUpdateOn("drop",w,v)){if(t.preventDefault(),u(v)&&t.stopPropagation(),-1<navigator.userAgent.indexOf("Chrome")){var e=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy"}o.cancel(l),s||(s="C",function(e,t,n,i){var o=z("ngfDragOverClass",e,{$event:n}),r="dragover";if(angular.isString(o))r=o;else if(o&&(o.delay&&(c=o.delay),o.accept||o.reject)){var a=n.dataTransfer.items;if(null!=a&&a.length)for(var s=o.pattern||z("ngfPattern",e,{$event:n}),l=a.length;l--;){if(!y.validatePattern(a[l],s)){r=o.reject;break}r=o.accept}else r=o.accept}i(r)}(v,0,t,function(e){s=e,n.addClass(s),z("ngfDrag",v,{$isDragging:!0,$class:s,$event:t})}))}},!1),n[0].addEventListener("dragenter",function(e){!a()&&y.shouldUpdateOn("drop",w,v)&&(e.preventDefault(),u(v)&&e.stopPropagation())},!1),n[0].addEventListener("dragleave",function(e){!a()&&y.shouldUpdateOn("drop",w,v)&&(e.preventDefault(),u(v)&&e.stopPropagation(),l=o(function(){s&&n.removeClass(s),s=null,z("ngfDrag",v,{$isDragging:!1,$event:e})},c||100))},!1),n[0].addEventListener("drop",function(e){!a()&&y.shouldUpdateOn("drop",w,v)&&(e.preventDefault(),u(v)&&e.stopPropagation(),s&&n.removeClass(s),s=null,d(e.dataTransfer,e,"dropUrl"))},!1),n[0].addEventListener("paste",function(e){-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&z("ngfEnableFirefoxPaste",v)&&e.preventDefault(),!a()&&y.shouldUpdateOn("paste",w,v)&&d(e.clipboardData||e.originalEvent.clipboardData,e,"pasteUrl")},!1),-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&z("ngfEnableFirefoxPaste",v)&&(n.attr("contenteditable",!0),n.on("keypress",function(e){e.metaKey||e.ctrlKey||e.preventDefault()}));function d(e,t,n){if(e){var i;try{i=e&&e.getData&&e.getData("text/html")}catch(e){}(function(e,t,n,i){var l=y.getValidationAttr(w,v,"maxFiles");null==l&&(l=Number.MAX_VALUE);var u=y.getValidationAttr(w,v,"maxTotalSize");null==u&&(u=Number.MAX_VALUE);var c=z("ngfIncludeDir",v),d=[],h=0;function p(t,n){var i=b.defer();if(null!=t)if(t.isDirectory){var o=[y.emptyPromise()];if(c){var e={type:"directory"};e.name=e.path=(n||"")+t.name,d.push(e)}var r=t.createReader(),a=[],s=function(){r.readEntries(function(e){try{e.length?(a=a.concat(Array.prototype.slice.call(e||[],0)),s()):(angular.forEach(a.slice(0),function(e){d.length<=l&&h<=u&&o.push(p(e,(n||"")+t.name+"/"))}),b.all(o).then(function(){i.resolve()},function(e){i.reject(e)}))}catch(e){i.reject(e)}},function(e){i.reject(e)})};s()}else t.file(function(e){try{e.path=(n||"")+e.name,c&&(e=y.rename(e,e.path)),d.push(e),h+=e.size,i.resolve()}catch(e){i.reject(e)}},function(e){i.reject(e)});return i.promise}var o=[y.emptyPromise()];if(e&&0<e.length&&"file:"!==_.location.protocol)for(var r=0;r<e.length;r++){if(e[r].webkitGetAsEntry&&e[r].webkitGetAsEntry()&&e[r].webkitGetAsEntry().isDirectory){var a=e[r].webkitGetAsEntry();if(a.isDirectory&&!n)continue;null!=a&&o.push(p(a))}else{var s=e[r].getAsFile();null!=s&&(d.push(s),h+=s.size)}if(d.length>l||u<h||!i&&0<d.length)break}else if(null!=t)for(var f=0;f<t.length;f++){var g=t.item(f);if((g.type||0<g.size)&&(d.push(g),h+=g.size),d.length>l||u<h||!i&&0<d.length)break}var m=b.defer();return b.all(o).then(function(){if(i||c||!d.length)m.resolve(d);else{for(var e=0;d[e]&&"directory"===d[e].type;)e++;m.resolve([d[e]])}},function(e){m.reject(e)}),m.promise})(e.items,e.files,!1!==z("ngfAllowDir",v),z("multiple")||z("ngfMultiple",v)).then(function(e){e.length?h(e,t):function(e,t){if(!y.shouldUpdateOn(e,w,v)||"string"!=typeof t)return y.rejectPromise([]);var i=[];t.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(e,t,n){i.push(n)});var n=[],o=[];if(i.length){angular.forEach(i,function(e){n.push(y.urlToBlob(e).then(function(e){o.push(e)}))});var r=b.defer();return b.all(n).then(function(){r.resolve(o)},function(e){r.reject(e)}),r.promise}return y.emptyPromise()}(n,i).then(function(e){h(e,t)})})}}function h(e,t){y.updateModel(i,w,v,z("ngfChange")||z("ngfDrop"),e,t)}}(e,t,n,i,o,r,a,s,0,l)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(e,t){p()&&t.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(o,r,a){return function(e,t,n){if(p()){var i=o(a.attrGetter("ngfDropAvailable",n));r(function(){i(e),i.assign&&i.assign(e,!0)})}}}])}(),ngFileUpload.service("UploadExif",["UploadResize","$q",function(e,i){var l=e;return l.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&l.isResizeSupported()},l.readOrientation=function(e){var c=i.defer(),t=new FileReader,n=e.slice?e.slice(0,65536):e;return t.readAsArrayBuffer(n),t.onerror=function(e){return c.reject(e)},t.onload=function(e){var t={orientation:1},n=new DataView(this.result);if(65496!==n.getUint16(0,!1))return c.resolve(t);for(var i=n.byteLength,o=2;o<i;){var r=n.getUint16(o,!1);if(o+=2,65505===r){if(1165519206!==n.getUint32(o+=2,!1))return c.resolve(t);var a=18761===n.getUint16(o+=6,!1);o+=n.getUint32(o+4,a);var s=n.getUint16(o,a);o+=2;for(var l=0;l<s;l++)if(274===n.getUint16(o+12*l,a)){var u=n.getUint16(o+12*l+8,a);return 2<=u&&u<=8&&(n.setUint16(o+12*l+8,1,a),t.fixedArrayBuffer=e.target.result),t.orientation=u,c.resolve(t)}}else{if(65280!=(65280&r))break;o+=n.getUint16(o,!1)}}return c.resolve(t)},c.promise},l.applyExifRotation=function(a){if(0!==a.type.indexOf("image/jpeg"))return l.emptyPromise(a);var s=i.defer();return l.readOrientation(a).then(function(r){if(r.orientation<2||8<r.orientation)return s.resolve(a);l.dataUrl(a,!0).then(function(e){var i=document.createElement("canvas"),o=document.createElement("img");o.onload=function(){try{i.width=4<r.orientation?o.height:o.width,i.height=4<r.orientation?o.width:o.height;var e=i.getContext("2d");!function(e,t,n,i){switch(t){case 2:return e.transform(-1,0,0,1,n,0);case 3:return e.transform(-1,0,0,-1,n,i);case 4:return e.transform(1,0,0,-1,0,i);case 5:return e.transform(0,1,1,0,0,0);case 6:return e.transform(0,1,-1,0,i,0);case 7:return e.transform(0,-1,-1,0,i,n);case 8:e.transform(0,-1,1,0,0,n)}}(e,r.orientation,o.width,o.height),e.drawImage(o,0,0);var t=i.toDataURL(a.type||"image/WebP",.934);t=l.restoreExif(function(e){for(var t="",n=new Uint8Array(e),i=n.byteLength,o=0;o<i;o++)t+=String.fromCharCode(n[o]);return window.btoa(t)}(r.fixedArrayBuffer),t);var n=l.dataUrltoBlob(t,a.name);s.resolve(n)}catch(e){return s.reject(e)}},o.onerror=function(){s.reject()},o.src=e},function(e){s.reject(e)})},function(e){s.reject(e)}),s.promise},l.restoreExif=function(e,t){var n={KEY_STR:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode64:function(e){for(var t,n,i,o,r,a="",s="",l="",u=0;i=(t=e[u++])>>2,o=(3&t)<<4|(n=e[u++])>>4,r=(15&n)<<2|(s=e[u++])>>6,l=63&s,isNaN(n)?r=l=64:isNaN(s)&&(l=64),a=a+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(l),t=n=s="",i=o=r=l="",u<e.length;);return a},restore:function(e,t){e.match("data:image/jpeg;base64,")&&(e=e.replace("data:image/jpeg;base64,",""));var n=this.decode64(e),i=this.slice2Segments(n),o=this.exifManipulation(t,i);return"data:image/jpeg;base64,"+this.encode64(o)},exifManipulation:function(e,t){var n=this.getExifArray(t),i=this.insertExif(e,n);return new Uint8Array(i)},getExifArray:function(e){for(var t,n=0;n<e.length;n++)if(255===(t=e[n])[0]&225===t[1])return t;return[]},insertExif:function(e,t){var n=e.replace("data:image/jpeg;base64,",""),i=this.decode64(n),o=i.indexOf(255,3),r=i.slice(0,o),a=i.slice(o),s=r;return s=(s=s.concat(t)).concat(a)},slice2Segments:function(e){for(var t=0,n=[];!(255===e[t]&218===e[t+1]);){if(255===e[t]&216===e[t+1])t+=2;else{var i=t+(256*e[t+2]+e[t+3])+2,o=e.slice(t,i);n.push(o),t=i}if(t>e.length)break}return n},decode64:function(e){var t,n,i,o,r="",a="",s=0,l=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=this.KEY_STR.indexOf(e.charAt(s++))<<2|(i=this.KEY_STR.indexOf(e.charAt(s++)))>>4,n=(15&i)<<4|(o=this.KEY_STR.indexOf(e.charAt(s++)))>>2,r=(3&o)<<6|(a=this.KEY_STR.indexOf(e.charAt(s++))),l.push(t),64!==o&&l.push(n),64!==a&&l.push(r),t=n=r="",i=o=a="",s<e.length;);return l}};return n.restore(e,t)},l}]),function(){var e="RandExp",t=function r(a,s,l){function u(n,e){if(!s[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(c)return c(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var o=s[n]={exports:{}};a[n][0].call(o.exports,function(e){var t=a[n][1][e];return u(t||e)},o,o.exports,r,a,s,l)}return s[n].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,n){function u(e){return e+(97<=e&&e<=122?-32:65<=e&&e<=90?32:0)}function c(e){return e instanceof p?e.index(this.randInt(0,e.length-1)):e[this.randInt(0,e.length-1)]}function i(e,t){"number"==typeof t.max&&(e.max=t.max),t.defaultRange instanceof p&&(e.defaultRange=t.defaultRange),"function"==typeof t.randInt&&(e.randInt=t.randInt)}function d(e,t){var n,i,o,r,a;switch(e.type){case f.ROOT:case f.GROUP:if(e.followedBy||e.notFollowedBy)return"";for(e.remember&&void 0===e.groupNumber&&(e.groupNumber=t.push(null)-1),i="",r=0,a=(n=e.options?c.call(this,e.options):e.stack).length;r<a;r++)i+=d.call(this,n[r],t);return e.remember&&(t[e.groupNumber]=i),i;case f.POSITION:return"";case f.SET:var s=function e(t){if(t.type===h.types.CHAR)return new p(t.value);if(t.type===h.types.RANGE)return new p(t.from,t.to);for(var n=new p,i=0;i<t.set.length;i++){var o=e.call(this,t.set[i]);if(n.add(o),this.ignoreCase)for(var r=0;r<o.length;r++){var a=o.index(r),s=u(a);a!==s&&n.add(s)}}return t.not?this.defaultRange.clone().subtract(n):n}.call(this,e);return s.length?String.fromCharCode(c.call(this,s)):"";case f.REPETITION:for(o=this.randInt(e.min,e.max===1/0?e.min+this.max:e.max),i="",r=0;r<o;r++)i+=d.call(this,e.value,t);return i;case f.REFERENCE:return t[e.value-1]||"";case f.CHAR:var l=this.ignoreCase&&function(){return!this.randInt(0,1)}.call(this)?u(e.value):e.value;return String.fromCharCode(l)}}var h=e("ret"),p=e("discontinuous-range"),f=h.types,o=t.exports=function(e,t){if(this.defaultRange=this.defaultRange.clone(),e instanceof RegExp)this.ignoreCase=e.ignoreCase,this.multiline=e.multiline,i(this,e),e=e.source;else{if("string"!=typeof e)throw new Error("Expected a regexp or string");this.ignoreCase=t&&-1!==t.indexOf("i"),this.multiline=t&&-1!==t.indexOf("m")}this.tokens=h(e)};o.prototype.max=100,o.prototype.gen=function(){return d.call(this,this.tokens,[])},o.randexp=function(e,t){var n;return void 0===e._randexp?(n=new o(e,t),e._randexp=n):n=e._randexp,i(n,e),n.gen()},o.sugar=function(){RegExp.prototype.gen=function(){return o.randexp(this)}},o.prototype.defaultRange=new p(32,126),o.prototype.randInt=function(e,t){return e+Math.floor(Math.random()*(1+t-e))}},{"discontinuous-range":2,ret:3}],2:[function(e,t,n){function o(e,t){this.low=e,this.high=t,this.length=1+t-e}function r(e,t){return this instanceof r?(this.ranges=[],void(void(this.length=0)!==e&&this.add(e,t))):new r(e,t)}function a(e){e.length=e.ranges.reduce(function(e,t){return e+t.length},0)}o.prototype.overlaps=function(e){return!(this.high<e.low||this.low>e.high)},o.prototype.touches=function(e){return!(this.high+1<e.low||this.low-1>e.high)},o.prototype.add=function(e){return this.touches(e)&&new o(Math.min(this.low,e.low),Math.max(this.high,e.high))},o.prototype.subtract=function(e){return!!this.overlaps(e)&&(e.low<=this.low&&e.high>=this.high?[]:e.low>this.low&&e.high<this.high?[new o(this.low,e.low-1),new o(e.high+1,this.high)]:e.low<=this.low?[new o(e.high+1,this.high)]:[new o(this.low,e.low-1)])},o.prototype.toString=function(){return this.low==this.high?this.low.toString():this.low+"-"+this.high},o.prototype.clone=function(){return new o(this.low,this.high)},r.prototype.add=function(e,t){function n(e){for(var t=[],n=0;n<i.ranges.length&&!e.touches(i.ranges[n]);)t.push(i.ranges[n].clone()),n++;for(;n<i.ranges.length&&e.touches(i.ranges[n]);)e=e.add(i.ranges[n]),n++;for(t.push(e);n<i.ranges.length;)t.push(i.ranges[n].clone()),n++;i.ranges=t,a(i)}var i=this;return e instanceof r?e.ranges.forEach(n):e instanceof o?n(e):(void 0===t&&(t=e),n(new o(e,t))),this},r.prototype.subtract=function(e,t){function n(e){for(var t=[],n=0;n<i.ranges.length&&!e.overlaps(i.ranges[n]);)t.push(i.ranges[n].clone()),n++;for(;n<i.ranges.length&&e.overlaps(i.ranges[n]);)t=t.concat(i.ranges[n].subtract(e)),n++;for(;n<i.ranges.length;)t.push(i.ranges[n].clone()),n++;i.ranges=t,a(i)}var i=this;return e instanceof r?e.ranges.forEach(n):e instanceof o?n(e):(void 0===t&&(t=e),n(new o(e,t))),this},r.prototype.index=function(e){for(var t=0;t<this.ranges.length&&this.ranges[t].length<=e;)e-=this.ranges[t].length,t++;return t>=this.ranges.length?null:this.ranges[t].low+e},r.prototype.toString=function(){return"[ "+this.ranges.join(", ")+" ]"},r.prototype.clone=function(){return new r(this)},t.exports=r},{}],3:[function(e,t,n){var v=e("./util"),w=e("./types"),_=e("./sets"),y=e("./positions");t.exports=function(t){var e,n,i=0,o={type:w.ROOT,stack:[]},r=o,a=o.stack,s=[],l=function(e){v.error(t,"Nothing to repeat at column "+(e-1))},u=v.strToChars(t);for(e=u.length;i<e;)switch(n=u[i++]){case"\\":switch(n=u[i++]){case"b":a.push(y.wordBoundary());break;case"B":a.push(y.nonWordBoundary());break;case"w":a.push(_.words());break;case"W":a.push(_.notWords());break;case"d":a.push(_.ints());break;case"D":a.push(_.notInts());break;case"s":a.push(_.whitespace());break;case"S":a.push(_.notWhitespace());break;default:/\d/.test(n)?a.push({type:w.REFERENCE,value:parseInt(n,10)}):a.push({type:w.CHAR,value:n.charCodeAt(0)})}break;case"^":a.push(y.begin());break;case"$":a.push(y.end());break;case"[":var c;"^"===u[i]?(c=!0,i++):c=!1;var d=v.tokenizeClass(u.slice(i),t);i+=d[1],a.push({type:w.SET,set:d[0],not:c});break;case".":a.push(_.anyChar());break;case"(":var h={type:w.GROUP,stack:[],remember:!0};"?"===(n=u[i])&&(n=u[i+1],i+=2,"="===n?h.followedBy=!0:"!"===n?h.notFollowedBy=!0:":"!==n&&v.error(t,"Invalid group, character '"+n+"' after '?' at column "+(i-1)),h.remember=!1),a.push(h),s.push(r),a=(r=h).stack;break;case")":0===s.length&&v.error(t,"Unmatched ) at column "+(i-1)),a=(r=s.pop()).options?r.options[r.options.length-1]:r.stack;break;case"|":r.options||(r.options=[r.stack],delete r.stack);var p=[];r.options.push(p),a=p;break;case"{":var f,g,m=/^(\d+)(,(\d+)?)?\}/.exec(u.slice(i));null!==m?(0===a.length&&l(i),f=parseInt(m[1],10),g=m[2]?m[3]?parseInt(m[3],10):1/0:f,i+=m[0].length,a.push({type:w.REPETITION,min:f,max:g,value:a.pop()})):a.push({type:w.CHAR,value:123});break;case"?":0===a.length&&l(i),a.push({type:w.REPETITION,min:0,max:1,value:a.pop()});break;case"+":0===a.length&&l(i),a.push({type:w.REPETITION,min:1,max:1/0,value:a.pop()});break;case"*":0===a.length&&l(i),a.push({type:w.REPETITION,min:0,max:1/0,value:a.pop()});break;default:a.push({type:w.CHAR,value:n.charCodeAt(0)})}return 0!==s.length&&v.error(t,"Unterminated group"),o},t.exports.types=w},{"./positions":4,"./sets":5,"./types":6,"./util":7}],4:[function(e,t,n){var i=e("./types");n.wordBoundary=function(){return{type:i.POSITION,value:"b"}},n.nonWordBoundary=function(){return{type:i.POSITION,value:"B"}},n.begin=function(){return{type:i.POSITION,value:"^"}},n.end=function(){return{type:i.POSITION,value:"$"}}},{"./types":6}],5:[function(e,t,n){var i=e("./types"),o=function(){return[{type:i.RANGE,from:48,to:57}]},r=function(){return[{type:i.CHAR,value:95},{type:i.RANGE,from:97,to:122},{type:i.RANGE,from:65,to:90}].concat(o())},a=function(){return[{type:i.CHAR,value:9},{type:i.CHAR,value:10},{type:i.CHAR,value:11},{type:i.CHAR,value:12},{type:i.CHAR,value:13},{type:i.CHAR,value:32},{type:i.CHAR,value:160},{type:i.CHAR,value:5760},{type:i.CHAR,value:6158},{type:i.CHAR,value:8192},{type:i.CHAR,value:8193},{type:i.CHAR,value:8194},{type:i.CHAR,value:8195},{type:i.CHAR,value:8196},{type:i.CHAR,value:8197},{type:i.CHAR,value:8198},{type:i.CHAR,value:8199},{type:i.CHAR,value:8200},{type:i.CHAR,value:8201},{type:i.CHAR,value:8202},{type:i.CHAR,value:8232},{type:i.CHAR,value:8233},{type:i.CHAR,value:8239},{type:i.CHAR,value:8287},{type:i.CHAR,value:12288},{type:i.CHAR,value:65279}]};n.words=function(){return{type:i.SET,set:r(),not:!1}},n.notWords=function(){return{type:i.SET,set:r(),not:!0}},n.ints=function(){return{type:i.SET,set:o(),not:!1}},n.notInts=function(){return{type:i.SET,set:o(),not:!0}},n.whitespace=function(){return{type:i.SET,set:a(),not:!1}},n.notWhitespace=function(){return{type:i.SET,set:a(),not:!0}},n.anyChar=function(){return{type:i.SET,set:[{type:i.CHAR,value:10},{type:i.CHAR,value:13},{type:i.CHAR,value:8232},{type:i.CHAR,value:8233}],not:!0}}},{"./types":6}],6:[function(e,t,n){t.exports={ROOT:0,GROUP:1,POSITION:2,SET:3,RANGE:4,REPETITION:5,REFERENCE:6,CHAR:7}},{}],7:[function(e,t,a){var s=e("./types"),l=e("./sets"),c={0:0,t:9,n:10,v:11,f:12,r:13};a.strToChars=function(e){return e.replace(/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|(0?[0-7]{2})|c([@A-Z\[\\\]\^?])|([0tnvfr]))/g,function(e,t,n,i,o,r,a,s){if(n)return e;var l=t?8:i?parseInt(i,16):o?parseInt(o,16):r?parseInt(r,8):a?"@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?".indexOf(a):c[s],u=String.fromCharCode(l);return/[\[\]{}\^$.|?*+()]/.test(u)&&(u="\\"+u),u})},a.tokenizeClass=function(e,t){for(var n,i,o=[],r=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(?:\\)?([^\]]))|(\])|(?:\\)?(.)/g;null!=(n=r.exec(e));)if(n[1])o.push(l.words());else if(n[2])o.push(l.ints());else if(n[3])o.push(l.whitespace());else if(n[4])o.push(l.notWords());else if(n[5])o.push(l.notInts());else if(n[6])o.push(l.notWhitespace());else if(n[7])o.push({type:s.RANGE,from:(n[8]||n[9]).charCodeAt(0),to:n[10].charCodeAt(0)});else{if(!(i=n[12]))return[o,r.lastIndex];o.push({type:s.CHAR,value:i.charCodeAt(0)})}a.error(t,"Unterminated character class")},a.error=function(e,t){throw new SyntaxError("Invalid regular expression: /"+e+"/: "+t)}},{"./sets":5,"./types":6}]},{},[1])(1);"function"==typeof define&&"object"==typeof define.amd?define(e,function(){return t}):"undefined"!=typeof window&&(window[e]=t)}(),function(u){var l=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,c={},i="",n=function(){var e=d.apply(this);""==e&&(this.get(0)==u(document).get(0)?e=document.location.href:this.is("[href]")?e=this.attr("href"):this.is("[src]")&&(e=this.attr("src")),""!=e&&(e=f(e),this.data("href",e)))},t=function(e,t){0!=this.is("["+e+"]")&&(null==this.data("original-"+e)&&this.data("original-"+e,this.attr(e)),this.attr(e,t))},e=function(e){null!=this.data("original-"+e)&&(this.attr(e,this.data("original-"+e)),this.removeData("original-"+e))},o=function(){this.removeData("href"),e.apply(this,["href"]),e.apply(this,["src"]),this.removeData("jurlp-no-watch"),this.removeData("is-watched"),I.unwatch.apply(this)},d=function(){return this.href||this.data("href")||this.attr("href")||this.attr("src")||""},r=function(e,t){h.apply(this,[g(d.apply(this),e,t)])},a=function(e){r.apply(this,[e[0],e[1]])},h=function(e){"object"==typeof e&&(e=p(e)),e=f(e),null==this.href?this.get(0)==u(document).get(0)?this.data("href",e):(t.apply(this,["href",e]),t.apply(this,["src",e])):this.href=e},s=function(t){if(null==t)return{scheme:"",user:"",password:"",host:"",port:"",path:"",query:"",fragment:""};var n={user:"",password:""};if("//"==t.substring(0,2)&&(t="http:"+t),""!=t&&-1==t.indexOf("://")&&(t="http://"+t),-1!=t.indexOf("@")){var e=t.match(l);e[4]&&(n.user=e[4]),e[5]&&(n.password=e[5])}var i=document.createElement("a");i.href=t;try{i.protocol}catch(e){if(-2146697202==e.number){var o="";""!=n.user&&(o+=n.user,""!=n.password&&(o+=":"+n.password),o+="@",i.href=t.replace(o,""))}}var r=i.protocol;-1==i.protocol.indexOf("//")&&(r+="//");var a=i.pathname;"/"!=a[0]&&(a="/"+a);var s=i.port+"";return("21"==s&&-1==t.indexOf(":21")||"80"==s&&-1==t.indexOf(":80")||"443"==s&&-1==t.indexOf(":443")||"0"==s)&&(s=""),{scheme:r,user:n.user,password:n.password,host:i.hostname,port:s,path:a,query:i.search,fragment:i.hash}},p=function(e){var t=e.scheme;return null!=e.user&&""!=e.user&&(t+=e.user,null!=e.password&&""!=e.password&&(t+=":"+e.password),t+="@"),t+e.host+(""!=e.port?":"+e.port:"")+e.path+e.query+e.fragment},f=function(e){return $.parse(e).toString()},g=function(e,t,n){var i=$.parse(e);return i[t]=n,p(i)},m=function(e){return"string"==typeof e?$.parse(e):e},v=function(e){var t={},n=_(d.apply(this));t="string"==typeof e?("?"==e[0]&&(n={},e=e.substring(1)),w(e)):e,0==u.isEmptyObject(t)?t=u.extend(n,t):n={},r.apply(this,["query",y.apply(t)])},w=function(e){var t={};if(""!=e)for(var n=e.split("&"),i=0;i<n.length;i++){var o=n[i].split("=");t[o[0]]=o[1]}return t},_=function(e){return w(function(e){var t=m(e).query;return"?"==t[0]?t.slice(1):t}(e))},y=function(){var e="";for(var t in this)"toString"!=t&&null!=this[t]&&(e+="&"+t+"="+this[t]);return"&"==e[0]&&(e="?"+e.slice(1)),e},b=function(e){var t=function(e){var t=m(e).path;return"/"==t[0]?t.slice(1):t}(e);return""!=t?t.split("/"):[]},z=function(e){var t=m(d.apply(this)).path.split("/"),n=e.split("/"),i=0;""==n[0]&&(t=[],i++),t.splice(0,1);for(var o=n.length;i<o;i++)".."==n[i]?0<t.length&&t.splice(t.length-1,1):"."==n[i]||t.push(n[i]);r.apply(this,["path",S.apply(t)])},S=function(){return 0<this.length?"/"+this.join("/"):"/"},x=function(e,t,n){1!=e.data("is-watched")&&c[i]&&c[i].push([t,n])},C=function(e,t){return null!=this.href?(e.apply(this,[t]),this):(x(this,e,[t]),this.each(function(){e.apply(u(this),[t])}))},k=function(e,t){if(null!=this.href)return e.apply(this,[t]);var n=[];return this.each(function(){n.push(e.apply(u(this),[t]))}),n},D=function(e,t,n){return 0==n.length?e.apply(this):t.apply(this,n)},$={toString:{http:function(){return p(this)},mailto:function(){return this.password="",this.path="",this.port="",p(this)},javascript:function(){return"javascript:"+this.javascript},generic:function(){return this.scheme+this.url}},parsers:{http:function(e){return u.extend(s(e),{toString:$.toString.http})},mailto:function(e){return u.extend(s(e.substring(7)),{scheme:"mailto:",toString:$.toString.mailto})},javascript:function(e){return u.extend(s(document.location.href),{javascript:e.substring(11),toString:$.toString.javascript})},generic:function(e,t){return"//"==t.substring(0,2)?u.extend(s(t.substring(2)),{scheme:e+"://",toString:$.toString.http}):{scheme:e+":",url:t,toString:$.toString.generic}}},parse:function(e){if("string"!=typeof e)return e;var t=e.indexOf(":");if(-1==t)return this.parsers.http(e);var n=e.substring(0,t).toLowerCase();return null!=this.parsers[n]?this.parsers[n](e):this.parsers.generic(n,e.substring(t+1))}},T={getUrl:function(){return k.apply(this,[d,null])},setUrl:function(e){h.apply(this,[e])},parseUrl:function(){return k.apply(this,[function(){return $.parse(d.apply(this))},null])},getFragment:function(){return k.apply(this,[function(){return function(e){return m(e).fragment}(d.apply(this))},null])},setFragment:function(e){return"#"!=e[0]&&(e="#"+e),C.apply(this,[a,["fragment",e]])},getQuery:function(){return k.apply(this,[function(){return u.extend(_(d.apply(this)),{toString:y})},null])},setQuery:function(e){return C.apply(this,[v,e])},getPath:function(){return k.apply(this,[function(){return u.extend(b(d.apply(this)),{toString:S})},null])},setPath:function(e){return C.apply(this,[z,e])},getPort:function(){return k.apply(this,[function(){return function(e){return m(e).port}(d.apply(this))},null])},setPort:function(e){return C.apply(this,[a,["port",e]])},getHost:function(){return k.apply(this,[function(){return function(e){return m(e).host}(d.apply(this))},null])},setHost:function(e){return C.apply(this,[a,["host",e]])},getPassword:function(){return k.apply(this,[function(){return function(e){return m(e).password}(d.apply(this))},null])},setPassword:function(e){return C.apply(this,[a,["password",e]])},getUser:function(){return k.apply(this,[function(){return function(e){return m(e).user}(d.apply(this))},null])},setUser:function(e){return C.apply(this,[a,["user",e]])},getScheme:function(){return k.apply(this,[function(){return function(e){return m(e).scheme}(d.apply(this))},null])},setScheme:function(e){return C.apply(this,[a,["scheme",e]])},filters:{"=":function(e,t){return e==t},"!=":function(e,t){return e!=t},"<":function(e,t){return e<t},">":function(e,t){return t<e},"<=":function(e,t){return e<=t},">=":function(e,t){return t<=e},"*=":function(e,t){return-1!=e.indexOf(t)},"^=":function(e,t){return e.length>=t.length&&e.substring(0,t.length)==t},"$=":function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)==t},regex:function(e,t){return e.match(t)}}},I={url:function(e){return D.apply(this,[T.parseUrl,T.setUrl,arguments])},fragment:function(e){return D.apply(this,[T.getFragment,T.setFragment,arguments])},query:function(e){return D.apply(this,[T.getQuery,T.setQuery,arguments])},path:function(e){return D.apply(this,[T.getPath,T.setPath,arguments])},port:function(e){return D.apply(this,[T.getPort,T.setPort,arguments])},host:function(e){return D.apply(this,[T.getHost,T.setHost,arguments])},password:function(e){return D.apply(this,[T.getPassword,T.setPassword,arguments])},user:function(e){return D.apply(this,[T.getUser,T.setUser,arguments])},scheme:function(e){return D.apply(this,[T.getScheme,T.setScheme,arguments])},initialise:function(){var e,t=this;return e=function(){if(this.get(0)!=u(document).get(0)&&null==this.attr("href")&&null==this.attr("src")&&null!=this.html()&&0==this.hasClass("jurlp-span")){for(var e=[],t=!1,n="",i=/((((mailto|spotify|skype)\:([a-zA-Z0-9\.\-\:@\?\=\%]*))|((ftp|git|irc|ircs|irc6|pop|rss|ssh|svn|udp|feed|imap|ldap|nntp|rtmp|sftp|snmp|xmpp|http|https|telnet|ventrilo|webcal|view\-source)\:[\/]{2})?(([a-zA-Z0-9\.\-]+)\:([a-zA-Z0-9\.&;%\$\-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|localhost|([a-zA-Z0-9\-]+\.)*[a-zA-Z0-9\-]+\.(aero|arpa|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|[a-zA-Z]{2}))(\:[0-9]+)*(\/($|[a-zA-Z0-9\.\,\?\'\\\+&;%\$\=~_\-]+)?(#\w*)?)*))/i,o=this.html();n=i.exec(o);)o=o.replace(n[0],"$"+e.length),e.push(n[0]),t=!0;for(var r=0;r<e.length;r++){var a=o.indexOf("$"+r),s=o.substring(a-6,a-1);o="href="==s||" src="==s||">"==o.substring(a-1,a)?o.replace("$"+r,e[r]):o.replace("$"+r,'<a href="[url]" class="jurlp-no-watch">[url]</a>'.replace(/\[url\]/g,e[r]))}if(0!=t)return this.addClass("jurlp-span"),this.html(o),this.find("a[href]").each(function(){var e=d.apply(u(this));h.apply(u(this),[e])})}return null}.apply(u(this)),C.apply(null!=e?this.filter(function(){return u(this).get(0)!=u(t).get(0)}).add(e):t,[n])},restore:function(){return C.apply(this,[o])},goto:function(){document.location.href=d.apply(this)},proxy:function(e,t){var n=d.apply(this),i={};h.apply(this,[p(m(e))]),i[t]=n,T.setQuery.apply(this,[i])},watch:function(s){var l=this.selector;return null==c[i]&&(c[i]=[],u(document).bind("DOMNodeInserted",function e(t){if(null!=c[l]){var n=u(t.target).filter(l);if(null==n.get(0)&&(n=u(t.target).find(l)),0<n.length&&0==n.is(".jurlp-no-watch")){var i=!1;n.data("is-watched",!0);for(var o=0,r=c[l].length;o<r;o++){var a=c[l][o][0].apply(n,c[l][o][1]);if(null!=a&&0==a.length){i=!0;break}}0==i&&"function"==typeof s&&n.each(function(){s(u(this),l)})}}else u(document).unbind("DOMNodeInserted",e)})),this},unwatch:function(){c[this.selector]=null},filter:function(n,i,o){var e=$.parse(d.apply(this));return"=="==i&&(i="="),"url"!=n&&null==e[n]||null==T.filters[i]?this:(x(this,I.filter,[n,i,o]),this.filter(function(){var e=d.apply(u(this)),t="";return t="url"!=n?$.parse(e)[n]:e,"port"==n&&(t=parseInt(t,10),o=parseInt(o,10)),T.filters[i].apply(u(this),[t,o])}))},interface:function(){return I}};u.fn.jurlp=function(e){return-1==this.selector.indexOf(".filter")&&(i=this.selector),C.apply(this,[n]),function(e){return null!=I[e]?I[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"==typeof e||null==e?I.initialise.apply(this,Array.prototype.slice.call(arguments,1)):this}.apply(this,arguments)},u.jurlp=function(e){return{href:e||document.location.href,url:I.url,scheme:I.scheme,user:I.user,password:I.password,host:I.host,port:I.port,path:I.path,query:I.query,fragment:I.fragment,proxy:I.proxy,goto:I.goto,watch:function(e){var t=this.host();return u('[href*="'+t+'"],[src*="'+t+'"]').jurlp("watch",e)},unwatch:function(){var e=this.host();return u('[href*="'+e+'"],[src*="'+e+'"]').jurlp("unwatch")}}}}(jQuery),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(l,e,t,n){var i={init:function(e,t){var n=this;n.elem=t,n.$elem=l(t),n.options=l.extend({},l.fn.elevateZoom.options,e),n.options.imageSrc?n.imageSrc=n.options.imageSrc:n.$elem.data("zoom-image")?n.imageSrc=n.$elem.data("zoom-image"):n.imageSrc=n.$elem.attr("src"),n.options.tint&&(n.options.lensColour="none",n.options.lensOpacity="1"),"inner"==n.options.zoomType&&(n.options.showLens=!1),n.$elem.parent().removeAttr("title").removeAttr("alt"),n.zoomImage=n.imageSrc,n.refresh(1),l("#"+n.options.gallery+" a").click(function(e){return n.options.galleryActiveClass&&(l("#"+n.options.gallery+" a").removeClass(n.options.galleryActiveClass),l(this).addClass(n.options.galleryActiveClass)),e.preventDefault(),l(this).data("zoom-image")?n.zoomImagePre=l(this).data("zoom-image"):n.zoomImagePre=l(this).data("image"),n.swaptheimage(l(this).data("image"),n.zoomImagePre),!1})},refresh:function(e){var t=this;setTimeout(function(){t.fetch(t.imageSrc)},e||t.options.refresh)},fetch:function(e){var t=this,n=new Image;n.onload=function(){t.largeWidth=n.width,t.largeHeight=n.height,t.startZoom(),t.currentImage=t.imageSrc,t.options.onZoomedImageLoaded(t.$elem)},n.src=e},startZoom:function(){var n=this;if(n.nzWidth=n.$elem.width(),n.nzHeight=n.$elem.height(),n.isWindowActive=!1,n.isLensActive=!1,n.isTintActive=!1,n.overWindow=!1,n.options.imageCrossfade&&(n.zoomWrap=n.$elem.wrap('<div style="height:'+n.nzHeight+"px;width:"+n.nzWidth+'px;" class="zoomWrapper" />'),n.$elem.css("position","absolute")),n.zoomLock=1,n.scrollingLock=!1,n.changeBgSize=!1,n.currentZoomLevel=n.options.zoomLevel,n.nzOffset=n.$elem.offset(),n.widthRatio=n.largeWidth/n.currentZoomLevel/n.nzWidth,n.heightRatio=n.largeHeight/n.currentZoomLevel/n.nzHeight,"window"==n.options.zoomType&&(n.zoomWindowStyle="overflow: hidden;background-position: 0px 0px;text-align:center;background-color: "+String(n.options.zoomWindowBgColour)+";width: "+String(n.options.zoomWindowWidth)+"px;height: "+String(n.options.zoomWindowHeight)+"px;float: left;background-size: "+n.largeWidth/n.currentZoomLevel+"px "+n.largeHeight/n.currentZoomLevel+"px;display: none;z-index:100;border: "+String(n.options.borderSize)+"px solid "+n.options.borderColour+";background-repeat: no-repeat;position: absolute;"),"inner"==n.options.zoomType){var e=n.$elem.css("border-left-width");n.zoomWindowStyle="overflow: hidden;margin-left: "+String(e)+";margin-top: "+String(e)+";background-position: 0px 0px;width: "+String(n.nzWidth)+"px;height: "+String(n.nzHeight)+"px;px;float: left;display: none;cursor:"+n.options.cursor+";px solid "+n.options.borderColour+";background-repeat: no-repeat;position: absolute;"}"window"==n.options.zoomType&&(n.nzHeight<n.options.zoomWindowWidth/n.widthRatio?lensHeight=n.nzHeight:lensHeight=String(n.options.zoomWindowHeight/n.heightRatio),n.largeWidth<n.options.zoomWindowWidth?lensWidth=n.nzWidth:lensWidth=n.options.zoomWindowWidth/n.widthRatio,n.lensStyle="background-position: 0px 0px;width: "+String(n.options.zoomWindowWidth/n.widthRatio)+"px;height: "+String(n.options.zoomWindowHeight/n.heightRatio)+"px;float: right;display: none;overflow: hidden;z-index: 999;-webkit-transform: translateZ(0);opacity:"+n.options.lensOpacity+";filter: alpha(opacity = "+100*n.options.lensOpacity+"); zoom:1;width:"+lensWidth+"px;height:"+lensHeight+"px;background-color:"+n.options.lensColour+";cursor:"+n.options.cursor+";border: "+n.options.lensBorderSize+"px solid "+n.options.lensBorderColour+";background-repeat: no-repeat;position: absolute;"),n.tintStyle="display: block;position: absolute;background-color: "+n.options.tintColour+";filter:alpha(opacity=0);opacity: 0;width: "+n.nzWidth+"px;height: "+n.nzHeight+"px;",n.lensRound="","lens"==n.options.zoomType&&(n.lensStyle="background-position: 0px 0px;float: left;display: none;border: "+String(n.options.borderSize)+"px solid "+n.options.borderColour+";width:"+String(n.options.lensSize)+"px;height:"+String(n.options.lensSize)+"px;background-repeat: no-repeat;position: absolute;"),"round"==n.options.lensShape&&(n.lensRound="border-top-left-radius: "+String(n.options.lensSize/2+n.options.borderSize)+"px;border-top-right-radius: "+String(n.options.lensSize/2+n.options.borderSize)+"px;border-bottom-left-radius: "+String(n.options.lensSize/2+n.options.borderSize)+"px;border-bottom-right-radius: "+String(n.options.lensSize/2+n.options.borderSize)+"px;"),n.zoomContainer=l('<div class="zoomContainer" style="-webkit-transform: translateZ(0);position:fixed;left:'+n.nzOffset.left+"px;top:"+n.nzOffset.top+"px;height:"+n.nzHeight+"px;width:"+n.nzWidth+'px;"></div>'),n.$elem.after(n.zoomContainer),n.options.containLensZoom&&"lens"==n.options.zoomType&&n.zoomContainer.css("overflow","hidden"),"inner"!=n.options.zoomType&&(n.zoomLens=l("<div class='zoomLens' style='"+n.lensStyle+n.lensRound+"'>&nbsp;</div>").appendTo(n.zoomContainer).click(function(){n.$elem.trigger("click")}),n.options.tint&&(n.tintContainer=l("<div/>").addClass("tintContainer"),n.zoomTint=l("<div class='zoomTint' style='"+n.tintStyle+"'></div>"),n.zoomLens.wrap(n.tintContainer),n.zoomTintcss=n.zoomLens.after(n.zoomTint),n.zoomTintImage=l('<img style="position: absolute; left: 0px; top: 0px; max-width: none; width: '+n.nzWidth+"px; height: "+n.nzHeight+'px;" src="'+n.imageSrc+'">').appendTo(n.zoomLens).click(function(){n.$elem.trigger("click")}))),isNaN(n.options.zoomWindowPosition)?n.zoomWindow=l("<div style='z-index:999;left:"+n.windowOffsetLeft+"px;top:"+n.windowOffsetTop+"px;"+n.zoomWindowStyle+"' class='zoomWindow'>&nbsp;</div>").appendTo("body").click(function(){n.$elem.trigger("click")}):n.zoomWindow=l("<div style='z-index:999;left:"+n.windowOffsetLeft+"px;top:"+n.windowOffsetTop+"px;"+n.zoomWindowStyle+"' class='zoomWindow'>&nbsp;</div>").appendTo(n.zoomContainer).click(function(){n.$elem.trigger("click")}),n.zoomWindowContainer=l("<div/>").addClass("zoomWindowContainer").css("width",n.options.zoomWindowWidth),n.zoomWindow.wrap(n.zoomWindowContainer),"lens"==n.options.zoomType&&n.zoomLens.css({backgroundImage:"url('"+n.imageSrc+"')"}),"window"==n.options.zoomType&&n.zoomWindow.css({backgroundImage:"url('"+n.imageSrc+"')"}),"inner"==n.options.zoomType&&n.zoomWindow.css({backgroundImage:"url('"+n.imageSrc+"')"}),n.$elem.bind("touchmove",function(e){e.preventDefault();var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];n.setPosition(t)}),n.zoomContainer.bind("touchmove",function(e){"inner"==n.options.zoomType&&n.showHideWindow("show"),e.preventDefault();var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];n.setPosition(t)}),n.zoomContainer.bind("touchend",function(e){n.showHideWindow("hide"),n.options.showLens&&n.showHideLens("hide"),n.options.tint&&"inner"!=n.options.zoomType&&n.showHideTint("hide")}),n.$elem.bind("touchend",function(e){n.showHideWindow("hide"),n.options.showLens&&n.showHideLens("hide"),n.options.tint&&"inner"!=n.options.zoomType&&n.showHideTint("hide")}),n.options.showLens&&(n.zoomLens.bind("touchmove",function(e){e.preventDefault();var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];n.setPosition(t)}),n.zoomLens.bind("touchend",function(e){n.showHideWindow("hide"),n.options.showLens&&n.showHideLens("hide"),n.options.tint&&"inner"!=n.options.zoomType&&n.showHideTint("hide")})),n.$elem.bind("mousemove",function(e){0==n.overWindow&&n.setElements("show"),n.lastX===e.clientX&&n.lastY===e.clientY||(n.setPosition(e),n.currentLoc=e),n.lastX=e.clientX,n.lastY=e.clientY}),n.zoomContainer.bind("mousemove",function(e){0==n.overWindow&&n.setElements("show"),n.lastX===e.clientX&&n.lastY===e.clientY||(n.setPosition(e),n.currentLoc=e),n.lastX=e.clientX,n.lastY=e.clientY}),"inner"!=n.options.zoomType&&n.zoomLens.bind("mousemove",function(e){n.lastX===e.clientX&&n.lastY===e.clientY||(n.setPosition(e),n.currentLoc=e),n.lastX=e.clientX,n.lastY=e.clientY}),n.options.tint&&"inner"!=n.options.zoomType&&n.zoomTint.bind("mousemove",function(e){n.lastX===e.clientX&&n.lastY===e.clientY||(n.setPosition(e),n.currentLoc=e),n.lastX=e.clientX,n.lastY=e.clientY}),"inner"==n.options.zoomType&&n.zoomWindow.bind("mousemove",function(e){n.lastX===e.clientX&&n.lastY===e.clientY||(n.setPosition(e),n.currentLoc=e),n.lastX=e.clientX,n.lastY=e.clientY}),n.zoomContainer.add(n.$elem).mouseenter(function(){0==n.overWindow&&n.setElements("show")}).mouseleave(function(){n.scrollLock||(n.setElements("hide"),n.options.onDestroy(n.$elem))}),"inner"!=n.options.zoomType&&n.zoomWindow.mouseenter(function(){n.overWindow=!0,n.setElements("hide")}).mouseleave(function(){n.overWindow=!1}),n.options.zoomLevel,n.options.minZoomLevel?n.minZoomLevel=n.options.minZoomLevel:n.minZoomLevel=2*n.options.scrollZoomIncrement,n.options.scrollZoom&&n.zoomContainer.add(n.$elem).bind("mousewheel DOMMouseScroll MozMousePixelScroll",function(e){n.scrollLock=!0,clearTimeout(l.data(this,"timer")),l.data(this,"timer",setTimeout(function(){n.scrollLock=!1},250));var t=e.originalEvent.wheelDelta||-1*e.originalEvent.detail;return e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),0<t/120?n.currentZoomLevel>=n.minZoomLevel&&n.changeZoomLevel(n.currentZoomLevel-n.options.scrollZoomIncrement):n.options.maxZoomLevel?n.currentZoomLevel<=n.options.maxZoomLevel&&n.changeZoomLevel(parseFloat(n.currentZoomLevel)+n.options.scrollZoomIncrement):n.changeZoomLevel(parseFloat(n.currentZoomLevel)+n.options.scrollZoomIncrement),!1})},setElements:function(e){var t=this;if(!t.options.zoomEnabled)return!1;"show"==e&&t.isWindowSet&&("inner"==t.options.zoomType&&t.showHideWindow("show"),"window"==t.options.zoomType&&t.showHideWindow("show"),t.options.showLens&&t.showHideLens("show"),t.options.tint&&"inner"!=t.options.zoomType&&t.showHideTint("show")),"hide"==e&&("window"==t.options.zoomType&&t.showHideWindow("hide"),t.options.tint||t.showHideWindow("hide"),t.options.showLens&&t.showHideLens("hide"),t.options.tint&&t.showHideTint("hide"))},setPosition:function(e){var t=this;if(!t.options.zoomEnabled)return!1;t.nzHeight=t.$elem.height(),t.nzWidth=t.$elem.width(),t.nzOffset=t.$elem.offset(),t.options.tint&&"inner"!=t.options.zoomType&&(t.zoomTint.css({top:0}),t.zoomTint.css({left:0})),t.options.responsive&&!t.options.scrollZoom&&t.options.showLens&&(t.nzHeight<t.options.zoomWindowWidth/t.widthRatio?lensHeight=t.nzHeight:lensHeight=String(t.options.zoomWindowHeight/t.heightRatio),t.largeWidth<t.options.zoomWindowWidth?lensWidth=t.nzWidth:lensWidth=t.options.zoomWindowWidth/t.widthRatio,t.widthRatio=t.largeWidth/t.nzWidth,t.heightRatio=t.largeHeight/t.nzHeight,"lens"!=t.options.zoomType&&(t.nzHeight<t.options.zoomWindowWidth/t.widthRatio?lensHeight=t.nzHeight:lensHeight=String(t.options.zoomWindowHeight/t.heightRatio),t.nzWidth<t.options.zoomWindowHeight/t.heightRatio?lensWidth=t.nzWidth:lensWidth=String(t.options.zoomWindowWidth/t.widthRatio),t.zoomLens.css("width",lensWidth),t.zoomLens.css("height",lensHeight),t.options.tint&&(t.zoomTintImage.css("width",t.nzWidth),t.zoomTintImage.css("height",t.nzHeight))),"lens"==t.options.zoomType&&t.zoomLens.css({width:String(t.options.lensSize)+"px",height:String(t.options.lensSize)+"px"})),t.zoomContainer.css({top:t.nzOffset.top}),t.zoomContainer.css({left:t.nzOffset.left}),t.mouseLeft=parseInt(e.pageX-t.nzOffset.left),t.mouseTop=parseInt(e.pageY-t.nzOffset.top),"window"==t.options.zoomType&&(t.Etoppos=t.mouseTop<t.zoomLens.height()/2,t.Eboppos=t.mouseTop>t.nzHeight-t.zoomLens.height()/2-2*t.options.lensBorderSize,t.Eloppos=t.mouseLeft<0+t.zoomLens.width()/2,t.Eroppos=t.mouseLeft>t.nzWidth-t.zoomLens.width()/2-2*t.options.lensBorderSize),"inner"==t.options.zoomType&&(t.Etoppos=t.mouseTop<t.nzHeight/2/t.heightRatio,t.Eboppos=t.mouseTop>t.nzHeight-t.nzHeight/2/t.heightRatio,t.Eloppos=t.mouseLeft<0+t.nzWidth/2/t.widthRatio,t.Eroppos=t.mouseLeft>t.nzWidth-t.nzWidth/2/t.widthRatio-2*t.options.lensBorderSize),t.mouseLeft<0||t.mouseTop<0||t.mouseLeft>t.nzWidth||t.mouseTop>t.nzHeight?t.setElements("hide"):(t.options.showLens&&(t.lensLeftPos=String(Math.floor(t.mouseLeft-t.zoomLens.width()/2)),t.lensTopPos=String(Math.floor(t.mouseTop-t.zoomLens.height()/2))),t.Etoppos&&(t.lensTopPos=0),t.Eloppos&&(t.windowLeftPos=0,t.lensLeftPos=0,t.tintpos=0),"window"==t.options.zoomType&&(t.Eboppos&&(t.lensTopPos=Math.max(t.nzHeight-t.zoomLens.height()-2*t.options.lensBorderSize,0)),t.Eroppos&&(t.lensLeftPos=t.nzWidth-t.zoomLens.width()-2*t.options.lensBorderSize)),"inner"==t.options.zoomType&&(t.Eboppos&&(t.lensTopPos=Math.max(t.nzHeight-2*t.options.lensBorderSize,0)),t.Eroppos&&(t.lensLeftPos=t.nzWidth-t.nzWidth-2*t.options.lensBorderSize)),"lens"==t.options.zoomType&&(t.windowLeftPos=String(-1*((e.pageX-t.nzOffset.left)*t.widthRatio-t.zoomLens.width()/2)),t.windowTopPos=String(-1*((e.pageY-t.nzOffset.top)*t.heightRatio-t.zoomLens.height()/2)),t.zoomLens.css({backgroundPosition:t.windowLeftPos+"px "+t.windowTopPos+"px"}),t.changeBgSize&&(t.nzHeight>t.nzWidth?("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})):("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"})),t.changeBgSize=!1),t.setWindowPostition(e)),t.options.tint&&"inner"!=t.options.zoomType&&t.setTintPosition(e),"window"==t.options.zoomType&&t.setWindowPostition(e),"inner"==t.options.zoomType&&t.setWindowPostition(e),t.options.showLens&&(t.fullwidth&&"lens"!=t.options.zoomType&&(t.lensLeftPos=0),t.zoomLens.css({left:t.lensLeftPos+"px",top:t.lensTopPos+"px"})))},showHideWindow:function(e){var t=this;"show"==e&&(t.isWindowActive||(t.options.zoomWindowFadeIn?t.zoomWindow.stop(!0,!0,!1).fadeIn(t.options.zoomWindowFadeIn):t.zoomWindow.show(),t.isWindowActive=!0)),"hide"==e&&t.isWindowActive&&(t.options.zoomWindowFadeOut?t.zoomWindow.stop(!0,!0).fadeOut(t.options.zoomWindowFadeOut,function(){t.loop&&(clearInterval(t.loop),t.loop=!1)}):t.zoomWindow.hide(),t.isWindowActive=!1)},showHideLens:function(e){var t=this;"show"==e&&(t.isLensActive||(t.options.lensFadeIn?t.zoomLens.stop(!0,!0,!1).fadeIn(t.options.lensFadeIn):t.zoomLens.show(),t.isLensActive=!0)),"hide"==e&&t.isLensActive&&(t.options.lensFadeOut?t.zoomLens.stop(!0,!0).fadeOut(t.options.lensFadeOut):t.zoomLens.hide(),t.isLensActive=!1)},showHideTint:function(e){var t=this;"show"==e&&(t.isTintActive||(t.options.zoomTintFadeIn?t.zoomTint.css({opacity:t.options.tintOpacity}).animate().stop(!0,!0).fadeIn("slow"):(t.zoomTint.css({opacity:t.options.tintOpacity}).animate(),t.zoomTint.show()),t.isTintActive=!0)),"hide"==e&&t.isTintActive&&(t.options.zoomTintFadeOut?t.zoomTint.stop(!0,!0).fadeOut(t.options.zoomTintFadeOut):t.zoomTint.hide(),t.isTintActive=!1)},setLensPostition:function(e){},setWindowPostition:function(e){var t=this;if(isNaN(t.options.zoomWindowPosition))t.externalContainer=l("#"+t.options.zoomWindowPosition),t.externalContainerWidth=t.externalContainer.width(),t.externalContainerHeight=t.externalContainer.height(),t.externalContainerOffset=t.externalContainer.offset(),t.windowOffsetTop=t.externalContainerOffset.top,t.windowOffsetLeft=t.externalContainerOffset.left;else switch(t.options.zoomWindowPosition){case 1:t.windowOffsetTop=t.options.zoomWindowOffety,t.windowOffsetLeft=+t.nzWidth;break;case 2:t.options.zoomWindowHeight>t.nzHeight&&(t.windowOffsetTop=-1*(t.options.zoomWindowHeight/2-t.nzHeight/2),t.windowOffsetLeft=t.nzWidth);break;case 3:t.windowOffsetTop=t.nzHeight-t.zoomWindow.height()-2*t.options.borderSize,t.windowOffsetLeft=t.nzWidth;break;case 4:t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=t.nzWidth;break;case 5:t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=t.nzWidth-t.zoomWindow.width()-2*t.options.borderSize;break;case 6:t.options.zoomWindowHeight>t.nzHeight&&(t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=-1*(t.options.zoomWindowWidth/2-t.nzWidth/2+2*t.options.borderSize));break;case 7:t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=0;break;case 8:t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize);break;case 9:t.windowOffsetTop=t.nzHeight-t.zoomWindow.height()-2*t.options.borderSize,t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize);break;case 10:t.options.zoomWindowHeight>t.nzHeight&&(t.windowOffsetTop=-1*(t.options.zoomWindowHeight/2-t.nzHeight/2),t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize));break;case 11:t.windowOffsetTop=t.options.zoomWindowOffety,t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize);break;case 12:t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize);break;case 13:t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=0;break;case 14:t.options.zoomWindowHeight>t.nzHeight&&(t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=-1*(t.options.zoomWindowWidth/2-t.nzWidth/2+2*t.options.borderSize));break;case 15:t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=t.nzWidth-t.zoomWindow.width()-2*t.options.borderSize;break;case 16:t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=t.nzWidth;break;default:t.windowOffsetTop=t.options.zoomWindowOffety,t.windowOffsetLeft=t.nzWidth}t.isWindowSet=!0,t.windowOffsetTop=t.windowOffsetTop+t.options.zoomWindowOffety,t.windowOffsetLeft=t.windowOffsetLeft+t.options.zoomWindowOffetx,t.zoomWindow.css({top:t.windowOffsetTop}),t.zoomWindow.css({left:t.windowOffsetLeft}),"inner"==t.options.zoomType&&(t.zoomWindow.css({top:0}),t.zoomWindow.css({left:0})),t.windowLeftPos=String(-1*((e.pageX-t.nzOffset.left)*t.widthRatio-t.zoomWindow.width()/2)),t.windowTopPos=String(-1*((e.pageY-t.nzOffset.top)*t.heightRatio-t.zoomWindow.height()/2)),t.Etoppos&&(t.windowTopPos=0),t.Eloppos&&(t.windowLeftPos=0),t.Eboppos&&(t.windowTopPos=-1*(t.largeHeight/t.currentZoomLevel-t.zoomWindow.height())),t.Eroppos&&(t.windowLeftPos=-1*(t.largeWidth/t.currentZoomLevel-t.zoomWindow.width())),t.fullheight&&(t.windowTopPos=0),t.fullwidth&&(t.windowLeftPos=0),"window"!=t.options.zoomType&&"inner"!=t.options.zoomType||(1==t.zoomLock&&(t.widthRatio<=1&&(t.windowLeftPos=0),t.heightRatio<=1&&(t.windowTopPos=0)),"window"==t.options.zoomType&&(t.largeHeight<t.options.zoomWindowHeight&&(t.windowTopPos=0),t.largeWidth<t.options.zoomWindowWidth&&(t.windowLeftPos=0)),t.options.easing?(t.xp||(t.xp=0),t.yp||(t.yp=0),t.loop||(t.loop=setInterval(function(){t.xp+=(t.windowLeftPos-t.xp)/t.options.easingAmount,t.yp+=(t.windowTopPos-t.yp)/t.options.easingAmount,t.scrollingLock?(clearInterval(t.loop),t.xp=t.windowLeftPos,t.yp=t.windowTopPos,t.xp=-1*((e.pageX-t.nzOffset.left)*t.widthRatio-t.zoomWindow.width()/2),t.yp=-1*((e.pageY-t.nzOffset.top)*t.heightRatio-t.zoomWindow.height()/2),t.changeBgSize&&(t.nzHeight>t.nzWidth?("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})):("lens"!=t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"})),t.changeBgSize=!1),t.zoomWindow.css({backgroundPosition:t.windowLeftPos+"px "+t.windowTopPos+"px"}),t.scrollingLock=!1,t.loop=!1):Math.round(Math.abs(t.xp-t.windowLeftPos)+Math.abs(t.yp-t.windowTopPos))<1?(clearInterval(t.loop),t.zoomWindow.css({backgroundPosition:t.windowLeftPos+"px "+t.windowTopPos+"px"}),t.loop=!1):(t.changeBgSize&&(t.nzHeight>t.nzWidth?("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})):("lens"!=t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"})),t.changeBgSize=!1),t.zoomWindow.css({backgroundPosition:t.xp+"px "+t.yp+"px"}))},16))):(t.changeBgSize&&(t.nzHeight>t.nzWidth?("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})):("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}),t.largeHeight/t.newvaluewidth<t.options.zoomWindowHeight?t.zoomWindow.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}):t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})),t.changeBgSize=!1),t.zoomWindow.css({backgroundPosition:t.windowLeftPos+"px "+t.windowTopPos+"px"})))},setTintPosition:function(e){var t=this;t.nzOffset=t.$elem.offset(),t.tintpos=String(-1*(e.pageX-t.nzOffset.left-t.zoomLens.width()/2)),t.tintposy=String(-1*(e.pageY-t.nzOffset.top-t.zoomLens.height()/2)),t.Etoppos&&(t.tintposy=0),t.Eloppos&&(t.tintpos=0),t.Eboppos&&(t.tintposy=-1*(t.nzHeight-t.zoomLens.height()-2*t.options.lensBorderSize)),t.Eroppos&&(t.tintpos=-1*(t.nzWidth-t.zoomLens.width()-2*t.options.lensBorderSize)),t.options.tint&&(t.fullheight&&(t.tintposy=0),t.fullwidth&&(t.tintpos=0),t.zoomTintImage.css({left:t.tintpos+"px"}),t.zoomTintImage.css({top:t.tintposy+"px"}))},swaptheimage:function(e,t){var n=this,i=new Image;n.options.loadingIcon&&(n.spinner=l("<div style=\"background: url('"+n.options.loadingIcon+"') no-repeat center;height:"+n.nzHeight+"px;width:"+n.nzWidth+'px;z-index: 2000;position: absolute; background-position: center center;"></div>'),n.$elem.after(n.spinner)),n.options.onImageSwap(n.$elem),i.onload=function(){n.largeWidth=i.width,n.largeHeight=i.height,n.zoomImage=t,n.zoomWindow.css({"background-size":n.largeWidth+"px "+n.largeHeight+"px"}),n.swapAction(e,t)},i.src=t},swapAction:function(e,t){var n=this,i=new Image;if(i.onload=function(){n.nzHeight=i.height,n.nzWidth=i.width,n.options.onImageSwapComplete(n.$elem),n.doneCallback()},i.src=e,n.currentZoomLevel=n.options.zoomLevel,n.options.maxZoomLevel=!1,"lens"==n.options.zoomType&&n.zoomLens.css({backgroundImage:"url('"+t+"')"}),"window"==n.options.zoomType&&n.zoomWindow.css({backgroundImage:"url('"+t+"')"}),"inner"==n.options.zoomType&&n.zoomWindow.css({backgroundImage:"url('"+t+"')"}),n.currentImage=t,n.options.imageCrossfade){var o=n.$elem,r=o.clone();if(n.$elem.attr("src",e),n.$elem.after(r),r.stop(!0).fadeOut(n.options.imageCrossfade,function(){l(this).remove()}),n.$elem.width("auto").removeAttr("width"),n.$elem.height("auto").removeAttr("height"),o.fadeIn(n.options.imageCrossfade),n.options.tint&&"inner"!=n.options.zoomType){var a=n.zoomTintImage,s=a.clone();n.zoomTintImage.attr("src",t),n.zoomTintImage.after(s),s.stop(!0).fadeOut(n.options.imageCrossfade,function(){l(this).remove()}),a.fadeIn(n.options.imageCrossfade),n.zoomTint.css({height:n.$elem.height()}),n.zoomTint.css({width:n.$elem.width()})}n.zoomContainer.css("height",n.$elem.height()),n.zoomContainer.css("width",n.$elem.width()),"inner"==n.options.zoomType&&(n.options.constrainType||(n.zoomWrap.parent().css("height",n.$elem.height()),n.zoomWrap.parent().css("width",n.$elem.width()),n.zoomWindow.css("height",n.$elem.height()),n.zoomWindow.css("width",n.$elem.width()))),n.options.imageCrossfade&&(n.zoomWrap.css("height",n.$elem.height()),n.zoomWrap.css("width",n.$elem.width()))}else n.$elem.attr("src",e),n.options.tint&&(n.zoomTintImage.attr("src",t),n.zoomTintImage.attr("height",n.$elem.height()),n.zoomTintImage.css({height:n.$elem.height()}),n.zoomTint.css({height:n.$elem.height()})),n.zoomContainer.css("height",n.$elem.height()),n.zoomContainer.css("width",n.$elem.width()),n.options.imageCrossfade&&(n.zoomWrap.css("height",n.$elem.height()),n.zoomWrap.css("width",n.$elem.width()));n.options.constrainType&&("height"==n.options.constrainType&&(n.zoomContainer.css("height",n.options.constrainSize),n.zoomContainer.css("width","auto"),n.options.imageCrossfade?(n.zoomWrap.css("height",n.options.constrainSize),n.zoomWrap.css("width","auto"),n.constwidth=n.zoomWrap.width()):(n.$elem.css("height",n.options.constrainSize),n.$elem.css("width","auto"),n.constwidth=n.$elem.width()),"inner"==n.options.zoomType&&(n.zoomWrap.parent().css("height",n.options.constrainSize),n.zoomWrap.parent().css("width",n.constwidth),n.zoomWindow.css("height",n.options.constrainSize),n.zoomWindow.css("width",n.constwidth)),n.options.tint&&(n.tintContainer.css("height",n.options.constrainSize),n.tintContainer.css("width",n.constwidth),n.zoomTint.css("height",n.options.constrainSize),n.zoomTint.css("width",n.constwidth),n.zoomTintImage.css("height",n.options.constrainSize),n.zoomTintImage.css("width",n.constwidth))),"width"==n.options.constrainType&&(n.zoomContainer.css("height","auto"),n.zoomContainer.css("width",n.options.constrainSize),n.options.imageCrossfade?(n.zoomWrap.css("height","auto"),n.zoomWrap.css("width",n.options.constrainSize),n.constheight=n.zoomWrap.height()):(n.$elem.css("height","auto"),n.$elem.css("width",n.options.constrainSize),n.constheight=n.$elem.height()),"inner"==n.options.zoomType&&(n.zoomWrap.parent().css("height",n.constheight),n.zoomWrap.parent().css("width",n.options.constrainSize),n.zoomWindow.css("height",n.constheight),n.zoomWindow.css("width",n.options.constrainSize)),n.options.tint&&(n.tintContainer.css("height",n.constheight),n.tintContainer.css("width",n.options.constrainSize),n.zoomTint.css("height",n.constheight),n.zoomTint.css("width",n.options.constrainSize),n.zoomTintImage.css("height",n.constheight),n.zoomTintImage.css("width",n.options.constrainSize))))},doneCallback:function(){var e=this;e.options.loadingIcon&&e.spinner.hide(),e.nzOffset=e.$elem.offset(),e.nzWidth=e.$elem.width(),e.nzHeight=e.$elem.height(),e.currentZoomLevel=e.options.zoomLevel,e.widthRatio=e.largeWidth/e.nzWidth,e.heightRatio=e.largeHeight/e.nzHeight,"window"==e.options.zoomType&&(e.nzHeight<e.options.zoomWindowWidth/e.widthRatio?lensHeight=e.nzHeight:lensHeight=String(e.options.zoomWindowHeight/e.heightRatio),e.options.zoomWindowWidth<e.options.zoomWindowWidth?lensWidth=e.nzWidth:lensWidth=e.options.zoomWindowWidth/e.widthRatio,e.zoomLens&&(e.zoomLens.css("width",lensWidth),e.zoomLens.css("height",lensHeight)))},getCurrentImage:function(){return this.zoomImage},getGalleryList:function(){var t=this;return t.gallerylist=[],t.options.gallery?l("#"+t.options.gallery+" a").each(function(){var e="";l(this).data("zoom-image")?e=l(this).data("zoom-image"):l(this).data("image")&&(e=l(this).data("image")),e==t.zoomImage?t.gallerylist.unshift({href:""+e,title:l(this).find("img").attr("title")}):t.gallerylist.push({href:""+e,title:l(this).find("img").attr("title")})}):t.gallerylist.push({href:""+t.zoomImage,title:l(this).find("img").attr("title")}),t.gallerylist},changeZoomLevel:function(e){var t=this;t.scrollingLock=!0,t.newvalue=parseFloat(e).toFixed(2),newvalue=parseFloat(e).toFixed(2),maxheightnewvalue=t.largeHeight/(t.options.zoomWindowHeight/t.nzHeight*t.nzHeight),maxwidthtnewvalue=t.largeWidth/(t.options.zoomWindowWidth/t.nzWidth*t.nzWidth),"inner"!=t.options.zoomType&&(maxheightnewvalue<=newvalue?(t.heightRatio=t.largeHeight/maxheightnewvalue/t.nzHeight,t.newvalueheight=maxheightnewvalue,t.fullheight=!0):(t.heightRatio=t.largeHeight/newvalue/t.nzHeight,t.newvalueheight=newvalue,t.fullheight=!1),maxwidthtnewvalue<=newvalue?(t.widthRatio=t.largeWidth/maxwidthtnewvalue/t.nzWidth,t.newvaluewidth=maxwidthtnewvalue,t.fullwidth=!0):(t.widthRatio=t.largeWidth/newvalue/t.nzWidth,t.newvaluewidth=newvalue,t.fullwidth=!1),"lens"==t.options.zoomType&&(maxheightnewvalue<=newvalue?(t.fullwidth=!0,t.newvaluewidth=maxheightnewvalue):(t.widthRatio=t.largeWidth/newvalue/t.nzWidth,t.newvaluewidth=newvalue,t.fullwidth=!1))),"inner"==t.options.zoomType&&(maxheightnewvalue=parseFloat(t.largeHeight/t.nzHeight).toFixed(2),maxwidthtnewvalue=parseFloat(t.largeWidth/t.nzWidth).toFixed(2),newvalue>maxheightnewvalue&&(newvalue=maxheightnewvalue),newvalue>maxwidthtnewvalue&&(newvalue=maxwidthtnewvalue),maxheightnewvalue<=newvalue?(t.heightRatio=t.largeHeight/newvalue/t.nzHeight,newvalue>maxheightnewvalue?t.newvalueheight=maxheightnewvalue:t.newvalueheight=newvalue,t.fullheight=!0):(t.heightRatio=t.largeHeight/newvalue/t.nzHeight,newvalue>maxheightnewvalue?t.newvalueheight=maxheightnewvalue:t.newvalueheight=newvalue,t.fullheight=!1),maxwidthtnewvalue<=newvalue?(t.widthRatio=t.largeWidth/newvalue/t.nzWidth,newvalue>maxwidthtnewvalue?t.newvaluewidth=maxwidthtnewvalue:t.newvaluewidth=newvalue,t.fullwidth=!0):(t.widthRatio=t.largeWidth/newvalue/t.nzWidth,t.newvaluewidth=newvalue,t.fullwidth=!1)),scrcontinue=!1,"inner"==t.options.zoomType&&(t.nzWidth>=t.nzHeight&&(t.newvaluewidth<=maxwidthtnewvalue?scrcontinue=!0:(scrcontinue=!1,t.fullheight=!0,t.fullwidth=!0)),t.nzHeight>t.nzWidth&&(t.newvaluewidth<=maxwidthtnewvalue?scrcontinue=!0:(scrcontinue=!1,t.fullheight=!0,t.fullwidth=!0))),"inner"!=t.options.zoomType&&(scrcontinue=!0),scrcontinue&&(t.zoomLock=0,t.changeZoom=!0,t.options.zoomWindowHeight/t.heightRatio<=t.nzHeight&&(t.currentZoomLevel=t.newvalueheight,"lens"!=t.options.zoomType&&"inner"!=t.options.zoomType&&(t.changeBgSize=!0,t.zoomLens.css({height:String(t.options.zoomWindowHeight/t.heightRatio)+"px"})),"lens"!=t.options.zoomType&&"inner"!=t.options.zoomType||(t.changeBgSize=!0)),t.options.zoomWindowWidth/t.widthRatio<=t.nzWidth&&("inner"!=t.options.zoomType&&t.newvaluewidth>t.newvalueheight&&(t.currentZoomLevel=t.newvaluewidth),"lens"!=t.options.zoomType&&"inner"!=t.options.zoomType&&(t.changeBgSize=!0,t.zoomLens.css({width:String(t.options.zoomWindowWidth/t.widthRatio)+"px"})),"lens"!=t.options.zoomType&&"inner"!=t.options.zoomType||(t.changeBgSize=!0)),"inner"==t.options.zoomType&&(t.changeBgSize=!0,t.nzWidth>t.nzHeight&&(t.currentZoomLevel=t.newvaluewidth),t.nzHeight>t.nzWidth&&(t.currentZoomLevel=t.newvaluewidth))),t.setPosition(t.currentLoc)},closeAll:function(){self.zoomWindow&&self.zoomWindow.hide(),self.zoomLens&&self.zoomLens.hide(),self.zoomTint&&self.zoomTint.hide()},changeState:function(e){"enable"==e&&(this.options.zoomEnabled=!0),"disable"==e&&(this.options.zoomEnabled=!1)}};l.fn.elevateZoom=function(t){return this.each(function(){var e=Object.create(i);e.init(t,this),l.data(this,"elevateZoom",e)})},l.fn.elevateZoom.options={imageSrc:null,zoomActivation:"hover",zoomEnabled:!0,preloading:1,zoomLevel:1,scrollZoom:!1,scrollZoomIncrement:.1,minZoomLevel:!1,maxZoomLevel:!1,easing:!1,easingAmount:12,lensSize:200,zoomWindowWidth:400,zoomWindowHeight:400,zoomWindowOffetx:0,zoomWindowOffety:0,zoomWindowPosition:1,zoomWindowBgColour:"#fff",lensFadeIn:!1,lensFadeOut:!1,debug:!1,zoomWindowFadeIn:!1,zoomWindowFadeOut:!1,zoomWindowAlwaysShow:!1,zoomTintFadeIn:!1,zoomTintFadeOut:!1,borderSize:4,showLens:!0,borderColour:"#888",lensBorderSize:1,lensBorderColour:"#000",lensShape:"square",zoomType:"window",containLensZoom:!1,lensColour:"white",lensOpacity:.4,lenszoom:!1,tint:!1,tintColour:"#333",tintOpacity:.4,gallery:!1,galleryActiveClass:"zoomGalleryActive",imageCrossfade:!1,constrainType:!1,constrainSize:!1,loadingIcon:!1,cursor:"default",responsive:!0,onComplete:l.noop,onDestroy:function(){},onZoomedImageLoaded:function(){},onImageSwap:l.noop,onImageSwapComplete:l.noop}}(jQuery,window,document),function(e){"function"==typeof define&&define.amd?define(["jquery","moment"],e):"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery"),require("moment")):e(jQuery,moment)}(function(q,G){"use strict";q.dateRangePickerLanguages={default:{selected:"Selected:",day:"Day",days:"Days",apply:"Close","week-1":"mo","week-2":"tu","week-3":"we","week-4":"th","week-5":"fr","week-6":"sa","week-7":"su","week-number":"W","month-name":["january","february","march","april","may","june","july","august","september","october","november","december"],shortcuts:"Shortcuts","custom-values":"Custom Values",past:"Past",following:"Following",previous:"Previous","prev-week":"Week","prev-month":"Month","prev-year":"Year",next:"Next","next-week":"Week","next-month":"Month","next-year":"Year","less-than":"Date range should not be more than %d days","more-than":"Date range should not be less than %d days","default-more":"Please select a date range longer than %d days","default-single":"Please select a date","default-less":"Please select a date range less than %d days","default-range":"Please select a date range between %d and %d days","default-default":"Please select a date range",time:"Time",hour:"Hour",minute:"Minute"},de:{selected:"Auswahl:",day:"Tag",days:"Tage",apply:"Schlieen","week-1":"mo","week-2":"di","week-3":"mi","week-4":"do","week-5":"fr","week-6":"sa","week-7":"so","month-name":["januar","februar","mrz","april","mai","juni","juli","august","september","oktober","november","dezember"],shortcuts:"Schnellwahl",past:"Vorherige",following:"Folgende",previous:"Vorherige","prev-week":"Woche","prev-month":"Monat","prev-year":"Jahr",next:"Nchste","next-week":"Woche","next-month":"Monat","next-year":"Jahr","less-than":"Datumsbereich darf nicht grer sein als %d Tage","more-than":"Datumsbereich darf nicht kleiner sein als %d Tage","default-more":"Bitte mindestens %d Tage auswhlen","default-single":"Bitte ein Datum auswhlen","default-less":"Bitte weniger als %d Tage auswhlen","default-range":"Bitte einen Datumsbereich zwischen %d und %d Tagen auswhlen","default-default":"Bitte ein Start- und Enddatum auswhlen",Time:"Zeit",hour:"Stunde",minute:"Minute"},es:{selected:"Seleccionado:",day:"Da",days:"Das",apply:"Cerrar","week-1":"lu","week-2":"ma","week-3":"mi","week-4":"ju","week-5":"vi","week-6":"sa","week-7":"do","month-name":["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortcuts:"Accesos directos",past:"Pasado",following:"Siguiente",previous:"Anterior","prev-week":"Semana","prev-month":"Mes","prev-year":"Ao",next:"Siguiente","next-week":"Semana","next-month":"Mes","next-year":"Ao","less-than":"El rango no debera ser mayor de %d das","more-than":"El rango no debera ser menor de %d das","default-more":"Por favor selecciona un rango mayor a %d das","default-single":"Por favor selecciona un da","default-less":"Por favor selecciona un rango menor a %d das","default-range":"Por favor selecciona un rango entre %d y %d das","default-default":"Por favor selecciona un rango de fechas."},fr:{selected:"Slection:",day:"Jour",days:"Jours",apply:"Fermer","week-1":"lu","week-2":"ma","week-3":"me","week-4":"je","week-5":"ve","week-6":"sa","week-7":"di","month-name":["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],shortcuts:"Raccourcis",past:"Pass",following:"Suivant",previous:"Prcdent","prev-week":"Semaine","prev-month":"Mois","prev-year":"Anne",next:"Suivant","next-week":"Semaine","next-month":"Mois","next-year":"Anne","less-than":"L'intervalle ne doit pas tre suprieure  %d jours","more-than":"L'intervalle ne doit pas tre infrieure  %d jours","default-more":"Merci de choisir une intervalle suprieure  %d jours","default-single":"Merci de choisir une date","default-less":"Merci de choisir une intervalle infrieure %d jours","default-range":"Merci de choisir une intervalle comprise entre %d et %d jours","default-default":"Merci de choisir une date"},pt:{selected:"Selecionado:",day:"Dia",days:"Dias",apply:"Fechar","week-1":"seg","week-2":"ter","week-3":"qua","week-4":"qui","week-5":"sex","week-6":"sab","week-7":"dom","week-number":"N","month-name":["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],shortcuts:"Atalhos","custom-values":"Valores Personalizados",past:"Passado",following:"Seguinte",previous:"Anterior","prev-week":"Semana","prev-month":"Ms","prev-year":"Ano",next:"Prximo","next-week":"Prxima Semana","next-month":"Prximo Ms","next-year":"Prximo Ano","less-than":"O perodo selecionado no deve ser maior que %d dias","more-than":"O perodo selecionado no deve ser menor que %d dias","default-more":"Selecione um perodo superior a %d dias","default-single":"Selecione uma data","default-less":"Selecione um perodo inferior a %d dias","default-range":"Selecione um perodo de %d a %d dias","default-default":"Selecione um perodo",time:"Tempo",hour:"Hora",minute:"Minuto"}},q.fn.dateRangePicker=function(g){g||(g={}),(g=q.extend(!0,{autoClose:!1,format:"YYYY-MM-DD",separator:" - ",language:"auto",startOfWeek:"sunday",getValue:function(){return q(this).val()},setValue:function(e){q(this).attr("readonly")||q(this).is(":disabled")||e==q(this).val()||q(this).val(e)},startDate:!1,endDate:!1,time:{enabled:!1},minDays:0,maxDays:0,customShortcuts:[],inline:!1,container:"body",alwaysOpen:!1,singleDate:!1,lookBehind:!1,batchMode:!1,highlightToday:!1,duration:200,stickyMonths:!1,dayDivAttrs:[],dayTdAttrs:[],selectForward:!1,selectBackward:!1,applyBtnClass:"",singleMonth:"auto",hoveringTooltip:function(e,t,n){return 1<e?e+" "+j("days"):""},showTopbar:!0,swapTime:!1,showWeekNumbers:!1,getWeekNumber:function(e){return G(e).format("w")},customOpenAnimation:null,customCloseAnimation:null,customArrowPrevSymbol:null,customArrowNextSymbol:null},g)).start=!1,g.end=!1,g.startWeek=!1,g.isTouchDevice="ontouchstart"in window||navigator.msMaxTouchPoints,g.isTouchDevice&&(g.hoveringTooltip=!1),"auto"==g.singleMonth&&(g.singleMonth=q(window).width()<480),g.singleMonth&&(g.stickyMonths=!1),g.showTopbar||(g.autoClose=!0),g.startDate&&"string"==typeof g.startDate&&(g.startDate=G(g.startDate,g.format).toDate()),g.endDate&&"string"==typeof g.endDate&&(g.endDate=G(g.endDate,g.format).toDate());var d,e,o=function(){{if("auto"!=g.language)return g.language&&g.language in q.dateRangePickerLanguages?q.dateRangePickerLanguages[g.language]:q.dateRangePickerLanguages.default;var e=navigator.language?navigator.language:navigator.browserLanguage;return e&&(e=e.toLowerCase())in q.dateRangePickerLanguages?q.dateRangePickerLanguages[e]:q.dateRangePickerLanguages.default}}(),r=!1,i=this,a=q(i).get(0);return q(this).unbind(".datepicker").bind("click.datepicker",function(e){d.is(":visible")||t(g.duration)}).bind("change.datepicker",function(e){n()}).bind("keyup.datepicker",function(){try{clearTimeout(e)}catch(e){}e=setTimeout(function(){n()},2e3)}),function(){var t=this;if(q(this).data("date-picker-opened"))return void E();q(this).data("date-picker-opened",!0),(d=function(){var e='<div class="date-picker-wrapper';g.extraClass&&(e+=" "+g.extraClass+" "),g.singleDate&&(e+=" single-date "),e+='">';var t=g.showWeekNumbers?6:5,n='<i class="icon-left-open-mini"></i>';g.customArrowPrevSymbol&&(n=g.customArrowPrevSymbol);var i='<i class="icon-right-open-mini"></i>';return g.customArrowNextSymbol&&(i=g.customArrowNextSymbol),e+='<div class="month-wrapper">   <table class="month1" cellspacing="0" border="0" cellpadding="0">       <thead>           <tr class="caption">               <th style="width:27px;">                   <div class="prev">'+n+'                   </div>               </th>               <th colspan="'+t+'" class="month-name">               </th>               <th style="width:27px;">'+(g.singleDate||!g.stickyMonths?'<div class="next">'+i+"</div>":"")+'               </th>           </tr>           <tr class="week-name">'+H()+"       </thead>       <tbody></tbody>   </table>",g.singleMonth||(e+='<div class="gap"></div><table class="month2" cellspacing="0" border="0" cellpadding="0">   <thead>   <tr class="caption">       <th style="width:27px;">'+(g.stickyMonths?"":'<div class="prev">'+n+"</div>")+'       </th>       <th colspan="'+t+'" class="month-name">       </th>       <th style="width:27px;">           <div class="next">'+i+'</div>       </th>   </tr>   <tr class="week-name">'+H()+"   </thead>   <tbody></tbody></table>"),e+='<div style="clear:both;height:0;font-size:0;"></div><div class="time"><div class="time1"></div>',g.singleDate||(e+='<div class="time2"></div>'),q(e+='</div><div style="clear:both;height:0;font-size:0;"></div></div></div>')}().hide()).append('<div class="date-range-length-tip"></div>'),q(g.container).append(d),g.inline?d.addClass("inline-wrapper"):s();g.alwaysOpen&&d.find(".apply-btn").hide();var e=Y();if(N(e),g.time.enabled)if(g.startDate&&g.endDate||g.start&&g.end)I(G(g.start||g.startDate).toDate(),"time1"),I(G(g.end||g.endDate).toDate(),"time2");else{var n=g.defaultEndTime?g.defaultEndTime:e;I(e,"time1"),I(n,"time2")}var i="";i=g.singleDate?j("default-single"):g.minDays&&g.maxDays?j("default-range"):g.minDays?j("default-more"):g.maxDays?j("default-less"):j("default-default");d.find(".default-top").html(i.replace(/\%d/,g.minDays).replace(/\%d/,g.maxDays)),g.singleMonth?d.addClass("single-month"):d.addClass("two-months");setTimeout(function(){u(),r=!0},0),d.click(function(e){e.stopPropagation()}),q(document).bind("click.datepicker",function(e){(function(e,t){return t.contains(e.target)||e.target==t||null!=t.childNodes&&0<=q.inArray(e.target,t.childNodes)})(e,t[0])||d.is(":visible")&&E()}),d.find(".next").click(function(){q(t).trigger("datepicker-next-month-clicked"),g.stickyMonths?function(e){var t=A(g.month1),n=A(g.month2);if(F(n))return;if(!g.singleDate&&0<=P(t,n))return;T(t,"month1"),T(n,"month2"),$()}():function(e){var t=q(e).parents("table").hasClass("month2"),n=t?g.month2:g.month1;if(n=A(n),!g.singleMonth&&!g.singleDate&&!t&&0<=P(n,g.month2)||F(n))return;T(n,t?"month2":"month1"),R()}(this),q(t).trigger("datepicker-next-month-finish-clicked")}),d.find(".prev").click(function(){q(t).trigger("datepicker-prev-month-clicked"),g.stickyMonths?function(e){var t=L(g.month1),n=L(g.month2);if(F(t))return;if(!g.singleDate&&P(n,t)<=0)return;T(n,"month2"),T(t,"month1"),$()}():function(e){var t=q(e).parents("table").hasClass("month2"),n=t?g.month2:g.month1;if(n=L(n),t&&P(n,g.month1)<=0||F(n))return;T(n,t?"month2":"month1"),R()}(this),q(t).trigger("datepicker-prev-month-finish-clicked")}),d.attr("unselectable","on").css("user-select","none").bind("selectstart",function(e){return e.preventDefault(),!1}),d.find(".apply-btn").click(function(){E();var e=O(new Date(g.start))+g.separator+O(new Date(g.end));q(t).trigger("datepicker-apply",{value:e,date1:new Date(g.start),date2:new Date(g.end)})}),d.find("[custom]").click(function(){var e=q(this).attr("custom");g.start=!1,g.end=!1,d.find(".day.checked").removeClass("checked"),g.setValue.call(a,e),S(),x(!0),$(),g.autoClose&&E()}),d.find("[shortcut]").click(function(){var e,t=q(this).attr("shortcut"),n=new Date,i=!1;if(-1!=t.indexOf("day")){var o=parseInt(t.split(",",2)[1],10);i=new Date((new Date).getTime()+864e5*o),n=new Date(n.getTime()+864e5*(0<o?1:-1))}else if(-1!=t.indexOf("week")){var r;for(e=-1!=t.indexOf("prev,")?-1:1,r=1==e?"monday"==g.startOfWeek?1:0:"monday"==g.startOfWeek?0:6,n=new Date(n.getTime()-864e5);n.getDay()!=r;)n=new Date(n.getTime()+864e5*e);i=new Date(n.getTime()+864e5*e*6)}else if(-1!=t.indexOf("month"))e=-1!=t.indexOf("prev,")?-1:1,(i=1==e?A(n):L(n)).setDate(1),(n=A(i)).setDate(1),n=new Date(n.getTime()-864e5);else if(-1!=t.indexOf("year"))e=-1!=t.indexOf("prev,")?-1:1,(i=new Date).setFullYear(n.getFullYear()+e),i.setMonth(0),i.setDate(1),n.setFullYear(n.getFullYear()+e),n.setMonth(11),n.setDate(31);else if("custom"==t){var a=q(this).html();if(g.customShortcuts&&0<g.customShortcuts.length)for(var s=0;s<g.customShortcuts.length;s++){var l=g.customShortcuts[s];if(l.name==a){var u=[];if((u=l.dates.call())&&2==u.length&&(i=u[0],n=u[1]),u&&1==u.length){var c=u[0];T(c,"month1"),T(A(c),"month2"),R()}break}}}i&&n&&(k(i,n),S())}),d.find(".time1 input[type=range]").bind("change touchmove",function(e){var t=e.target,n="hour"==t.name?q(t).val().replace(/^(\d{1})$/,"0$1"):void 0,i="minute"==t.name?q(t).val().replace(/^(\d{1})$/,"0$1"):void 0;p("time1",n,i)}),d.find(".time2 input[type=range]").bind("change touchmove",function(e){var t=e.target,n="hour"==t.name?q(t).val().replace(/^(\d{1})$/,"0$1"):void 0,i="minute"==t.name?q(t).val().replace(/^(\d{1})$/,"0$1"):void 0;p("time2",n,i)})}.call(this),g.alwaysOpen&&t(0),q(this).data("dateRangePicker",{setStart:function(e,t){return"string"==typeof e&&(e=G(e,g.format).toDate()),g.end=!1,D(e,t),this},setEnd:function(e,t){var n=new Date;return n.setTime(g.start),"string"==typeof e&&(e=G(e,g.format).toDate()),k(n,e,t),this},setDateRange:function(e,t,n){"string"==typeof e&&"string"==typeof t&&(e=G(e,g.format).toDate(),t=G(t,g.format).toDate()),k(e,t,n)},clear:function(){g.start=!1,g.end=!1,d.find(".day.checked").removeClass("checked"),d.find(".day.last-date-selected").removeClass("last-date-selected"),d.find(".day.first-date-selected").removeClass("first-date-selected"),g.setValue.call(a,""),S(),x(),$()},close:E,open:t,redraw:W,getDatePicker:function(){return d},resetMonthsView:N,destroy:function(){q(i).unbind(".datepicker"),q(i).data("dateRangePicker",""),q(i).data("date-picker-opened",null),d.remove(),q(window).unbind("resize.datepicker",s),q(document).unbind("click.datepicker",E)}}),q(window).bind("resize.datepicker",s),this;function s(){if(!g.inline){var e=q(i).offset();if("relative"==q(g.container).css("position")){var t=q(g.container).offset();d.css({top:e.top-t.top+q(i).outerHeight()+4,left:e.left-t.left})}else e.left<460?d.css({top:e.top+q(i).outerHeight()+parseInt(q("body").css("border-top")||0,10),left:e.left}):d.css({top:e.top+q(i).outerHeight()+parseInt(q("body").css("border-top")||0,10),left:e.left+q(i).width()-d.width()-16})}}function t(e){s(),W(),n(),g.customOpenAnimation?g.customOpenAnimation.call(d.get(0),function(){q(i).trigger("datepicker-opened",{relatedTarget:d})}):d.slideDown(e,function(){q(i).trigger("datepicker-opened",{relatedTarget:d})}),q(i).trigger("datepicker-open",{relatedTarget:d}),R(),u()}function n(){var e=g.getValue.call(a),t=e?e.split(g.separator):"";if(t&&(1==t.length&&g.singleDate||2<=t.length)){var n=g.format;n.match(/Do/)&&(n=n.replace(/Do/,"D"),t[0]=t[0].replace(/(\d+)(th|nd|st)/,"$1"),2<=t.length&&(t[1]=t[1].replace(/(\d+)(th|nd|st)/,"$1"))),r=!1,2<=t.length?k(l(t[0],n,G.locale(g.language)),l(t[1],n,G.locale(g.language))):1==t.length&&g.singleDate&&D(l(t[0],n,G.locale(g.language))),r=!0}}function l(e,t,n){return G(e,t,n).isValid()?G(e,t,n).toDate():G().toDate()}function u(){var e=d.find(".gap").css("margin-left");e&&(e=parseInt(e));var t=d.find(".month1").width(),n=d.find(".gap").width()+(e?2*e:0),i=d.find(".month2").width();d.find(".month-wrapper").width(t+n+i+(g.singleMonth?0:77))}function c(e,t){d.find("."+e+" input[type=range].hour-range").val(G(t).hours()),d.find("."+e+" input[type=range].minute-range").val(G(t).minutes()),p(e,G(t).format("HH"),G(t).format("mm"))}function h(e,t){g[e]=parseInt(G(parseInt(t)).startOf("day").add(G(g[e+"Time"]).format("HH"),"h").add(G(g[e+"Time"]).format("mm"),"m").valueOf())}function p(e,o,r){switch(o&&d.find("."+e+" .hour-val").text(o),r&&d.find("."+e+" .minute-val").text(r),e){case"time1":g.start&&t("start",G(g.start)),t("startTime",G(g.startTime||G().valueOf()));break;case"time2":g.end&&t("end",G(g.end)),t("endTime",G(g.endTime||G().valueOf()))}function t(e,t){var n=t.format("HH"),i=t.format("mm");g[e]=t.startOf("day").add(o||n,"h").add(r||i,"m").valueOf()}S(),x(),$()}function f(e){var t=e;return"week-range"===g.batchMode?t="monday"===g.startOfWeek?G(parseInt(e)).startOf("isoweek").valueOf():G(parseInt(e)).startOf("week").valueOf():"month-range"===g.batchMode&&(t=G(parseInt(e)).startOf("month").valueOf()),t}function m(e){var t=e;return"week-range"===g.batchMode?t="monday"===g.startOfWeek?G(parseInt(e)).endOf("isoweek").valueOf():G(parseInt(e)).endOf("week").valueOf():"month-range"===g.batchMode&&(t=G(parseInt(e)).endOf("month").valueOf()),t}function v(e){if(!e.hasClass("invalid")){var t=e.attr("time");if(e.addClass("checked"),g.singleDate?(g.start=t,g.end=!1):"week"===g.batchMode?"monday"===g.startOfWeek?(g.start=G(parseInt(t)).startOf("isoweek").valueOf(),g.end=G(parseInt(t)).endOf("isoweek").valueOf()):(g.end=G(parseInt(t)).endOf("week").valueOf(),g.start=G(parseInt(t)).startOf("week").valueOf()):"workweek"===g.batchMode?(g.start=G(parseInt(t)).day(1).valueOf(),g.end=G(parseInt(t)).day(5).valueOf()):"weekend"===g.batchMode?(g.start=G(parseInt(t)).day(6).valueOf(),g.end=G(parseInt(t)).day(7).valueOf()):"month"===g.batchMode?(g.start=G(parseInt(t)).startOf("month").valueOf(),g.end=G(parseInt(t)).endOf("month").valueOf()):g.start&&g.end||!g.start&&!g.end?(g.start=f(t),g.end=!1):g.start&&(g.end=m(t),g.time.enabled&&h("end",g.end)),g.time.enabled&&(g.start&&h("start",g.start),g.end&&h("end",g.end)),!g.singleDate&&g.start&&g.end&&g.start>g.end){var n=g.end;g.end=m(g.start),g.start=f(n),g.time.enabled&&g.swapTime&&(c("time1",g.start),c("time2",g.end))}g.start=parseInt(g.start),g.end=parseInt(g.end),b(),g.start&&!g.end&&(q(i).trigger("datepicker-first-date-selected",{date1:new Date(g.start)}),y(e)),_(),S(),x(),$(),z()}}function w(e){if(e=parseInt(e,10),g.startDate&&M(e,g.startDate)<0)return!1;if(g.endDate&&0<M(e,g.endDate))return!1;if(g.start&&!g.end&&!g.singleDate){if(0<g.maxDays&&C(e,g.start)>g.maxDays)return!1;if(0<g.minDays&&C(e,g.start)<g.minDays)return!1;if(g.selectForward&&e<g.start)return!1;if(g.selectBackward&&e>g.start)return!1;if(g.beforeShowDay&&"function"==typeof g.beforeShowDay){for(var t=!0,n=e;1<C(n,g.start);){if(!g.beforeShowDay(new Date(n))[0]){t=!1;break}if(Math.abs(n-g.start)<864e5)break;n>g.start&&(n-=864e5),n<g.start&&(n+=864e5)}if(!t)return!1}}return!0}function _(){return d.find(".day.invalid.tmp").removeClass("tmp invalid").addClass("valid"),g.start&&!g.end&&d.find(".day.toMonth.valid").each(function(){w(parseInt(q(this).attr("time"),10))?q(this).addClass("valid tmp").removeClass("invalid"):q(this).addClass("invalid tmp").removeClass("valid")}),!0}function y(e){var t=parseInt(e.attr("time")),n="";if(e.hasClass("has-tooltip")&&e.attr("data-tooltip"))n='<span style="white-space:nowrap">'+e.attr("data-tooltip")+"</span>";else if(!e.hasClass("invalid"))if(g.singleDate)d.find(".day.hovering").removeClass("hovering"),e.addClass("hovering");else if(d.find(".day").each(function(){var e=parseInt(q(this).attr("time"));g.start,g.end;e==t?q(this).addClass("hovering"):q(this).removeClass("hovering"),g.start&&!g.end&&(g.start<e&&e<=t||g.start>e&&t<=e)?q(this).addClass("hovering"):q(this).removeClass("hovering")}),g.start&&!g.end){var i=C(t,g.start);g.hoveringTooltip&&("function"==typeof g.hoveringTooltip?n=g.hoveringTooltip(i,g.start,t):!0===g.hoveringTooltip&&1<i&&(n=i+" "+j("days")))}if(n){var o=e.offset(),r=d.offset(),a=o.left-r.left,s=o.top-r.top;a+=e.width()/2;var l=d.find(".date-range-length-tip"),u=l.css({visibility:"hidden",display:"none"}).html(n).width(),c=l.height();a-=u/2,s-=c,setTimeout(function(){l.css({left:a,top:s,display:"block",visibility:"visible"})},10)}else d.find(".date-range-length-tip").hide()}function b(){d.find(".day.hovering").removeClass("hovering"),d.find(".date-range-length-tip").hide()}function z(){!0===g.singleDate?r&&g.start&&g.autoClose&&E():r&&g.start&&g.end&&g.autoClose&&E()}function S(){var e=Math.ceil((g.end-g.start)/864e5)+1;g.singleDate?g.start&&!g.end?d.find(".drp_top-bar").removeClass("error").addClass("normal"):d.find(".drp_top-bar").removeClass("error").removeClass("normal"):g.maxDays&&e>g.maxDays?(g.start=!1,g.end=!1,d.find(".day").removeClass("checked"),d.find(".drp_top-bar").removeClass("normal").addClass("error").find(".error-top").html(j("less-than").replace("%d",g.maxDays))):g.minDays&&e<g.minDays?(g.start=!1,g.end=!1,d.find(".day").removeClass("checked"),d.find(".drp_top-bar").removeClass("normal").addClass("error").find(".error-top").html(j("more-than").replace("%d",g.minDays))):g.start||g.end?d.find(".drp_top-bar").removeClass("error").addClass("normal"):d.find(".drp_top-bar").removeClass("error").removeClass("normal"),g.singleDate&&g.start&&!g.end||!g.singleDate&&g.start&&g.end?d.find(".apply-btn").removeClass("disabled"):d.find(".apply-btn").addClass("disabled"),g.batchMode&&(g.start&&g.startDate&&M(g.start,g.startDate)<0||g.end&&g.endDate&&0<M(g.end,g.endDate))&&(g.start=!1,g.end=!1,d.find(".day").removeClass("checked"))}function x(e,t){var n;d.find(".start-day").html("..."),d.find(".end-day").html("..."),d.find(".selected-days").hide(),g.start&&d.find(".start-day").html(O(new Date(parseInt(g.start)))),g.end&&d.find(".end-day").html(O(new Date(parseInt(g.end)))),g.start&&g.singleDate?(d.find(".apply-btn").removeClass("disabled"),n=O(new Date(g.start)),g.setValue.call(a,n,O(new Date(g.start)),O(new Date(g.end))),r&&!t&&q(i).trigger("datepicker-change",{value:n,date1:new Date(g.start)})):g.start&&g.end?(d.find(".selected-days").show().find(".selected-days-num").html(C(g.end,g.start)),d.find(".apply-btn").removeClass("disabled"),n=O(new Date(g.start))+g.separator+O(new Date(g.end)),g.setValue.call(a,n,O(new Date(g.start)),O(new Date(g.end))),r&&!t&&q(i).trigger("datepicker-change",{value:n,date1:new Date(g.start),date2:new Date(g.end)})):e?d.find(".apply-btn").removeClass("disabled"):d.find(".apply-btn").addClass("disabled")}function C(e,t){return Math.abs(B(e)-B(t))+1}function k(e,t,n){if(e.getTime()>t.getTime()){var i=t;t=e,e=i,i=null}var o=!0;if(g.startDate&&M(e,g.startDate)<0&&(o=!1),g.endDate&&0<M(t,g.endDate)&&(o=!1),!o)return T(g.startDate,"month1"),T(A(g.startDate),"month2"),void R();g.start=e.getTime(),g.end=t.getTime(),g.time.enabled&&(c("time1",e),c("time2",t)),(g.stickyMonths||0<M(e,t)&&0===P(e,t))&&(g.lookBehind?e=L(t):t=A(e)),g.stickyMonths&&!1!==g.endDate&&0<P(t,g.endDate)&&(e=L(e),t=L(t)),g.stickyMonths||0===P(e,t)&&(g.lookBehind?e=L(t):t=A(e)),T(e,"month1"),T(t,"month2"),R(),S(),x(!1,n),z()}function D(e,t){var n=!0;if(g.startDate&&M(e,g.startDate)<0&&(n=!1),g.endDate&&0<M(e,g.endDate)&&(n=!1),n){if(g.start=e.getTime(),g.time.enabled&&c("time1",e),T(e,"month1"),!0!==g.singleMonth)T(A(e),"month2");R(),x(!1,t),z()}else T(g.startDate,"month1")}function $(){(g.start||g.end)&&(d.find(".day").each(function(){var e=parseInt(q(this).attr("time")),t=g.start,n=g.end;g.time.enabled&&(e=G(e).startOf("day").valueOf(),t=G(t||G().valueOf()).startOf("day").valueOf(),n=G(n||G().valueOf()).startOf("day").valueOf()),g.start&&g.end&&e<=n&&t<=e||g.start&&!g.end&&G(t).format("YYYY-MM-DD")==G(e).format("YYYY-MM-DD")?q(this).addClass("checked"):q(this).removeClass("checked"),g.start&&G(t).format("YYYY-MM-DD")==G(e).format("YYYY-MM-DD")?q(this).addClass("first-date-selected"):q(this).removeClass("first-date-selected"),g.end&&G(n).format("YYYY-MM-DD")==G(e).format("YYYY-MM-DD")?q(this).addClass("last-date-selected"):q(this).removeClass("last-date-selected")}),d.find(".week-number").each(function(){q(this).attr("data-start-time")==g.startWeek&&q(this).addClass("week-number-selected")}))}function T(e,t){var n=function(e){return j("month-name")[e]}((e=G(e).toDate()).getMonth());d.find("."+t+" .month-name").html(n+" "+e.getFullYear()),d.find("."+t+" tbody").html(function(e){var t=[];e.setDate(1);new Date(e.getTime()-864e5);var n,i,o=new Date,r=e.getDay();0===r&&"monday"===g.startOfWeek&&(r=7);if(0<r)for(var a=r;0<a;a--){var s=new Date(e.getTime()-864e5*a);i=w(s.getTime()),g.startDate&&M(s,g.startDate)<0&&(i=!1),g.endDate&&0<M(s,g.endDate)&&(i=!1),t.push({date:s,type:"lastMonth",day:s.getDate(),time:s.getTime(),valid:i})}for(var l=e.getMonth(),a=0;a<40;a++)n=G(e).add(a,"days").toDate(),i=w(n.getTime()),g.startDate&&M(n,g.startDate)<0&&(i=!1),g.endDate&&0<M(n,g.endDate)&&(i=!1),t.push({date:n,type:n.getMonth()==l?"toMonth":"nextMonth",day:n.getDate(),time:n.getTime(),valid:i});for(var u=[],c=0;c<6&&"nextMonth"!=t[7*c].type;c++){u.push("<tr>");for(var s=0;s<7;s++){var d="monday"==g.startOfWeek?s+1:s;n=t[7*c+d];var h=G(n.time).format("L")==G(o).format("L");if(n.extraClass="",n.tooltip="",n.valid&&g.beforeShowDay&&"function"==typeof g.beforeShowDay){var p=g.beforeShowDay(G(n.time).toDate());n.valid=p[0],n.extraClass=p[1]||"",n.tooltip=p[2]||"",""!==n.tooltip&&(n.extraClass+=" has-tooltip ")}var f={time:n.time,"data-tooltip":n.tooltip,class:"day "+n.type+" "+n.extraClass+" "+(n.valid?"valid":"invalid")+" "+(h&&g.highlightToday?"real-today":"")};0===s&&g.showWeekNumbers&&u.push('<td><div class="week-number" data-start-time="'+n.time+'">'+g.getWeekNumber(n.date)+"</div></td>"),u.push("<td "+U({},g.dayTdAttrs,n)+"><div "+U(f,g.dayDivAttrs,n)+">"+V(n.time,n.day)+"</div></td>")}u.push("</tr>")}return u.join("")}(e)),g[t]=e,_(),d.find(".day").unbind("click").click(function(e){v(q(this))}),d.find(".day").unbind("mouseenter").mouseenter(function(e){y(q(this))}),d.find(".day").unbind("mouseleave").mouseleave(function(e){d.find(".date-range-length-tip").hide(),g.singleDate&&b()}),d.find(".week-number").unbind("click").click(function(e){!function(e){var t,n,i=parseInt(e.attr("data-start-time"),10);g.startWeek?(d.find(".week-number-selected").removeClass("week-number-selected"),t=new Date(i<g.startWeek?i:g.startWeek),n=new Date(i<g.startWeek?g.startWeek:i),g.startWeek=!1,g.start=G(t).day("monday"==g.startOfWeek?1:0).valueOf(),g.end=G(n).day("monday"==g.startOfWeek?7:6).valueOf()):(g.startWeek=i,e.addClass("week-number-selected"),t=new Date(i),g.start=G(t).day("monday"==g.startOfWeek?1:0).valueOf(),g.end=G(t).day("monday"==g.startOfWeek?7:6).valueOf()),_(),S(),x(),$(),z()}(q(this))})}function I(e,t){d.find("."+t).append("<div><span>"+j("Time")+': <span class="hour-val">00</span>:<span class="minute-val">00</span></span></div><div class="hour"><label>'+j("Hour")+': <input type="range" class="hour-range" name="hour" min="0" max="23"></label></div><div class="minute"><label>'+j("Minute")+': <input type="range" class="minute-range" name="minute" min="0" max="59"></label></div>'),c(t,e)}function O(e){return G(e).format(g.format)}function R(){$();var e=parseInt(G(g.month1).format("YYYYMM")),t=parseInt(G(g.month2).format("YYYYMM")),n=Math.abs(e-t);1<n&&89!=n?d.addClass("has-gap").removeClass("no-gap").find(".gap").css("visibility","visible"):d.removeClass("has-gap").addClass("no-gap").find(".gap").css("visibility","hidden");var i=d.find("table.month1").height(),o=d.find("table.month2").height();0===Math.max(i,o)?d.find(".gap").height(100):d.find(".gap").height(Math.max(i,o)+10)}function E(){if(!g.alwaysOpen){var e=function(){q(i).data("date-picker-opened",!1),q(i).trigger("datepicker-closed",{relatedTarget:d})};g.customCloseAnimation?g.customCloseAnimation.call(d.get(0),e):q(d).slideUp(g.duration,e),q(i).trigger("datepicker-close",{relatedTarget:d})}}function W(){T(g.month1,"month1"),T(g.month2,"month2")}function P(e,t){var n=parseInt(G(e).format("YYYYMM"))-parseInt(G(t).format("YYYYMM"));return 0<n?1:0==n?0:-1}function M(e,t){var n=parseInt(G(e).format("YYYYMMDD"))-parseInt(G(t).format("YYYYMMDD"));return 0<n?1:0==n?0:-1}function A(e){return G(e).add(1,"months").toDate()}function L(e){return G(e).add(-1,"months").toDate()}function H(){var e=g.showWeekNumbers?"<th>"+j("week-number")+"</th>":"";return"monday"==g.startOfWeek?e+"<th>"+j("week-1")+"</th><th>"+j("week-2")+"</th><th>"+j("week-3")+"</th><th>"+j("week-4")+"</th><th>"+j("week-5")+"</th><th>"+j("week-6")+"</th><th>"+j("week-7")+"</th>":e+"<th>"+j("week-7")+"</th><th>"+j("week-1")+"</th><th>"+j("week-2")+"</th><th>"+j("week-3")+"</th><th>"+j("week-4")+"</th><th>"+j("week-5")+"</th><th>"+j("week-6")+"</th>"}function F(e){return e=G(e),!(!g.startDate||!e.endOf("month").isBefore(g.startDate))||!(!g.endDate||!e.startOf("month").isAfter(g.endDate))}function U(e,t,o){var r=q.extend(!0,{},e);q.each(t,function(e,t){var n=t(o);for(var i in n)r.hasOwnProperty(i)?r[i]+=n[i]:r[i]=n[i]});var n="";for(var i in r)r.hasOwnProperty(i)&&(n+=i+'="'+r[i]+'" ');return n}function B(e){return Math.floor(function(e){G.isMoment(e)&&(e=e.toDate().getTime());"object"==typeof e&&e.getTime&&(e=e.getTime());"string"!=typeof e||e.match(/\d{13}/)||(e=G(e,g.format).toDate().getTime());return e=parseInt(e,10)-60*(new Date).getTimezoneOffset()*1e3}(e)/864e5)}function V(e,t){return g.showDateFilter&&"function"==typeof g.showDateFilter?g.showDateFilter(e,t):t}function j(e){var t=e.toLowerCase(),n=e in o?o[e]:t in o?o[t]:null,i=q.dateRangePickerLanguages.default;return null==n&&(n=e in i?i[e]:t in i?i[t]:""),n}function Y(){var e=g.defaultTime?g.defaultTime:new Date;return g.lookBehind?(g.startDate&&P(e,g.startDate)<0&&(e=A(G(g.startDate).toDate())),g.endDate&&0<P(e,g.endDate)&&(e=G(g.endDate).toDate())):(g.startDate&&P(e,g.startDate)<0&&(e=G(g.startDate).toDate()),g.endDate&&0<P(A(e),g.endDate)&&(e=L(G(g.endDate).toDate()))),g.singleDate&&(g.startDate&&P(e,g.startDate)<0&&(e=G(g.startDate).toDate()),g.endDate&&0<P(e,g.endDate)&&(e=G(g.endDate).toDate())),e}function N(e){e||(e=Y()),g.lookBehind?(T(L(e),"month1"),T(e,"month2")):(T(e,"month1"),T(A(e),"month2")),g.singleDate&&T(e,"month1"),$(),R()}}}),angular.module("SER.utils",[]);var KEYS={up:38,down:40,left:37,right:39,escape:27,enter:13,backspace:8,delete:46,shift:16,leftCmd:91,rightCmd:93,ctrl:17,alt:18,tab:9};function getStyles(e){return e instanceof HTMLElement?e.ownerDocument&&e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e):window.getComputedStyle(e):{}}function arrayGroupBy(e,t){for(var n={},i=0;i<e.length;++i)void 0===n[e[i][t]]&&(n[e[i][t]]=[]),n[e[i][t]].push(e[i]);return n}function hasValue(e){return angular.isArray(e)?0<e.length:!!angular.isDate(e)||(angular.isObject(e)?!angular.element.isEmptyObject(e):-1===["",null,void 0,NaN].indexOf(e))}function notValue(e){return angular.isArray(e)?0===e.length:!angular.isDate(e)&&(angular.isObject(e)?angular.element.isEmptyObject(e):-1<["",null,void 0,NaN].indexOf(e))}function hasProperty(e,t){return!!e&&e.hasOwnProperty(t)}function inArray(e,t){return!!t&&-1!==t.indexOf(e)}function notInArray(e,t){return!!t&&-1===t.indexOf(e)}function getObjectByValue(e,t,n){for(var i=0;i<e.length;i++)if(e[i].hasOwnProperty(t)){if(e[i][t]===n)return e[i];for(var o in e[i][t])if(e[i][t][o]===n)return e[i]}}function getObjIndexByValue(e,t,n){for(var i=0;i<e.length;i++)if(e[i].hasOwnProperty(t)){if(e[i][t]===n)return i;for(var o in e[i][t])if(e[i][t][o]===n)return i}}function browserWidth(){return 0<window.innerWidth?window.innerWidth:screen.width}function hasPdfViewer(){for(var e=0;e<window.navigator.plugins.length;e++)if(-1<window.navigator.plugins[e].name.toLowerCase().indexOf("pdf"))return!0;return!1}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function hasFiles(e){var t,n=!1;for(var i in e)if(null!=(t=e[i])&&(t instanceof window.Blob||t.flashId&&t.name&&t.size)){n=!0;break}return n}function guid(){return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()}function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}if(window.onbeforeprint=function(){console.log("Functionality to run before printing: ",window.location.href)},window.onafterprint=function(){console.log("Functionality to run after printing: ",window.location.href)},window.matchMedia){var mediaQueryList=window.matchMedia("print");mediaQueryList.addListener(function(e){e.matches?window.onbeforeprint():window.onafterprint()})}function getLogo(e,t,n){var i=n||AWS_S3_URL+"icons/";if("string"==typeof e)switch(e.toLowerCase().replace(/[0-9\. ]*/g,"")){case"chrome":case"chromium":return i+"logos/chrome.svg";case"edge":return i+"logos/edge.svg";case"firefox":return i+"logos/firefox.svg";case"ie":case"iemobile":return i+"logos/ie.svg";case"opera":return i+"logos/opera.svg";case"safari":case"mobilesafari":return i+"logos/safari.svg";case"webkit":return i+"logos/webkit.svg";case"android":return i+"logos/android.svg";case"ios":case"macos":return i+"logos/apple.svg";case"debian":return i+"logos/debian.svg";case"linux":return i+"logos/linux.svg";case"ubuntu":return i+"logos/ubuntu.svg";case"windows":switch(t.toLowerCase()){case"xp":case"7":return i+"logos/windows-xp.svg";case"8":case"8.1":case"10":return i+"logos/windows.svg"}break;case"windowsphone":return i+"logos/windows-phone.svg"}}function deleteAllCookies(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var n=e[t],i=n.indexOf("="),o=-1<i?n.substr(0,i):n;document.cookie=o+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}}bowser&&$("body").addClass("bos-"+bowser.osname.replace(/ /g,"")+" bosv-"+bowser.osversion.replace(/ /g,"")+" bn-"+bowser.name.replace(/ /g,"")+" bv-"+bowser.version.replace(/ /g,"")),function(e){var t=!1;if("function"==typeof define&&define.amd&&(define(e),t=!0),"object"==typeof exports&&(module.exports=e(),t=!0),!t){var n=window.Cookies,i=window.Cookies=e();i.noConflict=function(){return window.Cookies=n,i}}}(function(){function g(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}return function e(p){function f(e,t,n){var i;if("undefined"!=typeof document){if(1<arguments.length){if("number"==typeof(n=g({path:"/"},f.defaults,n)).expires){var o=new Date;o.setMilliseconds(o.getMilliseconds()+864e5*n.expires),n.expires=o}n.expires=n.expires?n.expires.toUTCString():"";try{i=JSON.stringify(t),/^[\{\[]/.test(i)&&(t=i)}catch(e){}t=p.write?p.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var r="";for(var a in n)n[a]&&(r+="; "+a,!0!==n[a]&&(r+="="+n[a]));return document.cookie=e+"="+t+r}e||(i={});for(var s=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,u=0;u<s.length;u++){var c=s[u].split("="),d=c.slice(1).join("=");'"'===d.charAt(0)&&(d=d.slice(1,-1));try{var h=c[0].replace(l,decodeURIComponent);if(d=p.read?p.read(d,h):p(d,h)||d.replace(l,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(e){}if(e===h){i=d;break}e||(i[h]=d)}catch(e){}}return i}}return(f.set=f).get=function(e){return f.call(f,e)},f.getJSON=function(){return f.apply({json:!0},[].slice.call(arguments))},f.defaults={},f.remove=function(e,t){f(e,"",g(t,{expires:-1}))},f.withConverter=e,f}(function(){})}),angular.module("SER.auth",[]),angular.module("SER.auth").value("userPermissions",[]),angular.module("SER.auth").value("isSuperuser",!1),angular.module("SER.auth").value("url403",""),angular.module("SER.auth").service("permissionService",["userPermissions","isSuperuser",function(n,i){return{hasPermission:function(e){return!!i||!notValue(e)&&-1!==n.indexOf(e)},atLeastPermissions:function(e){if(i)return!0;if(hasValue(e)){for(var t=0;t<e.length;t++)if(inArray(e[t],n))return!0;return!1}return!0},hasPermissions:function(e){if(i)return!0;for(var t=0;t<e.length;t++)if(notInArray(e[t],n))return!1;return!0}}}]),angular.module("SER.chip",[]),angular.module("SER.chip").directive("serChips",["$document",function(e){return{restrict:"E",scope:{model:"=",pattern:"=?"},link:function(t,e,n,i){var o=t.pattern?new RegExp(t.pattern):new RegExp(/^[\w\d].*$/),r=(e.find("input.chip-input"),e.find("select").controller("ngModel"));notValue(t.model)?(t.model=[],t.selectedValue=[]):(r.$setViewValue(t.model),r.$setDirty(!0)),t.addChip=function(){notValue(t.model)&&(t.model=[]),t.chipInput&&(notInArray(t.chipInput,t.model)&&o.test(t.chipInput)&&(t.model.push(t.chipInput),r.$setViewValue(t.model),r.$validate(),r.$setDirty(!0)),t.chipInput=null)},t.removeChip=function(e){t.model.splice(e,1),r.$setViewValue(t.model),r.$validate()},t.setFocus=function(){e.addClass("ng-focused"),e.removeClass("ng-blur")},t.setBlur=function(){e.addClass("ng-blur"),e.removeClass("ng-focused"),t.addChip()},t.checkKeypress=function(e){switch(e.keyCode){case KEYS.backspace:notValue(t.chipInput)&&hasValue(t.model)&&t.removeChip(t.model.length-1);break;case KEYS.enter:t.addChip()}}},template:function(e,t){var n="";return t.name&&(n='name="'+t.name+'"'),'<div class="chip" ng-repeat="chip in model track by $index">{{chip}}<md-icon class="remove" ng-click="removeChip($index)">close</md-icon></div>                 <input class="chip-input not-styled s-flex" ng-model="chipInput" ng-keydown="checkKeypress($event)" ng-focus="setFocus()" ng-blur="setBlur()" />                 <select '+n+' style="display: none;" multiple ng-model="selectedValue" '+("required"in t?"required":"")+" ></select>"}}}]),angular.module("SER.search",[]),angular.module("SER.search").directive("serAutocomplete",["$http","$timeout",function(c,d){return{restrict:"E",scope:{ngModel:"=",remoteUrl:"=",keywordField:"@",ngRequired:"=?",ngDisabled:"=?",selectItem:"&?",dropdownClass:"@?"},link:function(t,n,e,i,o){var r,a=angular.element(n[0].querySelector(".ser-autocomplete-results")),s=n.parents(),l="autocomplete-results-"+Math.round(1e6*Math.random());a.attr("id",l),a.detach(),t.results=[],t.isFetching=!1,t.selectInternalItem=function(e){angular.isFunction(t.selectItem)&&t.selectItem({newValue:e}),hasValue(t.keywordField)&&(t.ngModel=e[t.keywordField]),t.close()};var u=function(){var e=n[0],t={top:"",bottom:"",left:e.getBoundingClientRect().left+"px",width:e.offsetWidth+"px"};220<=angular.element(document.body).height()-(e.offsetHeight+e.getBoundingClientRect().top)?(t.top=e.offsetHeight+e.getBoundingClientRect().top,a.removeClass("ontop")):(t.bottom=angular.element(document.body).height()-e.getBoundingClientRect().top,a.addClass("ontop")),a.css(t)};t.showDropdown=function(){u(),angular.element(document.body).append(a),d(function(){angular.element(window).triggerHandler("resize")},50)},t.open=function(){t.isOpen=!0,t.showDropdown()},t.close=function(){t.isOpen=!1,a.detach()},s.each(function(e,t){angular.element(t).on("scroll."+l,function(e){u()})});angular.element(n[0].querySelector(".ser-autocomplete-wrapper input")).on("focus",function(){hasValue(t.results)&&d(function(){t.open()})}).on("blur",function(){t.close()}).on("keyup",function(e){r&&clearTimeout(r),r=setTimeout(function(){t.$apply(function(){t.isFetching=!0,t.results=[],t.close(),t.ngModel?c.get(t.remoteUrl+t.ngModel).then(function(e){t.results=e.data,t.isFetching=!1,hasValue(t.results)&&t.open()}):(t.isFetching=!1,t.close())})},500)}),a.on("mousedown",function(e){e.preventDefault()})},template:function(e,t){return'<div class="ser-autocomplete-wrapper" ng-class="{open: isOpen}"><div class="input-group">'+((i=e.find("addon").detach()).length?'<span class="addon">'+i.html()+"</span>":"")+'<input placeholder="{{placeholder}}" '+(t.name?'name="'+t.name+'"':"")+' ng-model="ngModel" '+(t.disabled?"disabled":'ng-disabled="ngDisabled"')+' ng-focus="ngFocus" ng-blur="searchBlur()" '+(t.required?"required":'ng-required="ngRequired"')+' /></div><div class="fetching line-loader" ng-show="isFetching"></div><ul md-virtual-repeat-container md-auto-shrink md-top-index="highlighted" class="ser-autocomplete-results '+t.dropdownClass+'"><li class="item" md-virtual-repeat="item in results" '+(t.mdItemSize?'md-item-size="'+t.mdItemSize+'"':"")+' ng-click="selectInternalItem(item)">'+((n=e.find("ser-item-template").detach()).length?n.html():e.html())+"</li></ul></div>";var n,i}}}]),angular.module("SER.datepicker",[]),angular.module("SER.datepicker").directive("weekDay",function(){return{restrict:"E",require:["ngModel"],scope:{ngModel:"="},link:function(t,e,n,i){t.toggleDay=function(e){"multiple"in n?(notValue(t.ngModel)&&(t.ngModel=[]),notInArray(e,t.ngModel)?t.ngModel.push(e):t.ngModel.splice(t.ngModel.indexOf(e),1)):t.ngModel=e!==t.ngModel?e:null},t.isSet=function(e){return"multiple"in n?inArray(e,t.ngModel):e===t.ngModel}},template:function(){return'<div class="wrapper"><div class="day" ng-click="toggleDay(1)" ng-class="{active: isSet(1)}">'+__("LUN")+'</div><div class="day" ng-click="toggleDay(2)" ng-class="{active: isSet(2)}">'+__("MAR")+'</div><div class="day" ng-click="toggleDay(3)" ng-class="{active: isSet(3)}">'+__("MIE")+'</div><div class="day" ng-click="toggleDay(4)" ng-class="{active: isSet(4)}">'+__("JUE")+'</div><div class="day" ng-click="toggleDay(5)" ng-class="{active: isSet(5)}">'+__("VIE")+'</div><div class="day" ng-click="toggleDay(6)" ng-class="{active: isSet(6)}">'+__("SAB")+'</div><div class="day" ng-click="toggleDay(7)" ng-class="{active: isSet(7)}">'+__("DOM")+"</div></div>"}}}),angular.module("SER.datepicker").directive("serDate",["$filter",function(e){return{restrict:"E",require:["ngModel"],scope:{ngModel:"=",config:"="},controller:["$scope",function(e){e.placeholder=__("select_date"),e.clear=function(){e.ngModel=null}}],link:function(n,i){i.find(".value-wrapper").tooltipster({content:i.find(".picker-wrapper"),delay:0,positionTracker:!0,trigger:"click",theme:"tooltipster-borderless",position:"bottom",interactive:!0});var o=i.find(".date-wrapper").dateRangePicker({inline:!0,container:i.find(".date-wrapper"),alwaysOpen:!0,language:"es",singleDate:!0,singleMonth:!0}).bind("datepicker-change",function(e,t){n.$apply(function(){n.ngModel=t.date1}),i.find(".value-wrapper").tooltipster("close")}).bind("datepicker-next-month-finish-clicked",function(e){i.find(".value-wrapper").tooltipster("reposition")}).bind("datepicker-prev-month-finish-clicked",function(e){i.find(".value-wrapper").tooltipster("reposition")});n.ngModel&&o.data("dateRangePicker").setStart(n.ngModel,!0),n.$watch("ngModel",function(e,t){e&&e!=t&&o.data("dateRangePicker").setStart(e,!0)},!0)},template:function(e,t){return'<div class="ser-date-wrapper" ng-class="{open: open, \'has-value\': blur}"><div ng-class="{\'bttn-group\': ngModel}" class="row center-center"><button type="button" class="bttn value-wrapper">{{ (ngModel | date: \'longDate\') || placeholder }}</button><button type="button" ng-show="ngModel" class="bttn clear" ng-click="clear()"></button></div><div class="tooltip-templates"><div class="picker-wrapper"><div class="date-wrapper"></div></div></div></div>'}}}]),angular.module("SER.datepicker").directive("serDateRange",["$filter",function(r){return{restrict:"E",require:["ngModel"],scope:{ngModel:"=",config:"="},controller:["$scope",function(e){e.placeholder=__("select_date_range"),e.clear=function(){e.ngModel=null,e.placeholder=__("select_date_range")}}],link:function(n,i){i.find(".value-wrapper").tooltipster({content:i.find(".picker-wrapper"),delay:0,positionTracker:!0,trigger:"click",theme:"tooltipster-borderless",position:"bottom",interactive:!0});var o=i.find(".date-wrapper").dateRangePicker({inline:!0,container:i.find(".date-wrapper"),alwaysOpen:!0,language:"es"}).bind("datepicker-change",function(e,t){n.$apply(function(){t.date1.setHours(0,0,0,0),t.date2.setHours(23,59,59,0),n.ngModel={FromDate:t.date1,ToDate:t.date2},n.placeholder=r("date")(t.date1,"longDate")+" - "+r("date")(t.date2,"longDate")}),i.find(".value-wrapper").tooltipster("close")}).bind("datepicker-next-month-finish-clicked",function(e){i.find(".value-wrapper").tooltipster("reposition")}).bind("datepicker-prev-month-finish-clicked",function(e){i.find(".value-wrapper").tooltipster("reposition")});n.ngModel&&n.ngModel.FromDate&&n.ngModel.ToDate&&(o.data("dateRangePicker").setStart(n.ngModel.FromDate,!0),o.data("dateRangePicker").setEnd(n.ngModel.ToDate,!0),n.placeholder=r("date")(n.ngModel.FromDate,"longDate")+" - "+r("date")(n.ngModel.ToDate,"longDate")),n.$watch("ngModel",function(e,t){hasValue(e)&&hasValue(e.FromDate)&&hasValue(e.ToDate)&&(n.placeholder=r("date")(e.FromDate,"longDate")+" - "+r("date")(e.ToDate,"longDate"),o.data("dateRangePicker").setStart(n.ngModel.FromDate,!0),o.data("dateRangePicker").setEnd(n.ngModel.ToDate,!0))},!0)},template:function(e,t){return'<div class="ser-date-wrapper" ng-class="{open: open, \'has-value\': blur}"><div ng-class="{\'bttn-group\': ngModel}" class="row center-center"><button type="button" class="bttn value-wrapper">{{ placeholder }}</button><button type="button" ng-show="ngModel" class="bttn clear" ng-click="clear()"></button></div><div class="tooltip-templates"><div class="picker-wrapper"><div class="date-wrapper"></div></div></div></div>'}}}]),angular.module("SER.filters",[]),angular.module("SER.filters").filter("PascalCase",[function(){return function(e){return e.replace(/([A-Z]+)([A-Z])/g," $1 $2").replace(/([a-z\d])([A-Z])/g,"$1 $2").replace(/([a-zA-Z])(\d)/g,"$1 $2").replace(/^./,function(e){return e.toUpperCase()}).trim()}}]),angular.module("SER.filters").filter("getItem",["$filter",function(r){return function(e,t,n){var i={};i[n]=e;var o;return hasValue(o=r("filter")(t,i,!0))&&0<o.length?o[0]:null}}]),angular.module("SER.filters").filter("minutesTime",[function(){return function(e,t){var n=parseInt(e/60,10);return(!t&&12<n?24===n?"00":(n-12<10?"0":"")+(n-12):(n<10?"0":"")+n)+":"+(e-60*n<10?"0"+(e-60*n):e-60*n)+(t?":00":12<=n&&24!==n?" pm":" am")}}]),angular.module("SER.filters").filter("timeMinutes",[function(){return function(e){return 60*parseInt(e.split(":")[0])+parseInt(e.split(":")[1])}}]),angular.module("SER.filters").filter("leadingChar",function(){return function(e,t,n){return n=n||"0",hasValue(e)?(e+="").length>=t?e:new Array(t-e.length+1).join(n)+e:""}}),angular.module("SER.fullscreen",[]),angular.module("SER.fullscreen").factory("Fullscreen",["$document","$rootScope",function(e,t){var n=e[0],i="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element&&Element.ALLOW_KEYBOARD_INPUT,o=t.$new();e.on("fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange",function(){o.$emit("SERFullscreen.change",r.isEnabled())});var r={$on:angular.bind(o,o.$on),all:function(){r.enable(n.documentElement)},enable:function(e){e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?/Version\/[\d]{1,2}(\.[\d]{1,2}){1}(\.(\d){1,2}){0,1} Safari/.test(navigator.userAgent)?e.webkitRequestFullscreen():e.webkitRequestFullscreen(i):e.msRequestFullscreen&&e.msRequestFullscreen()},cancel:function(){n.cancelFullScreen?n.cancelFullScreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.webkitExitFullscreen?n.webkitExitFullscreen():n.msExitFullscreen&&n.msExitFullscreen()},isEnabled:function(){return!!(n.fullscreenElement||n.mozFullScreenElement||n.webkitFullscreenElement||n.msFullscreenElement)},toggleAll:function(){r.isEnabled()?r.cancel():r.all()},isSupported:function(){var e=n.documentElement;return!!(e.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullscreen||e.msRequestFullscreen)}};return r}]),angular.module("SER.fullscreen").directive("fullscreen",["Fullscreen",function(r){return{link:function(n,i,o){if(o.fullscreen){n.$watch(o.fullscreen,function(e){var t=r.isEnabled();e&&!t?(r.enable(i[0]),i.addClass("isInFullScreen")):!e&&t&&(r.cancel(),i.removeClass("isInFullScreen"))});var e=r.$on("SERFullscreen.change",function(e,t){t||n.$evalAsync(function(){n.$eval(o.fullscreen+"= false"),i.removeClass("isInFullScreen")})});n.$on("$destroy",function(){e()})}else{if(void 0!==o.onlyWatchedProperty)return;i.on("click",function(e){r.enable(i[0])})}}}}]),angular.module("SER.Clipboard",[]),angular.module("SER.Clipboard").service("CopyToClipboard",["$window",function(e){var i=angular.element(e.document.body),o=angular.element("<textarea/>");return o.css({position:"fixed",opacity:"0"}),function(t,e){o.val(t),i.append(o),o[0].select();try{var n=document.execCommand("copy");if(!n)throw n;e&&alert(__("copy_success_clipboard"))}catch(e){window.prompt("Copy to clipboard: Ctrl+C, Enter",t)}o.remove()}}]),angular.module("SER.Clipboard").directive("serClickCopy",["CopyToClipboard",function(i){return{restrict:"A",link:function(e,t,n){t.bind("click",function(e){i(n.serClickCopy,!0)})}}}]);var i18n={__DICT:void 0,loadJSON:function(e){this.__DICT=e},__:function(e){if(void 0!==this.__DICT)return e in this.__DICT?this.__DICT[e]:(console.warn("Locale not found for: "+e),e);console.error("Locale JSON file not loaded | Locale not found for: "+e)}},__=function(e){return i18n.__(e)};angular.module("SER.i18n",[]),angular.module("SER.i18n").filter("translate",function(){return function(e){return i18n.__(e)}}),angular.module("SER.image",[]),angular.module("SER.image").directive("exifData",["Upload","$filter","afterPromises",function(r,a,s){return{restrict:"A",link:function(e,t,n){var i='<div class="exif">',o=new s(2,function(){i+="</div>",t.after(i)});t.on("load",function(e){i+="<div><strong>"+__("dimensions")+": </strong>"+e.target.naturalWidth+"x"+e.target.naturalHeight+"</div>",o.notify()}),r.urlToBlob(n.src).then(function(e){i+="<div><strong>"+__("size")+": </strong>"+a("byteFmt")(e.size,0)+"</div><div><strong>"+__("type")+": </strong>"+e.type+"</div>",o.notify()},function(){o.notify()})}}}]),angular.module("SER.image").directive("callbackImage",function(){return{restrict:"A",link:function(e,t,n){t.on("dragstart",function(e){e.preventDefault()}),t.bind("error",function(){t[0].src=n.callbackImage})}}}),angular.module("SER.image").directive("retryGetImage",function(){return{restrict:"A",scope:{retryGetImage:"@",fallbackRetry:"="},link:function(t,n,e){var i;t.$watch("retryGetImage",function(e){clearTimeout(i),n.unbind("load"),n.unbind("error"),n[0].src=e,n.addClass("hidden"),n.bind("load",function(){n.removeClass("hidden"),t.fallbackRetry=!1,clearTimeout(i),t.$apply()}),n.bind("error",function(){t.fallbackRetry=!0,i=setTimeout(function(){n[0].src=t.retryGetImage},5e3)})})}}}),angular.module("SER.image").directive("imgZoom",["$timeout",function(o){return{restrict:"E",scope:{image:"=",options:"="},link:function(e,t,n){t.find(".target").on("load",function(){t.find(".loader").addClass("ng-hide")}),t.find(".target").on("error",function(){t.find(".loader").addClass("ng-hide"),e.zoomReset()}),e.size="auto";var i={"max-height":"none"};angular.merge(i,e.options),e.zoomIn=function(){e.size=1.1*t.find(".target").width(),t.find(".target").css({"max-height":"none",height:"auto"})},e.zoomOut=function(){e.size=t.find(".target").width()/1.1,t.find(".target").css({"max-height":"none",height:"auto"})},e.zoomReset=function(){e.size="auto",t.find(".target").css({"max-height":i["max-height"],height:"auto"})},e.zoomExpand=function(){e.size="auto",t.find(".target").css({"max-height":i["max-height"],height:t.height()-2})},o(function(){e.zoomExpand()},500)},template:function(){return'<div class="controls"><button class="bttn icon" ng-click="zoomOut()"><i class="icon-zoom-out"></i></button><button class="bttn icon" ng-click="zoomReset()"><i class="icon-zoom-actual"></i></button><button class="bttn icon" ng-click="zoomExpand()"><i class="icon-zoom-expand"></i></button><button class="bttn icon" ng-click="zoomIn()"><i class="icon-zoom-in"></i></button></div><div class="loader dots">'+__("loading")+'</div><img class="target" ng-src="{{ image }}" ng-style="{width: size}" callback-image="/images/'+__("no_image_available.svg")+'" />'}}}]),angular.module("SER.image").directive("zoomImage",function(){return{restrict:"A",link:function(e,t,n){var i={responsive:!0,loadingIcon:!0,tint:!0,scrollZoom:!0,zoomWindowWidth:150,zoomWindowHeight:150,imageSrc:n.ngSrc};angular.merge(i,e.$eval(n.zoomImage)),t.elevateZoom(i)}}}),angular.module("SER.image").factory("cropAreaCircle",["cropArea",function(e){var t=function(){e.apply(this,arguments),this._boxResizeBaseSize=20,this._boxResizeNormalRatio=.9,this._boxResizeHoverRatio=1.2,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._boxResizeNormalSize=this._boxResizeBaseSize*this._boxResizeNormalRatio,this._boxResizeHoverSize=this._boxResizeBaseSize*this._boxResizeHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize=0,this._boxResizeIsHover=!1,this._areaIsHover=!1,this._boxResizeIsDragging=!1,this._areaIsDragging=!1};return(t.prototype=new e)._calcCirclePerimeterCoords=function(e){var t=this._size/2,n=e*(Math.PI/180);return[this._x+t*Math.cos(n),this._y+t*Math.sin(n)]},t.prototype._calcResizeIconCenterCoords=function(){return this._calcCirclePerimeterCoords(-45)},t.prototype._isCoordWithinArea=function(e){return Math.sqrt((e[0]-this._x)*(e[0]-this._x)+(e[1]-this._y)*(e[1]-this._y))<this._size/2},t.prototype._isCoordWithinBoxResize=function(e){var t=this._calcResizeIconCenterCoords(),n=this._boxResizeHoverSize/2;return e[0]>t[0]-n&&e[0]<t[0]+n&&e[1]>t[1]-n&&e[1]<t[1]+n},t.prototype._drawArea=function(e,t,n){e.arc(t[0],t[1],n/2,0,2*Math.PI)},t.prototype.draw=function(){e.prototype.draw.apply(this,arguments),this._cropCanvas.drawIconMove([this._x,this._y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio),this._cropCanvas.drawIconResizeBoxNESW(this._calcResizeIconCenterCoords(),this._boxResizeBaseSize,this._boxResizeIsHover?this._boxResizeHoverRatio:this._boxResizeNormalRatio)},t.prototype.processMouseMove=function(e,t){var n="default",i=!1;if(this._boxResizeIsHover=!1,this._areaIsHover=!1,this._areaIsDragging)this._x=e-this._posDragStartX,this._y=t-this._posDragStartY,n="move",i=this._areaIsHover=!0,this._events.trigger("area-move");else if(this._boxResizeIsDragging){var o,r,a;n="nesw-resize",r=e-this._posResizeStartX,o=(a=this._posResizeStartY-t)<r?this._posResizeStartSize+2*a:this._posResizeStartSize+2*r,this._size=Math.max(this._minSize,o),i=this._boxResizeIsHover=!0,this._events.trigger("area-resize")}else this._isCoordWithinBoxResize([e,t])?(n="nesw-resize",this._areaIsHover=!1,i=this._boxResizeIsHover=!0):this._isCoordWithinArea([e,t])&&(n="move",i=this._areaIsHover=!0);return this._dontDragOutside(),angular.element(this._ctx.canvas).css({cursor:n}),i},t.prototype.processMouseDown=function(e,t){this._isCoordWithinBoxResize([e,t])?(this._areaIsDragging=!1,this._areaIsHover=!1,this._boxResizeIsDragging=!0,this._boxResizeIsHover=!0,this._posResizeStartX=e,this._posResizeStartY=t,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start")):this._isCoordWithinArea([e,t])&&(this._areaIsDragging=!0,this._areaIsHover=!0,this._boxResizeIsDragging=!1,this._boxResizeIsHover=!1,this._posDragStartX=e-this._x,this._posDragStartY=t-this._y,this._events.trigger("area-move-start"))},t.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end")),this._boxResizeIsDragging&&(this._boxResizeIsDragging=!1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._boxResizeIsHover=!1,this._posDragStartX=0,this._posDragStartY=0},t}]),angular.module("SER.image").factory("cropAreaSquare",["cropArea",function(o){var e=function(){o.apply(this,arguments),this._resizeCtrlBaseRadius=10,this._resizeCtrlNormalRatio=.75,this._resizeCtrlHoverRatio=1,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._resizeCtrlNormalRadius=this._resizeCtrlBaseRadius*this._resizeCtrlNormalRatio,this._resizeCtrlHoverRadius=this._resizeCtrlBaseRadius*this._resizeCtrlHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize=0,this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._resizeCtrlIsDragging=-1,this._areaIsDragging=!1};return(e.prototype=new o)._calcSquareCorners=function(){var e=this._size/2;return[[this._x-e,this._y-e],[this._x+e,this._y-e],[this._x-e,this._y+e],[this._x+e,this._y+e]]},e.prototype._calcSquareDimensions=function(){var e=this._size/2;return{left:this._x-e,top:this._y-e,right:this._x+e,bottom:this._y+e}},e.prototype._isCoordWithinArea=function(e){var t=this._calcSquareDimensions();return e[0]>=t.left&&e[0]<=t.right&&e[1]>=t.top&&e[1]<=t.bottom},e.prototype._isCoordWithinResizeCtrl=function(e){for(var t=this._calcSquareCorners(),n=-1,i=0,o=t.length;i<o;i++){var r=t[i];if(e[0]>r[0]-this._resizeCtrlHoverRadius&&e[0]<r[0]+this._resizeCtrlHoverRadius&&e[1]>r[1]-this._resizeCtrlHoverRadius&&e[1]<r[1]+this._resizeCtrlHoverRadius){n=i;break}}return n},e.prototype._drawArea=function(e,t,n){var i=n/2;e.rect(t[0]-i,t[1]-i,n,n)},e.prototype.draw=function(){o.prototype.draw.apply(this,arguments),this._cropCanvas.drawIconMove([this._x,this._y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio);for(var e=this._calcSquareCorners(),t=0,n=e.length;t<n;t++){var i=e[t];this._cropCanvas.drawIconResizeCircle(i,this._resizeCtrlBaseRadius,this._resizeCtrlIsHover===t?this._resizeCtrlHoverRatio:this._resizeCtrlNormalRatio)}},e.prototype.processMouseMove=function(e,t){var n="default",i=!1;if(this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._areaIsDragging)this._x=e-this._posDragStartX,this._y=t-this._posDragStartY,n="move",i=this._areaIsHover=!0,this._events.trigger("area-move");else if(-1<this._resizeCtrlIsDragging){var o,r;switch(this._resizeCtrlIsDragging){case 0:r=o=-1,n="nwse-resize";break;case 1:r=-(o=1),n="nesw-resize";break;case 2:o=-1,r=1,n="nesw-resize";break;case 3:r=o=1,n="nwse-resize"}var a,s=(e-this._posResizeStartX)*o,l=(t-this._posResizeStartY)*r;a=l<s?this._posResizeStartSize+l:this._posResizeStartSize+s;var u=this._size;this._size=Math.max(this._minSize,a);var c=(this._size-u)/2;this._x+=c*o,this._y+=c*r,this._resizeCtrlIsHover=this._resizeCtrlIsDragging,i=!0,this._events.trigger("area-resize")}else{var d=this._isCoordWithinResizeCtrl([e,t]);if(-1<d){switch(d){case 0:n="nwse-resize";break;case 1:case 2:n="nesw-resize";break;case 3:n="nwse-resize"}this._areaIsHover=!1,this._resizeCtrlIsHover=d,i=!0}else this._isCoordWithinArea([e,t])&&(n="move",i=this._areaIsHover=!0)}return this._dontDragOutside(),angular.element(this._ctx.canvas).css({cursor:n}),i},e.prototype.processMouseDown=function(e,t){var n=this._isCoordWithinResizeCtrl([e,t]);-1<n?(this._areaIsDragging=!1,this._areaIsHover=!1,this._resizeCtrlIsDragging=n,this._resizeCtrlIsHover=n,this._posResizeStartX=e,this._posResizeStartY=t,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start")):this._isCoordWithinArea([e,t])&&(this._areaIsDragging=!0,this._areaIsHover=!0,this._resizeCtrlIsDragging=-1,this._resizeCtrlIsHover=-1,this._posDragStartX=e-this._x,this._posDragStartY=t-this._y,this._events.trigger("area-move-start"))},e.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end")),-1<this._resizeCtrlIsDragging&&(this._resizeCtrlIsDragging=-1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._resizeCtrlIsHover=-1,this._posDragStartX=0,this._posDragStartY=0},e}]),angular.module("SER.image").factory("cropArea",["cropCanvas",function(n){var e=function(e,t){this._ctx=e,this._events=t,this._minSize=80,this._cropCanvas=new n(e),this._image=new Image,this._x=0,this._y=0,this._size=200};return e.prototype.getImage=function(){return this._image},e.prototype.setImage=function(e){this._image=e},e.prototype.getX=function(){return this._x},e.prototype.setX=function(e){this._x=e,this._dontDragOutside()},e.prototype.getY=function(){return this._y},e.prototype.setY=function(e){this._y=e,this._dontDragOutside()},e.prototype.getSize=function(){return this._size},e.prototype.setSize=function(e){this._size=Math.max(this._minSize,e),this._dontDragOutside()},e.prototype.getMinSize=function(){return this._minSize},e.prototype.setMinSize=function(e){this._minSize=e,this._size=Math.max(this._minSize,this._size),this._dontDragOutside()},e.prototype._dontDragOutside=function(){var e=this._ctx.canvas.height,t=this._ctx.canvas.width;this._size>t&&(this._size=t),this._size>e&&(this._size=e),this._x<this._size/2&&(this._x=this._size/2),this._x>t-this._size/2&&(this._x=t-this._size/2),this._y<this._size/2&&(this._y=this._size/2),this._y>e-this._size/2&&(this._y=e-this._size/2)},e.prototype._drawArea=function(){},e.prototype.draw=function(){this._cropCanvas.drawCropArea(this._image,[this._x,this._y],this._size,this._drawArea)},e.prototype.processMouseMove=function(){},e.prototype.processMouseDown=function(){},e.prototype.processMouseUp=function(){},e}]),angular.module("SER.image").factory("cropCanvas",[function(){var o=[[-.5,-2],[-3,-4.5],[-.5,-7],[-7,-7],[-7,-.5],[-4.5,-3],[-2,-.5]],r=[[.5,-2],[3,-4.5],[.5,-7],[7,-7],[7,-.5],[4.5,-3],[2,-.5]],a=[[-.5,2],[-3,4.5],[-.5,7],[-7,7],[-7,.5],[-4.5,3],[-2,.5]],u=[[.5,2],[3,4.5],[.5,7],[7,7],[7,.5],[4.5,3],[2,.5]],n=[[-1.5,-2.5],[-1.5,-6],[-5,-6],[0,-11],[5,-6],[1.5,-6],[1.5,-2.5]],c=[[-2.5,-1.5],[-6,-1.5],[-6,-5],[-11,0],[-6,5],[-6,1.5],[-2.5,1.5]],d=[[-1.5,2.5],[-1.5,6],[-5,6],[0,11],[5,6],[1.5,6],[1.5,2.5]],h=[[2.5,-1.5],[6,-1.5],[6,-5],[11,0],[6,5],[6,1.5],[2.5,1.5]],p="#fff",f="#fff",g="#444",m="#fff",v="#fff",w="#444",_="#fff";return function(l){var s=function(e,t,n){return[n*e[0]+t[0],n*e[1]+t[1]]},i=function(e,t,n,i){l.save(),l.fillStyle=t,l.beginPath();var o,r=s(e[0],n,i);for(var a in l.moveTo(r[0],r[1]),e)0<a&&(o=s(e[a],n,i),l.lineTo(o[0],o[1]));l.lineTo(r[0],r[1]),l.fill(),l.closePath(),l.restore()};this.drawIconMove=function(e,t){i(n,_,e,t),i(c,_,e,t),i(d,_,e,t),i(h,_,e,t)},this.drawIconResizeCircle=function(e,t,n){var i=t*n;l.save(),l.strokeStyle=v,l.lineWidth=2,l.fillStyle=w,l.beginPath(),l.arc(e[0],e[1],i,0,2*Math.PI),l.fill(),l.stroke(),l.closePath(),l.restore()},this.drawIconResizeBoxBase=function(e,t,n){var i=t*n;l.save(),l.strokeStyle=f,l.lineWidth=2,l.fillStyle=g,l.fillRect(e[0]-i/2,e[1]-i/2,i,i),l.strokeRect(e[0]-i/2,e[1]-i/2,i,i),l.restore()},this.drawIconResizeBoxNESW=function(e,t,n){this.drawIconResizeBoxBase(e,t,n),i(r,m,e,n),i(a,m,e,n)},this.drawIconResizeBoxNWSE=function(e,t,n){this.drawIconResizeBoxBase(e,t,n),i(o,m,e,n),i(u,m,e,n)},this.drawCropArea=function(e,t,n,i){var o=e.width/l.canvas.width,r=e.height/l.canvas.height,a=t[0]-n/2,s=t[1]-n/2;l.save(),l.strokeStyle=p,l.lineWidth=2,l.beginPath(),i(l,t,n),l.stroke(),l.clip(),0<n&&l.drawImage(e,a*o,s*r,n*o,n*r,a,s,n,n),l.beginPath(),i(l,t,n),l.stroke(),l.clip(),l.restore()}}}]),angular.module("SER.image").service("cropEXIF",[function(){var c=!1,u=this.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},d=this.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},h=this.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},p=this.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function o(e){return!!e.exifdata}function n(i,o){function t(e){var t=r(e),n=function(e){var t=new DataView(e);c&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1))return c&&console.log("Not a valid JPEG"),!1;var n=2,i=e.byteLength;for(;n<i;){if(l=n,56===(s=t).getUint8(l)&&66===s.getUint8(l+1)&&73===s.getUint8(l+2)&&77===s.getUint8(l+3)&&4===s.getUint8(l+4)&&4===s.getUint8(l+5)){var o=t.getUint8(n+7);o%2!=0&&(o+=1),0===o&&(o=4);var r=n+8+o,a=t.getUint16(n+6+o);return g(e,r,a)}n++}var s,l}(e);i.exifdata=t||{},i.iptcdata=n||{},o&&o.call(i)}if(i.src)if(/^data\:/i.test(i.src))t(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),i=n.length,o=new ArrayBuffer(i),r=new Uint8Array(o),a=0;a<i;a++)r[a]=n.charCodeAt(a);return o}(i.src));else if(/^blob\:/i.test(i.src)){(n=new FileReader).onload=function(e){t(e.target.result)},function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},n.send()}(i.src,function(e){n.readAsArrayBuffer(e)})}else{var e=new XMLHttpRequest;e.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";t(e.response),e=null},e.open("GET",i.src,!0),e.responseType="arraybuffer",e.send(null)}else if(window.FileReader&&(i instanceof window.Blob||i instanceof window.File)){var n;(n=new FileReader).onload=function(e){c&&console.log("Got file of length "+e.target.result.byteLength),t(e.target.result)},n.readAsArrayBuffer(i)}}function r(e){var t=new DataView(e);if(c&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return c&&console.log("Not a valid JPEG"),!1;for(var n,i=2,o=e.byteLength;i<o;){if(255!=t.getUint8(i))return c&&console.log("Not a valid marker at offset "+i+", found: "+t.getUint8(i)),!1;if(n=t.getUint8(i+1),c&&console.log(n),225==n)return c&&console.log("Found 0xFFE1 marker"),a(t,i+4,t.getUint16(i+2));i+=2+t.getUint16(i+2)}}var f={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function g(e,t,n){for(var i,o,r,a,s=new DataView(e),l={},u=t;u<t+n;)28===s.getUint8(u)&&2===s.getUint8(u+1)&&(a=s.getUint8(u+2))in f&&((r=s.getInt16(u+3))+5,o=f[a],i=w(s,u+5,r),l.hasOwnProperty(o)?l[o]instanceof Array?l[o].push(i):l[o]=[l[o],i]:l[o]=i),u++;return l}function m(e,t,n,i,o){var r,a,s,l=e.getUint16(n,!o),u={};for(s=0;s<l;s++)r=n+12*s+2,!(a=i[e.getUint16(r,!o)])&&c&&console.log("Unknown tag: "+e.getUint16(r,!o)),u[a]=v(e,r,t,n,o);return u}function v(e,t,n,i,o){var r,a,s,l,u,c,d=e.getUint16(t+2,!o),h=e.getUint32(t+4,!o),p=e.getUint32(t+8,!o)+n;switch(d){case 1:case 7:if(1==h)return e.getUint8(t+8,!o);for(r=4<h?p:t+8,a=[],l=0;l<h;l++)a[l]=e.getUint8(r+l);return a;case 2:return w(e,r=4<h?p:t+8,h-1);case 3:if(1==h)return e.getUint16(t+8,!o);for(r=2<h?p:t+8,a=[],l=0;l<h;l++)a[l]=e.getUint16(r+2*l,!o);return a;case 4:if(1==h)return e.getUint32(t+8,!o);for(a=[],l=0;l<h;l++)a[l]=e.getUint32(p+4*l,!o);return a;case 5:if(1==h)return u=e.getUint32(p,!o),c=e.getUint32(p+4,!o),(s=new Number(u/c)).numerator=u,s.denominator=c,s;for(a=[],l=0;l<h;l++)u=e.getUint32(p+8*l,!o),c=e.getUint32(p+4+8*l,!o),a[l]=new Number(u/c),a[l].numerator=u,a[l].denominator=c;return a;case 9:if(1==h)return e.getInt32(t+8,!o);for(a=[],l=0;l<h;l++)a[l]=e.getInt32(p+4*l,!o);return a;case 10:if(1==h)return e.getInt32(p,!o)/e.getInt32(p+4,!o);for(a=[],l=0;l<h;l++)a[l]=e.getInt32(p+8*l,!o)/e.getInt32(p+4+8*l,!o);return a}}function w(e,t,n){for(var i="",o=t;o<t+n;o++)i+=String.fromCharCode(e.getUint8(o));return i}function a(e,t){if("Exif"!=w(e,t,4))return c&&console.log("Not valid EXIF data! "+w(e,t,4)),!1;var n,i,o,r,a,s=t+6;if(18761==e.getUint16(s))n=!1;else{if(19789!=e.getUint16(s))return c&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getUint16(s+2,!n))return c&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var l=e.getUint32(s+4,!n);if(l<8)return c&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(s+4,!n)),!1;if((i=m(e,s,s+l,d,n)).ExifIFDPointer)for(o in r=m(e,s,s+i.ExifIFDPointer,u,n)){switch(o){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":r[o]=p[o][r[o]];break;case"ExifVersion":case"FlashpixVersion":r[o]=String.fromCharCode(r[o][0],r[o][1],r[o][2],r[o][3]);break;case"ComponentsConfiguration":r[o]=p.Components[r[o][0]]+p.Components[r[o][1]]+p.Components[r[o][2]]+p.Components[r[o][3]]}i[o]=r[o]}if(i.GPSInfoIFDPointer)for(o in a=m(e,s,s+i.GPSInfoIFDPointer,h,n)){switch(o){case"GPSVersionID":a[o]=a[o][0]+"."+a[o][1]+"."+a[o][2]+"."+a[o][3]}i[o]=a[o]}return i}this.getData=function(e,t){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete)&&(o(e)?t&&t.call(e):n(e,t),!0)},this.getTag=function(e,t){if(o(e))return e.exifdata[t]},this.getAllTags=function(e){if(!o(e))return{};var t,n=e.exifdata,i={};for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i},this.pretty=function(e){if(!o(e))return"";var t,n=e.exifdata,i="";for(t in n)n.hasOwnProperty(t)&&("object"==typeof n[t]?n[t]instanceof Number?i+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":i+=t+" : ["+n[t].length+" values]\r\n":i+=t+" : "+n[t]+"\r\n");return i},this.readFromBinaryFile=function(e){return r(e)}}]),angular.module("SER.image").factory("cropHost",["$document","cropAreaCircle","cropAreaSquare","cropEXIF",function(l,w,_,y){var b=function(e){var t=e.getBoundingClientRect(),n=document.body,i=document.documentElement,o=window.pageYOffset||i.scrollTop||n.scrollTop,r=window.pageXOffset||i.scrollLeft||n.scrollLeft,a=i.clientTop||n.clientTop||0,s=i.clientLeft||n.clientLeft||0,l=t.top+o-a,u=t.left+r-s;return{top:Math.round(l),left:Math.round(u)}};return function(c,e,u){var d=null,h=null,p=null,f=[100,100],g=[300,300],n=200,i="image/png",o=null;function m(){d.clearRect(0,0,d.canvas.width,d.canvas.height),null!==h&&(d.drawImage(h,0,0,d.canvas.width,d.canvas.height),d.save(),d.fillStyle="rgba(0, 0, 0, 0.65)",d.fillRect(0,0,d.canvas.width,d.canvas.height),d.restore(),p.draw())}var v=function(){if(null!==h){p.setImage(h);var e=[h.width,h.height],t=h.width/h.height,n=e;n[0]>g[0]?(n[0]=g[0],n[1]=n[0]/t):n[0]<f[0]&&(n[0]=f[0],n[1]=n[0]/t),n[1]>g[1]?(n[1]=g[1],n[0]=n[1]*t):n[1]<f[1]&&(n[1]=f[1],n[0]=n[1]*t),c.prop("width",n[0]).prop("height",n[1]).css({"margin-left":-n[0]/2+"px","margin-top":-n[1]/2+"px"}),p.setX(d.canvas.width/2),p.setY(d.canvas.height/2),p.setSize(Math.min(200,d.canvas.width/2,d.canvas.height/2))}else c.prop("width",0).prop("height",0).css({"margin-top":0});m()},r=function(e){return angular.isDefined(e.changedTouches)?e.changedTouches:e.originalEvent.changedTouches},t=function(e){if(null!==h){var t,n,i=b(d.canvas);n="touchmove"===e.type?(t=r(e)[0].pageX,r(e)[0].pageY):(t=e.pageX,e.pageY),p.processMouseMove(t-i.left,n-i.top),m()}},a=function(e){if(e.preventDefault(),e.stopPropagation(),null!==h){var t,n,i=b(d.canvas);n="touchstart"===e.type?(t=r(e)[0].pageX,r(e)[0].pageY):(t=e.pageX,e.pageY),p.processMouseDown(t-i.left,n-i.top),m()}},s=function(e){if(null!==h){var t,n,i=b(d.canvas);n="touchend"===e.type?(t=r(e)[0].pageX,r(e)[0].pageY):(t=e.pageX,e.pageY),p.processMouseUp(t-i.left,n-i.top),m()}};this.getResultImageDataURI=function(){var e,t;return e=(t=angular.element("<canvas></canvas>")[0]).getContext("2d"),t.width=n,t.height=n,null!==h&&e.drawImage(h,(p.getX()-p.getSize()/2)*(h.width/d.canvas.width),(p.getY()-p.getSize()/2)*(h.height/d.canvas.height),p.getSize()*(h.width/d.canvas.width),p.getSize()*(h.height/d.canvas.height),0,0,n,n),null!==o?t.toDataURL(i,o):t.toDataURL(i)},this.setNewImageSource=function(e){if(h=null,v(),u.trigger("image-updated"),e){var l=new Image;"http"===e.substring(0,4).toLowerCase()&&(l.crossOrigin="anonymous"),l.onload=function(){u.trigger("load-done"),y.getData(l,function(){var e=y.getTag(l,"Orientation");if(-1<[3,6,8].indexOf(e)){var t=document.createElement("canvas"),n=t.getContext("2d"),i=l.width,o=l.height,r=0,a=0,s=0;switch(e){case 3:r=-l.width,a=-l.height,s=180;break;case 6:i=l.height,o=l.width,a=-l.height,s=90;break;case 8:i=l.height,o=l.width,r=-l.width,s=270}t.width=i,t.height=o,n.rotate(s*Math.PI/180),n.drawImage(l,r,a),(h=new Image).src=t.toDataURL("image/png")}else h=l;v(),u.trigger("image-updated")})},l.onerror=function(){u.trigger("load-error")},u.trigger("load-start"),l.src=e}},this.setMaxDimensions=function(e,t){if(g=[e,t],null!==h){var n=d.canvas.width,i=d.canvas.height,o=[h.width,h.height],r=h.width/h.height,a=o;a[0]>g[0]?(a[0]=g[0],a[1]=a[0]/r):a[0]<f[0]&&(a[0]=f[0],a[1]=a[0]/r),a[1]>g[1]?(a[1]=g[1],a[0]=a[1]*r):a[1]<f[1]&&(a[1]=f[1],a[0]=a[1]*r),c.prop("width",a[0]).prop("height",a[1]).css({"margin-left":-a[0]/2+"px","margin-top":-a[1]/2+"px"});var s=d.canvas.width/n,l=d.canvas.height/i,u=Math.min(s,l);p.setX(p.getX()*s),p.setY(p.getY()*l),p.setSize(p.getSize()*u)}else c.prop("width",0).prop("height",0).css({"margin-top":0});m()},this.setAreaMinSize=function(e){e=parseInt(e,10),isNaN(e)||(p.setMinSize(e),m())},this.setResultImageSize=function(e){e=parseInt(e,10),isNaN(e)||(n=e)},this.setResultImageFormat=function(e){i=e},this.setResultImageQuality=function(e){e=parseFloat(e),!isNaN(e)&&0<=e&&e<=1&&(o=e)},this.setAreaType=function(e){var t=p.getSize(),n=p.getMinSize(),i=p.getX(),o=p.getY(),r=w;"square"===e&&(r=_),(p=new r(d,u)).setMinSize(n),p.setSize(t),p.setX(i),p.setY(o),null!==h&&p.setImage(h),m()},d=c[0].getContext("2d"),p=new w(d,u),l.on("mousemove",t),c.on("mousedown",a),l.on("mouseup",s),l.on("touchmove",t),c.on("touchstart",a),l.on("touchend",s),this.destroy=function(){l.off("mousemove",t),c.off("mousedown",a),l.off("mouseup",t),l.off("touchmove",t),c.off("touchstart",a),l.off("touchend",t),c.remove()}}}]),angular.module("SER.image").factory("cropPubSub",[function(){return function(){var n={};this.on=function(e,t){return e.split(" ").forEach(function(e){n[e]||(n[e]=[]),n[e].push(t)}),this},this.trigger=function(e,t){return angular.forEach(n[e],function(e){e.call(null,t)}),this}}}]),angular.module("SER.image").directive("imgCrop",["$timeout","cropHost","cropPubSub",function(s,l,t){return{restrict:"E",scope:{image:"=",resultImage:"=",changeOnFly:"=",areaType:"@",areaMinSize:"=",resultImageSize:"=",resultImageFormat:"@",resultImageQuality:"=",onChange:"&",onLoadBegin:"&",onLoadDone:"&",onLoadError:"&"},template:"<canvas></canvas>",controller:["$scope",function(e){e.events=new t}],link:function(n,e){var i,t=n.events,o=new l(e.find("canvas"),{},t),r=function(e){var t=o.getResultImageDataURI();i!==t&&(i=t,angular.isDefined(e.resultImage)&&(e.resultImage=t),e.onChange({$dataURI:e.resultImage}))},a=function(t){return function(){s(function(){n.$apply(function(e){t(e)})})}};t.on("load-start",a(function(e){e.onLoadBegin({})})).on("load-done",a(function(e){e.onLoadDone({})})).on("load-error",a(function(e){e.onLoadError({})})).on("area-move area-resize",a(function(e){e.changeOnFly&&r(e)})).on("area-move-end area-resize-end image-updated",a(function(e){r(e)})),n.$watch("image",function(){o.setNewImageSource(n.image)}),n.$watch("areaType",function(){o.setAreaType(n.areaType),r(n)}),n.$watch("areaMinSize",function(){o.setAreaMinSize(n.areaMinSize),r(n)}),n.$watch("resultImageSize",function(){o.setResultImageSize(n.resultImageSize),r(n)}),n.$watch("resultImageFormat",function(){o.setResultImageFormat(n.resultImageFormat),r(n)}),n.$watch("resultImageQuality",function(){o.setResultImageQuality(n.resultImageQuality),r(n)}),n.$watch(function(){return[e[0].clientWidth,e[0].clientHeight]},function(e){o.setMaxDimensions(e[0],e[1]),r(n)},!0),n.$on("$destroy",function(){o.destroy()})}}}]),angular.module("SER.loader",[]).service("afterPromises",[function(){var e=function(e,t){this.callback=t,this.topCount=e,this.counter=0};return e.prototype.notify=function(){this.counter+=1,this.counter==this.topCount&&this.callback()},e}]),angular.module("SER.search").directive("remoteSearch",["$http",function(r){return{restrict:"A",require:["ngModel"],scope:{remoteSearchResults:"=",remoteSearch:"=",model:"=ngModel"},link:function(t,e,n,i){var o;e.on("keyup",function(e){o&&clearTimeout(o),o=setTimeout(function(){t.$apply(function(){t.remoteSearchResults=[]}),t.model&&r.get(t.remoteSearch+t.model).then(function(e){0<e.data.length&&(t.remoteSearchResults=e.data)})},500)})}}}]),angular.module("SER.search").directive("ngEnter",function(){return function(t,n,i){n.bind("keydown keypress",function(e){13===e.which&&(t.$apply(function(){t.$eval(i.ngEnter,{$event:e})}),e.preventDefault(),n.blur())})}}),angular.module("SER.selector",[]).directive("selector",["$rootScope","$filter","$timeout","$window","$http","$q","$templateCache",function(e,g,m,t,n,i,r){return{restrict:"EC",replace:!0,transclude:!0,scope:{value:"=model",disabled:"=?disable",disableSearch:"=?",required:"=?require",multiple:"=?multi",placeholder:"@?",valueAttr:"@",labelAttr:"@?",options:"=?",dropdownClass:"@?",limit:"=?",rtl:"=?",api:"=?",change:"&?",removeButton:"=?",softDelete:"=?",closeAfterSelection:"=?"},link:function(e,c,t,n,i){var d=angular.element(c[0].querySelector(".selector-dropdown")),h=angular.element(c[0].querySelector("select")),p=c.parents(),f="selector-"+Math.round(1e6*Math.random());d.attr("id",f),i(e,function(e,r){var n=g("filter"),i=angular.element(c[0].querySelector(".selector-input input")),t=i.controller("ngModel"),o=c.find("select").controller("ngModel"),a={api:{},search:"",disableSearch:!1,selectedValues:[],highlighted:0,valueAttr:null,labelAttr:"label",options:[],limit:1/0,removeButton:!0,closeAfterSelection:!0};for(var s in d.detach(),!angular.isDefined(r.value)&&r.multiple&&(r.value=[]),a)angular.isDefined(r[s])||(r[s]=a[s]);r.getObjValue=function(e,t){var n;if(!angular.isDefined(e)||!angular.isDefined(t))return e;if(0<(n=(t=angular.isArray(t)?t:t.split(".")).shift()).indexOf("[")){var i=n.match(/(\w+)\[(\d+)\]/);null!==i&&(e=e[i[1]],n=i[2])}return 0===t.length?e[n]:r.getObjValue(e[n],t)},r.setObjValue=function(e,t,n){var i;if(angular.isDefined(e)||(e={}),0<(i=(t=angular.isArray(t)?t:t.split(".")).shift()).indexOf("[")){var o=i.match(/(\w+)\[(\d+)\]/);null!==o&&(e=e[o[1]],i=o[2])}return e[i]=0===t.length?n:r.setObjValue(e[i],t,n),e},r.optionValue=function(e){return null===r.valueAttr?e:r.getObjValue(e,r.valueAttr)},r.optionEquals=function(e,t){return angular.equals(r.optionValue(e),angular.isDefined(t)?t:r.value)},r.setValue=function(e){r.multiple?r.value=null===r.valueAttr?e||[]:(e||[]).map(function(e){return r.getObjValue(e,r.valueAttr)}):r.value=null===r.valueAttr?e:r.getObjValue(e||{},r.valueAttr)},r.hasValue=function(){return hasValue(r.value)},r.optionToObject=function(e){var n={},t=angular.element(e);angular.forEach(e.dataset,function(e,t){t.match(/^\$/)||(n[t]=e)}),e.value&&r.setObjValue(n,r.valueAttr||"value",e.value),t.text()&&r.setObjValue(n,r.labelAttr,t.text().trim()),r.options.push(n),!t.attr("selected")||!r.multiple&&r.hasValue()||(r.multiple?(r.value||(r.value=[]),r.value.push(r.optionValue(n))):r.value||(r.value=r.optionValue(n)))},r.fillWithHtml=function(){r.options=[],angular.forEach(e,function(e){"option"===(e.tagName||"").toLowerCase()&&r.optionToObject(e)}),r.updateSelected()},r.initialize=function(){angular.isArray(r.options)&&r.options.length||r.fillWithHtml(),r.hasValue()&&(r.multiple?angular.isArray(r.value)||(r.value=[r.value]):angular.isArray(r.value)&&(r.value=r.value[0]),r.updateSelected(),r.filterOptions(),r.updateValue())},r.$watch("multiple",function(){m(r.setInputWidth)});var l=function(){var e=i.parent()[0],t={top:"",bottom:"",left:e.getBoundingClientRect().left+"px",width:e.offsetWidth+"px"};220<=angular.element(document.body).height()-(e.offsetHeight+e.getBoundingClientRect().top)?(t.top=e.offsetHeight+e.getBoundingClientRect().top,d.removeClass("ontop")):(t.bottom=angular.element(document.body).height()-e.getBoundingClientRect().top,d.addClass("ontop")),d.css(t)};r.showDropdown=function(){l(),angular.element(document.body).append(d),m(function(){angular.element(window).triggerHandler("resize")},50)},r.open=function(){r.multiple&&(r.selectedValues||[]).length>=r.limit||(r.isOpen=!0,r.showDropdown(),m(r.scrollToHighlighted))},r.close=function(){r.isOpen=!1,d.detach(),r.resetInput()};var u=function(e){r.filteredOptions.length&&(r.highlighted=(r.filteredOptions.length+e)%r.filteredOptions.length)};r.set=function(e){r.multiple&&(r.selectedValues||[]).length>=r.limit||(r.multiple?(r.selectedValues||(r.selectedValues=[]),r.selectedValues.indexOf(e)<0&&r.selectedValues.push(e)):r.selectedValues=[e],!r.multiple&&r.closeAfterSelection&&i.blur(),u(r.options.indexOf(e)),r.resetInput(),o.$setDirty())},r.unset=function(e){r.multiple?r.selectedValues.splice(angular.isDefined(e)?e:r.selectedValues.length-1,1):r.selectedValues=[],r.resetInput(),o.$setDirty()},r.keydown=function(e){switch(e.keyCode){case KEYS.up:if(!r.isOpen)break;u(r.highlighted-1),e.preventDefault();break;case KEYS.down:r.isOpen?u(r.highlighted+1):r.open(),e.preventDefault();break;case KEYS.escape:u(0),r.close();break;case KEYS.enter:r.isOpen&&(r.filteredOptions.length&&r.set(),e.preventDefault());break;case KEYS.backspace:if(!i.val()){var t=r.getObjValue(r.selectedValues.slice(-1)[0]||{},r.labelAttr||"");r.unset(),r.open(),r.softDelete&&!r.disableSearch&&m(function(){r.search=t}),e.preventDefault()}break;case KEYS.left:case KEYS.right:case KEYS.shift:case KEYS.ctrl:case KEYS.alt:case KEYS.tab:case KEYS.leftCmd:case KEYS.rightCmd:break;default:!r.multiple&&r.hasValue()?e.preventDefault():(r.open(),u(0))}},r.inOptions=function(e,t){return 0<=e.indexOf(t)},r.filterOptions=function(){if(r.filteredOptions=n(r.options||[],r.search),angular.isArray(r.selectedValues)||(r.selectedValues=[]),r.multiple)r.filteredOptions=r.filteredOptions.filter(function(e){return!r.inOptions(r.selectedValues,e)});else{var e=r.filteredOptions.indexOf(r.selectedValues[0]);0<=e&&u(e)}},r.measureWidth=function(){var e,t=getStyles(i[0]),n=angular.element('<span class="selector-shadow"></span>');return n.text(i.val()||(r.hasValue()?"":r.placeholder)||""),angular.element(document.body).append(n),angular.forEach(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(e){n.css(e,t[e])}),e=n[0].offsetWidth,n.remove(),e},r.setInputWidth=function(){var e=r.measureWidth()+1;i.css("width",e+"px")},r.resetInput=function(){i.val(""),r.setInputWidth(),m(function(){r.search=""})},r.$watch("[search, options, value]",function(){r.filterOptions(),m(function(){r.setInputWidth(),r.isOpen&&r.showDropdown()})},!0),r.updateValue=function(e){angular.isDefined(e)||(e=r.selectedValues||[]),r.setValue(r.multiple?e:e[0])},r.$watch("selectedValues",function(e,t){angular.equals(e,t)||(r.updateValue(),angular.isFunction(r.change)&&r.change(r.multiple?{newValue:e,oldValue:t}:{newValue:(e||[])[0],oldValue:(t||[])[0]}))},!0),r.$watchCollection("options",function(e,t){angular.equals(e,t)||r.updateSelected()}),r.updateSelected=function(){r.multiple?r.selectedValues=(r.value||[]).map(function(t){return n(r.options,function(e){return r.optionEquals(e,t)})[0]}).filter(function(e){return angular.isDefined(e)}).slice(0,r.limit):r.selectedValues=(r.options||[]).filter(function(e){return r.optionEquals(e)}).slice(0,1)},r.$watch("value",function(e,t){angular.equals(e,t)||r.updateSelected()},!0),i=angular.element(c[0].querySelector(".selector-input input")).on("focus",function(){m(function(){r.$apply(r.open)})}).on("blur",function(){r.close()}).on("keydown",function(e){r.$apply(function(){r.keydown(e)})}).on("input",function(){r.setInputWidth()}),d.on("mousedown",function(e){e.preventDefault()}),p.each(function(e,t){angular.element(t).on("scroll."+f,function(e){l()})}),r.$watch(function(){return t.$pristine},function(e){o[e?"$setPristine":"$setDirty"]()}),r.$watch(function(){return t.$touched},function(e){o[e?"$setTouched":"$setUntouched"]()}),angular.forEach(["open","close"],function(e){r.api[e]=r[e]}),r.api.focus=function(){i[0].focus()},r.api.set=function(e){return r.value=e},r.api.unset=function(t){var n=t?(r.selectedValues||[]).filter(function(e){return r.optionEquals(e,t)}):r.selectedValues,e=r.selectedValues.map(function(e,t){return r.inOptions(n,e)?t:-1}).filter(function(e){return 0<=e});angular.forEach(e,function(e,t){r.unset(e-t)})},r.isDirty=function(){return h.hasClass("ng-dirty")},r.isInvalid=function(){return h.hasClass("ng-invalid")},r.initialize()}),e.$on("$destroy",function(){d.remove(),d.off("mousedown"),angular.element(c[0].querySelector(".selector-input input")).off("focus blur keydown input "),angular.element(document.body).off("resize."+f),p.each(function(e,t){$(t).off("scroll."+f+" resize."+f)}),p=null})},template:function(e,t){var n,i=r.get(t.viewItemTemplate)?r.get(t.viewItemTemplate):'<span ng-bind="getObjValue(option, labelAttr) || option"></span>';n=t.labelAttr?'<span ng-bind="getObjValue(option, labelAttr) || option"></span>':r.get(t.viewItemTemplate)?r.get(t.viewItemTemplate):'<span ng-bind="getObjValue(option, labelAttr) || option"></span>',t.dropdownItemTemplate&&(n=r.get(t.dropdownItemTemplate)?r.get(t.dropdownItemTemplate):'<span ng-bind="getObjValue(option, labelAttr) || option"></span>');var o="";return t.name&&(o='name="'+t.name+'"'),r.get("selector/Base")?r.get("selector/Base"):"<div class=\"selector-container\" ng-attr-dir=\"{{rtl ? 'rtl' : 'ltr'}}\" ng-class=\"{open: isOpen, empty: !filteredOptions.length && !search, 'ng-dirty': isDirty(), 'ng-invalid': isInvalid(),multiple: multiple, 'has-value': hasValue(), rtl: rtl, 'remove-button': removeButton, disabled: disabled}\"><select "+o+' ng-required="required && !hasValue()" class="not-styled" ng-model="selectedValues" multiple style="display: none;"></select><label class="selector-input"><ul class="selector-values"><li ng-repeat="(index, option) in selectedValues track by index"><div>'+i+'</div><div ng-if="multiple" class="selector-helper" ng-click="!disabled && unset(index)"><span class="selector-icon"></span></div></li></ul><input ng-model="search" class="selector-search-input not-styled" placeholder="{{!hasValue() ? placeholder : \'\'}}"ng-disabled="disabled" ng-readonly="disableSearch" ng-required="required && !hasValue()" autocomplete="off"><div ng-if="!multiple" class="selector-helper selector-global-helper" ng-click="!disabled && removeButton && unset()"><span class="selector-icon"></span></div></label><ul md-virtual-repeat-container md-auto-shrink md-top-index="highlighted" class="selector-dropdown '+t.dropdownClass+'"><li md-virtual-repeat="option in filteredOptions" ng-class="{active: highlighted == $index}" class="selector-option" ng-click="set(option)">'+n+"</li></ul></div>"}}}]),angular.module("SER.tooltipster",[]),angular.module("SER.tooltipster").directive("tooltipster",function(){return{restrict:"A",scope:{tooltipsterOptions:"="},link:function(e,n,t){var i={content:t.tooltipster,maxWidth:300,delay:0,contentAsHTML:!0,positionTracker:!0,interactive:!0,trigger:"hover",theme:"tooltipster-borderless",functionReady:function(e,t){$(t.tooltip).on("click",function(){n.tooltipster("hide")})}};angular.merge(i,e.tooltipsterOptions),n.tooltipster(i)}}}),angular.module("SER.tooltipster").directive("tooltipsterMenu",function(){return{restrict:"A",scope:{tooltipsterMenu:"="},link:function(e,n,t){var i={content:n.find(".tooltip-content"),delay:0,trigger:"click",theme:"tooltipster-borderless",position:"bottom",positionTracker:!0,interactive:!0,functionReady:function(e,t){$(t.tooltip).on("click",function(){n.tooltipster("hide")})}};angular.merge(i,e.tooltipsterMenu),n.tooltipster(i)}}}),angular.module("SER.tooltipster").directive("tooltipsterHtml",function(){return{restrict:"A",scope:{tooltipsterHtml:"="},link:function(e,n,t){var i={content:n.find(".tooltip-content"),delay:0,trigger:"hover",theme:"tooltipster-borderless",position:"top",positionTracker:!0,functionReady:function(e,t){$(t.tooltip).on("click",function(){n.tooltipster("hide")})}};angular.merge(i,e.tooltipsterHtml),n.tooltipster(i)}}}),angular.module("SER.match",[]).directive("match",["$parse",function(o){return{require:"?ngModel",restrict:"A",link:function(a,e,t,n){if(n&&t.match){var i=o(t.match),s=o(t.matchCaseless),l=o(t.notMatch),u=o(t.matchIgnoreEmpty);a.$watch(c,function(){n.$$parseAndValidate()}),n.$validators.match=function(e,t){var n,i=e||t,o=c(),r=l(a);return!(!u(a)||t)||(n=s(a)?angular.lowercase(i)===angular.lowercase(o):i===o,!!(n^=r))}}function c(){var e=i(a);return angular.isObject(e)&&e.hasOwnProperty("$viewValue")&&(e=e.$viewValue),e}}}}]),angular.module("SER.barcode",[]),angular.module("SER.barcode").directive("barcode",function(){return{restrict:"EA",scope:{model:"=",options:"="},link:function(e,t,n){var i={format:"CODE128",lineColor:"#000000",width:3,height:110,displayValue:!0};angular.merge(i,e.options),e.$watch("model",function(e){JsBarcode(t[0],e,i)})}}}),angular.module("SER.diff",[]),angular.module("SER.diff").factory("ObjectDiff",["$sce",function(e){return{diff:h,getPatchChanges:function(e,t,n,i){var o=angular.fromJson(angular.toJson(t)),r=h(angular.fromJson(angular.toJson(e)),o,n,i),a=[];"equal"!==r.changed&&angular.forEach(r.value,function(e,t){"equal"!==e.changed&&a.push({op:"replace",path:"/"+t,value:o[t]})});return a}};function h(e,t,n,i){if(e===t)return p(e);var o,r,a,s,l={},u=!0;for(var c in e)if(!i&&c in t||i&&void 0!==t&&t.hasOwnProperty(c))if(e[c]===t[c])l[c]=p(e[c]);else if(n||(o=e[c],r=t[c],void 0,a=typeof o,s=typeof r,!o||!r||"object"!=a&&"function"!=a||"object"!=s&&"function"!=s))u=!1,l[c]={changed:"primitive change",removed:e[c],added:t[c]};else{var d=h(e[c],t[c],n,i);"equal"==d.changed?l[c]=p(e[c]):(u=!1,l[c]=d)}else u=!1,l[c]={changed:"removed",value:e[c]};for(c in t)(i||c in e)&&(!i||void 0===e||e.hasOwnProperty(c))||(u=!1,l[c]={changed:"added",value:t[c]});return u?p(e):{changed:"object change",value:l}}function p(e){return{changed:"equal",value:e}}}]),angular.module("SER.map",[]),angular.module("SER.map").service("mapFunctions",[function(){return{getCurrentPosition:function(){var t=$q.defer(),e=t.promise;return $window.navigator&&$window.navigator.geolocation?$window.navigator.geolocation.getCurrentPosition(function(e){t.resolve({Latitude:e.coords.latitude,Longitude:e.coords.longitude,accuracy:e.coords.accuracy})},function(){t.reject()}):t.reject(),e},checkLatLog:function(e,t){return-90<=e&&e<=90&&-180<=t&&t<=180},middlePoint:function(e){var t={From:{Lat:0,longitude:0},To:{Lat:0,longitude:0}};if(angular.merge(t,e),t.From.longitude==t.To.Longitude&&t.From.Latitude==t.To.Latitude)return!1;var n=t.From.Latitude*Math.PI/180,i=t.To.Latitude*Math.PI/180,o=t.From.Longitude*Math.PI/180,r=t.To.Longitude*Math.PI/180-o,a=Math.cos(i)*Math.cos(r),s=Math.cos(i)*Math.sin(r),l=Math.atan2(Math.sin(n)+Math.sin(i),Math.sqrt((Math.cos(n)+a)*(Math.cos(n)+a)+s*s)),u=o+Math.atan2(s,Math.cos(n)+a);l*=180/Math.PI,u*=180/Math.PI;var c=t.To.Longitude-t.From.Longitude,d=t.To.Latitude-t.From.Latitude;return{longitude:u,Latitude:l,angle:180*Math.atan2(c,d)/Math.PI,distance:this.distancePoints(t.From.Longitude,t.From.Latitude,t.To.Longitude,t.To.Latitude)}},distancePoints:function(e,t,n,i){var o=Math.sin((i-t)*Math.PI/180/2)*Math.sin((i-t)*Math.PI/180/2)+Math.cos(t*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin((n-e)*Math.PI/180/2)*Math.sin((n-e)*Math.PI/180/2);return 1.60934*(6371*(2*Math.asin(Math.sqrt(o))))},cutPrecision:function(e,t){if("number"==typeof e[0])for(var n=0;n<e.length;n++)e[n]=Math.round(e[n]*t)/t;else{var i=e.features||e.geometries||e.coordinates||e;for(n=0;n<i.length;n++)this.cutPrecision(i[n],t)}},processPoints:function(e,t,n){e instanceof google.maps.LatLng?t.call(n,e):e instanceof google.maps.Data.Point?t.call(n,e.get()):e.getArray().forEach(function(e){this.processPoints(e,t,n)})},generateGeoJSONCircle:function(e,t,n){for(var i=[],o=360/n,r=0;r<n;r++){var a=google.maps.geometry.spherical.computeOffset(e,t,o*r);i.push([a.lng(),a.lat()])}return i.push(i[0]),{type:"Polygon",coordinates:[i]}},getLatLngLiteralArray:function(e){for(var t=[],n=0;n<e.length;n++)t.push({lat:e[n][1],lng:e[n][0]});return t}}}]),angular.module("SER.sentry",[]),angular.module("SER.sentry").factory("$exceptionHandler",["$window","$log",function(e,n){return e.Raven&&RAVEN_CONFIG_DSN?(console.log("Using the RavenJS exception handler."),Raven.config(RAVEN_CONFIG_DSN).install(),function(e,t){Raven.captureException(e),RAVEN_SHOW_DIALOG&&Raven.showReportDialog()}):(console.log("Using the default logging exception handler."),function(e,t){n.error.apply(n,arguments)})}]),angular.module("SER",["SER.i18n","SER.auth","SER.selector","SER.match","SER.image","SER.search","SER.tooltipster","SER.datepicker","SER.chip","SER.loader","SER.filters","SER.barcode","SER.diff","SER.fullscreen","SER.Clipboard","SER.sentry"]),function(t){var e=new Image;e.onload=function(){var e=["font-size: 1px;","line-height: "+this.height+"px;","padding: "+.5*this.height+"px "+.5*this.width+"px;","background-size: "+this.width+"px "+this.height+"px;","background: url("+t+");"].join(" ");console.log(""),console.log(""),console.log("%c",e),console.log("https://www.sersoluciones.com"),console.log(""),console.log("")},e.src=t}("https://s3.amazonaws.com/ser-ui/images/powered.jpg"),angular.module("SER").config(["$urlRouterProvider","$urlMatcherFactoryProvider","$compileProvider","$resourceProvider","$httpProvider",function(e,t,n,i,o){o.defaults.paramSerialize="$httpParamSerializerJQLike",i.defaults.stripTrailingSlashes=!0,n.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|skype|tel|chrome-extension):/),e.rule(function(e,t){var n=t.path();if("/"===n[n.length-1])return n.substr(0,n.length-1)});var r=/^[a-f\d]{8}-([a-f\d]{4}-){3}[a-f\d]{12}$/i;t.type("guid",{encode:angular.identity,decode:angular.identity,is:function(e){return r.test(e)}})}]),angular.module("SER").run(["$rootScope","$sce",function(e,t){e.backHistory=function(){$window.history.back()},e.__=__,e.bodyHeight=function(){return angular.element("body").height()},e.browserWidth=browserWidth,e.trustAsHtml=function(e){return t.trustAsHtml(e)}}]);
//# sourceMappingURL=ser-ui.min.js.map
