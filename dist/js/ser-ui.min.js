!function(d){var l=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,u={},o="",n=function(){var e=c.apply(this);""==e&&(this.get(0)==d(document).get(0)?e=document.location.href:this.is("[href]")?e=this.attr("href"):this.is("[src]")&&(e=this.attr("src")),""!=e&&(e=g(e),this.data("href",e)))},t=function(e,t){0!=this.is("["+e+"]")&&(null==this.data("original-"+e)&&this.data("original-"+e,this.attr(e)),this.attr(e,t))},e=function(e){null!=this.data("original-"+e)&&(this.attr(e,this.data("original-"+e)),this.removeData("original-"+e))},i=function(){this.removeData("href"),e.apply(this,["href"]),e.apply(this,["src"]),this.removeData("jurlp-no-watch"),this.removeData("is-watched"),T.unwatch.apply(this)},c=function(){return this.href||this.data("href")||this.attr("href")||this.attr("src")||""},a=function(e,t){h.apply(this,[f(c.apply(this),e,t)])},r=function(e){a.apply(this,[e[0],e[1]])},h=function(e){"object"==typeof e&&(e=p(e)),e=g(e),null==this.href?this.get(0)==d(document).get(0)?this.data("href",e):(t.apply(this,["href",e]),t.apply(this,["src",e])):this.href=e},s=function(t){if(null==t)return{scheme:"",user:"",password:"",host:"",port:"",path:"",query:"",fragment:""};var n={user:"",password:""};if("//"==t.substring(0,2)&&(t="http:"+t),""!=t&&-1==t.indexOf("://")&&(t="http://"+t),-1!=t.indexOf("@")){var e=t.match(l);e[4]&&(n.user=e[4]),e[5]&&(n.password=e[5])}var o=document.createElement("a");o.href=t;try{o.protocol}catch(e){if(-2146697202==e.number){var i="";""!=n.user&&(i+=n.user,""!=n.password&&(i+=":"+n.password),i+="@",o.href=t.replace(i,""))}}var a=o.protocol;-1==o.protocol.indexOf("//")&&(a+="//");var r=o.pathname;"/"!=r[0]&&(r="/"+r);var s=o.port+"";return("21"==s&&-1==t.indexOf(":21")||"80"==s&&-1==t.indexOf(":80")||"443"==s&&-1==t.indexOf(":443")||"0"==s)&&(s=""),{scheme:a,user:n.user,password:n.password,host:o.hostname,port:s,path:r,query:o.search,fragment:o.hash}},p=function(e){var t=e.scheme;return null!=e.user&&""!=e.user&&(t+=e.user,null!=e.password&&""!=e.password&&(t+=":"+e.password),t+="@"),t+e.host+(""!=e.port?":"+e.port:"")+e.path+e.query+e.fragment},g=function(e){return _.parse(e).toString()},f=function(e,t,n){var o=_.parse(e);return o[t]=n,p(o)},m=function(e){return"string"==typeof e?_.parse(e):e},w=function(e){var t={},n=z(c.apply(this));t="string"==typeof e?("?"==e[0]&&(n={},e=e.substring(1)),v(e)):e,0==d.isEmptyObject(t)?t=d.extend(n,t):n={},a.apply(this,["query",y.apply(t)])},v=function(e){var t={};if(""!=e)for(var n=e.split("&"),o=0;o<n.length;o++){var i=n[o].split("=");t[i[0]]=i[1]}return t},z=function(e){return v("?"==(t=m(e).query)[0]?t.slice(1):t);var t},y=function(){var e="";for(var t in this)"toString"!=t&&null!=this[t]&&(e+="&"+t+"="+this[t]);return"&"==e[0]&&(e="?"+e.slice(1)),e},b=function(e){var t,n="/"==(t=m(e).path)[0]?t.slice(1):t;return""!=n?n.split("/"):[]},S=function(e){var t=m(c.apply(this)).path.split("/"),n=e.split("/"),o=0;""==n[0]&&(t=[],o++),t.splice(0,1);for(var i=n.length;o<i;o++)".."==n[o]?0<t.length&&t.splice(t.length-1,1):"."==n[o]||t.push(n[o]);a.apply(this,["path",k.apply(t)])},k=function(){return 0<this.length?"/"+this.join("/"):"/"},x=function(e,t,n){1!=e.data("is-watched")&&u[o]&&u[o].push([t,n])},D=function(e,t){return null!=this.href?(e.apply(this,[t]),this):(x(this,e,[t]),this.each(function(){e.apply(d(this),[t])}))},C=function(e,t){if(null!=this.href)return e.apply(this,[t]);var n=[];return this.each(function(){n.push(e.apply(d(this),[t]))}),n},W=function(e,t,n){return 0==n.length?e.apply(this):t.apply(this,n)},_={toString:{http:function(){return p(this)},mailto:function(){return this.password="",this.path="",this.port="",p(this)},javascript:function(){return"javascript:"+this.javascript},generic:function(){return this.scheme+this.url}},parsers:{http:function(e){return d.extend(s(e),{toString:_.toString.http})},mailto:function(e){return d.extend(s(e.substring(7)),{scheme:"mailto:",toString:_.toString.mailto})},javascript:function(e){return d.extend(s(document.location.href),{javascript:e.substring(11),toString:_.toString.javascript})},generic:function(e,t){return"//"==t.substring(0,2)?d.extend(s(t.substring(2)),{scheme:e+"://",toString:_.toString.http}):{scheme:e+":",url:t,toString:_.toString.generic}}},parse:function(e){if("string"!=typeof e)return e;var t=e.indexOf(":");if(-1==t)return this.parsers.http(e);var n=e.substring(0,t).toLowerCase();return null!=this.parsers[n]?this.parsers[n](e):this.parsers.generic(n,e.substring(t+1))}},I={getUrl:function(){return C.apply(this,[c,null])},setUrl:function(e){h.apply(this,[e])},parseUrl:function(){return C.apply(this,[function(){return _.parse(c.apply(this))},null])},getFragment:function(){return C.apply(this,[function(){return e=c.apply(this),m(e).fragment;var e},null])},setFragment:function(e){return"#"!=e[0]&&(e="#"+e),D.apply(this,[r,["fragment",e]])},getQuery:function(){return C.apply(this,[function(){return d.extend(z(c.apply(this)),{toString:y})},null])},setQuery:function(e){return D.apply(this,[w,e])},getPath:function(){return C.apply(this,[function(){return d.extend(b(c.apply(this)),{toString:k})},null])},setPath:function(e){return D.apply(this,[S,e])},getPort:function(){return C.apply(this,[function(){return e=c.apply(this),m(e).port;var e},null])},setPort:function(e){return D.apply(this,[r,["port",e]])},getHost:function(){return C.apply(this,[function(){return e=c.apply(this),m(e).host;var e},null])},setHost:function(e){return D.apply(this,[r,["host",e]])},getPassword:function(){return C.apply(this,[function(){return e=c.apply(this),m(e).password;var e},null])},setPassword:function(e){return D.apply(this,[r,["password",e]])},getUser:function(){return C.apply(this,[function(){return e=c.apply(this),m(e).user;var e},null])},setUser:function(e){return D.apply(this,[r,["user",e]])},getScheme:function(){return C.apply(this,[function(){return e=c.apply(this),m(e).scheme;var e},null])},setScheme:function(e){return D.apply(this,[r,["scheme",e]])},filters:{"=":function(e,t){return e==t},"!=":function(e,t){return e!=t},"<":function(e,t){return e<t},">":function(e,t){return t<e},"<=":function(e,t){return e<=t},">=":function(e,t){return t<=e},"*=":function(e,t){return-1!=e.indexOf(t)},"^=":function(e,t){return e.length>=t.length&&e.substring(0,t.length)==t},"$=":function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)==t},regex:function(e,t){return e.match(t)}}},T={url:function(e){return W.apply(this,[I.parseUrl,I.setUrl,arguments])},fragment:function(e){return W.apply(this,[I.getFragment,I.setFragment,arguments])},query:function(e){return W.apply(this,[I.getQuery,I.setQuery,arguments])},path:function(e){return W.apply(this,[I.getPath,I.setPath,arguments])},port:function(e){return W.apply(this,[I.getPort,I.setPort,arguments])},host:function(e){return W.apply(this,[I.getHost,I.setHost,arguments])},password:function(e){return W.apply(this,[I.getPassword,I.setPassword,arguments])},user:function(e){return W.apply(this,[I.getUser,I.setUser,arguments])},scheme:function(e){return W.apply(this,[I.getScheme,I.setScheme,arguments])},initialise:function(){var e,t=this;return e=function(){if(this.get(0)!=d(document).get(0)&&null==this.attr("href")&&null==this.attr("src")&&null!=this.html()&&0==this.hasClass("jurlp-span")){for(var e=[],t=!1,n="",o=/((((mailto|spotify|skype)\:([a-zA-Z0-9\.\-\:@\?\=\%]*))|((ftp|git|irc|ircs|irc6|pop|rss|ssh|svn|udp|feed|imap|ldap|nntp|rtmp|sftp|snmp|xmpp|http|https|telnet|ventrilo|webcal|view\-source)\:[\/]{2})?(([a-zA-Z0-9\.\-]+)\:([a-zA-Z0-9\.&;%\$\-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|localhost|([a-zA-Z0-9\-]+\.)*[a-zA-Z0-9\-]+\.(aero|arpa|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|[a-zA-Z]{2}))(\:[0-9]+)*(\/($|[a-zA-Z0-9\.\,\?\'\\\+&;%\$\=~_\-]+)?(#\w*)?)*))/i,i=this.html();n=o.exec(i);)i=i.replace(n[0],"$"+e.length),e.push(n[0]),t=!0;for(var a=0;a<e.length;a++){var r=i.indexOf("$"+a),s=i.substring(r-6,r-1);i="href="==s||" src="==s||">"==i.substring(r-1,r)?i.replace("$"+a,e[a]):i.replace("$"+a,'<a href="[url]" class="jurlp-no-watch">[url]</a>'.replace(/\[url\]/g,e[a]))}if(0!=t)return this.addClass("jurlp-span"),this.html(i),this.find("a[href]").each(function(){var e=c.apply(d(this));h.apply(d(this),[e])})}return null}.apply(d(this)),D.apply(null!=e?this.filter(function(){return d(this).get(0)!=d(t).get(0)}).add(e):t,[n])},restore:function(){return D.apply(this,[i])},goto:function(){document.location.href=c.apply(this)},proxy:function(e,t){var n=c.apply(this),o={};h.apply(this,[p(m(e))]),o[t]=n,I.setQuery.apply(this,[o])},watch:function(s){var l=this.selector;return null==u[o]&&(u[o]=[],d(document).bind("DOMNodeInserted",function e(t){if(null!=u[l]){var n=d(t.target).filter(l);if(null==n.get(0)&&(n=d(t.target).find(l)),0<n.length&&0==n.is(".jurlp-no-watch")){var o=!1;n.data("is-watched",!0);for(var i=0,a=u[l].length;i<a;i++){var r=u[l][i][0].apply(n,u[l][i][1]);if(null!=r&&0==r.length){o=!0;break}}0==o&&"function"==typeof s&&n.each(function(){s(d(this),l)})}}else d(document).unbind("DOMNodeInserted",e)})),this},unwatch:function(){u[this.selector]=null},filter:function(n,o,i){var e=_.parse(c.apply(this));return"=="==o&&(o="="),"url"!=n&&null==e[n]||null==I.filters[o]?this:(x(this,T.filter,[n,o,i]),this.filter(function(){var e=c.apply(d(this)),t="";return t="url"!=n?_.parse(e)[n]:e,"port"==n&&(t=parseInt(t,10),i=parseInt(i,10)),I.filters[o].apply(d(this),[t,i])}))},interface:function(){return T}};d.fn.jurlp=function(e){return-1==this.selector.indexOf(".filter")&&(o=this.selector),D.apply(this,[n]),function(e){return null!=T[e]?T[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"==typeof e||null==e?T.initialise.apply(this,Array.prototype.slice.call(arguments,1)):this}.apply(this,arguments)},d.jurlp=function(e){return{href:e||document.location.href,url:T.url,scheme:T.scheme,user:T.user,password:T.password,host:T.host,port:T.port,path:T.path,query:T.query,fragment:T.fragment,proxy:T.proxy,goto:T.goto,watch:function(e){var t=this.host();return d('[href*="'+t+'"],[src*="'+t+'"]').jurlp("watch",e)},unwatch:function(){var e=this.host();return d('[href*="'+e+'"],[src*="'+e+'"]').jurlp("unwatch")}}}}(jQuery),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(l,e,t,n){var o={init:function(e,t){var n=this;n.elem=t,n.$elem=l(t),n.options=l.extend({},l.fn.elevateZoom.options,e),n.options.imageSrc?n.imageSrc=n.options.imageSrc:n.$elem.data("zoom-image")?n.imageSrc=n.$elem.data("zoom-image"):n.imageSrc=n.$elem.attr("src"),n.options.tint&&(n.options.lensColour="none",n.options.lensOpacity="1"),"inner"==n.options.zoomType&&(n.options.showLens=!1),n.$elem.parent().removeAttr("title").removeAttr("alt"),n.zoomImage=n.imageSrc,n.refresh(1),l("#"+n.options.gallery+" a").click(function(e){return n.options.galleryActiveClass&&(l("#"+n.options.gallery+" a").removeClass(n.options.galleryActiveClass),l(this).addClass(n.options.galleryActiveClass)),e.preventDefault(),l(this).data("zoom-image")?n.zoomImagePre=l(this).data("zoom-image"):n.zoomImagePre=l(this).data("image"),n.swaptheimage(l(this).data("image"),n.zoomImagePre),!1})},refresh:function(e){var t=this;setTimeout(function(){t.fetch(t.imageSrc)},e||t.options.refresh)},fetch:function(e){var t=this,n=new Image;n.onload=function(){t.largeWidth=n.width,t.largeHeight=n.height,t.startZoom(),t.currentImage=t.imageSrc,t.options.onZoomedImageLoaded(t.$elem)},n.src=e},startZoom:function(){var n=this;if(n.nzWidth=n.$elem.width(),n.nzHeight=n.$elem.height(),n.isWindowActive=!1,n.isLensActive=!1,n.isTintActive=!1,n.overWindow=!1,n.options.imageCrossfade&&(n.zoomWrap=n.$elem.wrap('<div style="height:'+n.nzHeight+"px;width:"+n.nzWidth+'px;" class="zoomWrapper" />'),n.$elem.css("position","absolute")),n.zoomLock=1,n.scrollingLock=!1,n.changeBgSize=!1,n.currentZoomLevel=n.options.zoomLevel,n.nzOffset=n.$elem.offset(),n.widthRatio=n.largeWidth/n.currentZoomLevel/n.nzWidth,n.heightRatio=n.largeHeight/n.currentZoomLevel/n.nzHeight,"window"==n.options.zoomType&&(n.zoomWindowStyle="overflow: hidden;background-position: 0px 0px;text-align:center;background-color: "+String(n.options.zoomWindowBgColour)+";width: "+String(n.options.zoomWindowWidth)+"px;height: "+String(n.options.zoomWindowHeight)+"px;float: left;background-size: "+n.largeWidth/n.currentZoomLevel+"px "+n.largeHeight/n.currentZoomLevel+"px;display: none;z-index:100;border: "+String(n.options.borderSize)+"px solid "+n.options.borderColour+";background-repeat: no-repeat;position: absolute;"),"inner"==n.options.zoomType){var e=n.$elem.css("border-left-width");n.zoomWindowStyle="overflow: hidden;margin-left: "+String(e)+";margin-top: "+String(e)+";background-position: 0px 0px;width: "+String(n.nzWidth)+"px;height: "+String(n.nzHeight)+"px;px;float: left;display: none;cursor:"+n.options.cursor+";px solid "+n.options.borderColour+";background-repeat: no-repeat;position: absolute;"}"window"==n.options.zoomType&&(n.nzHeight<n.options.zoomWindowWidth/n.widthRatio?lensHeight=n.nzHeight:lensHeight=String(n.options.zoomWindowHeight/n.heightRatio),n.largeWidth<n.options.zoomWindowWidth?lensWidth=n.nzWidth:lensWidth=n.options.zoomWindowWidth/n.widthRatio,n.lensStyle="background-position: 0px 0px;width: "+String(n.options.zoomWindowWidth/n.widthRatio)+"px;height: "+String(n.options.zoomWindowHeight/n.heightRatio)+"px;float: right;display: none;overflow: hidden;z-index: 999;-webkit-transform: translateZ(0);opacity:"+n.options.lensOpacity+";filter: alpha(opacity = "+100*n.options.lensOpacity+"); zoom:1;width:"+lensWidth+"px;height:"+lensHeight+"px;background-color:"+n.options.lensColour+";cursor:"+n.options.cursor+";border: "+n.options.lensBorderSize+"px solid "+n.options.lensBorderColour+";background-repeat: no-repeat;position: absolute;"),n.tintStyle="display: block;position: absolute;background-color: "+n.options.tintColour+";filter:alpha(opacity=0);opacity: 0;width: "+n.nzWidth+"px;height: "+n.nzHeight+"px;",n.lensRound="","lens"==n.options.zoomType&&(n.lensStyle="background-position: 0px 0px;float: left;display: none;border: "+String(n.options.borderSize)+"px solid "+n.options.borderColour+";width:"+String(n.options.lensSize)+"px;height:"+String(n.options.lensSize)+"px;background-repeat: no-repeat;position: absolute;"),"round"==n.options.lensShape&&(n.lensRound="border-top-left-radius: "+String(n.options.lensSize/2+n.options.borderSize)+"px;border-top-right-radius: "+String(n.options.lensSize/2+n.options.borderSize)+"px;border-bottom-left-radius: "+String(n.options.lensSize/2+n.options.borderSize)+"px;border-bottom-right-radius: "+String(n.options.lensSize/2+n.options.borderSize)+"px;"),n.zoomContainer=l('<div class="zoomContainer" style="-webkit-transform: translateZ(0);position:fixed;left:'+n.nzOffset.left+"px;top:"+n.nzOffset.top+"px;height:"+n.nzHeight+"px;width:"+n.nzWidth+'px;"></div>'),n.$elem.after(n.zoomContainer),n.options.containLensZoom&&"lens"==n.options.zoomType&&n.zoomContainer.css("overflow","hidden"),"inner"!=n.options.zoomType&&(n.zoomLens=l("<div class='zoomLens' style='"+n.lensStyle+n.lensRound+"'>&nbsp;</div>").appendTo(n.zoomContainer).click(function(){n.$elem.trigger("click")}),n.options.tint&&(n.tintContainer=l("<div/>").addClass("tintContainer"),n.zoomTint=l("<div class='zoomTint' style='"+n.tintStyle+"'></div>"),n.zoomLens.wrap(n.tintContainer),n.zoomTintcss=n.zoomLens.after(n.zoomTint),n.zoomTintImage=l('<img style="position: absolute; left: 0px; top: 0px; max-width: none; width: '+n.nzWidth+"px; height: "+n.nzHeight+'px;" src="'+n.imageSrc+'">').appendTo(n.zoomLens).click(function(){n.$elem.trigger("click")}))),isNaN(n.options.zoomWindowPosition)?n.zoomWindow=l("<div style='z-index:999;left:"+n.windowOffsetLeft+"px;top:"+n.windowOffsetTop+"px;"+n.zoomWindowStyle+"' class='zoomWindow'>&nbsp;</div>").appendTo("body").click(function(){n.$elem.trigger("click")}):n.zoomWindow=l("<div style='z-index:999;left:"+n.windowOffsetLeft+"px;top:"+n.windowOffsetTop+"px;"+n.zoomWindowStyle+"' class='zoomWindow'>&nbsp;</div>").appendTo(n.zoomContainer).click(function(){n.$elem.trigger("click")}),n.zoomWindowContainer=l("<div/>").addClass("zoomWindowContainer").css("width",n.options.zoomWindowWidth),n.zoomWindow.wrap(n.zoomWindowContainer),"lens"==n.options.zoomType&&n.zoomLens.css({backgroundImage:"url('"+n.imageSrc+"')"}),"window"==n.options.zoomType&&n.zoomWindow.css({backgroundImage:"url('"+n.imageSrc+"')"}),"inner"==n.options.zoomType&&n.zoomWindow.css({backgroundImage:"url('"+n.imageSrc+"')"}),n.$elem.bind("touchmove",function(e){e.preventDefault();var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];n.setPosition(t)}),n.zoomContainer.bind("touchmove",function(e){"inner"==n.options.zoomType&&n.showHideWindow("show"),e.preventDefault();var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];n.setPosition(t)}),n.zoomContainer.bind("touchend",function(e){n.showHideWindow("hide"),n.options.showLens&&n.showHideLens("hide"),n.options.tint&&"inner"!=n.options.zoomType&&n.showHideTint("hide")}),n.$elem.bind("touchend",function(e){n.showHideWindow("hide"),n.options.showLens&&n.showHideLens("hide"),n.options.tint&&"inner"!=n.options.zoomType&&n.showHideTint("hide")}),n.options.showLens&&(n.zoomLens.bind("touchmove",function(e){e.preventDefault();var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];n.setPosition(t)}),n.zoomLens.bind("touchend",function(e){n.showHideWindow("hide"),n.options.showLens&&n.showHideLens("hide"),n.options.tint&&"inner"!=n.options.zoomType&&n.showHideTint("hide")})),n.$elem.bind("mousemove",function(e){0==n.overWindow&&n.setElements("show"),n.lastX===e.clientX&&n.lastY===e.clientY||(n.setPosition(e),n.currentLoc=e),n.lastX=e.clientX,n.lastY=e.clientY}),n.zoomContainer.bind("mousemove",function(e){0==n.overWindow&&n.setElements("show"),n.lastX===e.clientX&&n.lastY===e.clientY||(n.setPosition(e),n.currentLoc=e),n.lastX=e.clientX,n.lastY=e.clientY}),"inner"!=n.options.zoomType&&n.zoomLens.bind("mousemove",function(e){n.lastX===e.clientX&&n.lastY===e.clientY||(n.setPosition(e),n.currentLoc=e),n.lastX=e.clientX,n.lastY=e.clientY}),n.options.tint&&"inner"!=n.options.zoomType&&n.zoomTint.bind("mousemove",function(e){n.lastX===e.clientX&&n.lastY===e.clientY||(n.setPosition(e),n.currentLoc=e),n.lastX=e.clientX,n.lastY=e.clientY}),"inner"==n.options.zoomType&&n.zoomWindow.bind("mousemove",function(e){n.lastX===e.clientX&&n.lastY===e.clientY||(n.setPosition(e),n.currentLoc=e),n.lastX=e.clientX,n.lastY=e.clientY}),n.zoomContainer.add(n.$elem).mouseenter(function(){0==n.overWindow&&n.setElements("show")}).mouseleave(function(){n.scrollLock||(n.setElements("hide"),n.options.onDestroy(n.$elem))}),"inner"!=n.options.zoomType&&n.zoomWindow.mouseenter(function(){n.overWindow=!0,n.setElements("hide")}).mouseleave(function(){n.overWindow=!1}),n.options.zoomLevel,n.options.minZoomLevel?n.minZoomLevel=n.options.minZoomLevel:n.minZoomLevel=2*n.options.scrollZoomIncrement,n.options.scrollZoom&&n.zoomContainer.add(n.$elem).bind("mousewheel DOMMouseScroll MozMousePixelScroll",function(e){n.scrollLock=!0,clearTimeout(l.data(this,"timer")),l.data(this,"timer",setTimeout(function(){n.scrollLock=!1},250));var t=e.originalEvent.wheelDelta||-1*e.originalEvent.detail;return e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),0<t/120?n.currentZoomLevel>=n.minZoomLevel&&n.changeZoomLevel(n.currentZoomLevel-n.options.scrollZoomIncrement):n.options.maxZoomLevel?n.currentZoomLevel<=n.options.maxZoomLevel&&n.changeZoomLevel(parseFloat(n.currentZoomLevel)+n.options.scrollZoomIncrement):n.changeZoomLevel(parseFloat(n.currentZoomLevel)+n.options.scrollZoomIncrement),!1})},setElements:function(e){var t=this;if(!t.options.zoomEnabled)return!1;"show"==e&&t.isWindowSet&&("inner"==t.options.zoomType&&t.showHideWindow("show"),"window"==t.options.zoomType&&t.showHideWindow("show"),t.options.showLens&&t.showHideLens("show"),t.options.tint&&"inner"!=t.options.zoomType&&t.showHideTint("show")),"hide"==e&&("window"==t.options.zoomType&&t.showHideWindow("hide"),t.options.tint||t.showHideWindow("hide"),t.options.showLens&&t.showHideLens("hide"),t.options.tint&&t.showHideTint("hide"))},setPosition:function(e){var t=this;if(!t.options.zoomEnabled)return!1;t.nzHeight=t.$elem.height(),t.nzWidth=t.$elem.width(),t.nzOffset=t.$elem.offset(),t.options.tint&&"inner"!=t.options.zoomType&&(t.zoomTint.css({top:0}),t.zoomTint.css({left:0})),t.options.responsive&&!t.options.scrollZoom&&t.options.showLens&&(t.nzHeight<t.options.zoomWindowWidth/t.widthRatio?lensHeight=t.nzHeight:lensHeight=String(t.options.zoomWindowHeight/t.heightRatio),t.largeWidth<t.options.zoomWindowWidth?lensWidth=t.nzWidth:lensWidth=t.options.zoomWindowWidth/t.widthRatio,t.widthRatio=t.largeWidth/t.nzWidth,t.heightRatio=t.largeHeight/t.nzHeight,"lens"!=t.options.zoomType&&(t.nzHeight<t.options.zoomWindowWidth/t.widthRatio?lensHeight=t.nzHeight:lensHeight=String(t.options.zoomWindowHeight/t.heightRatio),t.nzWidth<t.options.zoomWindowHeight/t.heightRatio?lensWidth=t.nzWidth:lensWidth=String(t.options.zoomWindowWidth/t.widthRatio),t.zoomLens.css("width",lensWidth),t.zoomLens.css("height",lensHeight),t.options.tint&&(t.zoomTintImage.css("width",t.nzWidth),t.zoomTintImage.css("height",t.nzHeight))),"lens"==t.options.zoomType&&t.zoomLens.css({width:String(t.options.lensSize)+"px",height:String(t.options.lensSize)+"px"})),t.zoomContainer.css({top:t.nzOffset.top}),t.zoomContainer.css({left:t.nzOffset.left}),t.mouseLeft=parseInt(e.pageX-t.nzOffset.left),t.mouseTop=parseInt(e.pageY-t.nzOffset.top),"window"==t.options.zoomType&&(t.Etoppos=t.mouseTop<t.zoomLens.height()/2,t.Eboppos=t.mouseTop>t.nzHeight-t.zoomLens.height()/2-2*t.options.lensBorderSize,t.Eloppos=t.mouseLeft<0+t.zoomLens.width()/2,t.Eroppos=t.mouseLeft>t.nzWidth-t.zoomLens.width()/2-2*t.options.lensBorderSize),"inner"==t.options.zoomType&&(t.Etoppos=t.mouseTop<t.nzHeight/2/t.heightRatio,t.Eboppos=t.mouseTop>t.nzHeight-t.nzHeight/2/t.heightRatio,t.Eloppos=t.mouseLeft<0+t.nzWidth/2/t.widthRatio,t.Eroppos=t.mouseLeft>t.nzWidth-t.nzWidth/2/t.widthRatio-2*t.options.lensBorderSize),t.mouseLeft<0||t.mouseTop<0||t.mouseLeft>t.nzWidth||t.mouseTop>t.nzHeight?t.setElements("hide"):(t.options.showLens&&(t.lensLeftPos=String(Math.floor(t.mouseLeft-t.zoomLens.width()/2)),t.lensTopPos=String(Math.floor(t.mouseTop-t.zoomLens.height()/2))),t.Etoppos&&(t.lensTopPos=0),t.Eloppos&&(t.windowLeftPos=0,t.lensLeftPos=0,t.tintpos=0),"window"==t.options.zoomType&&(t.Eboppos&&(t.lensTopPos=Math.max(t.nzHeight-t.zoomLens.height()-2*t.options.lensBorderSize,0)),t.Eroppos&&(t.lensLeftPos=t.nzWidth-t.zoomLens.width()-2*t.options.lensBorderSize)),"inner"==t.options.zoomType&&(t.Eboppos&&(t.lensTopPos=Math.max(t.nzHeight-2*t.options.lensBorderSize,0)),t.Eroppos&&(t.lensLeftPos=t.nzWidth-t.nzWidth-2*t.options.lensBorderSize)),"lens"==t.options.zoomType&&(t.windowLeftPos=String(-1*((e.pageX-t.nzOffset.left)*t.widthRatio-t.zoomLens.width()/2)),t.windowTopPos=String(-1*((e.pageY-t.nzOffset.top)*t.heightRatio-t.zoomLens.height()/2)),t.zoomLens.css({backgroundPosition:t.windowLeftPos+"px "+t.windowTopPos+"px"}),t.changeBgSize&&(t.nzHeight>t.nzWidth?("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})):("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"})),t.changeBgSize=!1),t.setWindowPostition(e)),t.options.tint&&"inner"!=t.options.zoomType&&t.setTintPosition(e),"window"==t.options.zoomType&&t.setWindowPostition(e),"inner"==t.options.zoomType&&t.setWindowPostition(e),t.options.showLens&&(t.fullwidth&&"lens"!=t.options.zoomType&&(t.lensLeftPos=0),t.zoomLens.css({left:t.lensLeftPos+"px",top:t.lensTopPos+"px"})))},showHideWindow:function(e){var t=this;"show"==e&&(t.isWindowActive||(t.options.zoomWindowFadeIn?t.zoomWindow.stop(!0,!0,!1).fadeIn(t.options.zoomWindowFadeIn):t.zoomWindow.show(),t.isWindowActive=!0)),"hide"==e&&t.isWindowActive&&(t.options.zoomWindowFadeOut?t.zoomWindow.stop(!0,!0).fadeOut(t.options.zoomWindowFadeOut,function(){t.loop&&(clearInterval(t.loop),t.loop=!1)}):t.zoomWindow.hide(),t.isWindowActive=!1)},showHideLens:function(e){var t=this;"show"==e&&(t.isLensActive||(t.options.lensFadeIn?t.zoomLens.stop(!0,!0,!1).fadeIn(t.options.lensFadeIn):t.zoomLens.show(),t.isLensActive=!0)),"hide"==e&&t.isLensActive&&(t.options.lensFadeOut?t.zoomLens.stop(!0,!0).fadeOut(t.options.lensFadeOut):t.zoomLens.hide(),t.isLensActive=!1)},showHideTint:function(e){var t=this;"show"==e&&(t.isTintActive||(t.options.zoomTintFadeIn?t.zoomTint.css({opacity:t.options.tintOpacity}).animate().stop(!0,!0).fadeIn("slow"):(t.zoomTint.css({opacity:t.options.tintOpacity}).animate(),t.zoomTint.show()),t.isTintActive=!0)),"hide"==e&&t.isTintActive&&(t.options.zoomTintFadeOut?t.zoomTint.stop(!0,!0).fadeOut(t.options.zoomTintFadeOut):t.zoomTint.hide(),t.isTintActive=!1)},setLensPostition:function(e){},setWindowPostition:function(e){var t=this;if(isNaN(t.options.zoomWindowPosition))t.externalContainer=l("#"+t.options.zoomWindowPosition),t.externalContainerWidth=t.externalContainer.width(),t.externalContainerHeight=t.externalContainer.height(),t.externalContainerOffset=t.externalContainer.offset(),t.windowOffsetTop=t.externalContainerOffset.top,t.windowOffsetLeft=t.externalContainerOffset.left;else switch(t.options.zoomWindowPosition){case 1:t.windowOffsetTop=t.options.zoomWindowOffety,t.windowOffsetLeft=+t.nzWidth;break;case 2:t.options.zoomWindowHeight>t.nzHeight&&(t.windowOffsetTop=-1*(t.options.zoomWindowHeight/2-t.nzHeight/2),t.windowOffsetLeft=t.nzWidth);break;case 3:t.windowOffsetTop=t.nzHeight-t.zoomWindow.height()-2*t.options.borderSize,t.windowOffsetLeft=t.nzWidth;break;case 4:t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=t.nzWidth;break;case 5:t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=t.nzWidth-t.zoomWindow.width()-2*t.options.borderSize;break;case 6:t.options.zoomWindowHeight>t.nzHeight&&(t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=-1*(t.options.zoomWindowWidth/2-t.nzWidth/2+2*t.options.borderSize));break;case 7:t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=0;break;case 8:t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize);break;case 9:t.windowOffsetTop=t.nzHeight-t.zoomWindow.height()-2*t.options.borderSize,t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize);break;case 10:t.options.zoomWindowHeight>t.nzHeight&&(t.windowOffsetTop=-1*(t.options.zoomWindowHeight/2-t.nzHeight/2),t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize));break;case 11:t.windowOffsetTop=t.options.zoomWindowOffety,t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize);break;case 12:t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize);break;case 13:t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=0;break;case 14:t.options.zoomWindowHeight>t.nzHeight&&(t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=-1*(t.options.zoomWindowWidth/2-t.nzWidth/2+2*t.options.borderSize));break;case 15:t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=t.nzWidth-t.zoomWindow.width()-2*t.options.borderSize;break;case 16:t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=t.nzWidth;break;default:t.windowOffsetTop=t.options.zoomWindowOffety,t.windowOffsetLeft=t.nzWidth}t.isWindowSet=!0,t.windowOffsetTop=t.windowOffsetTop+t.options.zoomWindowOffety,t.windowOffsetLeft=t.windowOffsetLeft+t.options.zoomWindowOffetx,t.zoomWindow.css({top:t.windowOffsetTop}),t.zoomWindow.css({left:t.windowOffsetLeft}),"inner"==t.options.zoomType&&(t.zoomWindow.css({top:0}),t.zoomWindow.css({left:0})),t.windowLeftPos=String(-1*((e.pageX-t.nzOffset.left)*t.widthRatio-t.zoomWindow.width()/2)),t.windowTopPos=String(-1*((e.pageY-t.nzOffset.top)*t.heightRatio-t.zoomWindow.height()/2)),t.Etoppos&&(t.windowTopPos=0),t.Eloppos&&(t.windowLeftPos=0),t.Eboppos&&(t.windowTopPos=-1*(t.largeHeight/t.currentZoomLevel-t.zoomWindow.height())),t.Eroppos&&(t.windowLeftPos=-1*(t.largeWidth/t.currentZoomLevel-t.zoomWindow.width())),t.fullheight&&(t.windowTopPos=0),t.fullwidth&&(t.windowLeftPos=0),"window"!=t.options.zoomType&&"inner"!=t.options.zoomType||(1==t.zoomLock&&(t.widthRatio<=1&&(t.windowLeftPos=0),t.heightRatio<=1&&(t.windowTopPos=0)),"window"==t.options.zoomType&&(t.largeHeight<t.options.zoomWindowHeight&&(t.windowTopPos=0),t.largeWidth<t.options.zoomWindowWidth&&(t.windowLeftPos=0)),t.options.easing?(t.xp||(t.xp=0),t.yp||(t.yp=0),t.loop||(t.loop=setInterval(function(){t.xp+=(t.windowLeftPos-t.xp)/t.options.easingAmount,t.yp+=(t.windowTopPos-t.yp)/t.options.easingAmount,t.scrollingLock?(clearInterval(t.loop),t.xp=t.windowLeftPos,t.yp=t.windowTopPos,t.xp=-1*((e.pageX-t.nzOffset.left)*t.widthRatio-t.zoomWindow.width()/2),t.yp=-1*((e.pageY-t.nzOffset.top)*t.heightRatio-t.zoomWindow.height()/2),t.changeBgSize&&(t.nzHeight>t.nzWidth?("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})):("lens"!=t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"})),t.changeBgSize=!1),t.zoomWindow.css({backgroundPosition:t.windowLeftPos+"px "+t.windowTopPos+"px"}),t.scrollingLock=!1,t.loop=!1):Math.round(Math.abs(t.xp-t.windowLeftPos)+Math.abs(t.yp-t.windowTopPos))<1?(clearInterval(t.loop),t.zoomWindow.css({backgroundPosition:t.windowLeftPos+"px "+t.windowTopPos+"px"}),t.loop=!1):(t.changeBgSize&&(t.nzHeight>t.nzWidth?("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})):("lens"!=t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"})),t.changeBgSize=!1),t.zoomWindow.css({backgroundPosition:t.xp+"px "+t.yp+"px"}))},16))):(t.changeBgSize&&(t.nzHeight>t.nzWidth?("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})):("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}),t.largeHeight/t.newvaluewidth<t.options.zoomWindowHeight?t.zoomWindow.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}):t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})),t.changeBgSize=!1),t.zoomWindow.css({backgroundPosition:t.windowLeftPos+"px "+t.windowTopPos+"px"})))},setTintPosition:function(e){var t=this;t.nzOffset=t.$elem.offset(),t.tintpos=String(-1*(e.pageX-t.nzOffset.left-t.zoomLens.width()/2)),t.tintposy=String(-1*(e.pageY-t.nzOffset.top-t.zoomLens.height()/2)),t.Etoppos&&(t.tintposy=0),t.Eloppos&&(t.tintpos=0),t.Eboppos&&(t.tintposy=-1*(t.nzHeight-t.zoomLens.height()-2*t.options.lensBorderSize)),t.Eroppos&&(t.tintpos=-1*(t.nzWidth-t.zoomLens.width()-2*t.options.lensBorderSize)),t.options.tint&&(t.fullheight&&(t.tintposy=0),t.fullwidth&&(t.tintpos=0),t.zoomTintImage.css({left:t.tintpos+"px"}),t.zoomTintImage.css({top:t.tintposy+"px"}))},swaptheimage:function(e,t){var n=this,o=new Image;n.options.loadingIcon&&(n.spinner=l("<div style=\"background: url('"+n.options.loadingIcon+"') no-repeat center;height:"+n.nzHeight+"px;width:"+n.nzWidth+'px;z-index: 2000;position: absolute; background-position: center center;"></div>'),n.$elem.after(n.spinner)),n.options.onImageSwap(n.$elem),o.onload=function(){n.largeWidth=o.width,n.largeHeight=o.height,n.zoomImage=t,n.zoomWindow.css({"background-size":n.largeWidth+"px "+n.largeHeight+"px"}),n.swapAction(e,t)},o.src=t},swapAction:function(e,t){var n=this,o=new Image;if(o.onload=function(){n.nzHeight=o.height,n.nzWidth=o.width,n.options.onImageSwapComplete(n.$elem),n.doneCallback()},o.src=e,n.currentZoomLevel=n.options.zoomLevel,n.options.maxZoomLevel=!1,"lens"==n.options.zoomType&&n.zoomLens.css({backgroundImage:"url('"+t+"')"}),"window"==n.options.zoomType&&n.zoomWindow.css({backgroundImage:"url('"+t+"')"}),"inner"==n.options.zoomType&&n.zoomWindow.css({backgroundImage:"url('"+t+"')"}),n.currentImage=t,n.options.imageCrossfade){var i=n.$elem,a=i.clone();if(n.$elem.attr("src",e),n.$elem.after(a),a.stop(!0).fadeOut(n.options.imageCrossfade,function(){l(this).remove()}),n.$elem.width("auto").removeAttr("width"),n.$elem.height("auto").removeAttr("height"),i.fadeIn(n.options.imageCrossfade),n.options.tint&&"inner"!=n.options.zoomType){var r=n.zoomTintImage,s=r.clone();n.zoomTintImage.attr("src",t),n.zoomTintImage.after(s),s.stop(!0).fadeOut(n.options.imageCrossfade,function(){l(this).remove()}),r.fadeIn(n.options.imageCrossfade),n.zoomTint.css({height:n.$elem.height()}),n.zoomTint.css({width:n.$elem.width()})}n.zoomContainer.css("height",n.$elem.height()),n.zoomContainer.css("width",n.$elem.width()),"inner"==n.options.zoomType&&(n.options.constrainType||(n.zoomWrap.parent().css("height",n.$elem.height()),n.zoomWrap.parent().css("width",n.$elem.width()),n.zoomWindow.css("height",n.$elem.height()),n.zoomWindow.css("width",n.$elem.width()))),n.options.imageCrossfade&&(n.zoomWrap.css("height",n.$elem.height()),n.zoomWrap.css("width",n.$elem.width()))}else n.$elem.attr("src",e),n.options.tint&&(n.zoomTintImage.attr("src",t),n.zoomTintImage.attr("height",n.$elem.height()),n.zoomTintImage.css({height:n.$elem.height()}),n.zoomTint.css({height:n.$elem.height()})),n.zoomContainer.css("height",n.$elem.height()),n.zoomContainer.css("width",n.$elem.width()),n.options.imageCrossfade&&(n.zoomWrap.css("height",n.$elem.height()),n.zoomWrap.css("width",n.$elem.width()));n.options.constrainType&&("height"==n.options.constrainType&&(n.zoomContainer.css("height",n.options.constrainSize),n.zoomContainer.css("width","auto"),n.options.imageCrossfade?(n.zoomWrap.css("height",n.options.constrainSize),n.zoomWrap.css("width","auto"),n.constwidth=n.zoomWrap.width()):(n.$elem.css("height",n.options.constrainSize),n.$elem.css("width","auto"),n.constwidth=n.$elem.width()),"inner"==n.options.zoomType&&(n.zoomWrap.parent().css("height",n.options.constrainSize),n.zoomWrap.parent().css("width",n.constwidth),n.zoomWindow.css("height",n.options.constrainSize),n.zoomWindow.css("width",n.constwidth)),n.options.tint&&(n.tintContainer.css("height",n.options.constrainSize),n.tintContainer.css("width",n.constwidth),n.zoomTint.css("height",n.options.constrainSize),n.zoomTint.css("width",n.constwidth),n.zoomTintImage.css("height",n.options.constrainSize),n.zoomTintImage.css("width",n.constwidth))),"width"==n.options.constrainType&&(n.zoomContainer.css("height","auto"),n.zoomContainer.css("width",n.options.constrainSize),n.options.imageCrossfade?(n.zoomWrap.css("height","auto"),n.zoomWrap.css("width",n.options.constrainSize),n.constheight=n.zoomWrap.height()):(n.$elem.css("height","auto"),n.$elem.css("width",n.options.constrainSize),n.constheight=n.$elem.height()),"inner"==n.options.zoomType&&(n.zoomWrap.parent().css("height",n.constheight),n.zoomWrap.parent().css("width",n.options.constrainSize),n.zoomWindow.css("height",n.constheight),n.zoomWindow.css("width",n.options.constrainSize)),n.options.tint&&(n.tintContainer.css("height",n.constheight),n.tintContainer.css("width",n.options.constrainSize),n.zoomTint.css("height",n.constheight),n.zoomTint.css("width",n.options.constrainSize),n.zoomTintImage.css("height",n.constheight),n.zoomTintImage.css("width",n.options.constrainSize))))},doneCallback:function(){var e=this;e.options.loadingIcon&&e.spinner.hide(),e.nzOffset=e.$elem.offset(),e.nzWidth=e.$elem.width(),e.nzHeight=e.$elem.height(),e.currentZoomLevel=e.options.zoomLevel,e.widthRatio=e.largeWidth/e.nzWidth,e.heightRatio=e.largeHeight/e.nzHeight,"window"==e.options.zoomType&&(e.nzHeight<e.options.zoomWindowWidth/e.widthRatio?lensHeight=e.nzHeight:lensHeight=String(e.options.zoomWindowHeight/e.heightRatio),e.options.zoomWindowWidth<e.options.zoomWindowWidth?lensWidth=e.nzWidth:lensWidth=e.options.zoomWindowWidth/e.widthRatio,e.zoomLens&&(e.zoomLens.css("width",lensWidth),e.zoomLens.css("height",lensHeight)))},getCurrentImage:function(){return this.zoomImage},getGalleryList:function(){var t=this;return t.gallerylist=[],t.options.gallery?l("#"+t.options.gallery+" a").each(function(){var e="";l(this).data("zoom-image")?e=l(this).data("zoom-image"):l(this).data("image")&&(e=l(this).data("image")),e==t.zoomImage?t.gallerylist.unshift({href:""+e,title:l(this).find("img").attr("title")}):t.gallerylist.push({href:""+e,title:l(this).find("img").attr("title")})}):t.gallerylist.push({href:""+t.zoomImage,title:l(this).find("img").attr("title")}),t.gallerylist},changeZoomLevel:function(e){var t=this;t.scrollingLock=!0,t.newvalue=parseFloat(e).toFixed(2),newvalue=parseFloat(e).toFixed(2),maxheightnewvalue=t.largeHeight/(t.options.zoomWindowHeight/t.nzHeight*t.nzHeight),maxwidthtnewvalue=t.largeWidth/(t.options.zoomWindowWidth/t.nzWidth*t.nzWidth),"inner"!=t.options.zoomType&&(maxheightnewvalue<=newvalue?(t.heightRatio=t.largeHeight/maxheightnewvalue/t.nzHeight,t.newvalueheight=maxheightnewvalue,t.fullheight=!0):(t.heightRatio=t.largeHeight/newvalue/t.nzHeight,t.newvalueheight=newvalue,t.fullheight=!1),maxwidthtnewvalue<=newvalue?(t.widthRatio=t.largeWidth/maxwidthtnewvalue/t.nzWidth,t.newvaluewidth=maxwidthtnewvalue,t.fullwidth=!0):(t.widthRatio=t.largeWidth/newvalue/t.nzWidth,t.newvaluewidth=newvalue,t.fullwidth=!1),"lens"==t.options.zoomType&&(maxheightnewvalue<=newvalue?(t.fullwidth=!0,t.newvaluewidth=maxheightnewvalue):(t.widthRatio=t.largeWidth/newvalue/t.nzWidth,t.newvaluewidth=newvalue,t.fullwidth=!1))),"inner"==t.options.zoomType&&(maxheightnewvalue=parseFloat(t.largeHeight/t.nzHeight).toFixed(2),maxwidthtnewvalue=parseFloat(t.largeWidth/t.nzWidth).toFixed(2),newvalue>maxheightnewvalue&&(newvalue=maxheightnewvalue),newvalue>maxwidthtnewvalue&&(newvalue=maxwidthtnewvalue),maxheightnewvalue<=newvalue?(t.heightRatio=t.largeHeight/newvalue/t.nzHeight,newvalue>maxheightnewvalue?t.newvalueheight=maxheightnewvalue:t.newvalueheight=newvalue,t.fullheight=!0):(t.heightRatio=t.largeHeight/newvalue/t.nzHeight,newvalue>maxheightnewvalue?t.newvalueheight=maxheightnewvalue:t.newvalueheight=newvalue,t.fullheight=!1),maxwidthtnewvalue<=newvalue?(t.widthRatio=t.largeWidth/newvalue/t.nzWidth,newvalue>maxwidthtnewvalue?t.newvaluewidth=maxwidthtnewvalue:t.newvaluewidth=newvalue,t.fullwidth=!0):(t.widthRatio=t.largeWidth/newvalue/t.nzWidth,t.newvaluewidth=newvalue,t.fullwidth=!1)),scrcontinue=!1,"inner"==t.options.zoomType&&(t.nzWidth>=t.nzHeight&&(t.newvaluewidth<=maxwidthtnewvalue?scrcontinue=!0:(scrcontinue=!1,t.fullheight=!0,t.fullwidth=!0)),t.nzHeight>t.nzWidth&&(t.newvaluewidth<=maxwidthtnewvalue?scrcontinue=!0:(scrcontinue=!1,t.fullheight=!0,t.fullwidth=!0))),"inner"!=t.options.zoomType&&(scrcontinue=!0),scrcontinue&&(t.zoomLock=0,t.changeZoom=!0,t.options.zoomWindowHeight/t.heightRatio<=t.nzHeight&&(t.currentZoomLevel=t.newvalueheight,"lens"!=t.options.zoomType&&"inner"!=t.options.zoomType&&(t.changeBgSize=!0,t.zoomLens.css({height:String(t.options.zoomWindowHeight/t.heightRatio)+"px"})),"lens"!=t.options.zoomType&&"inner"!=t.options.zoomType||(t.changeBgSize=!0)),t.options.zoomWindowWidth/t.widthRatio<=t.nzWidth&&("inner"!=t.options.zoomType&&t.newvaluewidth>t.newvalueheight&&(t.currentZoomLevel=t.newvaluewidth),"lens"!=t.options.zoomType&&"inner"!=t.options.zoomType&&(t.changeBgSize=!0,t.zoomLens.css({width:String(t.options.zoomWindowWidth/t.widthRatio)+"px"})),"lens"!=t.options.zoomType&&"inner"!=t.options.zoomType||(t.changeBgSize=!0)),"inner"==t.options.zoomType&&(t.changeBgSize=!0,t.nzWidth>t.nzHeight&&(t.currentZoomLevel=t.newvaluewidth),t.nzHeight>t.nzWidth&&(t.currentZoomLevel=t.newvaluewidth))),t.setPosition(t.currentLoc)},closeAll:function(){self.zoomWindow&&self.zoomWindow.hide(),self.zoomLens&&self.zoomLens.hide(),self.zoomTint&&self.zoomTint.hide()},changeState:function(e){"enable"==e&&(this.options.zoomEnabled=!0),"disable"==e&&(this.options.zoomEnabled=!1)}};l.fn.elevateZoom=function(t){return this.each(function(){var e=Object.create(o);e.init(t,this),l.data(this,"elevateZoom",e)})},l.fn.elevateZoom.options={imageSrc:null,zoomActivation:"hover",zoomEnabled:!0,preloading:1,zoomLevel:1,scrollZoom:!1,scrollZoomIncrement:.1,minZoomLevel:!1,maxZoomLevel:!1,easing:!1,easingAmount:12,lensSize:200,zoomWindowWidth:400,zoomWindowHeight:400,zoomWindowOffetx:0,zoomWindowOffety:0,zoomWindowPosition:1,zoomWindowBgColour:"#fff",lensFadeIn:!1,lensFadeOut:!1,debug:!1,zoomWindowFadeIn:!1,zoomWindowFadeOut:!1,zoomWindowAlwaysShow:!1,zoomTintFadeIn:!1,zoomTintFadeOut:!1,borderSize:4,showLens:!0,borderColour:"#888",lensBorderSize:1,lensBorderColour:"#000",lensShape:"square",zoomType:"window",containLensZoom:!1,lensColour:"white",lensOpacity:.4,lenszoom:!1,tint:!1,tintColour:"#333",tintOpacity:.4,gallery:!1,galleryActiveClass:"zoomGalleryActive",imageCrossfade:!1,constrainType:!1,constrainSize:!1,loadingIcon:!1,cursor:"default",responsive:!0,onComplete:l.noop,onDestroy:function(){},onZoomedImageLoaded:function(){},onImageSwap:l.noop,onImageSwapComplete:l.noop}}(jQuery,window,document),function(e){"function"==typeof define&&define.amd?define(["jquery","moment"],e):"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery"),require("moment")):e(jQuery,moment)}(function(q,Z){"use strict";q.dateRangePickerLanguages={default:{selected:"Selected:",day:"Day",days:"Days",apply:"Close","week-1":"mo","week-2":"tu","week-3":"we","week-4":"th","week-5":"fr","week-6":"sa","week-7":"su","week-number":"W","month-name":["january","february","march","april","may","june","july","august","september","october","november","december"],shortcuts:"Shortcuts","custom-values":"Custom Values",past:"Past",following:"Following",previous:"Previous","prev-week":"Week","prev-month":"Month","prev-year":"Year",next:"Next","next-week":"Week","next-month":"Month","next-year":"Year","less-than":"Date range should not be more than %d days","more-than":"Date range should not be less than %d days","default-more":"Please select a date range longer than %d days","default-single":"Please select a date","default-less":"Please select a date range less than %d days","default-range":"Please select a date range between %d and %d days","default-default":"Please select a date range",time:"Time",hour:"Hour",minute:"Minute"},de:{selected:"Auswahl:",day:"Tag",days:"Tage",apply:"Schließen","week-1":"mo","week-2":"di","week-3":"mi","week-4":"do","week-5":"fr","week-6":"sa","week-7":"so","month-name":["januar","februar","märz","april","mai","juni","juli","august","september","oktober","november","dezember"],shortcuts:"Schnellwahl",past:"Vorherige",following:"Folgende",previous:"Vorherige","prev-week":"Woche","prev-month":"Monat","prev-year":"Jahr",next:"Nächste","next-week":"Woche","next-month":"Monat","next-year":"Jahr","less-than":"Datumsbereich darf nicht größer sein als %d Tage","more-than":"Datumsbereich darf nicht kleiner sein als %d Tage","default-more":"Bitte mindestens %d Tage auswählen","default-single":"Bitte ein Datum auswählen","default-less":"Bitte weniger als %d Tage auswählen","default-range":"Bitte einen Datumsbereich zwischen %d und %d Tagen auswählen","default-default":"Bitte ein Start- und Enddatum auswählen",Time:"Zeit",hour:"Stunde",minute:"Minute"},es:{selected:"Seleccionado:",day:"Día",days:"Días",apply:"Cerrar","week-1":"lu","week-2":"ma","week-3":"mi","week-4":"ju","week-5":"vi","week-6":"sa","week-7":"do","month-name":["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortcuts:"Accesos directos",past:"Pasado",following:"Siguiente",previous:"Anterior","prev-week":"Semana","prev-month":"Mes","prev-year":"Año",next:"Siguiente","next-week":"Semana","next-month":"Mes","next-year":"Año","less-than":"El rango no debería ser mayor de %d días","more-than":"El rango no debería ser menor de %d días","default-more":"Por favor selecciona un rango mayor a %d días","default-single":"Por favor selecciona un día","default-less":"Por favor selecciona un rango menor a %d días","default-range":"Por favor selecciona un rango entre %d y %d días","default-default":"Por favor selecciona un rango de fechas."},fr:{selected:"Sélection:",day:"Jour",days:"Jours",apply:"Fermer","week-1":"lu","week-2":"ma","week-3":"me","week-4":"je","week-5":"ve","week-6":"sa","week-7":"di","month-name":["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortcuts:"Raccourcis",past:"Passé",following:"Suivant",previous:"Précédent","prev-week":"Semaine","prev-month":"Mois","prev-year":"Année",next:"Suivant","next-week":"Semaine","next-month":"Mois","next-year":"Année","less-than":"L'intervalle ne doit pas être supérieure à %d jours","more-than":"L'intervalle ne doit pas être inférieure à %d jours","default-more":"Merci de choisir une intervalle supérieure à %d jours","default-single":"Merci de choisir une date","default-less":"Merci de choisir une intervalle inférieure %d jours","default-range":"Merci de choisir une intervalle comprise entre %d et %d jours","default-default":"Merci de choisir une date"},pt:{selected:"Selecionado:",day:"Dia",days:"Dias",apply:"Fechar","week-1":"seg","week-2":"ter","week-3":"qua","week-4":"qui","week-5":"sex","week-6":"sab","week-7":"dom","week-number":"N","month-name":["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],shortcuts:"Atalhos","custom-values":"Valores Personalizados",past:"Passado",following:"Seguinte",previous:"Anterior","prev-week":"Semana","prev-month":"Mês","prev-year":"Ano",next:"Próximo","next-week":"Próxima Semana","next-month":"Próximo Mês","next-year":"Próximo Ano","less-than":"O período selecionado não deve ser maior que %d dias","more-than":"O período selecionado não deve ser menor que %d dias","default-more":"Selecione um período superior a %d dias","default-single":"Selecione uma data","default-less":"Selecione um período inferior a %d dias","default-range":"Selecione um período de %d a %d dias","default-default":"Selecione um período",time:"Tempo",hour:"Hora",minute:"Minuto"}},q.fn.dateRangePicker=function(f){f||(f={}),(f=q.extend(!0,{autoClose:!1,format:"YYYY-MM-DD",separator:" - ",language:"auto",startOfWeek:"sunday",getValue:function(){return q(this).val()},setValue:function(e){q(this).attr("readonly")||q(this).is(":disabled")||e==q(this).val()||q(this).val(e)},startDate:!1,endDate:!1,time:{enabled:!1},minDays:0,maxDays:0,customShortcuts:[],inline:!1,container:"body",alwaysOpen:!1,singleDate:!1,lookBehind:!1,batchMode:!1,highlightToday:!1,duration:200,stickyMonths:!1,dayDivAttrs:[],dayTdAttrs:[],selectForward:!1,selectBackward:!1,applyBtnClass:"",singleMonth:"auto",hoveringTooltip:function(e,t,n){return 1<e?e+" "+U("days"):""},showTopbar:!0,swapTime:!1,showWeekNumbers:!1,getWeekNumber:function(e){return Z(e).format("w")},customOpenAnimation:null,customCloseAnimation:null,customArrowPrevSymbol:null,customArrowNextSymbol:null},f)).start=!1,f.end=!1,f.startWeek=!1,f.isTouchDevice="ontouchstart"in window||navigator.msMaxTouchPoints,f.isTouchDevice&&(f.hoveringTooltip=!1),"auto"==f.singleMonth&&(f.singleMonth=q(window).width()<480),f.singleMonth&&(f.stickyMonths=!1),f.showTopbar||(f.autoClose=!0),f.startDate&&"string"==typeof f.startDate&&(f.startDate=Z(f.startDate,f.format).toDate()),f.endDate&&"string"==typeof f.endDate&&(f.endDate=Z(f.endDate,f.format).toDate());var c,e,i=function(){{if("auto"!=f.language)return f.language&&f.language in q.dateRangePickerLanguages?q.dateRangePickerLanguages[f.language]:q.dateRangePickerLanguages.default;var e=navigator.language?navigator.language:navigator.browserLanguage;return e&&(e=e.toLowerCase())in q.dateRangePickerLanguages?q.dateRangePickerLanguages[e]:q.dateRangePickerLanguages.default}}(),a=!1,o=this,r=q(o).get(0);return q(this).unbind(".datepicker").bind("click.datepicker",function(e){c.is(":visible")||t(f.duration)}).bind("change.datepicker",function(e){n()}).bind("keyup.datepicker",function(){try{clearTimeout(e)}catch(e){}e=setTimeout(function(){n()},2e3)}),function(){var o=this;if(q(this).data("date-picker-opened"))return void L();q(this).data("date-picker-opened",!0),(c=function(){var e='<div class="date-picker-wrapper';f.extraClass&&(e+=" "+f.extraClass+" "),f.singleDate&&(e+=" single-date "),e+='">';var t=f.showWeekNumbers?6:5,n='<i class="icon-left-open-mini"></i>';f.customArrowPrevSymbol&&(n=f.customArrowPrevSymbol);var o='<i class="icon-right-open-mini"></i>';return f.customArrowNextSymbol&&(o=f.customArrowNextSymbol),e+='<div class="month-wrapper">   <table class="month1" cellspacing="0" border="0" cellpadding="0">       <thead>           <tr class="caption">               <th style="width:27px;">                   <div class="prev">'+n+'                   </div>               </th>               <th colspan="'+t+'" class="month-name">               </th>               <th style="width:27px;">'+(f.singleDate||!f.stickyMonths?'<div class="next">'+o+"</div>":"")+'               </th>           </tr>           <tr class="week-name">'+$()+"       </thead>       <tbody></tbody>   </table>",f.singleMonth||(e+='<div class="gap"></div><table class="month2" cellspacing="0" border="0" cellpadding="0">   <thead>   <tr class="caption">       <th style="width:27px;">'+(f.stickyMonths?"":'<div class="prev">'+n+"</div>")+'       </th>       <th colspan="'+t+'" class="month-name">       </th>       <th style="width:27px;">           <div class="next">'+o+'</div>       </th>   </tr>   <tr class="week-name">'+$()+"   </thead>   <tbody></tbody></table>"),e+='<div style="clear:both;height:0;font-size:0;"></div><div class="time"><div class="time1"></div>',f.singleDate||(e+='<div class="time2"></div>'),q(e+='</div><div style="clear:both;height:0;font-size:0;"></div></div></div>')}().hide()).append('<div class="date-range-length-tip"></div>'),q(f.container).append(c),f.inline?c.addClass("inline-wrapper"):s();f.alwaysOpen&&c.find(".apply-btn").hide();var e=j();if(N(e),f.time.enabled)if(f.startDate&&f.endDate||f.start&&f.end)T(Z(f.start||f.startDate).toDate(),"time1"),T(Z(f.end||f.endDate).toDate(),"time2");else{var t=f.defaultEndTime?f.defaultEndTime:e;T(e,"time1"),T(t,"time2")}var n="";n=f.singleDate?U("default-single"):f.minDays&&f.maxDays?U("default-range"):f.minDays?U("default-more"):f.maxDays?U("default-less"):U("default-default");c.find(".default-top").html(n.replace(/\%d/,f.minDays).replace(/\%d/,f.maxDays)),f.singleMonth?c.addClass("single-month"):c.addClass("two-months");setTimeout(function(){d(),a=!0},0),c.click(function(e){e.stopPropagation()}),q(document).bind("click.datepicker",function(e){var t,n;t=e,(n=o[0]).contains(t.target)||t.target==n||null!=n.childNodes&&0<=q.inArray(t.target,n.childNodes)||c.is(":visible")&&L()}),c.find(".next").click(function(){q(o).trigger("datepicker-next-month-clicked"),f.stickyMonths?function(e){var t=E(f.month1),n=E(f.month2);if(F(n))return;if(!f.singleDate&&0<=P(t,n))return;I(t,"month1"),I(n,"month2"),_()}():function(e){var t=q(e).parents("table").hasClass("month2"),n=t?f.month2:f.month1;if(n=E(n),!f.singleMonth&&!f.singleDate&&!t&&0<=P(n,f.month2)||F(n))return;I(n,t?"month2":"month1"),O()}(this),q(o).trigger("datepicker-next-month-finish-clicked")}),c.find(".prev").click(function(){q(o).trigger("datepicker-prev-month-clicked"),f.stickyMonths?function(e){var t=A(f.month1),n=A(f.month2);if(F(t))return;if(!f.singleDate&&P(n,t)<=0)return;I(n,"month2"),I(t,"month1"),_()}():function(e){var t=q(e).parents("table").hasClass("month2"),n=t?f.month2:f.month1;if(n=A(n),t&&P(n,f.month1)<=0||F(n))return;I(n,t?"month2":"month1"),O()}(this),q(o).trigger("datepicker-prev-month-finish-clicked")}),c.attr("unselectable","on").css("user-select","none").bind("selectstart",function(e){return e.preventDefault(),!1}),c.find(".apply-btn").click(function(){L();var e=R(new Date(f.start))+f.separator+R(new Date(f.end));q(o).trigger("datepicker-apply",{value:e,date1:new Date(f.start),date2:new Date(f.end)})}),c.find("[custom]").click(function(){var e=q(this).attr("custom");f.start=!1,f.end=!1,c.find(".day.checked").removeClass("checked"),f.setValue.call(r,e),k(),x(!0),_(),f.autoClose&&L()}),c.find("[shortcut]").click(function(){var e,t=q(this).attr("shortcut"),n=new Date,o=!1;if(-1!=t.indexOf("day")){var i=parseInt(t.split(",",2)[1],10);o=new Date((new Date).getTime()+864e5*i),n=new Date(n.getTime()+864e5*(0<i?1:-1))}else if(-1!=t.indexOf("week")){var a;for(e=-1!=t.indexOf("prev,")?-1:1,a=1==e?"monday"==f.startOfWeek?1:0:"monday"==f.startOfWeek?0:6,n=new Date(n.getTime()-864e5);n.getDay()!=a;)n=new Date(n.getTime()+864e5*e);o=new Date(n.getTime()+864e5*e*6)}else if(-1!=t.indexOf("month"))e=-1!=t.indexOf("prev,")?-1:1,(o=1==e?E(n):A(n)).setDate(1),(n=E(o)).setDate(1),n=new Date(n.getTime()-864e5);else if(-1!=t.indexOf("year"))e=-1!=t.indexOf("prev,")?-1:1,(o=new Date).setFullYear(n.getFullYear()+e),o.setMonth(0),o.setDate(1),n.setFullYear(n.getFullYear()+e),n.setMonth(11),n.setDate(31);else if("custom"==t){var r=q(this).html();if(f.customShortcuts&&0<f.customShortcuts.length)for(var s=0;s<f.customShortcuts.length;s++){var l=f.customShortcuts[s];if(l.name==r){var d=[];if((d=l.dates.call())&&2==d.length&&(o=d[0],n=d[1]),d&&1==d.length){var u=d[0];I(u,"month1"),I(E(u),"month2"),O()}break}}}o&&n&&(C(o,n),k())}),c.find(".time1 input[type=range]").bind("change touchmove",function(e){var t=e.target,n="hour"==t.name?q(t).val().replace(/^(\d{1})$/,"0$1"):void 0,o="minute"==t.name?q(t).val().replace(/^(\d{1})$/,"0$1"):void 0;p("time1",n,o)}),c.find(".time2 input[type=range]").bind("change touchmove",function(e){var t=e.target,n="hour"==t.name?q(t).val().replace(/^(\d{1})$/,"0$1"):void 0,o="minute"==t.name?q(t).val().replace(/^(\d{1})$/,"0$1"):void 0;p("time2",n,o)})}.call(this),f.alwaysOpen&&t(0),q(this).data("dateRangePicker",{setStart:function(e,t){return"string"==typeof e&&(e=Z(e,f.format).toDate()),f.end=!1,W(e,t),this},setEnd:function(e,t){var n=new Date;return n.setTime(f.start),"string"==typeof e&&(e=Z(e,f.format).toDate()),C(n,e,t),this},setDateRange:function(e,t,n){"string"==typeof e&&"string"==typeof t&&(e=Z(e,f.format).toDate(),t=Z(t,f.format).toDate()),C(e,t,n)},clear:function(){f.start=!1,f.end=!1,c.find(".day.checked").removeClass("checked"),c.find(".day.last-date-selected").removeClass("last-date-selected"),c.find(".day.first-date-selected").removeClass("first-date-selected"),f.setValue.call(r,""),k(),x(),_()},close:L,open:t,redraw:M,getDatePicker:function(){return c},resetMonthsView:N,destroy:function(){q(o).unbind(".datepicker"),q(o).data("dateRangePicker",""),q(o).data("date-picker-opened",null),c.remove(),q(window).unbind("resize.datepicker",s),q(document).unbind("click.datepicker",L)}}),q(window).bind("resize.datepicker",s),this;function s(){if(!f.inline){var e=q(o).offset();if("relative"==q(f.container).css("position")){var t=q(f.container).offset();c.css({top:e.top-t.top+q(o).outerHeight()+4,left:e.left-t.left})}else e.left<460?c.css({top:e.top+q(o).outerHeight()+parseInt(q("body").css("border-top")||0,10),left:e.left}):c.css({top:e.top+q(o).outerHeight()+parseInt(q("body").css("border-top")||0,10),left:e.left+q(o).width()-c.width()-16})}}function t(e){s(),M(),n(),f.customOpenAnimation?f.customOpenAnimation.call(c.get(0),function(){q(o).trigger("datepicker-opened",{relatedTarget:c})}):c.slideDown(e,function(){q(o).trigger("datepicker-opened",{relatedTarget:c})}),q(o).trigger("datepicker-open",{relatedTarget:c}),O(),d()}function n(){var e=f.getValue.call(r),t=e?e.split(f.separator):"";if(t&&(1==t.length&&f.singleDate||2<=t.length)){var n=f.format;n.match(/Do/)&&(n=n.replace(/Do/,"D"),t[0]=t[0].replace(/(\d+)(th|nd|st)/,"$1"),2<=t.length&&(t[1]=t[1].replace(/(\d+)(th|nd|st)/,"$1"))),a=!1,2<=t.length?C(l(t[0],n,Z.locale(f.language)),l(t[1],n,Z.locale(f.language))):1==t.length&&f.singleDate&&W(l(t[0],n,Z.locale(f.language))),a=!0}}function l(e,t,n){return Z(e,t,n).isValid()?Z(e,t,n).toDate():Z().toDate()}function d(){var e=c.find(".gap").css("margin-left");e&&(e=parseInt(e));var t=c.find(".month1").width(),n=c.find(".gap").width()+(e?2*e:0),o=c.find(".month2").width();c.find(".month-wrapper").width(t+n+o+(f.singleMonth?0:77))}function u(e,t){c.find("."+e+" input[type=range].hour-range").val(Z(t).hours()),c.find("."+e+" input[type=range].minute-range").val(Z(t).minutes()),p(e,Z(t).format("HH"),Z(t).format("mm"))}function h(e,t){f[e]=parseInt(Z(parseInt(t)).startOf("day").add(Z(f[e+"Time"]).format("HH"),"h").add(Z(f[e+"Time"]).format("mm"),"m").valueOf())}function p(e,i,a){switch(i&&c.find("."+e+" .hour-val").text(i),a&&c.find("."+e+" .minute-val").text(a),e){case"time1":f.start&&t("start",Z(f.start)),t("startTime",Z(f.startTime||Z().valueOf()));break;case"time2":f.end&&t("end",Z(f.end)),t("endTime",Z(f.endTime||Z().valueOf()))}function t(e,t){var n=t.format("HH"),o=t.format("mm");f[e]=t.startOf("day").add(i||n,"h").add(a||o,"m").valueOf()}k(),x(),_()}function g(e){var t=e;return"week-range"===f.batchMode?t="monday"===f.startOfWeek?Z(parseInt(e)).startOf("isoweek").valueOf():Z(parseInt(e)).startOf("week").valueOf():"month-range"===f.batchMode&&(t=Z(parseInt(e)).startOf("month").valueOf()),t}function m(e){var t=e;return"week-range"===f.batchMode?t="monday"===f.startOfWeek?Z(parseInt(e)).endOf("isoweek").valueOf():Z(parseInt(e)).endOf("week").valueOf():"month-range"===f.batchMode&&(t=Z(parseInt(e)).endOf("month").valueOf()),t}function w(e){if(!e.hasClass("invalid")){var t=e.attr("time");if(e.addClass("checked"),f.singleDate?(f.start=t,f.end=!1):"week"===f.batchMode?"monday"===f.startOfWeek?(f.start=Z(parseInt(t)).startOf("isoweek").valueOf(),f.end=Z(parseInt(t)).endOf("isoweek").valueOf()):(f.end=Z(parseInt(t)).endOf("week").valueOf(),f.start=Z(parseInt(t)).startOf("week").valueOf()):"workweek"===f.batchMode?(f.start=Z(parseInt(t)).day(1).valueOf(),f.end=Z(parseInt(t)).day(5).valueOf()):"weekend"===f.batchMode?(f.start=Z(parseInt(t)).day(6).valueOf(),f.end=Z(parseInt(t)).day(7).valueOf()):"month"===f.batchMode?(f.start=Z(parseInt(t)).startOf("month").valueOf(),f.end=Z(parseInt(t)).endOf("month").valueOf()):f.start&&f.end||!f.start&&!f.end?(f.start=g(t),f.end=!1):f.start&&(f.end=m(t),f.time.enabled&&h("end",f.end)),f.time.enabled&&(f.start&&h("start",f.start),f.end&&h("end",f.end)),!f.singleDate&&f.start&&f.end&&f.start>f.end){var n=f.end;f.end=m(f.start),f.start=g(n),f.time.enabled&&f.swapTime&&(u("time1",f.start),u("time2",f.end))}f.start=parseInt(f.start),f.end=parseInt(f.end),b(),f.start&&!f.end&&(q(o).trigger("datepicker-first-date-selected",{date1:new Date(f.start)}),y(e)),z(),k(),x(),_(),S()}}function v(e){if(e=parseInt(e,10),f.startDate&&H(e,f.startDate)<0)return!1;if(f.endDate&&0<H(e,f.endDate))return!1;if(f.start&&!f.end&&!f.singleDate){if(0<f.maxDays&&D(e,f.start)>f.maxDays)return!1;if(0<f.minDays&&D(e,f.start)<f.minDays)return!1;if(f.selectForward&&e<f.start)return!1;if(f.selectBackward&&e>f.start)return!1;if(f.beforeShowDay&&"function"==typeof f.beforeShowDay){for(var t=!0,n=e;1<D(n,f.start);){if(!f.beforeShowDay(new Date(n))[0]){t=!1;break}if(Math.abs(n-f.start)<864e5)break;n>f.start&&(n-=864e5),n<f.start&&(n+=864e5)}if(!t)return!1}}return!0}function z(){return c.find(".day.invalid.tmp").removeClass("tmp invalid").addClass("valid"),f.start&&!f.end&&c.find(".day.toMonth.valid").each(function(){v(parseInt(q(this).attr("time"),10))?q(this).addClass("valid tmp").removeClass("invalid"):q(this).addClass("invalid tmp").removeClass("valid")}),!0}function y(e){var t=parseInt(e.attr("time")),n="";if(e.hasClass("has-tooltip")&&e.attr("data-tooltip"))n='<span style="white-space:nowrap">'+e.attr("data-tooltip")+"</span>";else if(!e.hasClass("invalid"))if(f.singleDate)c.find(".day.hovering").removeClass("hovering"),e.addClass("hovering");else if(c.find(".day").each(function(){var e=parseInt(q(this).attr("time"));f.start,f.end;e==t?q(this).addClass("hovering"):q(this).removeClass("hovering"),f.start&&!f.end&&(f.start<e&&e<=t||f.start>e&&t<=e)?q(this).addClass("hovering"):q(this).removeClass("hovering")}),f.start&&!f.end){var o=D(t,f.start);f.hoveringTooltip&&("function"==typeof f.hoveringTooltip?n=f.hoveringTooltip(o,f.start,t):!0===f.hoveringTooltip&&1<o&&(n=o+" "+U("days")))}if(n){var i=e.offset(),a=c.offset(),r=i.left-a.left,s=i.top-a.top;r+=e.width()/2;var l=c.find(".date-range-length-tip"),d=l.css({visibility:"hidden",display:"none"}).html(n).width(),u=l.height();r-=d/2,s-=u,setTimeout(function(){l.css({left:r,top:s,display:"block",visibility:"visible"})},10)}else c.find(".date-range-length-tip").hide()}function b(){c.find(".day.hovering").removeClass("hovering"),c.find(".date-range-length-tip").hide()}function S(){!0===f.singleDate?a&&f.start&&f.autoClose&&L():a&&f.start&&f.end&&f.autoClose&&L()}function k(){var e=Math.ceil((f.end-f.start)/864e5)+1;f.singleDate?f.start&&!f.end?c.find(".drp_top-bar").removeClass("error").addClass("normal"):c.find(".drp_top-bar").removeClass("error").removeClass("normal"):f.maxDays&&e>f.maxDays?(f.start=!1,f.end=!1,c.find(".day").removeClass("checked"),c.find(".drp_top-bar").removeClass("normal").addClass("error").find(".error-top").html(U("less-than").replace("%d",f.maxDays))):f.minDays&&e<f.minDays?(f.start=!1,f.end=!1,c.find(".day").removeClass("checked"),c.find(".drp_top-bar").removeClass("normal").addClass("error").find(".error-top").html(U("more-than").replace("%d",f.minDays))):f.start||f.end?c.find(".drp_top-bar").removeClass("error").addClass("normal"):c.find(".drp_top-bar").removeClass("error").removeClass("normal"),f.singleDate&&f.start&&!f.end||!f.singleDate&&f.start&&f.end?c.find(".apply-btn").removeClass("disabled"):c.find(".apply-btn").addClass("disabled"),f.batchMode&&(f.start&&f.startDate&&H(f.start,f.startDate)<0||f.end&&f.endDate&&0<H(f.end,f.endDate))&&(f.start=!1,f.end=!1,c.find(".day").removeClass("checked"))}function x(e,t){var n;c.find(".start-day").html("..."),c.find(".end-day").html("..."),c.find(".selected-days").hide(),f.start&&c.find(".start-day").html(R(new Date(parseInt(f.start)))),f.end&&c.find(".end-day").html(R(new Date(parseInt(f.end)))),f.start&&f.singleDate?(c.find(".apply-btn").removeClass("disabled"),n=R(new Date(f.start)),f.setValue.call(r,n,R(new Date(f.start)),R(new Date(f.end))),a&&!t&&q(o).trigger("datepicker-change",{value:n,date1:new Date(f.start)})):f.start&&f.end?(c.find(".selected-days").show().find(".selected-days-num").html(D(f.end,f.start)),c.find(".apply-btn").removeClass("disabled"),n=R(new Date(f.start))+f.separator+R(new Date(f.end)),f.setValue.call(r,n,R(new Date(f.start)),R(new Date(f.end))),a&&!t&&q(o).trigger("datepicker-change",{value:n,date1:new Date(f.start),date2:new Date(f.end)})):e?c.find(".apply-btn").removeClass("disabled"):c.find(".apply-btn").addClass("disabled")}function D(e,t){return Math.abs(V(e)-V(t))+1}function C(e,t,n){if(e.getTime()>t.getTime()){var o=t;t=e,e=o,o=null}var i=!0;if(f.startDate&&H(e,f.startDate)<0&&(i=!1),f.endDate&&0<H(t,f.endDate)&&(i=!1),!i)return I(f.startDate,"month1"),I(E(f.startDate),"month2"),void O();f.start=e.getTime(),f.end=t.getTime(),f.time.enabled&&(u("time1",e),u("time2",t)),(f.stickyMonths||0<H(e,t)&&0===P(e,t))&&(f.lookBehind?e=A(t):t=E(e)),f.stickyMonths&&!1!==f.endDate&&0<P(t,f.endDate)&&(e=A(e),t=A(t)),f.stickyMonths||0===P(e,t)&&(f.lookBehind?e=A(t):t=E(e)),I(e,"month1"),I(t,"month2"),O(),k(),x(!1,n),S()}function W(e,t){var n=!0;if(f.startDate&&H(e,f.startDate)<0&&(n=!1),f.endDate&&0<H(e,f.endDate)&&(n=!1),n){if(f.start=e.getTime(),f.time.enabled&&u("time1",e),I(e,"month1"),!0!==f.singleMonth)I(E(e),"month2");O(),x(!1,t),S()}else I(f.startDate,"month1")}function _(){(f.start||f.end)&&(c.find(".day").each(function(){var e=parseInt(q(this).attr("time")),t=f.start,n=f.end;f.time.enabled&&(e=Z(e).startOf("day").valueOf(),t=Z(t||Z().valueOf()).startOf("day").valueOf(),n=Z(n||Z().valueOf()).startOf("day").valueOf()),f.start&&f.end&&e<=n&&t<=e||f.start&&!f.end&&Z(t).format("YYYY-MM-DD")==Z(e).format("YYYY-MM-DD")?q(this).addClass("checked"):q(this).removeClass("checked"),f.start&&Z(t).format("YYYY-MM-DD")==Z(e).format("YYYY-MM-DD")?q(this).addClass("first-date-selected"):q(this).removeClass("first-date-selected"),f.end&&Z(n).format("YYYY-MM-DD")==Z(e).format("YYYY-MM-DD")?q(this).addClass("last-date-selected"):q(this).removeClass("last-date-selected")}),c.find(".week-number").each(function(){q(this).attr("data-start-time")==f.startWeek&&q(this).addClass("week-number-selected")}))}function I(e,t){e=Z(e).toDate();var n,o=(n=e.getMonth(),U("month-name")[n]);c.find("."+t+" .month-name").html(o+" "+e.getFullYear()),c.find("."+t+" tbody").html(function(e){var t=[];e.setDate(1);new Date(e.getTime()-864e5);var n,o,i=new Date,a=e.getDay();0===a&&"monday"===f.startOfWeek&&(a=7);if(0<a)for(var r=a;0<r;r--){var s=new Date(e.getTime()-864e5*r);o=v(s.getTime()),f.startDate&&H(s,f.startDate)<0&&(o=!1),f.endDate&&0<H(s,f.endDate)&&(o=!1),t.push({date:s,type:"lastMonth",day:s.getDate(),time:s.getTime(),valid:o})}for(var l=e.getMonth(),r=0;r<40;r++)n=Z(e).add(r,"days").toDate(),o=v(n.getTime()),f.startDate&&H(n,f.startDate)<0&&(o=!1),f.endDate&&0<H(n,f.endDate)&&(o=!1),t.push({date:n,type:n.getMonth()==l?"toMonth":"nextMonth",day:n.getDate(),time:n.getTime(),valid:o});for(var d=[],u=0;u<6&&"nextMonth"!=t[7*u].type;u++){d.push("<tr>");for(var s=0;s<7;s++){var c="monday"==f.startOfWeek?s+1:s;n=t[7*u+c];var h=Z(n.time).format("L")==Z(i).format("L");if(n.extraClass="",n.tooltip="",n.valid&&f.beforeShowDay&&"function"==typeof f.beforeShowDay){var p=f.beforeShowDay(Z(n.time).toDate());n.valid=p[0],n.extraClass=p[1]||"",n.tooltip=p[2]||"",""!==n.tooltip&&(n.extraClass+=" has-tooltip ")}var g={time:n.time,"data-tooltip":n.tooltip,class:"day "+n.type+" "+n.extraClass+" "+(n.valid?"valid":"invalid")+" "+(h&&f.highlightToday?"real-today":"")};0===s&&f.showWeekNumbers&&d.push('<td><div class="week-number" data-start-time="'+n.time+'">'+f.getWeekNumber(n.date)+"</div></td>"),d.push("<td "+Y({},f.dayTdAttrs,n)+"><div "+Y(g,f.dayDivAttrs,n)+">"+B(n.time,n.day)+"</div></td>")}d.push("</tr>")}return d.join("")}(e)),f[t]=e,z(),c.find(".day").unbind("click").click(function(e){w(q(this))}),c.find(".day").unbind("mouseenter").mouseenter(function(e){y(q(this))}),c.find(".day").unbind("mouseleave").mouseleave(function(e){c.find(".date-range-length-tip").hide(),f.singleDate&&b()}),c.find(".week-number").unbind("click").click(function(e){var t,n,o,i;t=q(this),i=parseInt(t.attr("data-start-time"),10),f.startWeek?(c.find(".week-number-selected").removeClass("week-number-selected"),n=new Date(i<f.startWeek?i:f.startWeek),o=new Date(i<f.startWeek?f.startWeek:i),f.startWeek=!1,f.start=Z(n).day("monday"==f.startOfWeek?1:0).valueOf(),f.end=Z(o).day("monday"==f.startOfWeek?7:6).valueOf()):(f.startWeek=i,t.addClass("week-number-selected"),n=new Date(i),f.start=Z(n).day("monday"==f.startOfWeek?1:0).valueOf(),f.end=Z(n).day("monday"==f.startOfWeek?7:6).valueOf()),z(),k(),x(),_(),S()})}function T(e,t){c.find("."+t).append("<div><span>"+U("Time")+': <span class="hour-val">00</span>:<span class="minute-val">00</span></span></div><div class="hour"><label>'+U("Hour")+': <input type="range" class="hour-range" name="hour" min="0" max="23"></label></div><div class="minute"><label>'+U("Minute")+': <input type="range" class="minute-range" name="minute" min="0" max="59"></label></div>'),u(t,e)}function R(e){return Z(e).format(f.format)}function O(){_();var e=parseInt(Z(f.month1).format("YYYYMM")),t=parseInt(Z(f.month2).format("YYYYMM")),n=Math.abs(e-t);1<n&&89!=n?c.addClass("has-gap").removeClass("no-gap").find(".gap").css("visibility","visible"):c.removeClass("has-gap").addClass("no-gap").find(".gap").css("visibility","hidden");var o=c.find("table.month1").height(),i=c.find("table.month2").height();0===Math.max(o,i)?c.find(".gap").height(100):c.find(".gap").height(Math.max(o,i)+10)}function L(){if(!f.alwaysOpen){var e=function(){q(o).data("date-picker-opened",!1),q(o).trigger("datepicker-closed",{relatedTarget:c})};f.customCloseAnimation?f.customCloseAnimation.call(c.get(0),e):q(c).slideUp(f.duration,e),q(o).trigger("datepicker-close",{relatedTarget:c})}}function M(){I(f.month1,"month1"),I(f.month2,"month2")}function P(e,t){var n=parseInt(Z(e).format("YYYYMM"))-parseInt(Z(t).format("YYYYMM"));return 0<n?1:0===n?0:-1}function H(e,t){var n=parseInt(Z(e).format("YYYYMMDD"))-parseInt(Z(t).format("YYYYMMDD"));return 0<n?1:0===n?0:-1}function E(e){return Z(e).add(1,"months").toDate()}function A(e){return Z(e).add(-1,"months").toDate()}function $(){var e=f.showWeekNumbers?"<th>"+U("week-number")+"</th>":"";return"monday"==f.startOfWeek?e+"<th>"+U("week-1")+"</th><th>"+U("week-2")+"</th><th>"+U("week-3")+"</th><th>"+U("week-4")+"</th><th>"+U("week-5")+"</th><th>"+U("week-6")+"</th><th>"+U("week-7")+"</th>":e+"<th>"+U("week-7")+"</th><th>"+U("week-1")+"</th><th>"+U("week-2")+"</th><th>"+U("week-3")+"</th><th>"+U("week-4")+"</th><th>"+U("week-5")+"</th><th>"+U("week-6")+"</th>"}function F(e){return e=Z(e),!(!f.startDate||!e.endOf("month").isBefore(f.startDate))||!(!f.endDate||!e.startOf("month").isAfter(f.endDate))}function Y(e,t,i){var a=q.extend(!0,{},e);q.each(t,function(e,t){var n=t(i);for(var o in n)a.hasOwnProperty(o)?a[o]+=n[o]:a[o]=n[o]});var n="";for(var o in a)a.hasOwnProperty(o)&&(n+=o+'="'+a[o]+'" ');return n}function V(e){return Math.floor(function(e){Z.isMoment(e)&&(e=e.toDate().getTime());"object"==typeof e&&e.getTime&&(e=e.getTime());"string"!=typeof e||e.match(/\d{13}/)||(e=Z(e,f.format).toDate().getTime());return e=parseInt(e,10)-60*(new Date).getTimezoneOffset()*1e3}(e)/864e5)}function B(e,t){return f.showDateFilter&&"function"==typeof f.showDateFilter?f.showDateFilter(e,t):t}function U(e){var t=e.toLowerCase(),n=e in i?i[e]:t in i?i[t]:null,o=q.dateRangePickerLanguages.default;return null==n&&(n=e in o?o[e]:t in o?o[t]:""),n}function j(){var e=f.defaultTime?f.defaultTime:new Date;return f.lookBehind?(f.startDate&&P(e,f.startDate)<0&&(e=E(Z(f.startDate).toDate())),f.endDate&&0<P(e,f.endDate)&&(e=Z(f.endDate).toDate())):(f.startDate&&P(e,f.startDate)<0&&(e=Z(f.startDate).toDate()),f.endDate&&0<P(E(e),f.endDate)&&(e=A(Z(f.endDate).toDate()))),f.singleDate&&(f.startDate&&P(e,f.startDate)<0&&(e=Z(f.startDate).toDate()),f.endDate&&0<P(e,f.endDate)&&(e=Z(f.endDate).toDate())),e}function N(e){e||(e=j()),f.lookBehind?(I(A(e),"month1"),I(e,"month2")):(I(e,"month1"),I(E(e),"month2")),f.singleDate&&I(e,"month1"),_(),O()}}}),angular.module("SER.utils",[]);var KEYS={up:38,down:40,left:37,right:39,escape:27,enter:13,backspace:8,delete:46,shift:16,leftCmd:91,rightCmd:93,ctrl:17,alt:18,tab:9};function getStyles(e){return e instanceof HTMLElement?e.ownerDocument&&e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e):window.getComputedStyle(e):{}}function arrayGroupBy(e,t){for(var n={},o=0;o<e.length;++o)void 0===n[e[o][t]]&&(n[e[o][t]]=[]),n[e[o][t]].push(e[o]);return n}function hasValue(e){return angular.isArray(e)?0<e.length:!!angular.isDate(e)||(angular.isObject(e)?!angular.element.isEmptyObject(e):-1===["",null,void 0,NaN].indexOf(e))}function notValue(e){return angular.isArray(e)?0===e.length:!angular.isDate(e)&&(angular.isObject(e)?angular.element.isEmptyObject(e):-1<["",null,void 0,NaN].indexOf(e))}function hasProperty(e,t){return!!e&&e.hasOwnProperty(t)}function inArray(e,t){return!!t&&-1!==t.indexOf(e)}function notInArray(e,t){return!!t&&-1===t.indexOf(e)}function getObjectByValue(e,t,n){for(var o=0;o<e.length;o++)if(e[o].hasOwnProperty(t)){if(e[o][t]===n)return e[o];for(var i in e[o][t])if(e[o][t][i]===n)return e[o]}}function getObjIndexByValue(e,t,n){for(var o=0;o<e.length;o++)if(e[o].hasOwnProperty(t)){if(e[o][t]===n)return e[o];for(var i in e[o][t])if(e[o][t][i]===n)return o}}function browserWidth(){return 0<window.innerWidth?window.innerWidth:screen.width}function hasPdfViewer(){for(var e=0;e<window.navigator.plugins.length;e++)if(-1<window.navigator.plugins[e].name.toLowerCase().indexOf("pdf"))return!0;return!1}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function hasFiles(e){var t,n=!1;for(var o in e)if(null!=(t=e[o])&&(t instanceof window.Blob||t.flashId&&t.name&&t.size)){n=!0;break}return n}function guid(){return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()}function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}if(window.onbeforeprint=function(){console.log("Functionality to run before printing: ",window.location.href)},window.onafterprint=function(){console.log("Functionality to run after printing: ",window.location.href)},window.matchMedia){var mediaQueryList=window.matchMedia("print");mediaQueryList.addListener(function(e){e.matches?window.onbeforeprint():window.onafterprint()})}function getLogo(e,t){if("string"==typeof e)switch(e.toLowerCase().replace(/[0-9\. ]*/g,"")){case"chrome":case"chromium":return AWS_S3_URL+"images/logos/chrome.svg";case"edge":return AWS_S3_URL+"images/logos/edge.svg";case"firefox":return AWS_S3_URL+"images/logos/firefox.svg";case"ie":case"iemobile":return AWS_S3_URL+"images/logos/ie.svg";case"opera":return AWS_S3_URL+"images/logos/opera.svg";case"safari":case"mobilesafari":return AWS_S3_URL+"images/logos/safari.svg";case"webkit":return AWS_S3_URL+"images/logos/webkit.svg";case"android":return AWS_S3_URL+"images/logos/android.svg";case"ios":case"macos":return AWS_S3_URL+"images/logos/apple.svg";case"debian":return AWS_S3_URL+"images/logos/debian.svg";case"linux":return AWS_S3_URL+"images/logos/linux.svg";case"ubuntu":return AWS_S3_URL+"images/logos/ubuntu.svg";case"windows":switch(t.toLowerCase()){case"xp":case"7":return AWS_S3_URL+"images/logos/windows-xp.svg";case"8":case"8.1":case"10":return AWS_S3_URL+"images/logos/windows.svg"}break;case"windowsphone":return AWS_S3_URL+"images/logos/windows-phone.svg"}}function deleteAllCookies(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var n=e[t],o=n.indexOf("="),i=-1<o?n.substr(0,o):n;document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}}bowser&&$("body").addClass("bos-"+bowser.osname.replace(/ /g,"")+" bosv-"+bowser.osversion.replace(/ /g,"")+" bn-"+bowser.name.replace(/ /g,"")+" bv-"+bowser.version.replace(/ /g,"")),function(e){var t=!1;if("function"==typeof define&&define.amd&&(define(e),t=!0),"object"==typeof exports&&(module.exports=e(),t=!0),!t){var n=window.Cookies,o=window.Cookies=e();o.noConflict=function(){return window.Cookies=n,o}}}(function(){function f(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]=n[o]}return t}return function e(p){function g(e,t,n){var o;if("undefined"!=typeof document){if(1<arguments.length){if("number"==typeof(n=f({path:"/"},g.defaults,n)).expires){var i=new Date;i.setMilliseconds(i.getMilliseconds()+864e5*n.expires),n.expires=i}n.expires=n.expires?n.expires.toUTCString():"";try{o=JSON.stringify(t),/^[\{\[]/.test(o)&&(t=o)}catch(e){}t=p.write?p.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var a="";for(var r in n)n[r]&&(a+="; "+r,!0!==n[r]&&(a+="="+n[r]));return document.cookie=e+"="+t+a}e||(o={});for(var s=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,d=0;d<s.length;d++){var u=s[d].split("="),c=u.slice(1).join("=");'"'===c.charAt(0)&&(c=c.slice(1,-1));try{var h=u[0].replace(l,decodeURIComponent);if(c=p.read?p.read(c,h):p(c,h)||c.replace(l,decodeURIComponent),this.json)try{c=JSON.parse(c)}catch(e){}if(e===h){o=c;break}e||(o[h]=c)}catch(e){}}return o}}return(g.set=g).get=function(e){return g.call(g,e)},g.getJSON=function(){return g.apply({json:!0},[].slice.call(arguments))},g.defaults={},g.remove=function(e,t){g(e,"",f(t,{expires:-1}))},g.withConverter=e,g}(function(){})}),angular.module("SER.auth",[]),angular.module("SER.auth").value("userPermissions",[]),angular.module("SER.auth").value("isSuperuser",!1),angular.module("SER.auth").value("url403",""),angular.module("SER.auth").service("permissionService",["userPermissions","isSuperuser",function(n,o){return{hasPermission:function(e){return!!o||!notValue(e)&&-1!==n.indexOf(e)},atLeastPermissions:function(e){if(o)return!0;if(hasValue(e)){for(var t=0;t<e.length;t++)if(inArray(e[t],n))return!0;return!1}return!0},hasPermissions:function(e){if(o)return!0;for(var t=0;t<e.length;t++)if(notInArray(e[t],n))return!1;return!0}}}]),angular.module("SER.chip",[]),angular.module("SER.chip").directive("serChips",["$document",function(e){return{restrict:"E",scope:{model:"=",pattern:"=?"},link:function(t,e,n,o){var i=t.pattern?new RegExp(t.pattern):new RegExp(/^[\w\d].*$/),a=(e.find("input.chip-input"),e.find("select").controller("ngModel"));notValue(t.model)?(t.model=[],t.selectedValue=[]):(a.$setViewValue(t.model),a.$setDirty(!0)),t.addChip=function(){notValue(t.model)&&(t.model=[]),t.chipInput&&(notInArray(t.chipInput,t.model)&&i.test(t.chipInput)&&(t.model.push(t.chipInput),a.$setViewValue(t.model),a.$validate(),a.$setDirty(!0)),t.chipInput=null)},t.removeChip=function(e){t.model.splice(e,1),a.$setViewValue(t.model),a.$validate()},t.setFocus=function(){e.addClass("ng-focused"),e.removeClass("ng-blur")},t.setBlur=function(){e.addClass("ng-blur"),e.removeClass("ng-focused"),t.addChip()},t.checkKeypress=function(e){switch(e.keyCode){case KEYS.backspace:notValue(t.chipInput)&&hasValue(t.model)&&t.removeChip(t.model.length-1);break;case KEYS.enter:t.addChip()}}},template:function(e,t){var n="";return t.name&&(n='name="'+t.name+'"'),'<div class="chip" ng-repeat="chip in model track by $index">{{chip}}<md-icon class="remove" ng-click="removeChip($index)">close</md-icon></div>                 <input class="chip-input not-styled s-flex" ng-model="chipInput" ng-keydown="checkKeypress($event)" ng-focus="setFocus()" ng-blur="setBlur()" />                 <select '+n+' style="display: none;" multiple ng-model="selectedValue" '+("required"in t?"required":"")+" ></select>"}}}]),angular.module("SER.search",[]),angular.module("SER.search").directive("serAutocomplete",["$http","$timeout",function(u,c){return{restrict:"E",scope:{ngModel:"=",remoteUrl:"=",keywordField:"@",ngRequired:"=?",ngDisabled:"=?",selectItem:"&?",dropdownClass:"@?"},link:function(t,n,e,o,i){var a,r=angular.element(n[0].querySelector(".ser-autocomplete-results")),s=n.parents(),l="autocomplete-results-"+Math.round(1e6*Math.random());r.attr("id",l),r.detach(),t.results=[],t.isFetching=!1,t.selectInternalItem=function(e){angular.isFunction(t.selectItem)&&t.selectItem({newValue:e}),hasValue(t.keywordField)&&(t.ngModel=e[t.keywordField]),t.close()};var d=function(){var e=n[0],t={top:"",bottom:"",left:e.getBoundingClientRect().left+"px",width:e.offsetWidth+"px"};220<=angular.element(document.body).height()-(e.offsetHeight+e.getBoundingClientRect().top)?(t.top=e.offsetHeight+e.getBoundingClientRect().top,r.removeClass("ontop")):(t.bottom=angular.element(document.body).height()-e.getBoundingClientRect().top,r.addClass("ontop")),r.css(t)};t.showDropdown=function(){d(),angular.element(document.body).append(r),c(function(){angular.element(window).triggerHandler("resize")},50)},t.open=function(){t.isOpen=!0,t.showDropdown()},t.close=function(){t.isOpen=!1,r.detach()},s.each(function(e,t){angular.element(t).on("scroll."+l,function(e){d()})});angular.element(n[0].querySelector(".ser-autocomplete-wrapper input")).on("focus",function(){hasValue(t.results)&&c(function(){t.open()})}).on("blur",function(){t.close()}).on("keyup",function(e){a&&clearTimeout(a),a=setTimeout(function(){t.$apply(function(){t.isFetching=!0,t.results=[],t.close(),t.ngModel?u.get(t.remoteUrl+t.ngModel).then(function(e){t.results=e.data,t.isFetching=!1,hasValue(t.results)&&t.open()}):(t.isFetching=!1,t.close())})},500)}),r.on("mousedown",function(e){e.preventDefault()})},template:function(e,t){return'<div class="ser-autocomplete-wrapper" ng-class="{open: isOpen}"><div class="input-group">'+((o=e.find("addon").detach()).length?'<span class="addon">'+o.html()+"</span>":"")+'<input placeholder="{{placeholder}}" '+(t.name?'name="'+t.name+'"':"")+' ng-model="ngModel" '+(t.disabled?"disabled":'ng-disabled="ngDisabled"')+' ng-focus="ngFocus" ng-blur="searchBlur()" '+(t.required?"required":'ng-required="ngRequired"')+' /></div><div class="fetching line-loader" ng-show="isFetching"></div><ul md-virtual-repeat-container md-auto-shrink md-top-index="highlighted" class="ser-autocomplete-results '+t.dropdownClass+'"><li class="item" md-virtual-repeat="item in results" '+(t.mdItemSize?'md-item-size="'+t.mdItemSize+'"':"")+' ng-click="selectInternalItem(item)">'+((n=e.find("ser-item-template").detach()).length?n.html():e.html())+"</li></ul></div>";var n,o}}}]),angular.module("SER.datepicker",[]),angular.module("SER.datepicker").directive("weekDay",function(){return{restrict:"E",require:["ngModel"],scope:{ngModel:"="},link:function(t,e,n,o){t.toggleDay=function(e){"multiple"in n?(notValue(t.ngModel)&&(t.ngModel=[]),notInArray(e,t.ngModel)?t.ngModel.push(e):t.ngModel.splice(t.ngModel.indexOf(e),1)):t.ngModel=e!==t.ngModel?e:null},t.isSet=function(e){return"multiple"in n?inArray(e,t.ngModel):e===t.ngModel}},template:function(){return'<div class="wrapper"><div class="day" ng-click="toggleDay(1)" ng-class="{active: isSet(1)}">'+__("LUN")+'</div><div class="day" ng-click="toggleDay(2)" ng-class="{active: isSet(2)}">'+__("MAR")+'</div><div class="day" ng-click="toggleDay(3)" ng-class="{active: isSet(3)}">'+__("MIE")+'</div><div class="day" ng-click="toggleDay(4)" ng-class="{active: isSet(4)}">'+__("JUE")+'</div><div class="day" ng-click="toggleDay(5)" ng-class="{active: isSet(5)}">'+__("VIE")+'</div><div class="day" ng-click="toggleDay(6)" ng-class="{active: isSet(6)}">'+__("SAB")+'</div><div class="day" ng-click="toggleDay(7)" ng-class="{active: isSet(7)}">'+__("DOM")+"</div></div>"}}}),angular.module("SER.datepicker").directive("serDate",["$filter",function(e){return{restrict:"E",require:["ngModel"],scope:{ngModel:"=",config:"="},controller:["$scope",function(e){e.placeholder=__("select_date"),e.clear=function(){e.ngModel=null}}],link:function(n,o){o.find(".value-wrapper").tooltipster({content:o.find(".picker-wrapper"),delay:0,positionTracker:!0,trigger:"click",theme:"tooltipster-borderless",position:"bottom",interactive:!0});var i=o.find(".date-wrapper").dateRangePicker({inline:!0,container:o.find(".date-wrapper"),alwaysOpen:!0,language:"es",singleDate:!0,singleMonth:!0}).bind("datepicker-change",function(e,t){n.$apply(function(){n.ngModel=t.date1}),o.find(".value-wrapper").tooltipster("close")}).bind("datepicker-next-month-finish-clicked",function(e){o.find(".value-wrapper").tooltipster("reposition")}).bind("datepicker-prev-month-finish-clicked",function(e){o.find(".value-wrapper").tooltipster("reposition")});n.ngModel&&i.data("dateRangePicker").setStart(n.ngModel,!0),n.$watch("ngModel",function(e,t){e&&e!=t&&i.data("dateRangePicker").setStart(e,!0)},!0)},template:function(e,t){return'<div class="ser-date-wrapper" ng-class="{open: open, \'has-value\': blur}"><div ng-class="{\'bttn-group\': ngModel}" class="row center-center"><button type="button" class="bttn value-wrapper">{{ (ngModel | date: \'longDate\') || placeholder }}</button><button type="button" ng-show="ngModel" class="bttn clear" ng-click="clear()">×</button></div><div class="tooltip-templates"><div class="picker-wrapper"><div class="date-wrapper"></div></div></div></div>'}}}]),angular.module("SER.datepicker").directive("serDateRange",["$filter",function(a){return{restrict:"E",require:["ngModel"],scope:{ngModel:"=",config:"="},controller:["$scope",function(e){e.placeholder=__("select_date_range"),e.clear=function(){e.ngModel=null,e.placeholder=__("select_date_range")}}],link:function(n,o){o.find(".value-wrapper").tooltipster({content:o.find(".picker-wrapper"),delay:0,positionTracker:!0,trigger:"click",theme:"tooltipster-borderless",position:"bottom",interactive:!0});var i=o.find(".date-wrapper").dateRangePicker({inline:!0,container:o.find(".date-wrapper"),alwaysOpen:!0,language:"es"}).bind("datepicker-change",function(e,t){n.$apply(function(){t.date1.setHours(0,0,0,0),t.date2.setHours(23,59,59,0),n.ngModel={FromDate:t.date1,ToDate:t.date2},n.placeholder=a("date")(t.date1,"longDate")+" - "+a("date")(t.date2,"longDate")}),o.find(".value-wrapper").tooltipster("close")}).bind("datepicker-next-month-finish-clicked",function(e){o.find(".value-wrapper").tooltipster("reposition")}).bind("datepicker-prev-month-finish-clicked",function(e){o.find(".value-wrapper").tooltipster("reposition")});n.ngModel&&n.ngModel.FromDate&&n.ngModel.ToDate&&(i.data("dateRangePicker").setStart(n.ngModel.FromDate,!0),i.data("dateRangePicker").setEnd(n.ngModel.ToDate,!0),n.placeholder=a("date")(n.ngModel.FromDate,"longDate")+" - "+a("date")(n.ngModel.ToDate,"longDate")),n.$watch("ngModel",function(e,t){hasValue(e)&&hasValue(e.FromDate)&&hasValue(e.ToDate)&&(n.placeholder=a("date")(e.FromDate,"longDate")+" - "+a("date")(e.ToDate,"longDate"),i.data("dateRangePicker").setStart(n.ngModel.FromDate,!0),i.data("dateRangePicker").setEnd(n.ngModel.ToDate,!0))},!0)},template:function(e,t){return'<div class="ser-date-wrapper" ng-class="{open: open, \'has-value\': blur}"><div ng-class="{\'bttn-group\': ngModel}" class="row center-center"><button type="button" class="bttn value-wrapper">{{ placeholder }}</button><button type="button" ng-show="ngModel" class="bttn clear" ng-click="clear()">×</button></div><div class="tooltip-templates"><div class="picker-wrapper"><div class="date-wrapper"></div></div></div></div>'}}}]),angular.module("SER.filters",[]),angular.module("SER.filters").filter("PascalCase",[function(){return function(e){return e.replace(/([A-Z]+)([A-Z])/g," $1 $2").replace(/([a-z\d])([A-Z])/g,"$1 $2").replace(/([a-zA-Z])(\d)/g,"$1 $2").replace(/^./,function(e){return e.toUpperCase()}).trim()}}]),angular.module("SER.filters").filter("getItem",["$filter",function(a){return function(e,t,n){var o={};o[n]=e;var i;return hasValue(i=a("filter")(t,o,!0))&&0<i.length?i[0]:null}}]),angular.module("SER.filters").filter("minutesTime",[function(){return function(e,t){var n=parseInt(e/60,10);return(!t&&12<n?24===n?"00":(n-12<10?"0":"")+(n-12):(n<10?"0":"")+n)+":"+(e-60*n<10?"0"+(e-60*n):e-60*n)+(t?":00":12<=n&&24!==n?" pm":" am")}}]),angular.module("SER.filters").filter("timeMinutes",[function(){return function(e){return 60*parseInt(e.split(":")[0])+parseInt(e.split(":")[1])}}]),angular.module("SER.filters").filter("leadingChar",function(){return function(e,t,n){return n=n||"0",hasValue(e)?(e+="").length>=t?e:new Array(t-e.length+1).join(n)+e:""}}),angular.module("SER.fullscreen",[]),angular.module("SER.fullscreen").factory("Fullscreen",["$document","$rootScope",function(e,t){var n=e[0],o="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element&&Element.ALLOW_KEYBOARD_INPUT,i=t.$new();e.on("fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange",function(){i.$emit("SERFullscreen.change",a.isEnabled())});var a={$on:angular.bind(i,i.$on),all:function(){a.enable(n.documentElement)},enable:function(e){e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?/Version\/[\d]{1,2}(\.[\d]{1,2}){1}(\.(\d){1,2}){0,1} Safari/.test(navigator.userAgent)?e.webkitRequestFullscreen():e.webkitRequestFullscreen(o):e.msRequestFullscreen&&e.msRequestFullscreen()},cancel:function(){n.cancelFullScreen?n.cancelFullScreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.webkitExitFullscreen?n.webkitExitFullscreen():n.msExitFullscreen&&n.msExitFullscreen()},isEnabled:function(){return!!(n.fullscreenElement||n.mozFullScreenElement||n.webkitFullscreenElement||n.msFullscreenElement)},toggleAll:function(){a.isEnabled()?a.cancel():a.all()},isSupported:function(){var e=n.documentElement;return!!(e.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullscreen||e.msRequestFullscreen)}};return a}]),angular.module("SER.fullscreen").directive("fullscreen",["Fullscreen",function(a){return{link:function(n,o,i){if(i.fullscreen){n.$watch(i.fullscreen,function(e){var t=a.isEnabled();e&&!t?(a.enable(o[0]),o.addClass("isInFullScreen")):!e&&t&&(a.cancel(),o.removeClass("isInFullScreen"))});var e=a.$on("SERFullscreen.change",function(e,t){t||n.$evalAsync(function(){n.$eval(i.fullscreen+"= false"),o.removeClass("isInFullScreen")})});n.$on("$destroy",function(){e()})}else{if(void 0!==i.onlyWatchedProperty)return;o.on("click",function(e){a.enable(o[0])})}}}}]),angular.module("SER.Clipboard",[]),angular.module("SER.Clipboard").service("CopyToClipboard",["$window",function(e){var o=angular.element(e.document.body),i=angular.element("<textarea/>");return i.css({position:"fixed",opacity:"0"}),function(t,e){i.val(t),o.append(i),i[0].select();try{var n=document.execCommand("copy");if(!n)throw n;e&&alert(__("copy_success_clipboard"))}catch(e){window.prompt("Copy to clipboard: Ctrl+C, Enter",t)}i.remove()}}]),angular.module("SER.Clipboard").directive("serClickCopy",["CopyToClipboard",function(o){return{restrict:"A",link:function(e,t,n){t.bind("click",function(e){o(n.serClickCopy,!0)})}}}]);var i18n={__DICT:void 0,loadJSON:function(e){this.__DICT=e},__:function(e){if(void 0!==this.__DICT)return e in this.__DICT?this.__DICT[e]:(console.warn("Locale not found for: "+e),e);console.error("Locale JSON file not loaded | Locale not found for: "+e)}},__=function(e){return i18n.__(e)};angular.module("SER.i18n",[]),angular.module("SER.i18n").filter("translate",function(){return function(e){return i18n.__(e)}}),angular.module("SER.image",[]),angular.module("SER.image").directive("exifData",["Upload","$filter","afterPromises",function(a,r,s){return{restrict:"A",link:function(e,t,n){var o='<div class="exif">',i=new s(2,function(){o+="</div>",t.after(o)});t.on("load",function(e){o+="<div><strong>"+__("dimensions")+": </strong>"+e.target.naturalWidth+"x"+e.target.naturalHeight+"</div>",i.notify()}),a.urlToBlob(n.src).then(function(e){o+="<div><strong>"+__("size")+": </strong>"+r("byteFmt")(e.size,0)+"</div><div><strong>"+__("type")+": </strong>"+e.type+"</div>",i.notify()},function(){i.notify()})}}}]),angular.module("SER.image").directive("callbackImage",function(){return{restrict:"A",link:function(e,t,n){t.on("dragstart",function(e){e.preventDefault()}),t.bind("error",function(){t[0].src=n.callbackImage})}}}),angular.module("SER.image").directive("retryGetImage",function(){return{restrict:"A",scope:{retryGetImage:"@",fallbackRetry:"="},link:function(t,n,e){var o;t.$watch("retryGetImage",function(e){clearTimeout(o),n.unbind("load"),n.unbind("error"),n[0].src=e,n.addClass("hidden"),n.bind("load",function(){n.removeClass("hidden"),t.fallbackRetry=!1,clearTimeout(o),t.$apply()}),n.bind("error",function(){t.fallbackRetry=!0,o=setTimeout(function(){n[0].src=t.retryGetImage},5e3)})})}}}),angular.module("SER.image").directive("imgZoom",["$timeout",function(i){return{restrict:"E",scope:{image:"=",options:"="},link:function(e,t,n){t.find(".target").on("load",function(){t.find(".loader").addClass("ng-hide")}),t.find(".target").on("error",function(){t.find(".loader").addClass("ng-hide"),e.zoomReset()}),e.size="auto";var o={"max-height":"none"};angular.merge(o,e.options),e.zoomIn=function(){e.size=1.1*t.find(".target").width(),t.find(".target").css({"max-height":"none",height:"auto"})},e.zoomOut=function(){e.size=t.find(".target").width()/1.1,t.find(".target").css({"max-height":"none",height:"auto"})},e.zoomReset=function(){e.size="auto",t.find(".target").css({"max-height":o["max-height"],height:"auto"})},e.zoomExpand=function(){e.size="auto",t.find(".target").css({"max-height":o["max-height"],height:t.height()-2})},i(function(){e.zoomExpand()},500)},template:function(){return'<div class="controls"><button class="bttn icon" ng-click="zoomOut()"><i class="icon-zoom-out"></i></button><button class="bttn icon" ng-click="zoomReset()"><i class="icon-zoom-actual"></i></button><button class="bttn icon" ng-click="zoomExpand()"><i class="icon-zoom-expand"></i></button><button class="bttn icon" ng-click="zoomIn()"><i class="icon-zoom-in"></i></button></div><div class="loader dots">'+__("loading")+'</div><img class="target" ng-src="{{ image }}" ng-style="{width: size}" callback-image="/images/'+__("no_image_available.svg")+'" />'}}}]),angular.module("SER.image").directive("zoomImage",function(){return{restrict:"A",link:function(e,t,n){var o={responsive:!0,loadingIcon:!0,tint:!0,scrollZoom:!0,zoomWindowWidth:150,zoomWindowHeight:150,imageSrc:n.ngSrc};angular.merge(o,e.$eval(n.zoomImage)),t.elevateZoom(o)}}}),angular.module("SER.image").factory("cropAreaCircle",["cropArea",function(e){var t=function(){e.apply(this,arguments),this._boxResizeBaseSize=20,this._boxResizeNormalRatio=.9,this._boxResizeHoverRatio=1.2,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._boxResizeNormalSize=this._boxResizeBaseSize*this._boxResizeNormalRatio,this._boxResizeHoverSize=this._boxResizeBaseSize*this._boxResizeHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize=0,this._boxResizeIsHover=!1,this._areaIsHover=!1,this._boxResizeIsDragging=!1,this._areaIsDragging=!1};return(t.prototype=new e)._calcCirclePerimeterCoords=function(e){var t=this._size/2,n=e*(Math.PI/180);return[this._x+t*Math.cos(n),this._y+t*Math.sin(n)]},t.prototype._calcResizeIconCenterCoords=function(){return this._calcCirclePerimeterCoords(-45)},t.prototype._isCoordWithinArea=function(e){return Math.sqrt((e[0]-this._x)*(e[0]-this._x)+(e[1]-this._y)*(e[1]-this._y))<this._size/2},t.prototype._isCoordWithinBoxResize=function(e){var t=this._calcResizeIconCenterCoords(),n=this._boxResizeHoverSize/2;return e[0]>t[0]-n&&e[0]<t[0]+n&&e[1]>t[1]-n&&e[1]<t[1]+n},t.prototype._drawArea=function(e,t,n){e.arc(t[0],t[1],n/2,0,2*Math.PI)},t.prototype.draw=function(){e.prototype.draw.apply(this,arguments),this._cropCanvas.drawIconMove([this._x,this._y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio),this._cropCanvas.drawIconResizeBoxNESW(this._calcResizeIconCenterCoords(),this._boxResizeBaseSize,this._boxResizeIsHover?this._boxResizeHoverRatio:this._boxResizeNormalRatio)},t.prototype.processMouseMove=function(e,t){var n="default",o=!1;if(this._boxResizeIsHover=!1,this._areaIsHover=!1,this._areaIsDragging)this._x=e-this._posDragStartX,this._y=t-this._posDragStartY,n="move",o=this._areaIsHover=!0,this._events.trigger("area-move");else if(this._boxResizeIsDragging){var i,a,r;n="nesw-resize",a=e-this._posResizeStartX,i=(r=this._posResizeStartY-t)<a?this._posResizeStartSize+2*r:this._posResizeStartSize+2*a,this._size=Math.max(this._minSize,i),o=this._boxResizeIsHover=!0,this._events.trigger("area-resize")}else this._isCoordWithinBoxResize([e,t])?(n="nesw-resize",this._areaIsHover=!1,o=this._boxResizeIsHover=!0):this._isCoordWithinArea([e,t])&&(n="move",o=this._areaIsHover=!0);return this._dontDragOutside(),angular.element(this._ctx.canvas).css({cursor:n}),o},t.prototype.processMouseDown=function(e,t){this._isCoordWithinBoxResize([e,t])?(this._areaIsDragging=!1,this._areaIsHover=!1,this._boxResizeIsDragging=!0,this._boxResizeIsHover=!0,this._posResizeStartX=e,this._posResizeStartY=t,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start")):this._isCoordWithinArea([e,t])&&(this._areaIsDragging=!0,this._areaIsHover=!0,this._boxResizeIsDragging=!1,this._boxResizeIsHover=!1,this._posDragStartX=e-this._x,this._posDragStartY=t-this._y,this._events.trigger("area-move-start"))},t.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end")),this._boxResizeIsDragging&&(this._boxResizeIsDragging=!1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._boxResizeIsHover=!1,this._posDragStartX=0,this._posDragStartY=0},t}]),angular.module("SER.image").factory("cropAreaSquare",["cropArea",function(i){var e=function(){i.apply(this,arguments),this._resizeCtrlBaseRadius=10,this._resizeCtrlNormalRatio=.75,this._resizeCtrlHoverRatio=1,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._resizeCtrlNormalRadius=this._resizeCtrlBaseRadius*this._resizeCtrlNormalRatio,this._resizeCtrlHoverRadius=this._resizeCtrlBaseRadius*this._resizeCtrlHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize=0,this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._resizeCtrlIsDragging=-1,this._areaIsDragging=!1};return(e.prototype=new i)._calcSquareCorners=function(){var e=this._size/2;return[[this._x-e,this._y-e],[this._x+e,this._y-e],[this._x-e,this._y+e],[this._x+e,this._y+e]]},e.prototype._calcSquareDimensions=function(){var e=this._size/2;return{left:this._x-e,top:this._y-e,right:this._x+e,bottom:this._y+e}},e.prototype._isCoordWithinArea=function(e){var t=this._calcSquareDimensions();return e[0]>=t.left&&e[0]<=t.right&&e[1]>=t.top&&e[1]<=t.bottom},e.prototype._isCoordWithinResizeCtrl=function(e){for(var t=this._calcSquareCorners(),n=-1,o=0,i=t.length;o<i;o++){var a=t[o];if(e[0]>a[0]-this._resizeCtrlHoverRadius&&e[0]<a[0]+this._resizeCtrlHoverRadius&&e[1]>a[1]-this._resizeCtrlHoverRadius&&e[1]<a[1]+this._resizeCtrlHoverRadius){n=o;break}}return n},e.prototype._drawArea=function(e,t,n){var o=n/2;e.rect(t[0]-o,t[1]-o,n,n)},e.prototype.draw=function(){i.prototype.draw.apply(this,arguments),this._cropCanvas.drawIconMove([this._x,this._y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio);for(var e=this._calcSquareCorners(),t=0,n=e.length;t<n;t++){var o=e[t];this._cropCanvas.drawIconResizeCircle(o,this._resizeCtrlBaseRadius,this._resizeCtrlIsHover===t?this._resizeCtrlHoverRatio:this._resizeCtrlNormalRatio)}},e.prototype.processMouseMove=function(e,t){var n="default",o=!1;if(this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._areaIsDragging)this._x=e-this._posDragStartX,this._y=t-this._posDragStartY,n="move",o=this._areaIsHover=!0,this._events.trigger("area-move");else if(-1<this._resizeCtrlIsDragging){var i,a;switch(this._resizeCtrlIsDragging){case 0:a=i=-1,n="nwse-resize";break;case 1:a=-(i=1),n="nesw-resize";break;case 2:i=-1,a=1,n="nesw-resize";break;case 3:a=i=1,n="nwse-resize"}var r,s=(e-this._posResizeStartX)*i,l=(t-this._posResizeStartY)*a;r=l<s?this._posResizeStartSize+l:this._posResizeStartSize+s;var d=this._size;this._size=Math.max(this._minSize,r);var u=(this._size-d)/2;this._x+=u*i,this._y+=u*a,this._resizeCtrlIsHover=this._resizeCtrlIsDragging,o=!0,this._events.trigger("area-resize")}else{var c=this._isCoordWithinResizeCtrl([e,t]);if(-1<c){switch(c){case 0:n="nwse-resize";break;case 1:case 2:n="nesw-resize";break;case 3:n="nwse-resize"}this._areaIsHover=!1,this._resizeCtrlIsHover=c,o=!0}else this._isCoordWithinArea([e,t])&&(n="move",o=this._areaIsHover=!0)}return this._dontDragOutside(),angular.element(this._ctx.canvas).css({cursor:n}),o},e.prototype.processMouseDown=function(e,t){var n=this._isCoordWithinResizeCtrl([e,t]);-1<n?(this._areaIsDragging=!1,this._areaIsHover=!1,this._resizeCtrlIsDragging=n,this._resizeCtrlIsHover=n,this._posResizeStartX=e,this._posResizeStartY=t,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start")):this._isCoordWithinArea([e,t])&&(this._areaIsDragging=!0,this._areaIsHover=!0,this._resizeCtrlIsDragging=-1,this._resizeCtrlIsHover=-1,this._posDragStartX=e-this._x,this._posDragStartY=t-this._y,this._events.trigger("area-move-start"))},e.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end")),-1<this._resizeCtrlIsDragging&&(this._resizeCtrlIsDragging=-1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._resizeCtrlIsHover=-1,this._posDragStartX=0,this._posDragStartY=0},e}]),angular.module("SER.image").factory("cropArea",["cropCanvas",function(n){var e=function(e,t){this._ctx=e,this._events=t,this._minSize=80,this._cropCanvas=new n(e),this._image=new Image,this._x=0,this._y=0,this._size=200};return e.prototype.getImage=function(){return this._image},e.prototype.setImage=function(e){this._image=e},e.prototype.getX=function(){return this._x},e.prototype.setX=function(e){this._x=e,this._dontDragOutside()},e.prototype.getY=function(){return this._y},e.prototype.setY=function(e){this._y=e,this._dontDragOutside()},e.prototype.getSize=function(){return this._size},e.prototype.setSize=function(e){this._size=Math.max(this._minSize,e),this._dontDragOutside()},e.prototype.getMinSize=function(){return this._minSize},e.prototype.setMinSize=function(e){this._minSize=e,this._size=Math.max(this._minSize,this._size),this._dontDragOutside()},e.prototype._dontDragOutside=function(){var e=this._ctx.canvas.height,t=this._ctx.canvas.width;this._size>t&&(this._size=t),this._size>e&&(this._size=e),this._x<this._size/2&&(this._x=this._size/2),this._x>t-this._size/2&&(this._x=t-this._size/2),this._y<this._size/2&&(this._y=this._size/2),this._y>e-this._size/2&&(this._y=e-this._size/2)},e.prototype._drawArea=function(){},e.prototype.draw=function(){this._cropCanvas.drawCropArea(this._image,[this._x,this._y],this._size,this._drawArea)},e.prototype.processMouseMove=function(){},e.prototype.processMouseDown=function(){},e.prototype.processMouseUp=function(){},e}]),angular.module("SER.image").factory("cropCanvas",[function(){var i=[[-.5,-2],[-3,-4.5],[-.5,-7],[-7,-7],[-7,-.5],[-4.5,-3],[-2,-.5]],a=[[.5,-2],[3,-4.5],[.5,-7],[7,-7],[7,-.5],[4.5,-3],[2,-.5]],r=[[-.5,2],[-3,4.5],[-.5,7],[-7,7],[-7,.5],[-4.5,3],[-2,.5]],d=[[.5,2],[3,4.5],[.5,7],[7,7],[7,.5],[4.5,3],[2,.5]],n=[[-1.5,-2.5],[-1.5,-6],[-5,-6],[0,-11],[5,-6],[1.5,-6],[1.5,-2.5]],u=[[-2.5,-1.5],[-6,-1.5],[-6,-5],[-11,0],[-6,5],[-6,1.5],[-2.5,1.5]],c=[[-1.5,2.5],[-1.5,6],[-5,6],[0,11],[5,6],[1.5,6],[1.5,2.5]],h=[[2.5,-1.5],[6,-1.5],[6,-5],[11,0],[6,5],[6,1.5],[2.5,1.5]],p="#fff",g="#fff",f="#444",m="#fff",w="#fff",v="#444",z="#fff";return function(l){var s=function(e,t,n){return[n*e[0]+t[0],n*e[1]+t[1]]},o=function(e,t,n,o){l.save(),l.fillStyle=t,l.beginPath();var i,a=s(e[0],n,o);for(var r in l.moveTo(a[0],a[1]),e)0<r&&(i=s(e[r],n,o),l.lineTo(i[0],i[1]));l.lineTo(a[0],a[1]),l.fill(),l.closePath(),l.restore()};this.drawIconMove=function(e,t){o(n,z,e,t),o(u,z,e,t),o(c,z,e,t),o(h,z,e,t)},this.drawIconResizeCircle=function(e,t,n){var o=t*n;l.save(),l.strokeStyle=w,l.lineWidth=2,l.fillStyle=v,l.beginPath(),l.arc(e[0],e[1],o,0,2*Math.PI),l.fill(),l.stroke(),l.closePath(),l.restore()},this.drawIconResizeBoxBase=function(e,t,n){var o=t*n;l.save(),l.strokeStyle=g,l.lineWidth=2,l.fillStyle=f,l.fillRect(e[0]-o/2,e[1]-o/2,o,o),l.strokeRect(e[0]-o/2,e[1]-o/2,o,o),l.restore()},this.drawIconResizeBoxNESW=function(e,t,n){this.drawIconResizeBoxBase(e,t,n),o(a,m,e,n),o(r,m,e,n)},this.drawIconResizeBoxNWSE=function(e,t,n){this.drawIconResizeBoxBase(e,t,n),o(i,m,e,n),o(d,m,e,n)},this.drawCropArea=function(e,t,n,o){var i=e.width/l.canvas.width,a=e.height/l.canvas.height,r=t[0]-n/2,s=t[1]-n/2;l.save(),l.strokeStyle=p,l.lineWidth=2,l.beginPath(),o(l,t,n),l.stroke(),l.clip(),0<n&&l.drawImage(e,r*i,s*a,n*i,n*a,r,s,n,n),l.beginPath(),o(l,t,n),l.stroke(),l.clip(),l.restore()}}}]),angular.module("SER.image").service("cropEXIF",[function(){var u=!1,d=this.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},c=this.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},h=this.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},p=this.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function i(e){return!!e.exifdata}function n(o,i){function t(e){var t=l(e),n=function(e){var t=new DataView(e);u&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1))return u&&console.log("Not a valid JPEG"),!1;var n=2,o=e.byteLength;for(;n<o;){if(l=n,56===(s=t).getUint8(l)&&66===s.getUint8(l+1)&&73===s.getUint8(l+2)&&77===s.getUint8(l+3)&&4===s.getUint8(l+4)&&4===s.getUint8(l+5)){var i=t.getUint8(n+7);i%2!=0&&(i+=1),0===i&&(i=4);var a=n+8+i,r=t.getUint16(n+6+i);return f(e,a,r)}n++}var s,l}(e);o.exifdata=t||{},o.iptcdata=n||{},i&&i.call(o)}var e,n,a;if(o.src)if(/^data\:/i.test(o.src))t(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),o=n.length,i=new ArrayBuffer(o),a=new Uint8Array(i),r=0;r<o;r++)a[r]=n.charCodeAt(r);return i}(o.src));else if(/^blob\:/i.test(o.src)){(s=new FileReader).onload=function(e){t(e.target.result)},e=o.src,n=function(e){s.readAsArrayBuffer(e)},(a=new XMLHttpRequest).open("GET",e,!0),a.responseType="blob",a.onload=function(e){200!=this.status&&0!==this.status||n(this.response)},a.send()}else{var r=new XMLHttpRequest;r.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";t(r.response),r=null},r.open("GET",o.src,!0),r.responseType="arraybuffer",r.send(null)}else if(window.FileReader&&(o instanceof window.Blob||o instanceof window.File)){var s;(s=new FileReader).onload=function(e){u&&console.log("Got file of length "+e.target.result.byteLength),t(e.target.result)},s.readAsArrayBuffer(o)}}function l(e){var t=new DataView(e);if(u&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return u&&console.log("Not a valid JPEG"),!1;for(var n,o=2,i=e.byteLength;o<i;){if(255!=t.getUint8(o))return u&&console.log("Not a valid marker at offset "+o+", found: "+t.getUint8(o)),!1;if(n=t.getUint8(o+1),u&&console.log(n),225==n)return u&&console.log("Found 0xFFE1 marker"),a(t,o+4,t.getUint16(o+2));o+=2+t.getUint16(o+2)}}var g={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function f(e,t,n){for(var o,i,a,r,s=new DataView(e),l={},d=t;d<t+n;)28===s.getUint8(d)&&2===s.getUint8(d+1)&&(r=s.getUint8(d+2))in g&&((a=s.getInt16(d+3))+5,i=g[r],o=v(s,d+5,a),l.hasOwnProperty(i)?l[i]instanceof Array?l[i].push(o):l[i]=[l[i],o]:l[i]=o),d++;return l}function m(e,t,n,o,i){var a,r,s,l=e.getUint16(n,!i),d={};for(s=0;s<l;s++)a=n+12*s+2,!(r=o[e.getUint16(a,!i)])&&u&&console.log("Unknown tag: "+e.getUint16(a,!i)),d[r]=w(e,a,t,n,i);return d}function w(e,t,n,o,i){var a,r,s,l,d,u,c=e.getUint16(t+2,!i),h=e.getUint32(t+4,!i),p=e.getUint32(t+8,!i)+n;switch(c){case 1:case 7:if(1==h)return e.getUint8(t+8,!i);for(a=4<h?p:t+8,r=[],l=0;l<h;l++)r[l]=e.getUint8(a+l);return r;case 2:return v(e,a=4<h?p:t+8,h-1);case 3:if(1==h)return e.getUint16(t+8,!i);for(a=2<h?p:t+8,r=[],l=0;l<h;l++)r[l]=e.getUint16(a+2*l,!i);return r;case 4:if(1==h)return e.getUint32(t+8,!i);for(r=[],l=0;l<h;l++)r[l]=e.getUint32(p+4*l,!i);return r;case 5:if(1==h)return d=e.getUint32(p,!i),u=e.getUint32(p+4,!i),(s=new Number(d/u)).numerator=d,s.denominator=u,s;for(r=[],l=0;l<h;l++)d=e.getUint32(p+8*l,!i),u=e.getUint32(p+4+8*l,!i),r[l]=new Number(d/u),r[l].numerator=d,r[l].denominator=u;return r;case 9:if(1==h)return e.getInt32(t+8,!i);for(r=[],l=0;l<h;l++)r[l]=e.getInt32(p+4*l,!i);return r;case 10:if(1==h)return e.getInt32(p,!i)/e.getInt32(p+4,!i);for(r=[],l=0;l<h;l++)r[l]=e.getInt32(p+8*l,!i)/e.getInt32(p+4+8*l,!i);return r}}function v(e,t,n){for(var o="",i=t;i<t+n;i++)o+=String.fromCharCode(e.getUint8(i));return o}function a(e,t){if("Exif"!=v(e,t,4))return u&&console.log("Not valid EXIF data! "+v(e,t,4)),!1;var n,o,i,a,r,s=t+6;if(18761==e.getUint16(s))n=!1;else{if(19789!=e.getUint16(s))return u&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getUint16(s+2,!n))return u&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var l=e.getUint32(s+4,!n);if(l<8)return u&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(s+4,!n)),!1;if((o=m(e,s,s+l,c,n)).ExifIFDPointer)for(i in a=m(e,s,s+o.ExifIFDPointer,d,n)){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":a[i]=p[i][a[i]];break;case"ExifVersion":case"FlashpixVersion":a[i]=String.fromCharCode(a[i][0],a[i][1],a[i][2],a[i][3]);break;case"ComponentsConfiguration":a[i]=p.Components[a[i][0]]+p.Components[a[i][1]]+p.Components[a[i][2]]+p.Components[a[i][3]]}o[i]=a[i]}if(o.GPSInfoIFDPointer)for(i in r=m(e,s,s+o.GPSInfoIFDPointer,h,n)){switch(i){case"GPSVersionID":r[i]=r[i][0]+"."+r[i][1]+"."+r[i][2]+"."+r[i][3]}o[i]=r[i]}return o}this.getData=function(e,t){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete)&&(i(e)?t&&t.call(e):n(e,t),!0)},this.getTag=function(e,t){if(i(e))return e.exifdata[t]},this.getAllTags=function(e){if(!i(e))return{};var t,n=e.exifdata,o={};for(t in n)n.hasOwnProperty(t)&&(o[t]=n[t]);return o},this.pretty=function(e){if(!i(e))return"";var t,n=e.exifdata,o="";for(t in n)n.hasOwnProperty(t)&&("object"==typeof n[t]?n[t]instanceof Number?o+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":o+=t+" : ["+n[t].length+" values]\r\n":o+=t+" : "+n[t]+"\r\n");return o},this.readFromBinaryFile=function(e){return l(e)}}]),angular.module("SER.image").factory("cropHost",["$document","cropAreaCircle","cropAreaSquare","cropEXIF",function(l,v,z,y){var b=function(e){var t=e.getBoundingClientRect(),n=document.body,o=document.documentElement,i=window.pageYOffset||o.scrollTop||n.scrollTop,a=window.pageXOffset||o.scrollLeft||n.scrollLeft,r=o.clientTop||n.clientTop||0,s=o.clientLeft||n.clientLeft||0,l=t.top+i-r,d=t.left+a-s;return{top:Math.round(l),left:Math.round(d)}};return function(u,e,d){var c=null,h=null,p=null,g=[100,100],f=[300,300],n=200,o="image/png",i=null;function m(){c.clearRect(0,0,c.canvas.width,c.canvas.height),null!==h&&(c.drawImage(h,0,0,c.canvas.width,c.canvas.height),c.save(),c.fillStyle="rgba(0, 0, 0, 0.65)",c.fillRect(0,0,c.canvas.width,c.canvas.height),c.restore(),p.draw())}var w=function(){if(null!==h){p.setImage(h);var e=[h.width,h.height],t=h.width/h.height,n=e;n[0]>f[0]?(n[0]=f[0],n[1]=n[0]/t):n[0]<g[0]&&(n[0]=g[0],n[1]=n[0]/t),n[1]>f[1]?(n[1]=f[1],n[0]=n[1]*t):n[1]<g[1]&&(n[1]=g[1],n[0]=n[1]*t),u.prop("width",n[0]).prop("height",n[1]).css({"margin-left":-n[0]/2+"px","margin-top":-n[1]/2+"px"}),p.setX(c.canvas.width/2),p.setY(c.canvas.height/2),p.setSize(Math.min(200,c.canvas.width/2,c.canvas.height/2))}else u.prop("width",0).prop("height",0).css({"margin-top":0});m()},a=function(e){return angular.isDefined(e.changedTouches)?e.changedTouches:e.originalEvent.changedTouches},t=function(e){if(null!==h){var t,n,o=b(c.canvas);n="touchmove"===e.type?(t=a(e)[0].pageX,a(e)[0].pageY):(t=e.pageX,e.pageY),p.processMouseMove(t-o.left,n-o.top),m()}},r=function(e){if(e.preventDefault(),e.stopPropagation(),null!==h){var t,n,o=b(c.canvas);n="touchstart"===e.type?(t=a(e)[0].pageX,a(e)[0].pageY):(t=e.pageX,e.pageY),p.processMouseDown(t-o.left,n-o.top),m()}},s=function(e){if(null!==h){var t,n,o=b(c.canvas);n="touchend"===e.type?(t=a(e)[0].pageX,a(e)[0].pageY):(t=e.pageX,e.pageY),p.processMouseUp(t-o.left,n-o.top),m()}};this.getResultImageDataURI=function(){var e,t;return e=(t=angular.element("<canvas></canvas>")[0]).getContext("2d"),t.width=n,t.height=n,null!==h&&e.drawImage(h,(p.getX()-p.getSize()/2)*(h.width/c.canvas.width),(p.getY()-p.getSize()/2)*(h.height/c.canvas.height),p.getSize()*(h.width/c.canvas.width),p.getSize()*(h.height/c.canvas.height),0,0,n,n),null!==i?t.toDataURL(o,i):t.toDataURL(o)},this.setNewImageSource=function(e){if(h=null,w(),d.trigger("image-updated"),e){var l=new Image;"http"===e.substring(0,4).toLowerCase()&&(l.crossOrigin="anonymous"),l.onload=function(){d.trigger("load-done"),y.getData(l,function(){var e=y.getTag(l,"Orientation");if(-1<[3,6,8].indexOf(e)){var t=document.createElement("canvas"),n=t.getContext("2d"),o=l.width,i=l.height,a=0,r=0,s=0;switch(e){case 3:a=-l.width,r=-l.height,s=180;break;case 6:o=l.height,i=l.width,r=-l.height,s=90;break;case 8:o=l.height,i=l.width,a=-l.width,s=270}t.width=o,t.height=i,n.rotate(s*Math.PI/180),n.drawImage(l,a,r),(h=new Image).src=t.toDataURL("image/png")}else h=l;w(),d.trigger("image-updated")})},l.onerror=function(){d.trigger("load-error")},d.trigger("load-start"),l.src=e}},this.setMaxDimensions=function(e,t){if(f=[e,t],null!==h){var n=c.canvas.width,o=c.canvas.height,i=[h.width,h.height],a=h.width/h.height,r=i;r[0]>f[0]?(r[0]=f[0],r[1]=r[0]/a):r[0]<g[0]&&(r[0]=g[0],r[1]=r[0]/a),r[1]>f[1]?(r[1]=f[1],r[0]=r[1]*a):r[1]<g[1]&&(r[1]=g[1],r[0]=r[1]*a),u.prop("width",r[0]).prop("height",r[1]).css({"margin-left":-r[0]/2+"px","margin-top":-r[1]/2+"px"});var s=c.canvas.width/n,l=c.canvas.height/o,d=Math.min(s,l);p.setX(p.getX()*s),p.setY(p.getY()*l),p.setSize(p.getSize()*d)}else u.prop("width",0).prop("height",0).css({"margin-top":0});m()},this.setAreaMinSize=function(e){e=parseInt(e,10),isNaN(e)||(p.setMinSize(e),m())},this.setResultImageSize=function(e){e=parseInt(e,10),isNaN(e)||(n=e)},this.setResultImageFormat=function(e){o=e},this.setResultImageQuality=function(e){e=parseFloat(e),!isNaN(e)&&0<=e&&e<=1&&(i=e)},this.setAreaType=function(e){var t=p.getSize(),n=p.getMinSize(),o=p.getX(),i=p.getY(),a=v;"square"===e&&(a=z),(p=new a(c,d)).setMinSize(n),p.setSize(t),p.setX(o),p.setY(i),null!==h&&p.setImage(h),m()},c=u[0].getContext("2d"),p=new v(c,d),l.on("mousemove",t),u.on("mousedown",r),l.on("mouseup",s),l.on("touchmove",t),u.on("touchstart",r),l.on("touchend",s),this.destroy=function(){l.off("mousemove",t),u.off("mousedown",r),l.off("mouseup",t),l.off("touchmove",t),u.off("touchstart",r),l.off("touchend",t),u.remove()}}}]),angular.module("SER.image").factory("cropPubSub",[function(){return function(){var n={};this.on=function(e,t){return e.split(" ").forEach(function(e){n[e]||(n[e]=[]),n[e].push(t)}),this},this.trigger=function(e,t){return angular.forEach(n[e],function(e){e.call(null,t)}),this}}}]),angular.module("SER.image").directive("imgCrop",["$timeout","cropHost","cropPubSub",function(s,l,t){return{restrict:"E",scope:{image:"=",resultImage:"=",changeOnFly:"=",areaType:"@",areaMinSize:"=",resultImageSize:"=",resultImageFormat:"@",resultImageQuality:"=",onChange:"&",onLoadBegin:"&",onLoadDone:"&",onLoadError:"&"},template:"<canvas></canvas>",controller:["$scope",function(e){e.events=new t}],link:function(n,e){var o,t=n.events,i=new l(e.find("canvas"),{},t),a=function(e){var t=i.getResultImageDataURI();o!==t&&(o=t,angular.isDefined(e.resultImage)&&(e.resultImage=t),e.onChange({$dataURI:e.resultImage}))},r=function(t){return function(){s(function(){n.$apply(function(e){t(e)})})}};t.on("load-start",r(function(e){e.onLoadBegin({})})).on("load-done",r(function(e){e.onLoadDone({})})).on("load-error",r(function(e){e.onLoadError({})})).on("area-move area-resize",r(function(e){e.changeOnFly&&a(e)})).on("area-move-end area-resize-end image-updated",r(function(e){a(e)})),n.$watch("image",function(){i.setNewImageSource(n.image)}),n.$watch("areaType",function(){i.setAreaType(n.areaType),a(n)}),n.$watch("areaMinSize",function(){i.setAreaMinSize(n.areaMinSize),a(n)}),n.$watch("resultImageSize",function(){i.setResultImageSize(n.resultImageSize),a(n)}),n.$watch("resultImageFormat",function(){i.setResultImageFormat(n.resultImageFormat),a(n)}),n.$watch("resultImageQuality",function(){i.setResultImageQuality(n.resultImageQuality),a(n)}),n.$watch(function(){return[e[0].clientWidth,e[0].clientHeight]},function(e){i.setMaxDimensions(e[0],e[1]),a(n)},!0),n.$on("$destroy",function(){i.destroy()})}}}]),angular.module("SER.loader",[]).service("afterPromises",[function(){var e=function(e,t){this.callback=t,this.topCount=e,this.counter=0};return e.prototype.notify=function(){this.counter+=1,this.counter==this.topCount&&this.callback()},e}]),angular.module("SER.search").directive("remoteSearch",["$http",function(a){return{restrict:"A",require:["ngModel"],scope:{remoteSearchResults:"=",remoteSearch:"=",model:"=ngModel"},link:function(t,e,n,o){var i;e.on("keyup",function(e){i&&clearTimeout(i),i=setTimeout(function(){t.$apply(function(){t.remoteSearchResults=[]}),t.model&&a.get(t.remoteSearch+t.model).then(function(e){0<e.data.length&&(t.remoteSearchResults=e.data)})},500)})}}}]),angular.module("SER.search").directive("ngEnter",function(){return function(t,n,o){n.bind("keydown keypress",function(e){13===e.which&&(t.$apply(function(){t.$eval(o.ngEnter,{$event:e})}),e.preventDefault(),n.blur())})}}),angular.module("SER.selector",[]).directive("selector",["$rootScope","$filter","$timeout","$window","$http","$q","$templateCache",function(e,f,m,t,n,o,a){return{restrict:"EC",replace:!0,transclude:!0,scope:{value:"=model",disabled:"=?disable",disableSearch:"=?",required:"=?require",multiple:"=?multi",placeholder:"@?",valueAttr:"@",labelAttr:"@?",options:"=?",dropdownClass:"@?",limit:"=?",rtl:"=?",api:"=?",change:"&?",removeButton:"=?",softDelete:"=?",closeAfterSelection:"=?"},link:function(e,u,t,n,o){var c=angular.element(u[0].querySelector(".selector-dropdown")),h=angular.element(u[0].querySelector("select")),p=u.parents(),g="selector-"+Math.round(1e6*Math.random());c.attr("id",g),o(e,function(e,a){var n=f("filter"),o=angular.element(u[0].querySelector(".selector-input input")),t=o.controller("ngModel"),i=u.find("select").controller("ngModel"),r={api:{},search:"",disableSearch:!1,selectedValues:[],highlighted:0,valueAttr:null,labelAttr:"label",options:[],limit:1/0,removeButton:!0,closeAfterSelection:!0};for(var s in c.detach(),!angular.isDefined(a.value)&&a.multiple&&(a.value=[]),r)angular.isDefined(a[s])||(a[s]=r[s]);a.getObjValue=function(e,t){var n;if(!angular.isDefined(e)||!angular.isDefined(t))return e;if(0<(n=(t=angular.isArray(t)?t:t.split(".")).shift()).indexOf("[")){var o=n.match(/(\w+)\[(\d+)\]/);null!==o&&(e=e[o[1]],n=o[2])}return 0===t.length?e[n]:a.getObjValue(e[n],t)},a.setObjValue=function(e,t,n){var o;if(angular.isDefined(e)||(e={}),0<(o=(t=angular.isArray(t)?t:t.split(".")).shift()).indexOf("[")){var i=o.match(/(\w+)\[(\d+)\]/);null!==i&&(e=e[i[1]],o=i[2])}return e[o]=0===t.length?n:a.setObjValue(e[o],t,n),e},a.optionValue=function(e){return null===a.valueAttr?e:a.getObjValue(e,a.valueAttr)},a.optionEquals=function(e,t){return angular.equals(a.optionValue(e),angular.isDefined(t)?t:a.value)},a.setValue=function(e){a.multiple?a.value=null===a.valueAttr?e||[]:(e||[]).map(function(e){return a.getObjValue(e,a.valueAttr)}):a.value=null===a.valueAttr?e:a.getObjValue(e||{},a.valueAttr)},a.hasValue=function(){return a.multiple?0<(a.value||[]).length:!!a.value},a.optionToObject=function(e){var n={},t=angular.element(e);angular.forEach(e.dataset,function(e,t){t.match(/^\$/)||(n[t]=e)}),e.value&&a.setObjValue(n,a.valueAttr||"value",e.value),t.text()&&a.setObjValue(n,a.labelAttr,t.text().trim()),a.options.push(n),!t.attr("selected")||!a.multiple&&a.hasValue()||(a.multiple?(a.value||(a.value=[]),a.value.push(a.optionValue(n))):a.value||(a.value=a.optionValue(n)))},a.fillWithHtml=function(){a.options=[],angular.forEach(e,function(e){"option"===(e.tagName||"").toLowerCase()&&a.optionToObject(e)}),a.updateSelected()},a.initialize=function(){angular.isArray(a.options)&&a.options.length||a.fillWithHtml(),a.hasValue()&&(a.multiple?angular.isArray(a.value)||(a.value=[a.value]):angular.isArray(a.value)&&(a.value=a.value[0]),a.updateSelected(),a.filterOptions(),a.updateValue())},a.$watch("multiple",function(){m(a.setInputWidth)});var l=function(){var e=o.parent()[0],t={top:"",bottom:"",left:e.getBoundingClientRect().left+"px",width:e.offsetWidth+"px"};220<=angular.element(document.body).height()-(e.offsetHeight+e.getBoundingClientRect().top)?(t.top=e.offsetHeight+e.getBoundingClientRect().top,c.removeClass("ontop")):(t.bottom=angular.element(document.body).height()-e.getBoundingClientRect().top,c.addClass("ontop")),c.css(t)};a.showDropdown=function(){l(),angular.element(document.body).append(c),m(function(){angular.element(window).triggerHandler("resize")},50)},a.open=function(){a.multiple&&(a.selectedValues||[]).length>=a.limit||(a.isOpen=!0,a.showDropdown(),m(a.scrollToHighlighted))},a.close=function(){a.isOpen=!1,c.detach(),a.resetInput()};var d=function(e){a.filteredOptions.length&&(a.highlighted=(a.filteredOptions.length+e)%a.filteredOptions.length)};a.set=function(e){a.multiple&&(a.selectedValues||[]).length>=a.limit||(a.multiple?(a.selectedValues||(a.selectedValues=[]),a.selectedValues.indexOf(e)<0&&a.selectedValues.push(e)):a.selectedValues=[e],!a.multiple&&a.closeAfterSelection&&o.blur(),d(a.options.indexOf(e)),a.resetInput(),i.$setDirty())},a.unset=function(e){a.multiple?a.selectedValues.splice(angular.isDefined(e)?e:a.selectedValues.length-1,1):a.selectedValues=[],a.resetInput(),i.$setDirty()},a.keydown=function(e){switch(e.keyCode){case KEYS.up:if(!a.isOpen)break;d(a.highlighted-1),e.preventDefault();break;case KEYS.down:a.isOpen?d(a.highlighted+1):a.open(),e.preventDefault();break;case KEYS.escape:d(0),a.close();break;case KEYS.enter:a.isOpen&&(a.filteredOptions.length&&a.set(),e.preventDefault());break;case KEYS.backspace:if(!o.val()){var t=a.getObjValue(a.selectedValues.slice(-1)[0]||{},a.labelAttr||"");a.unset(),a.open(),a.softDelete&&!a.disableSearch&&m(function(){a.search=t}),e.preventDefault()}break;case KEYS.left:case KEYS.right:case KEYS.shift:case KEYS.ctrl:case KEYS.alt:case KEYS.tab:case KEYS.leftCmd:case KEYS.rightCmd:break;default:!a.multiple&&a.hasValue()?e.preventDefault():(a.open(),d(0))}},a.inOptions=function(e,t){return 0<=e.indexOf(t)},a.filterOptions=function(){if(a.filteredOptions=n(a.options||[],a.search),angular.isArray(a.selectedValues)||(a.selectedValues=[]),a.multiple)a.filteredOptions=a.filteredOptions.filter(function(e){return!a.inOptions(a.selectedValues,e)});else{var e=a.filteredOptions.indexOf(a.selectedValues[0]);0<=e&&d(e)}},a.measureWidth=function(){var e,t=getStyles(o[0]),n=angular.element('<span class="selector-shadow"></span>');return n.text(o.val()||(a.hasValue()?"":a.placeholder)||""),angular.element(document.body).append(n),angular.forEach(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(e){n.css(e,t[e])}),e=n[0].offsetWidth,n.remove(),e},a.setInputWidth=function(){var e=a.measureWidth()+1;o.css("width",e+"px")},a.resetInput=function(){o.val(""),a.setInputWidth(),m(function(){a.search=""})},a.$watch("[search, options, value]",function(){a.filterOptions(),m(function(){a.setInputWidth(),a.isOpen&&a.showDropdown()})},!0),a.updateValue=function(e){angular.isDefined(e)||(e=a.selectedValues||[]),a.setValue(a.multiple?e:e[0])},a.$watch("selectedValues",function(e,t){angular.equals(e,t)||(a.updateValue(),angular.isFunction(a.change)&&a.change(a.multiple?{newValue:e,oldValue:t}:{newValue:(e||[])[0],oldValue:(t||[])[0]}))},!0),a.$watchCollection("options",function(e,t){angular.equals(e,t)||a.updateSelected()}),a.updateSelected=function(){a.multiple?a.selectedValues=(a.value||[]).map(function(t){return n(a.options,function(e){return a.optionEquals(e,t)})[0]}).filter(function(e){return angular.isDefined(e)}).slice(0,a.limit):a.selectedValues=(a.options||[]).filter(function(e){return a.optionEquals(e)}).slice(0,1)},a.$watch("value",function(e,t){angular.equals(e,t)||a.updateSelected()},!0),o=angular.element(u[0].querySelector(".selector-input input")).on("focus",function(){m(function(){a.$apply(a.open)})}).on("blur",function(){a.close()}).on("keydown",function(e){a.$apply(function(){a.keydown(e)})}).on("input",function(){a.setInputWidth()}),c.on("mousedown",function(e){e.preventDefault()}),p.each(function(e,t){angular.element(t).on("scroll."+g,function(e){l()})}),a.$watch(function(){return t.$pristine},function(e){i[e?"$setPristine":"$setDirty"]()}),a.$watch(function(){return t.$touched},function(e){i[e?"$setTouched":"$setUntouched"]()}),angular.forEach(["open","close"],function(e){a.api[e]=a[e]}),a.api.focus=function(){o[0].focus()},a.api.set=function(e){return a.value=e},a.api.unset=function(t){var n=t?(a.selectedValues||[]).filter(function(e){return a.optionEquals(e,t)}):a.selectedValues,e=a.selectedValues.map(function(e,t){return a.inOptions(n,e)?t:-1}).filter(function(e){return 0<=e});angular.forEach(e,function(e,t){a.unset(e-t)})},a.isDirty=function(){return h.hasClass("ng-dirty")},a.isInvalid=function(){return h.hasClass("ng-invalid")},a.initialize()}),e.$on("$destroy",function(){c.remove(),c.off("mousedown"),angular.element(u[0].querySelector(".selector-input input")).off("focus blur keydown input "),angular.element(document.body).off("resize."+g),p.each(function(e,t){$(t).off("scroll."+g+" resize."+g)}),p=null})},template:function(e,t){var n,o=a.get(t.viewItemTemplate)?a.get(t.viewItemTemplate):'<span ng-bind="getObjValue(option, labelAttr) || option"></span>';n=t.labelAttr?'<span ng-bind="getObjValue(option, labelAttr) || option"></span>':a.get(t.viewItemTemplate)?a.get(t.viewItemTemplate):'<span ng-bind="getObjValue(option, labelAttr) || option"></span>',t.dropdownItemTemplate&&(n=a.get(t.dropdownItemTemplate)?a.get(t.dropdownItemTemplate):'<span ng-bind="getObjValue(option, labelAttr) || option"></span>');var i="";return t.name&&(i='name="'+t.name+'"'),a.get("selector/Base")?a.get("selector/Base"):"<div class=\"selector-container\" ng-attr-dir=\"{{rtl ? 'rtl' : 'ltr'}}\" ng-class=\"{open: isOpen, empty: !filteredOptions.length && !search, 'ng-dirty': isDirty(), 'ng-invalid': isInvalid(),multiple: multiple, 'has-value': hasValue(), rtl: rtl, 'remove-button': removeButton, disabled: disabled}\"><select "+i+' ng-required="required && !hasValue()" class="not-styled" ng-model="selectedValues" multiple style="display: none;"></select><label class="selector-input"><ul class="selector-values"><li ng-repeat="(index, option) in selectedValues track by index"><div>'+o+'</div><div ng-if="multiple" class="selector-helper" ng-click="!disabled && unset(index)"><span class="selector-icon"></span></div></li></ul><input ng-model="search" class="selector-search-input not-styled" placeholder="{{!hasValue() ? placeholder : \'\'}}"ng-disabled="disabled" ng-readonly="disableSearch" ng-required="required && !hasValue()" autocomplete="off"><div ng-if="!multiple" class="selector-helper selector-global-helper" ng-click="!disabled && removeButton && unset()"><span class="selector-icon"></span></div></label><ul md-virtual-repeat-container md-auto-shrink md-top-index="highlighted" class="selector-dropdown '+t.dropdownClass+'"><li md-virtual-repeat="option in filteredOptions" ng-class="{active: highlighted == $index}" class="selector-option" ng-click="set(option)">'+n+"</li></ul></div>"}}}]),angular.module("SER.tooltipster",[]),angular.module("SER.tooltipster").directive("tooltipster",function(){return{restrict:"A",scope:{tooltipsterOptions:"="},link:function(e,n,t){var o={content:t.tooltipster,maxWidth:300,delay:0,contentAsHTML:!0,positionTracker:!0,interactive:!0,trigger:"hover",theme:"tooltipster-borderless",functionReady:function(e,t){$(t.tooltip).on("click",function(){n.tooltipster("hide")})}};angular.merge(o,e.tooltipsterOptions),n.tooltipster(o)}}}),angular.module("SER.tooltipster").directive("tooltipsterMenu",function(){return{restrict:"A",scope:{tooltipsterMenu:"="},link:function(e,n,t){var o={content:n.find(".tooltip-content"),delay:0,trigger:"click",theme:"tooltipster-borderless",position:"bottom",positionTracker:!0,interactive:!0,functionReady:function(e,t){$(t.tooltip).on("click",function(){n.tooltipster("hide")})}};angular.merge(o,e.tooltipsterMenu),n.tooltipster(o)}}}),angular.module("SER.tooltipster").directive("tooltipsterHtml",function(){return{restrict:"A",scope:{tooltipsterHtml:"="},link:function(e,n,t){var o={content:n.find(".tooltip-content"),delay:0,trigger:"hover",theme:"tooltipster-borderless",position:"top",positionTracker:!0,functionReady:function(e,t){$(t.tooltip).on("click",function(){n.tooltipster("hide")})}};angular.merge(o,e.tooltipsterHtml),n.tooltipster(o)}}}),angular.module("SER.match",[]).directive("match",["$parse",function(i){return{require:"?ngModel",restrict:"A",link:function(r,e,t,n){if(n&&t.match){var o=i(t.match),s=i(t.matchCaseless),l=i(t.notMatch),d=i(t.matchIgnoreEmpty);r.$watch(u,function(){n.$$parseAndValidate()}),n.$validators.match=function(e,t){var n,o=e||t,i=u(),a=l(r);return!(!d(r)||t)||(n=s(r)?angular.lowercase(o)===angular.lowercase(i):o===i,!!(n^=a))}}function u(){var e=o(r);return angular.isObject(e)&&e.hasOwnProperty("$viewValue")&&(e=e.$viewValue),e}}}}]),angular.module("SER.barcode",[]),angular.module("SER.barcode").directive("barcode",function(){return{restrict:"EA",scope:{model:"=",options:"="},link:function(e,t,n){var o={format:"CODE128",lineColor:"#000000",width:3,height:110,displayValue:!0};angular.merge(o,e.options),e.$watch("model",function(e){JsBarcode(t[0],e,o)})}}}),angular.module("SER.diff",[]),angular.module("SER.diff").factory("ObjectDiff",["$sce",function(e){return{diff:h,getPatchChanges:function(e,t,n,o){var i=angular.fromJson(angular.toJson(t)),a=h(angular.fromJson(angular.toJson(e)),i,n,o),r=[];"equal"!==a.changed&&angular.forEach(a.value,function(e,t){"equal"!==e.changed&&r.push({op:"replace",path:"/"+t,value:i[t]})});return r}};function h(e,t,n,o){if(e===t)return p(e);var i,a,r,s,l={},d=!0;for(var u in e)if(!o&&u in t||o&&void 0!==t&&t.hasOwnProperty(u))if(e[u]===t[u])l[u]=p(e[u]);else if(n||(i=e[u],a=t[u],void 0,r=typeof i,s=typeof a,!i||!a||"object"!=r&&"function"!=r||"object"!=s&&"function"!=s))d=!1,l[u]={changed:"primitive change",removed:e[u],added:t[u]};else{var c=h(e[u],t[u],n,o);"equal"==c.changed?l[u]=p(e[u]):(d=!1,l[u]=c)}else d=!1,l[u]={changed:"removed",value:e[u]};for(u in t)(o||u in e)&&(!o||void 0===e||e.hasOwnProperty(u))||(d=!1,l[u]={changed:"added",value:t[u]});return d?p(e):{changed:"object change",value:l}}function p(e){return{changed:"equal",value:e}}}]),angular.module("SER.map",[]),angular.module("SER.map").service("mapFunctions",[function(){return{getCurrentPosition:function(){var t=$q.defer(),e=t.promise;return $window.navigator&&$window.navigator.geolocation?$window.navigator.geolocation.getCurrentPosition(function(e){t.resolve({Latitude:e.coords.latitude,Longitude:e.coords.longitude,accuracy:e.coords.accuracy})},function(){t.reject()}):t.reject(),e},checkLatLog:function(e,t){return-90<=e&&e<=90&&-180<=t&&t<=180},middlePoint:function(e){var t={From:{Lat:0,longitude:0},To:{Lat:0,longitude:0}};if(angular.merge(t,e),t.From.longitude==t.To.Longitude&&t.From.Latitude==t.To.Latitude)return!1;var n=t.From.Latitude*Math.PI/180,o=t.To.Latitude*Math.PI/180,i=t.From.Longitude*Math.PI/180,a=t.To.Longitude*Math.PI/180-i,r=Math.cos(o)*Math.cos(a),s=Math.cos(o)*Math.sin(a),l=Math.atan2(Math.sin(n)+Math.sin(o),Math.sqrt((Math.cos(n)+r)*(Math.cos(n)+r)+s*s)),d=i+Math.atan2(s,Math.cos(n)+r);l*=180/Math.PI,d*=180/Math.PI;var u=t.To.Longitude-t.From.Longitude,c=t.To.Latitude-t.From.Latitude;return{longitude:d,Latitude:l,angle:180*Math.atan2(u,c)/Math.PI,distance:this.distancePoints(t.From.Longitude,t.From.Latitude,t.To.Longitude,t.To.Latitude)}},distancePoints:function(e,t,n,o){var i=Math.sin((o-t)*Math.PI/180/2)*Math.sin((o-t)*Math.PI/180/2)+Math.cos(t*Math.PI/180)*Math.cos(o*Math.PI/180)*Math.sin((n-e)*Math.PI/180/2)*Math.sin((n-e)*Math.PI/180/2);return 1.60934*(6371*(2*Math.asin(Math.sqrt(i))))},cutPrecision:function(e,t){if("number"==typeof e[0])for(var n=0;n<e.length;n++)e[n]=Math.round(e[n]*t)/t;else{var o=e.features||e.geometries||e.coordinates||e;for(n=0;n<o.length;n++)this.cutPrecision(o[n],t)}},processPoints:function(e,t,n){e instanceof google.maps.LatLng?t.call(n,e):e instanceof google.maps.Data.Point?t.call(n,e.get()):e.getArray().forEach(function(e){this.processPoints(e,t,n)})},generateGeoJSONCircle:function(e,t,n){for(var o=[],i=360/n,a=0;a<n;a++){var r=google.maps.geometry.spherical.computeOffset(e,t,i*a);o.push([r.lng(),r.lat()])}return o.push(o[0]),{type:"Polygon",coordinates:[o]}},getLatLngLiteralArray:function(e){for(var t=[],n=0;n<e.length;n++)t.push({lat:e[n][1],lng:e[n][0]});return t}}}]),angular.module("SER.sentry",[]),angular.module("SER.sentry").factory("$exceptionHandler",["$window","$log",function(e,n){return e.Raven&&RAVEN_CONFIG_DSN?(console.log("Using the RavenJS exception handler."),Raven.config(RAVEN_CONFIG_DSN).install(),function(e,t){Raven.captureException(e),RAVEN_SHOW_DIALOG&&Raven.showReportDialog()}):(console.log("Using the default logging exception handler."),function(e,t){n.error.apply(n,arguments)})}]),angular.module("SER",["SER.i18n","SER.auth","SER.selector","SER.match","SER.image","SER.search","SER.tooltipster","SER.datepicker","SER.chip","SER.loader","SER.filters","SER.barcode","SER.diff","SER.fullscreen","SER.Clipboard","SER.sentry"]),function(t){var e=new Image;e.onload=function(){var e=["font-size: 1px;","line-height: "+this.height+"px;","padding: "+.5*this.height+"px "+.5*this.width+"px;","background-size: "+this.width+"px "+this.height+"px;","background: url("+t+");"].join(" ");console.log(""),console.log(""),console.log("%c",e),console.log("https://www.sersoluciones.com"),console.log(""),console.log("")},e.src=t}("https://s3.amazonaws.com/ser-ui/images/powered.jpg"),angular.module("SER").config(["$urlRouterProvider","$urlMatcherFactoryProvider","$compileProvider","$resourceProvider","$httpProvider",function(e,t,n,o,i){i.defaults.paramSerialize="$httpParamSerializerJQLike",o.defaults.stripTrailingSlashes=!0,n.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|skype|tel|chrome-extension):/),e.rule(function(e,t){var n=t.path();if("/"===n[n.length-1])return n.substr(0,n.length-1)});var a=/^[a-f\d]{8}-([a-f\d]{4}-){3}[a-f\d]{12}$/i;t.type("guid",{encode:angular.identity,decode:angular.identity,is:function(e){return a.test(e)}})}]),angular.module("SER").run(["$rootScope","$sce",function(e,t){e.backHistory=function(){$window.history.back()},e.__=__,e.bodyHeight=function(){return angular.element("body").height()},e.browserWidth=browserWidth,e.trustAsHtml=function(e){return t.trustAsHtml(e)}}]);
//# sourceMappingURL=ser-ui.min.js.map
