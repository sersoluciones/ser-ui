{"version":3,"sources":["utils.js","js.cookie.js","tooltipster.bundle.js","blob.js","jurlp.js","image-zoom.js","jquery.daterangepicker.js","angular-animate.js","angular-aria.js","angular-filter.js","angular-fullscreen.js","angular-messages.js","angular-resource.js","angular-sanitize.js","../node_modules/@uirouter/core/lib-esm/common/@uirouter/core/common/hof.ts","../node_modules/@uirouter/core/lib-esm/common/@uirouter/core/common/predicates.ts","../node_modules/@uirouter/core/lib-esm/common/@uirouter/core/common/common.ts","../node_modules/@uirouter/core/lib-esm/common/@uirouter/core/common/trace.ts","../node_modules/@uirouter/core/lib-esm/transition/@uirouter/core/transition/hookRegistry.ts","../node_modules/@uirouter/core/lib-esm/transition/@uirouter/core/transition/hookBuilder.ts","../node_modules/@uirouter/core/lib-esm/params/@uirouter/core/params/paramType.ts","../node_modules/@uirouter/core/lib-esm/params/@uirouter/core/params/param.ts","../node_modules/@uirouter/core/lib-esm/common/@uirouter/core/common/strings.ts","../node_modules/@uirouter/core/lib-esm/state/@uirouter/core/state/stateBuilder.ts","../node_modules/@uirouter/core/lib-esm/url/@uirouter/core/url/urlMatcher.ts","../node_modules/@uirouter/core/lib-esm/url/@uirouter/core/url/urlRouter.ts","../node_modules/@uirouter/core/lib-esm/hooks/@uirouter/core/hooks/coreResolvables.ts","../node_modules/@uirouter/core/lib-esm/hooks/@uirouter/core/hooks/onEnterExitRetain.ts","../node_modules/@uirouter/core/lib-esm/hooks/@uirouter/core/hooks/lazyLoad.ts","../node_modules/@uirouter/core/lib-esm/hooks/@uirouter/core/hooks/ignoredTransition.ts","../node_modules/@uirouter/core/lib-esm/hooks/@uirouter/core/hooks/invalidTransition.ts","../node_modules/@uirouter/core/lib-esm/vanilla/@uirouter/core/vanilla/utils.ts","../node_modules/@uirouter/core/lib-esm/vanilla/@uirouter/core/vanilla/plugins.ts","@uirouter/angularjs/statebuilders/views.ts","@uirouter/angularjs/templateFactory.ts","@uirouter/angularjs/services.ts","@uirouter/angularjs/directives/stateDirectives.ts","@uirouter/angularjs/stateFilters.ts","@uirouter/angularjs/directives/viewDirective.ts","@uirouter/angularjs/angular.ts","../node_modules/@uirouter/core/lib-esm/common/@uirouter/core/common/glob.ts","../node_modules/@uirouter/core/lib-esm/state/@uirouter/core/state/stateObject.ts","../node_modules/@uirouter/core/lib-esm/common/@uirouter/core/common/coreservices.ts","../node_modules/@uirouter/core/lib-esm/common/@uirouter/core/common/queue.ts","../node_modules/@uirouter/core/lib-esm/transition/@uirouter/core/transition/rejectFactory.ts","../node_modules/@uirouter/core/lib-esm/transition/@uirouter/core/transition/interface.ts","../node_modules/@uirouter/core/lib-esm/state/@uirouter/core/state/targetState.ts","../node_modules/@uirouter/core/lib-esm/transition/@uirouter/core/transition/transitionHook.ts","../node_modules/@uirouter/core/lib-esm/path/@uirouter/core/path/pathNode.ts","../node_modules/@uirouter/core/lib-esm/path/@uirouter/core/path/pathFactory.ts","../node_modules/@uirouter/core/lib-esm/resolve/@uirouter/core/resolve/resolvable.ts","../node_modules/@uirouter/core/lib-esm/resolve/@uirouter/core/resolve/interface.ts","../node_modules/@uirouter/core/lib-esm/resolve/@uirouter/core/resolve/resolveContext.ts","../node_modules/@uirouter/core/lib-esm/transition/@uirouter/core/transition/transition.ts","../node_modules/@uirouter/core/lib-esm/params/@uirouter/core/params/paramTypes.ts","../node_modules/@uirouter/core/lib-esm/params/@uirouter/core/params/stateParams.ts","../node_modules/@uirouter/core/lib-esm/state/@uirouter/core/state/stateMatcher.ts","../node_modules/@uirouter/core/lib-esm/state/@uirouter/core/state/stateQueueManager.ts","../node_modules/@uirouter/core/lib-esm/state/@uirouter/core/state/stateRegistry.ts","../node_modules/@uirouter/core/lib-esm/url/@uirouter/core/url/urlMatcherFactory.ts","../node_modules/@uirouter/core/lib-esm/url/@uirouter/core/url/urlRule.ts","../node_modules/@uirouter/core/lib-esm/view/@uirouter/core/view/view.ts","../node_modules/@uirouter/core/lib-esm/@uirouter/core/globals.ts","../node_modules/@uirouter/core/lib-esm/url/@uirouter/core/url/urlService.ts","../node_modules/@uirouter/core/lib-esm/@uirouter/core/router.ts","../node_modules/@uirouter/core/lib-esm/hooks/@uirouter/core/hooks/redirectTo.ts","../node_modules/@uirouter/core/lib-esm/hooks/@uirouter/core/hooks/resolve.ts","../node_modules/@uirouter/core/lib-esm/hooks/@uirouter/core/hooks/views.ts","../node_modules/@uirouter/core/lib-esm/hooks/@uirouter/core/hooks/updateGlobals.ts","../node_modules/@uirouter/core/lib-esm/hooks/@uirouter/core/hooks/url.ts","../node_modules/@uirouter/core/lib-esm/transition/@uirouter/core/transition/transitionEventType.ts","../node_modules/@uirouter/core/lib-esm/transition/@uirouter/core/transition/transitionService.ts","../node_modules/@uirouter/core/lib-esm/state/@uirouter/core/state/stateService.ts","../node_modules/@uirouter/core/lib-esm/vanilla/@uirouter/core/vanilla/q.ts","../node_modules/@uirouter/core/lib-esm/vanilla/@uirouter/core/vanilla/injector.ts","../node_modules/@uirouter/core/lib-esm/vanilla/@uirouter/core/vanilla/baseLocationService.ts","../node_modules/@uirouter/core/lib-esm/vanilla/@uirouter/core/vanilla/hashLocationService.ts","../node_modules/@uirouter/core/lib-esm/vanilla/@uirouter/core/vanilla/memoryLocationService.ts","../node_modules/@uirouter/core/lib-esm/vanilla/@uirouter/core/vanilla/pushStateLocationService.ts","../node_modules/@uirouter/core/lib-esm/vanilla/@uirouter/core/vanilla/memoryLocationConfig.ts","../node_modules/@uirouter/core/lib-esm/vanilla/@uirouter/core/vanilla/browserLocationConfig.ts","../node_modules/@uirouter/core/lib-esm/@uirouter/core/interface.ts","@uirouter/angularjs/stateProvider.ts","@uirouter/angularjs/statebuilders/onEnterExitRetain.ts","@uirouter/angularjs/locationServices.ts","@uirouter/angularjs/urlRouterProvider.ts","@uirouter/angularjs/viewScroll.ts","@uirouter/angularjs/index.ts","ng-file-upload.js","angular-websocket.js","randexp.min.js","auth.js","autocomplete.js","date.js","filters.js","i18n.js","image.js","loader.js","search.js","selector.js","tooltipster.js","validation-match.js","barcode.js","diff.js","main.js"],"names":["getStyles","element","HTMLElement","ownerDocument","defaultView","opener","getComputedStyle","window","arrayGroupBy","array","field","array_group_by","index","length","undefined","push","hasValue","value","angular","isArray","isDate","isObject","isEmptyObject","NaN","indexOf","notValue","hasProperty","obj","key","hasOwnProperty","inArray","notInArray","getObjectByValue","attr","i","prop","browserWidth","innerWidth","screen","width","hasPdfViewer","navigator","plugins","name","toLowerCase","getRandomInt","min","max","Math","floor","random","hasFiles","Files","result","file","Blob","flashId","size","guid","s4","toString","substring","factory","registeredInModuleLoader","define","amd","exports","module","OldCookies","Cookies","api","noConflict","extend","arguments","attributes","init","converter","document","path","defaults","expires","Date","setMilliseconds","getMilliseconds","toUTCString","JSON","stringify","test","e","write","encodeURIComponent","String","replace","decodeURIComponent","escape","stringifiedAttributes","attributeName","cookie","cookies","split","rdecode","parts","slice","join","charAt","read","this","json","parse","set","get","call","getJSON","apply","remove","withConverter","root","a0","require","jQuery","$","Ruler","$tooltip","$container","constraints","__$tooltip","__init","areEqual","a","b","same","each","_","bodyContains","$obj","id","el","env","getElementById","contains","body","animation","animationDuration","content","contentAsHTML","contentCloning","debug","delay","delayTouch","functionInit","functionBefore","functionReady","functionAfter","functionFormat","IEmin","interactive","multiple","parent","repositionOnScroll","restoration","selfDestruction","theme","timer","trackerInterval","trackOrigin","trackTooltip","trigger","triggerClose","click","mouseleave","originClick","scroll","tap","touchleave","triggerOpen","mouseenter","touchstart","updateAnimation","zIndex","win","hasTouchCapability","DocumentTouch","maxTouchPoints","hasTransitions","s","documentElement","style","p","v","toUpperCase","substr","IE","semVer","core","__$emitterPrivate","__$emitterPublic","__instancesLatestArr","__plugins","_env","prototype","__bridge","constructor","pluginName","fn","pluginInstance","methodName","console","log","Array","bridged","__setWindow","_getRuler","_off","off","_on","on","_one","one","_plugin","plugin","self","Error","_trigger","args","type","instances","selector","$this","ns","data","namespace","instancesLatest","origins","toArray","setDefaults","d","triggerHandler","tooltipster","Tooltipster","options","__callbacks","close","open","__closingTime","__Content","__contentBcr","__destroyed","__destroying","__enabled","__garbageCollector","__Geometry","__lastPosition","__namespace","round","__options","__$originParents","__pointerIsOverOrigin","__previousThemes","__state","__timeouts","__touchEvents","__tracker","_$origin","_$tooltip","origin","__optionsFormat","initialTitle","__contentSet","$el","first","removeAttr","addClass","__prepareOrigin","__prepareGC","_plug","event","_touchRecordEvent","__prepareTooltip","position","disabled","__contentInsert","find","formattedContent","format","empty","append","text","clone","__destroyError","__geometry","$target","originIsArea","is","mapName","bcr","getBoundingClientRect","$document","$window","$parent","geo","available","height","left","scrollX","scrollLeft","top","scrollY","scrollTop","fixedLineage","offset","bottom","right","usemapImage","windowOffset","shape","coords","map","val","parseInt","circleCenterLeft","circleCenterTop","circleRadius","areaTopOffset","areaLeftOffset","areaLeft","areaTop","areaRight","areaBottom","areaSmallestX","areaSmallestY","areaGreatestX","areaGreatestY","arrayAlternate","areaNumber","edit","r","geometry","tagName","css","setInterval","now","getTime","grep","time","destroy","clearInterval","eventNames","_touchIsMeaningfulEvent","_open","_touchIsTouchEvent","_touchIsEmulatedEvent","_openShortly","pointer-events","removeClass","merge","__scrollHandler","_close","target","reposition","g","overflows","overflowX","overflowY","offsetLeft","offsetTop","coord","__stateSet","state","__timeoutsClear","clearTimeout","timeout","__trackerStart","$content","identical","currentBcr","callback","ok","stop","finishCallbacks","c","necessary","newClosingTime","finish","-moz-animation-duration","-ms-animation-duration","-o-animation-duration","-webkit-animation-duration","animation-duration","transition-duration","clearQueue","queue","fadeOut","extraTime","tooltip","fadeIn","setTimeout","$ae","activeElement","parents","dismissable","$elements","eventNamesIn","eventNamesOut","add","_optionsExtract","defaultOptions","pluginOptions","optionName","o","instance","isEmulated","_touchSwiped","swiped","_unplug","__destroy","fadeTo","removeData","title","html","disable","elementOrigin","elementTooltip","enable","hide","option","tooltipIsDetached","detach","helper","show","status","destroyed","destroying","enabled","contentCloningWarning","resp","multipleIsSet","contentIsSet","contentCloningIsSet","debugIsSet","go","overflow","appendTo","__forceRedraw","$p","constrain","display","free","measure","tooltipBcr","outerHeight","contentBcr","fits","scrollWidth","clientWidth","ceil","uA","userAgent","__defaults","arrow","distance","functionPosition","maxWidth","minIntersection","minWidth","side","viewportAware","__instance","__previousState","__close","__create","__reposition","$html","end","opposites","finalResult","targets","__targetFind","testResults","$clone","ruler","satisfied","container","takeTest","bool","results","horizontal","vertical","__sideChange","mode","testResult","outerSize","whole","rulerResults","sort","ai","bi","tooltipClone","tooltipParent","finalResultClone","arrowCoord","maxVal","originParentOffset","rects","getClientRects","targetRect","view","URL","webkitURL","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","get_class","object","Object","match","FakeBlobBuilder","FakeBlob","encoding","FBB_proto","FB_proto","FileReaderSync","FileException","code","file_ex_codes","file_ex_code","real_URL","real_create_object_URL","createObjectURL","real_revoke_object_URL","revokeObjectURL","btoa","atob","ArrayBuffer","Uint8Array","fake","uri","uri_origin","uri_info","createElementNS","href","protocol","blob","data_URI_header","object_URL","bb","str","buf","buf_len","fromCharCode","fr","readAsBinaryString","unescape","getBlob","start","blobParts","builder","len","buffer","webkitSlice","getPrototypeOf","__proto__","urlRegEx","selectorCallStack","currentSelector","initialiseElement","getHref","location","sanitiseUrl","initialiseElementText","hasClass","urls","modifiedHtml","findUrlRegExp","exec","pos","setHref","setAttrUrl","url","restoreAttrUrl","restoreElement","methods","unwatch","updateHref","segment","setUrlSegment","updateHrefShim","parameters","objectToUrl","urlToObject","scheme","user","password","host","port","query","fragment","credentials","urlSegments","createElement","err","number","authority","pathname","hostname","search","hash","urlString","urlObject","getUrlObject","getFragmentString","getQueryString","updateQuery","queryObject","currentQueryObject","getQueryObject","queryStringToObject","queryObjectToString","elements","parameter","string","getPathString","getPathObject","pathString","updatePath","pathArray","newPathArray","splice","l","pathObjectToString","getPortString","getHostString","getPasswordString","getUserString","getSchemeString","addSelectorCallback","returnEachElement","returnEachObject","dispatchGetSetHelper","getHelper","setHelper","helperArguments","methodDispatcher","method","initialise","http","mailto","javascript","generic","parsers","helpers","getUrl","setUrl","parseUrl","getFragment","setFragment","getQuery","setQuery","getPath","setPath","getPort","setPort","getHost","setHost","getPassword","setPassword","getUser","setUser","getScheme","setScheme","filters","=","actualValue","userValue","!=","<",">","<=",">=","*=","^=","$=","regex","me","filter","restore","goto","proxy","elementUrl","watch","bind","DOMListener","filtered","output","unbind","operator","interface","jurlp","create","F","ElevateZoom","elem","$elem","elevateZoom","imageSrc","tint","lensColour","lensOpacity","zoomType","showLens","zoomImage","refresh","gallery","galleryActiveClass","preventDefault","zoomImagePre","swaptheimage","fetch","imgsrc","newImg","Image","onload","largeWidth","largeHeight","startZoom","currentImage","onZoomedImageLoaded","src","nzWidth","nzHeight","isWindowActive","isLensActive","isTintActive","overWindow","imageCrossfade","zoomWrap","wrap","zoomLock","scrollingLock","changeBgSize","currentZoomLevel","zoomLevel","nzOffset","widthRatio","heightRatio","zoomWindowStyle","zoomWindowBgColour","zoomWindowWidth","zoomWindowHeight","borderSize","borderColour","borderWidth","lensHeight","lensWidth","lensStyle","tintStyle","tintColour","lensRound","lensSize","lensShape","zoomContainer","after","containLensZoom","zoomLens","tintContainer","zoomTint","zoomTintcss","zoomTintImage","isNaN","zoomWindowPosition","zoomWindow","zoomWindowContainer","backgroundImage","touch","originalEvent","touches","changedTouches","setPosition","showHideWindow","showHideLens","showHideTint","setElements","lastX","clientX","lastY","clientY","currentLoc","scrollLock","onDestroy","minZoomLevel","scrollZoomIncrement","scrollZoom","theEvent","wheelDelta","detail","stopImmediatePropagation","stopPropagation","changeZoomLevel","maxZoomLevel","parseFloat","zoomEnabled","isWindowSet","responsive","mouseLeft","pageX","mouseTop","pageY","Etoppos","Eboppos","lensBorderSize","Eloppos","Eroppos","lensLeftPos","lensTopPos","windowLeftPos","tintpos","windowTopPos","backgroundPosition","background-size","newvalueheight","newvaluewidth","setWindowPostition","setTintPosition","fullwidth","change","zoomWindowFadeIn","zoomWindowFadeOut","loop","lensFadeIn","lensFadeOut","zoomTintFadeIn","opacity","tintOpacity","animate","zoomTintFadeOut","setLensPostition","externalContainer","externalContainerWidth","externalContainerHeight","externalContainerOffset","windowOffsetTop","windowOffsetLeft","zoomWindowOffety","zoomWindowOffetx","fullheight","easing","xp","yp","easingAmount","abs","tintposy","smallimage","largeimage","loadingIcon","spinner","onImageSwap","swapAction","newImg2","onImageSwapComplete","doneCallback","oldImg","oldImgTint","newImgTint","constrainType","constrainSize","constwidth","constheight","getCurrentImage","getGalleryList","gallerylist","img_src","unshift","newvalue","toFixed","maxheightnewvalue","maxwidthtnewvalue","scrcontinue","changeZoom","closeAll","changeState","elevate","zoomActivation","preloading","zoomWindowAlwaysShow","lensBorderColour","lenszoom","cursor","onComplete","noop","moment","dateRangePickerLanguages","default","selected","day","days","week-1","week-2","week-3","week-4","week-5","week-6","week-7","week-number","month-name","shortcuts","custom-values","past","following","previous","prev-week","prev-month","prev-year","next","next-week","next-month","next-year","less-than","more-than","default-more","default-single","default-less","default-range","default-default","hour","minute","de","Time","es","pt","dateRangePicker","opt","IsOwnDatePickerClicked","evt","selfObj","childNodes","calcPosition","inline","containerOffset","box","animationTime","redrawDatePicker","checkAndSetDefaultValue","customOpenAnimation","relatedTarget","slideDown","showGap","updateCalendarWidth","__default_string","getValue","selfDom","separator","singleDate","___format","initiated","setDateRange","getValidValue","locale","language","setSingleDate","date","isValid","toDate","gapMargin","w1","w2","w3","singleMonth","renderTime","hours","minutes","setTime","changeTime","startOf","valueOf","swapTime","setRange","timePoint","h","m","startTime","endTime","checkSelectionValid","showSelectedInfo","showSelectedDays","handleStart","batchMode","startOfWeek","handleEnd","endOf","dayClicked","tmp","clearHovering","date1","dayHovering","updateSelectableRange","autoclose","weekNumberClicked","weekNumberDom","date2","thisTime","startWeek","isValidTime","startDate","compare_day","endDate","maxDays","countDays","minDays","selectForward","selectBackward","beforeShowDay","valid","timeTmp","hoverTime","hoveringTooltip","translate","posDay","posBox","_left","_top","$tip","w","visibility","autoClose","closeDatePicker","forceValid","silent","getDateString","dateRange","setValue","daysFrom1970","showMonth","nextMonth","stickyMonths","compare_month","lookBehind","prevMonth","month","monthName","nameMonth","getMonth","getFullYear","createMonthHTML","bindDayEvents","showTime","getTimeHTML","m1","month1","m2","month2","h1","h2","alwaysOpen","afterAnim","customCloseAnimation","slideUp","duration","createDom","extraClass","_colspan","showWeekNumbers","arrowPrev","customArrowPrevSymbol","arrowNext","customArrowNextSymbol","getWeekHead","hasMonth2","prepend","isMonthOutOfBounds","isBefore","isAfter","attributesCallbacks","initialObject","callbacksArray","today","resultObject","cbAttrIndex","cbAttr","addAttributes","attrString","t","toLocalTimestamp","isMoment","getTimezoneOffset","setDate","dayOfWeek","getDay","getDate","toMonth","week","highlightToday","_r","todayDivAttr","data-tooltip","class","getWeekNumber","dayTdAttrs","dayDivAttrs","showDayHTML","showDateFilter","translationKey","translationKeyLowerCase","languages","defaultLanguage","getDefaultTime","defaultTime","resetMonthsView","customShortcuts","applyBtnClass","hoveringTime","showTopbar","isTouchDevice","msMaxTouchPoints","domChangeTimer","browserLanguage","gotoNextMonth","isMonth2","gotoNextMonth_stickily","nextMonth1","nextMonth2","gotoPrevMonth","gotoPrevMonth_stickily","prevMonth1","prevMonth2","defaultEndTime","defaultTopText","valueName","dir","shortcut","stopDay","setFullYear","setMonth","sh","movetodate","setStart","d1","setEnd","d2","clear","redraw","getDatePicker","assertArg","arg","reason","ngMinErr","mergeClasses","packageStyles","styles","to","from","pendClasses","classes","fix","isPrefix","className","isString","forEach","klass","removeFromArray","arr","stripCommentsFromElement","jqLite","nodeType","ELEMENT_NODE","extractElementNode","elm","$$addClass","$$jqLite","$$removeClass","applyAnimationClassesFactory","prepareAnimationOptions","$$prepared","domOperation","$$domOperationFired","applyAnimationStyles","applyAnimationFromStyles","applyAnimationToStyles","mergeAnimationDetails","oldAnimation","newAnimation","newOptions","toAdd","toRemove","resolveElementClasses","preparationClasses","concatWithSpace","realDomOperation","existing","splitClassesToLookup","flags","allow","REMOVE_CLASS_SUFFIX","ADD_CLASS_SUFFIX","getDomNode","applyGeneratedPreparationClasses","EVENT_CLASS_PREFIX","clearGeneratedClasses","activeClasses","blockTransitions","node","applyInlineStyle","TRANSITION_DELAY_PROP","blockKeyframeAnimations","applyBlock","ANIMATION_PROP","ANIMATION_PLAYSTATE_KEY","styleTuple","getCssKeyframeDurationStyle","ANIMATION_DURATION_PROP","getCssDelayStyle","isKeyframeAnimation","ANIMATION_DELAY_PROP","computeCssStyles","properties","detectedStyles","formalStyleName","actualStyleName","parseMaxTime","maxValue","values","truthyTimingValue","getCssTransitionDurationStyle","applyOnlyDuration","TRANSITION_PROP","DURATION_KEY","createLocalCacheLookup","cache","flush","count","entry","total","put","registerRestorableStyles","backup","isDefined","getPropertyValue","TRANSITIONEND_EVENT","ANIMATIONEND_EVENT","NG_ANIMATE_CLASSNAME","NG_ANIMATE_CHILDREN_DATA","ontransitionend","onwebkittransitionend","onanimationend","onwebkitanimationend","copy","isElement","isFunction","isUndefined","TIMING_KEY","TRANSITION_DURATION_PROP","$$minErr","$$rAFSchedulerFactory","$$rAF","scheduler","tasks","concat","nextTick","items","shift","cancelFn","waitUntilQuiet","$$AnimateChildrenDirective","$interpolate","link","scope","attrs","setData","ngAnimateChildren","$observe","ANIMATE_TIMER_KEY","ONE_SECOND","ELAPSED_TIME_MAX_DECIMAL_PLACES","CLOSING_TIME_BUFFER","DETECT_CSS_PROPERTIES","transitionDuration","transitionDelay","transitionProperty","animationDelay","animationIterationCount","DETECT_STAGGER_CSS_PROPERTIES","$AnimateCssProvider","$animateProvider","gcsLookup","gcsStaggerLookup","$get","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue","gcsHashFn","extraClasses","KEY","parentNode","parentCounter","getAttribute","computeCachedCssStyles","cacheKey","timings","computeCachedCssStaggerStyles","stagger","staggerClassName","rafWaitQueue","pageWidth","computeTimings","aD","tD","maxDelay","maxDuration","applyAnimationClasses","initialOptions","endFn","rejected","animationClosed","animationCompleted","animationPaused","$$skipPreparationClasses","temporaryStyles","keys","restoreStyles","setProperty","removeProperty","onDone","events","onAnimationProgress","animationTimerData","cancel","runner","complete","applyBlocking","blockTransition","blockKeyframeAnimation","closeAndReturnNoopAnimator","$$willAnimate","ev","timeStamp","$manualTimeStamp","elapsedTime","maxDelayTime","triggerAnimationStart","recalculateTimingStyles","fullClassName","relativeDelay","hasAnimations","applyAnimationDelay","delayStyle","maxDurationTime","easeProp","easeVal","timerTime","animationsData","setupFallbackTimer","currentTimerData","expectedEndTime","onAnimationExpired","cleanupStyles","playPause","playAnimation","maxStagger","itemIndex","runnerHost","resume","pause","animations","transitions","structuralClassName","addRemoveClassName","structural","applyClassesEarly","trim","hasToStyles","keyframeStyle","staggerVal","transitionStyle","durationStyle","staggerIndex","isFirst","skipBlocking","hasTransitionAll","applyTransitionDuration","applyAnimationDuration","applyTransitionDelay","$$AnimateCssDriverProvider","$$animationProvider","isDocumentFragment","drivers","NG_ANIMATE_SHIM_CLASS_NAME","NG_ANIMATE_ANCHOR_CLASS_NAME","NG_OUT_ANCHOR_CLASS_NAME","NG_IN_ANCHOR_CLASS_NAME","$animateCss","$rootScope","$rootElement","filterCssClasses","getUniqueValues","prepareAnchoredAnimation","outAnchor","inAnchor","calculateAnchorStyles","anchor","bodyNode","getClassVal","prepareInAnimation","endingClasses","startingClasses","animator","cloneNode","rootBodyElement","animatorIn","animatorOut","startingAnimator","currentAnimation","done","prepareFromToAnchorAnimation","anchors","fromAnimation","prepareRegularAnimation","toAnimation","anchorAnimations","outElement","inElement","animationRunners","all","animationDetails","rootNode","$$AnimateJsProvider","$injector","lookupAnimations","matches","flagMap","animationFactory","$$registeredAnimations","applyOptions","executeAnimationFn","classesToAdd","classesToRemove","groupEventedAnimations","fnName","operations","ani","endProgressCb","resolved","onAnimationComplete","packageAnimations","runners","animateFn","reject","before","afterFn","beforeFn","success","endAnimations","cancelled","closeActiveAnimations","chain","$$AnimateJsDriverProvider","$$animateJs","prepareAnimation","endFnFactory","NG_ANIMATE_ATTR_NAME","NG_ANIMATE_PIN_DATA","$$AnimateQueueProvider","makeTruthyCssClassMap","classString","ONE_SPACE","hasMatchingClasses","newClassString","currentClassString","currentClassMap","some","isAllowed","ruleType","previousAnimation","rules","hasAnimationClasses","and","PRE_DIGEST_STATE","RUNNING_STATE","skip","nA","nR","cA","cR","$$Map","$$animation","$templateRequest","$$isDocumentHidden","postDigestTaskFactory","postDigestCalled","$$postDigest","normalizeAnimationDetails","findCallbacks","targetParentNode","targetNode","entries","callbackRegistry","filterFromRegistry","list","matchContainer","matchCallback","containerNode","cleanupEventListeners","phase","$animate","queueAnimation","originalElement","notifyProgress","runInNextPostDigestOrNow","callbacks","progress","animationsEnabled","isAnimatableByFilter","isAnimatableClassName","isStructural","documentHidden","skipAnimations","disabledElementsLookup","existingAnimation","activeAnimationsLookup","hasExistingAnimation","areAnimationsAllowed","closeChildAnimations","isValidAnimation","clearElementAnimationState","counter","markElementAnimationState","animationCancelled","realRunner","children","querySelectorAll","child","delete","removeAttribute","animateChildren","bodyNodeDetected","nodeName","rootNodeDetected","parentAnimationDetected","elementDisabled","parentHost","details","parentNodeDisabled","setAttribute","oldValue","newValue","deregisterWatch","$watch","totalPendingRequests","isEmpty","customFilter","classNameFilter","returnTrue","Node","compareDocumentPosition","eventType","pin","parentElement","argCount","$$AnimationProvider","setRunner","RUNNER_STORAGE_KEY","removeRunner","getRunner","NG_ANIMATE_REF_ATTR","sortAnimations","processNode","processed","elementNode","domNode","lookup","parentEntry","tree","remainingLevelEntries","nextLevelEntries","row","childEntry","animationQueue","getAnchorNodes","SELECTOR","hasAttribute","groupAnimations","preparedAnimations","refLookup","enterOrMove","anchorNodes","direction","animationID","usedIndicesLookup","anchorGroups","lookupKey","group","beforeStart","cssClassesIntersection","out","in","indexKey","aa","j","invokeFirstDriver","driverName","driver","updateAnimationRunners","newRunner","update","handleDestroyedElement","tempClasses","prepareClassName","groupedAnimations","toBeSortedAnimations","animationEntry","startAnimationFn","closeFn","operation","animationRunner","ngAnimateSwapDirective","restrict","transclude","terminal","priority","$element","ctrl","$transclude","previousElement","previousScope","$watchCollection","ngAnimateSwap","leave","$destroy","$new","enter","info","angularVersion","directive","provider","ngAriaModule","watchExpr","attrName","ariaAttr","nodeBlackList","negate","ariaCamelName","$normalize","config","isNodeOneOf","boolVal","ariaHidden","ariaChecked","ariaReadonly","ariaDisabled","ariaRequired","ariaInvalid","ariaValue","tabindex","bindKeydown","bindRoleForClick","newConfig","$$watchExpr","nodeTypeArray","$aria","shouldAttachAttr","normalizedAttr","allowBlacklistEls","shouldAttachRole","role","getShape","compile","post","ngModel","ngAriaWatchModelValue","$modelValue","needsTabIndex","newVal","$viewValue","$isEmpty","needsAriaValuemin","needsAriaValuemax","needsAriaValuenow","$validators","required","$invalid","ngMessages","$parse","ngClick","ngKeydown","ngKeypress","ngKeyup","keyCode","which","$apply","$event","isNull","objectContains","partial","hasApproxPattern","word","pattern","getFirstMatches","n","expression","rest","convertToDecimal","num","decimal","pow","deepKeys","stack","isScope","$evalAsync","isGreaterThanFilter","input","check","isGreaterThanOrEqualToFilter","isLessThanFilter","isLessThanOrEqualToFilter","isEqualToFilter","isNotEqualToFilter","isIdenticalToFilter","isNotIdenticalToFilter","containsFilter","collection","flatten","uniqFilter","property","member","equals","uniqueItems","strRepeat","sep","isNumber","o1","o2","isGreaterThan","isGreaterThanOrEqualTo","isLessThan","isLessThanOrEqualTo","isEqualTo","==","isNotEqualTo","isIdenticalTo","===","isNotIdenticalTo","!==","filterWatcher","fillVal","fill","ret","isMemoized","memoize","joined","getter","setter","assign","every","strict","comparator","propList","shallow","csensitive","sensitive","_hasApproximateKey","flag","delimiter","reversed","reverse","increment","cb","nest","searchField","addKey","$key","unique","uniq","col1","col2","col","dElm","compared","bytes","isFinite","radians","degrees","PI","indexByMax","exp","mappedArray","indexByMin","divided","divider","Number","radix","RANGE","initial","reduce","prev","curr","ends","removeDiacritics","diacriticsMap","defaultDiacriticsRemovalap","base","letters","chars","RegExp","reg","times","sub","suffix","preserve","ch","encodeURI","getHashKey","fName","removeCache","targetScope","$id","$$listeners","$$cache","cleanStateless","$$timeout","$$phase","addListener","hashKey","$on","filterName","createModule","isKeyboardAvailbleOnFullScreen","Element","ALLOW_KEYBOARD_INPUT","emitter","$emit","serviceInstance","isEnabled","requestFullScreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","cancelFullScreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","toggleAll","isSupported","docElm","Fullscreen","$scope","$attrs","fullscreen","removeFullscreenHandler","isFullscreenEnabled","$eval","onlyWatchedProperty","ngMessageDirectiveFactory","ngMessagesCtrl","records","commentNode","staticExp","ngMessage","when","dynamicExp","ngMessageExp","whenExp","assignRecords","reRender","currentElement","messageCtrl","register","attach","newScope","$$attachId","getAttachId","deregister","isAttrTruthy","truthy","controller","findPreviousMessage","comment","prevNode","parentLookup","prevKey","$$ngMessageNode","messages","previousSibling","insertMessageNode","messageNode","head","removeMessageNode","latestKey","nextAttachId","renderLater","cachedCollection","render","ngMessagesMultiple","unmatchedMessages","matchedKeys","messageItem","messageFound","totalMessages","message","messageUsed","setClass","item","nextKey","$compile","replaceElementWithMarker","$$createComment","createComment","marker","ngMessagesInclude","then","$$destroyed","contents","isValidDottedPath","MEMBER_NAME_REGEX","lookupDottedPath","$resourceMinErr","ii","shallowClearAndCopy","dst","PROTOCOL_AND_IPV6_REGEX","stripTrailingSlashes","cancellable","actions","save","$http","$log","$q","Route","template","urlParams","resourceFactory","paramDefaults","extractParams","actionParams","ids","defaultResponseInterceptor","response","resource","Resource","route","toJSON","$promise","$resolved","$cancelRequest","action","hasBody","numericTimeout","a1","a2","a3","a4","error","params","timeoutDeferred","numericTimeoutPromise","isInstanceCall","httpConfig","responseInterceptor","interceptor","responseErrorInterceptor","responseError","hasError","hasResponseErrorInterceptor","defer","promise","resolve","setUrlParams","headers","statusText","catch","additionalParamDefaults","extendedParamDefaults","encodeUriQuery","$$encodeUriQuery","encodeUriSegment","$$encodeUriSegment","actionUrl","encodedVal","protocolAndIpv6","param","isQueryParamValue","paramInfo","urlParam","p1","leadingSlashes","tail","sanitizeText","htmlSanitizeWriter","lowercase","nodeContains","htmlParser","$sanitizeMinErr","toMap","lowercaseKeys","attrToMap","encodeEntities","SURROGATE_PAIR_REGEXP","charCodeAt","NON_ALPHANUMERIC_REGEXP","stripCustomNsAttrs","attrNode","lastIndexOf","removeAttributeNode","nextNode","firstChild","getNonDescendant","propName","outerHTML","outerText","svgEnabled","$$sanitizeUri","validElements","svgElements","isImage","enableSvg","handler","inertBodyElement","getInertBodyElement","mXSSAttempts","innerHTML","textContent","removeChild","uriValidator","ignoreCurrentElement","tag","blockedElements","lkey","validAttrs","uriAttrs","voidElements","optionalEndTagBlockElements","optionalEndTagInlineElements","optionalEndTagElements","blockElements","inlineElements","htmlAttrs","svgAttrs","inertDocument","implementation","createHTMLDocument","getDocumentElement","querySelector","DOMParser","parseFromString","documentMode","xhr","XMLHttpRequest","responseType","send","$sanitize","LINKY_URL_REGEXP","MAILTO_REGEXP","linkyMinErr","addText","attributesFn","raw","linkAttributes","curry","curried","func_args_length","initial_args","compose","pipe","funcs","_i","fn1","fn2","or","invoke","struct","x","isInjectable","not","identity","noop$1","createProxyFunctions","source","fnNames","latebind","bindFunction","makeLateRebindFn","acc","_inArray","_removeFrom","idx","_pushTo","opts","defaultsList","_defaultsList","defaultVals","pick","ancestors","second","propNames","objCopy","prop_1","omit","pluck","accept","pushR","assertFn","predicateOrMap","errMsg","arrayTuples","maxArrayLen","applyPairs","memo","keyValTuple","_extend","toObj","_equals","t1","tup","_arraysEq","isRegExp","any","uiViewString","uiview","creationContext","$type","fqn","normalizedCat","Category","matchState","criterion","toMatch","_state","globStrings","glob","Glob","makeEvent","registry","transitionService","hookRegistrationFn","matchObject","registeredHook","RegisteredHook","hooks","_deregistered","removeFrom","_registeredHooks","tupleSort","reverseDepthSort","factor","depthDelta","hook","ArrayType","arrayWrap","arrayUnwrap","arrayHandler","allTruthyMode","arrayEqualsHandler","val1","val2","_this","paramTypeFn","wrapperFn","dynamic","inherit","$arrayMode","unwrapShorthand","cfg","getStaticDefaultValue","isShorthand","$$fn","getType","urlType","paramTypes","DefType","CONFIG","PATH","SEARCH","ParamType","getSquashPolicy","isOptional","defaultPolicy","squash","getReplace","arrayMode","configuredKeys","maxLength","padString","kebobString","camelCase","$1","functionToString","fnStr","fnToString","namedFunctionMatch","toStr","_fn","seen","stringifyPattern","splitOnDelim","delim","re","joinNeighborsR","nameBuilder","selfBuilder","$$state","dataBuilder","pathBuilder","includesBuilder","includes","resolvablesBuilder","annotate","services","strictDi","token","provide","literal2Resolvable","Resolvable","resolveFn","deps","policy","useFactory","dependencies","useClass","useValue","useExisting","tuple2Resolvable","tuple","item2Resolvable","decl","resolveObj","resolvePolicies","resolvePolicy","quoteRegExp","surroundPattern","appendBasePath","isHtml5","absolute","baseHref","getHandlerFn","TargetState","isDef","addCoreResolvables","trans","addResolvable","UIRouter","router","Transition","entering","makeEnterExitRetainHook","hookName","transition","hookFn","lazyLoadState","lazyLoadFn","lazyLoad","states","stateRegistry","ignoredHook","ignoredReason","_ignoredReason","trace","traceTransitionIgnored","pending","globals","abort","Rejection","ignored","toPromise","invalidTransitionHook","parseUrl$1","orEmptyString","_a","splitHash","beforehash","_b","splitQuery","locationPluginFactory","serviceClass","configurationClass","service","locationService","configuration","locationConfig","dispose","servicesPlugin","templateFactory","Ng1ViewConfig","ng1ViewsBuilder","ctrlKeys","compKeys","nonCompKeys","allViewKeys","views","hasAnyKey","viewsObject","$default","component","resolveAs","$context","$name","normalized","ViewService","normalizeUIViewTarget","$uiViewName","uiViewName","$uiViewContextAnchor","uiViewContextAnchor","getComponentBindings","cmpDefs","getBindings","unnestR","$uiRouter","$locationProvider","$location","$browser","$templateCache","ng1LocationService","_runtimeServices","stateProvider","StateProvider","stateService","decorator","getStateHookBuilder","viewService","_pluginapi","_viewConfigFactory","getNg1ViewConfigFactory","Ng1LocationServices","monkeyPatchPathParameterType","$inject","runBlock","resolvables","resolvable","watchDigests","approximateDigests","parseStateRef","ref","parsed","paramsOnly","paramExpr","stateContext","$uiView","inheritedData","processedDef","$state","def","uiState","current","uiStateOpts","defaultOpts","uiStateParams","getTypeInfo","isSvg","isForm","isAnchor","clickable","clickHook","getDef","button","ctrlKey","metaKey","shiftKey","ignorePreventDefaultCount","relative","$current","bindEvents","events_1","event_1","events_2","event_2","$IsStateFilter","isFilter","$stateful","$IncludedByStateFilter","includesFilter","$ViewDirectiveFill","$controller","$transitions","$view","getControllerAs","getResolveAs","tElement","$cfg","viewDecl","getTemplate","resolveCtx","ResolveContext","traceUIViewFill","controllerAs","locals","getLocals","controllerInstance","registerControllerCallbacks","cmp_1","kebobName","tagRegexp_1","deregisterWatch_1","directiveEl","ctrlInstance","$onInit","hasComponentImpl","viewState","hookOptions","uiOnParamsChanged","viewCreationTrans_1","getResolvable","onSuccess","$transition$","exiting","toParams","fromParams","toSchema","treeChanges","paramSchema","fromSchema","changedToParams","changedKeys_1","newValues","uiCanExit","id_1","_uiCanExitId","prevTruthyAnswer_1","redirectedFrom","criteria","onBefore","ng_from_global","ng","ng_from_import","ng_from_import.module","propEq","ctor","eq","other","regexpString","seg","regexp","fromString","StateObject","stateDecl","isStateClass","__stateObjectCache","nameGlob","matchingKeys","isState","tis","isNullOrUndefined","isPromise","notImplemented","fnname","fromJson","toJson","dest","extra","pushTo","deregAll","functions","mergeR","mapObj","allTrueR","anyTrueR","flattenR","uniqR","unnest","assertPredicate","assertMap","pairs","silenceUncaughtInPromise","silentRejection","Queue","_items","_limit","enqueue","dequeue","peekTail","peekHead","RejectType","_transitionRejection","isRejectionPromise","superseded","rejection","SUPERSEDED","redirected","invalid","INVALID","IGNORED","aborted","ABORTED","errored","ERROR","normalize","viewConfigString","viewConfig","_tid","_rid","transLbl","Trace","_enabled","_set","categories","k","category","traceTransitionStart","TRANSITION","traceHookInvocation","step","HOOK","context","traceHookResult","hookResult","transitionOptions","traceResolvePath","RESOLVE","traceResolvableResolved","traceError","traceSuccess","finalState","traceUIViewEvent","viewData","UIVIEW","traceUIViewConfigUpdated","traceViewSync","VIEWCONFIG","mapping","uiViewData","ui-view fqn","state: view name","localeCompare","table","traceViewServiceEvent","traceViewServiceUIViewEvent","TransitionHookPhase","TransitionHookScope","_identifier","_definition","_params","_options","identifier","exists","stateName","traceData","TransitionHook","isSuperseded","hookPhase","RUN","isActive","logError","defaultErrorHandler","invokeHook","notCurrent","getNotCurrentRejection","handleError","getErrorHandler","handleResult","getResultHandler","synchronous","handleHookResult","_disposed","_aborted","waitFor","nextHook","invokeHooks","remainingHooks","runAllHooks","HANDLE_RESULT","LOG_REJECTED_RESULT","LOG_ERROR","REJECT_ERROR","THROW_ERROR","tranSvc","matchCriteria","_matchingNodes","nodes","matching","_getDefaultMatchCriteria","_getPathTypes","_getMatchingNodes","mn","pathtype","isStateHook","STATE","HookBuilder","buildHooksForPhase","_getEvents","buildHooks","hookType","matchingHooks","getMatchingHooks","baseHookOptions","criteriaMatchPath","transitionHook","reverseSort","isCreate","CREATE","getHooks","encode","decode","$subPattern","$asArray","isSearch","hasOwn","Param","urlMatcherFactory","arrayDefaults","arrayParamNomenclature","defaultSquashPolicy","inherit$$1","isDefaultValue","_defaultValueCache","defaultValue","validates","encoded","values$$1","paramValues","params_1","changed","values1","values2","PathNode","stateOrNode","res","applyRawParams","getParamVal","paramDef","pDef","paramsFn","diff","PathUtils","makeTargetState","buildPath","targetState","buildToPath","fromPath","toPath","inheritParams","applyViewConfigs","viewDecls","subPath","viewConfigs","createViewConfig","toKeys","nodeParamVals","noInherit","toNode","toParamVals","incomingParamVals","fromParamVals","ownParamVals","reloadState","keep","node1","node2","nonDynamicParams","retained","retainedWithToParams","retainedNode","cloned","pathA","pathB","nodeA","nodeB","predicate","elementIdx","defaultResolvePolicy","async","arg1","literal","getPolicy","thisPolicy","statePolicy","resolveContext","findNode","maybeWaitForRx","observable$","cached","take","getDependencies","resolvedDeps","resolvedValue","fromData","LAZY","EAGER","WAIT","NOWAIT","RXWAIT","ALL_WHENS","EAGER_WHENS","NATIVE_INJECTOR_TOKEN","_path","getTokens","subContext","addResolvables","newResolvables","resolvePath","matchedWhens","matchesPolicy","acceptedVals","whenOrAsync","promises","nodeResolvables","nowait","wait","getResult","injector","_injector","UIInjectorImpl","availableResolvables","fromInjector","getNative","native","getAsync","stateSelf","_deferred","_hookBuilder","_targetState","_transitionCount","_treeChanges","createTransitionHookRegFns","onCreateHooks","onStart","onExit","onRetain","onEnter","onFinish","onError","enteringStates","$from","$to","compare","freeze","pathName","getResolveTokens","topath","originalTransition","rf","redirect","redirects","redirectOpts","newTransition","originalEnteringNodes","redirectEnteringNodes","_changedParams","tc","reload","nodeSchemas","schema","toVals","fromVals","changes","newTC","pendTC","run","getHooksFor","allBeforeHooks","BEFORE","lastStartedTransitionId","transitionHistory","allRunHooks","SUCCESS","_error","abstract","paramDefs","invalidParams","fromStateOrName","toStateOrName","avoidEmptyHash","diToken","stringifyPatternFn","isRejection","beforeAfterSubstr","char","ParamTypes","typeQueue","defaultTypes","types","definition","definitionFn","_flushTypeQueue","makeDefaultType","valToString","defaultTypeBase","int","Boolean","capture","defaultRuleSortFn","StateParams","$inherit","newParams","parentParams","inherited","inheritList","getUrlBuilder","$urlMatcherFactoryProvider","stateDec","paramMap","paramConfig","reloadOnSearch","isMatcher","navigable","getNavigableBuilder","isRoot","getParamsBuilder","paramFactory","nonUrlParams","fromConfig","StateBuilder","matcher","builders","parentName","build","parentFn","segments","pop","StateMatcher","_states","isRelative","stateOrName","matchGlob","isStr","baseState","splitName","pathLength","relName","StateQueueManager","$registry","$urlRouter","listeners","registered","orphans","previousQueueLength","getState","name_1","orphanIdx","existingState","existingFutureState","attachRoute","listener","rule","urlRuleFactory","StateRegistry","_router","stateQueue","urlRouter","_registerRoot","rootStateDef","#","_root","onStatesChanged","stateDefinition","_deregisterTree","getChildren","deregistered","$ur","removeRule","deregisteredStates","found","func","memoizeTo","splitOnSlash","UrlMatcher","_cache","_children","_segments","_compiled","caseInsensitive","placeholder","searchPlaceholder","last","patterns","checkParamErrors","nameValidator","matchDetails","lastIndex","fromSearch","allParams","pathParams","searchParams","nPathSegments","urlm","reverseString","validParamVal","getDetails","urlMatchers","pathSegmentsAndParams","queryParams","encodeDashes","queryString","paramDetails","weights","weightsA","weightsB","padVal","cmp","UrlMatcherFactory","_isCaseInsensitive","_isStrictMode","_defaultSquashPolicy","_getConfig","strictMode","UrlRuleFactory","what","makeRule","_what","fromUrlMatcher","fromState","fromRegExp","BaseUrlRule","urlMatcher","_handler","matchPriority","optional","transitionTo","global","sticky","isUrlRule","prioritySort","typeSort","URLMATCHER","REGEXP","RAW","OTHER","urlMatcherSort","idSort","useMatchPriority","UrlRouter","_sortFn","_rules","interceptDeferred","_id","_sorted","listen","_otherwiseFn","compareFn","stableSort","ensureSorted","arrOfWrapper","wrapperA","wrapperB","cmpDiff","wrapper","best","weight","sync","defaultPrevented","$url","urlService","newurl","_stopFn","onChange","html5Mode","hashPrefix","slash","otherwise","handlerFn","urlParts","deferIntercept","_uiViews","_viewConfigs","_viewConfigFactories","_rootViewContext","_registeredUIViews","_activeViewConfigs","_rootContext","viewType","cfgFactory","cfgs","deactivateViewConfig","activateViewConfig","viewConfigDepth","uiViewsByFqn","uiv","depthCompare","depthFn","posNeg","uiView","stateDepth","matchingConfigs","configUpdated","registerUIView","uiViews","active","rawViewName","viewAtContext","relativeViewNameSugar","vc","vcSegments","uivSegments","negOffset","fqnToFirstSegment","uiViewContext","UIRouterGlobals","successfulTransitions","makeStub","locationServicesFns","locationConfigFns","umfFns","rulesFns","syncFns","UrlService","lateBind","locationServices","umf","locationServiceStub","locationConfigStub","_routerInstance","_disposables","TransitionService","StateService","_plugins","disposable","getPlugin","registerAddCoreResolvables","onCreate","redirectToHook","redirectTo","registerRedirectToHook","onExitHook","registerOnExitHook","onRetainHook","registerOnRetainHook","onEnterHook","registerOnEnterHook","eagerResolvePath","registerEagerResolvePath","lazyResolveState","registerLazyResolveState","loadEnteringViews","enteringViews","load","registerLoadEnteringViews","activateViews","exitingViews","registerActivateViews","updateGlobalState","clearCurrentTransition","registerUpdateGlobalState","updateUrl","urlOptions","registerUpdateUrl","lazyLoadHook","orig","registerLazyLoadHook","TransitionEventType","hookOrder","registerIgnoredTransitionHook","registerInvalidTransitionHook","defaultTransOpts","notify","custom","_eventTypes","_criteriaPaths","_deregisterHookFns","_defineCorePaths","_defineCoreEvents","_registerCoreTransitionHooks","hooksArray","Phase","TH","paths","_defineEvent","_definePathType","cmpByPhase","hookScope","fns","addCoreResolves","eagerResolve","lazyResolve","loadViews","updateGlobals","invalidCallbacks","_defaultErrorHandler","$error$","getters","boundFns","defineProperty","_handleInvalidTargetState","toState","invokeNextCallback","nextCallback","callbackQueue","checkForRedirect","latestThing","latest","onInvalid","transOpts","getCurrentPath","latestSuccess","currentPath","rejectedTransitionHandler","isLatest","transitionToPromise","include","lossy","nav","Promise","deferred","val$$1","STRIP_COMMENTS","ARGUMENT_NAMES","has","ensureExist","splitEqual","trimHashVal","keyValsToObjectR","accum","getParams","buildUrl","loc","searchObject","BaseLocationServices","fireAfterUpdate","_listener","_listeners","_get","_location","_history","history","evt_1","Event","HashLocationService","_super","addEventListener","__extends","removeEventListener","MemoryLocationService","_url","PushStateLocationService","_config","fullUrl","replaceState","pushState","MemoryLocationConfig","_baseHref","_port","_protocol","_host","_hashPrefix","newval","BrowserLocationConfig","_isHtml5","newprefix","applyDocumentBaseHref","baseTags","getElementsByTagName","hashLocationPlugin","pushStateLocationPlugin","memoryLocationPlugin","UIRouterPluginBase","loaded","makeComponentTemplate","bindings","getController","controllerProvider","providerFn","TemplateFactory","_useHttp","version","minor","useHttpService","asTemplate","asComponent","templateUrl","fromUrl","templateProvider","fromProvider","componentProvider","fromComponentProvider","Accept","prefix","kebob","kebobed","resolveName","scopeBindings","bindToController","bindingsObj","$state$","_urlListeners","_lp","newUrl","_loc","_browser","pathType","~","/","~~","~2F","UrlRouterProvider","_urlRouter","ruleFn","injectableHandler","$match","$stateParams","mod_init","mod_util","mod_rtr","mod_state","mod_main","getProviderFor","serviceName","$urp","uiRouter","urlRouterProvider","$urlMatcherFactory","uiSref","ctx","uiSrefActive","unlinkInfoFn","$$addStateInfo","$set","rawDef","uiSrefOpts","inputAttrs","watchDeregFns","expr","updateAfterTransition","addState","stateParams","activeClass","stateInfo","splitClasses","getClasses","stateList","allClasses","activeEqClass","fuzzyClasses","exactClasses","addClasses","removeClasses","cls","uiSrefActiveEq","newState","$uiViewScroll","getRenderer","configsEqual","config1","config2","rootData","tAttrs","cleanupLastView","previousEl","currentScope","activeUIView","currentEl","_viewData_1","renderer","$$animLeave","updateView","animEnter","animLeave","$uiViewData","$uiViewAnim","$animEnter","$animLeave","autoScrollExp","onloadExp","unregister","fromParentTagConfig","fromParentTag","useAnchorScroll","$anchorScroll","scrollIntoView","FileAPI","shouldLoad","setRequestHeader","header","Function","ngFileUpload","sendHttp","progressFunc","getNotifyEvent","_start","resumeSupported","_file","lengthComputable","uploadWithAngular","_chunkSize","_finished","fileSize","_end","upload","disableProgress","__setXHR_","__XHR","xhrFn","resumeSizeUrl","resumeSizeResponseReader","resumeSize","origXhrFn","promisesCount","isResumeSupported","isUploadInProgress","rename","ngfName","jsonBlob","_ngfBlob","isFile","internal","toResumeFile","formData","addFieldToFormData","toISOString","_fileKey","$$ngfCircularDetection","objectKey","arrayKey","_isDigested","translateScalars","resumeChunkSize","transformRequest","FormData","fields","formDataAppender","urlToBlob","arrayBufferView","UploadExif","applyExifRotations","files","emptyPromise","f","attrGetter","$file","happyPromise","applyExifRotation","fixedFile","resizeFile","resizeVal","isResizeSupported","resizeWithParams","validatePattern","resizeIf","$width","$height","resize","resizedFile","$error","$errorMessages","$errorParam","$ngfValidations","applyModelValidation","getAttrWithDefaults","attrVal","shouldUpdateOn","modelOptions","updateOn","rejectPromise","updateModel","fileChange","noDelay","invalidFiles","newFiles","dupFiles","isSingleModel","$$ngfPrevValidFiles","$$ngfPrevInvalidFiles","invalidFile","$setViewValue","$files","$newFiles","$duplicateFiles","$invalidFiles","$invalidFile","invalidModel","resizeAndUpdate","prevValidFiles","valids","prevInvalidFiles","invalids","debounce","resizingFiles","validateAfterResize","allNewFiles","validate","validationResult","validsFiles","invalidsFiles","f1","f2","$ngfOrigSize","allowInvalid","validFiles","isExifSupported","Upload","isDelayedClickSupported","ua","androidFixMinorVersion","linkFileSelect","isInputTypeFile","fileChangeAttr","changeFn","fileList","__files_","bindAttrToFileInput","fileElem","label","updateId","attribute","unwatches","detectSwipe","initialTouchStartX","initialTouchStartY","currentX","currentY","resetModel","ie10SameFileSelectFix","replaceWith","registerModelChangeValidator","generatedElems","appendChild","appVersion","$formatters","ngfFixIE","getTagType","linkFileDirective","directiveName","resizeParams","isBackground","constructDataUrl","disallowObjectUrl","dataUrl","$ngfDataUrl","$ngfBlobUrl","naturalWidth","naturalHeight","clientHeight","UploadBase","base64DataUrl","ff","$$ngfDataUrlPromise","$$ngfBlobUrlPromise","FileReader","blobUrls","blobUrlsTotalSize","maxMemory","blobUrlsMaxMemory","blobUrlsMaxQueueSize","fileReader","onerror","readAsDataURL","$compileProvider","imgSrcSanitizationWhitelist","aHrefSanitizationWhitelist","UploadDataUrl","$sce","trustedUrl","trustAsResourceUrl","$ngfDataUrlFilterInProgress","globStringToRegex","excludes","markModelAsDirty","$dirty","$setDirty","exclude","ratioToFloat","xIndex","filesArray","validation","$setValidity","getValidationAttr","validationName","dName","prevLength","validateSync","ignoredErrors","runAllValidation","validateAsync","asyncFn","resolveResult","resolveInternal","imageDimensions","mediaDuration","$duration","deffer","totalSize","$ngfWidth","$ngfHeight","$ngfDimensionPromise","img","checkLoadErrorInCaseOfNoCallback","secondsCounter","$ngfDuration","$ngfDurationPromise","checkLoadError","UploadValidate","calculateAspectRatioFit","srcWidth","srcHeight","maxHeight","centerCrop","ratio","marginX","marginY","imagen","quality","canvasElement","imageElement","imgWidth","imgHeight","ratioFloat","dimensions","getContext","drawImage","toDataURL","dataUrltoBlob","dataurl","origSize","mime","bstr","u8arr","$ngfName","configurable","restoreExif","linkDrop","isDisabled","extractFilesAndUpdateModel","updateOnType","getData","extractFiles","extractFilesFromHtml","calculateDragOverClass","dClass","dragOverDelay","dataTransfer","allowDir","traverseFileTree","isDirectory","includeDir","dirReader","createReader","readEntries","maxFiles","maxTotalSize","MAX_VALUE","webkitGetAsEntry","getAsFile","dropAvailable","actualDragOverClass","leaveTimeout","effectAllowed","dropEffect","clazz","$isDragging","$class","clipboardData","div","model","UploadResize","applyTransform","orientation","transform","arrayBufferToBase64","binary","byteLength","readAsArrayBuffer","readOrientation","reader","slicedFile","DataView","getUint16","getUint32","little","tags","setUint16","fixedArrayBuffer","canvas","resized","ExifRestorer","KEY_STR","encode64","chr1","chr2","enc1","enc2","enc3","chr3","enc4","origFileBase64","resizedFileBase64","rawImage","decode64","slice2Segments","image","exifManipulation","exifArray","getExifArray","newImageArray","insertExif","imageData","separatePoint","mae","ato","rawImageArray","endPoint","mod","ws","angularWebsocket","_angular","$WebSocketProvider","$websocketBackend","$WebSocket","protocols","ssl","rootScopeFailover","useApplyAsync","initialTimeout","maxTimeout","reconnectIfNotNormalClose","binaryType","_reconnectAttempts","sendQueue","onOpenCallbacks","onMessageCallbacks","onErrorCallbacks","onCloseCallbacks","objectFreeze","_readyStateConstants","_connect","_setInternalState","CONNECTING","OPEN","CLOSING","CLOSED","RECONNECT_ABORTED","_normalCloseCode","_reconnectableStatusCodes","safeDigest","autoApply","$digest","bindToScope","force","socket","readyState","onmessage","_angular2","_onMessageHandler","onopen","_onOpenHandler","_onErrorHandler","onclose","_onCloseHandler","fireQueue","notifyOpenCallbacks","notifyCloseCallbacks","notifyErrorCallbacks","onOpen","onClose","onMessage","$applyAsync","reconnect","applyAsyncOrDigest","arraySlice","currentCallback","bufferedAmount","cancelableify","isMocked","isConnected","mockSend","backoffDelay","_getBackoffDelay","backoffDelaySeconds","attempt","R","T","N","M","objectDefineProperty","_internalConnectionState","$WebSocketBackendProvider","Socket","createWebSocketBackend","warn","__esModule","_typeof","Symbol","iterator","Client","client","WebSocket","MozWebSocket","elt","u","1","randInt","CHAR","ignoreCase","defaultRange","subtract","ROOT","GROUP","followedBy","notFollowedBy","remember","groupNumber","POSITION","SET","REPETITION","REFERENCE","multiline","tokens","gen","randexp","_randexp","sugar","discontinuous-range","2","low","high","ranges","overlaps","3","strToChars","wordBoundary","nonWordBoundary","words","notWords","ints","notInts","whitespace","notWhitespace","begin","y","tokenizeClass","anyChar","C","./positions","./sets","./types","./util","4","5","6","7","0","SyntaxError","KEYS","up","down","backspace","leftCmd","rightCmd","alt","tab","onbeforeprint","onafterprint","matchMedia","mediaQueryList","mql","userPermissions","isSuperuser","hasPermission","requiredPermission","atLeastPermissions","requiredPermissions","hasPermissions","remoteUrl","keyword","keywordField","selectItem","__","focus","blur","isFetching","showResults","searchFocus","checkFocus","searchBlur","selectInternalItem","inputChangedPromise","isChild","isSelf","addon","templateTag","emptyTag","$filter","positionTracker","picker_instance","setHours","FromDate","ToDate","resultArray","meridian","i18n","__DICT","loadJSON","locale_json","callbackImage","retryGetImage","fallbackRetry","retry","new_value","zoomReset","max-height","zoomIn","zoomOut","zoomExpand","defaultValues","ngSrc","afterPromises","topCount","callbackFunction","remoteSearchResults","remoteSearch","ngEnter","disableSearch","valueAttr","labelAttr","dropdownClass","limit","rtl","removeButton","softDelete","closeAfterSelection","dropdown","selectInput","originParents","inputCtrl","selectCtrl","selectedValues","highlighted","Infinity","defaultsKey","getObjValue","setObjValue","optionValue","optionEquals","optionToObject","dataset","fillWithHtml","updateSelected","initialize","filterOptions","updateValue","setInputWidth","dropdownPosition","offsetWidth","offsetHeight","showDropdown","isOpen","scrollToHighlighted","resetInput","highlight","filteredOptions","decrementHighlighted","incrementHighlighted","unset","keydown","inOptions","measureWidth","shadow","$pristine","$touched","indexes","isDirty","isInvalid","dropdownItemTemplate","viewItemTemplate","tooltipster_default","tooltipsterOptions","tooltipsterMenu","closeTooltip","tooltipsterHtml","getMatchValue","matchGetter","caselessGetter","matchCaseless","noMatchGetter","notMatch","matchIgnoreEmptyGetter","matchIgnoreEmpty","$$parseAndValidate","modelValue","viewValue","default_options","lineColor","displayValue","JsBarcode","isOwn","equalObj","diffValue","equal","isValidAttr","valueDiff","removed","added","typeA","typeB","getPatchChanges","init_obj","mod_obj","_mod_obj","_diff","op","SerImagePowered","$urlRouterProvider","$resourceProvider","$httpProvider","paramSerialize","GUID_REGEXP","backHistory","back","bodyHeight","trustAsHtml"],"mappings":"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","file":"ser-ui.min.js","sourcesContent":["angular.module('SER.utils', []);\n\n// Key codes\nvar KEYS = { up: 38, down: 40, left: 37, right: 39, escape: 27, enter: 13, backspace: 8, delete: 46, shift: 16, leftCmd: 91, rightCmd: 93, ctrl: 17, alt: 18, tab: 9 };\n\nfunction getStyles(element) {\n    return !(element instanceof HTMLElement) ? {} :\n        element.ownerDocument && element.ownerDocument.defaultView.opener\n            ? element.ownerDocument.defaultView.getComputedStyle(element)\n            : window.getComputedStyle(element);\n}\n\nfunction arrayGroupBy(array, field) {\n\n    var array_group_by = {};\n\n    for (var index = 0; index < array.length; ++index) {\n\n        if (array_group_by[array[index][field]] === undefined)\n            array_group_by[array[index][field]] = [];\n\n        array_group_by[array[index][field]].push(array[index]);\n    }\n\n    return array_group_by;\n}\n\nfunction hasValue(value) {\n    if (angular.isArray(value)) {\n        return 0 < value.length;\n    } else if (angular.isDate(value)) {\n        return true;\n    } else if (angular.isObject(value)) {\n        return !angular.element.isEmptyObject(value);\n    } else {\n        return ['', null, undefined, NaN].indexOf(value) === -1;\n    }\n}\n\nfunction notValue(value) {\n    if (angular.isArray(value)) {\n        return 0 === value.length;\n    } else if (angular.isDate(value)) {\n        return false;\n    } else if (angular.isObject(value)) {\n        return angular.element.isEmptyObject(value);\n    } else {\n        return ['', null, undefined, NaN].indexOf(value) > -1;\n    }\n}\n\nfunction hasProperty(obj, key) {\n    if (obj){\n        return obj.hasOwnProperty(key);\n    } else {\n        return false;\n    }\n}\n\nfunction inArray(value, array) {\n    return array ? array.indexOf(value) !== -1 : false;\n}\n\nfunction notInArray(value, array) {\n    return array ? array.indexOf(value) === -1 : false;\n}\n\nfunction getObjectByValue(array, attr, value) {\n\n    for (var i = 0; i < array.length; i++) {\n\n        if (array[i].hasOwnProperty(attr)) {\n\n            if (array[i][attr] === value) {\n\n                return array[i];\n\n            } else {\n\n                for (var prop in array[i][attr]) {\n\n                    if (array[i][attr][prop] === value) {\n\n                        return array[i];\n\n                    }\n\n                }\n\n            }\n\n        }\n\n    }\n}\n\nfunction browserWidth() {\n    return 0 < window.innerWidth ? window.innerWidth : screen.width;\n}\n\nfunction hasPdfViewer() {\n    for (var index = 0; index < window.navigator.plugins.length; index++) {\n        if (window.navigator.plugins[index].name.toLowerCase().indexOf(\"pdf\") > -1) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction getRandomInt(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction hasFiles(Files) {\n    \n    var result = false;\n\n    var isFile = function (file) {\n        return file != null && (file instanceof window.Blob || (file.flashId && file.name && file.size));\n    };\n\n    for (var key in Files) {\n        if (isFile(Files[key])) {\n            result = true;\n            break;\n        }\n    }\n\n    return result;\n\n}\n\nfunction guid() {\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n        s4() + '-' + s4() + s4() + s4();\n}\n\nfunction s4() {\n    return Math.floor((1 + Math.random()) * 0x10000)\n        .toString(16)\n        .substring(1);\n}\n\nwindow.onbeforeprint = function () {\n    console.log('Functionality to run before printing: ', window.location.href);\n};\nwindow.onafterprint = function () {\n    console.log('Functionality to run after printing: ', window.location.href);\n};\n\nif (window.matchMedia) {\n    var mediaQueryList = window.matchMedia('print');\n    mediaQueryList.addListener(function (mql) {\n        if (mql.matches) {\n            window.onbeforeprint();\n        } else {\n            window.onafterprint();\n        }\n    });\n}","/*!\n * JavaScript Cookie v2.1.4\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","/**\r\n * tooltipster http://iamceege.github.io/tooltipster/\r\n * A rockin' custom tooltip jQuery plugin\r\n * Developed by Caleb Jacob and Louis Ameline\r\n * MIT license\r\n */\r\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    define([\"jquery\"], function (a0) {\n      return (factory(a0));\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(require(\"jquery\"));\n  } else {\n    factory(jQuery);\n  }\n}(this, function ($) {\n\n// This file will be UMDified by a build task.\n\nvar defaults = {\n\t\tanimation: 'fade',\n\t\tanimationDuration: 350,\n\t\tcontent: null,\n\t\tcontentAsHTML: false,\n\t\tcontentCloning: false,\n\t\tdebug: true,\n\t\tdelay: 300,\n\t\tdelayTouch: [300, 500],\n\t\tfunctionInit: null,\n\t\tfunctionBefore: null,\n\t\tfunctionReady: null,\n\t\tfunctionAfter: null,\n\t\tfunctionFormat: null,\n\t\tIEmin: 6,\n\t\tinteractive: false,\n\t\tmultiple: false,\n\t\t// must be 'body' for now, or an element positioned at (0, 0)\n\t\t// in the document, typically like the very top views of an app.\n\t\tparent: 'body',\n\t\tplugins: ['sideTip'],\n\t\trepositionOnScroll: false,\n\t\trestoration: 'none',\n\t\tselfDestruction: true,\n\t\ttheme: [],\n\t\ttimer: 0,\n\t\ttrackerInterval: 500,\n\t\ttrackOrigin: false,\n\t\ttrackTooltip: false,\n\t\ttrigger: 'hover',\n\t\ttriggerClose: {\n\t\t\tclick: false,\n\t\t\tmouseleave: false,\n\t\t\toriginClick: false,\n\t\t\tscroll: false,\n\t\t\ttap: false,\n\t\t\ttouchleave: false\n\t\t},\n\t\ttriggerOpen: {\n\t\t\tclick: false,\n\t\t\tmouseenter: false,\n\t\t\ttap: false,\n\t\t\ttouchstart: false\n\t\t},\n\t\tupdateAnimation: 'rotate',\n\t\tzIndex: 9999999\n\t},\n\t// we'll avoid using the 'window' global as a good practice but npm's\n\t// jquery@<2.1.0 package actually requires a 'window' global, so not sure\n\t// it's useful at all\n\twin = (typeof window != 'undefined') ? window : null,\n\t// env will be proxied by the core for plugins to have access its properties\n\tenv = {\n\t\t// detect if this device can trigger touch events. Better have a false\n\t\t// positive (unused listeners, that's ok) than a false negative.\n\t\t// https://github.com/Modernizr/Modernizr/blob/master/feature-detects/touchevents.js\n\t\t// http://stackoverflow.com/questions/4817029/whats-the-best-way-to-detect-a-touch-screen-device-using-javascript\n\t\thasTouchCapability: !!(\n\t\t\twin\n\t\t\t&&\t(\t'ontouchstart' in win\n\t\t\t\t||\t(win.DocumentTouch && win.document instanceof win.DocumentTouch)\n\t\t\t\t||\twin.navigator.maxTouchPoints\n\t\t\t)\n\t\t),\n\t\thasTransitions: transitionSupport(),\n\t\tIE: false,\n\t\t// don't set manually, it will be updated by a build task after the manifest\n\t\tsemVer: '4.1.7',\n\t\twindow: win\n\t},\n\tcore = function() {\n\t\t\n\t\t// core variables\n\t\t\n\t\t// the core emitters\n\t\tthis.__$emitterPrivate = $({});\n\t\tthis.__$emitterPublic = $({});\n\t\tthis.__instancesLatestArr = [];\n\t\t// collects plugin constructors\n\t\tthis.__plugins = {};\n\t\t// proxy env variables for plugins who might use them\n\t\tthis._env = env;\n\t};\n\n// core methods\ncore.prototype = {\n\t\n\t/**\n\t * A function to proxy the public methods of an object onto another\n\t *\n\t * @param {object} constructor The constructor to bridge\n\t * @param {object} obj The object that will get new methods (an instance or the core)\n\t * @param {string} pluginName A plugin name for the console log message\n\t * @return {core}\n\t * @private\n\t */\n\t__bridge: function(constructor, obj, pluginName) {\n\t\t\n\t\t// if it's not already bridged\n\t\tif (!obj[pluginName]) {\n\t\t\t\n\t\t\tvar fn = function() {};\n\t\t\tfn.prototype = constructor;\n\t\t\t\n\t\t\tvar pluginInstance = new fn();\n\t\t\t\n\t\t\t// the _init method has to exist in instance constructors but might be missing\n\t\t\t// in core constructors\n\t\t\tif (pluginInstance.__init) {\n\t\t\t\tpluginInstance.__init(obj);\n\t\t\t}\n\t\t\t\n\t\t\t$.each(constructor, function(methodName, fn) {\n\t\t\t\t\n\t\t\t\t// don't proxy \"private\" methods, only \"protected\" and public ones\n\t\t\t\tif (methodName.indexOf('__') != 0) {\n\t\t\t\t\t\n\t\t\t\t\t// if the method does not exist yet\n\t\t\t\t\tif (!obj[methodName]) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tobj[methodName] = function() {\n\t\t\t\t\t\t\treturn pluginInstance[methodName].apply(pluginInstance, Array.prototype.slice.apply(arguments));\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\t// remember to which plugin this method corresponds (several plugins may\n\t\t\t\t\t\t// have methods of the same name, we need to be sure)\n\t\t\t\t\t\tobj[methodName].bridged = pluginInstance;\n\t\t\t\t\t}\n\t\t\t\t\telse if (defaults.debug) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tconsole.log('The '+ methodName +' method of the '+ pluginName\n\t\t\t\t\t\t\t+' plugin conflicts with another plugin or native methods');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tobj[pluginName] = pluginInstance;\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * For mockup in Node env if need be, for testing purposes\n\t *\n\t * @return {core}\n\t * @private\n\t */\n\t__setWindow: function(window) {\n\t\tenv.window = window;\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Returns a ruler, a tool to help measure the size of a tooltip under\n\t * various settings. Meant for plugins\n\t * \n\t * @see Ruler\n\t * @return {object} A Ruler instance\n\t * @protected\n\t */\n\t_getRuler: function($tooltip) {\n\t\treturn new Ruler($tooltip);\n\t},\n\t\n\t/**\n\t * For internal use by plugins, if needed\n\t *\n\t * @return {core}\n\t * @protected\n\t */\n\t_off: function() {\n\t\tthis.__$emitterPrivate.off.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * For internal use by plugins, if needed\n\t *\n\t * @return {core}\n\t * @protected\n\t */\n\t_on: function() {\n\t\tthis.__$emitterPrivate.on.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * For internal use by plugins, if needed\n\t *\n\t * @return {core}\n\t * @protected\n\t */\n\t_one: function() {\n\t\tthis.__$emitterPrivate.one.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Returns (getter) or adds (setter) a plugin\n\t *\n\t * @param {string|object} plugin Provide a string (in the full form\n\t * \"namespace.name\") to use as as getter, an object to use as a setter\n\t * @return {object|core}\n\t * @protected\n\t */\n\t_plugin: function(plugin) {\n\t\t\n\t\tvar self = this;\n\t\t\n\t\t// getter\n\t\tif (typeof plugin == 'string') {\n\t\t\t\n\t\t\tvar pluginName = plugin,\n\t\t\t\tp = null;\n\t\t\t\n\t\t\t// if the namespace is provided, it's easy to search\n\t\t\tif (pluginName.indexOf('.') > 0) {\n\t\t\t\tp = self.__plugins[pluginName];\n\t\t\t}\n\t\t\t// otherwise, return the first name that matches\n\t\t\telse {\n\t\t\t\t$.each(self.__plugins, function(i, plugin) {\n\t\t\t\t\t\n\t\t\t\t\tif (plugin.name.substring(plugin.name.length - pluginName.length - 1) == '.'+ pluginName) {\n\t\t\t\t\t\tp = plugin;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\treturn p;\n\t\t}\n\t\t// setter\n\t\telse {\n\t\t\t\n\t\t\t// force namespaces\n\t\t\tif (plugin.name.indexOf('.') < 0) {\n\t\t\t\tthrow new Error('Plugins must be namespaced');\n\t\t\t}\n\t\t\t\n\t\t\tself.__plugins[plugin.name] = plugin;\n\t\t\t\n\t\t\t// if the plugin has core features\n\t\t\tif (plugin.core) {\n\t\t\t\t\n\t\t\t\t// bridge non-private methods onto the core to allow new core methods\n\t\t\t\tself.__bridge(plugin.core, self, plugin.name);\n\t\t\t}\n\t\t\t\n\t\t\treturn this;\n\t\t}\n\t},\n\t\n\t/**\n\t * Trigger events on the core emitters\n\t * \n\t * @returns {core}\n\t * @protected\n\t */\n\t_trigger: function() {\n\t\t\n\t\tvar args = Array.prototype.slice.apply(arguments);\n\t\t\n\t\tif (typeof args[0] == 'string') {\n\t\t\targs[0] = { type: args[0] };\n\t\t}\n\t\t\n\t\t// note: the order of emitters matters\n\t\tthis.__$emitterPrivate.trigger.apply(this.__$emitterPrivate, args);\n\t\tthis.__$emitterPublic.trigger.apply(this.__$emitterPublic, args);\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Returns instances of all tooltips in the page or an a given element\n\t *\n\t * @param {string|HTML object collection} selector optional Use this\n\t * parameter to restrict the set of objects that will be inspected\n\t * for the retrieval of instances. By default, all instances in the\n\t * page are returned.\n\t * @return {array} An array of instance objects\n\t * @public\n\t */\n\tinstances: function(selector) {\n\t\t\n\t\tvar instances = [],\n\t\t\tsel = selector || '.tooltipstered';\n\t\t\n\t\t$(sel).each(function() {\n\t\t\t\n\t\t\tvar $this = $(this),\n\t\t\t\tns = $this.data('tooltipster-ns');\n\t\t\t\n\t\t\tif (ns) {\n\t\t\t\t\n\t\t\t\t$.each(ns, function(i, namespace) {\n\t\t\t\t\tinstances.push($this.data(namespace));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn instances;\n\t},\n\t\n\t/**\n\t * Returns the Tooltipster objects generated by the last initializing call\n\t *\n\t * @return {array} An array of instance objects\n\t * @public\n\t */\n\tinstancesLatest: function() {\n\t\treturn this.__instancesLatestArr;\n\t},\n\t\n\t/**\n\t * For public use only, not to be used by plugins (use ::_off() instead)\n\t *\n\t * @return {core}\n\t * @public\n\t */\n\toff: function() {\n\t\tthis.__$emitterPublic.off.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * For public use only, not to be used by plugins (use ::_on() instead)\n\t *\n\t * @return {core}\n\t * @public\n\t */\n\ton: function() {\n\t\tthis.__$emitterPublic.on.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * For public use only, not to be used by plugins (use ::_one() instead)\n\t * \n\t * @return {core}\n\t * @public\n\t */\n\tone: function() {\n\t\tthis.__$emitterPublic.one.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Returns all HTML elements which have one or more tooltips\n\t *\n\t * @param {string} selector optional Use this to restrict the results\n\t * to the descendants of an element\n\t * @return {array} An array of HTML elements\n\t * @public\n\t */\n\torigins: function(selector) {\n\t\t\n\t\tvar sel = selector ?\n\t\t\tselector +' ' :\n\t\t\t'';\n\t\t\n\t\treturn $(sel +'.tooltipstered').toArray();\n\t},\n\t\n\t/**\n\t * Change default options for all future instances\n\t *\n\t * @param {object} d The options that should be made defaults\n\t * @return {core}\n\t * @public\n\t */\n\tsetDefaults: function(d) {\n\t\t$.extend(defaults, d);\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * For users to trigger their handlers on the public emitter\n\t * \n\t * @returns {core}\n\t * @public\n\t */\n\ttriggerHandler: function() {\n\t\tthis.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));\n\t\treturn this;\n\t}\n};\n\n// $.tooltipster will be used to call core methods\n$.tooltipster = new core();\n\n// the Tooltipster instance class (mind the capital T)\n$.Tooltipster = function(element, options) {\n\t\n\t// list of instance variables\n\t\n\t// stack of custom callbacks provided as parameters to API methods\n\tthis.__callbacks = {\n\t\tclose: [],\n\t\topen: []\n\t};\n\t// the schedule time of DOM removal\n\tthis.__closingTime;\n\t// this will be the user content shown in the tooltip. A capital \"C\" is used\n\t// because there is also a method called content()\n\tthis.__Content;\n\t// for the size tracker\n\tthis.__contentBcr;\n\t// to disable the tooltip once the destruction has begun\n\tthis.__destroyed = false;\n\tthis.__destroying = false;\n\t// we can't emit directly on the instance because if a method with the same\n\t// name as the event exists, it will be called by jQuery. Se we use a plain\n\t// object as emitter. This emitter is for internal use by plugins,\n\t// if needed.\n\tthis.__$emitterPrivate = $({});\n\t// this emitter is for the user to listen to events without risking to mess\n\t// with our internal listeners\n\tthis.__$emitterPublic = $({});\n\tthis.__enabled = true;\n\t// the reference to the gc interval\n\tthis.__garbageCollector;\n\t// various position and size data recomputed before each repositioning\n\tthis.__Geometry;\n\t// the tooltip position, saved after each repositioning by a plugin\n\tthis.__lastPosition;\n\t// a unique namespace per instance\n\tthis.__namespace = 'tooltipster-'+ Math.round(Math.random()*1000000);\n\tthis.__options;\n\t// will be used to support origins in scrollable areas\n\tthis.__$originParents;\n\tthis.__pointerIsOverOrigin = false;\n\t// to remove themes if needed\n\tthis.__previousThemes = [];\n\t// the state can be either: appearing, stable, disappearing, closed\n\tthis.__state = 'closed';\n\t// timeout references\n\tthis.__timeouts = {\n\t\tclose: [],\n\t\topen: null\n\t};\n\t// store touch events to be able to detect emulated mouse events\n\tthis.__touchEvents = [];\n\t// the reference to the tracker interval\n\tthis.__tracker = null;\n\t// the element to which this tooltip is associated\n\tthis._$origin;\n\t// this will be the tooltip element (jQuery wrapped HTML element).\n\t// It's the job of a plugin to create it and append it to the DOM\n\tthis._$tooltip;\n\t\n\t// launch\n\tthis.__init(element, options);\n};\n\n$.Tooltipster.prototype = {\n\t\n\t/**\n\t * @param origin\n\t * @param options\n\t * @private\n\t */\n\t__init: function(origin, options) {\n\t\t\n\t\tvar self = this;\n\t\t\n\t\tself._$origin = $(origin);\n\t\tself.__options = $.extend(true, {}, defaults, options);\n\t\t\n\t\t// some options may need to be reformatted\n\t\tself.__optionsFormat();\n\t\t\n\t\t// don't run on old IE if asked no to\n\t\tif (\t!env.IE\n\t\t\t||\tenv.IE >= self.__options.IEmin\n\t\t) {\n\t\t\t\n\t\t\t// note: the content is null (empty) by default and can stay that\n\t\t\t// way if the plugin remains initialized but not fed any content. The\n\t\t\t// tooltip will just not appear.\n\t\t\t\n\t\t\t// let's save the initial value of the title attribute for later\n\t\t\t// restoration if need be.\n\t\t\tvar initialTitle = null;\n\t\t\t\n\t\t\t// it will already have been saved in case of multiple tooltips\n\t\t\tif (self._$origin.data('tooltipster-initialTitle') === undefined) {\n\t\t\t\t\n\t\t\t\tinitialTitle = self._$origin.attr('title');\n\t\t\t\t\n\t\t\t\t// we do not want initialTitle to be \"undefined\" because\n\t\t\t\t// of how jQuery's .data() method works\n\t\t\t\tif (initialTitle === undefined) initialTitle = null;\n\t\t\t\t\n\t\t\t\tself._$origin.data('tooltipster-initialTitle', initialTitle);\n\t\t\t}\n\t\t\t\n\t\t\t// If content is provided in the options, it has precedence over the\n\t\t\t// title attribute.\n\t\t\t// Note: an empty string is considered content, only 'null' represents\n\t\t\t// the absence of content.\n\t\t\t// Also, an existing title=\"\" attribute will result in an empty string\n\t\t\t// content\n\t\t\tif (self.__options.content !== null) {\n\t\t\t\tself.__contentSet(self.__options.content);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\n\t\t\t\tvar selector = self._$origin.attr('data-tooltip-content'),\n\t\t\t\t\t$el;\n\t\t\t\t\n\t\t\t\tif (selector){\n\t\t\t\t\t$el = $(selector);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ($el && $el[0]) {\n\t\t\t\t\tself.__contentSet($el.first());\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tself.__contentSet(initialTitle);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tself._$origin\n\t\t\t\t// strip the title off of the element to prevent the default tooltips\n\t\t\t\t// from popping up\n\t\t\t\t.removeAttr('title')\n\t\t\t\t// to be able to find all instances on the page later (upon window\n\t\t\t\t// events in particular)\n\t\t\t\t.addClass('tooltipstered');\n\t\t\t\n\t\t\t// set listeners on the origin\n\t\t\tself.__prepareOrigin();\n\t\t\t\n\t\t\t// set the garbage collector\n\t\t\tself.__prepareGC();\n\t\t\t\n\t\t\t// init plugins\n\t\t\t$.each(self.__options.plugins, function(i, pluginName) {\n\t\t\t\tself._plug(pluginName);\n\t\t\t});\n\t\t\t\n\t\t\t// to detect swiping\n\t\t\tif (env.hasTouchCapability) {\n\t\t\t\t$('body').on('touchmove.'+ self.__namespace +'-triggerOpen', function(event) {\n\t\t\t\t\tself._touchRecordEvent(event);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tself\n\t\t\t\t// prepare the tooltip when it gets created. This event must\n\t\t\t\t// be fired by a plugin\n\t\t\t\t._on('created', function() {\n\t\t\t\t\tself.__prepareTooltip();\n\t\t\t\t})\n\t\t\t\t// save position information when it's sent by a plugin\n\t\t\t\t._on('repositioned', function(e) {\n\t\t\t\t\tself.__lastPosition = e.position;\n\t\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tself.__options.disabled = true;\n\t\t}\n\t},\n\t\n\t/**\n\t * Insert the content into the appropriate HTML element of the tooltip\n\t * \n\t * @returns {self}\n\t * @private\n\t */\n\t__contentInsert: function() {\n\t\t\n\t\tvar self = this,\n\t\t\t$el = self._$tooltip.find('.tooltipster-content'),\n\t\t\tformattedContent = self.__Content,\n\t\t\tformat = function(content) {\n\t\t\t\tformattedContent = content;\n\t\t\t};\n\t\t\n\t\tself._trigger({\n\t\t\ttype: 'format',\n\t\t\tcontent: self.__Content,\n\t\t\tformat: format\n\t\t});\n\t\t\n\t\tif (self.__options.functionFormat) {\n\t\t\t\n\t\t\tformattedContent = self.__options.functionFormat.call(\n\t\t\t\tself,\n\t\t\t\tself,\n\t\t\t\t{ origin: self._$origin[0] },\n\t\t\t\tself.__Content\n\t\t\t);\n\t\t}\n\t\t\n\t\tif (typeof formattedContent === 'string' && !self.__options.contentAsHTML) {\n\t\t\t$el.text(formattedContent);\n\t\t}\n\t\telse {\n\t\t\t$el\n\t\t\t\t.empty()\n\t\t\t\t.append(formattedContent);\n\t\t}\n\t\t\n\t\treturn self;\n\t},\n\t\n\t/**\n\t * Save the content, cloning it beforehand if need be\n\t * \n\t * @param content\n\t * @returns {self}\n\t * @private\n\t */\n\t__contentSet: function(content) {\n\t\t\n\t\t// clone if asked. Cloning the object makes sure that each instance has its\n\t\t// own version of the content (in case a same object were provided for several\n\t\t// instances)\n\t\t// reminder: typeof null === object\n\t\tif (content instanceof $ && this.__options.contentCloning) {\n\t\t\tcontent = content.clone(true);\n\t\t}\n\t\t\n\t\tthis.__Content = content;\n\t\t\n\t\tthis._trigger({\n\t\t\ttype: 'updated',\n\t\t\tcontent: content\n\t\t});\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Error message about a method call made after destruction\n\t * \n\t * @private\n\t */\n\t__destroyError: function() {\n\t\tthrow new Error('This tooltip has been destroyed and cannot execute your method call.');\n\t},\n\t\n\t/**\n\t * Gather all information about dimensions and available space,\n\t * called before every repositioning\n\t * \n\t * @private\n\t * @returns {object}\n\t */\n\t__geometry: function() {\n\t\t\n\t\tvar\tself = this,\n\t\t\t$target = self._$origin,\n\t\t\toriginIsArea = self._$origin.is('area');\n\t\t\n\t\t// if this._$origin is a map area, the target we'll need\n\t\t// the dimensions of is actually the image using the map,\n\t\t// not the area itself\n\t\tif (originIsArea) {\n\t\t\t\n\t\t\tvar mapName = self._$origin.parent().attr('name');\n\t\t\t\n\t\t\t$target = $('img[usemap=\"#'+ mapName +'\"]');\n\t\t}\n\t\t\n\t\tvar bcr = $target[0].getBoundingClientRect(),\n\t\t\t$document = $(env.window.document),\n\t\t\t$window = $(env.window),\n\t\t\t$parent = $target,\n\t\t\t// some useful properties of important elements\n\t\t\tgeo = {\n\t\t\t\t// available space for the tooltip, see down below\n\t\t\t\tavailable: {\n\t\t\t\t\tdocument: null,\n\t\t\t\t\twindow: null\n\t\t\t\t},\n\t\t\t\tdocument: {\n\t\t\t\t\tsize: {\n\t\t\t\t\t\theight: $document.height(),\n\t\t\t\t\t\twidth: $document.width()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\twindow: {\n\t\t\t\t\tscroll: {\n\t\t\t\t\t\t// the second ones are for IE compatibility\n\t\t\t\t\t\tleft: env.window.scrollX || env.window.document.documentElement.scrollLeft,\n\t\t\t\t\t\ttop: env.window.scrollY || env.window.document.documentElement.scrollTop\n\t\t\t\t\t},\n\t\t\t\t\tsize: {\n\t\t\t\t\t\theight: $window.height(),\n\t\t\t\t\t\twidth: $window.width()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\torigin: {\n\t\t\t\t\t// the origin has a fixed lineage if itself or one of its\n\t\t\t\t\t// ancestors has a fixed position\n\t\t\t\t\tfixedLineage: false,\n\t\t\t\t\t// relative to the document\n\t\t\t\t\toffset: {},\n\t\t\t\t\tsize: {\n\t\t\t\t\t\theight: bcr.bottom - bcr.top,\n\t\t\t\t\t\twidth: bcr.right - bcr.left\n\t\t\t\t\t},\n\t\t\t\t\tusemapImage: originIsArea ? $target[0] : null,\n\t\t\t\t\t// relative to the window\n\t\t\t\t\twindowOffset: {\n\t\t\t\t\t\tbottom: bcr.bottom,\n\t\t\t\t\t\tleft: bcr.left,\n\t\t\t\t\t\tright: bcr.right,\n\t\t\t\t\t\ttop: bcr.top\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tgeoFixed = false;\n\t\t\n\t\t// if the element is a map area, some properties may need\n\t\t// to be recalculated\n\t\tif (originIsArea) {\n\t\t\t\n\t\t\tvar shape = self._$origin.attr('shape'),\n\t\t\t\tcoords = self._$origin.attr('coords');\n\t\t\t\n\t\t\tif (coords) {\n\t\t\t\t\n\t\t\t\tcoords = coords.split(',');\n\t\t\t\t\n\t\t\t\t$.map(coords, function(val, i) {\n\t\t\t\t\tcoords[i] = parseInt(val);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t// if the image itself is the area, nothing more to do\n\t\t\tif (shape != 'default') {\n\t\t\t\t\n\t\t\t\tswitch(shape) {\n\t\t\t\t\t\n\t\t\t\t\tcase 'circle':\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar circleCenterLeft = coords[0],\n\t\t\t\t\t\t\tcircleCenterTop = coords[1],\n\t\t\t\t\t\t\tcircleRadius = coords[2],\n\t\t\t\t\t\t\tareaTopOffset = circleCenterTop - circleRadius,\n\t\t\t\t\t\t\tareaLeftOffset = circleCenterLeft - circleRadius;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgeo.origin.size.height = circleRadius * 2;\n\t\t\t\t\t\tgeo.origin.size.width = geo.origin.size.height;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgeo.origin.windowOffset.left += areaLeftOffset;\n\t\t\t\t\t\tgeo.origin.windowOffset.top += areaTopOffset;\n\t\t\t\t\t\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase 'rect':\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar areaLeft = coords[0],\n\t\t\t\t\t\t\tareaTop = coords[1],\n\t\t\t\t\t\t\tareaRight = coords[2],\n\t\t\t\t\t\t\tareaBottom = coords[3];\n\t\t\t\t\t\t\n\t\t\t\t\t\tgeo.origin.size.height = areaBottom - areaTop;\n\t\t\t\t\t\tgeo.origin.size.width = areaRight - areaLeft;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgeo.origin.windowOffset.left += areaLeft;\n\t\t\t\t\t\tgeo.origin.windowOffset.top += areaTop;\n\t\t\t\t\t\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase 'poly':\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar areaSmallestX = 0,\n\t\t\t\t\t\t\tareaSmallestY = 0,\n\t\t\t\t\t\t\tareaGreatestX = 0,\n\t\t\t\t\t\t\tareaGreatestY = 0,\n\t\t\t\t\t\t\tarrayAlternate = 'even';\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor (var i = 0; i < coords.length; i++) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar areaNumber = coords[i];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (arrayAlternate == 'even') {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (areaNumber > areaGreatestX) {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tareaGreatestX = areaNumber;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\t\t\t\t\tareaSmallestX = areaGreatestX;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (areaNumber < areaSmallestX) {\n\t\t\t\t\t\t\t\t\tareaSmallestX = areaNumber;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tarrayAlternate = 'odd';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tif (areaNumber > areaGreatestY) {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tareaGreatestY = areaNumber;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (i == 1) {\n\t\t\t\t\t\t\t\t\t\tareaSmallestY = areaGreatestY;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (areaNumber < areaSmallestY) {\n\t\t\t\t\t\t\t\t\tareaSmallestY = areaNumber;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tarrayAlternate = 'even';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tgeo.origin.size.height = areaGreatestY - areaSmallestY;\n\t\t\t\t\t\tgeo.origin.size.width = areaGreatestX - areaSmallestX;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgeo.origin.windowOffset.left += areaSmallestX;\n\t\t\t\t\t\tgeo.origin.windowOffset.top += areaSmallestY;\n\t\t\t\t\t\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// user callback through an event\n\t\tvar edit = function(r) {\n\t\t\tgeo.origin.size.height = r.height,\n\t\t\t\tgeo.origin.windowOffset.left = r.left,\n\t\t\t\tgeo.origin.windowOffset.top = r.top,\n\t\t\t\tgeo.origin.size.width = r.width\n\t\t};\n\t\t\n\t\tself._trigger({\n\t\t\ttype: 'geometry',\n\t\t\tedit: edit,\n\t\t\tgeometry: {\n\t\t\t\theight: geo.origin.size.height,\n\t\t\t\tleft: geo.origin.windowOffset.left,\n\t\t\t\ttop: geo.origin.windowOffset.top,\n\t\t\t\twidth: geo.origin.size.width\n\t\t\t}\n\t\t});\n\t\t\n\t\t// calculate the remaining properties with what we got\n\t\t\n\t\tgeo.origin.windowOffset.right = geo.origin.windowOffset.left + geo.origin.size.width;\n\t\tgeo.origin.windowOffset.bottom = geo.origin.windowOffset.top + geo.origin.size.height;\n\t\t\n\t\tgeo.origin.offset.left = geo.origin.windowOffset.left + geo.window.scroll.left;\n\t\tgeo.origin.offset.top = geo.origin.windowOffset.top + geo.window.scroll.top;\n\t\tgeo.origin.offset.bottom = geo.origin.offset.top + geo.origin.size.height;\n\t\tgeo.origin.offset.right = geo.origin.offset.left + geo.origin.size.width;\n\t\t\n\t\t// the space that is available to display the tooltip relatively to the document\n\t\tgeo.available.document = {\n\t\t\tbottom: {\n\t\t\t\theight: geo.document.size.height - geo.origin.offset.bottom,\n\t\t\t\twidth: geo.document.size.width\n\t\t\t},\n\t\t\tleft: {\n\t\t\t\theight: geo.document.size.height,\n\t\t\t\twidth: geo.origin.offset.left\n\t\t\t},\n\t\t\tright: {\n\t\t\t\theight: geo.document.size.height,\n\t\t\t\twidth: geo.document.size.width - geo.origin.offset.right\n\t\t\t},\n\t\t\ttop: {\n\t\t\t\theight: geo.origin.offset.top,\n\t\t\t\twidth: geo.document.size.width\n\t\t\t}\n\t\t};\n\t\t\n\t\t// the space that is available to display the tooltip relatively to the viewport\n\t\t// (the resulting values may be negative if the origin overflows the viewport)\n\t\tgeo.available.window = {\n\t\t\tbottom: {\n\t\t\t\t// the inner max is here to make sure the available height is no bigger\n\t\t\t\t// than the viewport height (when the origin is off screen at the top).\n\t\t\t\t// The outer max just makes sure that the height is not negative (when\n\t\t\t\t// the origin overflows at the bottom).\n\t\t\t\theight: Math.max(geo.window.size.height - Math.max(geo.origin.windowOffset.bottom, 0), 0),\n\t\t\t\twidth: geo.window.size.width\n\t\t\t},\n\t\t\tleft: {\n\t\t\t\theight: geo.window.size.height,\n\t\t\t\twidth: Math.max(geo.origin.windowOffset.left, 0)\n\t\t\t},\n\t\t\tright: {\n\t\t\t\theight: geo.window.size.height,\n\t\t\t\twidth: Math.max(geo.window.size.width - Math.max(geo.origin.windowOffset.right, 0), 0)\n\t\t\t},\n\t\t\ttop: {\n\t\t\t\theight: Math.max(geo.origin.windowOffset.top, 0),\n\t\t\t\twidth: geo.window.size.width\n\t\t\t}\n\t\t};\n\t\t\n\t\twhile ($parent[0].tagName.toLowerCase() != 'html') {\n\t\t\t\n\t\t\tif ($parent.css('position') == 'fixed') {\n\t\t\t\tgeo.origin.fixedLineage = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\t$parent = $parent.parent();\n\t\t}\n\t\t\n\t\treturn geo;\n\t},\n\t\n\t/**\n\t * Some options may need to be formated before being used\n\t * \n\t * @returns {self}\n\t * @private\n\t */\n\t__optionsFormat: function() {\n\t\t\n\t\tif (typeof this.__options.animationDuration == 'number') {\n\t\t\tthis.__options.animationDuration = [this.__options.animationDuration, this.__options.animationDuration];\n\t\t}\n\t\t\n\t\tif (typeof this.__options.delay == 'number') {\n\t\t\tthis.__options.delay = [this.__options.delay, this.__options.delay];\n\t\t}\n\t\t\n\t\tif (typeof this.__options.delayTouch == 'number') {\n\t\t\tthis.__options.delayTouch = [this.__options.delayTouch, this.__options.delayTouch];\n\t\t}\n\t\t\n\t\tif (typeof this.__options.theme == 'string') {\n\t\t\tthis.__options.theme = [this.__options.theme];\n\t\t}\n\t\t\n\t\t// determine the future parent\n\t\tif (typeof this.__options.parent == 'string') {\n\t\t\tthis.__options.parent = $(this.__options.parent);\n\t\t}\n\t\t\n\t\tif (this.__options.trigger == 'hover') {\n\t\t\t\n\t\t\tthis.__options.triggerOpen = {\n\t\t\t\tmouseenter: true,\n\t\t\t\ttouchstart: true\n\t\t\t};\n\t\t\t\n\t\t\tthis.__options.triggerClose = {\n\t\t\t\tmouseleave: true,\n\t\t\t\toriginClick: true,\n\t\t\t\ttouchleave: true\n\t\t\t};\n\t\t}\n\t\telse if (this.__options.trigger == 'click') {\n\t\t\t\n\t\t\tthis.__options.triggerOpen = {\n\t\t\t\tclick: true,\n\t\t\t\ttap: true\n\t\t\t};\n\t\t\t\n\t\t\tthis.__options.triggerClose = {\n\t\t\t\tclick: true,\n\t\t\t\ttap: true\n\t\t\t};\n\t\t}\n\t\t\n\t\t// for the plugins\n\t\tthis._trigger('options');\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Schedules or cancels the garbage collector task\n\t *\n\t * @returns {self}\n\t * @private\n\t */\n\t__prepareGC: function() {\n\t\t\n\t\tvar self = this;\n\t\t\n\t\t// in case the selfDestruction option has been changed by a method call\n\t\tif (self.__options.selfDestruction) {\n\t\t\t\n\t\t\t// the GC task\n\t\t\tself.__garbageCollector = setInterval(function() {\n\t\t\t\t\n\t\t\t\tvar now = new Date().getTime();\n\t\t\t\t\n\t\t\t\t// forget the old events\n\t\t\t\tself.__touchEvents = $.grep(self.__touchEvents, function(event, i) {\n\t\t\t\t\t// 1 minute\n\t\t\t\t\treturn now - event.time > 60000;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// auto-destruct if the origin is gone\n\t\t\t\tif (!bodyContains(self._$origin)) {\n\t\t\t\t\tself.destroy();\n\t\t\t\t}\n\t\t\t}, 20000);\n\t\t}\n\t\telse {\n\t\t\tclearInterval(self.__garbageCollector);\n\t\t}\n\t\t\n\t\treturn self;\n\t},\n\t\n\t/**\n\t * Sets listeners on the origin if the open triggers require them.\n\t * Unlike the listeners set at opening time, these ones\n\t * remain even when the tooltip is closed. It has been made a\n\t * separate method so it can be called when the triggers are\n\t * changed in the options. Closing is handled in _open()\n\t * because of the bindings that may be needed on the tooltip\n\t * itself\n\t *\n\t * @returns {self}\n\t * @private\n\t */\n\t__prepareOrigin: function() {\n\t\t\n\t\tvar self = this;\n\t\t\n\t\t// in case we're resetting the triggers\n\t\tself._$origin.off('.'+ self.__namespace +'-triggerOpen');\n\t\t\n\t\t// if the device is touch capable, even if only mouse triggers\n\t\t// are asked, we need to listen to touch events to know if the mouse\n\t\t// events are actually emulated (so we can ignore them)\n\t\tif (env.hasTouchCapability) {\n\t\t\t\n\t\t\tself._$origin.on(\n\t\t\t\t'touchstart.'+ self.__namespace +'-triggerOpen ' +\n\t\t\t\t'touchend.'+ self.__namespace +'-triggerOpen ' +\n\t\t\t\t'touchcancel.'+ self.__namespace +'-triggerOpen',\n\t\t\t\tfunction(event){\n\t\t\t\t\tself._touchRecordEvent(event);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\t\n\t\t// mouse click and touch tap work the same way\n\t\tif (\tself.__options.triggerOpen.click\n\t\t\t||\t(self.__options.triggerOpen.tap && env.hasTouchCapability)\n\t\t) {\n\t\t\t\n\t\t\tvar eventNames = '';\n\t\t\tif (self.__options.triggerOpen.click) {\n\t\t\t\teventNames += 'click.'+ self.__namespace +'-triggerOpen ';\n\t\t\t}\n\t\t\tif (self.__options.triggerOpen.tap && env.hasTouchCapability) {\n\t\t\t\teventNames += 'touchend.'+ self.__namespace +'-triggerOpen';\n\t\t\t}\n\t\t\t\n\t\t\tself._$origin.on(eventNames, function(event) {\n\t\t\t\tif (self._touchIsMeaningfulEvent(event)) {\n\t\t\t\t\tself._open(event);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\t// mouseenter and touch start work the same way\n\t\tif (\tself.__options.triggerOpen.mouseenter\n\t\t\t||\t(self.__options.triggerOpen.touchstart && env.hasTouchCapability)\n\t\t) {\n\t\t\t\n\t\t\tvar eventNames = '';\n\t\t\tif (self.__options.triggerOpen.mouseenter) {\n\t\t\t\teventNames += 'mouseenter.'+ self.__namespace +'-triggerOpen ';\n\t\t\t}\n\t\t\tif (self.__options.triggerOpen.touchstart && env.hasTouchCapability) {\n\t\t\t\teventNames += 'touchstart.'+ self.__namespace +'-triggerOpen';\n\t\t\t}\n\t\t\t\n\t\t\tself._$origin.on(eventNames, function(event) {\n\t\t\t\tif (\tself._touchIsTouchEvent(event)\n\t\t\t\t\t||\t!self._touchIsEmulatedEvent(event)\n\t\t\t\t) {\n\t\t\t\t\tself.__pointerIsOverOrigin = true;\n\t\t\t\t\tself._openShortly(event);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\t// info for the mouseleave/touchleave close triggers when they use a delay\n\t\tif (\tself.__options.triggerClose.mouseleave\n\t\t\t||\t(self.__options.triggerClose.touchleave && env.hasTouchCapability)\n\t\t) {\n\t\t\t\n\t\t\tvar eventNames = '';\n\t\t\tif (self.__options.triggerClose.mouseleave) {\n\t\t\t\teventNames += 'mouseleave.'+ self.__namespace +'-triggerOpen ';\n\t\t\t}\n\t\t\tif (self.__options.triggerClose.touchleave && env.hasTouchCapability) {\n\t\t\t\teventNames += 'touchend.'+ self.__namespace +'-triggerOpen touchcancel.'+ self.__namespace +'-triggerOpen';\n\t\t\t}\n\t\t\t\n\t\t\tself._$origin.on(eventNames, function(event) {\n\t\t\t\t\n\t\t\t\tif (self._touchIsMeaningfulEvent(event)) {\n\t\t\t\t\tself.__pointerIsOverOrigin = false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn self;\n\t},\n\t\n\t/**\n\t * Do the things that need to be done only once after the tooltip\n\t * HTML element it has been created. It has been made a separate\n\t * method so it can be called when options are changed. Remember\n\t * that the tooltip may actually exist in the DOM before it is\n\t * opened, and present after it has been closed: it's the display\n\t * plugin that takes care of handling it.\n\t * \n\t * @returns {self}\n\t * @private\n\t */\n\t__prepareTooltip: function() {\n\t\t\n\t\tvar self = this,\n\t\t\tp = self.__options.interactive ? 'auto' : '';\n\t\t\n\t\t// this will be useful to know quickly if the tooltip is in\n\t\t// the DOM or not \n\t\tself._$tooltip\n\t\t\t.attr('id', self.__namespace)\n\t\t\t.css({\n\t\t\t\t// pointer events\n\t\t\t\t'pointer-events': p,\n\t\t\t\tzIndex: self.__options.zIndex\n\t\t\t});\n\t\t\n\t\t// themes\n\t\t// remove the old ones and add the new ones\n\t\t$.each(self.__previousThemes, function(i, theme) {\n\t\t\tself._$tooltip.removeClass(theme);\n\t\t});\n\t\t$.each(self.__options.theme, function(i, theme) {\n\t\t\tself._$tooltip.addClass(theme);\n\t\t});\n\t\t\n\t\tself.__previousThemes = $.merge([], self.__options.theme);\n\t\t\n\t\treturn self;\n\t},\n\t\n\t/**\n\t * Handles the scroll on any of the parents of the origin (when the\n\t * tooltip is open)\n\t *\n\t * @param {object} event\n\t * @returns {self}\n\t * @private\n\t */\n\t__scrollHandler: function(event) {\n\t\t\n\t\tvar self = this;\n\t\t\n\t\tif (self.__options.triggerClose.scroll) {\n\t\t\tself._close(event);\n\t\t}\n\t\telse {\n\t\t\t\n\t\t\t// if the origin or tooltip have been removed: do nothing, the tracker will\n\t\t\t// take care of it later\n\t\t\tif (bodyContains(self._$origin) && bodyContains(self._$tooltip)) {\n\t\t\t\t\n\t\t\t\t// if the scroll happened on the window\n\t\t\t\tif (event.target === env.window.document) {\n\t\t\t\t\t\n\t\t\t\t\t// if the origin has a fixed lineage, window scroll will have no\n\t\t\t\t\t// effect on its position nor on the position of the tooltip\n\t\t\t\t\tif (!self.__Geometry.origin.fixedLineage) {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// we don't need to do anything unless repositionOnScroll is true\n\t\t\t\t\t\t// because the tooltip will already have moved with the window\n\t\t\t\t\t\t// (and of course with the origin)\n\t\t\t\t\t\tif (self.__options.repositionOnScroll) {\n\t\t\t\t\t\t\tself.reposition(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// if the scroll happened on another parent of the tooltip, it means\n\t\t\t\t// that it's in a scrollable area and now needs to have its position\n\t\t\t\t// adjusted or recomputed, depending ont the repositionOnScroll\n\t\t\t\t// option. Also, if the origin is partly hidden due to a parent that\n\t\t\t\t// hides its overflow, we'll just hide (not close) the tooltip.\n\t\t\t\telse {\n\t\t\t\t\t\n\t\t\t\t\tvar g = self.__geometry(),\n\t\t\t\t\t\toverflows = false;\n\t\t\t\t\t\n\t\t\t\t\t// a fixed position origin is not affected by the overflow hiding\n\t\t\t\t\t// of a parent\n\t\t\t\t\tif (self._$origin.css('position') != 'fixed') {\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.__$originParents.each(function(i, el) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar $el = $(el),\n\t\t\t\t\t\t\t\toverflowX = $el.css('overflow-x'),\n\t\t\t\t\t\t\t\toverflowY = $el.css('overflow-y');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (overflowX != 'visible' || overflowY != 'visible') {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tvar bcr = el.getBoundingClientRect();\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (overflowX != 'visible') {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (\tg.origin.windowOffset.left < bcr.left\n\t\t\t\t\t\t\t\t\t\t||\tg.origin.windowOffset.right > bcr.right\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\toverflows = true;\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (overflowY != 'visible') {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (\tg.origin.windowOffset.top < bcr.top\n\t\t\t\t\t\t\t\t\t\t||\tg.origin.windowOffset.bottom > bcr.bottom\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\toverflows = true;\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// no need to go further if fixed, for the same reason as above\n\t\t\t\t\t\t\tif ($el.css('position') == 'fixed') {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (overflows) {\n\t\t\t\t\t\tself._$tooltip.css('visibility', 'hidden');\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tself._$tooltip.css('visibility', 'visible');\n\t\t\t\t\t\t\n\t\t\t\t\t\t// reposition\n\t\t\t\t\t\tif (self.__options.repositionOnScroll) {\n\t\t\t\t\t\t\tself.reposition(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// or just adjust offset\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// we have to use offset and not windowOffset because this way,\n\t\t\t\t\t\t\t// only the scroll distance of the scrollable areas are taken into\n\t\t\t\t\t\t\t// account (the scrolltop value of the main window must be\n\t\t\t\t\t\t\t// ignored since the tooltip already moves with it)\n\t\t\t\t\t\t\tvar offsetLeft = g.origin.offset.left - self.__Geometry.origin.offset.left,\n\t\t\t\t\t\t\t\toffsetTop = g.origin.offset.top - self.__Geometry.origin.offset.top;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// add the offset to the position initially computed by the display plugin\n\t\t\t\t\t\t\tself._$tooltip.css({\n\t\t\t\t\t\t\t\tleft: self.__lastPosition.coord.left + offsetLeft,\n\t\t\t\t\t\t\t\ttop: self.__lastPosition.coord.top + offsetTop\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tself._trigger({\n\t\t\t\t\ttype: 'scroll',\n\t\t\t\t\tevent: event\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn self;\n\t},\n\t\n\t/**\n\t * Changes the state of the tooltip\n\t *\n\t * @param {string} state\n\t * @returns {self}\n\t * @private\n\t */\n\t__stateSet: function(state) {\n\t\t\n\t\tthis.__state = state;\n\t\t\n\t\tthis._trigger({\n\t\t\ttype: 'state',\n\t\t\tstate: state\n\t\t});\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Clear appearance timeouts\n\t *\n\t * @returns {self}\n\t * @private\n\t */\n\t__timeoutsClear: function() {\n\t\t\n\t\t// there is only one possible open timeout: the delayed opening\n\t\t// when the mouseenter/touchstart open triggers are used\n\t\tclearTimeout(this.__timeouts.open);\n\t\tthis.__timeouts.open = null;\n\t\t\n\t\t// ... but several close timeouts: the delayed closing when the\n\t\t// mouseleave close trigger is used and the timer option\n\t\t$.each(this.__timeouts.close, function(i, timeout) {\n\t\t\tclearTimeout(timeout);\n\t\t});\n\t\tthis.__timeouts.close = [];\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Start the tracker that will make checks at regular intervals\n\t * \n\t * @returns {self}\n\t * @private\n\t */\n\t__trackerStart: function() {\n\t\t\n\t\tvar self = this,\n\t\t\t$content = self._$tooltip.find('.tooltipster-content');\n\t\t\n\t\t// get the initial content size\n\t\tif (self.__options.trackTooltip) {\n\t\t\tself.__contentBcr = $content[0].getBoundingClientRect();\n\t\t}\n\t\t\n\t\tself.__tracker = setInterval(function() {\n\t\t\t\n\t\t\t// if the origin or tooltip elements have been removed.\n\t\t\t// Note: we could destroy the instance now if the origin has\n\t\t\t// been removed but we'll leave that task to our garbage collector\n\t\t\tif (!bodyContains(self._$origin) || !bodyContains(self._$tooltip)) {\n\t\t\t\tself._close();\n\t\t\t}\n\t\t\t// if everything is alright\n\t\t\telse {\n\t\t\t\t\n\t\t\t\t// compare the former and current positions of the origin to reposition\n\t\t\t\t// the tooltip if need be\n\t\t\t\tif (self.__options.trackOrigin) {\n\t\t\t\t\t\n\t\t\t\t\tvar g = self.__geometry(),\n\t\t\t\t\t\tidentical = false;\n\t\t\t\t\t\n\t\t\t\t\t// compare size first (a change requires repositioning too)\n\t\t\t\t\tif (areEqual(g.origin.size, self.__Geometry.origin.size)) {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// for elements that have a fixed lineage (see __geometry()), we track the\n\t\t\t\t\t\t// top and left properties (relative to window)\n\t\t\t\t\t\tif (self.__Geometry.origin.fixedLineage) {\n\t\t\t\t\t\t\tif (areEqual(g.origin.windowOffset, self.__Geometry.origin.windowOffset)) {\n\t\t\t\t\t\t\t\tidentical = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// otherwise, track total offset (relative to document)\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (areEqual(g.origin.offset, self.__Geometry.origin.offset)) {\n\t\t\t\t\t\t\t\tidentical = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (!identical) {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// close the tooltip when using the mouseleave close trigger\n\t\t\t\t\t\t// (see https://github.com/iamceege/tooltipster/pull/253)\n\t\t\t\t\t\tif (self.__options.triggerClose.mouseleave) {\n\t\t\t\t\t\t\tself._close();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tself.reposition();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (self.__options.trackTooltip) {\n\t\t\t\t\t\n\t\t\t\t\tvar currentBcr = $content[0].getBoundingClientRect();\n\t\t\t\t\t\n\t\t\t\t\tif (\tcurrentBcr.height !== self.__contentBcr.height\n\t\t\t\t\t\t||\tcurrentBcr.width !== self.__contentBcr.width\n\t\t\t\t\t) {\n\t\t\t\t\t\tself.reposition();\n\t\t\t\t\t\tself.__contentBcr = currentBcr;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, self.__options.trackerInterval);\n\t\t\n\t\treturn self;\n\t},\n\t\n\t/**\n\t * Closes the tooltip (after the closing delay)\n\t * \n\t * @param event\n\t * @param callback\n\t * @returns {self}\n\t * @protected\n\t */\n\t_close: function(event, callback) {\n\t\t\n\t\tvar self = this,\n\t\t\tok = true;\n\t\t\n\t\tself._trigger({\n\t\t\ttype: 'close',\n\t\t\tevent: event,\n\t\t\tstop: function() {\n\t\t\t\tok = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\t// a destroying tooltip may not refuse to close\n\t\tif (ok || self.__destroying) {\n\t\t\t\n\t\t\t// save the method custom callback and cancel any open method custom callbacks\n\t\t\tif (callback) self.__callbacks.close.push(callback);\n\t\t\tself.__callbacks.open = [];\n\t\t\t\n\t\t\t// clear open/close timeouts\n\t\t\tself.__timeoutsClear();\n\t\t\t\n\t\t\tvar finishCallbacks = function() {\n\t\t\t\t\n\t\t\t\t// trigger any close method custom callbacks and reset them\n\t\t\t\t$.each(self.__callbacks.close, function(i,c) {\n\t\t\t\t\tc.call(self, self, {\n\t\t\t\t\t\tevent: event,\n\t\t\t\t\t\torigin: self._$origin[0]\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tself.__callbacks.close = [];\n\t\t\t};\n\t\t\t\n\t\t\tif (self.__state != 'closed') {\n\t\t\t\t\n\t\t\t\tvar necessary = true,\n\t\t\t\t\td = new Date(),\n\t\t\t\t\tnow = d.getTime(),\n\t\t\t\t\tnewClosingTime = now + self.__options.animationDuration[1];\n\t\t\t\t\n\t\t\t\t// the tooltip may already already be disappearing, but if a new\n\t\t\t\t// call to close() is made after the animationDuration was changed\n\t\t\t\t// to 0 (for example), we ought to actually close it sooner than\n\t\t\t\t// previously scheduled. In that case it should be noted that the\n\t\t\t\t// browser will not adapt the animation duration to the new\n\t\t\t\t// animationDuration that was set after the start of the closing\n\t\t\t\t// animation.\n\t\t\t\t// Note: the same thing could be considered at opening, but is not\n\t\t\t\t// really useful since the tooltip is actually opened immediately\n\t\t\t\t// upon a call to _open(). Since it would not make the opening\n\t\t\t\t// animation finish sooner, its sole impact would be to trigger the\n\t\t\t\t// state event and the open callbacks sooner than the actual end of\n\t\t\t\t// the opening animation, which is not great.\n\t\t\t\tif (self.__state == 'disappearing') {\n\t\t\t\t\t\n\t\t\t\t\tif (newClosingTime > self.__closingTime) {\n\t\t\t\t\t\tnecessary = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (necessary) {\n\t\t\t\t\t\n\t\t\t\t\tself.__closingTime = newClosingTime;\n\t\t\t\t\t\n\t\t\t\t\tif (self.__state != 'disappearing') {\n\t\t\t\t\t\tself.__stateSet('disappearing');\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar finish = function() {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// stop the tracker\n\t\t\t\t\t\tclearInterval(self.__tracker);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// a \"beforeClose\" option has been asked several times but would\n\t\t\t\t\t\t// probably useless since the content element is still accessible\n\t\t\t\t\t\t// via ::content(), and because people can always use listeners\n\t\t\t\t\t\t// inside their content to track what's going on. For the sake of\n\t\t\t\t\t\t// simplicity, this has been denied. Bur for the rare people who\n\t\t\t\t\t\t// really need the option (for old browsers or for the case where\n\t\t\t\t\t\t// detaching the content is actually destructive, for file or\n\t\t\t\t\t\t// password inputs for example), this event will do the work.\n\t\t\t\t\t\tself._trigger({\n\t\t\t\t\t\t\ttype: 'closing',\n\t\t\t\t\t\t\tevent: event\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t// unbind listeners which are no longer needed\n\t\t\t\t\t\t\n\t\t\t\t\t\tself._$tooltip\n\t\t\t\t\t\t\t.off('.'+ self.__namespace +'-triggerClose')\n\t\t\t\t\t\t\t.removeClass('tooltipster-dying');\n\t\t\t\t\t\t\n\t\t\t\t\t\t// orientationchange, scroll and resize listeners\n\t\t\t\t\t\t$(env.window).off('.'+ self.__namespace +'-triggerClose');\n\t\t\t\t\t\t\n\t\t\t\t\t\t// scroll listeners\n\t\t\t\t\t\tself.__$originParents.each(function(i, el) {\n\t\t\t\t\t\t\t$(el).off('scroll.'+ self.__namespace +'-triggerClose');\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// clear the array to prevent memory leaks\n\t\t\t\t\t\tself.__$originParents = null;\n\t\t\t\t\t\t\n\t\t\t\t\t\t$('body').off('.'+ self.__namespace +'-triggerClose');\n\t\t\t\t\t\t\n\t\t\t\t\t\tself._$origin.off('.'+ self.__namespace +'-triggerClose');\n\t\t\t\t\t\t\n\t\t\t\t\t\tself._off('dismissable');\n\t\t\t\t\t\t\n\t\t\t\t\t\t// a plugin that would like to remove the tooltip from the\n\t\t\t\t\t\t// DOM when closed should bind on this\n\t\t\t\t\t\tself.__stateSet('closed');\n\t\t\t\t\t\t\n\t\t\t\t\t\t// trigger event\n\t\t\t\t\t\tself._trigger({\n\t\t\t\t\t\t\ttype: 'after',\n\t\t\t\t\t\t\tevent: event\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t// call our constructor custom callback function\n\t\t\t\t\t\tif (self.__options.functionAfter) {\n\t\t\t\t\t\t\tself.__options.functionAfter.call(self, self, {\n\t\t\t\t\t\t\t\tevent: event,\n\t\t\t\t\t\t\t\torigin: self._$origin[0]\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// call our method custom callbacks functions\n\t\t\t\t\t\tfinishCallbacks();\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\tif (env.hasTransitions) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tself._$tooltip.css({\n\t\t\t\t\t\t\t'-moz-animation-duration': self.__options.animationDuration[1] + 'ms',\n\t\t\t\t\t\t\t'-ms-animation-duration': self.__options.animationDuration[1] + 'ms',\n\t\t\t\t\t\t\t'-o-animation-duration': self.__options.animationDuration[1] + 'ms',\n\t\t\t\t\t\t\t'-webkit-animation-duration': self.__options.animationDuration[1] + 'ms',\n\t\t\t\t\t\t\t'animation-duration': self.__options.animationDuration[1] + 'ms',\n\t\t\t\t\t\t\t'transition-duration': self.__options.animationDuration[1] + 'ms'\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\tself._$tooltip\n\t\t\t\t\t\t\t// clear both potential open and close tasks\n\t\t\t\t\t\t\t.clearQueue()\n\t\t\t\t\t\t\t.removeClass('tooltipster-show')\n\t\t\t\t\t\t\t// for transitions only\n\t\t\t\t\t\t\t.addClass('tooltipster-dying');\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (self.__options.animationDuration[1] > 0) {\n\t\t\t\t\t\t\tself._$tooltip.delay(self.__options.animationDuration[1]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tself._$tooltip.queue(finish);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t\n\t\t\t\t\t\tself._$tooltip\n\t\t\t\t\t\t\t.stop()\n\t\t\t\t\t\t\t.fadeOut(self.__options.animationDuration[1], finish);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// if the tooltip is already closed, we still need to trigger\n\t\t\t// the method custom callbacks\n\t\t\telse {\n\t\t\t\tfinishCallbacks();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn self;\n\t},\n\t\n\t/**\n\t * For internal use by plugins, if needed\n\t * \n\t * @returns {self}\n\t * @protected\n\t */\n\t_off: function() {\n\t\tthis.__$emitterPrivate.off.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * For internal use by plugins, if needed\n\t *\n\t * @returns {self}\n\t * @protected\n\t */\n\t_on: function() {\n\t\tthis.__$emitterPrivate.on.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * For internal use by plugins, if needed\n\t *\n\t * @returns {self}\n\t * @protected\n\t */\n\t_one: function() {\n\t\tthis.__$emitterPrivate.one.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Opens the tooltip right away\n\t *\n\t * @param event\n\t * @param callback\n\t * @returns {self}\n\t * @protected\n\t */\n\t_open: function(event, callback) {\n\t\t\n\t\tvar self = this;\n\t\t\n\t\t// if the destruction process has not begun and if this was not\n\t\t// triggered by an unwanted emulated click event\n\t\tif (!self.__destroying) {\n\t\t\t\n\t\t\t// check that the origin is still in the DOM\n\t\t\tif (\tbodyContains(self._$origin)\n\t\t\t\t// if the tooltip is enabled\n\t\t\t\t&&\tself.__enabled\n\t\t\t) {\n\t\t\t\t\n\t\t\t\tvar ok = true;\n\t\t\t\t\n\t\t\t\t// if the tooltip is not open yet, we need to call functionBefore.\n\t\t\t\t// otherwise we can jst go on\n\t\t\t\tif (self.__state == 'closed') {\n\t\t\t\t\t\n\t\t\t\t\t// trigger an event. The event.stop function allows the callback\n\t\t\t\t\t// to prevent the opening of the tooltip\n\t\t\t\t\tself._trigger({\n\t\t\t\t\t\ttype: 'before',\n\t\t\t\t\t\tevent: event,\n\t\t\t\t\t\tstop: function() {\n\t\t\t\t\t\t\tok = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif (ok && self.__options.functionBefore) {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// call our custom function before continuing\n\t\t\t\t\t\tok = self.__options.functionBefore.call(self, self, {\n\t\t\t\t\t\t\tevent: event,\n\t\t\t\t\t\t\torigin: self._$origin[0]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (ok !== false) {\n\t\t\t\t\t\n\t\t\t\t\t// if there is some content\n\t\t\t\t\tif (self.__Content !== null) {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// save the method callback and cancel close method callbacks\n\t\t\t\t\t\tif (callback) {\n\t\t\t\t\t\t\tself.__callbacks.open.push(callback);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.__callbacks.close = [];\n\t\t\t\t\t\t\n\t\t\t\t\t\t// get rid of any appearance timeouts\n\t\t\t\t\t\tself.__timeoutsClear();\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar extraTime,\n\t\t\t\t\t\t\tfinish = function() {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (self.__state != 'stable') {\n\t\t\t\t\t\t\t\t\tself.__stateSet('stable');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// trigger any open method custom callbacks and reset them\n\t\t\t\t\t\t\t\t$.each(self.__callbacks.open, function(i,c) {\n\t\t\t\t\t\t\t\t\tc.call(self, self, {\n\t\t\t\t\t\t\t\t\t\torigin: self._$origin[0],\n\t\t\t\t\t\t\t\t\t\ttooltip: self._$tooltip[0]\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tself.__callbacks.open = [];\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\t// if the tooltip is already open\n\t\t\t\t\t\tif (self.__state !== 'closed') {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// the timer (if any) will start (or restart) right now\n\t\t\t\t\t\t\textraTime = 0;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// if it was disappearing, cancel that\n\t\t\t\t\t\t\tif (self.__state === 'disappearing') {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tself.__stateSet('appearing');\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (env.hasTransitions) {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tself._$tooltip\n\t\t\t\t\t\t\t\t\t\t.clearQueue()\n\t\t\t\t\t\t\t\t\t\t.removeClass('tooltipster-dying')\n\t\t\t\t\t\t\t\t\t\t.addClass('tooltipster-show');\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (self.__options.animationDuration[0] > 0) {\n\t\t\t\t\t\t\t\t\t\tself._$tooltip.delay(self.__options.animationDuration[0]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tself._$tooltip.queue(finish);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t// in case the tooltip was currently fading out, bring it back\n\t\t\t\t\t\t\t\t\t// to life\n\t\t\t\t\t\t\t\t\tself._$tooltip\n\t\t\t\t\t\t\t\t\t\t.stop()\n\t\t\t\t\t\t\t\t\t\t.fadeIn(finish);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// if the tooltip is already open, we still need to trigger the method\n\t\t\t\t\t\t\t// custom callback\n\t\t\t\t\t\t\telse if (self.__state == 'stable') {\n\t\t\t\t\t\t\t\tfinish();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// if the tooltip isn't already open, open it\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// a plugin must bind on this and store the tooltip in this._$tooltip\n\t\t\t\t\t\t\tself.__stateSet('appearing');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// the timer (if any) will start when the tooltip has fully appeared\n\t\t\t\t\t\t\t// after its transition\n\t\t\t\t\t\t\textraTime = self.__options.animationDuration[0];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// insert the content inside the tooltip\n\t\t\t\t\t\t\tself.__contentInsert();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// reposition the tooltip and attach to the DOM\n\t\t\t\t\t\t\tself.reposition(event, true);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// animate in the tooltip. If the display plugin wants no css\n\t\t\t\t\t\t\t// animations, it may override the animation option with a\n\t\t\t\t\t\t\t// dummy value that will produce no effect\n\t\t\t\t\t\t\tif (env.hasTransitions) {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// note: there seems to be an issue with start animations which\n\t\t\t\t\t\t\t\t// are randomly not played on fast devices in both Chrome and FF,\n\t\t\t\t\t\t\t\t// couldn't find a way to solve it yet. It seems that applying\n\t\t\t\t\t\t\t\t// the classes before appending to the DOM helps a little, but\n\t\t\t\t\t\t\t\t// it messes up some CSS transitions. The issue almost never\n\t\t\t\t\t\t\t\t// happens when delay[0]==0 though\n\t\t\t\t\t\t\t\tself._$tooltip\n\t\t\t\t\t\t\t\t\t.addClass('tooltipster-'+ self.__options.animation)\n\t\t\t\t\t\t\t\t\t.addClass('tooltipster-initial')\n\t\t\t\t\t\t\t\t\t.css({\n\t\t\t\t\t\t\t\t\t\t'-moz-animation-duration': self.__options.animationDuration[0] + 'ms',\n\t\t\t\t\t\t\t\t\t\t'-ms-animation-duration': self.__options.animationDuration[0] + 'ms',\n\t\t\t\t\t\t\t\t\t\t'-o-animation-duration': self.__options.animationDuration[0] + 'ms',\n\t\t\t\t\t\t\t\t\t\t'-webkit-animation-duration': self.__options.animationDuration[0] + 'ms',\n\t\t\t\t\t\t\t\t\t\t'animation-duration': self.__options.animationDuration[0] + 'ms',\n\t\t\t\t\t\t\t\t\t\t'transition-duration': self.__options.animationDuration[0] + 'ms'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tsetTimeout(\n\t\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t// a quick hover may have already triggered a mouseleave\n\t\t\t\t\t\t\t\t\t\tif (self.__state != 'closed') {\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tself._$tooltip\n\t\t\t\t\t\t\t\t\t\t\t\t.addClass('tooltipster-show')\n\t\t\t\t\t\t\t\t\t\t\t\t.removeClass('tooltipster-initial');\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tif (self.__options.animationDuration[0] > 0) {\n\t\t\t\t\t\t\t\t\t\t\t\tself._$tooltip.delay(self.__options.animationDuration[0]);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tself._$tooltip.queue(finish);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// old browsers will have to live with this\n\t\t\t\t\t\t\t\tself._$tooltip\n\t\t\t\t\t\t\t\t\t.css('display', 'none')\n\t\t\t\t\t\t\t\t\t.fadeIn(self.__options.animationDuration[0], finish);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// checks if the origin is removed while the tooltip is open\n\t\t\t\t\t\t\tself.__trackerStart();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// NOTE: the listeners below have a '-triggerClose' namespace\n\t\t\t\t\t\t\t// because we'll remove them when the tooltip closes (unlike\n\t\t\t\t\t\t\t// the '-triggerOpen' listeners). So some of them are actually\n\t\t\t\t\t\t\t// not about close triggers, rather about positioning.\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t$(env.window)\n\t\t\t\t\t\t\t\t// reposition on resize\n\t\t\t\t\t\t\t\t.on('resize.'+ self.__namespace +'-triggerClose', function(e) {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tvar $ae = $(document.activeElement);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// reposition only if the resize event was not triggered upon the opening\n\t\t\t\t\t\t\t\t\t// of a virtual keyboard due to an input field being focused within the tooltip\n\t\t\t\t\t\t\t\t\t// (otherwise the repositioning would lose the focus)\n\t\t\t\t\t\t\t\t\tif (\t(!$ae.is('input') && !$ae.is('textarea'))\n\t\t\t\t\t\t\t\t\t\t||\t!$.contains(self._$tooltip[0], $ae[0])\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tself.reposition(e);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t// same as below for parents\n\t\t\t\t\t\t\t\t.on('scroll.'+ self.__namespace +'-triggerClose', function(e) {\n\t\t\t\t\t\t\t\t\tself.__scrollHandler(e);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.__$originParents = self._$origin.parents();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// scrolling may require the tooltip to be moved or even\n\t\t\t\t\t\t\t// repositioned in some cases\n\t\t\t\t\t\t\tself.__$originParents.each(function(i, parent) {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t$(parent).on('scroll.'+ self.__namespace +'-triggerClose', function(e) {\n\t\t\t\t\t\t\t\t\tself.__scrollHandler(e);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (\tself.__options.triggerClose.mouseleave\n\t\t\t\t\t\t\t\t||\t(self.__options.triggerClose.touchleave && env.hasTouchCapability)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// we use an event to allow users/plugins to control when the mouseleave/touchleave\n\t\t\t\t\t\t\t\t// close triggers will come to action. It allows to have more triggering elements\n\t\t\t\t\t\t\t\t// than just the origin and the tooltip for example, or to cancel/delay the closing,\n\t\t\t\t\t\t\t\t// or to make the tooltip interactive even if it wasn't when it was open, etc.\n\t\t\t\t\t\t\t\tself._on('dismissable', function(event) {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (event.dismissable) {\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tif (event.delay) {\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\ttimeout = setTimeout(function() {\n\t\t\t\t\t\t\t\t\t\t\t\t// event.event may be undefined\n\t\t\t\t\t\t\t\t\t\t\t\tself._close(event.event);\n\t\t\t\t\t\t\t\t\t\t\t}, event.delay);\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tself.__timeouts.close.push(timeout);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\tself._close(event);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tclearTimeout(timeout);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// now set the listeners that will trigger 'dismissable' events\n\t\t\t\t\t\t\t\tvar $elements = self._$origin,\n\t\t\t\t\t\t\t\t\teventNamesIn = '',\n\t\t\t\t\t\t\t\t\teventNamesOut = '',\n\t\t\t\t\t\t\t\t\ttimeout = null;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// if we have to allow interaction, bind on the tooltip too\n\t\t\t\t\t\t\t\tif (self.__options.interactive) {\n\t\t\t\t\t\t\t\t\t$elements = $elements.add(self._$tooltip);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (self.__options.triggerClose.mouseleave) {\n\t\t\t\t\t\t\t\t\teventNamesIn += 'mouseenter.'+ self.__namespace +'-triggerClose ';\n\t\t\t\t\t\t\t\t\teventNamesOut += 'mouseleave.'+ self.__namespace +'-triggerClose ';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (self.__options.triggerClose.touchleave && env.hasTouchCapability) {\n\t\t\t\t\t\t\t\t\teventNamesIn += 'touchstart.'+ self.__namespace +'-triggerClose';\n\t\t\t\t\t\t\t\t\teventNamesOut += 'touchend.'+ self.__namespace +'-triggerClose touchcancel.'+ self.__namespace +'-triggerClose';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t$elements\n\t\t\t\t\t\t\t\t\t// close after some time spent outside of the elements\n\t\t\t\t\t\t\t\t\t.on(eventNamesOut, function(event) {\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t// it's ok if the touch gesture ended up to be a swipe,\n\t\t\t\t\t\t\t\t\t\t// it's still a \"touch leave\" situation\n\t\t\t\t\t\t\t\t\t\tif (\tself._touchIsTouchEvent(event)\n\t\t\t\t\t\t\t\t\t\t\t||\t!self._touchIsEmulatedEvent(event)\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tvar delay = (event.type == 'mouseleave') ?\n\t\t\t\t\t\t\t\t\t\t\t\tself.__options.delay :\n\t\t\t\t\t\t\t\t\t\t\t\tself.__options.delayTouch;\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tself._trigger({\n\t\t\t\t\t\t\t\t\t\t\t\tdelay: delay[1],\n\t\t\t\t\t\t\t\t\t\t\t\tdismissable: true,\n\t\t\t\t\t\t\t\t\t\t\t\tevent: event,\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'dismissable'\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t// suspend the mouseleave timeout when the pointer comes back\n\t\t\t\t\t\t\t\t\t// over the elements\n\t\t\t\t\t\t\t\t\t.on(eventNamesIn, function(event) {\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t// it's also ok if the touch event is a swipe gesture\n\t\t\t\t\t\t\t\t\t\tif (\tself._touchIsTouchEvent(event)\n\t\t\t\t\t\t\t\t\t\t\t||\t!self._touchIsEmulatedEvent(event)\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tself._trigger({\n\t\t\t\t\t\t\t\t\t\t\t\tdismissable: false,\n\t\t\t\t\t\t\t\t\t\t\t\tevent: event,\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'dismissable'\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// close the tooltip when the origin gets a mouse click (common behavior of\n\t\t\t\t\t\t\t// native tooltips)\n\t\t\t\t\t\t\tif (self.__options.triggerClose.originClick) {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tself._$origin.on('click.'+ self.__namespace + '-triggerClose', function(event) {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// we could actually let a tap trigger this but this feature just\n\t\t\t\t\t\t\t\t\t// does not make sense on touch devices\n\t\t\t\t\t\t\t\t\tif (\t!self._touchIsTouchEvent(event)\n\t\t\t\t\t\t\t\t\t\t&&\t!self._touchIsEmulatedEvent(event)\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tself._close(event);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// set the same bindings for click and touch on the body to close the tooltip\n\t\t\t\t\t\t\tif (\tself.__options.triggerClose.click\n\t\t\t\t\t\t\t\t||\t(self.__options.triggerClose.tap && env.hasTouchCapability)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// don't set right away since the click/tap event which triggered this method\n\t\t\t\t\t\t\t\t// (if it was a click/tap) is going to bubble up to the body, we don't want it\n\t\t\t\t\t\t\t\t// to close the tooltip immediately after it opened\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (self.__state != 'closed') {\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tvar eventNames = '';\n\t\t\t\t\t\t\t\t\t\tif (self.__options.triggerClose.click) {\n\t\t\t\t\t\t\t\t\t\t\teventNames += 'click.'+ self.__namespace +'-triggerClose ';\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (self.__options.triggerClose.tap && env.hasTouchCapability) {\n\t\t\t\t\t\t\t\t\t\t\teventNames += 'touchend.'+ self.__namespace +'-triggerClose';\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t$('body').on(eventNames, function(event) {\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tif (self._touchIsMeaningfulEvent(event)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\tself._touchRecordEvent(event);\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\tif (!self.__options.interactive || !$.contains(self._$tooltip[0], event.target)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tself._close(event);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t// needed to detect and ignore swiping\n\t\t\t\t\t\t\t\t\t\tif (self.__options.triggerClose.tap && env.hasTouchCapability) {\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t$('body').on('touchstart.'+ self.__namespace +'-triggerClose', function(event) {\n\t\t\t\t\t\t\t\t\t\t\t\tself._touchRecordEvent(event);\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself._trigger('ready');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// call our custom callback\n\t\t\t\t\t\t\tif (self.__options.functionReady) {\n\t\t\t\t\t\t\t\tself.__options.functionReady.call(self, self, {\n\t\t\t\t\t\t\t\t\torigin: self._$origin[0],\n\t\t\t\t\t\t\t\t\ttooltip: self._$tooltip[0]\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// if we have a timer set, let the countdown begin\n\t\t\t\t\t\tif (self.__options.timer > 0) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar timeout = setTimeout(function() {\n\t\t\t\t\t\t\t\tself._close();\n\t\t\t\t\t\t\t}, self.__options.timer + extraTime);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.__timeouts.close.push(timeout);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn self;\n\t},\n\t\n\t/**\n\t * When using the mouseenter/touchstart open triggers, this function will\n\t * schedule the opening of the tooltip after the delay, if there is one\n\t *\n\t * @param event\n\t * @returns {self}\n\t * @protected\n \t */\n\t_openShortly: function(event) {\n\t\t\n\t\tvar self = this,\n\t\t\tok = true;\n\t\t\n\t\tif (self.__state != 'stable' && self.__state != 'appearing') {\n\t\t\t\n\t\t\t// if a timeout is not already running\n\t\t\tif (!self.__timeouts.open) {\n\t\t\t\t\n\t\t\t\tself._trigger({\n\t\t\t\t\ttype: 'start',\n\t\t\t\t\tevent: event,\n\t\t\t\t\tstop: function() {\n\t\t\t\t\t\tok = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (ok) {\n\t\t\t\t\t\n\t\t\t\t\tvar delay = (event.type.indexOf('touch') == 0) ?\n\t\t\t\t\t\tself.__options.delayTouch :\n\t\t\t\t\t\tself.__options.delay;\n\t\t\t\t\t\n\t\t\t\t\tif (delay[0]) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.__timeouts.open = setTimeout(function() {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.__timeouts.open = null;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// open only if the pointer (mouse or touch) is still over the origin.\n\t\t\t\t\t\t\t// The check on the \"meaningful event\" can only be made here, after some\n\t\t\t\t\t\t\t// time has passed (to know if the touch was a swipe or not)\n\t\t\t\t\t\t\tif (self.__pointerIsOverOrigin && self._touchIsMeaningfulEvent(event)) {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// signal that we go on\n\t\t\t\t\t\t\t\tself._trigger('startend');\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tself._open(event);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// signal that we cancel\n\t\t\t\t\t\t\t\tself._trigger('startcancel');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, delay[0]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// signal that we go on\n\t\t\t\t\t\tself._trigger('startend');\n\t\t\t\t\t\t\n\t\t\t\t\t\tself._open(event);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn self;\n\t},\n\t\n\t/**\n\t * Meant for plugins to get their options\n\t * \n\t * @param {string} pluginName The name of the plugin that asks for its options\n\t * @param {object} defaultOptions The default options of the plugin\n\t * @returns {object} The options\n\t * @protected\n\t */\n\t_optionsExtract: function(pluginName, defaultOptions) {\n\t\t\n\t\tvar self = this,\n\t\t\toptions = $.extend(true, {}, defaultOptions);\n\t\t\n\t\t// if the plugin options were isolated in a property named after the\n\t\t// plugin, use them (prevents conflicts with other plugins)\n\t\tvar pluginOptions = self.__options[pluginName];\n\t\t\n\t\t// if not, try to get them as regular options\n\t\tif (!pluginOptions){\n\t\t\t\n\t\t\tpluginOptions = {};\n\t\t\t\n\t\t\t$.each(defaultOptions, function(optionName, value) {\n\t\t\t\t\n\t\t\t\tvar o = self.__options[optionName];\n\t\t\t\t\n\t\t\t\tif (o !== undefined) {\n\t\t\t\t\tpluginOptions[optionName] = o;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\t// let's merge the default options and the ones that were provided. We'd want\n\t\t// to do a deep copy but not let jQuery merge arrays, so we'll do a shallow\n\t\t// extend on two levels, that will be enough if options are not more than 1\n\t\t// level deep\n\t\t$.each(options, function(optionName, value) {\n\t\t\t\n\t\t\tif (pluginOptions[optionName] !== undefined) {\n\t\t\t\t\n\t\t\t\tif ((\t\ttypeof value == 'object'\n\t\t\t\t\t\t&&\t!(value instanceof Array)\n\t\t\t\t\t\t&&\tvalue != null\n\t\t\t\t\t)\n\t\t\t\t\t&&\n\t\t\t\t\t(\t\ttypeof pluginOptions[optionName] == 'object'\n\t\t\t\t\t\t&&\t!(pluginOptions[optionName] instanceof Array)\n\t\t\t\t\t\t&&\tpluginOptions[optionName] != null\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\t$.extend(options[optionName], pluginOptions[optionName]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\toptions[optionName] = pluginOptions[optionName];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn options;\n\t},\n\t\n\t/**\n\t * Used at instantiation of the plugin, or afterwards by plugins that activate themselves\n\t * on existing instances\n\t * \n\t * @param {object} pluginName\n\t * @returns {self}\n\t * @protected\n\t */\n\t_plug: function(pluginName) {\n\t\t\n\t\tvar plugin = $.tooltipster._plugin(pluginName);\n\t\t\n\t\tif (plugin) {\n\t\t\t\n\t\t\t// if there is a constructor for instances\n\t\t\tif (plugin.instance) {\n\t\t\t\t\n\t\t\t\t// proxy non-private methods on the instance to allow new instance methods\n\t\t\t\t$.tooltipster.__bridge(plugin.instance, this, plugin.name);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthrow new Error('The \"'+ pluginName +'\" plugin is not defined');\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * This will return true if the event is a mouse event which was\n\t * emulated by the browser after a touch event. This allows us to\n\t * really dissociate mouse and touch triggers.\n\t * \n\t * There is a margin of error if a real mouse event is fired right\n\t * after (within the delay shown below) a touch event on the same\n\t * element, but hopefully it should not happen often.\n\t * \n\t * @returns {boolean}\n\t * @protected\n\t */\n\t_touchIsEmulatedEvent: function(event) {\n\t\t\n\t\tvar isEmulated = false,\n\t\t\tnow = new Date().getTime();\n\t\t\n\t\tfor (var i = this.__touchEvents.length - 1; i >= 0; i--) {\n\t\t\t\n\t\t\tvar e = this.__touchEvents[i];\n\t\t\t\n\t\t\t// delay, in milliseconds. It's supposed to be 300ms in\n\t\t\t// most browsers (350ms on iOS) to allow a double tap but\n\t\t\t// can be less (check out FastClick for more info)\n\t\t\tif (now - e.time < 500) {\n\t\t\t\t\n\t\t\t\tif (e.target === event.target) {\n\t\t\t\t\tisEmulated = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn isEmulated;\n\t},\n\t\n\t/**\n\t * Returns false if the event was an emulated mouse event or\n\t * a touch event involved in a swipe gesture.\n\t * \n\t * @param {object} event\n\t * @returns {boolean}\n\t * @protected\n\t */\n\t_touchIsMeaningfulEvent: function(event) {\n\t\treturn (\n\t\t\t\t(this._touchIsTouchEvent(event) && !this._touchSwiped(event.target))\n\t\t\t||\t(!this._touchIsTouchEvent(event) && !this._touchIsEmulatedEvent(event))\n\t\t);\n\t},\n\t\n\t/**\n\t * Checks if an event is a touch event\n\t * \n\t * @param {object} event\n\t * @returns {boolean}\n\t * @protected\n\t */\n\t_touchIsTouchEvent: function(event){\n\t\treturn event.type.indexOf('touch') == 0;\n\t},\n\t\n\t/**\n\t * Store touch events for a while to detect swiping and emulated mouse events\n\t * \n\t * @param {object} event\n\t * @returns {self}\n\t * @protected\n\t */\n\t_touchRecordEvent: function(event) {\n\t\t\n\t\tif (this._touchIsTouchEvent(event)) {\n\t\t\tevent.time = new Date().getTime();\n\t\t\tthis.__touchEvents.push(event);\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Returns true if a swipe happened after the last touchstart event fired on\n\t * event.target.\n\t * \n\t * We need to differentiate a swipe from a tap before we let the event open\n\t * or close the tooltip. A swipe is when a touchmove (scroll) event happens\n\t * on the body between the touchstart and the touchend events of an element.\n\t * \n\t * @param {object} target The HTML element that may have triggered the swipe\n\t * @returns {boolean}\n\t * @protected\n\t */\n\t_touchSwiped: function(target) {\n\t\t\n\t\tvar swiped = false;\n\t\t\n\t\tfor (var i = this.__touchEvents.length - 1; i >= 0; i--) {\n\t\t\t\n\t\t\tvar e = this.__touchEvents[i];\n\t\t\t\n\t\t\tif (e.type == 'touchmove') {\n\t\t\t\tswiped = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse if (\n\t\t\t\te.type == 'touchstart'\n\t\t\t\t&&\ttarget === e.target\n\t\t\t) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn swiped;\n\t},\n\t\n\t/**\n\t * Triggers an event on the instance emitters\n\t * \n\t * @returns {self}\n\t * @protected\n\t */\n\t_trigger: function() {\n\t\t\n\t\tvar args = Array.prototype.slice.apply(arguments);\n\t\t\n\t\tif (typeof args[0] == 'string') {\n\t\t\targs[0] = { type: args[0] };\n\t\t}\n\t\t\n\t\t// add properties to the event\n\t\targs[0].instance = this;\n\t\targs[0].origin = this._$origin ? this._$origin[0] : null;\n\t\targs[0].tooltip = this._$tooltip ? this._$tooltip[0] : null;\n\t\t\n\t\t// note: the order of emitters matters\n\t\tthis.__$emitterPrivate.trigger.apply(this.__$emitterPrivate, args);\n\t\t$.tooltipster._trigger.apply($.tooltipster, args);\n\t\tthis.__$emitterPublic.trigger.apply(this.__$emitterPublic, args);\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Deactivate a plugin on this instance\n\t * \n\t * @returns {self}\n\t * @protected\n\t */\n\t_unplug: function(pluginName) {\n\t\t\n\t\tvar self = this;\n\t\t\n\t\t// if the plugin has been activated on this instance\n\t\tif (self[pluginName]) {\n\t\t\t\n\t\t\tvar plugin = $.tooltipster._plugin(pluginName);\n\t\t\t\n\t\t\t// if there is a constructor for instances\n\t\t\tif (plugin.instance) {\n\t\t\t\t\n\t\t\t\t// unbridge\n\t\t\t\t$.each(plugin.instance, function(methodName, fn) {\n\t\t\t\t\t\n\t\t\t\t\t// if the method exists (privates methods do not) and comes indeed from\n\t\t\t\t\t// this plugin (may be missing or come from a conflicting plugin).\n\t\t\t\t\tif (\tself[methodName]\n\t\t\t\t\t\t&&\tself[methodName].bridged === self[pluginName]\n\t\t\t\t\t) {\n\t\t\t\t\t\tdelete self[methodName];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t// destroy the plugin\n\t\t\tif (self[pluginName].__destroy) {\n\t\t\t\tself[pluginName].__destroy();\n\t\t\t}\n\t\t\t\n\t\t\t// remove the reference to the plugin instance\n\t\t\tdelete self[pluginName];\n\t\t}\n\t\t\n\t\treturn self;\n\t},\n\t\n\t/**\n\t * @see self::_close\n\t * @returns {self}\n\t * @public\n\t */\n\tclose: function(callback) {\n\t\t\n\t\tif (!this.__destroyed) {\n\t\t\tthis._close(null, callback);\n\t\t}\n\t\telse {\n\t\t\tthis.__destroyError();\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Sets or gets the content of the tooltip\n\t * \n\t * @returns {mixed|self}\n\t * @public\n\t */\n\tcontent: function(content) {\n\t\t\n\t\tvar self = this;\n\t\t\n\t\t// getter method\n\t\tif (content === undefined) {\n\t\t\treturn self.__Content;\n\t\t}\n\t\t// setter method\n\t\telse {\n\t\t\t\n\t\t\tif (!self.__destroyed) {\n\t\t\t\t\n\t\t\t\t// change the content\n\t\t\t\tself.__contentSet(content);\n\t\t\t\t\n\t\t\t\tif (self.__Content !== null) {\n\t\t\t\t\t\n\t\t\t\t\t// update the tooltip if it is open\n\t\t\t\t\tif (self.__state !== 'closed') {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// reset the content in the tooltip\n\t\t\t\t\t\tself.__contentInsert();\n\t\t\t\t\t\t\n\t\t\t\t\t\t// reposition and resize the tooltip\n\t\t\t\t\t\tself.reposition();\n\t\t\t\t\t\t\n\t\t\t\t\t\t// if we want to play a little animation showing the content changed\n\t\t\t\t\t\tif (self.__options.updateAnimation) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (env.hasTransitions) {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// keep the reference in the local scope\n\t\t\t\t\t\t\t\tvar animation = self.__options.updateAnimation;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tself._$tooltip.addClass('tooltipster-update-'+ animation);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// remove the class after a while. The actual duration of the\n\t\t\t\t\t\t\t\t// update animation may be shorter, it's set in the CSS rules\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (self.__state != 'closed') {\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tself._$tooltip.removeClass('tooltipster-update-'+ animation);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tself._$tooltip.fadeTo(200, 0.5, function() {\n\t\t\t\t\t\t\t\t\tif (self.__state != 'closed') {\n\t\t\t\t\t\t\t\t\t\tself._$tooltip.fadeTo(200, 1);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tself._close();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tself.__destroyError();\n\t\t\t}\n\t\t\t\n\t\t\treturn self;\n\t\t}\n\t},\n\t\n\t/**\n\t * Destroys the tooltip\n\t * \n\t * @returns {self}\n\t * @public\n\t */\n\tdestroy: function() {\n\t\t\n\t\tvar self = this;\n\t\t\n\t\tif (!self.__destroyed) {\n\t\t\t\n\t\t\tif (!self.__destroying) {\n\t\t\t\t\n\t\t\t\tself.__destroying = true;\n\t\t\t\t\n\t\t\t\tself._close(null, function() {\n\t\t\t\t\t\n\t\t\t\t\tself._trigger('destroy');\n\t\t\t\t\t\n\t\t\t\t\tself.__destroying = false;\n\t\t\t\t\tself.__destroyed = true;\n\t\t\t\t\t\n\t\t\t\t\tself._$origin\n\t\t\t\t\t\t.removeData(self.__namespace)\n\t\t\t\t\t\t// remove the open trigger listeners\n\t\t\t\t\t\t.off('.'+ self.__namespace +'-triggerOpen');\n\t\t\t\t\t\n\t\t\t\t\t// remove the touch listener\n\t\t\t\t\t$('body').off('.' + self.__namespace +'-triggerOpen');\n\t\t\t\t\t\n\t\t\t\t\tvar ns = self._$origin.data('tooltipster-ns');\n\t\t\t\t\t\n\t\t\t\t\t// if the origin has been removed from DOM, its data may\n\t\t\t\t\t// well have been destroyed in the process and there would\n\t\t\t\t\t// be nothing to clean up or restore\n\t\t\t\t\tif (ns) {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// if there are no more tooltips on this element\n\t\t\t\t\t\tif (ns.length === 1) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// optional restoration of a title attribute\n\t\t\t\t\t\t\tvar title = null;\n\t\t\t\t\t\t\tif (self.__options.restoration == 'previous') {\n\t\t\t\t\t\t\t\ttitle = self._$origin.data('tooltipster-initialTitle');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (self.__options.restoration == 'current') {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// old school technique to stringify when outerHTML is not supported\n\t\t\t\t\t\t\t\ttitle = (typeof self.__Content == 'string') ?\n\t\t\t\t\t\t\t\t\tself.__Content :\n\t\t\t\t\t\t\t\t\t$('<div></div>').append(self.__Content).html();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (title) {\n\t\t\t\t\t\t\t\tself._$origin.attr('title', title);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// final cleaning\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself._$origin.removeClass('tooltipstered');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself._$origin\n\t\t\t\t\t\t\t\t.removeData('tooltipster-ns')\n\t\t\t\t\t\t\t\t.removeData('tooltipster-initialTitle');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// remove the instance namespace from the list of namespaces of\n\t\t\t\t\t\t\t// tooltips present on the element\n\t\t\t\t\t\t\tns = $.grep(ns, function(el, i) {\n\t\t\t\t\t\t\t\treturn el !== self.__namespace;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tself._$origin.data('tooltipster-ns', ns);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// last event\n\t\t\t\t\tself._trigger('destroyed');\n\t\t\t\t\t\n\t\t\t\t\t// unbind private and public event listeners\n\t\t\t\t\tself._off();\n\t\t\t\t\tself.off();\n\t\t\t\t\t\n\t\t\t\t\t// remove external references, just in case\n\t\t\t\t\tself.__Content = null;\n\t\t\t\t\tself.__$emitterPrivate = null;\n\t\t\t\t\tself.__$emitterPublic = null;\n\t\t\t\t\tself.__options.parent = null;\n\t\t\t\t\tself._$origin = null;\n\t\t\t\t\tself._$tooltip = null;\n\t\t\t\t\t\n\t\t\t\t\t// make sure the object is no longer referenced in there to prevent\n\t\t\t\t\t// memory leaks\n\t\t\t\t\t$.tooltipster.__instancesLatestArr = $.grep($.tooltipster.__instancesLatestArr, function(el, i) {\n\t\t\t\t\t\treturn self !== el;\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tclearInterval(self.__garbageCollector);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tself.__destroyError();\n\t\t}\n\t\t\n\t\t// we return the scope rather than true so that the call to\n\t\t// .tooltipster('destroy') actually returns the matched elements\n\t\t// and applies to all of them\n\t\treturn self;\n\t},\n\t\n\t/**\n\t * Disables the tooltip\n\t * \n\t * @returns {self}\n\t * @public\n\t */\n\tdisable: function() {\n\t\t\n\t\tif (!this.__destroyed) {\n\t\t\t\n\t\t\t// close first, in case the tooltip would not disappear on\n\t\t\t// its own (no close trigger)\n\t\t\tthis._close();\n\t\t\tthis.__enabled = false;\n\t\t\t\n\t\t\treturn this;\n\t\t}\n\t\telse {\n\t\t\tthis.__destroyError();\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Returns the HTML element of the origin\n\t *\n\t * @returns {self}\n\t * @public\n\t */\n\telementOrigin: function() {\n\t\t\n\t\tif (!this.__destroyed) {\n\t\t\treturn this._$origin[0];\n\t\t}\n\t\telse {\n\t\t\tthis.__destroyError();\n\t\t}\n\t},\n\t\n\t/**\n\t * Returns the HTML element of the tooltip\n\t *\n\t * @returns {self}\n\t * @public\n\t */\n\telementTooltip: function() {\n\t\treturn this._$tooltip ? this._$tooltip[0] : null;\n\t},\n\t\n\t/**\n\t * Enables the tooltip\n\t * \n\t * @returns {self}\n\t * @public\n\t */\n\tenable: function() {\n\t\tthis.__enabled = true;\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Alias, deprecated in 4.0.0\n\t * \n\t * @param {function} callback\n\t * @returns {self}\n\t * @public\n\t */\n\thide: function(callback) {\n\t\treturn this.close(callback);\n\t},\n\t\n\t/**\n\t * Returns the instance\n\t * \n\t * @returns {self}\n\t * @public\n\t */\n\tinstance: function() {\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * For public use only, not to be used by plugins (use ::_off() instead)\n\t * \n\t * @returns {self}\n\t * @public\n\t */\n\toff: function() {\n\t\t\n\t\tif (!this.__destroyed) {\n\t\t\tthis.__$emitterPublic.off.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * For public use only, not to be used by plugins (use ::_on() instead)\n\t *\n\t * @returns {self}\n\t * @public\n\t */\n\ton: function() {\n\t\t\n\t\tif (!this.__destroyed) {\n\t\t\tthis.__$emitterPublic.on.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));\n\t\t}\n\t\telse {\n\t\t\tthis.__destroyError();\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * For public use only, not to be used by plugins\n\t *\n\t * @returns {self}\n\t * @public\n\t */\n\tone: function() {\n\t\t\n\t\tif (!this.__destroyed) {\n\t\t\tthis.__$emitterPublic.one.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));\n\t\t}\n\t\telse {\n\t\t\tthis.__destroyError();\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * @see self::_open\n\t * @returns {self}\n\t * @public\n\t */\n\topen: function(callback) {\n\t\t\n\t\tif (!this.__destroyed && !this.__destroying) {\n\t\t\tthis._open(null, callback);\n\t\t}\n\t\telse {\n\t\t\tthis.__destroyError();\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Get or set options. For internal use and advanced users only.\n\t * \n\t * @param {string} o Option name\n\t * @param {mixed} val optional A new value for the option\n\t * @return {mixed|self} If val is omitted, the value of the option\n\t * is returned, otherwise the instance itself is returned\n\t * @public\n\t */ \n\toption: function(o, val) {\n\t\t\n\t\t// getter\n\t\tif (val === undefined) {\n\t\t\treturn this.__options[o];\n\t\t}\n\t\t// setter\n\t\telse {\n\t\t\t\n\t\t\tif (!this.__destroyed) {\n\t\t\t\t\n\t\t\t\t// change value\n\t\t\t\tthis.__options[o] = val;\n\t\t\t\t\n\t\t\t\t// format\n\t\t\t\tthis.__optionsFormat();\n\t\t\t\t\n\t\t\t\t// re-prepare the triggers if needed\n\t\t\t\tif ($.inArray(o, ['trigger', 'triggerClose', 'triggerOpen']) >= 0) {\n\t\t\t\t\tthis.__prepareOrigin();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (o === 'selfDestruction') {\n\t\t\t\t\tthis.__prepareGC();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.__destroyError();\n\t\t\t}\n\t\t\t\n\t\t\treturn this;\n\t\t}\n\t},\n\t\n\t/**\n\t * This method is in charge of setting the position and size properties of the tooltip.\n\t * All the hard work is delegated to the display plugin.\n\t * Note: The tooltip may be detached from the DOM at the moment the method is called \n\t * but must be attached by the end of the method call.\n\t * \n\t * @param {object} event For internal use only. Defined if an event such as\n\t * window resizing triggered the repositioning\n\t * @param {boolean} tooltipIsDetached For internal use only. Set this to true if you\n\t * know that the tooltip not being in the DOM is not an issue (typically when the\n\t * tooltip element has just been created but has not been added to the DOM yet).\n\t * @returns {self}\n\t * @public\n\t */\n\treposition: function(event, tooltipIsDetached) {\n\t\t\n\t\tvar self = this;\n\t\t\n\t\tif (!self.__destroyed) {\n\t\t\t\n\t\t\t// if the tooltip is still open and the origin is still in the DOM\n\t\t\tif (self.__state != 'closed' && bodyContains(self._$origin)) {\n\t\t\t\t\n\t\t\t\t// if the tooltip has not been removed from DOM manually (or if it\n\t\t\t\t// has been detached on purpose)\n\t\t\t\tif (tooltipIsDetached || bodyContains(self._$tooltip)) {\n\t\t\t\t\t\n\t\t\t\t\tif (!tooltipIsDetached) {\n\t\t\t\t\t\t// detach in case the tooltip overflows the window and adds\n\t\t\t\t\t\t// scrollbars to it, so __geometry can be accurate\n\t\t\t\t\t\tself._$tooltip.detach();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// refresh the geometry object before passing it as a helper\n\t\t\t\t\tself.__Geometry = self.__geometry();\n\t\t\t\t\t\n\t\t\t\t\t// let a plugin fo the rest\n\t\t\t\t\tself._trigger({\n\t\t\t\t\t\ttype: 'reposition',\n\t\t\t\t\t\tevent: event,\n\t\t\t\t\t\thelper: {\n\t\t\t\t\t\t\tgeo: self.__Geometry\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tself.__destroyError();\n\t\t}\n\t\t\n\t\treturn self;\n\t},\n\t\n\t/**\n\t * Alias, deprecated in 4.0.0\n\t *\n\t * @param callback\n\t * @returns {self}\n\t * @public\n\t */\n\tshow: function(callback) {\n\t\treturn this.open(callback);\n\t},\n\t\n\t/**\n\t * Returns some properties about the instance\n\t * \n\t * @returns {object}\n\t * @public\n\t */\n\tstatus: function() {\n\t\t\n\t\treturn {\n\t\t\tdestroyed: this.__destroyed,\n\t\t\tdestroying: this.__destroying,\n\t\t\tenabled: this.__enabled,\n\t\t\topen: this.__state !== 'closed',\n\t\t\tstate: this.__state\n\t\t};\n\t},\n\t\n\t/**\n\t * For public use only, not to be used by plugins\n\t *\n\t * @returns {self}\n\t * @public\n\t */\n\ttriggerHandler: function() {\n\t\t\n\t\tif (!this.__destroyed) {\n\t\t\tthis.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));\n\t\t}\n\t\telse {\n\t\t\tthis.__destroyError();\n\t\t}\n\t\t\n\t\treturn this;\n\t}\n};\n\n$.fn.tooltipster = function() {\n\t\n\t// for using in closures\n\tvar args = Array.prototype.slice.apply(arguments),\n\t\t// common mistake: an HTML element can't be in several tooltips at the same time\n\t\tcontentCloningWarning = 'You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.';\n\t\n\t// this happens with $(sel).tooltipster(...) when $(sel) does not match anything\n\tif (this.length === 0) {\n\t\t\n\t\t// still chainable\n\t\treturn this;\n\t}\n\t// this happens when calling $(sel).tooltipster('methodName or options')\n\t// where $(sel) matches one or more elements\n\telse {\n\t\t\n\t\t// method calls\n\t\tif (typeof args[0] === 'string') {\n\t\t\t\n\t\t\tvar v = '#*$~&';\n\t\t\t\n\t\t\tthis.each(function() {\n\t\t\t\t\n\t\t\t\t// retrieve the namepaces of the tooltip(s) that exist on that element.\n\t\t\t\t// We will interact with the first tooltip only.\n\t\t\t\tvar ns = $(this).data('tooltipster-ns'),\n\t\t\t\t\t// self represents the instance of the first tooltipster plugin\n\t\t\t\t\t// associated to the current HTML object of the loop\n\t\t\t\t\tself = ns ? $(this).data(ns[0]) : null;\n\t\t\t\t\n\t\t\t\t// if the current element holds a tooltipster instance\n\t\t\t\tif (self) {\n\t\t\t\t\t\n\t\t\t\t\tif (typeof self[args[0]] === 'function') {\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (\tthis.length > 1\n\t\t\t\t\t\t\t&&\targs[0] == 'content'\n\t\t\t\t\t\t\t&&\t(\targs[1] instanceof $\n\t\t\t\t\t\t\t\t|| (typeof args[1] == 'object' && args[1] != null && args[1].tagName)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t&&\t!self.__options.contentCloning\n\t\t\t\t\t\t\t&&\tself.__options.debug\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tconsole.log(contentCloningWarning);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// note : args[1] and args[2] may not be defined\n\t\t\t\t\t\tvar resp = self[args[0]](args[1], args[2]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthrow new Error('Unknown method \"'+ args[0] +'\"');\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// if the function returned anything other than the instance\n\t\t\t\t\t// itself (which implies chaining, except for the `instance` method)\n\t\t\t\t\tif (resp !== self || args[0] === 'instance') {\n\t\t\t\t\t\t\n\t\t\t\t\t\tv = resp;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// return false to stop .each iteration on the first element\n\t\t\t\t\t\t// matched by the selector\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthrow new Error('You called Tooltipster\\'s \"'+ args[0] +'\" method on an uninitialized element');\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\treturn (v !== '#*$~&') ? v : this;\n\t\t}\n\t\t// first argument is undefined or an object: the tooltip is initializing\n\t\telse {\n\t\t\t\n\t\t\t// reset the array of last initialized objects\n\t\t\t$.tooltipster.__instancesLatestArr = [];\n\t\t\t\n\t\t\t// is there a defined value for the multiple option in the options object ?\n\t\t\tvar\tmultipleIsSet = args[0] && args[0].multiple !== undefined,\n\t\t\t\t// if the multiple option is set to true, or if it's not defined but\n\t\t\t\t// set to true in the defaults\n\t\t\t\tmultiple = (multipleIsSet && args[0].multiple) || (!multipleIsSet && defaults.multiple),\n\t\t\t\t// same for content\n\t\t\t\tcontentIsSet = args[0] && args[0].content !== undefined,\n\t\t\t\tcontent = (contentIsSet && args[0].content) || (!contentIsSet && defaults.content),\n\t\t\t\t// same for contentCloning\n\t\t\t\tcontentCloningIsSet = args[0] && args[0].contentCloning !== undefined,\n\t\t\t\tcontentCloning =\n\t\t\t\t\t\t(contentCloningIsSet && args[0].contentCloning)\n\t\t\t\t\t||\t(!contentCloningIsSet && defaults.contentCloning),\n\t\t\t\t// same for debug\n\t\t\t\tdebugIsSet = args[0] && args[0].debug !== undefined,\n\t\t\t\tdebug = (debugIsSet && args[0].debug) || (!debugIsSet && defaults.debug);\n\t\t\t\n\t\t\tif (\tthis.length > 1\n\t\t\t\t&&\t(\tcontent instanceof $\n\t\t\t\t\t|| (typeof content == 'object' && content != null && content.tagName)\n\t\t\t\t)\n\t\t\t\t&&\t!contentCloning\n\t\t\t\t&&\tdebug\n\t\t\t) {\n\t\t\t\tconsole.log(contentCloningWarning);\n\t\t\t}\n\t\t\t\n\t\t\t// create a tooltipster instance for each element if it doesn't\n\t\t\t// already have one or if the multiple option is set, and attach the\n\t\t\t// object to it\n\t\t\tthis.each(function() {\n\t\t\t\t\n\t\t\t\tvar go = false,\n\t\t\t\t\t$this = $(this),\n\t\t\t\t\tns = $this.data('tooltipster-ns'),\n\t\t\t\t\tobj = null;\n\t\t\t\t\n\t\t\t\tif (!ns) {\n\t\t\t\t\tgo = true;\n\t\t\t\t}\n\t\t\t\telse if (multiple) {\n\t\t\t\t\tgo = true;\n\t\t\t\t}\n\t\t\t\telse if (debug) {\n\t\t\t\t\tconsole.log('Tooltipster: one or more tooltips are already attached to the element below. Ignoring.');\n\t\t\t\t\tconsole.log(this);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (go) {\n\t\t\t\t\tobj = new $.Tooltipster(this, args[0]);\n\t\t\t\t\t\n\t\t\t\t\t// save the reference of the new instance\n\t\t\t\t\tif (!ns) ns = [];\n\t\t\t\t\tns.push(obj.__namespace);\n\t\t\t\t\t$this.data('tooltipster-ns', ns);\n\t\t\t\t\t\n\t\t\t\t\t// save the instance itself\n\t\t\t\t\t$this.data(obj.__namespace, obj);\n\t\t\t\t\t\n\t\t\t\t\t// call our constructor custom function.\n\t\t\t\t\t// we do this here and not in ::init() because we wanted\n\t\t\t\t\t// the object to be saved in $this.data before triggering\n\t\t\t\t\t// it\n\t\t\t\t\tif (obj.__options.functionInit) {\n\t\t\t\t\t\tobj.__options.functionInit.call(obj, obj, {\n\t\t\t\t\t\t\torigin: this\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// and now the event, for the plugins and core emitter\n\t\t\t\t\tobj._trigger('init');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$.tooltipster.__instancesLatestArr.push(obj);\n\t\t\t});\n\t\t\t\n\t\t\treturn this;\n\t\t}\n\t}\n};\n\n// Utilities\n\n/**\n * A class to check if a tooltip can fit in given dimensions\n * \n * @param {object} $tooltip The jQuery wrapped tooltip element, or a clone of it\n */\nfunction Ruler($tooltip) {\n\t\n\t// list of instance variables\n\t\n\tthis.$container;\n\tthis.constraints = null;\n\tthis.__$tooltip;\n\t\n\tthis.__init($tooltip);\n}\n\nRuler.prototype = {\n\t\n\t/**\n\t * Move the tooltip into an invisible div that does not allow overflow to make\n\t * size tests. Note: the tooltip may or may not be attached to the DOM at the\n\t * moment this method is called, it does not matter.\n\t * \n\t * @param {object} $tooltip The object to test. May be just a clone of the\n\t * actual tooltip.\n\t * @private\n\t */\n\t__init: function($tooltip) {\n\t\t\n\t\tthis.__$tooltip = $tooltip;\n\t\t\n\t\tthis.__$tooltip\n\t\t\t.css({\n\t\t\t\t// for some reason we have to specify top and left 0\n\t\t\t\tleft: 0,\n\t\t\t\t// any overflow will be ignored while measuring\n\t\t\t\toverflow: 'hidden',\n\t\t\t\t// positions at (0,0) without the div using 100% of the available width\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: 0\n\t\t\t})\n\t\t\t// overflow must be auto during the test. We re-set this in case\n\t\t\t// it were modified by the user\n\t\t\t.find('.tooltipster-content')\n\t\t\t\t.css('overflow', 'auto');\n\t\t\n\t\tthis.$container = $('<div class=\"tooltipster-ruler\"></div>')\n\t\t\t.append(this.__$tooltip)\n\t\t\t.appendTo('body');\n\t},\n\t\n\t/**\n\t * Force the browser to redraw (re-render) the tooltip immediately. This is required\n\t * when you changed some CSS properties and need to make something with it\n\t * immediately, without waiting for the browser to redraw at the end of instructions.\n\t *\n\t * @see http://stackoverflow.com/questions/3485365/how-can-i-force-webkit-to-redraw-repaint-to-propagate-style-changes\n\t * @private\n\t */\n\t__forceRedraw: function() {\n\t\t\n\t\t// note: this would work but for Webkit only\n\t\t//this.__$tooltip.close();\n\t\t//this.__$tooltip[0].offsetHeight;\n\t\t//this.__$tooltip.open();\n\t\t\n\t\t// works in FF too\n\t\tvar $p = this.__$tooltip.parent();\n\t\tthis.__$tooltip.detach();\n\t\tthis.__$tooltip.appendTo($p);\n\t},\n\t\n\t/**\n\t * Set maximum dimensions for the tooltip. A call to ::measure afterwards\n\t * will tell us if the content overflows or if it's ok\n\t *\n\t * @param {int} width\n\t * @param {int} height\n\t * @return {Ruler}\n\t * @public\n\t */\n\tconstrain: function(width, height) {\n\t\t\n\t\tthis.constraints = {\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\t\t\n\t\tthis.__$tooltip.css({\n\t\t\t// we disable display:flex, otherwise the content would overflow without\n\t\t\t// creating horizontal scrolling (which we need to detect).\n\t\t\tdisplay: 'block',\n\t\t\t// reset any previous height\n\t\t\theight: '',\n\t\t\t// we'll check if horizontal scrolling occurs\n\t\t\toverflow: 'auto',\n\t\t\t// we'll set the width and see what height is generated and if there\n\t\t\t// is horizontal overflow\n\t\t\twidth: width\n\t\t});\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Reset the tooltip content overflow and remove the test container\n\t * \n\t * @returns {Ruler}\n\t * @public\n\t */\n\tdestroy: function() {\n\t\t\n\t\t// in case the element was not a clone\n\t\tthis.__$tooltip\n\t\t\t.detach()\n\t\t\t.find('.tooltipster-content')\n\t\t\t\t.css({\n\t\t\t\t\t// reset to CSS value\n\t\t\t\t\tdisplay: '',\n\t\t\t\t\toverflow: ''\n\t\t\t\t});\n\t\t\n\t\tthis.$container.remove();\n\t},\n\t\n\t/**\n\t * Removes any constraints\n\t * \n\t * @returns {Ruler}\n\t * @public\n\t */\n\tfree: function() {\n\t\t\n\t\tthis.constraints = null;\n\t\t\n\t\t// reset to natural size\n\t\tthis.__$tooltip.css({\n\t\t\tdisplay: '',\n\t\t\theight: '',\n\t\t\toverflow: 'visible',\n\t\t\twidth: ''\n\t\t});\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Returns the size of the tooltip. When constraints are applied, also returns\n\t * whether the tooltip fits in the provided dimensions.\n\t * The idea is to see if the new height is small enough and if the content does\n\t * not overflow horizontally.\n\t *\n\t * @param {int} width\n\t * @param {int} height\n\t * @returns {object} An object with a bool `fits` property and a `size` property\n\t * @public\n\t */\n\tmeasure: function() {\n\t\t\n\t\tthis.__forceRedraw();\n\t\t\n\t\tvar tooltipBcr = this.__$tooltip[0].getBoundingClientRect(),\n\t\t\tresult = { size: {\n\t\t\t\t// bcr.width/height are not defined in IE8- but in this\n\t\t\t\t// case, bcr.right/bottom will have the same value\n\t\t\t\t// except in iOS 8+ where tooltipBcr.bottom/right are wrong\n\t\t\t\t// after scrolling for reasons yet to be determined\n\t\t\t\theight: tooltipBcr.height || tooltipBcr.bottom,\n\t\t\t\twidth: tooltipBcr.width || tooltipBcr.right\n\t\t\t}};\n\t\t\n\t\tif (this.constraints) {\n\t\t\t\n\t\t\t// note: we used to use offsetWidth instead of boundingRectClient but\n\t\t\t// it returned rounded values, causing issues with sub-pixel layouts.\n\t\t\t\n\t\t\t// note2: noticed that the bcrWidth of text content of a div was once\n\t\t\t// greater than the bcrWidth of its container by 1px, causing the final\n\t\t\t// tooltip box to be too small for its content. However, evaluating\n\t\t\t// their widths one against the other (below) surprisingly returned\n\t\t\t// equality. Happened only once in Chrome 48, was not able to reproduce\n\t\t\t// => just having fun with float position values...\n\t\t\t\n\t\t\tvar $content = this.__$tooltip.find('.tooltipster-content'),\n\t\t\t\theight = this.__$tooltip.outerHeight(),\n\t\t\t\tcontentBcr = $content[0].getBoundingClientRect(),\n\t\t\t\tfits = {\n\t\t\t\t\theight: height <= this.constraints.height,\n\t\t\t\t\twidth: (\n\t\t\t\t\t\t// this condition accounts for min-width property that\n\t\t\t\t\t\t// may apply\n\t\t\t\t\t\ttooltipBcr.width <= this.constraints.width\n\t\t\t\t\t\t\t// the -1 is here because scrollWidth actually returns\n\t\t\t\t\t\t\t// a rounded value, and may be greater than bcr.width if\n\t\t\t\t\t\t\t// it was rounded up. This may cause an issue for contents\n\t\t\t\t\t\t\t// which actually really overflow  by 1px or so, but that\n\t\t\t\t\t\t\t// should be rare. Not sure how to solve this efficiently.\n\t\t\t\t\t\t\t// See http://blogs.msdn.com/b/ie/archive/2012/02/17/sub-pixel-rendering-and-the-css-object-model.aspx\n\t\t\t\t\t\t&&\tcontentBcr.width >= $content[0].scrollWidth - 1\n\t\t\t\t\t)\n\t\t\t\t};\n\t\t\t\n\t\t\tresult.fits = fits.height && fits.width;\n\t\t}\n\t\t\n\t\t// old versions of IE get the width wrong for some reason and it causes\n\t\t// the text to be broken to a new line, so we round it up. If the width\n\t\t// is the width of the screen though, we can assume it is accurate.\n\t\tif (\tenv.IE\n\t\t\t&&\tenv.IE <= 11\n\t\t\t&&\tresult.size.width !== env.window.document.documentElement.clientWidth\n\t\t) {\n\t\t\tresult.size.width = Math.ceil(result.size.width) + 1;\n\t\t}\n\t\t\n\t\treturn result;\n\t}\n};\n\n// quick & dirty compare function, not bijective nor multidimensional\nfunction areEqual(a,b) {\n\tvar same = true;\n\t$.each(a, function(i, _) {\n\t\tif (b[i] === undefined || a[i] !== b[i]) {\n\t\t\tsame = false;\n\t\t\treturn false;\n\t\t}\n\t});\n\treturn same;\n}\n\n/**\n * A fast function to check if an element is still in the DOM. It\n * tries to use an id as ids are indexed by the browser, or falls\n * back to jQuery's `contains` method. May fail if two elements\n * have the same id, but so be it\n *\n * @param {object} $obj A jQuery-wrapped HTML element\n * @return {boolean}\n */\nfunction bodyContains($obj) {\n\tvar id = $obj.attr('id'),\n\t\tel = id ? env.window.document.getElementById(id) : null;\n\t// must also check that the element with the id is the one we want\n\treturn el ? el === $obj[0] : $.contains(env.window.document.body, $obj[0]);\n}\n\n// detect IE versions for dirty fixes\nvar uA = navigator.userAgent.toLowerCase();\nif (uA.indexOf('msie') != -1) env.IE = parseInt(uA.split('msie')[1]);\nelse if (uA.toLowerCase().indexOf('trident') !== -1 && uA.indexOf(' rv:11') !== -1) env.IE = 11;\nelse if (uA.toLowerCase().indexOf('edge/') != -1) env.IE = parseInt(uA.toLowerCase().split('edge/')[1]);\n\n// detecting support for CSS transitions\nfunction transitionSupport() {\n\t\n\t// env.window is not defined yet when this is called\n\tif (!win) return false;\n\t\n\tvar b = win.document.body || win.document.documentElement,\n\t\ts = b.style,\n\t\tp = 'transition',\n\t\tv = ['Moz', 'Webkit', 'Khtml', 'O', 'ms'];\n\t\n\tif (typeof s[p] == 'string') { return true; }\n\t\n\tp = p.charAt(0).toUpperCase() + p.substr(1);\n\tfor (var i=0; i<v.length; i++) {\n\t\tif (typeof s[v[i] + p] == 'string') { return true; }\n\t}\n\treturn false;\n}\n\n// we'll return jQuery for plugins not to have to declare it as a dependency,\n// but it's done by a build task since it should be included only once at the\n// end when we concatenate the core file with a plugin\r\n// sideTip is Tooltipster's default plugin.\n// This file will be UMDified by a build task.\n\nvar pluginName = 'tooltipster.sideTip';\n\n$.tooltipster._plugin({\n\tname: pluginName,\n\tinstance: {\n\t\t/**\n\t\t * Defaults are provided as a function for an easy override by inheritance\n\t\t *\n\t\t * @return {object} An object with the defaults options\n\t\t * @private\n\t\t */\n\t\t__defaults: function() {\n\t\t\t\n\t\t\treturn {\n\t\t\t\t// if the tooltip should display an arrow that points to the origin\n\t\t\t\tarrow: true,\n\t\t\t\t// the distance in pixels between the tooltip and the origin\n\t\t\t\tdistance: 6,\n\t\t\t\t// allows to easily change the position of the tooltip\n\t\t\t\tfunctionPosition: null,\n\t\t\t\tmaxWidth: null,\n\t\t\t\t// used to accomodate the arrow of tooltip if there is one.\n\t\t\t\t// First to make sure that the arrow target is not too close\n\t\t\t\t// to the edge of the tooltip, so the arrow does not overflow\n\t\t\t\t// the tooltip. Secondly when we reposition the tooltip to\n\t\t\t\t// make sure that it's positioned in such a way that the arrow is\n\t\t\t\t// still pointing at the target (and not a few pixels beyond it).\n\t\t\t\t// It should be equal to or greater than half the width of\n\t\t\t\t// the arrow (by width we mean the size of the side which touches\n\t\t\t\t// the side of the tooltip).\n\t\t\t\tminIntersection: 16,\n\t\t\t\tminWidth: 0,\n\t\t\t\t// deprecated in 4.0.0. Listed for _optionsExtract to pick it up\n\t\t\t\tposition: null,\n\t\t\t\tside: 'top',\n\t\t\t\t// set to false to position the tooltip relatively to the document rather\n\t\t\t\t// than the window when we open it\n\t\t\t\tviewportAware: true\n\t\t\t};\n\t\t},\n\t\t\n\t\t/**\n\t\t * Run once: at instantiation of the plugin\n\t\t *\n\t\t * @param {object} instance The tooltipster object that instantiated this plugin\n\t\t * @private\n\t\t */\n\t\t__init: function(instance) {\n\t\t\t\n\t\t\tvar self = this;\n\t\t\t\n\t\t\t// list of instance variables\n\t\t\t\n\t\t\tself.__instance = instance;\n\t\t\tself.__namespace = 'tooltipster-sideTip-'+ Math.round(Math.random()*1000000);\n\t\t\tself.__previousState = 'closed';\n\t\t\tself.__options;\n\t\t\t\n\t\t\t// initial formatting\n\t\t\tself.__optionsFormat();\n\t\t\t\n\t\t\tself.__instance._on('state.'+ self.__namespace, function(event) {\n\t\t\t\t\n\t\t\t\tif (event.state == 'closed') {\n\t\t\t\t\tself.__close();\n\t\t\t\t}\n\t\t\t\telse if (event.state == 'appearing' && self.__previousState == 'closed') {\n\t\t\t\t\tself.__create();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tself.__previousState = event.state;\n\t\t\t});\n\t\t\t\n\t\t\t// reformat every time the options are changed\n\t\t\tself.__instance._on('options.'+ self.__namespace, function() {\n\t\t\t\tself.__optionsFormat();\n\t\t\t});\n\t\t\t\n\t\t\tself.__instance._on('reposition.'+ self.__namespace, function(e) {\n\t\t\t\tself.__reposition(e.event, e.helper);\n\t\t\t});\n\t\t},\n\t\t\n\t\t/**\n\t\t * Called when the tooltip has closed\n\t\t * \n\t\t * @private\n\t\t */\n\t\t__close: function() {\n\t\t\t\n\t\t\t// detach our content object first, so the next jQuery's remove()\n\t\t\t// call does not unbind its event handlers\n\t\t\tif (this.__instance.content() instanceof $) {\n\t\t\t\tthis.__instance.content().detach();\n\t\t\t}\n\t\t\t\n\t\t\t// remove the tooltip from the DOM\n\t\t\tthis.__instance._$tooltip.remove();\n\t\t\tthis.__instance._$tooltip = null;\n\t\t},\n\t\t\n\t\t/**\n\t\t * Creates the HTML element of the tooltip.\n\t\t * \n\t\t * @private\n\t\t */\n\t\t__create: function() {\n\t\t\t\n\t\t\t// note: we wrap with a .tooltipster-box div to be able to set a margin on it\n\t\t\t// (.tooltipster-base must not have one)\n\t\t\tvar $html = $(\n\t\t\t\t'<div class=\"tooltipster-base tooltipster-sidetip\">' +\n\t\t\t\t\t'<div class=\"tooltipster-box\">' +\n\t\t\t\t\t\t'<div class=\"tooltipster-content\"></div>' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t\t'<div class=\"tooltipster-arrow\">' +\n\t\t\t\t\t\t'<div class=\"tooltipster-arrow-uncropped\">' +\n\t\t\t\t\t\t\t'<div class=\"tooltipster-arrow-border\"></div>' +\n\t\t\t\t\t\t\t'<div class=\"tooltipster-arrow-background\"></div>' +\n\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t'</div>'\n\t\t\t);\n\t\t\t\n\t\t\t// hide arrow if asked\n\t\t\tif (!this.__options.arrow) {\n\t\t\t\t$html\n\t\t\t\t\t.find('.tooltipster-box')\n\t\t\t\t\t\t.css('margin', 0)\n\t\t\t\t\t\t.end()\n\t\t\t\t\t.find('.tooltipster-arrow')\n\t\t\t\t\t\t.hide();\n\t\t\t}\n\t\t\t\n\t\t\t// apply min/max width if asked\n\t\t\tif (this.__options.minWidth) {\n\t\t\t\t$html.css('min-width', this.__options.minWidth + 'px');\n\t\t\t}\n\t\t\tif (this.__options.maxWidth) {\n\t\t\t\t$html.css('max-width', this.__options.maxWidth + 'px');\n\t\t\t}\n\t\t\t\n\t\t\tthis.__instance._$tooltip = $html;\n\t\t\t\n\t\t\t// tell the instance that the tooltip element has been created\n\t\t\tthis.__instance._trigger('created');\n\t\t},\n\t\t\n\t\t/**\n\t\t * Used when the plugin is to be unplugged\n\t\t *\n\t\t * @private\n\t\t */\n\t\t__destroy: function() {\n\t\t\tthis.__instance._off('.'+ self.__namespace);\n\t\t},\n\t\t\n\t\t/**\n\t\t * (Re)compute this.__options from the options declared to the instance\n\t\t *\n\t\t * @private\n\t\t */\n\t\t__optionsFormat: function() {\n\t\t\t\n\t\t\tvar self = this;\n\t\t\t\n\t\t\t// get the options\n\t\t\tself.__options = self.__instance._optionsExtract(pluginName, self.__defaults());\n\t\t\t\n\t\t\t// for backward compatibility, deprecated in v4.0.0\n\t\t\tif (self.__options.position) {\n\t\t\t\tself.__options.side = self.__options.position;\n\t\t\t}\n\t\t\t\n\t\t\t// options formatting\n\t\t\t\n\t\t\t// format distance as a four-cell array if it ain't one yet and then make\n\t\t\t// it an object with top/bottom/left/right properties\n\t\t\tif (typeof self.__options.distance != 'object') {\n\t\t\t\tself.__options.distance = [self.__options.distance];\n\t\t\t}\n\t\t\tif (self.__options.distance.length < 4) {\n\t\t\t\t\n\t\t\t\tif (self.__options.distance[1] === undefined) self.__options.distance[1] = self.__options.distance[0];\n\t\t\t\tif (self.__options.distance[2] === undefined) self.__options.distance[2] = self.__options.distance[0];\n\t\t\t\tif (self.__options.distance[3] === undefined) self.__options.distance[3] = self.__options.distance[1];\n\t\t\t\t\n\t\t\t\tself.__options.distance = {\n\t\t\t\t\ttop: self.__options.distance[0],\n\t\t\t\t\tright: self.__options.distance[1],\n\t\t\t\t\tbottom: self.__options.distance[2],\n\t\t\t\t\tleft: self.__options.distance[3]\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\t// let's transform:\n\t\t\t// 'top' into ['top', 'bottom', 'right', 'left']\n\t\t\t// 'right' into ['right', 'left', 'top', 'bottom']\n\t\t\t// 'bottom' into ['bottom', 'top', 'right', 'left']\n\t\t\t// 'left' into ['left', 'right', 'top', 'bottom']\n\t\t\tif (typeof self.__options.side == 'string') {\n\t\t\t\t\n\t\t\t\tvar opposites = {\n\t\t\t\t\t'top': 'bottom',\n\t\t\t\t\t'right': 'left',\n\t\t\t\t\t'bottom': 'top',\n\t\t\t\t\t'left': 'right'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tself.__options.side = [self.__options.side, opposites[self.__options.side]];\n\t\t\t\t\n\t\t\t\tif (self.__options.side[0] == 'left' || self.__options.side[0] == 'right') {\n\t\t\t\t\tself.__options.side.push('top', 'bottom');\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tself.__options.side.push('right', 'left');\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// misc\n\t\t\t// disable the arrow in IE6 unless the arrow option was explicitly set to true\n\t\t\tif (\t$.tooltipster._env.IE === 6\n\t\t\t\t&&\tself.__options.arrow !== true\n\t\t\t) {\n\t\t\t\tself.__options.arrow = false;\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * This method must compute and set the positioning properties of the\n\t\t * tooltip (left, top, width, height, etc.). It must also make sure the\n\t\t * tooltip is eventually appended to its parent (since the element may be\n\t\t * detached from the DOM at the moment the method is called).\n\t\t *\n\t\t * We'll evaluate positioning scenarios to find which side can contain the\n\t\t * tooltip in the best way. We'll consider things relatively to the window\n\t\t * (unless the user asks not to), then to the document (if need be, or if the\n\t\t * user explicitly requires the tests to run on the document). For each\n\t\t * scenario, measures are taken, allowing us to know how well the tooltip\n\t\t * is going to fit. After that, a sorting function will let us know what\n\t\t * the best scenario is (we also allow the user to choose his favorite\n\t\t * scenario by using an event).\n\t\t * \n\t\t * @param {object} helper An object that contains variables that plugin\n\t\t * creators may find useful (see below)\n\t\t * @param {object} helper.geo An object with many layout properties\n\t\t * about objects of interest (window, document, origin). This should help\n\t\t * plugin users compute the optimal position of the tooltip\n\t\t * @private\n\t\t */\n\t\t__reposition: function(event, helper) {\n\t\t\t\n\t\t\tvar self = this,\n\t\t\t\tfinalResult,\n\t\t\t\t// to know where to put the tooltip, we need to know on which point\n\t\t\t\t// of the x or y axis we should center it. That coordinate is the target\n\t\t\t\ttargets = self.__targetFind(helper),\n\t\t\t\ttestResults = [];\n\t\t\t\n\t\t\t// make sure the tooltip is detached while we make tests on a clone\n\t\t\tself.__instance._$tooltip.detach();\n\t\t\t\n\t\t\t// we could actually provide the original element to the Ruler and\n\t\t\t// not a clone, but it just feels right to keep it out of the\n\t\t\t// machinery.\n\t\t\tvar $clone = self.__instance._$tooltip.clone(),\n\t\t\t\t// start position tests session\n\t\t\t\truler = $.tooltipster._getRuler($clone),\n\t\t\t\tsatisfied = false,\n\t\t\t\tanimation = self.__instance.option('animation');\n\t\t\t\n\t\t\t// an animation class could contain properties that distort the size\n\t\t\tif (animation) {\n\t\t\t\t$clone.removeClass('tooltipster-'+ animation);\n\t\t\t}\n\t\t\t\n\t\t\t// start evaluating scenarios\n\t\t\t$.each(['window', 'document'], function(i, container) {\n\t\t\t\t\n\t\t\t\tvar takeTest = null;\n\t\t\t\t\n\t\t\t\t// let the user decide to keep on testing or not\n\t\t\t\tself.__instance._trigger({\n\t\t\t\t\tcontainer: container,\n\t\t\t\t\thelper: helper,\n\t\t\t\t\tsatisfied: satisfied,\n\t\t\t\t\ttakeTest: function(bool) {\n\t\t\t\t\t\ttakeTest = bool;\n\t\t\t\t\t},\n\t\t\t\t\tresults: testResults,\n\t\t\t\t\ttype: 'positionTest'\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (\ttakeTest == true\n\t\t\t\t\t||\t(\ttakeTest != false\n\t\t\t\t\t\t&&\tsatisfied == false\n\t\t\t\t\t\t\t// skip the window scenarios if asked. If they are reintegrated by\n\t\t\t\t\t\t\t// the callback of the positionTest event, they will have to be\n\t\t\t\t\t\t\t// excluded using the callback of positionTested\n\t\t\t\t\t\t&&\t(container != 'window' || self.__options.viewportAware)\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\t\n\t\t\t\t\t// for each allowed side\n\t\t\t\t\tfor (var i=0; i < self.__options.side.length; i++) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar distance = {\n\t\t\t\t\t\t\t\thorizontal: 0,\n\t\t\t\t\t\t\t\tvertical: 0\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tside = self.__options.side[i];\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (side == 'top' || side == 'bottom') {\n\t\t\t\t\t\t\tdistance.vertical = self.__options.distance[side];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tdistance.horizontal = self.__options.distance[side];\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// this may have an effect on the size of the tooltip if there are css\n\t\t\t\t\t\t// rules for the arrow or something else\n\t\t\t\t\t\tself.__sideChange($clone, side);\n\t\t\t\t\t\t\n\t\t\t\t\t\t$.each(['natural', 'constrained'], function(i, mode) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttakeTest = null;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// emit an event on the instance\n\t\t\t\t\t\t\tself.__instance._trigger({\n\t\t\t\t\t\t\t\tcontainer: container,\n\t\t\t\t\t\t\t\tevent: event,\n\t\t\t\t\t\t\t\thelper: helper,\n\t\t\t\t\t\t\t\tmode: mode,\n\t\t\t\t\t\t\t\tresults: testResults,\n\t\t\t\t\t\t\t\tsatisfied: satisfied,\n\t\t\t\t\t\t\t\tside: side,\n\t\t\t\t\t\t\t\ttakeTest: function(bool) {\n\t\t\t\t\t\t\t\t\ttakeTest = bool;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttype: 'positionTest'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (\ttakeTest == true\n\t\t\t\t\t\t\t\t||\t(\ttakeTest != false\n\t\t\t\t\t\t\t\t\t&&\tsatisfied == false\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tvar testResult = {\n\t\t\t\t\t\t\t\t\tcontainer: container,\n\t\t\t\t\t\t\t\t\t// we let the distance as an object here, it can make things a little easier\n\t\t\t\t\t\t\t\t\t// during the user's calculations at positionTest/positionTested\n\t\t\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\t\t\t// whether the tooltip can fit in the size of the viewport (does not mean\n\t\t\t\t\t\t\t\t\t// that we'll be able to make it initially entirely visible, see 'whole')\n\t\t\t\t\t\t\t\t\tfits: null,\n\t\t\t\t\t\t\t\t\tmode: mode,\n\t\t\t\t\t\t\t\t\touterSize: null,\n\t\t\t\t\t\t\t\t\tside: side,\n\t\t\t\t\t\t\t\t\tsize: null,\n\t\t\t\t\t\t\t\t\ttarget: targets[side],\n\t\t\t\t\t\t\t\t\t// check if the origin has enough surface on screen for the tooltip to\n\t\t\t\t\t\t\t\t\t// aim at it without overflowing the viewport (this is due to the thickness\n\t\t\t\t\t\t\t\t\t// of the arrow represented by the minIntersection length).\n\t\t\t\t\t\t\t\t\t// If not, the tooltip will have to be partly or entirely off screen in\n\t\t\t\t\t\t\t\t\t// order to stay docked to the origin. This value will stay null when the\n\t\t\t\t\t\t\t\t\t// container is the document, as it is not relevant\n\t\t\t\t\t\t\t\t\twhole: null\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// get the size of the tooltip with or without size constraints\n\t\t\t\t\t\t\t\tvar rulerConfigured = (mode == 'natural') ?\n\t\t\t\t\t\t\t\t\t\truler.free() :\n\t\t\t\t\t\t\t\t\t\truler.constrain(\n\t\t\t\t\t\t\t\t\t\t\thelper.geo.available[container][side].width - distance.horizontal,\n\t\t\t\t\t\t\t\t\t\t\thelper.geo.available[container][side].height - distance.vertical\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\trulerResults = rulerConfigured.measure();\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\ttestResult.size = rulerResults.size;\n\t\t\t\t\t\t\t\ttestResult.outerSize = {\n\t\t\t\t\t\t\t\t\theight: rulerResults.size.height + distance.vertical,\n\t\t\t\t\t\t\t\t\twidth: rulerResults.size.width + distance.horizontal\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (mode == 'natural') {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif(\t\thelper.geo.available[container][side].width >= testResult.outerSize.width\n\t\t\t\t\t\t\t\t\t\t&&\thelper.geo.available[container][side].height >= testResult.outerSize.height\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\ttestResult.fits = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\ttestResult.fits = false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\ttestResult.fits = rulerResults.fits;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (container == 'window') {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (!testResult.fits) {\n\t\t\t\t\t\t\t\t\t\ttestResult.whole = false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tif (side == 'top' || side == 'bottom') {\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\ttestResult.whole = (\n\t\t\t\t\t\t\t\t\t\t\t\t\thelper.geo.origin.windowOffset.right >= self.__options.minIntersection\n\t\t\t\t\t\t\t\t\t\t\t\t&&\thelper.geo.window.size.width - helper.geo.origin.windowOffset.left >= self.__options.minIntersection\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\ttestResult.whole = (\n\t\t\t\t\t\t\t\t\t\t\t\t\thelper.geo.origin.windowOffset.bottom >= self.__options.minIntersection\n\t\t\t\t\t\t\t\t\t\t\t\t&&\thelper.geo.window.size.height - helper.geo.origin.windowOffset.top >= self.__options.minIntersection\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\ttestResults.push(testResult);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// we don't need to compute more positions if we have one fully on screen\n\t\t\t\t\t\t\t\tif (testResult.whole) {\n\t\t\t\t\t\t\t\t\tsatisfied = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t// don't run the constrained test unless the natural width was greater\n\t\t\t\t\t\t\t\t\t// than the available width, otherwise it's pointless as we know it\n\t\t\t\t\t\t\t\t\t// wouldn't fit either\n\t\t\t\t\t\t\t\t\tif (\ttestResult.mode == 'natural'\n\t\t\t\t\t\t\t\t\t\t&&\t(\ttestResult.fits\n\t\t\t\t\t\t\t\t\t\t\t||\ttestResult.size.width <= helper.geo.available[container][side].width\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t// the user may eliminate the unwanted scenarios from testResults, but he's\n\t\t\t// not supposed to alter them at this point. functionPosition and the\n\t\t\t// position event serve that purpose.\n\t\t\tself.__instance._trigger({\n\t\t\t\tedit: function(r) {\n\t\t\t\t\ttestResults = r;\n\t\t\t\t},\n\t\t\t\tevent: event,\n\t\t\t\thelper: helper,\n\t\t\t\tresults: testResults,\n\t\t\t\ttype: 'positionTested'\n\t\t\t});\n\t\t\t\n\t\t\t/**\n\t\t\t * Sort the scenarios to find the favorite one.\n\t\t\t * \n\t\t\t * The favorite scenario is when we can fully display the tooltip on screen,\n\t\t\t * even if it means that the middle of the tooltip is no longer centered on\n\t\t\t * the middle of the origin (when the origin is near the edge of the screen\n\t\t\t * or even partly off screen). We want the tooltip on the preferred side,\n\t\t\t * even if it means that we have to use a constrained size rather than a\n\t\t\t * natural one (as long as it fits). When the origin is off screen at the top\n\t\t\t * the tooltip will be positioned at the bottom (if allowed), if the origin\n\t\t\t * is off screen on the right, it will be positioned on the left, etc.\n\t\t\t * If there are no scenarios where the tooltip can fit on screen, or if the\n\t\t\t * user does not want the tooltip to fit on screen (viewportAware == false),\n\t\t\t * we fall back to the scenarios relative to the document.\n\t\t\t * \n\t\t\t * When the tooltip is bigger than the viewport in either dimension, we stop\n\t\t\t * looking at the window scenarios and consider the document scenarios only,\n\t\t\t * with the same logic to find on which side it would fit best.\n\t\t\t * \n\t\t\t * If the tooltip cannot fit the document on any side, we force it at the\n\t\t\t * bottom, so at least the user can scroll to see it.\n \t\t\t */\n\t\t\ttestResults.sort(function(a, b) {\n\t\t\t\t\n\t\t\t\t// best if it's whole (the tooltip fits and adapts to the viewport)\n\t\t\t\tif (a.whole && !b.whole) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\telse if (!a.whole && b.whole) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\telse if (a.whole && b.whole) {\n\t\t\t\t\t\n\t\t\t\t\tvar ai = self.__options.side.indexOf(a.side),\n\t\t\t\t\t\tbi = self.__options.side.indexOf(b.side);\n\t\t\t\t\t\n\t\t\t\t\t// use the user's sides fallback array\n\t\t\t\t\tif (ai < bi) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\telse if (ai > bi) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// will be used if the user forced the tests to continue\n\t\t\t\t\t\treturn a.mode == 'natural' ? -1 : 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t\n\t\t\t\t\t// better if it fits\n\t\t\t\t\tif (a.fits && !b.fits) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\telse if (!a.fits && b.fits) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\telse if (a.fits && b.fits) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar ai = self.__options.side.indexOf(a.side),\n\t\t\t\t\t\t\tbi = self.__options.side.indexOf(b.side);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// use the user's sides fallback array\n\t\t\t\t\t\tif (ai < bi) {\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (ai > bi) {\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// will be used if the user forced the tests to continue\n\t\t\t\t\t\t\treturn a.mode == 'natural' ? -1 : 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// if everything failed, this will give a preference to the case where\n\t\t\t\t\t\t// the tooltip overflows the document at the bottom\n\t\t\t\t\t\tif (\ta.container == 'document'\n\t\t\t\t\t\t\t&&\ta.side == 'bottom'\n\t\t\t\t\t\t\t&&\ta.mode == 'natural'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tfinalResult = testResults[0];\n\t\t\t\n\t\t\t\n\t\t\t// now let's find the coordinates of the tooltip relatively to the window\n\t\t\tfinalResult.coord = {};\n\t\t\t\n\t\t\tswitch (finalResult.side) {\n\t\t\t\t\n\t\t\t\tcase 'left':\n\t\t\t\tcase 'right':\n\t\t\t\t\tfinalResult.coord.top = Math.floor(finalResult.target - finalResult.size.height / 2);\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 'bottom':\n\t\t\t\tcase 'top':\n\t\t\t\t\tfinalResult.coord.left = Math.floor(finalResult.target - finalResult.size.width / 2);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tswitch (finalResult.side) {\n\t\t\t\t\n\t\t\t\tcase 'left':\n\t\t\t\t\tfinalResult.coord.left = helper.geo.origin.windowOffset.left - finalResult.outerSize.width;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 'right':\n\t\t\t\t\tfinalResult.coord.left = helper.geo.origin.windowOffset.right + finalResult.distance.horizontal;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 'top':\n\t\t\t\t\tfinalResult.coord.top = helper.geo.origin.windowOffset.top - finalResult.outerSize.height;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 'bottom':\n\t\t\t\t\tfinalResult.coord.top = helper.geo.origin.windowOffset.bottom + finalResult.distance.vertical;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\t// if the tooltip can potentially be contained within the viewport dimensions\n\t\t\t// and that we are asked to make it fit on screen\n\t\t\tif (finalResult.container == 'window') {\n\t\t\t\t\n\t\t\t\t// if the tooltip overflows the viewport, we'll move it accordingly (then it will\n\t\t\t\t// not be centered on the middle of the origin anymore). We only move horizontally\n\t\t\t\t// for top and bottom tooltips and vice versa.\n\t\t\t\tif (finalResult.side == 'top' || finalResult.side == 'bottom') {\n\t\t\t\t\t\n\t\t\t\t\t// if there is an overflow on the left\n\t\t\t\t\tif (finalResult.coord.left < 0) {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// prevent the overflow unless the origin itself gets off screen (minus the\n\t\t\t\t\t\t// margin needed to keep the arrow pointing at the target)\n\t\t\t\t\t\tif (helper.geo.origin.windowOffset.right - this.__options.minIntersection >= 0) {\n\t\t\t\t\t\t\tfinalResult.coord.left = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tfinalResult.coord.left = helper.geo.origin.windowOffset.right - this.__options.minIntersection - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// or an overflow on the right\n\t\t\t\t\telse if (finalResult.coord.left > helper.geo.window.size.width - finalResult.size.width) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (helper.geo.origin.windowOffset.left + this.__options.minIntersection <= helper.geo.window.size.width) {\n\t\t\t\t\t\t\tfinalResult.coord.left = helper.geo.window.size.width - finalResult.size.width;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tfinalResult.coord.left = helper.geo.origin.windowOffset.left + this.__options.minIntersection + 1 - finalResult.size.width;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t\n\t\t\t\t\t// overflow at the top\n\t\t\t\t\tif (finalResult.coord.top < 0) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (helper.geo.origin.windowOffset.bottom - this.__options.minIntersection >= 0) {\n\t\t\t\t\t\t\tfinalResult.coord.top = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tfinalResult.coord.top = helper.geo.origin.windowOffset.bottom - this.__options.minIntersection - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// or at the bottom\n\t\t\t\t\telse if (finalResult.coord.top > helper.geo.window.size.height - finalResult.size.height) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (helper.geo.origin.windowOffset.top + this.__options.minIntersection <= helper.geo.window.size.height) {\n\t\t\t\t\t\t\tfinalResult.coord.top = helper.geo.window.size.height - finalResult.size.height;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tfinalResult.coord.top = helper.geo.origin.windowOffset.top + this.__options.minIntersection + 1 - finalResult.size.height;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\n\t\t\t\t// there might be overflow here too but it's easier to handle. If there has\n\t\t\t\t// to be an overflow, we'll make sure it's on the right side of the screen\n\t\t\t\t// (because the browser will extend the document size if there is an overflow\n\t\t\t\t// on the right, but not on the left). The sort function above has already\n\t\t\t\t// made sure that a bottom document overflow is preferred to a top overflow,\n\t\t\t\t// so we don't have to care about it.\n\t\t\t\t\n\t\t\t\t// if there is an overflow on the right\n\t\t\t\tif (finalResult.coord.left > helper.geo.window.size.width - finalResult.size.width) {\n\t\t\t\t\t\n\t\t\t\t\t// this may actually create on overflow on the left but we'll fix it in a sec\n\t\t\t\t\tfinalResult.coord.left = helper.geo.window.size.width - finalResult.size.width;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// if there is an overflow on the left\n\t\t\t\tif (finalResult.coord.left < 0) {\n\t\t\t\t\t\n\t\t\t\t\t// don't care if it overflows the right after that, we made our best\n\t\t\t\t\tfinalResult.coord.left = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t// submit the positioning proposal to the user function which may choose to change\n\t\t\t// the side, size and/or the coordinates\n\t\t\t\n\t\t\t// first, set the rules that corresponds to the proposed side: it may change\n\t\t\t// the size of the tooltip, and the custom functionPosition may want to detect the\n\t\t\t// size of something before making a decision. So let's make things easier for the\n\t\t\t// implementor\n\t\t\tself.__sideChange($clone, finalResult.side);\n\t\t\t\n\t\t\t// add some variables to the helper\n\t\t\thelper.tooltipClone = $clone[0];\n\t\t\thelper.tooltipParent = self.__instance.option('parent').parent[0];\n\t\t\t// move informative values to the helper\n\t\t\thelper.mode = finalResult.mode;\n\t\t\thelper.whole = finalResult.whole;\n\t\t\t// add some variables to the helper for the functionPosition callback (these\n\t\t\t// will also be added to the event fired by self.__instance._trigger but that's\n\t\t\t// ok, we're just being consistent)\n\t\t\thelper.origin = self.__instance._$origin[0];\n\t\t\thelper.tooltip = self.__instance._$tooltip[0];\n\t\t\t\n\t\t\t// leave only the actionable values in there for functionPosition\n\t\t\tdelete finalResult.container;\n\t\t\tdelete finalResult.fits;\n\t\t\tdelete finalResult.mode;\n\t\t\tdelete finalResult.outerSize;\n\t\t\tdelete finalResult.whole;\n\t\t\t\n\t\t\t// keep only the distance on the relevant side, for clarity\n\t\t\tfinalResult.distance = finalResult.distance.horizontal || finalResult.distance.vertical;\n\t\t\t\n\t\t\t// beginners may not be comfortable with the concept of editing the object\n\t\t\t//  passed by reference, so we provide an edit function and pass a clone\n\t\t\tvar finalResultClone = $.extend(true, {}, finalResult);\n\t\t\t\n\t\t\t// emit an event on the instance\n\t\t\tself.__instance._trigger({\n\t\t\t\tedit: function(result) {\n\t\t\t\t\tfinalResult = result;\n\t\t\t\t},\n\t\t\t\tevent: event,\n\t\t\t\thelper: helper,\n\t\t\t\tposition: finalResultClone,\n\t\t\t\ttype: 'position'\n\t\t\t});\n\t\t\t\n\t\t\tif (self.__options.functionPosition) {\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tvar result = self.__options.functionPosition.call(self, self.__instance, helper, finalResultClone);\n\t\t\t\t\n\t\t\t\tif (result) finalResult = result;\n\t\t\t}\n\t\t\t\n\t\t\t// end the positioning tests session (the user might have had a\n\t\t\t// use for it during the position event, now it's over)\n\t\t\truler.destroy();\n\t\t\t\n\t\t\t\n\t\t\t// compute the position of the target relatively to the tooltip root\n\t\t\t// element so we can place the arrow and make the needed adjustments\n\t\t\tvar arrowCoord,\n\t\t\t\tmaxVal;\n\t\t\t\n\t\t\tif (finalResult.side == 'top' || finalResult.side == 'bottom') {\n\t\t\t\t\n\t\t\t\tarrowCoord = {\n\t\t\t\t\tprop: 'left',\n\t\t\t\t\tval: finalResult.target - finalResult.coord.left\n\t\t\t\t};\n\t\t\t\tmaxVal = finalResult.size.width - this.__options.minIntersection;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\n\t\t\t\tarrowCoord = {\n\t\t\t\t\tprop: 'top',\n\t\t\t\t\tval: finalResult.target - finalResult.coord.top\n\t\t\t\t};\n\t\t\t\tmaxVal = finalResult.size.height - this.__options.minIntersection;\n\t\t\t}\n\t\t\t\n\t\t\t// cannot lie beyond the boundaries of the tooltip, minus the\n\t\t\t// arrow margin\n\t\t\tif (arrowCoord.val < this.__options.minIntersection) {\n\t\t\t\tarrowCoord.val = this.__options.minIntersection;\n\t\t\t}\n\t\t\telse if (arrowCoord.val > maxVal) {\n\t\t\t\tarrowCoord.val = maxVal;\n\t\t\t}\n\t\t\t\n\t\t\tvar originParentOffset;\n\t\t\t\n\t\t\t// let's convert the window-relative coordinates into coordinates relative to the\n\t\t\t// future positioned parent that the tooltip will be appended to\n\t\t\tif (helper.geo.origin.fixedLineage) {\n\t\t\t\t\n\t\t\t\t// same as windowOffset when the position is fixed\n\t\t\t\toriginParentOffset = helper.geo.origin.windowOffset;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\n\t\t\t\t// this assumes that the parent of the tooltip is located at\n\t\t\t\t// (0, 0) in the document, typically like when the parent is\n\t\t\t\t// <body>.\n\t\t\t\t// If we ever allow other types of parent, .tooltipster-ruler\n\t\t\t\t// will have to be appended to the parent to inherit css style\n\t\t\t\t// values that affect the display of the text and such.\n\t\t\t\toriginParentOffset = {\n\t\t\t\t\tleft: helper.geo.origin.windowOffset.left + helper.geo.window.scroll.left,\n\t\t\t\t\ttop: helper.geo.origin.windowOffset.top + helper.geo.window.scroll.top\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\tfinalResult.coord = {\n\t\t\t\tleft: originParentOffset.left + (finalResult.coord.left - helper.geo.origin.windowOffset.left),\n\t\t\t\ttop: originParentOffset.top + (finalResult.coord.top - helper.geo.origin.windowOffset.top)\n\t\t\t};\n\t\t\t\n\t\t\t// set position values on the original tooltip element\n\t\t\t\n\t\t\tself.__sideChange(self.__instance._$tooltip, finalResult.side);\n\t\t\t\n\t\t\tif (helper.geo.origin.fixedLineage) {\n\t\t\t\tself.__instance._$tooltip\n\t\t\t\t\t.css('position', 'fixed');\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// CSS default\n\t\t\t\tself.__instance._$tooltip\n\t\t\t\t\t.css('position', '');\n\t\t\t}\n\t\t\t\n\t\t\tself.__instance._$tooltip\n\t\t\t\t.css({\n\t\t\t\t\tleft: finalResult.coord.left,\n\t\t\t\t\ttop: finalResult.coord.top,\n\t\t\t\t\t// we need to set a size even if the tooltip is in its natural size\n\t\t\t\t\t// because when the tooltip is positioned beyond the width of the body\n\t\t\t\t\t// (which is by default the width of the window; it will happen when\n\t\t\t\t\t// you scroll the window horizontally to get to the origin), its text\n\t\t\t\t\t// content will otherwise break lines at each word to keep up with the\n\t\t\t\t\t// body overflow strategy.\n\t\t\t\t\theight: finalResult.size.height,\n\t\t\t\t\twidth: finalResult.size.width\n\t\t\t\t})\n\t\t\t\t.find('.tooltipster-arrow')\n\t\t\t\t\t.css({\n\t\t\t\t\t\t'left': '',\n\t\t\t\t\t\t'top': ''\n\t\t\t\t\t})\n\t\t\t\t\t.css(arrowCoord.prop, arrowCoord.val);\n\t\t\t\n\t\t\t// append the tooltip HTML element to its parent\n\t\t\tself.__instance._$tooltip.appendTo(self.__instance.option('parent'));\n\t\t\t\n\t\t\tself.__instance._trigger({\n\t\t\t\ttype: 'repositioned',\n\t\t\t\tevent: event,\n\t\t\t\tposition: finalResult\n\t\t\t});\n\t\t},\n\t\t\n\t\t/**\n\t\t * Make whatever modifications are needed when the side is changed. This has\n\t\t * been made an independant method for easy inheritance in custom plugins based\n\t\t * on this default plugin.\n\t\t *\n\t\t * @param {object} $obj\n\t\t * @param {string} side\n\t\t * @private\n\t\t */\n\t\t__sideChange: function($obj, side) {\n\t\t\t\n\t\t\t$obj\n\t\t\t\t.removeClass('tooltipster-bottom')\n\t\t\t\t.removeClass('tooltipster-left')\n\t\t\t\t.removeClass('tooltipster-right')\n\t\t\t\t.removeClass('tooltipster-top')\n\t\t\t\t.addClass('tooltipster-'+ side);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Returns the target that the tooltip should aim at for a given side.\n\t\t * The calculated value is a distance from the edge of the window\n\t\t * (left edge for top/bottom sides, top edge for left/right side). The\n\t\t * tooltip will be centered on that position and the arrow will be\n\t\t * positioned there (as much as possible).\n\t\t *\n\t\t * @param {object} helper\n\t\t * @return {integer}\n\t\t * @private\n\t\t */\n\t\t__targetFind: function(helper) {\n\t\t\t\n\t\t\tvar target = {},\n\t\t\t\trects = this.__instance._$origin[0].getClientRects();\n\t\t\t\n\t\t\t// these lines fix a Chrome bug (issue #491)\n\t\t\tif (rects.length > 1) {\n\t\t\t\tvar opacity = this.__instance._$origin.css('opacity');\n\t\t\t\tif(opacity == 1) {\n\t\t\t\t\tthis.__instance._$origin.css('opacity', 0.99);\n\t\t\t\t\trects = this.__instance._$origin[0].getClientRects();\n\t\t\t\t\tthis.__instance._$origin.css('opacity', 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// by default, the target will be the middle of the origin\n\t\t\tif (rects.length < 2) {\n\t\t\t\t\n\t\t\t\ttarget.top = Math.floor(helper.geo.origin.windowOffset.left + (helper.geo.origin.size.width / 2));\n\t\t\t\ttarget.bottom = target.top;\n\t\t\t\t\n\t\t\t\ttarget.left = Math.floor(helper.geo.origin.windowOffset.top + (helper.geo.origin.size.height / 2));\n\t\t\t\ttarget.right = target.left;\n\t\t\t}\n\t\t\t// if multiple client rects exist, the element may be text split\n\t\t\t// up into multiple lines and the middle of the origin may not be\n\t\t\t// best option anymore. We need to choose the best target client rect\n\t\t\telse {\n\t\t\t\t\n\t\t\t\t// top: the first\n\t\t\t\tvar targetRect = rects[0];\n\t\t\t\ttarget.top = Math.floor(targetRect.left + (targetRect.right - targetRect.left) / 2);\n\t\t\n\t\t\t\t// right: the middle line, rounded down in case there is an even\n\t\t\t\t// number of lines (looks more centered => check out the\n\t\t\t\t// demo with 4 split lines)\n\t\t\t\tif (rects.length > 2) {\n\t\t\t\t\ttargetRect = rects[Math.ceil(rects.length / 2) - 1];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttargetRect = rects[0];\n\t\t\t\t}\n\t\t\t\ttarget.right = Math.floor(targetRect.top + (targetRect.bottom - targetRect.top) / 2);\n\t\t\n\t\t\t\t// bottom: the last\n\t\t\t\ttargetRect = rects[rects.length - 1];\n\t\t\t\ttarget.bottom = Math.floor(targetRect.left + (targetRect.right - targetRect.left) / 2);\n\t\t\n\t\t\t\t// left: the middle line, rounded up\n\t\t\t\tif (rects.length > 2) {\n\t\t\t\t\ttargetRect = rects[Math.ceil((rects.length + 1) / 2) - 1];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttargetRect = rects[rects.length - 1];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttarget.left = Math.floor(targetRect.top + (targetRect.bottom - targetRect.top) / 2);\n\t\t\t}\n\t\t\t\n\t\t\treturn target;\n\t\t}\n\t}\n});\n\n/* a build task will add \"return $;\" here */\nreturn $;\n\n}));\n","/* Blob.js\n * A Blob implementation.\n * 2014-07-24\n *\n * By Eli Grey, http://eligrey.com\n * By Devin Samarin, https://github.com/dsamarin\n * License: MIT\n *   See https://github.com/eligrey/Blob.js/blob/master/LICENSE.md\n */\n\n/*global self, unescape */\n/*jslint bitwise: true, regexp: true, confusion: true, es5: true, vars: true, white: true,\n  plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */\n\n(function (view) {\n\t\"use strict\";\n\n\tview.URL = view.URL || view.webkitURL;\n\n\tif (view.Blob && view.URL) {\n\t\ttry {\n\t\t\tnew Blob;\n\t\t\treturn;\n\t\t} catch (e) {}\n\t}\n\n\t// Internally we use a BlobBuilder implementation to base Blob off of\n\t// in order to support older browsers that only have BlobBuilder\n\tvar BlobBuilder = view.BlobBuilder || view.WebKitBlobBuilder || view.MozBlobBuilder || (function(view) {\n\t\tvar\n\t\t\t  get_class = function(object) {\n\t\t\t\treturn Object.prototype.toString.call(object).match(/^\\[object\\s(.*)\\]$/)[1];\n\t\t\t}\n\t\t\t, FakeBlobBuilder = function BlobBuilder() {\n\t\t\t\tthis.data = [];\n\t\t\t}\n\t\t\t, FakeBlob = function Blob(data, type, encoding) {\n\t\t\t\tthis.data = data;\n\t\t\t\tthis.size = data.length;\n\t\t\t\tthis.type = type;\n\t\t\t\tthis.encoding = encoding;\n\t\t\t}\n\t\t\t, FBB_proto = FakeBlobBuilder.prototype\n\t\t\t, FB_proto = FakeBlob.prototype\n\t\t\t, FileReaderSync = view.FileReaderSync\n\t\t\t, FileException = function(type) {\n\t\t\t\tthis.code = this[this.name = type];\n\t\t\t}\n\t\t\t, file_ex_codes = (\n\t\t\t\t  \"NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR \"\n\t\t\t\t+ \"NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR\"\n\t\t\t).split(\" \")\n\t\t\t, file_ex_code = file_ex_codes.length\n\t\t\t, real_URL = view.URL || view.webkitURL || view\n\t\t\t, real_create_object_URL = real_URL.createObjectURL\n\t\t\t, real_revoke_object_URL = real_URL.revokeObjectURL\n\t\t\t, URL = real_URL\n\t\t\t, btoa = view.btoa\n\t\t\t, atob = view.atob\n\n\t\t\t, ArrayBuffer = view.ArrayBuffer\n\t\t\t, Uint8Array = view.Uint8Array\n\n\t\t\t, origin = /^[\\w-]+:\\/*\\[?[\\w\\.:-]+\\]?(?::[0-9]+)?/\n\t\t;\n\t\tFakeBlob.fake = FB_proto.fake = true;\n\t\twhile (file_ex_code--) {\n\t\t\tFileException.prototype[file_ex_codes[file_ex_code]] = file_ex_code + 1;\n\t\t}\n\t\t// Polyfill URL\n\t\tif (!real_URL.createObjectURL) {\n\t\t\tURL = view.URL = function(uri) {\n\t\t\t\tvar\n\t\t\t\t\t  uri_info = document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t\t\t\t, uri_origin\n\t\t\t\t;\n\t\t\t\turi_info.href = uri;\n\t\t\t\tif (!(\"origin\" in uri_info)) {\n\t\t\t\t\tif (uri_info.protocol.toLowerCase() === \"data:\") {\n\t\t\t\t\t\turi_info.origin = null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\turi_origin = uri.match(origin);\n\t\t\t\t\t\turi_info.origin = uri_origin && uri_origin[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn uri_info;\n\t\t\t};\n\t\t}\n\t\tURL.createObjectURL = function(blob) {\n\t\t\tvar\n\t\t\t\t  type = blob.type\n\t\t\t\t, data_URI_header\n\t\t\t;\n\t\t\tif (type === null) {\n\t\t\t\ttype = \"application/octet-stream\";\n\t\t\t}\n\t\t\tif (blob instanceof FakeBlob) {\n\t\t\t\tdata_URI_header = \"data:\" + type;\n\t\t\t\tif (blob.encoding === \"base64\") {\n\t\t\t\t\treturn data_URI_header + \";base64,\" + blob.data;\n\t\t\t\t} else if (blob.encoding === \"URI\") {\n\t\t\t\t\treturn data_URI_header + \",\" + decodeURIComponent(blob.data);\n\t\t\t\t} if (btoa) {\n\t\t\t\t\treturn data_URI_header + \";base64,\" + btoa(blob.data);\n\t\t\t\t} else {\n\t\t\t\t\treturn data_URI_header + \",\" + encodeURIComponent(blob.data);\n\t\t\t\t}\n\t\t\t} else if (real_create_object_URL) {\n\t\t\t\treturn real_create_object_URL.call(real_URL, blob);\n\t\t\t}\n\t\t};\n\t\tURL.revokeObjectURL = function(object_URL) {\n\t\t\tif (object_URL.substring(0, 5) !== \"data:\" && real_revoke_object_URL) {\n\t\t\t\treal_revoke_object_URL.call(real_URL, object_URL);\n\t\t\t}\n\t\t};\n\t\tFBB_proto.append = function(data/*, endings*/) {\n\t\t\tvar bb = this.data;\n\t\t\t// decode data to a binary string\n\t\t\tif (Uint8Array && (data instanceof ArrayBuffer || data instanceof Uint8Array)) {\n\t\t\t\tvar\n\t\t\t\t\t  str = \"\"\n\t\t\t\t\t, buf = new Uint8Array(data)\n\t\t\t\t\t, i = 0\n\t\t\t\t\t, buf_len = buf.length\n\t\t\t\t;\n\t\t\t\tfor (; i < buf_len; i++) {\n\t\t\t\t\tstr += String.fromCharCode(buf[i]);\n\t\t\t\t}\n\t\t\t\tbb.push(str);\n\t\t\t} else if (get_class(data) === \"Blob\" || get_class(data) === \"File\") {\n\t\t\t\tif (FileReaderSync) {\n\t\t\t\t\tvar fr = new FileReaderSync;\n\t\t\t\t\tbb.push(fr.readAsBinaryString(data));\n\t\t\t\t} else {\n\t\t\t\t\t// async FileReader won't work as BlobBuilder is sync\n\t\t\t\t\tthrow new FileException(\"NOT_READABLE_ERR\");\n\t\t\t\t}\n\t\t\t} else if (data instanceof FakeBlob) {\n\t\t\t\tif (data.encoding === \"base64\" && atob) {\n\t\t\t\t\tbb.push(atob(data.data));\n\t\t\t\t} else if (data.encoding === \"URI\") {\n\t\t\t\t\tbb.push(decodeURIComponent(data.data));\n\t\t\t\t} else if (data.encoding === \"raw\") {\n\t\t\t\t\tbb.push(data.data);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (typeof data !== \"string\") {\n\t\t\t\t\tdata += \"\"; // convert unsupported types to strings\n\t\t\t\t}\n\t\t\t\t// decode UTF-16 to binary string\n\t\t\t\tbb.push(unescape(encodeURIComponent(data)));\n\t\t\t}\n\t\t};\n\t\tFBB_proto.getBlob = function(type) {\n\t\t\tif (!arguments.length) {\n\t\t\t\ttype = null;\n\t\t\t}\n\t\t\treturn new FakeBlob(this.data.join(\"\"), type, \"raw\");\n\t\t};\n\t\tFBB_proto.toString = function() {\n\t\t\treturn \"[object BlobBuilder]\";\n\t\t};\n\t\tFB_proto.slice = function(start, end, type) {\n\t\t\tvar args = arguments.length;\n\t\t\tif (args < 3) {\n\t\t\t\ttype = null;\n\t\t\t}\n\t\t\treturn new FakeBlob(\n\t\t\t\t  this.data.slice(start, args > 1 ? end : this.data.length)\n\t\t\t\t, type\n\t\t\t\t, this.encoding\n\t\t\t);\n\t\t};\n\t\tFB_proto.toString = function() {\n\t\t\treturn \"[object Blob]\";\n\t\t};\n\t\tFB_proto.close = function() {\n\t\t\tthis.size = 0;\n\t\t\tdelete this.data;\n\t\t};\n\t\treturn FakeBlobBuilder;\n\t}(view));\n\n\tview.Blob = function(blobParts, options) {\n\t\tvar type = options ? (options.type || \"\") : \"\";\n\t\tvar builder = new BlobBuilder();\n\t\tif (blobParts) {\n\t\t\tfor (var i = 0, len = blobParts.length; i < len; i++) {\n\t\t\t\tif (Uint8Array && blobParts[i] instanceof Uint8Array) {\n\t\t\t\t\tbuilder.append(blobParts[i].buffer);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tbuilder.append(blobParts[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar blob = builder.getBlob(type);\n\t\tif (!blob.slice && blob.webkitSlice) {\n\t\t\tblob.slice = blob.webkitSlice;\n\t\t}\n\t\treturn blob;\n\t};\n\n\tvar getPrototypeOf = Object.getPrototypeOf || function(object) {\n\t\treturn object.__proto__;\n\t};\n\tview.Blob.prototype = getPrototypeOf(new view.Blob());\n}(typeof self !== \"undefined\" && self || typeof window !== \"undefined\" && window || this.content || this));","/**\n *\n *\tFile:\tjurlp.js\n *\n *\tTitle:\tJQuery URL parser.\n *\n * \tJQuery URL parser plugin for parsing, manipulating, filtering and monitoring URLs in href and src attributes within arbitrary elements (including document.location.href), as well as creating anchor elements from URLs found in HTML/text.\n *\n *\tAbout: Authors\n *\n *\tThomas James Bonner (tom.bonner@gmail.com).\n *\n *\tYonas Sandbk (seltar@gmail.com).\n *\n *\tAbout: Version\n *\n *\t1.0.4\n *\n *\tAbout: License\n *\n *\tCopyright (C) 2012, Thomas James Bonner (tom.bonner@gmail.com).\n *\n *\tMIT License:\n *\tPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n *\n *\t- The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n *\n *\t- THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *\n **/ \n\n/**\n *\n *\tSection: URL overview.\n *\n *\tURL naming scheme:\n *\n *\tA quick quide to URL nomenclature in this plugin.\n *\n *\tThroughout this plugin, URLs are segmented and refered to in the following manner;\n *\n *\t> http://username:password@www.example.com:443/path/file.name?query=string#anchor\n *\t> |_____||______| |______| |_____________| |_||_____________||___________||_____|\n *\t>    |       |       |           |          |         |             |         |\n *\t> scheme   user   password      host       port      path         query   fragment\n *\t> |______________________________________________________________________________|\n *\t>                                        |\n *  >                                       url\n *\n *\tScheme:\n *\n *\tContains the protocol identifier (i.e. \"https://\", \"ftp://\").\n *\n *\tUser:\n *\n *\tConains the username to use when connecting to the host server. This segment may be empty.\n *\n *\tPassword:\n *\n *\tContains the password to use in conjunction with the username when connecting to the remote server. This segment may be empty (and cannot be set without a user name).\n *\n *\tHost:\n *\n *\tContains the name or IP address of the host server (i.e. \"www.example.com\", or \"127.0.0.1\").\n *\n *\tPort:\n *\n *\tContains the listening port number for the host server (i.e. \"80\", or \"8080\"). Note that an empty port value implies the default port (80).\n *\n *\tPath:\n *\n *\tContains the file path (i.e. \"/index.html\", or \"/\").\n *\n *\tQuery:\n *\n *\tContains any parameters passed in the query (i.e. \"?param1=value1&param2=value2\"). This segment may be empty.\n *\n *\tFragment:\n *\n *\tContains any anchors/hash tags (i.e. \"#elementname\"). This segment may be empty.\n *\n *\tSection: URL Objects\n *\n *\tURL object definition.\n *\n *\tFor the purposes of this plugin, URLs can be represented either as a string, for example \"http://www.example.com:8080/path/file.name?query=string#anchor\", or as an object;\n *\n *\t(start code)\n *\n *\t{\n *\t\tscheme: \"http://\"\n *\t\tuser: \"username\",\n *\t\tpassword: \"password\",\n *\t\thost: \"www.example.com\",\n *\t\tport: \"8080\",\n *\t\tpath: \"/path/file.name\",\n *\t\tquery: \"?query=string\",\n *\t\tfragment: \"#anchor\" \n *\t}\n *\n *\t(end code)\n *\n *\tTherefore, wherever URLs are supplied as a parameter to the plugin via the <url> or <proxy> methods, either a string or object representation or the URL may be supplied.\n *\n *\tURL objects that have been returned via the parser interface can easily be converted to a string by calling the objects toString() method. \n *\n *\tExample:\n *\n *\t(start code)\n *\n *\t// Parse the document.location.href URL, and convert it back to a string again.\n *\t$(document).jurlp(\"url\").toString();\n *\n *\t(end code)\n *\n */\n \n/**\n *\n *\tSection: Quick overview\n *\n *\tUseful example code.\n *\n *\t(start code)\n *\n *\t// Parse and set the element(s) URL\n *\t$(\"a\").jurlp(\"url\");\n *\t$(\"a\").jurlp(\"url\", \"http://www.example.com/\");\n *\t\n *\t// Get or set individual URL segments for the element(s)\n *\t$(\"a\").jurlp(\"scheme\");\n *\t$(\"a\").jurlp(\"scheme\", \"https://\");\n *\n *\t$(\"a\").jurlp(\"user\");\n *\t$(\"a\").jurlp(\"user\", \"username\");\n *\n *\t$(\"a\").jurlp(\"password\");\n *\t$(\"a\").jurlp(\"password\", \"password\");\n *\n *\t$(\"a\").jurlp(\"host\");\n *\t$(\"a\").jurlp(\"host\", \"www.example.com\");\n *\t\n *\t$(\"a\").jurlp(\"port\");\n *\t$(\"a\").jurlp(\"port\", \"8080\");\n *\t\n *\t$(\"a\").jurlp(\"path\");\n *\t$(\"a\").jurlp(\"path\", \"../file.name\");\n *\t\n *\t$(\"a\").jurlp(\"query\");\n *\t$(\"a\").jurlp(\"query\", {\"param\":\"value\"});\n *\t\n *\t$(\"a\").jurlp(\"fragment\");\n *\t$(\"a\").jurlp(\"fragment\", \"elementid\");\n *\t\n *\t// Filter on URL segments\n *\t$(\"a\").jurlp(\"filter\", \"scheme\", \"^=\", \"http\")\n *\t      .jurlp(\"filter\", \"user\", \"=\", \"user\")\n *\t      .jurlp(\"filter\", \"password\", \"=\", \"password\")\n *\t      .jurlp(\"filter\", \"host\", \"=\", \"www.example.com\")\n *\t      .jurlp(\"filter\", \"port\", \"!=\", \"8080\")\n *\t      .jurlp(\"filter\", \"path\", \"$=\", \".html\")\n *\t      .jurlp(\"filter\", \"query\", \"*=\", \"param=value\")\n *\t      .jurlp(\"filter\", \"fragment\", \"regex\", /(\\#)/);\n *\t\n *\t// Watch a selector for new nodes\n *\t$(\"a:eq(0)\").jurlp(\"watch\", function(element, selector){})\n *\t            .jurlp(\"filter\", \"host\", \"=\", \"www.example.com\")\n *\t            .jurlp(\"query\",{\"found\":\"example\"});\n *\t\n *\t$(\"body\").prepend(\"<a href='http://www.example.com/'></a>\");\n *\t\n *\t$(\"a:eq(0)\").jurlp(\"unwatch\");\n *\t\n *\t// Parse an element's text for URLs and create/return anchor elements\n *\t$(\"<div>www.example.com</div>\").jurlp();\n *\n *\t// Get an interface for parsing/manipulating the supplied URL\n *\turl = $.jurlp(\"http://www.example.com:80/path/file.name?param1=value1#fragment\");\n *\n *\t// Parse the URL to an object.\n *\turl.url();\n *\n *\t// Get the URL scheme.\n *\turl.scheme();\n *\n *\t// Get the URL user name.\n *\turl.user();\n *\n *\t// Get the URL password.\n *\turl.password();\n *\n *\t// Get the URL host.\n *\turl.host();\n *\n *\t// Get the URL port.\n *\turl.port();\n *\n *\t// Get the URL path.\n *\turl.path();\n *\n *\t// Get the URL query.\n *\turl.query();\n *\n *\t// Get a specific parameter value from the URL query.\n *\turl.query().param1;\n *\n *\t// Get the URL fragment.\n *\turl.fragment();\n *\n *\t// Set the full URL.\n *\turl.url(\"http://www.example.com:80/path/file.name?param1=value1#fragment\");\n *\n *\t// Set the URL scheme.\n *\turl.scheme(\"https://\");\n *\n *\t// Set the URL user name.\n *\turl.user(\"user\");\n *\n *\t// Set the URL password.\n *\turl.password(\"password\");\n *\n *\t// Set the URL host.\n *\turl.host(\"www.newexample.com\");\n *\n *\t// Set the URL port.\n *\turl.port(\"80\");\n *\n *\t// Set the URL path.\n *\turl.path(\"/newpath/newfile.file\");\n *\n *\t// Append to the URL path.\n *\turl.path(\"./newfile.file\");\n *\n *\t// Remove two path elements and append to the URL path.\n *\turl.path(\"../../newfile.file\");\n *\n *\t// Set the URL query.\n *\turl.query(\"?param=value\");\n *\n *\t// Append/modify the URL query (string or object)\n *\turl.query(\"param=value\");\n *\turl.query({\"param\":\"value\"});\n *\n *\t// Remove the URL query\n *\turl.query(\"\");\n *\turl.query({});\n *\n *\t// Set the URL fragment.\n *\turl.fragment(\"#newfragment\");\n *\n *\t(end code)\n *\n **/\n\n/**\n *\tSection: Parsing document.location.href\n *\n *\tParsing the document URL.\n *\n *\tThe document URL (document.location.href) can be parsed by specifying the HTML document element to the parser in the following manner;\n *\n *\t(start code)\n *\n *\t// Parse the document.location.href URL string into a URL object\n *\t$(document).jurlp(\"url\");\n *\n *\t(end code)\n *\n *\tSimilarly, the document URL can be modified by the plugin, but it is worth noting that changes will not be directly applied to document.location.href until <goto> is explicitly called on the element, and instead, a working copy of the URL is stored under the documents \"data-href\" attribute.\n *\n *\t(start code)\n *\n *\t// Does not modify document.location.href (updates $(document).data(\"href\"))\n *\t$(document).jurlp(\"url\", \"www.example.com\");\n *\n *\t// Does modify document.location.href (from $(document).data(\"href\"))\n *\t$(document).jurlp(\"goto\");\n *\n *\t(end code)\n *\n */\n \n/**\n *\tSection: Parsing elements with an \"href\" or \"src\" attribute.\n *\n *\tParsing \"href\" or \"src\" attributes.\n *\n *\tElements with an \"href\" or \"src\" attribute (i.e. <a href=\"\">, <base href=\"\">, <link href=\"\">, <img src=\"\">, <script src=\"\"> or <iframe src=\"\">), can be parsed by specifying the element(s) to the parser in the following manner;\n *\n *\t(start code)\n *\n *\t// Parse all anchor element URLs into an array\n *\t$(\"a\").jurlp(\"url\");\n *\n *\t(end code)\n *\n *\tAny modifications made to the URL will modify the relevant \"href\" or \"src\" attribute directly. If you want to visit the URL within an elements \"href\" or \"src\" attribute, it is possible to call <goto> on the element.\n *\n *\t(start code)\n *\n *\t// Directly set the first anchor elements URL, and then goto it!\n *\t$(\"a:eq(0)\").jurlp(\"url\", \"www.example.com\").jurlp(\"goto\");\n *\n *\t(end code)\n *\n */\n\n/**\n *\tSection: Parsing element text/HTML.\n *\n *\tParsing text/HTML for URLs.\n *\n *\tIt is possible for the URL parser to find URLs within text/HTML, and convert them into HTML anchor elements.\n *\n *\t(start code)\n *\n *\t// Parse the HTML for URLs, and convert all URLs found in the text to anchors.\n *\t$(\"<div>Here are URLs: www.example1.com, www.example2.com</div>\").jurlp();\n *\n *\t// HTML becomes:\n *\t<div>\n *\t\tHere are URLs: \n *\t\t<a href=\"http://www.example1.com/\" class=\"jurlp-no-watch\">www.example1.com</a>, \n *\t\t<a href=\"http://www.example2.com/\" class=\"jurlp-no-watch\">www.example2.com</a>\n *\t</div>\n *\t(end code)\n *\n **/\n \n/**\n *\tSection: Parsing URL strings directly.\n *\n *\tHow to directly parse, modify or monitor an arbitrary URL string.\n *\n *\t(start code)\n *\n *\t// Get an interface for parsing the document URL...\n *\tvar url = $.jurlp();\n *\n *\t// .. or get an interface for parsing your own URL.\n *\turl = $.jurlp(\"www.example.com\");\n *\n *\t// Parse the URL to an object.\n *\turl.url();\n *\n *\t// Get the URL scheme.\n *\turl.scheme();\n *\n *\t// Get the URL host.\n *\turl.host();\n *\n *\t// Get the URL port.\n *\turl.port();\n *\n *\t// Get the URL path.\n *\turl.path();\n *\n *\t// Get the URL query.\n *\turl.query();\n *\n *\t// Get a specific parameter value from the URL query.\n *\turl.query().parameter;\n *\n *\t// Get the URL fragment.\n *\turl.fragment();\n *\n *\t// Create a watch for new URLs that contain \"example.com\" in the host name\n *\tvar watch = $.jurlp(\"example.com\").watch(function(element, selector){\n *\t\tconsole.log(\"Found example.com URL!\", element, selector);\n *\t});\n *\n *\t// We can even apply filters to the watch to be sure!\n *\twatch.jurlp(\"filter\", \"host\", \"*=\", \"example.com\");\n *\n *\t// Append a new URL, which will trigger the watch\n *\t$(\"body\").append(\"<a href=\\\"www.example.com\\\"></a>\");\n *\n *\t// Stop watching for \"example.com\" URLs.\n *\twatch.jurlp(\"unwatch\");\n *\n *\t(end code)\n *\n */\n \n/**\n *\tSection: Unknown URLs.\n *\n *\tOverview of unknown URL parsing.\n *\n *\tUnknown scheme:\n *\n *\tThe parser will attempt to parse any type of URL it encounters based on its scheme. However, not all URLs are parsable, for example \"spotify:track:<trackid>\". In this case, the following URL object is returned;\n *\n *\t(start code)\n *\n *\t{\n *\t\tscheme: \"spotify:\",\n *\t\turl: \"track:<trackid>\"\n *\t}\n *\n *\t(end code)\n *\n *\tThe unknown URL object will always contain the scheme (if present), for filtering purposes, and also contains a toString() method, which will convert the URL object back to the original URL string.\n *\n *\tmailto:\n *\n *\t\"mailto:\" URLs are parsable in the same manner as a regular HTTP URL. For example, the following URL object is returned for a URL with a \"mailto:\" scheme;\n *\n *\t(start code)\n *\n *\t{\n *\t\tscheme: \"mailto:\"\n *\t\tuser: \"username\",\n *\t\tpassword: \"\",\n *\t\thost: \"www.example.com\",\n *\t\tport: \"\",\n *\t\tpath: \"\",\n *\t\tquery: \"?subject=subject&body=body\",\n *\t\tfragment: \"\" \n *\t}\n *\n *\t(end code)\n *\n *\tTherefore, \"mailto:\" URLs can be fully parsed using this parser, but note that it is not possible to set the password, port or fragment strings on a \"mailto:\" URL.\n *\n *\tjavascript:\n *\n *\t\"javascript\" URLs are parsable in the same manner as a regular HTTP URL. For example, the following URL object is returned for a URL with a \"javasrcipt:\" scheme;\n *\n *\t(start code)\n *\n *\t{\n *\t\tscheme: \"javascript:\"\n *\t\tuser: \"\",\n *\t\tpassword: \"\",\n *\t\thost: \"www.example.com\",\n *\t\tport: \"\",\n *\t\tpath: \"/\",\n *\t\tquery: \"\",\n *\t\tfragment: \"\",\n *\t\tjavascript: \"alert('!');\"\n *\t}\n *\n *\t(end code)\n *\n *\tTherefore, \"javascript:\" URLs can be fully parsed using this parser, but note that the current \"document.location.href\" will always be parsed/returned as the main URL object.\n *\n **/\n \n/**\n *\tSection: Operators.\n *\n *\tOverview of filter operators.\n *\n *\tThe following filter operators may be specified as the \"operator\" parameter to the <filter> method.\n *\n *\tURL filter operators:\n *\n *\t\"=\" - Equal to.\n *\t\"!=\" - Not equal to.\n *\t\"*=\" - Contains.\n *\t\"<\" - Less than. \n *\t\"<=\" - Less than or equal to.\n *\t\">\" - Greater than.\n *\t\">=\" - Greater than or equal to.\n *\t\"^=\" - Starts with.\n *\t\"$=\" - Ends with.\n *\t\"regex\" - Regular expression.\n *\n **/\n\n /**\n *\tSection: this parameter.\n *\n *\tWhere \"this\" is refered to as an argument to the method functions, it may be one of the following;\n *\n *\t- HTML document element.\n *\t- An array of 1 or more elements with a \"href\" or \"src\" attribute.\n *\t- A URL parser interface returned from $.jurlp().\n *\n **/\n\n(\n\tfunction ( $ )\n\t{\n\t\t/**\n\t\t *\n\t\t *\tRegular expression for parsing URLs.\n\t\t *\n\t\t *\tTaken from parseUri 1.2 (http://blog.stevenlevithan.com/archives/parseuri).\n\t\t *\n\t\t **/ \n\n\t\tvar urlRegEx = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\n\t\t/*\n\n\t\t\tGlobal object of watched selectors and their array of callstacks.\n\n\t\t*/ \n\n\t\tvar selectorCallStack = { };\n\n\t\t/*\n\n\t\t\tCurrently watched selector. ToDo: Remove this and use a better mechanism for selector tracking.\n\n\t\t*/\n\n\t\tvar currentSelector = \"\";\n\n\t\t/**\n\t\t *\n\t\t *\tSection: Internal functions.\n\t\t *\n\t\t *\tAll internal private functions.\n\t\t *\n\t\t *\tThis section contains all internal functions that perform the grunt work for the parser interface.\n\t\t *\n\t\t **/ \n\n\t\t/**\n\t\t *\n\t\t *\tFunction: initialiseElement\n\t\t *\n\t\t *\tInitialise an element for use with the URL parser.\n\t\t *\n\t\t *\tParameters: \n\t\t * \n\t\t *\tthis - The element to initialise. See <this parameter>.\n\t\t *\n\t\t **/ \n\n\t\tvar initialiseElement = function ( )\n\t\t{\n\t\t\t/* Attempt to retreive a href from the element */ \n\n\t\t\tvar href = getHref.apply ( this );\n\n\t\t\t/* Was a href found for the element? */ \n\n\t\t\tif ( href == \"\" )\n\t\t\t{\n\t\t\t\t/* Is the current element the document? */\n\n\t\t\t\tif ( this.get ( 0 ) == $( document ).get ( 0 ) )\n\t\t\t\t{\n\t\t\t\t\t/* Use the document href */ \n\n\t\t\t\t\thref = document.location.href;\n\t\t\t\t}\n\t\t\t\telse if ( this.is ( \"[href]\" ) )\n\t\t\t\t{\n\t\t\t\t\t/* Use the element href attribute */ \n\n\t\t\t\t\thref = this.attr ( \"href\" );\n\t\t\t\t}\n\t\t\t\telse if ( this.is ( \"[src]\" ) )\n\t\t\t\t{\n\t\t\t\t\t/* Use the element src attribute */ \n\n\t\t\t\t\thref = this.attr ( \"src\" );\n\t\t\t\t}\n\n\t\t\t\t/* Check the href is not empty so we don't initialise the \"data-href\" attribute on text elements (although maybe this is not wanted, as an empty href is technically the current page?). */ \n\n\t\t\t\tif ( href != \"\" )\n\t\t\t\t{\n\t\t\t\t\t/* Sanitise the URL */ \n\n\t\t\t\t\thref = sanitiseUrl ( href );\n\n\t\t\t\t\t/* Store the URL as a data attribute within the element */ \n\n\t\t\t\t\tthis.data ( \"href\", href );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: initialiseElementText\n\t\t *\n\t\t *\tInitialise an elements text field for use with the URL parser.\n\t\t *\n\t\t *\tParameters: \n\t\t * \n\t\t *\tthis - The element to initialise.\n\t\t *\n\t\t **/ \n\n\t\tvar initialiseElementText = function ( )\n\t\t{\n\t\t\t/* Is the current element not the document, and also does not contain a \"href\" attribute */ \n\n\t\t\tif ( this.get ( 0 ) != $( document ).get ( 0 ) && this.attr ( \"href\" ) == null && this.attr ( \"src\" ) == null )\n\t\t\t{\n\t\t\t\t/* Does the element contain anything? */ \n\n\t\t\t\tif ( this.html ( ) != null && this.hasClass ( \"jurlp-span\" ) == false )\n\t\t\t\t{\n\t\t\t\t\tvar urls = [ ];\n\t\t\t\t\tvar modifiedHtml = false;\n\t\t\t\t\tvar match = \"\";\n\n\t\t\t\t\t/* Regular expression for finding URLs in free text */ \n\n\t\t\t\t\tvar findUrlRegExp = /((((mailto|spotify|skype)\\:([a-zA-Z0-9\\.\\-\\:@\\?\\=\\%]*))|((ftp|git|irc|ircs|irc6|pop|rss|ssh|svn|udp|feed|imap|ldap|nntp|rtmp|sftp|snmp|xmpp|http|https|telnet|ventrilo|webcal|view\\-source)\\:[\\/]{2})?(([a-zA-Z0-9\\.\\-]+)\\:([a-zA-Z0-9\\.&;%\\$\\-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|localhost|([a-zA-Z0-9\\-]+\\.)*[a-zA-Z0-9\\-]+\\.(aero|arpa|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|[a-zA-Z]{2}))(\\:[0-9]+)*(\\/($|[a-zA-Z0-9\\.\\,\\?\\'\\\\\\+&;%\\$\\=~_\\-]+)?(#\\w*)?)*))/i;\n\n\t\t\t\t\t/* Store the elements HTML */ \n\n\t\t\t\t\tvar html = this.html ( );\n\n\t\t\t\t\t/* Attempt to locate URLs within the HTML */ \n\n\t\t\t\t\twhile ( match = findUrlRegExp.exec ( html ) )\n\t\t\t\t\t{\n\t\t\t\t\t\t/* Replace the URL with a unique ID */ \n\n\t\t\t\t\t\thtml = html.replace ( match [ 0 ], \"$\" + urls.length );\n\n\t\t\t\t\t\t/* Store the discovered URL */ \n\n\t\t\t\t\t\turls.push ( match [ 0 ] );\n\n\t\t\t\t\t\t/* Indicate that the HTML was modified */ \n\n\t\t\t\t\t\tmodifiedHtml = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Iterate through all discovered URLs */ \n\n\t\t\t\t\tfor ( var i = 0; i < urls.length; i++ )\n\t\t\t\t\t{\n\t\t\t\t\t\t/* Get the postion of the current URL ID */ \n\n\t\t\t\t\t\tvar pos = html.indexOf ( \"$\" + i );\n\n\t\t\t\t\t\t/* Get the possible attribute name */ \n\n\t\t\t\t\t\tvar attr = html.substring ( pos - 6, pos - 1 );\n\n\t\t\t\t\t\t/* Does the URL reside within an attribute (i.e. an existing tag) */ \n\n\t\t\t\t\t\tif ( attr == \"href=\" || attr == \" src=\" || html.substring ( pos - 1, pos ) == \">\" )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t/* Replace the ID with the original URL (do not convert this URL to an anchor as it most likely is part of one) */ \n\n\t\t\t\t\t\t\thtml = html.replace ( \"$\" + i, urls [ i ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t/* Replace the unique ID with an anchor tag */ \n\n\t\t\t\t\t\t\thtml = html.replace ( \"$\" + i, \"<a href=\\\"[url]\\\" class=\\\"jurlp-no-watch\\\">[url]</a>\".replace ( /\\[url\\]/g, urls [ i ] ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Did we change the HTML at all? */ \n\n\t\t\t\t\tif ( modifiedHtml != false )\n\t\t\t\t\t{\n\t\t\t\t\t\t/* Add a class on the parent element to indicate that we have modified it */ \n\n\t\t\t\t\t\tthis.addClass ( \"jurlp-span\" );\n\n\t\t\t\t\t\t/* Update the elements HTML */ \n\n\t\t\t\t\t\tthis.html ( html );\n\n\t\t\t\t\t\t/* Find and return all newly created anchor tags */ \n\n\t\t\t\t\t\treturn this.find ( \"a[href]\" ).each\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tfunction ( )\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t/* Get the href attribute for the element */ \n\n\t\t\t\t\t\t\t\tvar href = getHref.apply ( $( this ) );\n\n\t\t\t\t\t\t\t\t/* Sanitise the URL and reset the elements href */ \n\n\t\t\t\t\t\t\t\tsetHref.apply ( $( this ), [ href ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* No URLs found */ \n\n\t\t\treturn null;\n\t\t}\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: setAttrUrl\n\t\t *\n\t\t *\tGiven an element, and an attribute, set the attribute to the supplied URL, and created a backup of the original URL if not already done.\n\t\t *\n\t\t *\tNote, if the attribute doesn't exist, then it will not be created.\n\t\t *\n\t\t *\tParameters: \n\t\t * \n\t\t *\tthis - The element to set the attribute URL on.\n\t\t *\n\t\t *\tattr - The name of the attribute to set.\n\t\t *\n\t\t *\turl - The value of the attributes URL.\n\t\t *\n\t\t **/ \n\n\t\tvar setAttrUrl = function ( attr, url )\n\t\t{\n\t\t\t/* Is the attribute present on this element? */ \n\n\t\t\tif ( this.is ( \"[\" + attr + \"]\" ) != false )\n\t\t\t{\n\t\t\t\t/* Has a copy of the original attribute been stored? */ \n\n\t\t\t\tif ( this.data ( \"original-\" + attr ) == null )\n\t\t\t\t{\n\t\t\t\t\t/* Store a copy of the original attribute */ \n\n\t\t\t\t\tthis.data ( \"original-\" + attr, this.attr ( attr ) );\n\t\t\t\t}\n\n\t\t\t\t/* Update the elements attribute */ \n\n\t\t\t\tthis.attr ( attr, url );\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: restoreAttrUrl\n\t\t *\n\t\t *\tGiven an element, and an attribute, then restore the URL attribute value to its original value.\n\t\t *\n\t\t *\tParameters: \n\t\t * \n\t\t *\tthis - The element to restore the attribute URL on.\n\t\t *\n\t\t *\tattr - The name of the attribute to restore.\n\t\t *\n\t\t **/ \n\n\t\tvar restoreAttrUrl = function ( attr )\n\t\t{\n\t\t\t/* Was a backup of the original attribute URL made? */ \n\n\t\t\tif ( this.data ( \"original-\" + attr ) != null )\n\t\t\t{\n\t\t\t\t/* Restore the attribute URL */ \n\n\t\t\t\tthis.attr ( attr, this.data ( \"original-\" + attr ) );\n\n\t\t\t\t/* Remove the original URL */ \n\n\t\t\t\tthis.removeData ( \"original-\" + attr );\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: restoreElement\n\t\t *\n\t\t *\tDestroys any data associated with an element that has previously been initialised for use with the URL parser, and restores the elements \"href\" or \"src\" attribute (if any) to its original value.\n\t\t *\n\t\t *\tParameters: \n\t\t * \n\t\t *\tthis - The element to destroy.\n\t\t *\n\t\t **/ \n\n\t\tvar restoreElement = function ( )\n\t\t{\n\t\t\t/* Remove the working href URL */ \n\n\t\t\tthis.removeData ( \"href\" );\n\n\t\t\t/* Restore the href attribute */ \n\n\t\t\trestoreAttrUrl.apply ( this, [ \"href\" ] );\n\n\t\t\t/* Restore the src attribute */ \n\n\t\t\trestoreAttrUrl.apply ( this, [ \"src\" ] );\n\n\t\t\t/* Remove any watch attributes */ \n\n\t\t\tthis.removeData ( \"jurlp-no-watch\" );\n\t\t\tthis.removeData ( \"is-watched\" );\n\n\t\t\t/* clean up selector callstack and unbind */ \n\n\t\t\tmethods.unwatch.apply ( this );\n\t\t}\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: getHref\n\t\t *\n\t\t *\tGet the href URL for the element. Prioritises internal objects href, over \"data-href\", over \"href\", over \"src\" attributes.\n\t\t *\n\t\t *\tParameters: \n\t\t * \n\t\t *\tthis - The element to retieve the URL value from.\n\t\t *\n\t\t **/ \n\n\t\tvar getHref = function ( )\n\t\t{\n\t\t\treturn this.href || this.data ( \"href\" ) || this.attr ( \"href\" ) || this.attr ( \"src\" ) || \"\";\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: updateHref\n\t\t *\n\t\t *\tUpdate a segment of the elements href URL.\n\t\t *\n\t\t *\tParameters: \n\t\t * \n\t\t *\tthis - The element to update the URL value on.\n\t\t *\n\t\t *\tsegment - The segment to update (\"scheme\", \"host\", \"port\", \"path\", \"query\" or \"fragment\").\n\t\t *\n\t\t *\tvalue - The new value for the segment.\n\t\t *\n\t\t **/ \n\n\t\tvar updateHref = function ( segment, value )\n\t\t{\n\t\t\tsetHref.apply ( this, [ setUrlSegment ( getHref.apply ( this ), segment, value ) ] );\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: updateHrefShim\n\t\t *\n\t\t *\tShim function for reorganising parameters before calling updateHref(). Called via the each callback.\n\t\t *\n\t\t *\tParameters: \n\t\t * \n\t\t *\tthis - The element to update the URL value on.\n\t\t *\n\t\t *\tparameters - Array containing segment and value parameters for updateHref().\n\t\t *\n\t\t **/ \n\n\t\tvar updateHrefShim = function ( parameters )\n\t\t{\n\t\t\tupdateHref.apply ( this, [ parameters [ 0 ], parameters [ 1 ] ] );\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: setHref\n\t\t *\n\t\t *\tSets the href URL value for an element.\n\t\t *\n\t\t *\tParameters: \n\t\t * \n\t\t *\tthis - The element to set the URL value on.\n\t\t *\n\t\t *\turl - The new url (string) value.\n\t\t *\n\t\t **/ \n\n\t\tvar setHref = function ( url )\n\t\t{\n\t\t\t/* Ensure the supplied URL is a string */ \n\n\t\t\tif ( typeof url == \"object\" )\n\t\t\t{\n\t\t\t\turl = objectToUrl ( url );\n\t\t\t}\n\n\t\t\t/* Sanitise the URL - slow and horrible :( */ \n\n\t\t\turl = sanitiseUrl ( url );\n\n\t\t\tif ( this.href != null )\n\t\t\t{\n\t\t\t\tthis.href = url;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/* Is the current element the document? */ \n\n\t\t\tif ( this.get ( 0 ) == $( document ).get ( 0 ) )\n\t\t\t{\n\t\t\t\t/* Current element is the document. Save the href under a data attribute. */\n\n\t\t\t\tthis.data ( \"href\", url );\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t/* Update href URL (if present) */ \n\n\t\t\t\tsetAttrUrl.apply ( this, [ \"href\", url ] );\n\n\t\t\t\t/* Update src URL (if present) */ \n\n\t\t\t\tsetAttrUrl.apply ( this, [ \"src\", url ] );\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: urlToObject\n\t\t *\n\t\t *\tParse a URL into segments using the DOM. Parses authority information from the URL using parseUri (http://blog.stevenlevithan.com/archives/parseuri).\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\turl - URL String to parse.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tURL object.\n\t\t *\n\t\t **/ \n\n\t\tvar urlToObject = function ( url )\n\t\t{\n\t\t\t/* Was a null URL supplied? */ \n\n\t\t\tif ( url == null )\n\t\t\t{\n\t\t\t\t/* Return an empty object */ \n\n\t\t\t\treturn { scheme : \"\", user : \"\", password : \"\", host : \"\", port : \"\", path : \"\", query : \"\", fragment : \"\" };\n\t\t\t}\n\n\t\t\tvar credentials = { user : \"\", password : \"\" };\n\n\t\t\tif ( url.substring ( 0, 2 ) == \"//\" )\n\t\t\t{\n\t\t\t\turl = \"http:\" + url;\n\t\t\t}\n\n\t\t\t/* If a URL is supplied, ensure a protocol is specified, otherwise the parser will assume that the supplied host is the path */ \n\n\t\t\tif ( url != \"\" && url.indexOf ( \"://\" ) == -1 )\n\t\t\t{\n\t\t\t\turl = \"http://\" + url;\n\t\t\t}\n\n\t\t\t/* Does the URL contain authority information? */ \n\n\t\t\tif ( url.indexOf ( \"@\" ) != -1 )\n\t\t\t{\n\t\t\t\t/* Parse the URL using regex */ \n\n\t\t\t\tvar urlSegments = url.match ( urlRegEx );\n\n\t\t\t\t/* Was a username found? */ \n\n\t\t\t\tif ( urlSegments [ 4 ] )\n\t\t\t\t{\n\t\t\t\t\tcredentials.user = urlSegments [ 4 ];\n\t\t\t\t}\n\n\t\t\t\t/* Was a password found? */ \n\n\t\t\t\tif ( urlSegments [ 5 ] )\n\t\t\t\t{\n\t\t\t\t\tcredentials.password = urlSegments [ 5 ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* Construct a new anchor element based on the supplied URL */ \n\n\t\t\tvar a = document.createElement ( \"a\" );\n\n\t\t\t/* Set the anchor href to the URL to parse (let the browser do (most of) the parsing) */ \n\n\t\t\ta.href = url;\n\n\t\t\t/* Under IE, an anchor element containing a username and password is inaccessible, so we will probe \"a.protocol\" to test if we have access */ \n\n\t\t\ttry\n\t\t\t{\n\t\t\t\t/* Check if the element is accessible */ \n\n\t\t\t\tvar accessible = a.protocol;\n\t\t\t}\n\t\t\tcatch ( err )\n\t\t\t{\n\t\t\t\t/* MSIE: A security problem occurred. (cannot access the anchor element) */ \n\n\t\t\t\tif ( err.number == -2146697202 )\n\t\t\t\t{\n\t\t\t\t\t/* IE hack!.. strip the username and password from the URL, and reparse */ \n\n\t\t\t\t\tvar authority = \"\";\n\n\t\t\t\t\t/* Were credentials found in the URL? */ \n\n\t\t\t\t\tif ( credentials.user != \"\" )\n\t\t\t\t\t{\n\t\t\t\t\t\t/* Build string containing the username and password to strip from the URL */ \n\n\t\t\t\t\t\tauthority += credentials.user;\n\n\t\t\t\t\t\tif ( credentials.password != \"\" )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tauthority += \":\" + credentials.password;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tauthority += \"@\";\n\n\t\t\t\t\t\t/* Strip the username and password from the URL and set the anchor href (this could in theory be done for all browsers) */ \n\n\t\t\t\t\t\ta.href = url.replace ( authority, \"\" );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* Sanitise the protocol string */ \n\n\t\t\tvar protocol = a.protocol;\n\n\t\t\tif ( a.protocol.indexOf ( \"//\" ) == -1 )\n\t\t\t{\n\t\t\t\tprotocol += \"//\";\n\t\t\t}\n\n\t\t\t/* Sanitise the path string */ \n\n\t\t\tvar pathname = a.pathname;\n\n\t\t\tif ( pathname [ 0 ] != \"/\" )\n\t\t\t{\n\t\t\t\tpathname = \"/\" + pathname;\n\t\t\t}\n\n\t\t\t/* Ensure the port value is a string */ \n\n\t\t\tvar port = a.port + \"\";\n\n\t\t\t/* Strip of default port numbers if added, and not present in the original URL */ \n\n\t\t\tif ( ( port == \"21\" && url.indexOf ( \":21\" ) == -1 ) || ( port == \"80\" && url.indexOf ( \":80\" ) == -1 ) || ( port == \"443\" && url.indexOf ( \":443\" ) == -1 ) || port == \"0\" )\n\t\t\t{\n\t\t\t\tport = \"\";\n\t\t\t}\n\n\t\t\t/* Return the URL object, based on the URL information for the newly created anchor element contained in the DOM */ \n\n\t\t\treturn { scheme : protocol, user : credentials.user, password : credentials.password, host : a.hostname, port : port, path : pathname, query : a.search, fragment : a.hash };\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: objectToUrl\n\t\t *\n\t\t *\tConvert a URL object to a string.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\turl - The URL object to convert.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tURL string.\n\t\t *\n\t\t **/ \n\n\t\tvar objectToUrl = function ( url )\n\t\t{\n\t\t\t/* Build URL string, starting with the scheme */ \n\n\t\t\tvar urlString = url.scheme;\n\n\t\t\t/* Was a username specified? */ \n\n\t\t\tif ( url.user != null && url.user != \"\" )\n\t\t\t{\n\t\t\t\t/* Insert the username */ \n\n\t\t\t\turlString += url.user;\n\n\t\t\t\t/* Was a password also specified? */ \n\n\t\t\t\tif ( url.password != null && url.password != \"\" )\n\t\t\t\t{\n\t\t\t\t\turlString += \":\" + url.password;\n\t\t\t\t}\n\n\t\t\t\t/* Insert authority/host seperator */ \n\n\t\t\t\turlString += \"@\";\n\t\t\t}\n\n\t\t\t/* Glue the remainder of the URL together (only including the port if explicitly specified) */ \n\n\t\t\treturn urlString + url.host + ( url.port != \"\" ? \":\" + url.port : \"\" ) + url.path + url.query + url.fragment;\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: sanitiseUrl\n\t\t *\n\t\t *\tSanitise a URL. Creates a fully qualified URL by converting it from a string to a DOM element and back to a string again.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\turl - The URL to sanitise.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tThe sanitised URL string.\n\t\t *\n\t\t **/ \n\n\t\tvar sanitiseUrl = function ( url )\n\t\t{\n\t\t\treturn uri.parse ( url ).toString ( );\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: urlObjectToString\n\t\t *\n\t\t *\tConverts a URL object to a string (used to override toString for URL objects).\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\tthis - The URL object to convert to a string.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tThe URL string.\n\t\t *\n\t\t **/ \n\n\t\tvar urlObjectToString = function ( )\n\t\t{\n\t\t\treturn objectToUrl ( this );\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: setUrlSegment\n\t\t *\n\t\t *\tSet the value of a segment within a URL string.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\turl - The URL to modify.\n\t\t *\n\t\t *\tsegment - The segment of the URL to modify (\"scheme\", \"host\", \"port\", \"path\", \"query\" or \"fragment\").\n\t\t *\n\t\t *\tvalue - The new segment value.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tThe URL string containing the update segment.\n\t\t *\n\t\t **/ \n\n\t\tvar setUrlSegment = function ( url, segment, value )\n\t\t{\n\t\t\t/* Convert the URL to an object */ \n\n\t\t\tvar urlObject = uri.parse ( url );\n\n\t\t\t/* Update the URL segment */ \n\n\t\t\turlObject [ segment ] = value;\n\n\t\t\t/* Convert the URL object back to a string */ \n\n\t\t\treturn objectToUrl ( urlObject );\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: getUrlObject\n\t\t *\n\t\t *\tConvert a URL string to an object, if not already. Used to ensure we always work with URL objects where either a string or object can be supplied.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\turl - URL string or object.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tURL object.\n\t\t *\n\t\t **/ \n\n\t\tvar getUrlObject = function ( url )\n\t\t{\n\t\t\t/* Is the URL a string? */ \n\n\t\t\tif ( typeof url == \"string\" )\n\t\t\t{\n\t\t\t\t/* Return the URL string converted to an object */ \n\n\t\t\t\treturn uri.parse ( url );\n\t\t\t}\n\n\t\t\t/* Return the URL object */ \n\n\t\t\treturn url;\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: getFragmentString\n\t\t *\n\t\t *\tRetrieve the fragment string for a given URL.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\turl - URL string or object.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tThe fragment string.\n\t\t *\n\t\t **/ \n\n\t\tvar getFragmentString = function ( url )\n\t\t{\n\t\t\treturn getUrlObject ( url ).fragment;\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: getQueryString\n\t\t *\n\t\t *\tRetrieve the query string for a given URL.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\turl - URL string or object.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tThe query string.\n\t\t *\n\t\t **/ \n\n\t\tvar getQueryString = function ( url )\n\t\t{\n\t\t\t/* Get the query string from the URL object */ \n\n\t\t\tvar query = getUrlObject ( url ).query;\n\n\t\t\t/* Anything?`*/ \n\n\t\t\tif ( query [ 0 ] == \"?\" )\n\t\t\t{\n\t\t\t\t/* Strip the leading \"?\" (makes .split() happy later) */ \n\n\t\t\t\treturn query.slice ( 1 );\n\t\t\t}\n\n\t\t\t/* Return the (probably not very valid?) query */ \n\n\t\t\treturn query;\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: updateQuery\n\t\t *\n\t\t *\tUpdate the query string for the elements URL.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\tthis - The element to set the new query string on.\n\t\t *\n\t\t *\tquery - New query object.\n\t\t *\n\t\t **/ \n\n\t\tvar updateQuery = function ( query )\n\t\t{\n\t\t\tvar queryObject = { };\n\n\t\t\t/* Get the query object for the current URL */ \n\n\t\t\tvar currentQueryObject = getQueryObject ( getHref.apply ( this ) );\n\n\t\t\t/* Was a string supplied as the parameter? */ \n\n\t\t\tif ( typeof query == \"string\" )\n\t\t\t{\n\t\t\t\t/* If the first character is a \"?\", then replace the whole query string */ \n\n\t\t\t\tif ( query [ 0 ] == \"?\" )\n\t\t\t\t{\n\t\t\t\t\t/* Trash the existing query object */ \n\n\t\t\t\t\tcurrentQueryObject = { };\n\n\t\t\t\t\t/* Strip the leading question mark */ \n\n\t\t\t\t\tquery = query.substring ( 1 );\n\t\t\t\t}\n\n\t\t\t\t/* Convert the supplied query string to an object */ \n\n\t\t\t\tqueryObject = queryStringToObject ( query );\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tqueryObject = query;\n\t\t\t}\n\n\t\t\t/* Did the supplied query object contain parameters? */ \n\n\t\t\tif ( $.isEmptyObject ( queryObject ) == false )\n\t\t\t{\n\t\t\t\t/* Extend the existing query object with the new query object */ \n\n\t\t\t\tqueryObject = $.extend ( currentQueryObject, queryObject );\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t/* An empty query object was supplied, so null the query string */ \n\n\t\t\t\tcurrentQueryObject = { };\n\t\t\t}\n\n\t\t\t/* Convert the query object to a string, and update the URL query string */ \n\n\t\t\tupdateHref.apply ( this, [ \"query\", queryObjectToString.apply ( queryObject ) ] );\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: queryStringToObject\n\t\t *\n\t\t *\tConvert a query string to an object.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\tquery - Query string to convert to an object.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tThe query object.\n\t\t *\n\t\t **/ \n\n\t\tvar queryStringToObject = function ( query )\n\t\t{\n\t\t\tvar object = { };\n\n\t\t\t/* Was a query string supplied? */ \n\n\t\t\tif ( query != \"\" )\n\t\t\t{\n\t\t\t\t/* Get all elements of the query string (\"&name=value\") */ \n\n\t\t\t\tvar elements = query.split ( \"&\" );\n\n\t\t\t\t/* Create the query object */ \n\n\t\t\t\tfor ( var i = 0; i < elements.length; i++ )\n\t\t\t\t{\n\t\t\t\t\t/* Retrieve the parameter name and value from the string \"name=value\" */ \n\n\t\t\t\t\tvar parameter = elements [ i ].split ( \"=\" );\n\n\t\t\t\t\t/* Add the parameter to the query object */ \n\n\t\t\t\t\tobject [ parameter [ 0 ] ] = parameter [ 1 ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* Return the query object */ \n\n\t\t\treturn object;\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: getQueryObject\n\t\t *\n\t\t *\tRetrieve the query object for a given URL.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\turl - URL string or object.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tThe query object.\n\t\t *\n\t\t **/ \n\n\t\tvar getQueryObject = function ( url )\n\t\t{\n\t\t\t/* Get the query string from the URL and convert it to an object */ \n\n\t\t\treturn queryStringToObject ( getQueryString ( url ) );\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: queryObjectToString\n\t\t *\n\t\t *\tQuery objects toString method.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\tthis - Query object.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tThe query string.\n\t\t *\n\t\t **/ \n\n\t\tvar queryObjectToString = function ( )\n\t\t{\n\t\t\tvar string = \"\";\n\n\t\t\t/* For each item in the query string */ \n\n\t\t\tfor ( var i in this )\n\t\t\t{\n\t\t\t\t/* Ensure that it contains valid data */ \n\n\t\t\t\tif ( i != \"toString\" && this [ i ] != null )\n\t\t\t\t{\n\t\t\t\t\tstring += \"&\" + i + \"=\" + this [ i ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* Anything? */ \n\n\t\t\tif ( string [ 0 ] == \"&\" )\n\t\t\t{\n\t\t\t\t/* Return the query string (replacing the first \"&\" character with a \"?\" character. */ \n\n\t\t\t\tstring = \"?\" + string.slice ( 1 );\n\t\t\t}\n \n\t\t\t/* Empty query string */ \n\n\t\t\treturn string;\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: getPathString\n\t\t *\n\t\t *\tRetrieve the path string for a given URL.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\turl - URL string or object.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tThe path string.\n\t\t *\n\t\t **/ \n\n\t\tvar getPathString = function ( url )\n\t\t{\n\t\t\t/* Get the path string from the URL object */ \n\n\t\t\tvar path = getUrlObject ( url ).path;\n\n\t\t\t/* Ensure the path starts with a leading slash */ \n\n\t\t\tif ( path [ 0 ] == \"/\" )\n\t\t\t{\n\t\t\t\t/* Strip the leading slash from the path */ \n\n\t\t\t\treturn path.slice ( 1 );\n\t\t\t}\n\n\t\t\t/* Empty or malformed path */ \n\n\t\t\treturn path;\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: getPathObject\n\t\t *\n\t\t *\tRetrieve the path object for a given URL.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\turl - URL string or object.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tThe path obbject.\n\t\t *\n\t\t **/ \n\n\t\tvar getPathObject = function ( url )\n\t\t{\n\t\t\t/* Get the path string from the URL object (without leading slash) */ \n\n\t\t\tvar pathString = getPathString ( url );\n\n\t\t\t/* Anything? */ \n\n\t\t\tif ( pathString != \"\" )\n\t\t\t{\n\t\t\t\t/* Create the path object */ \n\n\t\t\t\treturn pathString.split ( \"/\" );\n\t\t\t}\n\n\t\t\t/* No path specified */ \n\n\t\t\treturn [ ];\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: updatePath\n\t\t *\n\t\t *\tUpdate the path string for the elements URL.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\tthis - The element to set the new path string on.\n\t\t *\n\t\t *\tpath - New path object.\n\t\t *\n\t\t **/ \n\n\t\tvar updatePath = function ( path )\n\t\t{\n\t\t\tvar pathString = \"\";\n\n\t\t\t/* Get an array of existing path elements */ \n\n\t\t\tvar pathArray = getUrlObject ( getHref.apply ( this ) ).path.split ( \"/\" );\n\n\t\t\t/* Get an array of new path elements */ \n\n\t\t\tvar newPathArray = path.split ( \"/\" );\n\t\t\tvar i = 0;\n\n\t\t\t/* Was the first character a \"/\"? */ \n\n\t\t\tif ( newPathArray [ 0 ] == \"\" )\n\t\t\t{\n\t\t\t\t/* Truncate the existing path */ \n\n\t\t\t\tpathArray = [ ];\n\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\t/* Remove the initial empty path element */ \n\n\t\t\tpathArray.splice ( 0, 1 );\n\n\t\t\t/* Iterate through all new path elements */ \n\n\t\t\tfor ( var l = newPathArray.length; i < l; i++ )\n\t\t\t{\n\t\t\t\t/* Remove an old path element? */ \n\n\t\t\t\tif ( newPathArray [ i ] == \"..\" )\n\t\t\t\t{\n\t\t\t\t\t/* Remove the element from the path array */ \n\n\t\t\t\t\tif ( pathArray.length > 0 )\n\t\t\t\t\t{\n\t\t\t\t\t\tpathArray.splice ( pathArray.length - 1, 1 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if ( newPathArray [ i ] == \".\" )\n\t\t\t\t{\n\t\t\t\t\t/* Current directory */ \n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t/* Include the new path element */ \n\n\t\t\t\t\tpathArray.push ( newPathArray [ i ] );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* Update the path string */ \n\n\t\t\tupdateHref.apply ( this, [ \"path\", pathObjectToString.apply ( pathArray ) ] );\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: pathObjectToString\n\t\t *\n\t\t *\tPath objects toString method.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\tthis - Path object.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tThe path string.\n\t\t *\n\t\t **/ \n\n\t\tvar pathObjectToString = function ( )\n\t\t{\n\t\t\t/* Are there any path elements? */ \n\n\t\t\tif ( this.length > 0 )\n\t\t\t{\n\t\t\t\t/* Join all elements with a \"/\", and return the leading path slash again */ \n\n\t\t\t\treturn \"/\" + this.join ( \"/\" );\n\t\t\t}\n\n\t\t\t/* No path */ \n\n\t\t\treturn \"/\";\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: getPortString\n\t\t *\n\t\t *\tRetrieve the port string for a given URL.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\turl - URL string or object.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tThe port string.\n\t\t *\n\t\t **/ \n\n\t\tvar getPortString = function ( url )\n\t\t{\n\t\t\treturn getUrlObject ( url ).port;\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: getHostString\n\t\t *\n\t\t *\tRetrieve the host string for a given URL.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\turl - URL string or object.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tThe host string.\n\t\t *\n\t\t **/ \n\n\t\tvar getHostString = function ( url )\n\t\t{\n\t\t\treturn getUrlObject ( url ).host;\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: getPasswordString\n\t\t *\n\t\t *\tRetrieve the password string for a given URL.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\turl - URL string or object.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tThe password string.\n\t\t *\n\t\t **/ \n\n\t\tvar getPasswordString = function ( url )\n\t\t{\n\t\t\treturn getUrlObject ( url ).password;\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: getUserString\n\t\t *\n\t\t *\tRetrieve the user string for a given URL.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\turl - URL string or object.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tThe user string.\n\t\t *\n\t\t **/ \n\n\t\tvar getUserString = function ( url )\n\t\t{\n\t\t\treturn getUrlObject ( url ).user;\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: getSchemeString\n\t\t *\n\t\t *\tRetrieve the scheme string for a given URL.\n\t\t *\n\t\t *\tParameters: \n\t\t *\n\t\t *\turl - URL string or object.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tThe scheme string.\n\t\t *\n\t\t **/ \n\n\t\tvar getSchemeString = function ( url )\n\t\t{\n\t\t\treturn getUrlObject ( url ).scheme;\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: addSelectorCallback\n\t\t *\n\t\t *\tAdd a function the selector callstack.\n\t\t *\n\t\t **/ \n\n\t\tvar addSelectorCallback = function ( element, callback, parameters )\n\t\t{\n\t\t\tif ( element.data ( \"is-watched\" ) == true )\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( selectorCallStack [ currentSelector ] )\n\t\t\t{\n\t\t\t\tselectorCallStack [ currentSelector ].push ( [ callback, parameters ] );\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: returnEachElement\n\t\t *\n\t\t *\tApply the callback for each element in this. Used for methods that return elements.\n\t\t *\n\t\t *\tParameters:\n\t\t *\n\t\t *\tthis Array of elements to iterate through.\n\t\t *\n\t\t *\tcallback Function to call for each element found.\n\t\t *\n\t\t *\tparameters Callback function parameters (array).\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tArray of elements.\n\t\t *\n\t\t **/ \n\n\t\tvar returnEachElement = function ( callback, parameters )\n\t\t{\n\t\t\t/* Is this an object, containing an href member? */ \n\n\t\t\tif ( this.href != null )\n\t\t\t{\n\t\t\t\t/* Issue the callback */ \n\n\t\t\t\tcallback.apply ( this, [ parameters ] );\n\n\t\t\t\t/* Return the object (for chaining purposes) */ \n\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\t/* Add this function and parameters to the watch selector callstack (if watched) */ \n\n\t\t\taddSelectorCallback ( this, callback, [ parameters ] );\n\n\t\t\t/* Return all elements, after applying the callback */ \n\n\t\t\treturn this.each\n\t\t\t(\n\t\t\t\tfunction ( )\n\t\t\t\t{\n\t\t\t\t\tcallback.apply ( $( this ), [ parameters ] );\n\t\t\t\t}\n\t\t\t);\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: returnEachObject\n\t\t *\n\t\t *\tApply the callback for each element in this, and buffer return codes. Used for methods that return data.\n\t\t *\n\t\t *\tParameters:\n\t\t *\n\t\t *\tthis Array of elements to iterate through.\n\t\t *\n\t\t *\tcallback Function to call for each element found.\n\t\t *\n\t\t *\tparameters Callback function parameters (array).\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tArray of return codes.\n\t\t *\n\t\t **/ \n\n\t\tvar returnEachObject = function ( callback, parameters )\n\t\t{\n\t\t\tif ( this.href != null )\n\t\t\t{\n\t\t\t\treturn callback.apply ( this, [ parameters ] );\n\t\t\t}\n\n\t\t\tvar result = [ ];\n\n\t\t\t/* Build and return an array of each elements callback results */ \n\n\t\t\tthis.each\n\t\t\t(\n\t\t\t\tfunction ( )\n\t\t\t\t{\n\t\t\t\t\tresult.push ( callback.apply ( $( this ), [ parameters ] ) );\n\t\t\t\t}\n\t\t\t);\n\n\t\t\treturn result;\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: dispatchGetSetHelper\n\t\t *\n\t\t *\tDispatch to get or set helper functions depending on the arguments supplied.\n\t\t *\n\t\t *\tIf no user arguments are supplied, perform the get, ortherwise perform the set with the user arguments.\n\t\t *\n\t\t *\tParameters:\n\t\t *\n\t\t *\tgetHelper - Get URL data callback.\n\t\t *\n\t\t *\tsetHelper - Set URL data callback.\n\t\t *\n\t\t *\thelperArguments - User arguments supplied to the public interface.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tget/setHelper() return code.\n\t\t *\n\t\t **/ \n\n\t\tvar dispatchGetSetHelper = function ( getHelper, setHelper, helperArguments )\n\t\t{\n\t\t\tif ( helperArguments.length == 0 )\n\t\t\t{\n\t\t\t\treturn getHelper.apply ( this )\n\t\t\t}\n\t\t\t\n\t\t\treturn setHelper.apply ( this, helperArguments )\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tFunction: methodDispatcher\n\t\t *\n\t\t *\tMain method dispatcher for the public interface.\n\t\t *\n\t\t *\tParameters: method\n\t\t *\n\t\t *\tmethod - The method to perform.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tArray of method handler results (either elements for set/filter methods, or strings/objects for get methods).\n\t\t *\n\t\t */ \n\n\t\tvar methodDispatcher = function ( method )\n\t\t{\n\t\t\t/* Is the method name valid */ \n\n\t\t\tif ( methods [ method ] != null )\n\t\t\t{\n\t\t\t\t/* Dispatch to the method handler */ \n\n\t\t\t\treturn methods [ method ].apply ( this, Array.prototype.slice.call ( arguments, 1 ) );\n\t\t\t}\n\t\t\telse if ( typeof method == \"object\" || method == null )\n\t\t\t{\n\t\t\t\t/* No method, or an object was supplied, initialise the element(s) */ \n\n\t\t\t\treturn methods.initialise.apply ( this, Array.prototype.slice.call ( arguments, 1 ) );\n\t\t\t}\n\n\t\t\t/* Invalid method/parameters */ \n\n\t\t\treturn this;\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tSection: URI parser interface.\n\t\t *\n\t\t *\tAll URI parsing is handled through this interface.\n\t\t *\n\t\t *\tThis section contains all parser interfaces utilised by the public parser interface.\n\t\t *\n\t\t *\tToDo: Extend this interface with the current URL segment parsing logic, and implement a more comprehensive URI parser set.\n\t\t *\n\t\t *\tSee http://en.wikipedia.org/wiki/URI_scheme for an overview of URIs.\n\t\t *\n\t\t **/ \n\n\t\tvar uri =\n\t\t{\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tAll URI object to string methods.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\ttoString :\n\t\t\t{\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: uri.toString.http\n\t\t\t\t *\n\t\t\t\t *\tConverts a URI object with an \"http\" scheme to a string.\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\"http\" : function ( )\n\t\t\t\t{\n\t\t\t\t\treturn objectToUrl ( this );\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: uri.toString.mailto\n\t\t\t\t *\n\t\t\t\t *\tConverts a URI object with a \"mailto:\" scheme to a string.\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\"mailto\" : function ( )\n\t\t\t\t{\n\t\t\t\t\t/* Blank invalid fields */ \n\n\t\t\t\t\tthis.password = \"\";\n\t\t\t\t\tthis.path = \"\";\n\t\t\t\t\tthis.port = \"\";\n\n\t\t\t\t\treturn objectToUrl ( this );\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: uri.toString.javascript\n\t\t\t\t *\n\t\t\t\t *\tConverts a URI object with a \"javascript:\" scheme to a string.\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\"javascript\" : function ( )\n\t\t\t\t{\n\t\t\t\t\treturn \"javascript:\" + this.javascript;\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: uri.toString.generic\n\t\t\t\t *\n\t\t\t\t *\tConverts an generic URI object to a string.\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\"generic\" : function ( )\n\t\t\t\t{\n\t\t\t\t\treturn this.scheme + this.url;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tAll URI string parsers.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\tparsers :\n\t\t\t{\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: uri.parsers.http\n\t\t\t\t *\n\t\t\t\t *\tParse a URI with a \"http://\" scheme into a URI object.\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\"http\" : function ( url )\n\t\t\t\t{\n\t\t\t\t\treturn $.extend ( urlToObject ( url ), { toString : uri.toString.http } );\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: uri.parsers.mailto\n\t\t\t\t *\n\t\t\t\t *\tParse a URI with a \"mailto:\" scheme into a URI object.\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\"mailto\" : function ( url )\n\t\t\t\t{\n\n\t\t\t\t\treturn $.extend ( urlToObject ( url.substring ( 7 ) ), { scheme : \"mailto:\", toString : uri.toString.mailto } );\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: uri.parsers.javascript\n\t\t\t\t *\n\t\t\t\t *\tParse a URI with a \"javascript:\" scheme into a URI object.\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\"javascript\" : function ( url )\n\t\t\t\t{\n\t\t\t\t\treturn $.extend ( urlToObject ( document.location.href ), { javascript : url.substring ( 11 ), toString : uri.toString.javascript } );\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: uri.parsers.generic\n\t\t\t\t *\n\t\t\t\t *\tParses any URI (URIs with a scheme seperator of \"://\" are parsed as \"http://\", everything else is treated as unknown..\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\"generic\" : function ( scheme, url )\n\t\t\t\t{\n\t\t\t\t\t/* Was a \"//\" specified in the scheme? */ \n\n\t\t\t\t\tif ( url.substring ( 0, 2 ) == \"//\" )\n\t\t\t\t\t{\n\t\t\t\t\t\t/* Parse as HTTP URL */ \n\n\t\t\t\t\t\treturn $.extend ( urlToObject ( url.substring ( 2 ) ), { scheme : scheme + \"://\", toString : uri.toString.http } );\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Unknown, store the schem (for filtering purposes), and simply append the remainder of the URI */ \n\n\t\t\t\t\treturn { scheme : scheme + \":\", url : url, toString : uri.toString.generic };\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: uri.parse\n\t\t\t *\n\t\t\t *\tParse a URI string based on scheme.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\tparse : function ( uri )\n\t\t\t{\n\t\t\t\t/* Only parse strings */ \n\n\t\t\t\tif ( typeof uri != \"string\" )\n\t\t\t\t{\n\t\t\t\t\t/* URI object? */ \n\n\t\t\t\t\treturn uri;\n\t\t\t\t}\n\n\t\t\t\t/* Try to determine the scheme */ \n\n\t\t\t\tvar pos = uri.indexOf ( \":\" );\n\n\t\t\t\t/* Was a scheme seperator found? */ \n\n\t\t\t\tif ( pos != -1 )\n\t\t\t\t{\n\t\t\t\t\t/* Get the scheme name (from the start of the URI, until the first \":\" character)*/ \n\n\t\t\t\t\tvar scheme = uri.substring ( 0, pos ).toLowerCase ( );\n\n\t\t\t\t\t/* Is a handler present for this scheme? */ \n\n\t\t\t\t\tif ( this.parsers [ scheme ] != null )\n\t\t\t\t\t{\n\t\t\t\t\t\t/* Parse the URI with a specific parser */ \n\n\t\t\t\t\t\treturn this.parsers [ scheme ] ( uri );\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Try to parse the URI generically */ \n\n\t\t\t\t\treturn this.parsers.generic ( scheme, uri.substring ( pos + 1 ) );\n\t\t\t\t}\n\n\t\t\t\t/* Parse the URI with the HTTP parser, for now... */ \n\n\t\t\t\treturn this.parsers.http ( uri );\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tSection: Helper interface.\n\t\t *\n\t\t *\tAll private helper methods.\n\t\t *\n\t\t *\tThis section contains all get/set and filter methods utilised by the public interface.\n\t\t *\n\t\t **/ \n\n\t\tvar helpers =\n\t\t{\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: getUrl\n\t\t\t *\n\t\t\t *\tReturn the elements URL (stored under its \"data-href\", and/or \"href\"/\"src\" attribute).\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"getUrl\" : function ( )\n\t\t\t{\n\t\t\t\treturn returnEachObject.apply ( this, [ getHref, null ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: setUrl\n\t\t\t *\n\t\t\t *\tSet the elements URL (stored under it's \"data-href\", and/or \"href\"/\"src\" attribute). Note: This does not change document.location.href for the $(document) element!\n\t\t\t *\n\t\t\t*/ \n\n\t\t\t\"setUrl\" : function ( url )\n\t\t\t{\n\t\t\t\tsetHref.apply ( this, [ url ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: parseUrl\n\t\t\t *\n\t\t\t *\tReturn the URL object for the elements \"data-href\" attribute value.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"parseUrl\" : function ( )\n\t\t\t{\n\t\t\t\treturn returnEachObject.apply ( this, [ function ( ) { return uri.parse ( getHref.apply ( this ) ); }, null ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: getFragment\n\t\t\t *\n\t\t\t *\tGet the fragment object from the elements URL.\n\t\t\t *\n\t\t\t *\tParameters: \n\t\t\t *\n\t\t\t *\tthis - The element to retrieve the fragment object from.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tThe fragment object. Call .toString() on the object to convert it to a string value.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"getFragment\" : function ( )\n\t\t\t{\n\t\t\t\treturn returnEachObject.apply ( this, [ function ( ) { return getFragmentString ( getHref.apply ( this ) ); }, null ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: setFragment\n\t\t\t *\n\t\t\t *\tSet the fragment string for the elements URL.\n\t\t\t *\n\t\t\t *\tParameters: \n\t\t\t *\n\t\t\t *\tthis - The element to set the fragment string on.\n\t\t\t *\n\t\t\t *\tfragment - The new fragment string/object.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tArray of elements that were changed.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"setFragment\" : function ( fragment )\n\t\t\t{\n\t\t\t\tif ( fragment [ 0 ] != \"#\" )\n\t\t\t\t{\n\t\t\t\t\tfragment = \"#\" + fragment;\n\t\t\t\t}\n\n\t\t\t\treturn returnEachElement.apply ( this, [ updateHrefShim, [ \"fragment\", fragment ] ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: getQuery\n\t\t\t *\n\t\t\t *\tGet the query object from the elements URL.\n\t\t\t *\n\t\t\t *\tParameters: \n\t\t\t *\n\t\t\t *\tthis - The element to retrieve the query object from.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tThe query object. Call .toString() on the object to convert it to a string value.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"getQuery\" : function ( )\n\t\t\t{\n\t\t\t\treturn returnEachObject.apply ( this, [ function ( ) { return $.extend ( getQueryObject ( getHref.apply ( this ) ), { toString : queryObjectToString } ); }, null ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: setQuery\n\t\t\t *\n\t\t\t *\tSet the query string for the elements URL.\n\t\t\t *\n\t\t\t *\tParameters: \n\t\t\t *\n\t\t\t *\tthis - The element to set the query object on.\n\t\t\t *\n\t\t\t *\tquery - The new query string represented as an object.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tArray of elements that were changed.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"setQuery\" : function ( query )\n\t\t\t{\n\t\t\t\treturn returnEachElement.apply ( this, [ updateQuery, query ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: getPath\n\t\t\t *\n\t\t\t *\tGet the path object from the elements URL.\n\t\t\t *\n\t\t\t *\tParameters: \n\t\t\t *\n\t\t\t *\tthis - The element to retrieve the path object from.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tThe path object. Call .toString() on the object to convert it to a string value.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"getPath\" : function ( )\n\t\t\t{\n\t\t\t\treturn returnEachObject.apply ( this, [ function ( ) { return $.extend ( getPathObject ( getHref.apply ( this ) ), { toString : pathObjectToString } ); }, null ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: setPath\n\t\t\t *\n\t\t\t *\tSet the path string for the elements URL.\n\t\t\t *\n\t\t\t *\tParameters: \n\t\t\t *\n\t\t\t *\tthis - The element to set the path string on.\n\t\t\t *\n\t\t\t *\tpath - The new path string/object.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tArray of elements that were changed.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"setPath\" : function ( path )\n\t\t\t{\n\t\t\t\treturn returnEachElement.apply ( this, [ updatePath, path ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: getPort\n\t\t\t *\n\t\t\t *\tGet the port string from the elements URL.\n\t\t\t *\n\t\t\t *\tParameters: \n\t\t\t *\n\t\t\t *\tthis - The element to retrieve the port string from.\n\t\t\t *\n\t\t\t *\tReturns: \n\t\t\t *\n\t\t\t *\tThe port string.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"getPort\" : function ( )\n\t\t\t{\n\t\t\t\treturn returnEachObject.apply ( this, [ function ( ) { return getPortString ( getHref.apply ( this ) ); }, null ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: setPort\n\t\t\t *\n\t\t\t *\tSet the port string for the elements URL.\n\t\t\t *\n\t\t\t *\tParameters: \n\t\t\t *\n\t\t\t *\tthis - The element to set the port string on.\n\t\t\t *\n\t\t\t *\tport - The new port string.\n\t\t\t *\n\t\t\t *\tReturns: \n\t\t\t *\n\t\t\t *\tArray of elements that were changed.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"setPort\" : function ( port )\n\t\t\t{\n\t\t\t\treturn returnEachElement.apply ( this, [ updateHrefShim, [ \"port\", port ] ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: getHost\n\t\t\t *\n\t\t\t *\tGet the host string from the elements URL.\n\t\t\t *\n\t\t\t *\tParameters: \n\t\t\t *\n\t\t\t *\tthis - The element to retrieve the host string from.\n\t\t\t *\n\t\t\t *\tReturns: \n\t\t\t *\n\t\t\t *\tThe host string.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"getHost\" : function ( )\n\t\t\t{\n\t\t\t\treturn returnEachObject.apply ( this, [ function ( ) { return getHostString ( getHref.apply ( this ) ); }, null ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: setHost\n\t\t\t *\n\t\t\t *\tSet the host string for the elements URL.\n\t\t\t *\n\t\t\t *\tParameters: \n\t\t\t *\n\t\t\t *\tthis - The element to set the host string on.\n\t\t\t *\n\t\t\t *\thost - The new host string.\n\t\t\t *\n\t\t\t *\tReturns: \n\t\t\t *\n\t\t\t *\tArray of elements that were changed.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"setHost\" : function ( host )\n\t\t\t{\n\t\t\t\treturn returnEachElement.apply ( this, [ updateHrefShim, [ \"host\", host ] ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: getPassword\n\t\t\t *\n\t\t\t *\tGet the password string from the elements URL.\n\t\t\t *\n\t\t\t *\tParameters: \n\t\t\t *\n\t\t\t *\tthis - The element to retrieve the password string from.\n\t\t\t *\n\t\t\t *\tReturns: \n\t\t\t *\n\t\t\t *\tThe password string.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"getPassword\" : function ( )\n\t\t\t{\n\t\t\t\treturn returnEachObject.apply ( this, [ function ( ) { return getPasswordString ( getHref.apply ( this ) ); }, null ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: setPassword\n\t\t\t *\n\t\t\t *\tSet the password string for the elements URL.\n\t\t\t *\n\t\t\t *\tParameters: \n\t\t\t *\n\t\t\t *\tthis - The element to set the password string on.\n\t\t\t *\n\t\t\t *\tpassword - The new password string.\n\t\t\t *\n\t\t\t *\tReturns: \n\t\t\t *\n\t\t\t *\tArray of elements that were changed.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"setPassword\" : function ( password )\n\t\t\t{\n\t\t\t\treturn returnEachElement.apply ( this, [ updateHrefShim, [ \"password\", password ] ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: getUser\n\t\t\t *\n\t\t\t *\tGet the user string from the elements URL.\n\t\t\t *\n\t\t\t *\tParameters: \n\t\t\t *\n\t\t\t *\tthis - The element to retrieve the user string from.\n\t\t\t *\n\t\t\t *\tReturns: \n\t\t\t *\n\t\t\t *\tThe user string.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"getUser\" : function ( )\n\t\t\t{\n\t\t\t\treturn returnEachObject.apply ( this, [ function ( ) { return getUserString ( getHref.apply ( this ) ); }, null ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: setUser\n\t\t\t *\n\t\t\t *\tSet the user string for the elements URL.\n\t\t\t *\n\t\t\t *\tParameters: \n\t\t\t *\n\t\t\t *\tthis - The element to set the user string on.\n\t\t\t *\n\t\t\t *\tuser - The new user string.\n\t\t\t *\n\t\t\t *\tReturns: \n\t\t\t *\n\t\t\t *\tArray of elements that were changed.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"setUser\" : function ( user )\n\t\t\t{\n\t\t\t\treturn returnEachElement.apply ( this, [ updateHrefShim, [ \"user\", user ] ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: getScheme\n\t\t\t *\n\t\t\t *\tGet the scheme string from the elements URL.\n\t\t\t *\n\t\t\t *\tParameters: \n\t\t\t *\n\t\t\t *\tthis - The element to retrieve the scheme string from.\n\t\t\t *\n\t\t\t *\tReturns: \n\t\t\t *\n\t\t\t *\tThe scheme string.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"getScheme\" : function ( )\n\t\t\t{\n\t\t\t\treturn returnEachObject.apply ( this, [ function ( ) { return getSchemeString ( getHref.apply ( this ) ); }, null ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: setScheme\n\t\t\t *\n\t\t\t *\tSet the scheme string for the elements URL.\n\t\t\t *\n\t\t\t *\tParameters: \n\t\t\t *\n\t\t\t *\tthis - The element to set the scheme string on.\n\t\t\t *\n\t\t\t *\tscheme - The new scheme string.\n\t\t\t *\n\t\t\t *\tReturns: \n\t\t\t *\n\t\t\t *\tArray of elements that were changed.\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"setScheme\" : function ( scheme )\n\t\t\t{\n\t\t\t\treturn returnEachElement.apply ( this, [ updateHrefShim, [ \"scheme\", scheme ] ] );\n\t\t\t},\n\n\t\t\t\"filters\" :\n\t\t\t{\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: = (equals)\n\t\t\t\t *\n\t\t\t\t *\tTest if the actual value is equal to the user supplied value.\n\t\t\t\t *\n\t\t\t\t *\tParameters:\n\t\t\t\t *\n\t\t\t\t *\tactualValue - Actual value.\n\t\t\t\t *\n\t\t\t\t *\tuserValue - User supplied value.\n\t\t\t\t *\n\t\t\t\t *\tReturns:\n\t\t\t\t *\n\t\t\t\t *\ttrue - The actual and user values are equal.\n\t\t\t\t *\n\t\t\t\t *\tfalse - The actual and user values are not equal.\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\"=\" : function ( actualValue, userValue )\n\t\t\t\t{\n\t\t\t\t\tif ( actualValue == userValue )\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: != (not equals)\n\t\t\t\t *\n\t\t\t\t *\tTest if the actual value is equal to the user supplied value.\n\t\t\t\t *\n\t\t\t\t *\tParameters:\n\t\t\t\t *\n\t\t\t\t *\tactualValue - Actual value.\n\t\t\t\t *\n\t\t\t\t *\tuserValue - User supplied value.\n\t\t\t\t *\n\t\t\t\t *\tReturns:\n\t\t\t\t *\n\t\t\t\t *\ttrue - The actual and user values are not equal.\n\t\t\t\t *\n\t\t\t\t *\tfalse - The actual and user values are equal.\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\"!=\" : function ( actualValue, userValue )\n\t\t\t\t{\n\t\t\t\t\tif ( actualValue != userValue )\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: < (less than)\n\t\t\t\t *\n\t\t\t\t *\tTest if the actual value is less than the user supplied value.\n\t\t\t\t *\n\t\t\t\t *\tParameters:\n\t\t\t\t *\n\t\t\t\t *\tactualValue - Actual value.\n\t\t\t\t *\n\t\t\t\t *\tuserValue - User supplied value.\n\t\t\t\t *\n\t\t\t\t *\tReturns:\n\t\t\t\t *\n\t\t\t\t *\ttrue - The actual value is less than the user supplied value.\n\t\t\t\t *\n\t\t\t\t *\tfalse - The actual value is greater than or equal to the user supplied value.\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\"<\" : function ( actualValue, userValue )\n\t\t\t\t{\n\t\t\t\t\tif ( actualValue < userValue )\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: > (greater than)\n\t\t\t\t *\n\t\t\t\t *\tTest if the actualValue is greater than the user supplied value.\n\t\t\t\t *\n\t\t\t\t *\tParameters:\n\t\t\t\t *\n\t\t\t\t *\tactualValue - Actual value.\n\t\t\t\t *\n\t\t\t\t *\tuserValue - User supplied value.\n\t\t\t\t *\n\t\t\t\t *\tReturns:\n\t\t\t\t *\n\t\t\t\t *\ttrue - The actual value is greater than the user supplied value.\n\t\t\t\t *\n\t\t\t\t *\tfalse - The actual value is less than or equal to the user supplied value.\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\">\" : function ( actualValue, userValue )\n\t\t\t\t{\n\t\t\t\t\tif ( actualValue > userValue )\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: <= (less than or equal to)\n\t\t\t\t *\n\t\t\t\t *\tTest if the actual value is less than or equal to the user supplied value.\n\t\t\t\t *\n\t\t\t\t *\tParameters:\n\t\t\t\t *\n\t\t\t\t *\tactualValue - Actual value.\n\t\t\t\t *\n\t\t\t\t *\tuserValue - User supplied value.\n\t\t\t\t *\n\t\t\t\t *\tReturns:\n\t\t\t\t *\n\t\t\t\t *\ttrue - The actual value is less than or equal to the user supplied value.\n\t\t\t\t *\n\t\t\t\t *\tfalse - The actual value is greater than the user supplied value.\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\"<=\" : function ( actualValue, userValue )\n\t\t\t\t{\n\t\t\t\t\tif ( actualValue <= userValue )\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: >= (greater than or equal to)\n\t\t\t\t *\n\t\t\t\t *\tTest if the actual value is greater than or equal to the user supplied value.\n\t\t\t\t *\n\t\t\t\t *\tParameters:\n\t\t\t\t *\n\t\t\t\t *\tactualValue - Actual value.\n\t\t\t\t *\n\t\t\t\t *\tuserValue - User supplied value.\n\t\t\t\t *\n\t\t\t\t *\tReturns:\n\t\t\t\t *\n\t\t\t\t *\ttrue - The actual value is greater than or equal to the user supplied value.\n\t\t\t\t *\n\t\t\t\t *\tfalse - The actual value is less than the user supplied value.\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\">=\" : function ( actualValue, userValue )\n\t\t\t\t{\n\t\t\t\t\tif ( actualValue >= userValue )\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: *= (contains)\n\t\t\t\t *\n\t\t\t\t *\tTest if the actual value contains the user supplied value.\n\t\t\t\t *\n\t\t\t\t *\tParameters:\n\t\t\t\t *\n\t\t\t\t *\tactualValue - Actual value.\n\t\t\t\t *\n\t\t\t\t *\tuserValue - User supplied value.\n\t\t\t\t *\n\t\t\t\t *\tReturns:\n\t\t\t\t *\n\t\t\t\t *\ttrue - The actual value contains the user supplied value.\n\t\t\t\t *\n\t\t\t\t *\tfalse - The actual value does not contain the user supplied value.\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\"*=\" : function ( actualValue, userValue )\n\t\t\t\t{\n\t\t\t\t\tif ( actualValue.indexOf ( userValue ) != -1 )\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: ^= (starts with)\n\t\t\t\t *\n\t\t\t\t *\tTest if the start of the actual value matches the user supplied value.\n\t\t\t\t *\n\t\t\t\t *\tParameters:\n\t\t\t\t *\n\t\t\t\t *\tactualValue - Actual value.\n\t\t\t\t *\n\t\t\t\t *\tuserValue - User supplied value.\n\t\t\t\t *\n\t\t\t\t *\tReturns:\n\t\t\t\t *\n\t\t\t\t *\ttrue - The start of the actual value matches the user supplied value.\n\t\t\t\t *\n\t\t\t\t *\tfalse - The start of the actual value does not match the user supplied value.\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\"^=\" : function ( actualValue, userValue )\n\t\t\t\t{\n\t\t\t\t\tif ( actualValue.length >= userValue.length )\n\t\t\t\t\t{\n\t\t\t\t\t\tif ( actualValue.substring ( 0, userValue.length ) == userValue )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: $= (ends with)\n\t\t\t\t *\n\t\t\t\t *\tTest if the end of the actual value is the same as the user supplied value.\n\t\t\t\t *\n\t\t\t\t *\tParameters:\n\t\t\t\t *\n\t\t\t\t *\tactualValue - Actual value.\n\t\t\t\t *\n\t\t\t\t *\tuserValue - User supplied value.\n\t\t\t\t *\n\t\t\t\t *\tReturns:\n\t\t\t\t *\n\t\t\t\t *\ttrue - The end of the actual value matches the user supplied value.\n\t\t\t\t *\n\t\t\t\t *\tfalse - The end of the actual value does not match the user supplied value.\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\"$=\" : function ( actualValue, userValue )\n\t\t\t\t{\n\t\t\t\t\tif ( actualValue.length >= userValue.length )\n\t\t\t\t\t{\n\t\t\t\t\t\tif ( actualValue.substring ( actualValue.length - userValue.length ) == userValue )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t *\n\t\t\t\t *\tFunction: regex (regular expression)\n\t\t\t\t *\n\t\t\t\t *\tTest if the actual value matches the user supplied regular expression.\n\t\t\t\t *\n\t\t\t\t *\tParameters:\n\t\t\t\t *\n\t\t\t\t *\tactualValue - Actual value.\n\t\t\t\t *\n\t\t\t\t *\tuserValue - Regular expression to apply.\n\t\t\t\t *\n\t\t\t\t *\tReturns:\n\t\t\t\t *\n\t\t\t\t *\ttrue - The regular expression matches.\n\t\t\t\t *\n\t\t\t\t *\tfalse - The regular expression does not match.\n\t\t\t\t *\n\t\t\t\t **/ \n\n\t\t\t\t\"regex\" : function ( actualValue, userValue )\n\t\t\t\t{\n\t\t\t\t\treturn actualValue.match ( userValue );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tSection: Public interface.\n\t\t *\n\t\t *\tAll public methods exposed via the JQuery URL parser plugin interface.\n\t\t *\n\t\t **/ \n\n\t\tvar methods = \n\t\t{\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: url\n\t\t\t *\n\t\t\t *\tGet/Set the href string for the given element(s).\n\t\t\t *\n\t\t\t *\tParameters:\n\t\t\t *\n\t\t\t *\tthis - See <this parameter>.\n\t\t\t *\n\t\t\t *\turl - If present, specifies the new URL object/string to set. Otherwise the function will get the URL.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tIf a URL was specified, then this function returns the array of modified elements for chaining purposes, otherwise it returns an array of element URLs.\n\t\t\t *\n\t\t\t *\tExamples:\n\t\t\t *\n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// Parse the document.location.href URL\n\t\t\t *\t$(document).jurlp(\"url\");\n\t\t\t *\n\t\t\t *\t// Parse all URLs in anchor tags\n\t\t\t *\t$(\"a\").jurlp(\"url\");\n\t\t\t *\n\t\t\t *\t// Update the working URL for the document\n\t\t\t *\t$(document).jurlp(\"url\", \"http://www.google.com\");\n\t\t\t *\n\t\t\t *\t// Replace all anchor tags with the google URL!\n\t\t\t *\t$(\"a\").jurlp(\"url\", \"http://www.google.com\");\n\t\t\t *\n\t\t\t *\t// Output the documents URL object\n\t\t\t *\tconsole.log($(document).jurlp(\"url\"));\n\t\t\t *\n\t\t\t *\t// Output the documents URL string\n\t\t\t *\tconsole.log($(document).jurlp(\"url\").toString());\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t **/\n\n\t\t\t\"url\" : function ( url )\n\t\t\t{\n\t\t\t\treturn dispatchGetSetHelper.apply ( this, [ helpers.parseUrl, helpers.setUrl, arguments ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: fragment\n\t\t\t *\n\t\t\t *\tGet/Set the fragment segment of the URL for the given element(s).\n\t\t\t *\n\t\t\t *\tParameters:\n\t\t\t *\n\t\t\t *\tthis - See <this parameter>.\n\t\t\t *\n\t\t\t *\tfragment - If present, specifies the new fragment string to set. Otherwise the function will get the fragment string from each elements URL.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tIf a fragment string was specified, then this function returns the array of modified elements for chaining purposes, otherwise it returns an array of URL fragments from each element.\n\t\t\t *\n\t\t\t *\tExamples:\n\t\t\t *\n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// Parse the document.location.href URL for the fragment string\n\t\t\t *\t$(document).jurlp(\"fragment\");\n\t\t\t *\n\t\t\t *\t// Parse all URLs in anchor tags and retrieve their fragment strings\n\t\t\t *\t$(\"a\").jurlp(\"fragment\");\n\t\t\t *\n\t\t\t *\t// Set a new fragment for the document\n\t\t\t *\t$(document).jurlp(\"fragment\", \"elementid\");\n\t\t\t *\n\t\t\t *\t// Replace the fragment string in all anchor tags with the new element ID\n\t\t\t *\t$(\"a\").jurlp(\"fragment\", \"elementid\");\n\t\t\t *\n\t\t\t *\t// Output the documents URL fragment\n\t\t\t *\tconsole.log($(document).jurlp(\"fragment\"));\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t **/\n\n\t\t\t\"fragment\" : function ( fragment )\n\t\t\t{\n\t\t\t\treturn dispatchGetSetHelper.apply ( this, [ helpers.getFragment, helpers.setFragment, arguments ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: query\n\t\t\t *\n\t\t\t *\tGet/Set the query segment of the URL for the given element(s).\n\t\t\t *\n\t\t\t *\tParameters:\n\t\t\t *\n\t\t\t *\tthis - See <this parameter>.\n\t\t\t *\n\t\t\t *\tquery - If present, specifies the new query object to set. Otherwise the function will get the query object from each elements URL.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tIf a query object was specified, then this function returns the array of modified elements for chaining purposes, otherwise it returns an array of URL query objects from each element. Each returned query object can be converted to a string by calling its toString() method.\n\t\t\t *\n\t\t\t *\tExamples:\n\t\t\t *\n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// Parse the document.location.href URL for the query object\n\t\t\t *\t$(document).jurlp(\"query\");\n\t\t\t *\n\t\t\t *\t// Parse all URLs in anchor tags and retrieve their query object\n\t\t\t *\t$(\"a\").jurlp(\"query\");\n\t\t\t *\n\t\t\t *\t// Set/update the \"new\" parameter in the query string for the document\n\t\t\t *\t$(document).jurlp(\"query\", {\"new\":\"parameter\"});\n\t\t\t *\n\t\t\t *\t// Remove the query string for the document\n\t\t\t *\t$(document).jurlp(\"query\", {});\n\t\t\t *\n\t\t\t *\t// Update the query string in all anchor tags with the new query object.\n\t\t\t *\t$(\"a\").jurlp(\"query\", {\"new\":\"parameter\"});\n\t\t\t *\n\t\t\t *\t// Remove the query string in all anchor tags.\n\t\t\t *\t$(\"a\").jurlp(\"query\", {});\n\t\t\t *\n\t\t\t *\t// Output the documents URL query object\n\t\t\t *\tconsole.log($(document).jurlp(\"query\"));\n\t\t\t *\n\t\t\t *\t// Output the documents URL query string\n\t\t\t *\tconsole.log($(document).jurlp(\"query\").toString());\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t **/\n\n\t\t\t\"query\" : function ( query )\n\t\t\t{\n\t\t\t\treturn dispatchGetSetHelper.apply ( this, [ helpers.getQuery, helpers.setQuery, arguments ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: path\n\t\t\t *\n\t\t\t *\tGet/Set the path segment of the URL for the given element(s).\n\t\t\t *\n\t\t\t *\tParameters:\n\t\t\t *\n\t\t\t *\tthis - See <this parameter>.\n\t\t\t *\n\t\t\t *\tpath - If present, specifies the new path to set. Otherwise the function will get the path object from each elements URL.\n\t\t\t *\n\t\t\t *\tA quick guide to paths:\n\t\t\t *\n\t\t\t *\t- Leading slashes (i.e. \"/index.html\") set the full path.\n\t\t\t *\n\t\t\t *\t- No leading slash (or a \"./\") will append to the existing path.\n\t\t\t *\n\t\t\t *\t- You can use \"../\" to remove elements from the existing path, or the path string you supply (which makes concatinating an existing file path and new path easy, as specifying a leading \"../\" in the new path will remove the file name segment of the existing path).\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tIf a path was specified, then this function returns the array of modified elements for chaining purposes, otherwise it returns an array of URL path objects from each element. Each returned path object can be converted to a string by calling its toString() method.\n\t\t\t *\n\t\t\t *\tExamples:\n\t\t\t *\n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// Parse the document.location.href URL for the path object\n\t\t\t *\t$(document).jurlp(\"path\");\n\t\t\t *\n\t\t\t *\t// Parse all URLs in anchor tags and retrieve their path object\n\t\t\t *\t$(\"a\").jurlp(\"path\");\n\t\t\t *\n\t\t\t *\t// Set a new path for the document\n\t\t\t *\t$(document).jurlp(\"path\", \"/index.html\");\n\t\t\t *\n\t\t\t *\t// Append a path to the document URLs path\n\t\t\t *\t$(document).jurlp(\"path\", \"./file.name\");\n\t\t\t *\n\t\t\t *\t// Append a path to the document URLs path, which removes 2 existing path\n\t\t\t *\t// elements before appending the new path \n\t\t\t *\t$(document).jurlp(\"path\", \"../../folder/file.name\");\n\t\t\t *\n\t\t\t *\t// Update the file name segment of the path in all anchor tags \n\t\t\t *\t// with the new file name.\n\t\t\t *\t$(\"a\").jurlp(\"path\", \"../file.name\");\n\t\t\t *\n\t\t\t *\t// Remove the path in all anchor tags.\n\t\t\t *\t$(\"a\").jurlp(\"path\", \"/\");\n\t\t\t *\n\t\t\t *\t// Output the documents URL path object\n\t\t\t *\tconsole.log($(document).jurlp(\"path\"));\n\t\t\t *\n\t\t\t *\t// Output the documents URL path string\n\t\t\t *\tconsole.log($(document).jurlp(\"path\").toString());\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t **/\n\n\t\t\t\"path\" : function ( path )\n\t\t\t{\n\t\t\t\treturn dispatchGetSetHelper.apply ( this, [ helpers.getPath, helpers.setPath, arguments ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: port\n\t\t\t *\n\t\t\t *\tGet/Set the port segment of the URL for the given element(s).\n\t\t\t *\n\t\t\t *\tParameters:\n\t\t\t *\n\t\t\t *\tthis - See <this parameter>.\n\t\t\t *\n\t\t\t *\tport - If present, specifies the new port to set. Otherwise the function will get the port string from each elements URL.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tIf a port was specified, then this function returns the array of modified elements for chaining purposes, otherwise it returns an array of port strings from each elements URL.\n\t\t\t *\n\t\t\t *\tExamples:\n\t\t\t *\n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// Parse the document.location.href URL for the port\n\t\t\t *\t$(document).jurlp(\"port\");\n\t\t\t *\n\t\t\t *\t// Parse all URLs in anchor tags and retrieve their port\n\t\t\t *\t$(\"a\").jurlp(\"port\");\n\t\t\t *\n\t\t\t *\t// Set a new port for the document\n\t\t\t *\t$(document).jurlp(\"port\", \"8080\");\n\t\t\t *\n\t\t\t *\t// Replace the port in all anchor tags with the new port number\n\t\t\t *\t$(\"a\").jurlp(\"port\", \"8080\");\n\t\t\t *\n\t\t\t *\t// Output the documents URL port\n\t\t\t *\tconsole.log($(document).jurlp(\"port\"));\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t **/\n\n\t\t\t\"port\" : function ( port )\n\t\t\t{\n\t\t\t\treturn dispatchGetSetHelper.apply ( this, [ helpers.getPort, helpers.setPort, arguments ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: host\n\t\t\t *\n\t\t\t *\tGet/Set the host segment of the URL for the given element(s).\n\t\t\t *\n\t\t\t *\tParameters:\n\t\t\t *\n\t\t\t *\tthis - See <this parameter>.\n\t\t\t *\n\t\t\t *\thost - If present, specifies the new host name to set. Otherwise the function will get the host name string from each elements URL.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tIf a host name was specified, then this function returns the array of modified elements for chaining purposes, otherwise it returns an array of host name strings from each elements URL.\n\t\t\t *\n\t\t\t *\tExamples:\n\t\t\t *\n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// Parse the document.location.href URL for the host name\n\t\t\t *\t$(document).jurlp(\"host\");\n\t\t\t *\n\t\t\t *\t// Parse all URLs in anchor tags and retrieve their host name\n\t\t\t *\t$(\"a\").jurlp(\"host\");\n\t\t\t *\n\t\t\t *\t// Set a new host name for the document\n\t\t\t *\t$(document).jurlp(\"host\", \"www.example.com\");\n\t\t\t *\n\t\t\t *\t// Replace the host name in all anchor tags with the new host name\n\t\t\t *\t$(\"a\").jurlp(\"host\", \"www.example.com\");\n\t\t\t *\n\t\t\t *\t// Output the documents URL host name\n\t\t\t *\tconsole.log($(document).jurlp(\"host\"));\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t **/\n\n\t\t\t\"host\" : function ( host )\n\t\t\t{\n\t\t\t\treturn dispatchGetSetHelper.apply ( this, [ helpers.getHost, helpers.setHost, arguments ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: password\n\t\t\t *\n\t\t\t *\tGet/Set the password segment of the URL for the given element(s).\n\t\t\t *\n\t\t\t *\tNote! A password cannot be set on a URL unless a user name has been set first (see <user>).\n\t\t\t *\n\t\t\t *\tParameters:\n\t\t\t *\n\t\t\t *\tthis - See <this parameter>.\n\t\t\t *\n\t\t\t *\tpassword - If present, specifies the new password to set. Otherwise the function will get the password string from each elements URL.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tIf a password was specified, then this function returns the array of modified elements for chaining purposes, otherwise it returns an array of password strings from each elements URL.\n\t\t\t *\n\t\t\t *\tExamples:\n\t\t\t *\n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// Parse all URLs in anchor tags and retrieve their password\n\t\t\t *\t$(\"a\").jurlp(\"password\");\n\t\t\t *\n\t\t\t *\t// Replace the password in all anchor tags with the new password string\n\t\t\t *\t$(\"a\").jurlp(\"password\", \"newpassword\");\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t **/\n\n\t\t\t\"password\" : function ( password )\n\t\t\t{\n\t\t\t\treturn dispatchGetSetHelper.apply ( this, [ helpers.getPassword, helpers.setPassword, arguments ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: user\n\t\t\t *\n\t\t\t *\tGet/Set the user segment of the URL for the given element(s).\n\t\t\t *\n\t\t\t *\tParameters:\n\t\t\t *\n\t\t\t *\tthis - See <this parameter>.\n\t\t\t *\n\t\t\t *\tuser - If present, specifies the new username to set. Otherwise the function will get the username string from each elements URL.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tIf a username was specified, then this function returns the array of modified elements for chaining purposes, otherwise it returns an array of username strings from each elements URL.\n\t\t\t *\n\t\t\t *\tExamples:\n\t\t\t *\n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// Parse all URLs in anchor tags and retrieve their username\n\t\t\t *\t$(\"a\").jurlp(\"user\");\n\t\t\t *\n\t\t\t *\t// Replace the username in all anchor tags with the new username string\n\t\t\t *\t$(\"a\").jurlp(\"username\", \"newusername\");\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t **/\n\n\t\t\t\"user\" : function ( user )\n\t\t\t{\n\t\t\t\treturn dispatchGetSetHelper.apply ( this, [ helpers.getUser, helpers.setUser, arguments ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: scheme\n\t\t\t *\n\t\t\t *\tGet/Set the scheme segment of the URL for the given element(s).\n\t\t\t *\n\t\t\t *\tParameters:\n\t\t\t *\n\t\t\t *\tthis - See <this parameter>.\n\t\t\t *\n\t\t\t *\tscheme - If present, specifies the new scheme. Otherwise the function will get the scheme string from each elements URL.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tIf a scheme string was specified, then this function returns the array of modified elements for chaining purposes, otherwise it returns an array of scheme strings from each elements URL.\n\t\t\t *\n\t\t\t *\tExamples:\n\t\t\t *\n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// Parse the document.location.href URL for the scheme\n\t\t\t *\t$(document).jurlp(\"scheme\");\n\t\t\t *\n\t\t\t *\t// Parse all URLs in anchor tags and retrieve their scheme\n\t\t\t *\t$(\"a\").jurlp(\"scheme\");\n\t\t\t *\n\t\t\t *\t// Set a new scheme name for the document\n\t\t\t *\t$(document).jurlp(\"scheme\", \"https://\");\n\t\t\t *\n\t\t\t *\t// Replace the scheme in all anchor tags href attributes\n\t\t\t *\t$(\"a\").jurlp(\"scheme\", \"https://\");\n\t\t\t *\n\t\t\t *\t// Output the documents URL host name\n\t\t\t *\tconsole.log($(document).jurlp(\"scheme\"));\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t **/\n\n\t\t\t\"scheme\" : function ( scheme )\n\t\t\t{\n\t\t\t\treturn dispatchGetSetHelper.apply ( this, [ helpers.getScheme, helpers.setScheme, arguments ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: initialise\n\t\t\t *\n\t\t\t *\tInitialise the parser for the given element(s). HTML anchor elements or the HTML document element need not be explicitly initialised.\n\t\t\t *\t\n\t\t\t *\tElements are initialised as follows;\n\t\t\t *\n\t\t\t *\t$(document) - Initialise the \"data-href\" attribute for the document with the value of \"document.location.href\". The \"data-href\" attribute will be modified instead of \"document.location.href\" when modifying this element. See <Parsing document.location.href>.\n\t\t\t *\n\t\t\t *\tElements with \"href\"/\"src\" attributes - An attribute named \"data-original-href\" or \"data-original-src\" is created to store a copy of the elements original \"href\"/\"src\" attribute at the time of initialisation. See <Parsing elements with an href or src attribute>.\n\t\t\t *\n\t\t\t *\tAll other elements - Parses the element HTML for URLs, wraps any URLs found in an anchor tag, and returns all anchor elements.\n\t\t\t *\n\t\t\t *\tParameters:\n\t\t\t *\n\t\t\t *\tthis - See <this parameter>.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\t\n\t\t\t *\tArray of initialised elements (minus the parent container element).\n\t\t\t *\n\t\t\t *\tExamples:\n\t\t\t *\n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// Not necessary\n\t\t\t *\t$(document).jurlp();\n\t\t\t *\n\t\t\t *\t// Not necessary\n\t\t\t *\t$(\"a\").jurlp();\n\t\t\t *\n\t\t\t *\t// Parse the HTML for URLs, and convert all URLs found in the\n\t\t\t *\t// text to anchors tags, and return the anchor elements.\n\t\t\t *\t$(\"<div>www.example.com</div>\").jurlp();\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"initialise\" : function ( )\n\t\t\t{\n\t\t\t\tvar me = this;\n\n\t\t\t\t/* Attempt to initialise the element as a text field. */ \n\n\t\t\t\tvar elements = [ ];\n\n\t\t\t\telements = initialiseElementText.apply ( $( this ) );\n\n\t\t\t\tif ( elements != null )\n\t\t\t\t{\n\t\t\t\t\t/* Initialise and return all created anchor elements, and remove the parent element from the array */ \n\n\t\t\t\t\treturn returnEachElement.apply ( this.filter ( function ( ) { return $( this ).get ( 0 ) != $( me ).get ( 0 ); } ).add ( elements ), [ initialiseElement ] );\n\t\t\t\t}\n\n\t\t\t\t/* Initialise the element directly */ \n\n\t\t\t\treturn returnEachElement.apply ( me, [ initialiseElement ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: restore\n\t\t\t *\n\t\t\t *\tRemoves any parser data associated with the element(s), and sets the href attribute to its original value.\n\t\t\t *\n\t\t\t *\t$(document) - Removes the \"data-href\" attribute.\n\t\t\t *\n\t\t\t *\tElements with \"href\"/\"src\" - Restores the \"href\"/\"src\" attribute to the \"data-original-href/src\" attribute value, and removes any other added attributes.\n\t\t\t *\n\t\t\t *\tAll other elements - Currently there is no way to restore an elements HTML which has been converted by the parser, so consider saving it first if needed!\n\t\t\t *\n\t\t\t *\tParameters:\n\t\t\t *\n\t\t\t *\tthis - See <this parameter>.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tArray of elements which were restored for chaining purposes.\n\t\t\t *\n\t\t\t * \tExamples:\n\t\t\t * \n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// Restore the working URL for the document.\n\t\t\t *\t$(document).jurlp(\"restore\");\n\t\t\t *\n\t\t\t *\t// Restore the URL for all anchor elements.\n\t\t\t *\t$(\"a\").jurlp(\"restore\");\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"restore\" : function ( )\n\t\t\t{\n\t\t\t\treturn returnEachElement.apply ( this, [ restoreElement ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: goto\n\t\t\t *\n\t\t\t *\tSet document.location.href to the supplied elements \"href\", \"src\" or \"data-href\" attribute value.\n\t\t\t *\n\t\t\t *\tParameters:\n\t\t\t *\n\t\t\t *\tthis - See <this parameter>.\n\t\t\t *\n\t\t\t *\tExamples:\n\t\t\t *\n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// Goto the documents URL.\n\t\t\t *\t$(document).jurlp(\"goto\");\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"goto\" : function ( )\n\t\t\t{\n\t\t\t\tdocument.location.href = getHref.apply ( this );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: proxy\n\t\t\t *\n\t\t\t *\tProxy the URL. The elements URL will be replaced with the proxy URL, and the original URL will be encapsulated under the query string using the parameter name specified.\n\t\t\t *\n\t\t\t *\tParameters:\n\t\t\t *\n\t\t\t *\tthis - See <this parameter>.\n\t\t\t *\n\t\t\t *\turl - The proxy URL.\n\t\t\t *\n\t\t\t *\tparameter - The name of the query string parameter to encapsulate the original URL in.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tArray of modified elements for chaining purposes.\n\t\t\t *\n\t\t\t *\tExamples:\n\t\t\t *\n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// Proxy all URLs in anchor tags to www.example.com\n\t\t\t *\t// URL becomes \"http://www.example.com/?url=<original URL>\"\n\t\t\t *\t$(\"a\").jurlp(\"proxy\", \"http://www.example.com\", \"url\");\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t **/\n\n\t\t\t\"proxy\" : function ( url, parameter )\n\t\t\t{\n\t\t\t\tvar elementUrl = getHref.apply ( this );\n\t\t\t\tvar query = { };\n\n\t\t\t\tsetHref.apply ( this, [ objectToUrl ( getUrlObject ( url ) ) ] );\n\n\t\t\t\tquery [ parameter ] = elementUrl;\n\n\t\t\t\thelpers.setQuery.apply ( this, [ query ] );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tfunction: watch\n\t\t\t *\n\t\t\t *\tAutomatically apply all modifications to new elements added to the DOM that match the selector for the supplied elements. This allows URL filters/modifications that have been applied to existing elements to be propogated to new elements if the page content is being modified (i.e. inserting new anchor tags via AJAX).\n\t\t\t *\n\t\t\t *\tOverview:\n\t\t\t *\n\t\t\t *\tWatch will monitor the selector of the supplied elements via a DOM node listener to detect when new elements are inserted. For each new element that is inserted, any prior filters or modifications made to URLs with the same selector will be applied, and the watcher will be alerted via a callback.\n\t\t\t *\n\t\t\t *\tNote! It is not possible to call watch more than once for the same selector. To do this, try naming the selector differently, i.e. instead of \"a\", use \"a:not(uniqueid)\", where \"uniqueid\" is a nice lengthy descriptive name!\n\t\t\t *\n\t\t\t *\tTo stop watching for updates on a selecter, use <unwatch>.\n\t\t\t *\n\t\t\t *\tParameters:\n\t\t\t *\n\t\t\t *\tthis - Array of elements to obtain the selector from. See <this parameter>.\n\t\t\t *\n\t\t\t *\tcallback - Function to call when elements are found, which is supplied two arguments, the new element that was inserted into the DOM, and the selector that triggered the watch.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tArray of unmodified elements for chaining purposes.\n\t\t\t *\n\t\t\t *\tExamples:\n\t\t\t *\n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// Add a watch on the first anchor element, and if the host name is \n\t\t\t *\t// \"www.example.com\", set the URL query string to \"found=example\".\n\t\t\t *\t// The \"filter\" and \"query\" calls will also be applied to all new elements that \n\t\t\t *\t// watch discovers!..\n\t\t\t *\t$(\"a:eq(0)\").jurlp(\"watch\", function(element, selector){\n\t\t\t *\t\t// If we get here, the first anchor element has changed to a URL containing \n\t\t\t *\t\t// \"www.example.com\" and now contains \"found=example\" in the query string.\n\t\t\t *\t\t// Dump the URL object to prove it!\n\t\t\t *\t\tconsole.log($(element).jurlp(\"url\"));\n\t\t\t *\t}).jurlp(\"filter\", \"host\", \"=\", \"www.example.com\")\n\t\t\t *\t  .jurlp(\"query\",{\"found\":\"example\"});\n\t\t\t *\n\t\t\t *\t//\tPrepend a new anchor tag to the page. This will trigger the watch on the \n\t\t\t *\t//\t\"a:eq(0)\" selector, which will apply all prior calls to this selector, \n\t\t\t *\t//\tso in this instance:\n\t\t\t *\t//\t- First perform the filter host, to ensure the host name is \"www.example.com\".\n\t\t\t *\t//\t- If the host name matches, update the URL query string with \"found=example\").\n\t\t\t *\t// If the host name does not match, then the query string will not be set.\n\t\t\t *\n\t\t\t *\t$(\"body\").prepend ( \"<a href='http://www.example.com/'></a>\" );\n\t\t\t *\n\t\t\t *\t// Stop watching for updates on the \"a:eq(0)\" selector. \n\t\t\t *\t// The \"a:eq(0)\" selector can now be watched on again.\n\t\t\t *\t$(\"a:eq(0)\").jurlp(\"unwatch\");\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t *\t- Watching the \"same selector\":\n\t\t\t *\n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// As an arbitrary example, we want to modify the query string on all existing \n\t\t\t *\t// facebook/twitter URLs, and then watch the \"a\" selector for all new \n\t\t\t *\t// facebook/twitter URLs that appear, and apply the new query string to those too:\n\t\t\t *\n\t\t\t *\t// THIS WILL NOT WORK!: \n\t\t\t *\t$(\"a\").jurlp(\"watch\").\n\t\t\t *\t      .jurlp(\"filter\", \"host\", \"=\", \"www.facebook.com\").\n\t\t\t *\t      .jurlp(\"query\",{\"found\":\"facebook\"});\n\t\t\t *\n\t\t\t *\t// This call will fail, as the \"a\" selector is now watched.\n\t\t\t *\t$(\"a\").jurlp(\"watch\").\n\t\t\t *\t      .jurlp(\"filter\", \"host\", \"=\", \"www.twitter.com\")\n\t\t\t *\t      .jurlp(\"query\",{\"found\":\"twitter\"});\n\t\t\t *\n\t\t\t *\t// THIS WILL WORK!: \n\t\t\t *\t$(\"a:not(facebook)\").jurlp(\"watch\").\n\t\t\t *\t                    .jurlp(\"filter\", \"host\", \"=\", \"www.facebook.com\")\n\t\t\t *\t                    .jurlp(\"query\",{\"found\":\"facebook\"});\n\t\t\t *\n\t\t\t *\t$(\"a:not(twitter)\").jurlp(\"watch\")\n\t\t\t *\t                   .jurlp(\"filter\", \"host\", \"=\", \"www.twitter.com\")\n\t\t\t *\t                   .jurlp(\"query\",{\"found\":\"twitter\"});\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t **/\n\n\t\t\t\"watch\" : function ( callback )\n\t\t\t{\n\t\t\t\t/* Get the current selector */ \n\n\t\t\t\tvar selector = this.selector;\n\n\t\t\t\t/* Has this selector been initialised? */ \n\n\t\t\t\tif ( selectorCallStack [ currentSelector ] == null )\n\t\t\t\t{\n\t\t\t\t\t/* Initialise the selector callstack */ \n\n\t\t\t\t\tselectorCallStack [ currentSelector ] = [ ];\n\n\t\t\t\t\t/* Monitor the DOM for new nodes being inserted */ \n\n\t\t\t\t\t$( document ).bind\n\t\t\t\t\t(\n\t\t\t\t\t\t\"DOMNodeInserted\",\n\t\t\t\t\t\tfunction DOMListener ( event )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t/* Has the selector been unwatched? */ \n\n\t\t\t\t\t\t\tif ( selectorCallStack [ selector ] == null )\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t/* Remove the DOM listener for the specific selector */ \n\n\t\t\t\t\t\t\t\t$( document ).unbind ( \"DOMNodeInserted\", DOMListener );\n\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t/* Does this element belong to the current selector? */ \n\n\t\t\t\t\t\t\tvar target = $( event.target ).filter ( selector );\n\n\t\t\t\t\t\t\tif ( target.get ( 0 ) == null )\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t/* Or is it a child */ \n\n\t\t\t\t\t\t\t\ttarget = $( event.target ).find ( selector );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t/* Ensure we have a target to modify, and that we are allowed to watch it (the \".jurlp-no-watch\" class is present on elements created in initialiseElementText()). */ \n\n\t\t\t\t\t\t\tif ( target.length > 0 && target.is ( \".jurlp-no-watch\" ) == false )\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar filtered = false;\n\n\t\t\t\t\t\t\t\t/* Mark the element as being watched */ \n\n\t\t\t\t\t\t\t\ttarget.data ( \"is-watched\", true );\n\n\t\t\t\t\t\t\t\t/* Apply the selector callstack for this element */ \n\n\t\t\t\t\t\t\t\tfor ( var i = 0, l = selectorCallStack [ selector ].length; i < l; i++ )\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t/* Run the selector callback to update the element */ \n\n\t\t\t\t\t\t\t\t\tvar output = selectorCallStack [ selector ] [ i ] [ 0 ].apply ( target, selectorCallStack [ selector ] [ i ] [ 1 ] );\n\n\t\t\t\t\t\t\t\t\t/* Has the element been filtered out? */ \n\n\t\t\t\t\t\t\t\t\tif ( output != null && output.length == 0 )\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t/* This element has been filtered, perform no further modifications */\n\n\t\t\t\t\t\t\t\t\t\tfiltered = true;\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t/* Was the element not filtered out, and a user callback specified? */ \n\n\t\t\t\t\t\t\t\tif ( filtered == false && typeof callback == \"function\" )\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t/* Call the user callback for each element found in the watch */ \n\n\t\t\t\t\t\t\t\t\ttarget.each ( function ( ){ callback ( $(this), selector ) } );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: unwatch\n\t\t\t *\n\t\t\t *\tRemoves a watch previously created with <watch>, and prevents modifications being made to new elemenets of the same selector. This will also clear the list of modifications for the selector, and the selector is free to use in a sebsequent call to <watch>.\n\t\t\t *\n\t\t\t *\tParameters:\n\t\t\t *\n\t\t\t *\tthis - Array of elements to obtain the selector from.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tArray of unmodified elements for chaining purposes.\n\t\t\t *\n\t\t\t *\tExamples:\n\t\t\t *\n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// Create a watch on the \"a\" selector\n\t\t\t *\t$(\"a\").jurlp(\"watch\");\n\t\t\t *\n\t\t\t *\t// Remove the watch on the \"a\" selector\n\t\t\t *\t$(\"a\").jurlp(\"unwatch\");\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t **/\n\n\t\t\t\"unwatch\" : function ( )\n\t\t\t{\n\t\t\t\tselectorCallStack [ this.selector ] = null;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: filter\n\t\t\t *\n\t\t\t *\tFilters elements by URL or URL segment.\n\t\t\t *\n\t\t\t *\tParameters:\n\t\t\t *\n\t\t\t *\tthis - Array of elements to filter. See <this parameter>.\n\t\t\t *\n\t\t\t *\tsegment - The URL segment to filter on (either \"scheme\", \"host\", \"port\", \"path\", \"query\" or \"fragment\"), or \"url\" to filter on the full URL. See <URL overview> for more information.\n\t\t\t *\n\t\t\t *\toperator - The type of filtering to apply (either \"!=\", \"$=\", \"*=\", \"<\", \"<=\", \"=\", \">\", \">=\" or \"^=\"). See <Operators> for more information.\n\t\t\t *\n\t\t\t *\tvalue - The value of the item to filter on.\n\t\t\t *\n\t\t\t *\tReturns:\n\t\t\t *\n\t\t\t *\tFiltered element array for chaining purposes.\n\t\t\t *\n\t\t\t *\tExamples:\n\t\t\t *\n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// Get the URL object for all anchors that match\n\t\t\t *\t// the document URLs host name.\n\t\t\t *\t$(\"a\").jurlp(\"filter\", \"host\", \"=\", $(document).jurlp(\"host\"))\n\t\t\t *\t      .jurlp(\"url\");\n\t\t\t *\n\t\t\t *\t// Get the URL object for all anchors that match \n\t\t\t *\t// the document URLs host, and has a path ending in \".php\".\n\t\t\t *\t$(\"a\").jurlp(\"filter\", \"host\", \"=\", $(document).jurlp(\"host\"))\n\t\t\t *\t      .jurlp(\"filter\", \"path\", \"$=\", \".php\")\n\t\t\t *\t      .jurlp(\"url\");\n\t\t\t *\n\t\t\t *\t// Get the URL object for all anchors whose query \n\t\t\t *\t// string matches the regular expression\n\t\t\t *\t$(\"a\").jurlp(\"filter\", \"query\", \"regex\", /(\\?)/).jurlp(\"url\");\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"filter\" : function ( segment, operator, value )\n\t\t\t{\n\t\t\t\t/* Get an arbitrary URL object */ \n\n\t\t\t\tvar url = uri.parse ( getHref.apply ( this ) );\n\n\t\t\t\t/* Ensure operator is valid */\n\n\t\t\t\tif ( operator == \"==\" )\n\t\t\t\t{\n\t\t\t\t\toperator = \"=\";\n\t\t\t\t}\n\n\t\t\t\t/* Ensure that the segment is valid, and that a filter method exists */ \n\n\t\t\t\tif ( ( segment == \"url\" || url [ segment ] != null ) && helpers.filters [ operator ] != null )\n\t\t\t\t{\n\t\t\t\t\t/* Add the filter to the selectors callstack if watched */ \n\n\t\t\t\t\taddSelectorCallback ( this, methods.filter, [ segment, operator, value ] );\n\n\t\t\t\t\t/* Filter each element */ \n\n\t\t\t\t\treturn this.filter\n\t\t\t\t\t(\n\t\t\t\t\t\tfunction ( )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t/* Get the current elements href */\n\n\t\t\t\t\t\t\tvar url = getHref.apply ( $( this ) );\n\n\t\t\t\t\t\t\tvar actualValue = \"\";\n\n\t\t\t\t\t\t\t/* Get the segment value */ \n\n\t\t\t\t\t\t\tif ( segment != \"url\" )\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t/* Use a segment of the URL */ \n\n\t\t\t\t\t\t\t\tactualValue = uri.parse ( url ) [ segment ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t/* Use the full URL */ \n\n\t\t\t\t\t\t\t\tactualValue = url;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t/* If we are testing port numbers, then convert the actual and user port string to an integer */ \n\n\t\t\t\t\t\t\tif ( segment == \"port\" )\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tactualValue = parseInt ( actualValue, 10 );\n\n\t\t\t\t\t\t\t\tvalue = parseInt ( value, 10 );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/* Perform the filter check */ \n\n\t\t\t\t\t\t\treturn helpers.filters [ operator ].apply ( $( this ), [ actualValue, value ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t *\n\t\t\t *\tFunction: interface\n\t\t\t *\n\t\t\t *\tGet the available methods for the parser interface.\n\t\t\t *\n\t\t\t *\tReturns: \n\t\t\t *\n\t\t\t *\tArray of interface methods.\n\t\t\t *\n\t\t\t *\tExamples:\n\t\t\t *\n\t\t\t *\t(start code)\n\t\t\t *\n\t\t\t *\t// Return all methods exposed by the URL parser interface.\n\t\t\t *\t$.fn.jurlp ( \"interface\" );\n\t\t\t *\n\t\t\t *\t(end code)\n\t\t\t *\n\t\t\t **/ \n\n\t\t\t\"interface\" : function ( )\n\t\t\t{\n\t\t\t\treturn methods;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\tSection: JQuery plugin interface.\n\t\t *\n\t\t *\tFunction: $.fn.jurlp\n\t\t *\n\t\t *\tPublic interface/method dispatcher for the JQuery URL parser.\n\t\t *\n\t\t *\tSee <Public interface> for more information on the available methods.\n\t\t *\n\t\t *\tSee <initialise> for more specific information on how elements are initialised by the parser.\n\t\t *\n\t\t *\tParameters:\n\t\t *\n\t\t *\tthis - Element(s) to process. See <this parameter>.\n\t\t *\n\t\t *\tmethod - See <Public interface> for an overview of available methods and arguments.\n\t\t *\n\t\t *\targuments - Method arguments.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tEither an array of elements for chaining purposes, or array of specific values, depending on the method called.\n\t\t *\n\t\t **/ \n\n\t\t$.fn.jurlp = function ( method )\n\t\t{\n\t\t\t/* If the current selector isn't part of a filter... */ \n\n\t\t\tif ( this.selector.indexOf ( \".filter\" ) == -1 )\n\t\t\t{\n\t\t\t\t/* Set the global current selector */ \n\n\t\t\t\tcurrentSelector = this.selector;\n\t\t\t}\n\n\t\t\t/* Ensure all elements are initialised with a \"data-href\". */ \n\n\t\t\treturnEachElement.apply ( this, [ initialiseElement ] );\n\n\t\t\t/* Dispatch to the relevant method */ \n\n\t\t\treturn methodDispatcher.apply ( this, arguments );\n\t\t};\n\n\t\t/**\n\t\t *\n\t\t *\n\t\t *\tFunction: $.jurlp\n\t\t *\n\t\t *\tReturns an interface for directly parsing, manipulating and monitoring the supplied URL.\n\t\t *\n\t\t *\tParameters:\n\t\t *\n\t\t *\turl - The URL string to provide a URL parser interface for. Defaults to document.location.href if no URL is supplied.\n\t\t *\n\t\t *\tReturns:\n\t\t *\n\t\t *\tThe URL parser interface for the given URL.\n\t\t *\n\t\t *\tMembers:\n\t\t *\n\t\t *\thref - The URL string.\n\t\t *\n\t\t *\tMethods:\n\t\t *\n\t\t *\turl - See <url>.\n\t\t *\n\t\t *\tscheme - See <scheme>.\n\t\t *\n\t\t *\tuser - See <user>.\n\t\t *\n\t\t *\tpassword - See <password>.\n\t\t *\n\t\t *\thost - See <host>.\n\t\t *\n\t\t *\tport - See <port>.\n\t\t *\n\t\t *\tpath - See <path>.\n\t\t *\n\t\t *\tquery - See <query>.\n\t\t *\n\t\t *\tfragment - See <fragment>.\n\t\t *\n\t\t *\tproxy - See <proxy>.\n\t\t *\n\t\t *\tgoto - See <goto>.\n\t\t *\n\t\t *\twatch - Sets a watch for all \"href\" and \"src\" attributes containing the URLs hostname (selector is \"[href*=\"host\"],[src*=\"host\"]\" where host is this.host()), and returns all elements of the same selector for chaining purposes. See <watch> for more information.\n\t\t *\n\t\t *\tunwatch - Removes a watch created for the current URLs hostname. See <unwatch>.\n\t\t *\n\t\t *\tExamples:\n\t\t *\n\t\t *\tSee <Parsing URL strings directly>.\n\t\t *\n\t\t **/\n\n\t\t$.jurlp = function ( url )\n\t\t{\n\t\t\t/* Create an object for manipulating the url, or document.location.href if null. */ \n\n\t\t\treturn {\n\t\t\t\thref : url || document.location.href,\n\t\t\t\turl : methods.url,\n\t\t\t\tscheme : methods.scheme,\n\t\t\t\tuser : methods.user,\n\t\t\t\tpassword : methods.password,\n\t\t\t\thost : methods.host,\n\t\t\t\tport : methods.port,\n\t\t\t\tpath : methods.path,\n\t\t\t\tquery : methods.query,\n\t\t\t\tfragment : methods.fragment,\n\t\t\t\tproxy : methods.proxy,\n\t\t\t\t\"goto\" : methods [ \"goto\" ],\n\t\t\t\twatch : function ( callback )\n\t\t\t\t{\n\t\t\t\t\t/* Get the current host name */ \n\n\t\t\t\t\tvar host = this.host ( );\n\n\t\t\t\t\t/* Set a watch on the href or src selectors */ \n\n\t\t\t\t\treturn $( \"[href*=\\\"\" + host + \"\\\"],[src*=\\\"\" + host + \"\\\"]\" ).jurlp ( \"watch\", callback );\n\t\t\t\t},\n\t\t\t\tunwatch : function ( )\n\t\t\t\t{\n\t\t\t\t\t/* Get the current host name */ \n\n\t\t\t\t\tvar host = this.host ( );\n\n\t\t\t\t\t/* Set a watch on the href or src selectors */ \n\n\t\t\t\t\treturn $( \"[href*=\\\"\" + host + \"\\\"],[src*=\\\"\" + host + \"\\\"]\" ).jurlp ( \"unwatch\" );\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t}\n) ( jQuery );\n","/*\n *\tjQuery elevateZoom 3.0.8\n *\tDemo's and documentation:\n *\twww.elevateweb.co.uk/image-zoom\n *\n *\tCopyright (c) 2012 Andrew Eades\n *\twww.elevateweb.co.uk\n *\n *\tDual licensed under the GPL and MIT licenses.\n *\thttp://en.wikipedia.org/wiki/MIT_License\n *\thttp://en.wikipedia.org/wiki/GNU_General_Public_License\n *\n\n/*\n *\tjQuery elevateZoom 3.0.3\n *\tDemo's and documentation:\n *\twww.elevateweb.co.uk/image-zoom\n *\n *\tCopyright (c) 2012 Andrew Eades\n *\twww.elevateweb.co.uk\n *\n *\tDual licensed under the GPL and MIT licenses.\n *\thttp://en.wikipedia.org/wiki/MIT_License\n *\thttp://en.wikipedia.org/wiki/GNU_General_Public_License\n */\n\n\nif (typeof Object.create !== 'function') {\n    Object.create = function (obj) {\n        function F() { };\n        F.prototype = obj;\n        return new F();\n    };\n}\n\n(function ($, window, document, undefined) {\n    var ElevateZoom = {\n        init: function (options, elem) {\n            var self = this;\n\n            self.elem = elem;\n            self.$elem = $(elem);\n\n            self.options = $.extend({}, $.fn.elevateZoom.options, options);\n\n            if (self.options.imageSrc) {\n                self.imageSrc = self.options.imageSrc;\n            } else if (self.$elem.data(\"zoom-image\")) {\n                self.imageSrc = self.$elem.data(\"zoom-image\");\n            } else {\n                self.imageSrc = self.$elem.attr(\"src\");\n            }\n\n            //TINT OVERRIDE SETTINGS\n            if (self.options.tint) {\n                self.options.lensColour = \"none\", //colour of the lens background\n                    self.options.lensOpacity = \"1\" //opacity of the lens\n            }\n            //INNER OVERRIDE SETTINGS\n            if (self.options.zoomType == \"inner\") { self.options.showLens = false; }\n\n\n            //Remove alt on hover\n\n            self.$elem.parent().removeAttr('title').removeAttr('alt');\n\n            self.zoomImage = self.imageSrc;\n\n            self.refresh(1);\n\n\n\n            //Create the image swap from the gallery \n            $('#' + self.options.gallery + ' a').click(function (e) {\n\n                //Set a class on the currently active gallery image\n                if (self.options.galleryActiveClass) {\n                    $('#' + self.options.gallery + ' a').removeClass(self.options.galleryActiveClass);\n                    $(this).addClass(self.options.galleryActiveClass);\n                }\n                //stop any link on the a tag from working\n                e.preventDefault();\n\n                //call the swap image function            \n                if ($(this).data(\"zoom-image\")) { self.zoomImagePre = $(this).data(\"zoom-image\") }\n                else { self.zoomImagePre = $(this).data(\"image\"); }\n                self.swaptheimage($(this).data(\"image\"), self.zoomImagePre);\n                return false;\n            });\n\n        },\n\n        refresh: function (length) {\n            var self = this;\n\n            setTimeout(function () {\n                self.fetch(self.imageSrc);\n\n            }, length || self.options.refresh);\n        },\n\n        fetch: function (imgsrc) {\n            //get the image\n            var self = this;\n            var newImg = new Image();\n            newImg.onload = function () {\n                //set the large image dimensions - used to calculte ratio's\n                self.largeWidth = newImg.width;\n                self.largeHeight = newImg.height;\n                //once image is loaded start the calls\n                self.startZoom();\n                self.currentImage = self.imageSrc;\n                //let caller know image has been loaded\n                self.options.onZoomedImageLoaded(self.$elem);\n            }\n            newImg.src = imgsrc; // this must be done AFTER setting onload\n\n            return;\n\n        },\n\n        startZoom: function () {\n            var self = this;\n            //get dimensions of the non zoomed image\n            self.nzWidth = self.$elem.width();\n            self.nzHeight = self.$elem.height();\n\n            //activated elements\n            self.isWindowActive = false;\n            self.isLensActive = false;\n            self.isTintActive = false;\n            self.overWindow = false;\n\n            //CrossFade Wrappe\n            if (self.options.imageCrossfade) {\n                self.zoomWrap = self.$elem.wrap('<div style=\"height:' + self.nzHeight + 'px;width:' + self.nzWidth + 'px;\" class=\"zoomWrapper\" />');\n                self.$elem.css('position', 'absolute');\n            }\n\n            self.zoomLock = 1;\n            self.scrollingLock = false;\n            self.changeBgSize = false;\n            self.currentZoomLevel = self.options.zoomLevel;\n\n\n            //get offset of the non zoomed image\n            self.nzOffset = self.$elem.offset();\n            //calculate the width ratio of the large/small image\n            self.widthRatio = (self.largeWidth / self.currentZoomLevel) / self.nzWidth;\n            self.heightRatio = (self.largeHeight / self.currentZoomLevel) / self.nzHeight;\n\n\n            //if window zoom        \n            if (self.options.zoomType == \"window\") {\n                self.zoomWindowStyle = \"overflow: hidden;\"\n                    + \"background-position: 0px 0px;text-align:center;\"\n                    + \"background-color: \" + String(self.options.zoomWindowBgColour)\n                    + \";width: \" + String(self.options.zoomWindowWidth) + \"px;\"\n                    + \"height: \" + String(self.options.zoomWindowHeight)\n                    + \"px;float: left;\"\n                    + \"background-size: \" + self.largeWidth / self.currentZoomLevel + \"px \" + self.largeHeight / self.currentZoomLevel + \"px;\"\n                    + \"display: none;z-index:100;\"\n                    + \"border: \" + String(self.options.borderSize)\n                    + \"px solid \" + self.options.borderColour\n                    + \";background-repeat: no-repeat;\"\n                    + \"position: absolute;\";\n            }\n\n\n            //if inner  zoom    \n            if (self.options.zoomType == \"inner\") {\n                //has a border been put on the image? Lets cater for this\n\n                var borderWidth = self.$elem.css(\"border-left-width\");\n\n                self.zoomWindowStyle = \"overflow: hidden;\"\n                    + \"margin-left: \" + String(borderWidth) + \";\"\n                    + \"margin-top: \" + String(borderWidth) + \";\"\n                    + \"background-position: 0px 0px;\"\n                    + \"width: \" + String(self.nzWidth) + \"px;\"\n                    + \"height: \" + String(self.nzHeight) + \"px;\"\n                    + \"px;float: left;\"\n                    + \"display: none;\"\n                    + \"cursor:\" + (self.options.cursor) + \";\"\n                    + \"px solid \" + self.options.borderColour\n                    + \";background-repeat: no-repeat;\"\n                    + \"position: absolute;\";\n            }\n\n\n\n            //lens style for window zoom\n            if (self.options.zoomType == \"window\") {\n\n\n                // adjust images less than the window height\n\n                if (self.nzHeight < self.options.zoomWindowWidth / self.widthRatio) {\n                    lensHeight = self.nzHeight;\n                }\n                else {\n                    lensHeight = String((self.options.zoomWindowHeight / self.heightRatio))\n                }\n                if (self.largeWidth < self.options.zoomWindowWidth) {\n                    lensWidth = self.nzWidth;\n                }\n                else {\n                    lensWidth = (self.options.zoomWindowWidth / self.widthRatio);\n                }\n\n\n                self.lensStyle = \"background-position: 0px 0px;width: \" + String((self.options.zoomWindowWidth) / self.widthRatio) + \"px;height: \" + String((self.options.zoomWindowHeight) / self.heightRatio)\n                    + \"px;float: right;display: none;\"\n                    + \"overflow: hidden;\"\n                    + \"z-index: 999;\"\n                    + \"-webkit-transform: translateZ(0);\"\n                    + \"opacity:\" + (self.options.lensOpacity) + \";filter: alpha(opacity = \" + (self.options.lensOpacity * 100) + \"); zoom:1;\"\n                    + \"width:\" + lensWidth + \"px;\"\n                    + \"height:\" + lensHeight + \"px;\"\n                    + \"background-color:\" + (self.options.lensColour) + \";\"\n                    + \"cursor:\" + (self.options.cursor) + \";\"\n                    + \"border: \" + (self.options.lensBorderSize) + \"px\" +\n                    \" solid \" + (self.options.lensBorderColour) + \";background-repeat: no-repeat;position: absolute;\";\n            }\n\n\n            //tint style\n            self.tintStyle = \"display: block;\"\n                + \"position: absolute;\"\n                + \"background-color: \" + self.options.tintColour + \";\"\n                + \"filter:alpha(opacity=0);\"\n                + \"opacity: 0;\"\n                + \"width: \" + self.nzWidth + \"px;\"\n                + \"height: \" + self.nzHeight + \"px;\"\n\n                ;\n\n            //lens style for lens zoom with optional round for modern browsers\n            self.lensRound = '';\n\n            if (self.options.zoomType == \"lens\") {\n\n                self.lensStyle = \"background-position: 0px 0px;\"\n                    + \"float: left;display: none;\"\n                    + \"border: \" + String(self.options.borderSize) + \"px solid \" + self.options.borderColour + \";\"\n                    + \"width:\" + String(self.options.lensSize) + \"px;\"\n                    + \"height:\" + String(self.options.lensSize) + \"px;\"\n                    + \"background-repeat: no-repeat;position: absolute;\";\n\n\n            }\n\n\n            //does not round in all browsers\n            if (self.options.lensShape == \"round\") {\n                self.lensRound = \"border-top-left-radius: \" + String(self.options.lensSize / 2 + self.options.borderSize) + \"px;\"\n                    + \"border-top-right-radius: \" + String(self.options.lensSize / 2 + self.options.borderSize) + \"px;\"\n                    + \"border-bottom-left-radius: \" + String(self.options.lensSize / 2 + self.options.borderSize) + \"px;\"\n                    + \"border-bottom-right-radius: \" + String(self.options.lensSize / 2 + self.options.borderSize) + \"px;\";\n\n            }\n\n            //create the div's                                                + \"\"\n            //self.zoomContainer = $('<div/>').addClass('zoomContainer').css({\"position\":\"relative\", \"height\":self.nzHeight, \"width\":self.nzWidth});\n\n            self.zoomContainer = $('<div class=\"zoomContainer\" style=\"-webkit-transform: translateZ(0);position:fixed;left:' + self.nzOffset.left + 'px;top:' + self.nzOffset.top + 'px;height:' + self.nzHeight + 'px;width:' + self.nzWidth + 'px;\"></div>');\n            //$('body').append(self.zoomContainer);\n            self.$elem.after(self.zoomContainer);\n\n\n            //this will add overflow hidden and contrain the lens on lens mode       \n            if (self.options.containLensZoom && self.options.zoomType == \"lens\") {\n                self.zoomContainer.css(\"overflow\", \"hidden\");\n            }\n            if (self.options.zoomType != \"inner\") {\n                self.zoomLens = $(\"<div class='zoomLens' style='\" + self.lensStyle + self.lensRound + \"'>&nbsp;</div>\")\n                    .appendTo(self.zoomContainer)\n                    .click(function () {\n                        self.$elem.trigger('click');\n                    });\n\n\n                if (self.options.tint) {\n                    self.tintContainer = $('<div/>').addClass('tintContainer');\n                    self.zoomTint = $(\"<div class='zoomTint' style='\" + self.tintStyle + \"'></div>\");\n\n\n                    self.zoomLens.wrap(self.tintContainer);\n\n\n                    self.zoomTintcss = self.zoomLens.after(self.zoomTint);\n\n                    //if tint enabled - set an image to show over the tint\n\n                    self.zoomTintImage = $('<img style=\"position: absolute; left: 0px; top: 0px; max-width: none; width: ' + self.nzWidth + 'px; height: ' + self.nzHeight + 'px;\" src=\"' + self.imageSrc + '\">')\n                        .appendTo(self.zoomLens)\n                        .click(function () {\n\n                            self.$elem.trigger('click');\n                        });\n\n                }\n\n            }\n\n\n\n\n\n\n\n            //create zoom window \n            if (isNaN(self.options.zoomWindowPosition)) {\n                self.zoomWindow = $(\"<div style='z-index:999;left:\" + (self.windowOffsetLeft) + \"px;top:\" + (self.windowOffsetTop) + \"px;\" + self.zoomWindowStyle + \"' class='zoomWindow'>&nbsp;</div>\")\n                    .appendTo('body')\n                    .click(function () {\n                        self.$elem.trigger('click');\n                    });\n            } else {\n                self.zoomWindow = $(\"<div style='z-index:999;left:\" + (self.windowOffsetLeft) + \"px;top:\" + (self.windowOffsetTop) + \"px;\" + self.zoomWindowStyle + \"' class='zoomWindow'>&nbsp;</div>\")\n                    .appendTo(self.zoomContainer)\n                    .click(function () {\n                        self.$elem.trigger('click');\n                    });\n            }\n            self.zoomWindowContainer = $('<div/>').addClass('zoomWindowContainer').css(\"width\", self.options.zoomWindowWidth);\n            self.zoomWindow.wrap(self.zoomWindowContainer);\n\n\n            //  self.captionStyle = \"text-align: left;background-color: black;color: white;font-weight: bold;padding: 10px;font-family: sans-serif;font-size: 11px\";                                                                                                                                                                                                                                          \n            // self.zoomCaption = $('<div class=\"elevatezoom-caption\" style=\"'+self.captionStyle+'display: block; width: 280px;\">INSERT ALT TAG</div>').appendTo(self.zoomWindow.parent());\n\n            if (self.options.zoomType == \"lens\") {\n                self.zoomLens.css({ backgroundImage: \"url('\" + self.imageSrc + \"')\" });\n            }\n            if (self.options.zoomType == \"window\") {\n                self.zoomWindow.css({ backgroundImage: \"url('\" + self.imageSrc + \"')\" });\n            }\n            if (self.options.zoomType == \"inner\") {\n                self.zoomWindow.css({ backgroundImage: \"url('\" + self.imageSrc + \"')\" });\n            }\n            /*-------------------END THE ZOOM WINDOW AND LENS----------------------------------*/\n            //touch events\n            self.$elem.bind('touchmove', function (e) {\n                e.preventDefault();\n                var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];\n                self.setPosition(touch);\n\n            });\n            self.zoomContainer.bind('touchmove', function (e) {\n                if (self.options.zoomType == \"inner\") {\n                    self.showHideWindow(\"show\");\n\n                }\n                e.preventDefault();\n                var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];\n                self.setPosition(touch);\n\n            });\n            self.zoomContainer.bind('touchend', function (e) {\n                self.showHideWindow(\"hide\");\n                if (self.options.showLens) { self.showHideLens(\"hide\"); }\n                if (self.options.tint && self.options.zoomType != \"inner\") { self.showHideTint(\"hide\"); }\n            });\n\n            self.$elem.bind('touchend', function (e) {\n                self.showHideWindow(\"hide\");\n                if (self.options.showLens) { self.showHideLens(\"hide\"); }\n                if (self.options.tint && self.options.zoomType != \"inner\") { self.showHideTint(\"hide\"); }\n            });\n            if (self.options.showLens) {\n                self.zoomLens.bind('touchmove', function (e) {\n\n                    e.preventDefault();\n                    var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];\n                    self.setPosition(touch);\n                });\n\n\n                self.zoomLens.bind('touchend', function (e) {\n                    self.showHideWindow(\"hide\");\n                    if (self.options.showLens) { self.showHideLens(\"hide\"); }\n                    if (self.options.tint && self.options.zoomType != \"inner\") { self.showHideTint(\"hide\"); }\n                });\n            }\n            //Needed to work in IE\n            self.$elem.bind('mousemove', function (e) {\n                if (self.overWindow == false) { self.setElements(\"show\"); }\n                //make sure on orientation change the setposition is not fired\n                if (self.lastX !== e.clientX || self.lastY !== e.clientY) {\n                    self.setPosition(e);\n                    self.currentLoc = e;\n                }\n                self.lastX = e.clientX;\n                self.lastY = e.clientY;\n\n            });\n\n            self.zoomContainer.bind('mousemove', function (e) {\n\n                if (self.overWindow == false) { self.setElements(\"show\"); }\n\n                //make sure on orientation change the setposition is not fired \n                if (self.lastX !== e.clientX || self.lastY !== e.clientY) {\n                    self.setPosition(e);\n                    self.currentLoc = e;\n                }\n                self.lastX = e.clientX;\n                self.lastY = e.clientY;\n            });\n            if (self.options.zoomType != \"inner\") {\n                self.zoomLens.bind('mousemove', function (e) {\n                    //make sure on orientation change the setposition is not fired\n                    if (self.lastX !== e.clientX || self.lastY !== e.clientY) {\n                        self.setPosition(e);\n                        self.currentLoc = e;\n                    }\n                    self.lastX = e.clientX;\n                    self.lastY = e.clientY;\n                });\n            }\n            if (self.options.tint && self.options.zoomType != \"inner\") {\n                self.zoomTint.bind('mousemove', function (e) {\n                    //make sure on orientation change the setposition is not fired\n                    if (self.lastX !== e.clientX || self.lastY !== e.clientY) {\n                        self.setPosition(e);\n                        self.currentLoc = e;\n                    }\n                    self.lastX = e.clientX;\n                    self.lastY = e.clientY;\n                });\n\n            }\n            if (self.options.zoomType == \"inner\") {\n                self.zoomWindow.bind('mousemove', function (e) {\n                    //self.overWindow = true;\n                    //make sure on orientation change the setposition is not fired\n                    if (self.lastX !== e.clientX || self.lastY !== e.clientY) {\n                        self.setPosition(e);\n                        self.currentLoc = e;\n                    }\n                    self.lastX = e.clientX;\n                    self.lastY = e.clientY;\n                });\n\n            }\n\n\n            //  lensFadeOut: 500,  zoomTintFadeIn\n            self.zoomContainer.add(self.$elem).mouseenter(function () {\n\n                if (self.overWindow == false) { self.setElements(\"show\"); }\n\n\n            }).mouseleave(function () {\n                if (!self.scrollLock) {\n                    self.setElements(\"hide\");\n                    self.options.onDestroy(self.$elem);\n                }\n            });\n            //end ove image\n\n\n\n\n\n            if (self.options.zoomType != \"inner\") {\n                self.zoomWindow.mouseenter(function () {\n                    self.overWindow = true;\n                    self.setElements(\"hide\");\n                }).mouseleave(function () {\n\n                    self.overWindow = false;\n                });\n            }\n            //end ove image\n\n\n\n            //\t\t\t\tvar delta = parseInt(e.originalEvent.wheelDelta || -e.originalEvent.detail);\n\n            //      $(this).empty();    \n            //    return false;\n\n            //fix for initial zoom setting\n            if (self.options.zoomLevel != 1) {\n                //\tself.changeZoomLevel(self.currentZoomLevel);\n            }\n            //set the min zoomlevel\n            if (self.options.minZoomLevel) {\n                self.minZoomLevel = self.options.minZoomLevel;\n            }\n            else {\n                self.minZoomLevel = self.options.scrollZoomIncrement * 2;\n            }\n\n\n            if (self.options.scrollZoom) {\n\n\n                self.zoomContainer.add(self.$elem).bind('mousewheel DOMMouseScroll MozMousePixelScroll', function (e) {\n\n\n                    //\t\t\t\t\t\tin IE there is issue with firing of mouseleave - So check whether still scrolling\n                    //\t\t\t\t\t\tand on mouseleave check if scrolllock          \n                    self.scrollLock = true;\n                    clearTimeout($.data(this, 'timer'));\n                    $.data(this, 'timer', setTimeout(function () {\n                        self.scrollLock = false;\n                        //do something\n                    }, 250));\n\n                    var theEvent = e.originalEvent.wheelDelta || e.originalEvent.detail * -1\n\n\n                    //this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;\n                    //   e.preventDefault();\n\n\n                    e.stopImmediatePropagation();\n                    e.stopPropagation();\n                    e.preventDefault();\n\n\n                    if (theEvent / 120 > 0) {\n                        //scrolling up\n                        if (self.currentZoomLevel >= self.minZoomLevel) {\n                            self.changeZoomLevel(self.currentZoomLevel - self.options.scrollZoomIncrement);\n                        }\n\n                    }\n                    else {\n                        //scrolling down\n\n\n                        if (self.options.maxZoomLevel) {\n                            if (self.currentZoomLevel <= self.options.maxZoomLevel) {\n                                self.changeZoomLevel(parseFloat(self.currentZoomLevel) + self.options.scrollZoomIncrement);\n                            }\n                        }\n                        else {\n                            //andy \n\n                            self.changeZoomLevel(parseFloat(self.currentZoomLevel) + self.options.scrollZoomIncrement);\n                        }\n\n                    }\n                    return false;\n                });\n            }\n\n\n        },\n        setElements: function (type) {\n            var self = this;\n            if (!self.options.zoomEnabled) { return false; }\n            if (type == \"show\") {\n                if (self.isWindowSet) {\n                    if (self.options.zoomType == \"inner\") { self.showHideWindow(\"show\"); }\n                    if (self.options.zoomType == \"window\") { self.showHideWindow(\"show\"); }\n                    if (self.options.showLens) { self.showHideLens(\"show\"); }\n                    if (self.options.tint && self.options.zoomType != \"inner\") {\n                        self.showHideTint(\"show\");\n                    }\n                }\n            }\n\n            if (type == \"hide\") {\n                if (self.options.zoomType == \"window\") { self.showHideWindow(\"hide\"); }\n                if (!self.options.tint) { self.showHideWindow(\"hide\"); }\n                if (self.options.showLens) { self.showHideLens(\"hide\"); }\n                if (self.options.tint) { self.showHideTint(\"hide\"); }\n            }\n        },\n        setPosition: function (e) {\n\n            var self = this;\n\n            if (!self.options.zoomEnabled) { return false; }\n\n            //recaclc offset each time in case the image moves\n            //this can be caused by other on page elements\n            self.nzHeight = self.$elem.height();\n            self.nzWidth = self.$elem.width();\n            self.nzOffset = self.$elem.offset();\n\n            if (self.options.tint && self.options.zoomType != \"inner\") {\n                self.zoomTint.css({ top: 0 });\n                self.zoomTint.css({ left: 0 });\n            }\n            //set responsive       \n            //will checking if the image needs changing before running this code work faster?\n            if (self.options.responsive && !self.options.scrollZoom) {\n                if (self.options.showLens) {\n                    if (self.nzHeight < self.options.zoomWindowWidth / self.widthRatio) {\n                        lensHeight = self.nzHeight;\n                    }\n                    else {\n                        lensHeight = String((self.options.zoomWindowHeight / self.heightRatio))\n                    }\n                    if (self.largeWidth < self.options.zoomWindowWidth) {\n                        lensWidth = self.nzWidth;\n                    }\n                    else {\n                        lensWidth = (self.options.zoomWindowWidth / self.widthRatio);\n                    }\n                    self.widthRatio = self.largeWidth / self.nzWidth;\n                    self.heightRatio = self.largeHeight / self.nzHeight;\n                    if (self.options.zoomType != \"lens\") {\n\n\n                        //possibly dont need to keep recalcalculating\n                        //if the lens is heigher than the image, then set lens size to image size\n                        if (self.nzHeight < self.options.zoomWindowWidth / self.widthRatio) {\n                            lensHeight = self.nzHeight;\n\n                        }\n                        else {\n                            lensHeight = String((self.options.zoomWindowHeight / self.heightRatio))\n                        }\n\n                        if (self.nzWidth < self.options.zoomWindowHeight / self.heightRatio) {\n                            lensWidth = self.nzWidth;\n                        }\n                        else {\n                            lensWidth = String((self.options.zoomWindowWidth / self.widthRatio));\n                        }\n\n                        self.zoomLens.css('width', lensWidth);\n                        self.zoomLens.css('height', lensHeight);\n\n                        if (self.options.tint) {\n                            self.zoomTintImage.css('width', self.nzWidth);\n                            self.zoomTintImage.css('height', self.nzHeight);\n                        }\n\n                    }\n                    if (self.options.zoomType == \"lens\") {\n\n                        self.zoomLens.css({ width: String(self.options.lensSize) + 'px', height: String(self.options.lensSize) + 'px' })\n\n\n                    }\n                    //end responsive image change\n                }\n            }\n\n            //container fix\n            self.zoomContainer.css({ top: self.nzOffset.top });\n            self.zoomContainer.css({ left: self.nzOffset.left });\n            self.mouseLeft = parseInt(e.pageX - self.nzOffset.left);\n            self.mouseTop = parseInt(e.pageY - self.nzOffset.top);\n            //calculate the Location of the Lens\n\n            //calculate the bound regions - but only if zoom window\n            if (self.options.zoomType == \"window\") {\n                self.Etoppos = (self.mouseTop < (self.zoomLens.height() / 2));\n                self.Eboppos = (self.mouseTop > self.nzHeight - (self.zoomLens.height() / 2) - (self.options.lensBorderSize * 2));\n                self.Eloppos = (self.mouseLeft < 0 + ((self.zoomLens.width() / 2)));\n                self.Eroppos = (self.mouseLeft > (self.nzWidth - (self.zoomLens.width() / 2) - (self.options.lensBorderSize * 2)));\n            }\n            //calculate the bound regions - but only for inner zoom\n            if (self.options.zoomType == \"inner\") {\n                self.Etoppos = (self.mouseTop < ((self.nzHeight / 2) / self.heightRatio));\n                self.Eboppos = (self.mouseTop > (self.nzHeight - ((self.nzHeight / 2) / self.heightRatio)));\n                self.Eloppos = (self.mouseLeft < 0 + (((self.nzWidth / 2) / self.widthRatio)));\n                self.Eroppos = (self.mouseLeft > (self.nzWidth - (self.nzWidth / 2) / self.widthRatio - (self.options.lensBorderSize * 2)));\n            }\n\n            // if the mouse position of the slider is one of the outerbounds, then hide  window and lens\n            if (self.mouseLeft < 0 || self.mouseTop < 0 || self.mouseLeft > self.nzWidth || self.mouseTop > self.nzHeight) {\n                self.setElements(\"hide\");\n                return;\n            }\n            //else continue with operations\n            else {\n\n\n                //lens options\n                if (self.options.showLens) {\n                    //\t\tself.showHideLens(\"show\");\n                    //set background position of lens\n                    self.lensLeftPos = String(Math.floor(self.mouseLeft - self.zoomLens.width() / 2));\n                    self.lensTopPos = String(Math.floor(self.mouseTop - self.zoomLens.height() / 2));\n\n\n                }\n                //adjust the background position if the mouse is in one of the outer regions \n\n                //Top region\n                if (self.Etoppos) {\n                    self.lensTopPos = 0;\n                }\n                //Left Region\n                if (self.Eloppos) {\n                    self.windowLeftPos = 0;\n                    self.lensLeftPos = 0;\n                    self.tintpos = 0;\n                }\n                //Set bottom and right region for window mode\n                if (self.options.zoomType == \"window\") {\n                    if (self.Eboppos) {\n                        self.lensTopPos = Math.max((self.nzHeight) - self.zoomLens.height() - (self.options.lensBorderSize * 2), 0);\n                    }\n                    if (self.Eroppos) {\n                        self.lensLeftPos = (self.nzWidth - (self.zoomLens.width()) - (self.options.lensBorderSize * 2));\n                    }\n                }\n                //Set bottom and right region for inner mode\n                if (self.options.zoomType == \"inner\") {\n                    if (self.Eboppos) {\n                        self.lensTopPos = Math.max(((self.nzHeight) - (self.options.lensBorderSize * 2)), 0);\n                    }\n                    if (self.Eroppos) {\n                        self.lensLeftPos = (self.nzWidth - (self.nzWidth) - (self.options.lensBorderSize * 2));\n                    }\n\n                }\n                //if lens zoom\n                if (self.options.zoomType == \"lens\") {\n                    self.windowLeftPos = String(((e.pageX - self.nzOffset.left) * self.widthRatio - self.zoomLens.width() / 2) * (-1));\n                    self.windowTopPos = String(((e.pageY - self.nzOffset.top) * self.heightRatio - self.zoomLens.height() / 2) * (-1));\n\n                    self.zoomLens.css({ backgroundPosition: self.windowLeftPos + 'px ' + self.windowTopPos + 'px' });\n\n                    if (self.changeBgSize) {\n\n                        if (self.nzHeight > self.nzWidth) {\n                            if (self.options.zoomType == \"lens\") {\n                                self.zoomLens.css({ \"background-size\": self.largeWidth / self.newvalueheight + 'px ' + self.largeHeight / self.newvalueheight + 'px' });\n                            }\n\n                            self.zoomWindow.css({ \"background-size\": self.largeWidth / self.newvalueheight + 'px ' + self.largeHeight / self.newvalueheight + 'px' });\n                        }\n                        else {\n                            if (self.options.zoomType == \"lens\") {\n                                self.zoomLens.css({ \"background-size\": self.largeWidth / self.newvaluewidth + 'px ' + self.largeHeight / self.newvaluewidth + 'px' });\n                            }\n                            self.zoomWindow.css({ \"background-size\": self.largeWidth / self.newvaluewidth + 'px ' + self.largeHeight / self.newvaluewidth + 'px' });\n                        }\n                        self.changeBgSize = false;\n                    }\n\n                    self.setWindowPostition(e);\n                }\n                //if tint zoom   \n                if (self.options.tint && self.options.zoomType != \"inner\") {\n                    self.setTintPosition(e);\n\n                }\n                //set the css background position \n                if (self.options.zoomType == \"window\") {\n                    self.setWindowPostition(e);\n                }\n                if (self.options.zoomType == \"inner\") {\n                    self.setWindowPostition(e);\n                }\n                if (self.options.showLens) {\n\n                    if (self.fullwidth && self.options.zoomType != \"lens\") {\n                        self.lensLeftPos = 0;\n\n                    }\n                    self.zoomLens.css({ left: self.lensLeftPos + 'px', top: self.lensTopPos + 'px' })\n                }\n\n            } //end else\n\n\n\n        },\n        showHideWindow: function (change) {\n            var self = this;\n            if (change == \"show\") {\n                if (!self.isWindowActive) {\n                    if (self.options.zoomWindowFadeIn) {\n                        self.zoomWindow.stop(true, true, false).fadeIn(self.options.zoomWindowFadeIn);\n                    }\n                    else { self.zoomWindow.show(); }\n                    self.isWindowActive = true;\n                }\n            }\n            if (change == \"hide\") {\n                if (self.isWindowActive) {\n                    if (self.options.zoomWindowFadeOut) {\n                        self.zoomWindow.stop(true, true).fadeOut(self.options.zoomWindowFadeOut, function () {\n                            if (self.loop) {\n                                //stop moving the zoom window when zoom window is faded out\n                                clearInterval(self.loop);\n                                self.loop = false;\n                            }\n                        });\n                    }\n                    else { self.zoomWindow.hide(); }\n                    self.isWindowActive = false;\n                }\n            }\n        },\n        showHideLens: function (change) {\n            var self = this;\n            if (change == \"show\") {\n                if (!self.isLensActive) {\n                    if (self.options.lensFadeIn) {\n                        self.zoomLens.stop(true, true, false).fadeIn(self.options.lensFadeIn);\n                    }\n                    else { self.zoomLens.show(); }\n                    self.isLensActive = true;\n                }\n            }\n            if (change == \"hide\") {\n                if (self.isLensActive) {\n                    if (self.options.lensFadeOut) {\n                        self.zoomLens.stop(true, true).fadeOut(self.options.lensFadeOut);\n                    }\n                    else { self.zoomLens.hide(); }\n                    self.isLensActive = false;\n                }\n            }\n        },\n        showHideTint: function (change) {\n            var self = this;\n            if (change == \"show\") {\n                if (!self.isTintActive) {\n\n                    if (self.options.zoomTintFadeIn) {\n                        self.zoomTint.css({ opacity: self.options.tintOpacity }).animate().stop(true, true).fadeIn(\"slow\");\n                    }\n                    else {\n                        self.zoomTint.css({ opacity: self.options.tintOpacity }).animate();\n                        self.zoomTint.show();\n\n\n                    }\n                    self.isTintActive = true;\n                }\n            }\n            if (change == \"hide\") {\n                if (self.isTintActive) {\n\n                    if (self.options.zoomTintFadeOut) {\n                        self.zoomTint.stop(true, true).fadeOut(self.options.zoomTintFadeOut);\n                    }\n                    else { self.zoomTint.hide(); }\n                    self.isTintActive = false;\n                }\n            }\n        },\n        setLensPostition: function (e) {\n\n\n        },\n        setWindowPostition: function (e) {\n            //return obj.slice( 0, count );\n            var self = this;\n\n            if (!isNaN(self.options.zoomWindowPosition)) {\n\n                switch (self.options.zoomWindowPosition) {\n                    case 1: //done         \n                        self.windowOffsetTop = (self.options.zoomWindowOffety);//DONE - 1\n                        self.windowOffsetLeft = (+self.nzWidth); //DONE 1, 2, 3, 4, 16\n                        break;\n                    case 2:\n                        if (self.options.zoomWindowHeight > self.nzHeight) { //positive margin\n\n                            self.windowOffsetTop = ((self.options.zoomWindowHeight / 2) - (self.nzHeight / 2)) * (-1);\n                            self.windowOffsetLeft = (self.nzWidth); //DONE 1, 2, 3, 4, 16\n                        }\n                        else { //negative margin\n\n                        }\n                        break;\n                    case 3: //done        \n                        self.windowOffsetTop = (self.nzHeight - self.zoomWindow.height() - (self.options.borderSize * 2)); //DONE 3,9\n                        self.windowOffsetLeft = (self.nzWidth); //DONE 1, 2, 3, 4, 16\n                        break;\n                    case 4: //done  \n                        self.windowOffsetTop = (self.nzHeight); //DONE - 4,5,6,7,8\n                        self.windowOffsetLeft = (self.nzWidth); //DONE 1, 2, 3, 4, 16\n                        break;\n                    case 5: //done  \n                        self.windowOffsetTop = (self.nzHeight); //DONE - 4,5,6,7,8\n                        self.windowOffsetLeft = (self.nzWidth - self.zoomWindow.width() - (self.options.borderSize * 2)); //DONE - 5,15\n                        break;\n                    case 6:\n                        if (self.options.zoomWindowHeight > self.nzHeight) { //positive margin\n                            self.windowOffsetTop = (self.nzHeight);  //DONE - 4,5,6,7,8\n\n                            self.windowOffsetLeft = ((self.options.zoomWindowWidth / 2) - (self.nzWidth / 2) + (self.options.borderSize * 2)) * (-1);\n                        }\n                        else { //negative margin\n\n                        }\n\n\n                        break;\n                    case 7: //done  \n                        self.windowOffsetTop = (self.nzHeight);  //DONE - 4,5,6,7,8\n                        self.windowOffsetLeft = 0; //DONE 7, 13\n                        break;\n                    case 8: //done  \n                        self.windowOffsetTop = (self.nzHeight); //DONE - 4,5,6,7,8\n                        self.windowOffsetLeft = (self.zoomWindow.width() + (self.options.borderSize * 2)) * (-1);  //DONE 8,9,10,11,12\n                        break;\n                    case 9:  //done  \n                        self.windowOffsetTop = (self.nzHeight - self.zoomWindow.height() - (self.options.borderSize * 2)); //DONE 3,9\n                        self.windowOffsetLeft = (self.zoomWindow.width() + (self.options.borderSize * 2)) * (-1);  //DONE 8,9,10,11,12\n                        break;\n                    case 10:\n                        if (self.options.zoomWindowHeight > self.nzHeight) { //positive margin\n\n                            self.windowOffsetTop = ((self.options.zoomWindowHeight / 2) - (self.nzHeight / 2)) * (-1);\n                            self.windowOffsetLeft = (self.zoomWindow.width() + (self.options.borderSize * 2)) * (-1);  //DONE 8,9,10,11,12\n                        }\n                        else { //negative margin\n\n                        }\n                        break;\n                    case 11:\n                        self.windowOffsetTop = (self.options.zoomWindowOffety);\n                        self.windowOffsetLeft = (self.zoomWindow.width() + (self.options.borderSize * 2)) * (-1);  //DONE 8,9,10,11,12\n                        break;\n                    case 12: //done  \n                        self.windowOffsetTop = (self.zoomWindow.height() + (self.options.borderSize * 2)) * (-1); //DONE 12,13,14,15,16\n                        self.windowOffsetLeft = (self.zoomWindow.width() + (self.options.borderSize * 2)) * (-1);  //DONE 8,9,10,11,12\n                        break;\n                    case 13: //done  \n                        self.windowOffsetTop = (self.zoomWindow.height() + (self.options.borderSize * 2)) * (-1); //DONE 12,13,14,15,16\n                        self.windowOffsetLeft = (0); //DONE 7, 13\n                        break;\n                    case 14:\n                        if (self.options.zoomWindowHeight > self.nzHeight) { //positive margin\n                            self.windowOffsetTop = (self.zoomWindow.height() + (self.options.borderSize * 2)) * (-1); //DONE 12,13,14,15,16\n\n                            self.windowOffsetLeft = ((self.options.zoomWindowWidth / 2) - (self.nzWidth / 2) + (self.options.borderSize * 2)) * (-1);\n                        }\n                        else { //negative margin\n\n                        }\n\n                        break;\n                    case 15://done   \n                        self.windowOffsetTop = (self.zoomWindow.height() + (self.options.borderSize * 2)) * (-1); //DONE 12,13,14,15,16\n                        self.windowOffsetLeft = (self.nzWidth - self.zoomWindow.width() - (self.options.borderSize * 2)); //DONE - 5,15\n                        break;\n                    case 16:  //done  \n                        self.windowOffsetTop = (self.zoomWindow.height() + (self.options.borderSize * 2)) * (-1); //DONE 12,13,14,15,16\n                        self.windowOffsetLeft = (self.nzWidth); //DONE 1, 2, 3, 4, 16\n                        break;\n                    default: //done  \n                        self.windowOffsetTop = (self.options.zoomWindowOffety);//DONE - 1\n                        self.windowOffsetLeft = (self.nzWidth); //DONE 1, 2, 3, 4, 16\n                }\n            } //end isNAN\n            else {\n                //WE CAN POSITION IN A CLASS - ASSUME THAT ANY STRING PASSED IS\n                self.externalContainer = $('#' + self.options.zoomWindowPosition);\n                self.externalContainerWidth = self.externalContainer.width();\n                self.externalContainerHeight = self.externalContainer.height();\n                self.externalContainerOffset = self.externalContainer.offset();\n\n                self.windowOffsetTop = self.externalContainerOffset.top;//DONE - 1\n                self.windowOffsetLeft = self.externalContainerOffset.left; //DONE 1, 2, 3, 4, 16\n\n            }\n            self.isWindowSet = true;\n            self.windowOffsetTop = self.windowOffsetTop + self.options.zoomWindowOffety;\n            self.windowOffsetLeft = self.windowOffsetLeft + self.options.zoomWindowOffetx;\n\n            self.zoomWindow.css({ top: self.windowOffsetTop });\n            self.zoomWindow.css({ left: self.windowOffsetLeft });\n\n            if (self.options.zoomType == \"inner\") {\n                self.zoomWindow.css({ top: 0 });\n                self.zoomWindow.css({ left: 0 });\n\n            }\n\n\n            self.windowLeftPos = String(((e.pageX - self.nzOffset.left) * self.widthRatio - self.zoomWindow.width() / 2) * (-1));\n            self.windowTopPos = String(((e.pageY - self.nzOffset.top) * self.heightRatio - self.zoomWindow.height() / 2) * (-1));\n            if (self.Etoppos) { self.windowTopPos = 0; }\n            if (self.Eloppos) { self.windowLeftPos = 0; }\n            if (self.Eboppos) { self.windowTopPos = (self.largeHeight / self.currentZoomLevel - self.zoomWindow.height()) * (-1); }\n            if (self.Eroppos) { self.windowLeftPos = ((self.largeWidth / self.currentZoomLevel - self.zoomWindow.width()) * (-1)); }\n\n            //stops micro movements\n            if (self.fullheight) {\n                self.windowTopPos = 0;\n\n            }\n            if (self.fullwidth) {\n                self.windowLeftPos = 0;\n\n            }\n            //set the css background position \n\n\n            if (self.options.zoomType == \"window\" || self.options.zoomType == \"inner\") {\n\n                if (self.zoomLock == 1) {\n                    //overrides for images not zoomable\n                    if (self.widthRatio <= 1) {\n\n                        self.windowLeftPos = 0;\n                    }\n                    if (self.heightRatio <= 1) {\n                        self.windowTopPos = 0;\n                    }\n                }\n                // adjust images less than the window height\n\n                if (self.options.zoomType == \"window\") {\n                    if (self.largeHeight < self.options.zoomWindowHeight) {\n\n                        self.windowTopPos = 0;\n                    }\n                    if (self.largeWidth < self.options.zoomWindowWidth) {\n                        self.windowLeftPos = 0;\n                    }\n                }\n\n                //set the zoomwindow background position\n                if (self.options.easing) {\n\n                    //     if(self.changeZoom){\n                    //           clearInterval(self.loop);\n                    //           self.changeZoom = false;\n                    //           self.loop = false;\n\n                    //            }\n                    //set the pos to 0 if not set\n                    if (!self.xp) { self.xp = 0; }\n                    if (!self.yp) { self.yp = 0; }\n                    //if loop not already started, then run it \n                    if (!self.loop) {\n                        self.loop = setInterval(function () {\n                            //using zeno's paradox    \n\n                            self.xp += (self.windowLeftPos - self.xp) / self.options.easingAmount;\n                            self.yp += (self.windowTopPos - self.yp) / self.options.easingAmount;\n                            if (self.scrollingLock) {\n\n\n                                clearInterval(self.loop);\n                                self.xp = self.windowLeftPos;\n                                self.yp = self.windowTopPos\n\n                                self.xp = ((e.pageX - self.nzOffset.left) * self.widthRatio - self.zoomWindow.width() / 2) * (-1);\n                                self.yp = (((e.pageY - self.nzOffset.top) * self.heightRatio - self.zoomWindow.height() / 2) * (-1));\n\n                                if (self.changeBgSize) {\n                                    if (self.nzHeight > self.nzWidth) {\n                                        if (self.options.zoomType == \"lens\") {\n                                            self.zoomLens.css({ \"background-size\": self.largeWidth / self.newvalueheight + 'px ' + self.largeHeight / self.newvalueheight + 'px' });\n                                        }\n                                        self.zoomWindow.css({ \"background-size\": self.largeWidth / self.newvalueheight + 'px ' + self.largeHeight / self.newvalueheight + 'px' });\n                                    }\n                                    else {\n                                        if (self.options.zoomType != \"lens\") {\n                                            self.zoomLens.css({ \"background-size\": self.largeWidth / self.newvaluewidth + 'px ' + self.largeHeight / self.newvalueheight + 'px' });\n                                        }\n                                        self.zoomWindow.css({ \"background-size\": self.largeWidth / self.newvaluewidth + 'px ' + self.largeHeight / self.newvaluewidth + 'px' });\n\n                                    }\n\n                                    /*\n         if(!self.bgxp){self.bgxp = self.largeWidth/self.newvalue;}\n                    if(!self.bgyp){self.bgyp = self.largeHeight/self.newvalue ;}  \n             if (!self.bgloop){   \n                  self.bgloop = setInterval(function(){   \n\n             self.bgxp += (self.largeWidth/self.newvalue  - self.bgxp) / self.options.easingAmount; \n                            self.bgyp += (self.largeHeight/self.newvalue  - self.bgyp) / self.options.easingAmount;\n\n       self.zoomWindow.css({ \"background-size\": self.bgxp + 'px ' + self.bgyp + 'px' });\n\n\n              }, 16);\n\n             }\n                                     */\n                                    self.changeBgSize = false;\n                                }\n\n                                self.zoomWindow.css({ backgroundPosition: self.windowLeftPos + 'px ' + self.windowTopPos + 'px' });\n                                self.scrollingLock = false;\n                                self.loop = false;\n\n                            }\n                            else if (Math.round(Math.abs(self.xp - self.windowLeftPos) + Math.abs(self.yp - self.windowTopPos)) < 1) {\n                                //stops micro movements\n                                clearInterval(self.loop);\n                                self.zoomWindow.css({ backgroundPosition: self.windowLeftPos + 'px ' + self.windowTopPos + 'px' });\n                                self.loop = false;\n                            }\n                            else {\n                                if (self.changeBgSize) {\n                                    if (self.nzHeight > self.nzWidth) {\n                                        if (self.options.zoomType == \"lens\") {\n                                            self.zoomLens.css({ \"background-size\": self.largeWidth / self.newvalueheight + 'px ' + self.largeHeight / self.newvalueheight + 'px' });\n                                        }\n                                        self.zoomWindow.css({ \"background-size\": self.largeWidth / self.newvalueheight + 'px ' + self.largeHeight / self.newvalueheight + 'px' });\n                                    }\n                                    else {\n                                        if (self.options.zoomType != \"lens\") {\n                                            self.zoomLens.css({ \"background-size\": self.largeWidth / self.newvaluewidth + 'px ' + self.largeHeight / self.newvaluewidth + 'px' });\n                                        }\n                                        self.zoomWindow.css({ \"background-size\": self.largeWidth / self.newvaluewidth + 'px ' + self.largeHeight / self.newvaluewidth + 'px' });\n                                    }\n                                    self.changeBgSize = false;\n                                }\n\n                                self.zoomWindow.css({ backgroundPosition: self.xp + 'px ' + self.yp + 'px' });\n                            }\n                        }, 16);\n                    }\n                }\n                else {\n                    if (self.changeBgSize) {\n                        if (self.nzHeight > self.nzWidth) {\n                            if (self.options.zoomType == \"lens\") {\n                                self.zoomLens.css({ \"background-size\": self.largeWidth / self.newvalueheight + 'px ' + self.largeHeight / self.newvalueheight + 'px' });\n                            }\n\n                            self.zoomWindow.css({ \"background-size\": self.largeWidth / self.newvalueheight + 'px ' + self.largeHeight / self.newvalueheight + 'px' });\n                        }\n                        else {\n                            if (self.options.zoomType == \"lens\") {\n                                self.zoomLens.css({ \"background-size\": self.largeWidth / self.newvaluewidth + 'px ' + self.largeHeight / self.newvaluewidth + 'px' });\n                            }\n                            if ((self.largeHeight / self.newvaluewidth) < self.options.zoomWindowHeight) {\n\n                                self.zoomWindow.css({ \"background-size\": self.largeWidth / self.newvaluewidth + 'px ' + self.largeHeight / self.newvaluewidth + 'px' });\n                            }\n                            else {\n\n                                self.zoomWindow.css({ \"background-size\": self.largeWidth / self.newvalueheight + 'px ' + self.largeHeight / self.newvalueheight + 'px' });\n                            }\n\n                        }\n                        self.changeBgSize = false;\n                    }\n\n                    self.zoomWindow.css({ backgroundPosition: self.windowLeftPos + 'px ' + self.windowTopPos + 'px' });\n                }\n            }\n        },\n        setTintPosition: function (e) {\n            var self = this;\n            self.nzOffset = self.$elem.offset();\n            self.tintpos = String(((e.pageX - self.nzOffset.left) - (self.zoomLens.width() / 2)) * (-1));\n            self.tintposy = String(((e.pageY - self.nzOffset.top) - self.zoomLens.height() / 2) * (-1));\n            if (self.Etoppos) {\n                self.tintposy = 0;\n            }\n            if (self.Eloppos) {\n                self.tintpos = 0;\n            }\n            if (self.Eboppos) {\n                self.tintposy = (self.nzHeight - self.zoomLens.height() - (self.options.lensBorderSize * 2)) * (-1);\n            }\n            if (self.Eroppos) {\n                self.tintpos = ((self.nzWidth - self.zoomLens.width() - (self.options.lensBorderSize * 2)) * (-1));\n            }\n            if (self.options.tint) {\n                //stops micro movements\n                if (self.fullheight) {\n                    self.tintposy = 0;\n\n                }\n                if (self.fullwidth) {\n                    self.tintpos = 0;\n\n                }\n                self.zoomTintImage.css({ 'left': self.tintpos + 'px' });\n                self.zoomTintImage.css({ 'top': self.tintposy + 'px' });\n            }\n        },\n\n        swaptheimage: function (smallimage, largeimage) {\n            var self = this;\n            var newImg = new Image();\n\n            if (self.options.loadingIcon) {\n                self.spinner = $('<div style=\"background: url(\\'' + self.options.loadingIcon + '\\') no-repeat center;height:' + self.nzHeight + 'px;width:' + self.nzWidth + 'px;z-index: 2000;position: absolute; background-position: center center;\"></div>');\n                self.$elem.after(self.spinner);\n            }\n\n            self.options.onImageSwap(self.$elem);\n\n            newImg.onload = function () {\n                self.largeWidth = newImg.width;\n                self.largeHeight = newImg.height;\n                self.zoomImage = largeimage;\n                self.zoomWindow.css({ \"background-size\": self.largeWidth + 'px ' + self.largeHeight + 'px' });\n                self.swapAction(smallimage, largeimage);\n                return;\n            }\n            newImg.src = largeimage; // this must be done AFTER setting onload\n\n        },\n        swapAction: function (smallimage, largeimage) {\n\n\n            var self = this;\n\n            var newImg2 = new Image();\n            newImg2.onload = function () {\n                //re-calculate values\n                self.nzHeight = newImg2.height;\n                self.nzWidth = newImg2.width;\n                self.options.onImageSwapComplete(self.$elem);\n\n                self.doneCallback();\n                return;\n            }\n            newImg2.src = smallimage;\n\n            //reset the zoomlevel to that initially set in options\n            self.currentZoomLevel = self.options.zoomLevel;\n            self.options.maxZoomLevel = false;\n\n            //swaps the main image\n            //self.$elem.attr(\"src\",smallimage);\n            //swaps the zoom image     \n            if (self.options.zoomType == \"lens\") {\n                self.zoomLens.css({ backgroundImage: \"url('\" + largeimage + \"')\" });\n            }\n            if (self.options.zoomType == \"window\") {\n                self.zoomWindow.css({ backgroundImage: \"url('\" + largeimage + \"')\" });\n            }\n            if (self.options.zoomType == \"inner\") {\n                self.zoomWindow.css({ backgroundImage: \"url('\" + largeimage + \"')\" });\n            }\n\n\n\n            self.currentImage = largeimage;\n\n            if (self.options.imageCrossfade) {\n                var oldImg = self.$elem;\n                var newImg = oldImg.clone();\n                self.$elem.attr(\"src\", smallimage)\n                self.$elem.after(newImg);\n                newImg.stop(true).fadeOut(self.options.imageCrossfade, function () {\n                    $(this).remove();\n                });\n\n                //       \t\t\t\tif(self.options.zoomType == \"inner\"){\n                //remove any attributes on the cloned image so we can resize later\n                self.$elem.width(\"auto\").removeAttr(\"width\");\n                self.$elem.height(\"auto\").removeAttr(\"height\");\n                //   }\n\n                oldImg.fadeIn(self.options.imageCrossfade);\n\n                if (self.options.tint && self.options.zoomType != \"inner\") {\n\n                    var oldImgTint = self.zoomTintImage;\n                    var newImgTint = oldImgTint.clone();\n                    self.zoomTintImage.attr(\"src\", largeimage)\n                    self.zoomTintImage.after(newImgTint);\n                    newImgTint.stop(true).fadeOut(self.options.imageCrossfade, function () {\n                        $(this).remove();\n                    });\n\n\n\n                    oldImgTint.fadeIn(self.options.imageCrossfade);\n\n\n                    //self.zoomTintImage.attr(\"width\",elem.data(\"image\"));\n\n                    //resize the tint window\n                    self.zoomTint.css({ height: self.$elem.height() });\n                    self.zoomTint.css({ width: self.$elem.width() });\n                }\n\n                self.zoomContainer.css(\"height\", self.$elem.height());\n                self.zoomContainer.css(\"width\", self.$elem.width());\n\n                if (self.options.zoomType == \"inner\") {\n                    if (!self.options.constrainType) {\n                        self.zoomWrap.parent().css(\"height\", self.$elem.height());\n                        self.zoomWrap.parent().css(\"width\", self.$elem.width());\n\n                        self.zoomWindow.css(\"height\", self.$elem.height());\n                        self.zoomWindow.css(\"width\", self.$elem.width());\n                    }\n                }\n\n                if (self.options.imageCrossfade) {\n                    self.zoomWrap.css(\"height\", self.$elem.height());\n                    self.zoomWrap.css(\"width\", self.$elem.width());\n                }\n            }\n            else {\n                self.$elem.attr(\"src\", smallimage);\n                if (self.options.tint) {\n                    self.zoomTintImage.attr(\"src\", largeimage);\n                    //self.zoomTintImage.attr(\"width\",elem.data(\"image\"));\n                    self.zoomTintImage.attr(\"height\", self.$elem.height());\n                    //self.zoomTintImage.attr('src') = elem.data(\"image\");\n                    self.zoomTintImage.css({ height: self.$elem.height() });\n                    self.zoomTint.css({ height: self.$elem.height() });\n\n                }\n                self.zoomContainer.css(\"height\", self.$elem.height());\n                self.zoomContainer.css(\"width\", self.$elem.width());\n\n                if (self.options.imageCrossfade) {\n                    self.zoomWrap.css(\"height\", self.$elem.height());\n                    self.zoomWrap.css(\"width\", self.$elem.width());\n                }\n            }\n            if (self.options.constrainType) {\n\n                //This will contrain the image proportions\n                if (self.options.constrainType == \"height\") {\n\n                    self.zoomContainer.css(\"height\", self.options.constrainSize);\n                    self.zoomContainer.css(\"width\", \"auto\");\n\n                    if (self.options.imageCrossfade) {\n                        self.zoomWrap.css(\"height\", self.options.constrainSize);\n                        self.zoomWrap.css(\"width\", \"auto\");\n                        self.constwidth = self.zoomWrap.width();\n\n\n                    }\n                    else {\n                        self.$elem.css(\"height\", self.options.constrainSize);\n                        self.$elem.css(\"width\", \"auto\");\n                        self.constwidth = self.$elem.width();\n                    }\n\n                    if (self.options.zoomType == \"inner\") {\n\n                        self.zoomWrap.parent().css(\"height\", self.options.constrainSize);\n                        self.zoomWrap.parent().css(\"width\", self.constwidth);\n                        self.zoomWindow.css(\"height\", self.options.constrainSize);\n                        self.zoomWindow.css(\"width\", self.constwidth);\n                    }\n                    if (self.options.tint) {\n                        self.tintContainer.css(\"height\", self.options.constrainSize);\n                        self.tintContainer.css(\"width\", self.constwidth);\n                        self.zoomTint.css(\"height\", self.options.constrainSize);\n                        self.zoomTint.css(\"width\", self.constwidth);\n                        self.zoomTintImage.css(\"height\", self.options.constrainSize);\n                        self.zoomTintImage.css(\"width\", self.constwidth);\n                    }\n\n                }\n                if (self.options.constrainType == \"width\") {\n                    self.zoomContainer.css(\"height\", \"auto\");\n                    self.zoomContainer.css(\"width\", self.options.constrainSize);\n\n                    if (self.options.imageCrossfade) {\n                        self.zoomWrap.css(\"height\", \"auto\");\n                        self.zoomWrap.css(\"width\", self.options.constrainSize);\n                        self.constheight = self.zoomWrap.height();\n                    }\n                    else {\n                        self.$elem.css(\"height\", \"auto\");\n                        self.$elem.css(\"width\", self.options.constrainSize);\n                        self.constheight = self.$elem.height();\n                    }\n                    if (self.options.zoomType == \"inner\") {\n                        self.zoomWrap.parent().css(\"height\", self.constheight);\n                        self.zoomWrap.parent().css(\"width\", self.options.constrainSize);\n                        self.zoomWindow.css(\"height\", self.constheight);\n                        self.zoomWindow.css(\"width\", self.options.constrainSize);\n                    }\n                    if (self.options.tint) {\n                        self.tintContainer.css(\"height\", self.constheight);\n                        self.tintContainer.css(\"width\", self.options.constrainSize);\n                        self.zoomTint.css(\"height\", self.constheight);\n                        self.zoomTint.css(\"width\", self.options.constrainSize);\n                        self.zoomTintImage.css(\"height\", self.constheight);\n                        self.zoomTintImage.css(\"width\", self.options.constrainSize);\n                    }\n\n                }\n\n\n            }\n\n        },\n        doneCallback: function () {\n\n            var self = this;\n            if (self.options.loadingIcon) {\n                self.spinner.hide();\n            }\n\n            self.nzOffset = self.$elem.offset();\n            self.nzWidth = self.$elem.width();\n            self.nzHeight = self.$elem.height();\n\n            // reset the zoomlevel back to default\n            self.currentZoomLevel = self.options.zoomLevel;\n\n            //ratio of the large to small image\n            self.widthRatio = self.largeWidth / self.nzWidth;\n            self.heightRatio = self.largeHeight / self.nzHeight;\n\n            //NEED TO ADD THE LENS SIZE FOR ROUND\n            // adjust images less than the window height\n            if (self.options.zoomType == \"window\") {\n\n                if (self.nzHeight < self.options.zoomWindowWidth / self.widthRatio) {\n                    lensHeight = self.nzHeight;\n\n                }\n                else {\n                    lensHeight = String((self.options.zoomWindowHeight / self.heightRatio))\n                }\n\n                if (self.options.zoomWindowWidth < self.options.zoomWindowWidth) {\n                    lensWidth = self.nzWidth;\n                }\n                else {\n                    lensWidth = (self.options.zoomWindowWidth / self.widthRatio);\n                }\n\n\n                if (self.zoomLens) {\n\n                    self.zoomLens.css('width', lensWidth);\n                    self.zoomLens.css('height', lensHeight);\n\n\n                }\n            }\n        },\n        getCurrentImage: function () {\n            var self = this;\n            return self.zoomImage;\n        },\n        getGalleryList: function () {\n            var self = this;\n            //loop through the gallery options and set them in list for fancybox\n            self.gallerylist = [];\n            if (self.options.gallery) {\n\n\n                $('#' + self.options.gallery + ' a').each(function () {\n\n                    var img_src = '';\n                    if ($(this).data(\"zoom-image\")) {\n                        img_src = $(this).data(\"zoom-image\");\n                    }\n                    else if ($(this).data(\"image\")) {\n                        img_src = $(this).data(\"image\");\n                    }\n                    //put the current image at the start\n                    if (img_src == self.zoomImage) {\n                        self.gallerylist.unshift({\n                            href: '' + img_src + '',\n                            title: $(this).find('img').attr(\"title\")\n                        });\n                    }\n                    else {\n                        self.gallerylist.push({\n                            href: '' + img_src + '',\n                            title: $(this).find('img').attr(\"title\")\n                        });\n                    }\n\n\n                });\n            }\n            //if no gallery - return current image\n            else {\n                self.gallerylist.push({\n                    href: '' + self.zoomImage + '',\n                    title: $(this).find('img').attr(\"title\")\n                });\n            }\n            return self.gallerylist;\n\n        },\n        changeZoomLevel: function (value) {\n            var self = this;\n\n            //flag a zoom, so can adjust the easing during setPosition     \n            self.scrollingLock = true;\n\n            //round to two decimal places\n            self.newvalue = parseFloat(value).toFixed(2);\n            newvalue = parseFloat(value).toFixed(2);\n\n\n\n\n            //maxwidth & Maxheight of the image\n            maxheightnewvalue = self.largeHeight / ((self.options.zoomWindowHeight / self.nzHeight) * self.nzHeight);\n            maxwidthtnewvalue = self.largeWidth / ((self.options.zoomWindowWidth / self.nzWidth) * self.nzWidth);\n\n\n\n\n            //calculate new heightratio\n            if (self.options.zoomType != \"inner\") {\n                if (maxheightnewvalue <= newvalue) {\n                    self.heightRatio = (self.largeHeight / maxheightnewvalue) / self.nzHeight;\n                    self.newvalueheight = maxheightnewvalue;\n                    self.fullheight = true;\n\n                }\n                else {\n                    self.heightRatio = (self.largeHeight / newvalue) / self.nzHeight;\n                    self.newvalueheight = newvalue;\n                    self.fullheight = false;\n\n                }\n\n\n                //\t\t\t\t\tcalculate new width ratio\n\n                if (maxwidthtnewvalue <= newvalue) {\n                    self.widthRatio = (self.largeWidth / maxwidthtnewvalue) / self.nzWidth;\n                    self.newvaluewidth = maxwidthtnewvalue;\n                    self.fullwidth = true;\n\n                }\n                else {\n                    self.widthRatio = (self.largeWidth / newvalue) / self.nzWidth;\n                    self.newvaluewidth = newvalue;\n                    self.fullwidth = false;\n\n                }\n                if (self.options.zoomType == \"lens\") {\n                    if (maxheightnewvalue <= newvalue) {\n                        self.fullwidth = true;\n                        self.newvaluewidth = maxheightnewvalue;\n\n                    } else {\n                        self.widthRatio = (self.largeWidth / newvalue) / self.nzWidth;\n                        self.newvaluewidth = newvalue;\n\n                        self.fullwidth = false;\n                    }\n                }\n            }\n\n\n\n            if (self.options.zoomType == \"inner\") {\n                maxheightnewvalue = parseFloat(self.largeHeight / self.nzHeight).toFixed(2);\n                maxwidthtnewvalue = parseFloat(self.largeWidth / self.nzWidth).toFixed(2);\n                if (newvalue > maxheightnewvalue) {\n                    newvalue = maxheightnewvalue;\n                }\n                if (newvalue > maxwidthtnewvalue) {\n                    newvalue = maxwidthtnewvalue;\n                }\n\n\n                if (maxheightnewvalue <= newvalue) {\n\n\n                    self.heightRatio = (self.largeHeight / newvalue) / self.nzHeight;\n                    if (newvalue > maxheightnewvalue) {\n                        self.newvalueheight = maxheightnewvalue;\n                    } else {\n                        self.newvalueheight = newvalue;\n                    }\n                    self.fullheight = true;\n\n\n                }\n                else {\n\n\n\n                    self.heightRatio = (self.largeHeight / newvalue) / self.nzHeight;\n\n                    if (newvalue > maxheightnewvalue) {\n\n                        self.newvalueheight = maxheightnewvalue;\n                    } else {\n                        self.newvalueheight = newvalue;\n                    }\n                    self.fullheight = false;\n                }\n\n\n\n\n                if (maxwidthtnewvalue <= newvalue) {\n\n                    self.widthRatio = (self.largeWidth / newvalue) / self.nzWidth;\n                    if (newvalue > maxwidthtnewvalue) {\n\n                        self.newvaluewidth = maxwidthtnewvalue;\n                    } else {\n                        self.newvaluewidth = newvalue;\n                    }\n\n                    self.fullwidth = true;\n\n\n                }\n                else {\n\n                    self.widthRatio = (self.largeWidth / newvalue) / self.nzWidth;\n                    self.newvaluewidth = newvalue;\n                    self.fullwidth = false;\n                }\n\n\n            } //end inner\n            scrcontinue = false;\n\n            if (self.options.zoomType == \"inner\") {\n\n                if (self.nzWidth >= self.nzHeight) {\n                    if (self.newvaluewidth <= maxwidthtnewvalue) {\n                        scrcontinue = true;\n                    }\n                    else {\n\n                        scrcontinue = false;\n                        self.fullheight = true;\n                        self.fullwidth = true;\n                    }\n                }\n                if (self.nzHeight > self.nzWidth) {\n                    if (self.newvaluewidth <= maxwidthtnewvalue) {\n                        scrcontinue = true;\n                    }\n                    else {\n                        scrcontinue = false;\n\n                        self.fullheight = true;\n                        self.fullwidth = true;\n                    }\n                }\n            }\n\n            if (self.options.zoomType != \"inner\") {\n                scrcontinue = true;\n            }\n\n            if (scrcontinue) {\n\n\n\n                self.zoomLock = 0;\n                self.changeZoom = true;\n\n                //if lens height is less than image height\n\n\n                if (((self.options.zoomWindowHeight) / self.heightRatio) <= self.nzHeight) {\n\n\n                    self.currentZoomLevel = self.newvalueheight;\n                    if (self.options.zoomType != \"lens\" && self.options.zoomType != \"inner\") {\n                        self.changeBgSize = true;\n\n                        self.zoomLens.css({ height: String((self.options.zoomWindowHeight) / self.heightRatio) + 'px' })\n                    }\n                    if (self.options.zoomType == \"lens\" || self.options.zoomType == \"inner\") {\n                        self.changeBgSize = true;\n                    }\n\n\n                }\n\n\n\n\n                if ((self.options.zoomWindowWidth / self.widthRatio) <= self.nzWidth) {\n\n\n\n                    if (self.options.zoomType != \"inner\") {\n                        if (self.newvaluewidth > self.newvalueheight) {\n                            self.currentZoomLevel = self.newvaluewidth;\n\n                        }\n                    }\n\n                    if (self.options.zoomType != \"lens\" && self.options.zoomType != \"inner\") {\n                        self.changeBgSize = true;\n\n                        self.zoomLens.css({ width: String((self.options.zoomWindowWidth) / self.widthRatio) + 'px' })\n                    }\n                    if (self.options.zoomType == \"lens\" || self.options.zoomType == \"inner\") {\n                        self.changeBgSize = true;\n                    }\n\n                }\n                if (self.options.zoomType == \"inner\") {\n                    self.changeBgSize = true;\n\n                    if (self.nzWidth > self.nzHeight) {\n                        self.currentZoomLevel = self.newvaluewidth;\n                    }\n                    if (self.nzHeight > self.nzWidth) {\n                        self.currentZoomLevel = self.newvaluewidth;\n                    }\n                }\n\n            }      //under\n\n            //sets the boundry change, called in setWindowPos\n            self.setPosition(self.currentLoc);\n            //\n        },\n        closeAll: function () {\n            if (self.zoomWindow) { self.zoomWindow.hide(); }\n            if (self.zoomLens) { self.zoomLens.hide(); }\n            if (self.zoomTint) { self.zoomTint.hide(); }\n        },\n        changeState: function (value) {\n            var self = this;\n            if (value == 'enable') { self.options.zoomEnabled = true; }\n            if (value == 'disable') { self.options.zoomEnabled = false; }\n\n        }\n\n    };\n\n    $.fn.elevateZoom = function (options) {\n        return this.each(function () {\n            var elevate = Object.create(ElevateZoom);\n\n            elevate.init(options, this);\n\n            $.data(this, 'elevateZoom', elevate);\n\n        });\n    };\n\n    $.fn.elevateZoom.options = {\n        imageSrc: null,\n        zoomActivation: \"hover\", // Can also be click (PLACEHOLDER FOR NEXT VERSION)\n        zoomEnabled: true, //false disables zoomwindow from showing\n        preloading: 1, //by default, load all the images, if 0, then only load images after activated (PLACEHOLDER FOR NEXT VERSION)\n        zoomLevel: 1, //default zoom level of image\n        scrollZoom: false, //allow zoom on mousewheel, true to activate\n        scrollZoomIncrement: 0.1,  //steps of the scrollzoom\n        minZoomLevel: false,\n        maxZoomLevel: false,\n        easing: false,\n        easingAmount: 12,\n        lensSize: 200,\n        zoomWindowWidth: 400,\n        zoomWindowHeight: 400,\n        zoomWindowOffetx: 0,\n        zoomWindowOffety: 0,\n        zoomWindowPosition: 1,\n        zoomWindowBgColour: \"#fff\",\n        lensFadeIn: false,\n        lensFadeOut: false,\n        debug: false,\n        zoomWindowFadeIn: false,\n        zoomWindowFadeOut: false,\n        zoomWindowAlwaysShow: false,\n        zoomTintFadeIn: false,\n        zoomTintFadeOut: false,\n        borderSize: 4,\n        showLens: true,\n        borderColour: \"#888\",\n        lensBorderSize: 1,\n        lensBorderColour: \"#000\",\n        lensShape: \"square\", //can be \"round\"\n        zoomType: \"window\", //window is default,  also \"lens\" available -\n        containLensZoom: false,\n        lensColour: \"white\", //colour of the lens background\n        lensOpacity: 0.4, //opacity of the lens\n        lenszoom: false,\n        tint: false, //enable the tinting\n        tintColour: \"#333\", //default tint color, can be anything, red, #ccc, rgb(0,0,0)\n        tintOpacity: 0.4, //opacity of the tint\n        gallery: false,\n        galleryActiveClass: \"zoomGalleryActive\",\n        imageCrossfade: false,\n        constrainType: false,  //width or height\n        constrainSize: false,  //in pixels the dimensions you want to constrain on\n        loadingIcon: false, //http://www.example.com/spinner.gif\n        cursor: \"default\", // user should set to what they want the cursor as, if they have set a click function\n        responsive: true,\n        onComplete: $.noop,\n        onDestroy: function () { },\n        onZoomedImageLoaded: function () { },\n        onImageSwap: $.noop,\n        onImageSwapComplete: $.noop\n    };\n\n})(jQuery, window, document);","// jquery.daterangepicker.js\n// author : Chunlong Liu\n// license : MIT\n// www.jszen.com\n\n(function(factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['jquery', 'moment'], factory);\n    } else if (typeof exports === 'object' && typeof module !== 'undefined') {\n        // CommonJS. Register as a module\n        module.exports = factory(require('jquery'), require('moment'));\n    } else {\n        // Browser globals\n        factory(jQuery, moment);\n    }\n}(function($, moment) {\n    'use strict';\n    $.dateRangePickerLanguages = {\n        \"default\": //default language: English\n        {\n            \"selected\": \"Selected:\",\n            \"day\": \"Day\",\n            \"days\": \"Days\",\n            \"apply\": \"Close\",\n            \"week-1\": \"mo\",\n            \"week-2\": \"tu\",\n            \"week-3\": \"we\",\n            \"week-4\": \"th\",\n            \"week-5\": \"fr\",\n            \"week-6\": \"sa\",\n            \"week-7\": \"su\",\n            \"week-number\": \"W\",\n            \"month-name\": [\"january\", \"february\", \"march\", \"april\", \"may\", \"june\", \"july\", \"august\", \"september\", \"october\", \"november\", \"december\"],\n            \"shortcuts\": \"Shortcuts\",\n            \"custom-values\": \"Custom Values\",\n            \"past\": \"Past\",\n            \"following\": \"Following\",\n            \"previous\": \"Previous\",\n            \"prev-week\": \"Week\",\n            \"prev-month\": \"Month\",\n            \"prev-year\": \"Year\",\n            \"next\": \"Next\",\n            \"next-week\": \"Week\",\n            \"next-month\": \"Month\",\n            \"next-year\": \"Year\",\n            \"less-than\": \"Date range should not be more than %d days\",\n            \"more-than\": \"Date range should not be less than %d days\",\n            \"default-more\": \"Please select a date range longer than %d days\",\n            \"default-single\": \"Please select a date\",\n            \"default-less\": \"Please select a date range less than %d days\",\n            \"default-range\": \"Please select a date range between %d and %d days\",\n            \"default-default\": \"Please select a date range\",\n            \"time\": \"Time\",\n            \"hour\": \"Hour\",\n            \"minute\": \"Minute\"\n        },\n        \"de\": {\n            \"selected\": \"Auswahl:\",\n            \"day\": \"Tag\",\n            \"days\": \"Tage\",\n            \"apply\": \"Schlieen\",\n            \"week-1\": \"mo\",\n            \"week-2\": \"di\",\n            \"week-3\": \"mi\",\n            \"week-4\": \"do\",\n            \"week-5\": \"fr\",\n            \"week-6\": \"sa\",\n            \"week-7\": \"so\",\n            \"month-name\": [\"januar\", \"februar\", \"mrz\", \"april\", \"mai\", \"juni\", \"juli\", \"august\", \"september\", \"oktober\", \"november\", \"dezember\"],\n            \"shortcuts\": \"Schnellwahl\",\n            \"past\": \"Vorherige\",\n            \"following\": \"Folgende\",\n            \"previous\": \"Vorherige\",\n            \"prev-week\": \"Woche\",\n            \"prev-month\": \"Monat\",\n            \"prev-year\": \"Jahr\",\n            \"next\": \"Nchste\",\n            \"next-week\": \"Woche\",\n            \"next-month\": \"Monat\",\n            \"next-year\": \"Jahr\",\n            \"less-than\": \"Datumsbereich darf nicht grer sein als %d Tage\",\n            \"more-than\": \"Datumsbereich darf nicht kleiner sein als %d Tage\",\n            \"default-more\": \"Bitte mindestens %d Tage auswhlen\",\n            \"default-single\": \"Bitte ein Datum auswhlen\",\n            \"default-less\": \"Bitte weniger als %d Tage auswhlen\",\n            \"default-range\": \"Bitte einen Datumsbereich zwischen %d und %d Tagen auswhlen\",\n            \"default-default\": \"Bitte ein Start- und Enddatum auswhlen\",\n            \"Time\": \"Zeit\",\n            \"hour\": \"Stunde\",\n            \"minute\": \"Minute\"\n        },\n        \"es\": {\n            \"selected\": \"Seleccionado:\",\n            \"day\": \"Da\",\n            \"days\": \"Das\",\n            \"apply\": \"Cerrar\",\n            \"week-1\": \"lu\",\n            \"week-2\": \"ma\",\n            \"week-3\": \"mi\",\n            \"week-4\": \"ju\",\n            \"week-5\": \"vi\",\n            \"week-6\": \"sa\",\n            \"week-7\": \"do\",\n            \"month-name\": [\"enero\", \"febrero\", \"marzo\", \"abril\", \"mayo\", \"junio\", \"julio\", \"agosto\", \"septiembre\", \"octubre\", \"noviembre\", \"diciembre\"],\n            \"shortcuts\": \"Accesos directos\",\n            \"past\": \"Pasado\",\n            \"following\": \"Siguiente\",\n            \"previous\": \"Anterior\",\n            \"prev-week\": \"Semana\",\n            \"prev-month\": \"Mes\",\n            \"prev-year\": \"Ao\",\n            \"next\": \"Siguiente\",\n            \"next-week\": \"Semana\",\n            \"next-month\": \"Mes\",\n            \"next-year\": \"Ao\",\n            \"less-than\": \"El rango no debera ser mayor de %d das\",\n            \"more-than\": \"El rango no debera ser menor de %d das\",\n            \"default-more\": \"Por favor selecciona un rango mayor a %d das\",\n            \"default-single\": \"Por favor selecciona un da\",\n            \"default-less\": \"Por favor selecciona un rango menor a %d das\",\n            \"default-range\": \"Por favor selecciona un rango entre %d y %d das\",\n            \"default-default\": \"Por favor selecciona un rango de fechas.\"\n        },\n        \"fr\": {\n            \"selected\": \"Slection:\",\n            \"day\": \"Jour\",\n            \"days\": \"Jours\",\n            \"apply\": \"Fermer\",\n            \"week-1\": \"lu\",\n            \"week-2\": \"ma\",\n            \"week-3\": \"me\",\n            \"week-4\": \"je\",\n            \"week-5\": \"ve\",\n            \"week-6\": \"sa\",\n            \"week-7\": \"di\",\n            \"month-name\": [\"janvier\", \"fvrier\", \"mars\", \"avril\", \"mai\", \"juin\", \"juillet\", \"aot\", \"septembre\", \"octobre\", \"novembre\", \"dcembre\"],\n            \"shortcuts\": \"Raccourcis\",\n            \"past\": \"Pass\",\n            \"following\": \"Suivant\",\n            \"previous\": \"Prcdent\",\n            \"prev-week\": \"Semaine\",\n            \"prev-month\": \"Mois\",\n            \"prev-year\": \"Anne\",\n            \"next\": \"Suivant\",\n            \"next-week\": \"Semaine\",\n            \"next-month\": \"Mois\",\n            \"next-year\": \"Anne\",\n            \"less-than\": \"L'intervalle ne doit pas tre suprieure  %d jours\",\n            \"more-than\": \"L'intervalle ne doit pas tre infrieure  %d jours\",\n            \"default-more\": \"Merci de choisir une intervalle suprieure  %d jours\",\n            \"default-single\": \"Merci de choisir une date\",\n            \"default-less\": \"Merci de choisir une intervalle infrieure %d jours\",\n            \"default-range\": \"Merci de choisir une intervalle comprise entre %d et %d jours\",\n            \"default-default\": \"Merci de choisir une date\"\n        },\n        \"pt\": //Portuguese (European)\n        {\n            \"selected\": \"Selecionado:\",\n            \"day\": \"Dia\",\n            \"days\": \"Dias\",\n            \"apply\": \"Fechar\",\n            \"week-1\": \"seg\",\n            \"week-2\": \"ter\",\n            \"week-3\": \"qua\",\n            \"week-4\": \"qui\",\n            \"week-5\": \"sex\",\n            \"week-6\": \"sab\",\n            \"week-7\": \"dom\",\n            \"week-number\": \"N\",\n            \"month-name\": [\"janeiro\", \"fevereiro\", \"maro\", \"abril\", \"maio\", \"junho\", \"julho\", \"agosto\", \"setembro\", \"outubro\", \"novembro\", \"dezembro\"],\n            \"shortcuts\": \"Atalhos\",\n            \"custom-values\": \"Valores Personalizados\",\n            \"past\": \"Passado\",\n            \"following\": \"Seguinte\",\n            \"previous\": \"Anterior\",\n            \"prev-week\": \"Semana\",\n            \"prev-month\": \"Ms\",\n            \"prev-year\": \"Ano\",\n            \"next\": \"Prximo\",\n            \"next-week\": \"Prxima Semana\",\n            \"next-month\": \"Prximo Ms\",\n            \"next-year\": \"Prximo Ano\",\n            \"less-than\": \"O perodo selecionado no deve ser maior que %d dias\",\n            \"more-than\": \"O perodo selecionado no deve ser menor que %d dias\",\n            \"default-more\": \"Selecione um perodo superior a %d dias\",\n            \"default-single\": \"Selecione uma data\",\n            \"default-less\": \"Selecione um perodo inferior a %d dias\",\n            \"default-range\": \"Selecione um perodo de %d a %d dias\",\n            \"default-default\": \"Selecione um perodo\",\n            \"time\": \"Tempo\",\n            \"hour\": \"Hora\",\n            \"minute\": \"Minuto\"\n        }\n    };\n\n    $.fn.dateRangePicker = function (opt) {\n        if (!opt) opt = {};\n        opt = $.extend(true, {\n            autoClose: false,\n            format: 'YYYY-MM-DD',\n            separator: ' - ',\n            language: 'auto',\n            startOfWeek: 'sunday', // or monday\n            getValue: function() {\n                return $(this).val();\n            },\n            setValue: function(s) {\n                if (!$(this).attr('readonly') && !$(this).is(':disabled') && s != $(this).val()) {\n                    $(this).val(s);\n                }\n            },\n            startDate: false,\n            endDate: false,\n            time: {\n                enabled: false\n            },\n            minDays: 0,\n            maxDays: 0,\n            customShortcuts: [],\n            inline: false,\n            container: 'body',\n            alwaysOpen: false,\n            singleDate: false,\n            lookBehind: false,\n            batchMode: false,\n            highlightToday: false,\n            duration: 200,\n            stickyMonths: false,\n            dayDivAttrs: [],\n            dayTdAttrs: [],\n            selectForward: false,\n            selectBackward: false,\n            applyBtnClass: '',\n            singleMonth: 'auto',\n            hoveringTooltip: function(days, startTime, hoveringTime) {\n                return days > 1 ? days + ' ' + translate('days') : '';\n            },\n            showTopbar: true,\n            swapTime: false,\n            showWeekNumbers: false,\n            getWeekNumber: function(date) //date will be the first day of a week\n            {\n                return moment(date).format('w');\n            },\n            customOpenAnimation: null,\n            customCloseAnimation: null,\n            customArrowPrevSymbol: null,\n            customArrowNextSymbol: null\n        }, opt);\n\n        opt.start = false;\n        opt.end = false;\n\n        opt.startWeek = false;\n\n        //detect a touch device\n        opt.isTouchDevice = 'ontouchstart' in window || navigator.msMaxTouchPoints;\n\n        //if it is a touch device, hide hovering tooltip\n        if (opt.isTouchDevice) opt.hoveringTooltip = false;\n\n        //show one month on mobile devices\n        if (opt.singleMonth == 'auto') opt.singleMonth = $(window).width() < 480;\n        if (opt.singleMonth) opt.stickyMonths = false;\n\n        if (!opt.showTopbar) opt.autoClose = true;\n\n        if (opt.startDate && typeof opt.startDate == 'string') opt.startDate = moment(opt.startDate, opt.format).toDate();\n        if (opt.endDate && typeof opt.endDate == 'string') opt.endDate = moment(opt.endDate, opt.format).toDate();\n\n        var languages = getLanguages();\n        var box;\n        var initiated = false;\n        var self = this;\n        var selfDom = $(self).get(0);\n        var domChangeTimer;\n\n        $(this).unbind('.datepicker').bind('click.datepicker', function(evt) {\n            var isOpen = box.is(':visible');\n            if (!isOpen) open(opt.duration);\n        }).bind('change.datepicker', function(evt) {\n            checkAndSetDefaultValue();\n        }).bind('keyup.datepicker', function() {\n            try {\n                clearTimeout(domChangeTimer);\n            } catch (e) {}\n            domChangeTimer = setTimeout(function() {\n                checkAndSetDefaultValue();\n            }, 2000);\n        });\n\n        init_datepicker.call(this);\n\n        if (opt.alwaysOpen) {\n            open(0);\n        }\n\n        // expose some api\n        $(this).data('dateRangePicker', {\n            setStart: function (d1, silent) {\n                if (typeof d1 == 'string') {\n                    d1 = moment(d1, opt.format).toDate();\n                }\n\n                opt.end = false;\n                setSingleDate(d1, silent);\n\n                return this;\n            },\n            setEnd: function(d2, silent) {\n                var start = new Date();\n                start.setTime(opt.start);\n                if (typeof d2 == 'string') {\n                    d2 = moment(d2, opt.format).toDate();\n                }\n                setDateRange(start, d2, silent);\n                return this;\n            },\n            setDateRange: function(d1, d2, silent) {\n                if (typeof d1 == 'string' && typeof d2 == 'string') {\n                    d1 = moment(d1, opt.format).toDate();\n                    d2 = moment(d2, opt.format).toDate();\n                }\n                setDateRange(d1, d2, silent);\n            },\n            clear: clearSelection,\n            close: closeDatePicker,\n            open: open,\n            redraw: redrawDatePicker,\n            getDatePicker: getDatePicker,\n            resetMonthsView: resetMonthsView,\n            destroy: function() {\n                $(self).unbind('.datepicker');\n                $(self).data('dateRangePicker', '');\n                $(self).data('date-picker-opened', null);\n                box.remove();\n                $(window).unbind('resize.datepicker', calcPosition);\n                $(document).unbind('click.datepicker', closeDatePicker);\n            }\n        });\n\n        $(window).bind('resize.datepicker', calcPosition);\n\n        return this;\n\n        function IsOwnDatePickerClicked(evt, selfObj) {\n            return (selfObj.contains(evt.target) || evt.target == selfObj || (selfObj.childNodes != undefined && $.inArray(evt.target, selfObj.childNodes) >= 0));\n        }\n\n        function init_datepicker() {\n            var self = this;\n\n            if ($(this).data('date-picker-opened')) {\n                closeDatePicker();\n                return;\n            }\n            $(this).data('date-picker-opened', true);\n\n\n            box = createDom().hide();\n            box.append('<div class=\"date-range-length-tip\"></div>');\n\n            $(opt.container).append(box);\n\n            if (!opt.inline) {\n                calcPosition();\n            } else {\n                box.addClass('inline-wrapper');\n            }\n\n            if (opt.alwaysOpen) {\n                box.find('.apply-btn').hide();\n            }\n\n            var defaultTime = getDefaultTime();\n            resetMonthsView(defaultTime);\n\n            if (opt.time.enabled) {\n                if ((opt.startDate && opt.endDate) || (opt.start && opt.end)) {\n                    showTime(moment(opt.start || opt.startDate).toDate(), 'time1');\n                    showTime(moment(opt.end || opt.endDate).toDate(), 'time2');\n                } else {\n                    var defaultEndTime = opt.defaultEndTime ? opt.defaultEndTime : defaultTime;\n                    showTime(defaultTime, 'time1');\n                    showTime(defaultEndTime, 'time2');\n                }\n            }\n\n            //showSelectedInfo();\n\n\n            var defaultTopText = '';\n            if (opt.singleDate)\n                defaultTopText = translate('default-single');\n            else if (opt.minDays && opt.maxDays)\n                defaultTopText = translate('default-range');\n            else if (opt.minDays)\n                defaultTopText = translate('default-more');\n            else if (opt.maxDays)\n                defaultTopText = translate('default-less');\n            else\n                defaultTopText = translate('default-default');\n\n            box.find('.default-top').html(defaultTopText.replace(/\\%d/, opt.minDays).replace(/\\%d/, opt.maxDays));\n            if (opt.singleMonth) {\n                box.addClass('single-month');\n            } else {\n                box.addClass('two-months');\n            }\n\n            setTimeout(function() {\n                updateCalendarWidth();\n                initiated = true;\n            }, 0);\n\n            box.click(function(evt) {\n                evt.stopPropagation();\n            });\n\n            //if user click other place of the webpage, close date range picker window\n            $(document).bind('click.datepicker', function(evt) {\n                if (!IsOwnDatePickerClicked(evt, self[0])) {\n                    if (box.is(':visible')) closeDatePicker();\n                }\n            });\n\n            box.find('.next').click(function () {\n                $(self).trigger('datepicker-next-month-clicked');\n                if (!opt.stickyMonths)\n                    gotoNextMonth(this);\n                else\n                    gotoNextMonth_stickily(this);\n                $(self).trigger('datepicker-next-month-finish-clicked');\n            });\n\n            function gotoNextMonth(self) {\n                var isMonth2 = $(self).parents('table').hasClass('month2');\n                var month = isMonth2 ? opt.month2 : opt.month1;\n                month = nextMonth(month);\n                if (!opt.singleMonth && !opt.singleDate && !isMonth2 && compare_month(month, opt.month2) >= 0 || isMonthOutOfBounds(month)) return;\n                showMonth(month, isMonth2 ? 'month2' : 'month1');\n                showGap();\n            }\n\n            function gotoNextMonth_stickily(self) {\n                var nextMonth1 = nextMonth(opt.month1);\n                var nextMonth2 = nextMonth(opt.month2);\n                if (isMonthOutOfBounds(nextMonth2)) return;\n                if (!opt.singleDate && compare_month(nextMonth1, nextMonth2) >= 0) return;\n                showMonth(nextMonth1, 'month1');\n                showMonth(nextMonth2, 'month2');\n                showSelectedDays();\n            }\n\n\n            box.find('.prev').click(function () {\n                $(self).trigger('datepicker-prev-month-clicked');\n                if (!opt.stickyMonths)\n                    gotoPrevMonth(this);\n                else\n                    gotoPrevMonth_stickily(this);\n                $(self).trigger('datepicker-prev-month-finish-clicked');\n            });\n\n            function gotoPrevMonth(self) {\n                var isMonth2 = $(self).parents('table').hasClass('month2');\n                var month = isMonth2 ? opt.month2 : opt.month1;\n                month = prevMonth(month);\n                if (isMonth2 && compare_month(month, opt.month1) <= 0 || isMonthOutOfBounds(month)) return;\n                showMonth(month, isMonth2 ? 'month2' : 'month1');\n                showGap();\n            }\n\n            function gotoPrevMonth_stickily(self) {\n                var prevMonth1 = prevMonth(opt.month1);\n                var prevMonth2 = prevMonth(opt.month2);\n                if (isMonthOutOfBounds(prevMonth1)) return;\n                if (!opt.singleDate && compare_month(prevMonth2, prevMonth1) <= 0) return;\n                showMonth(prevMonth2, 'month2');\n                showMonth(prevMonth1, 'month1');\n                showSelectedDays();\n            }\n\n            box.attr('unselectable', 'on')\n                .css('user-select', 'none')\n                .bind('selectstart', function(e) {\n                    e.preventDefault();\n                    return false;\n                });\n\n            box.find('.apply-btn').click(function() {\n                closeDatePicker();\n                var dateRange = getDateString(new Date(opt.start)) + opt.separator + getDateString(new Date(opt.end));\n                $(self).trigger('datepicker-apply', {\n                    'value': dateRange,\n                    'date1': new Date(opt.start),\n                    'date2': new Date(opt.end)\n                });\n            });\n\n            box.find('[custom]').click(function() {\n                var valueName = $(this).attr('custom');\n                opt.start = false;\n                opt.end = false;\n                box.find('.day.checked').removeClass('checked');\n                opt.setValue.call(selfDom, valueName);\n                checkSelectionValid();\n                showSelectedInfo(true);\n                showSelectedDays();\n                if (opt.autoClose) closeDatePicker();\n            });\n\n            box.find('[shortcut]').click(function() {\n                var shortcut = $(this).attr('shortcut');\n                var end = new Date(),\n                    start = false;\n                var dir;\n                if (shortcut.indexOf('day') != -1) {\n                    var day = parseInt(shortcut.split(',', 2)[1], 10);\n                    start = new Date(new Date().getTime() + 86400000 * day);\n                    end = new Date(end.getTime() + 86400000 * (day > 0 ? 1 : -1));\n                } else if (shortcut.indexOf('week') != -1) {\n                    dir = shortcut.indexOf('prev,') != -1 ? -1 : 1;\n                    var stopDay;\n                    if (dir == 1)\n                        stopDay = opt.startOfWeek == 'monday' ? 1 : 0;\n                    else\n                        stopDay = opt.startOfWeek == 'monday' ? 0 : 6;\n\n                    end = new Date(end.getTime() - 86400000);\n                    while (end.getDay() != stopDay) end = new Date(end.getTime() + dir * 86400000);\n                    start = new Date(end.getTime() + dir * 86400000 * 6);\n                } else if (shortcut.indexOf('month') != -1) {\n                    dir = shortcut.indexOf('prev,') != -1 ? -1 : 1;\n                    if (dir == 1)\n                        start = nextMonth(end);\n                    else\n                        start = prevMonth(end);\n                    start.setDate(1);\n                    end = nextMonth(start);\n                    end.setDate(1);\n                    end = new Date(end.getTime() - 86400000);\n                } else if (shortcut.indexOf('year') != -1) {\n                    dir = shortcut.indexOf('prev,') != -1 ? -1 : 1;\n                    start = new Date();\n                    start.setFullYear(end.getFullYear() + dir);\n                    start.setMonth(0);\n                    start.setDate(1);\n                    end.setFullYear(end.getFullYear() + dir);\n                    end.setMonth(11);\n                    end.setDate(31);\n                } else if (shortcut == 'custom') {\n                    var name = $(this).html();\n                    if (opt.customShortcuts && opt.customShortcuts.length > 0) {\n                        for (var i = 0; i < opt.customShortcuts.length; i++) {\n                            var sh = opt.customShortcuts[i];\n                            if (sh.name == name) {\n                                var data = [];\n                                // try\n                                // {\n                                data = sh['dates'].call();\n                                //}catch(e){}\n                                if (data && data.length == 2) {\n                                    start = data[0];\n                                    end = data[1];\n                                }\n\n                                // if only one date is specified then just move calendars there\n                                // move calendars to show this date's month and next months\n                                if (data && data.length == 1) {\n                                    var movetodate = data[0];\n                                    showMonth(movetodate, 'month1');\n                                    showMonth(nextMonth(movetodate), 'month2');\n                                    showGap();\n                                }\n\n                                break;\n                            }\n                        }\n                    }\n                }\n                if (start && end) {\n                    setDateRange(start, end);\n                    checkSelectionValid();\n                }\n            });\n\n            box.find('.time1 input[type=range]').bind('change touchmove', function(e) {\n                var target = e.target,\n                    hour = target.name == 'hour' ? $(target).val().replace(/^(\\d{1})$/, '0$1') : undefined,\n                    min = target.name == 'minute' ? $(target).val().replace(/^(\\d{1})$/, '0$1') : undefined;\n                setTime('time1', hour, min);\n            });\n\n            box.find('.time2 input[type=range]').bind('change touchmove', function(e) {\n                var target = e.target,\n                    hour = target.name == 'hour' ? $(target).val().replace(/^(\\d{1})$/, '0$1') : undefined,\n                    min = target.name == 'minute' ? $(target).val().replace(/^(\\d{1})$/, '0$1') : undefined;\n                setTime('time2', hour, min);\n            });\n\n        }\n\n\n        function calcPosition() {\n            if (!opt.inline) {\n                var offset = $(self).offset();\n                if ($(opt.container).css('position') == 'relative') {\n                    var containerOffset = $(opt.container).offset();\n                    box.css({\n                        top: offset.top - containerOffset.top + $(self).outerHeight() + 4,\n                        left: offset.left - containerOffset.left\n                    });\n                } else {\n                    if (offset.left < 460) //left to right\n                    {\n                        box.css({\n                            top: offset.top + $(self).outerHeight() + parseInt($('body').css('border-top') || 0, 10),\n                            left: offset.left\n                        });\n                    } else {\n                        box.css({\n                            top: offset.top + $(self).outerHeight() + parseInt($('body').css('border-top') || 0, 10),\n                            left: offset.left + $(self).width() - box.width() - 16\n                        });\n                    }\n                }\n            }\n        }\n\n        // Return the date picker wrapper element\n        function getDatePicker() {\n            return box;\n        }\n\n        function open(animationTime) {\n            calcPosition();\n            redrawDatePicker();\n            checkAndSetDefaultValue();\n            if (opt.customOpenAnimation) {\n                opt.customOpenAnimation.call(box.get(0), function() {\n                    $(self).trigger('datepicker-opened', {\n                        relatedTarget: box\n                    });\n                });\n            } else {\n                box.slideDown(animationTime, function() {\n                    $(self).trigger('datepicker-opened', {\n                        relatedTarget: box\n                    });\n                });\n            }\n            $(self).trigger('datepicker-open', {\n                relatedTarget: box\n            });\n            showGap();\n            updateCalendarWidth();\n        }\n\n        function checkAndSetDefaultValue() {\n            var __default_string = opt.getValue.call(selfDom);\n            var defaults = __default_string ? __default_string.split(opt.separator) : '';\n\n            if (defaults && ((defaults.length == 1 && opt.singleDate) || defaults.length >= 2)) {\n                var ___format = opt.format;\n                if (___format.match(/Do/)) {\n\n                    ___format = ___format.replace(/Do/, 'D');\n                    defaults[0] = defaults[0].replace(/(\\d+)(th|nd|st)/, '$1');\n                    if (defaults.length >= 2) {\n                        defaults[1] = defaults[1].replace(/(\\d+)(th|nd|st)/, '$1');\n                    }\n                }\n                // set initiated  to avoid triggerring datepicker-change event\n                initiated = false;\n                if (defaults.length >= 2) {\n                    setDateRange(getValidValue(defaults[0], ___format, moment.locale(opt.language)), getValidValue(defaults[1], ___format, moment.locale(opt.language)));\n                } else if (defaults.length == 1 && opt.singleDate) {\n                    setSingleDate(getValidValue(defaults[0], ___format, moment.locale(opt.language)));\n                }\n\n                initiated = true;\n            }\n        }\n\n        function getValidValue(date, format, locale) {\n            if (moment(date, format, locale).isValid()) {\n                return moment(date, format, locale).toDate();\n            } else {\n                return moment().toDate();\n            }\n        }\n\n        function updateCalendarWidth() {\n            var gapMargin = box.find('.gap').css('margin-left');\n            if (gapMargin) gapMargin = parseInt(gapMargin);\n            var w1 = box.find('.month1').width();\n            var w2 = box.find('.gap').width() + (gapMargin ? gapMargin * 2 : 0);\n            var w3 = box.find('.month2').width();\n            box.find('.month-wrapper').width(w1 + w2 + w3 + (opt.singleMonth ? 0 : 77));\n        }\n\n        function renderTime(name, date) {\n            box.find('.' + name + ' input[type=range].hour-range').val(moment(date).hours());\n            box.find('.' + name + ' input[type=range].minute-range').val(moment(date).minutes());\n            setTime(name, moment(date).format('HH'), moment(date).format('mm'));\n        }\n\n        function changeTime(name, date) {\n            opt[name] = parseInt(\n                moment(parseInt(date))\n                .startOf('day')\n                .add(moment(opt[name + 'Time']).format('HH'), 'h')\n                .add(moment(opt[name + 'Time']).format('mm'), 'm').valueOf()\n            );\n        }\n\n        function swapTime() {\n            renderTime('time1', opt.start);\n            renderTime('time2', opt.end);\n        }\n\n        function setTime(name, hour, minute) {\n            hour && (box.find('.' + name + ' .hour-val').text(hour));\n            minute && (box.find('.' + name + ' .minute-val').text(minute));\n            switch (name) {\n                case 'time1':\n                    if (opt.start) {\n                        setRange('start', moment(opt.start));\n                    }\n                    setRange('startTime', moment(opt.startTime || moment().valueOf()));\n                    break;\n                case 'time2':\n                    if (opt.end) {\n                        setRange('end', moment(opt.end));\n                    }\n                    setRange('endTime', moment(opt.endTime || moment().valueOf()));\n                    break;\n            }\n\n            function setRange(name, timePoint) {\n                var h = timePoint.format('HH'),\n                    m = timePoint.format('mm');\n                opt[name] = timePoint\n                    .startOf('day')\n                    .add(hour || h, 'h')\n                    .add(minute || m, 'm')\n                    .valueOf();\n            }\n            checkSelectionValid();\n            showSelectedInfo();\n            showSelectedDays();\n        }\n\n        function clearSelection() {\n            opt.start = false;\n            opt.end = false;\n            box.find('.day.checked').removeClass('checked');\n            box.find('.day.last-date-selected').removeClass('last-date-selected');\n            box.find('.day.first-date-selected').removeClass('first-date-selected');\n            opt.setValue.call(selfDom, '');\n            checkSelectionValid();\n            showSelectedInfo();\n            showSelectedDays();\n        }\n\n        function handleStart(time) {\n            var r = time;\n            if (opt.batchMode === 'week-range') {\n                if (opt.startOfWeek === 'monday') {\n                    r = moment(parseInt(time)).startOf('isoweek').valueOf();\n                } else {\n                    r = moment(parseInt(time)).startOf('week').valueOf();\n                }\n            } else if (opt.batchMode === 'month-range') {\n                r = moment(parseInt(time)).startOf('month').valueOf();\n            }\n            return r;\n        }\n\n        function handleEnd(time) {\n            var r = time;\n            if (opt.batchMode === 'week-range') {\n                if (opt.startOfWeek === 'monday') {\n                    r = moment(parseInt(time)).endOf('isoweek').valueOf();\n                } else {\n                    r = moment(parseInt(time)).endOf('week').valueOf();\n                }\n            } else if (opt.batchMode === 'month-range') {\n                r = moment(parseInt(time)).endOf('month').valueOf();\n            }\n            return r;\n        }\n\n\n        function dayClicked(day) {\n            if (day.hasClass('invalid')) return;\n            var time = day.attr('time');\n            day.addClass('checked');\n            if (opt.singleDate) {\n                opt.start = time;\n                opt.end = false;\n            } else if (opt.batchMode === 'week') {\n                if (opt.startOfWeek === 'monday') {\n                    opt.start = moment(parseInt(time)).startOf('isoweek').valueOf();\n                    opt.end = moment(parseInt(time)).endOf('isoweek').valueOf();\n                } else {\n                    opt.end = moment(parseInt(time)).endOf('week').valueOf();\n                    opt.start = moment(parseInt(time)).startOf('week').valueOf();\n                }\n            } else if (opt.batchMode === 'workweek') {\n                opt.start = moment(parseInt(time)).day(1).valueOf();\n                opt.end = moment(parseInt(time)).day(5).valueOf();\n            } else if (opt.batchMode === 'weekend') {\n                opt.start = moment(parseInt(time)).day(6).valueOf();\n                opt.end = moment(parseInt(time)).day(7).valueOf();\n            } else if (opt.batchMode === 'month') {\n                opt.start = moment(parseInt(time)).startOf('month').valueOf();\n                opt.end = moment(parseInt(time)).endOf('month').valueOf();\n            } else if ((opt.start && opt.end) || (!opt.start && !opt.end)) {\n                opt.start = handleStart(time);\n                opt.end = false;\n            } else if (opt.start) {\n                opt.end = handleEnd(time);\n                if (opt.time.enabled) {\n                    changeTime('end', opt.end);\n                }\n            }\n\n            //Update time in case it is enabled and timestamps are available\n            if (opt.time.enabled) {\n                if (opt.start) {\n                    changeTime('start', opt.start);\n                }\n                if (opt.end) {\n                    changeTime('end', opt.end);\n                }\n            }\n\n            //In case the start is after the end, swap the timestamps\n            if (!opt.singleDate && opt.start && opt.end && opt.start > opt.end) {\n                var tmp = opt.end;\n                opt.end = handleEnd(opt.start);\n                opt.start = handleStart(tmp);\n                if (opt.time.enabled && opt.swapTime) {\n                    swapTime();\n                }\n            }\n\n            opt.start = parseInt(opt.start);\n            opt.end = parseInt(opt.end);\n\n            clearHovering();\n            if (opt.start && !opt.end) {\n                $(self).trigger('datepicker-first-date-selected', {\n                    'date1': new Date(opt.start)\n                });\n                dayHovering(day);\n            }\n            updateSelectableRange(time);\n\n            checkSelectionValid();\n            showSelectedInfo();\n            showSelectedDays();\n            autoclose();\n        }\n\n\n        function weekNumberClicked(weekNumberDom) {\n            var thisTime = parseInt(weekNumberDom.attr('data-start-time'), 10);\n            var date1, date2;\n            if (!opt.startWeek) {\n                opt.startWeek = thisTime;\n                weekNumberDom.addClass('week-number-selected');\n                date1 = new Date(thisTime);\n                opt.start = moment(date1).day(opt.startOfWeek == 'monday' ? 1 : 0).valueOf();\n                opt.end = moment(date1).day(opt.startOfWeek == 'monday' ? 7 : 6).valueOf();\n            } else {\n                box.find('.week-number-selected').removeClass('week-number-selected');\n                date1 = new Date(thisTime < opt.startWeek ? thisTime : opt.startWeek);\n                date2 = new Date(thisTime < opt.startWeek ? opt.startWeek : thisTime);\n                opt.startWeek = false;\n                opt.start = moment(date1).day(opt.startOfWeek == 'monday' ? 1 : 0).valueOf();\n                opt.end = moment(date2).day(opt.startOfWeek == 'monday' ? 7 : 6).valueOf();\n            }\n            updateSelectableRange();\n            checkSelectionValid();\n            showSelectedInfo();\n            showSelectedDays();\n            autoclose();\n        }\n\n        function isValidTime(time) {\n            time = parseInt(time, 10);\n            if (opt.startDate && compare_day(time, opt.startDate) < 0) return false;\n            if (opt.endDate && compare_day(time, opt.endDate) > 0) return false;\n\n            if (opt.start && !opt.end && !opt.singleDate) {\n                //check maxDays and minDays setting\n                if (opt.maxDays > 0 && countDays(time, opt.start) > opt.maxDays) return false;\n                if (opt.minDays > 0 && countDays(time, opt.start) < opt.minDays) return false;\n\n                //check selectForward and selectBackward\n                if (opt.selectForward && time < opt.start) return false;\n                if (opt.selectBackward && time > opt.start) return false;\n\n                //check disabled days\n                if (opt.beforeShowDay && typeof opt.beforeShowDay == 'function') {\n                    var valid = true;\n                    var timeTmp = time;\n                    while (countDays(timeTmp, opt.start) > 1) {\n                        var arr = opt.beforeShowDay(new Date(timeTmp));\n                        if (!arr[0]) {\n                            valid = false;\n                            break;\n                        }\n                        if (Math.abs(timeTmp - opt.start) < 86400000) break;\n                        if (timeTmp > opt.start) timeTmp -= 86400000;\n                        if (timeTmp < opt.start) timeTmp += 86400000;\n                    }\n                    if (!valid) return false;\n                }\n            }\n            return true;\n        }\n\n\n        function updateSelectableRange() {\n            box.find('.day.invalid.tmp').removeClass('tmp invalid').addClass('valid');\n            if (opt.start && !opt.end) {\n                box.find('.day.toMonth.valid').each(function() {\n                    var time = parseInt($(this).attr('time'), 10);\n                    if (!isValidTime(time))\n                        $(this).addClass('invalid tmp').removeClass('valid');\n                    else\n                        $(this).addClass('valid tmp').removeClass('invalid');\n                });\n            }\n\n            return true;\n        }\n\n\n        function dayHovering(day) {\n            var hoverTime = parseInt(day.attr('time'));\n            var tooltip = '';\n\n            if (day.hasClass('has-tooltip') && day.attr('data-tooltip')) {\n                tooltip = '<span style=\"white-space:nowrap\">' + day.attr('data-tooltip') + '</span>';\n            } else if (!day.hasClass('invalid')) {\n                if (opt.singleDate) {\n                    box.find('.day.hovering').removeClass('hovering');\n                    day.addClass('hovering');\n                } else {\n                    box.find('.day').each(function() {\n                        var time = parseInt($(this).attr('time')),\n                            start = opt.start,\n                            end = opt.end;\n\n                        if (time == hoverTime) {\n                            $(this).addClass('hovering');\n                        } else {\n                            $(this).removeClass('hovering');\n                        }\n\n                        if (\n                            (opt.start && !opt.end) &&\n                            (\n                                (opt.start < time && hoverTime >= time) ||\n                                (opt.start > time && hoverTime <= time)\n                            )\n                        ) {\n                            $(this).addClass('hovering');\n                        } else {\n                            $(this).removeClass('hovering');\n                        }\n                    });\n\n                    if (opt.start && !opt.end) {\n                        var days = countDays(hoverTime, opt.start);\n                        if (opt.hoveringTooltip) {\n                            if (typeof opt.hoveringTooltip == 'function') {\n                                tooltip = opt.hoveringTooltip(days, opt.start, hoverTime);\n                            } else if (opt.hoveringTooltip === true && days > 1) {\n                                tooltip = days + ' ' + translate('days');\n                            }\n                        }\n                    }\n                }\n            }\n\n            if (tooltip) {\n                var posDay = day.offset();\n                var posBox = box.offset();\n\n                var _left = posDay.left - posBox.left;\n                var _top = posDay.top - posBox.top;\n                _left += day.width() / 2;\n\n\n                var $tip = box.find('.date-range-length-tip');\n                var w = $tip.css({\n                    'visibility': 'hidden',\n                    'display': 'none'\n                }).html(tooltip).width();\n                var h = $tip.height();\n                _left -= w / 2;\n                _top -= h;\n                setTimeout(function() {\n                    $tip.css({\n                        left: _left,\n                        top: _top,\n                        display: 'block',\n                        'visibility': 'visible'\n                    });\n                }, 10);\n            } else {\n                box.find('.date-range-length-tip').hide();\n            }\n        }\n\n        function clearHovering() {\n            box.find('.day.hovering').removeClass('hovering');\n            box.find('.date-range-length-tip').hide();\n        }\n\n        function autoclose() {\n            if (opt.singleDate === true) {\n                if (initiated && opt.start) {\n                    if (opt.autoClose) closeDatePicker();\n                }\n            } else {\n                if (initiated && opt.start && opt.end) {\n                    if (opt.autoClose) closeDatePicker();\n                }\n            }\n        }\n\n        function checkSelectionValid() {\n            var days = Math.ceil((opt.end - opt.start) / 86400000) + 1;\n            if (opt.singleDate) { // Validate if only start is there\n                if (opt.start && !opt.end)\n                    box.find('.drp_top-bar').removeClass('error').addClass('normal');\n                else\n                    box.find('.drp_top-bar').removeClass('error').removeClass('normal');\n            } else if (opt.maxDays && days > opt.maxDays) {\n                opt.start = false;\n                opt.end = false;\n                box.find('.day').removeClass('checked');\n                box.find('.drp_top-bar').removeClass('normal').addClass('error').find('.error-top').html(translate('less-than').replace('%d', opt.maxDays));\n            } else if (opt.minDays && days < opt.minDays) {\n                opt.start = false;\n                opt.end = false;\n                box.find('.day').removeClass('checked');\n                box.find('.drp_top-bar').removeClass('normal').addClass('error').find('.error-top').html(translate('more-than').replace('%d', opt.minDays));\n            } else {\n                if (opt.start || opt.end)\n                    box.find('.drp_top-bar').removeClass('error').addClass('normal');\n                else\n                    box.find('.drp_top-bar').removeClass('error').removeClass('normal');\n            }\n\n            if ((opt.singleDate && opt.start && !opt.end) || (!opt.singleDate && opt.start && opt.end)) {\n                box.find('.apply-btn').removeClass('disabled');\n            } else {\n                box.find('.apply-btn').addClass('disabled');\n            }\n\n            if (opt.batchMode) {\n                if (\n                    (opt.start && opt.startDate && compare_day(opt.start, opt.startDate) < 0) ||\n                    (opt.end && opt.endDate && compare_day(opt.end, opt.endDate) > 0)\n                ) {\n                    opt.start = false;\n                    opt.end = false;\n                    box.find('.day').removeClass('checked');\n                }\n            }\n        }\n\n        function showSelectedInfo(forceValid, silent) {\n            box.find('.start-day').html('...');\n            box.find('.end-day').html('...');\n            box.find('.selected-days').hide();\n            if (opt.start) {\n                box.find('.start-day').html(getDateString(new Date(parseInt(opt.start))));\n            }\n            if (opt.end) {\n                box.find('.end-day').html(getDateString(new Date(parseInt(opt.end))));\n            }\n            var dateRange;\n            if (opt.start && opt.singleDate) {\n                box.find('.apply-btn').removeClass('disabled');\n                dateRange = getDateString(new Date(opt.start));\n                opt.setValue.call(selfDom, dateRange, getDateString(new Date(opt.start)), getDateString(new Date(opt.end)));\n\n                if (initiated && !silent) {\n                    $(self).trigger('datepicker-change', {\n                        'value': dateRange,\n                        'date1': new Date(opt.start)\n                    });\n                }\n            } else if (opt.start && opt.end) {\n                box.find('.selected-days').show().find('.selected-days-num').html(countDays(opt.end, opt.start));\n                box.find('.apply-btn').removeClass('disabled');\n                dateRange = getDateString(new Date(opt.start)) + opt.separator + getDateString(new Date(opt.end));\n                opt.setValue.call(selfDom, dateRange, getDateString(new Date(opt.start)), getDateString(new Date(opt.end)));\n                if (initiated && !silent) {\n                    $(self).trigger('datepicker-change', {\n                        'value': dateRange,\n                        'date1': new Date(opt.start),\n                        'date2': new Date(opt.end)\n                    });\n                }\n            } else if (forceValid) {\n                box.find('.apply-btn').removeClass('disabled');\n            } else {\n                box.find('.apply-btn').addClass('disabled');\n            }\n        }\n\n        function countDays(start, end) {\n            return Math.abs(daysFrom1970(start) - daysFrom1970(end)) + 1;\n        }\n\n        function setDateRange(date1, date2, silent) {\n            if (date1.getTime() > date2.getTime()) {\n                var tmp = date2;\n                date2 = date1;\n                date1 = tmp;\n                tmp = null;\n            }\n            var valid = true;\n            if (opt.startDate && compare_day(date1, opt.startDate) < 0) valid = false;\n            if (opt.endDate && compare_day(date2, opt.endDate) > 0) valid = false;\n            if (!valid) {\n                showMonth(opt.startDate, 'month1');\n                showMonth(nextMonth(opt.startDate), 'month2');\n                showGap();\n                return;\n            }\n\n            opt.start = date1.getTime();\n            opt.end = date2.getTime();\n\n            if (opt.time.enabled) {\n                renderTime('time1', date1);\n                renderTime('time2', date2);\n            }\n\n            if (opt.stickyMonths || (compare_day(date1, date2) > 0 && compare_month(date1, date2) === 0)) {\n                if (opt.lookBehind) {\n                    date1 = prevMonth(date2);\n                } else {\n                    date2 = nextMonth(date1);\n                }\n            }\n\n            if (opt.stickyMonths && opt.endDate !== false && compare_month(date2, opt.endDate) > 0) {\n                date1 = prevMonth(date1);\n                date2 = prevMonth(date2);\n            }\n\n            if (!opt.stickyMonths) {\n                if (compare_month(date1, date2) === 0) {\n                    if (opt.lookBehind) {\n                        date1 = prevMonth(date2);\n                    } else {\n                        date2 = nextMonth(date1);\n                    }\n                }\n            }\n\n            showMonth(date1, 'month1');\n            showMonth(date2, 'month2');\n            showGap();\n            checkSelectionValid();\n            showSelectedInfo(false, silent);\n            autoclose();\n        }\n\n        function setSingleDate(date1, silent) {\n\n            var valid = true;\n            if (opt.startDate && compare_day(date1, opt.startDate) < 0) valid = false;\n            if (opt.endDate && compare_day(date1, opt.endDate) > 0) valid = false;\n            if (!valid) {\n                showMonth(opt.startDate, 'month1');\n                return;\n            }\n\n            opt.start = date1.getTime();\n\n\n            if (opt.time.enabled) {\n                renderTime('time1', date1);\n\n            }\n            showMonth(date1, 'month1');\n            if (opt.singleMonth !== true) {\n                var date2 = nextMonth(date1);\n                showMonth(date2, 'month2');\n            }\n            showGap();\n            showSelectedInfo(false, silent);\n            autoclose();\n        }\n\n        function showSelectedDays() {\n            if (!opt.start && !opt.end) return;\n            box.find('.day').each(function() {\n                var time = parseInt($(this).attr('time')),\n                    start = opt.start,\n                    end = opt.end;\n                if (opt.time.enabled) {\n                    time = moment(time).startOf('day').valueOf();\n                    start = moment(start || moment().valueOf()).startOf('day').valueOf();\n                    end = moment(end || moment().valueOf()).startOf('day').valueOf();\n                }\n                if (\n                    (opt.start && opt.end && end >= time && start <= time) ||\n                    (opt.start && !opt.end && moment(start).format('YYYY-MM-DD') == moment(time).format('YYYY-MM-DD'))\n                ) {\n                    $(this).addClass('checked');\n                } else {\n                    $(this).removeClass('checked');\n                }\n\n                //add first-date-selected class name to the first date selected\n                if (opt.start && moment(start).format('YYYY-MM-DD') == moment(time).format('YYYY-MM-DD')) {\n                    $(this).addClass('first-date-selected');\n                } else {\n                    $(this).removeClass('first-date-selected');\n                }\n                //add last-date-selected\n                if (opt.end && moment(end).format('YYYY-MM-DD') == moment(time).format('YYYY-MM-DD')) {\n                    $(this).addClass('last-date-selected');\n                } else {\n                    $(this).removeClass('last-date-selected');\n                }\n            });\n\n            box.find('.week-number').each(function() {\n                if ($(this).attr('data-start-time') == opt.startWeek) {\n                    $(this).addClass('week-number-selected');\n                }\n            });\n        }\n\n        function showMonth(date, month) {\n            date = moment(date).toDate();\n            var monthName = nameMonth(date.getMonth());\n            box.find('.' + month + ' .month-name').html(monthName + ' ' + date.getFullYear());\n            box.find('.' + month + ' tbody').html(createMonthHTML(date));\n            opt[month] = date;\n            updateSelectableRange();\n            bindDayEvents();\n        }\n\n        function bindDayEvents() {\n            box.find('.day').unbind(\"click\").click(function(evt) {\n                dayClicked($(this));\n            });\n\n            box.find('.day').unbind(\"mouseenter\").mouseenter(function(evt) {\n                dayHovering($(this));\n            });\n\n            box.find('.day').unbind(\"mouseleave\").mouseleave(function(evt) {\n                box.find('.date-range-length-tip').hide();\n                if (opt.singleDate) {\n                    clearHovering();\n                }\n            });\n\n            box.find('.week-number').unbind(\"click\").click(function(evt) {\n                weekNumberClicked($(this));\n            });\n        }\n\n        function showTime(date, name) {\n            box.find('.' + name).append(getTimeHTML());\n            renderTime(name, date);\n        }\n\n        function nameMonth(m) {\n            return translate('month-name')[m];\n        }\n\n        function getDateString(d) {\n            return moment(d).format(opt.format);\n        }\n\n        function showGap() {\n            showSelectedDays();\n            var m1 = parseInt(moment(opt.month1).format('YYYYMM'));\n            var m2 = parseInt(moment(opt.month2).format('YYYYMM'));\n            var p = Math.abs(m1 - m2);\n            var shouldShow = (p > 1 && p != 89);\n            if (shouldShow) {\n                box.addClass('has-gap').removeClass('no-gap').find('.gap').css('visibility', 'visible');\n            } else {\n                box.removeClass('has-gap').addClass('no-gap').find('.gap').css('visibility', 'hidden');\n            }\n            var h1 = box.find('table.month1').height();\n            var h2 = box.find('table.month2').height();\n\n            if (Math.max(h1, h2) === 0) {\n                box.find('.gap').height(100);\n            } else {\n                box.find('.gap').height(Math.max(h1, h2) + 10);\n            }\n        }\n\n        function closeDatePicker() {\n            if (opt.alwaysOpen) return;\n\n            var afterAnim = function() {\n                $(self).data('date-picker-opened', false);\n                $(self).trigger('datepicker-closed', {\n                    relatedTarget: box\n                });\n            };\n            if (opt.customCloseAnimation) {\n                opt.customCloseAnimation.call(box.get(0), afterAnim);\n            } else {\n                $(box).slideUp(opt.duration, afterAnim);\n            }\n            $(self).trigger('datepicker-close', {\n                relatedTarget: box\n            });\n        }\n\n        function redrawDatePicker() {\n            showMonth(opt.month1, 'month1');\n            showMonth(opt.month2, 'month2');\n        }\n\n        function compare_month(m1, m2) {\n            var p = parseInt(moment(m1).format('YYYYMM')) - parseInt(moment(m2).format('YYYYMM'));\n            if (p > 0) return 1;\n            if (p === 0) return 0;\n            return -1;\n        }\n\n        function compare_day(m1, m2) {\n            var p = parseInt(moment(m1).format('YYYYMMDD')) - parseInt(moment(m2).format('YYYYMMDD'));\n            if (p > 0) return 1;\n            if (p === 0) return 0;\n            return -1;\n        }\n\n        function nextMonth(month) {\n            return moment(month).add(1, 'months').toDate();\n        }\n\n        function prevMonth(month) {\n            return moment(month).add(-1, 'months').toDate();\n        }\n\n        function getTimeHTML() {\n            return '<div>' +\n                '<span>' + translate('Time') + ': <span class=\"hour-val\">00</span>:<span class=\"minute-val\">00</span></span>' +\n                '</div>' +\n                '<div class=\"hour\">' +\n                '<label>' + translate('Hour') + ': <input type=\"range\" class=\"hour-range\" name=\"hour\" min=\"0\" max=\"23\"></label>' +\n                '</div>' +\n                '<div class=\"minute\">' +\n                '<label>' + translate('Minute') + ': <input type=\"range\" class=\"minute-range\" name=\"minute\" min=\"0\" max=\"59\"></label>' +\n                '</div>';\n        }\n\n        function createDom() {\n            var html = '<div class=\"date-picker-wrapper';\n            if (opt.extraClass) html += ' ' + opt.extraClass + ' ';\n            if (opt.singleDate) html += ' single-date ';\n            html += '\">';\n\n            var _colspan = opt.showWeekNumbers ? 6 : 5;\n\n            var arrowPrev = '<i class=\"icon-left-open-mini\"></i>';\n            if (opt.customArrowPrevSymbol) arrowPrev = opt.customArrowPrevSymbol;\n\n            var arrowNext = '<i class=\"icon-right-open-mini\"></i>';\n            if (opt.customArrowNextSymbol) arrowNext = opt.customArrowNextSymbol;\n\n            html += '<div class=\"month-wrapper\">' +\n                '   <table class=\"month1\" cellspacing=\"0\" border=\"0\" cellpadding=\"0\">' +\n                '       <thead>' +\n                '           <tr class=\"caption\">' +\n                '               <th style=\"width:27px;\">' +\n                '                   <div class=\"prev\">' +\n                arrowPrev +\n                '                   </div>' +\n                '               </th>' +\n                '               <th colspan=\"' + _colspan + '\" class=\"month-name\">' +\n                '               </th>' +\n                '               <th style=\"width:27px;\">' +\n                (opt.singleDate || !opt.stickyMonths ? '<div class=\"next\">' + arrowNext + '</div>' : '') +\n                '               </th>' +\n                '           </tr>' +\n                '           <tr class=\"week-name\">' + getWeekHead() +\n                '       </thead>' +\n                '       <tbody></tbody>' +\n                '   </table>';\n\n            if (hasMonth2()) {\n                html += '<div class=\"gap\"></div>' +\n                    '<table class=\"month2\" cellspacing=\"0\" border=\"0\" cellpadding=\"0\">' +\n                    '   <thead>' +\n                    '   <tr class=\"caption\">' +\n                    '       <th style=\"width:27px;\">' +\n                    (!opt.stickyMonths ? '<div class=\"prev\">' + arrowPrev + '</div>' : '') +\n                    '       </th>' +\n                    '       <th colspan=\"' + _colspan + '\" class=\"month-name\">' +\n                    '       </th>' +\n                    '       <th style=\"width:27px;\">' +\n                    '           <div class=\"next\">' + arrowNext + '</div>' +\n                    '       </th>' +\n                    '   </tr>' +\n                    '   <tr class=\"week-name\">' + getWeekHead() +\n                    '   </thead>' +\n                    '   <tbody></tbody>' +\n                    '</table>';\n\n            }\n\n            html += '<div style=\"clear:both;height:0;font-size:0;\"></div>' +\n                '<div class=\"time\">' +\n                '<div class=\"time1\"></div>';\n            if (!opt.singleDate) {\n                html += '<div class=\"time2\"></div>';\n            }\n            html += '</div>' +\n                '<div style=\"clear:both;height:0;font-size:0;\"></div>' +\n                '</div></div>';\n\n            return $(html);\n        }\n\n        function getApplyBtnClass() {\n            var klass = '';\n            if (opt.autoClose === true) {\n                klass += ' hide';\n            }\n            if (opt.applyBtnClass !== '') {\n                klass += ' ' + opt.applyBtnClass;\n            }\n            return klass;\n        }\n\n        function getWeekHead() {\n            var prepend = opt.showWeekNumbers ? '<th>' + translate('week-number') + '</th>' : '';\n            if (opt.startOfWeek == 'monday') {\n                return prepend + '<th>' + translate('week-1') + '</th>' +\n                    '<th>' + translate('week-2') + '</th>' +\n                    '<th>' + translate('week-3') + '</th>' +\n                    '<th>' + translate('week-4') + '</th>' +\n                    '<th>' + translate('week-5') + '</th>' +\n                    '<th>' + translate('week-6') + '</th>' +\n                    '<th>' + translate('week-7') + '</th>';\n            } else {\n                return prepend + '<th>' + translate('week-7') + '</th>' +\n                    '<th>' + translate('week-1') + '</th>' +\n                    '<th>' + translate('week-2') + '</th>' +\n                    '<th>' + translate('week-3') + '</th>' +\n                    '<th>' + translate('week-4') + '</th>' +\n                    '<th>' + translate('week-5') + '</th>' +\n                    '<th>' + translate('week-6') + '</th>';\n            }\n        }\n\n        function isMonthOutOfBounds(month) {\n            month = moment(month);\n            if (opt.startDate && month.endOf('month').isBefore(opt.startDate)) {\n                return true;\n            }\n            if (opt.endDate && month.startOf('month').isAfter(opt.endDate)) {\n                return true;\n            }\n            return false;\n        }\n\n        function hasMonth2() {\n            return (!opt.singleMonth);\n        }\n\n        function attributesCallbacks(initialObject, callbacksArray, today) {\n            var resultObject = $.extend(true, {}, initialObject);\n\n            $.each(callbacksArray, function(cbAttrIndex, cbAttr) {\n                var addAttributes = cbAttr(today);\n                for (var attr in addAttributes) {\n                    if (resultObject.hasOwnProperty(attr)) {\n                        resultObject[attr] += addAttributes[attr];\n                    } else {\n                        resultObject[attr] = addAttributes[attr];\n                    }\n                }\n            });\n\n            var attrString = '';\n\n            for (var attr in resultObject) {\n                if (resultObject.hasOwnProperty(attr)) {\n                    attrString += attr + '=\"' + resultObject[attr] + '\" ';\n                }\n            }\n\n            return attrString;\n        }\n\n        function daysFrom1970(t) {\n            return Math.floor(toLocalTimestamp(t) / 86400000);\n        }\n\n        function toLocalTimestamp(t) {\n            if (moment.isMoment(t)) t = t.toDate().getTime();\n            if (typeof t == 'object' && t.getTime) t = t.getTime();\n            if (typeof t == 'string' && !t.match(/\\d{13}/)) t = moment(t, opt.format).toDate().getTime();\n            t = parseInt(t, 10) - new Date().getTimezoneOffset() * 60 * 1000;\n            return t;\n        }\n\n        function createMonthHTML(d) {\n            var days = [];\n            d.setDate(1);\n            var lastMonth = new Date(d.getTime() - 86400000);\n            var now = new Date();\n\n            var dayOfWeek = d.getDay();\n            if ((dayOfWeek === 0) && (opt.startOfWeek === 'monday')) {\n                // add one week\n                dayOfWeek = 7;\n            }\n            var today, valid;\n\n            if (dayOfWeek > 0) {\n                for (var i = dayOfWeek; i > 0; i--) {\n                    var day = new Date(d.getTime() - 86400000 * i);\n                    valid = isValidTime(day.getTime());\n                    if (opt.startDate && compare_day(day, opt.startDate) < 0) valid = false;\n                    if (opt.endDate && compare_day(day, opt.endDate) > 0) valid = false;\n                    days.push({\n                        date: day,\n                        type: 'lastMonth',\n                        day: day.getDate(),\n                        time: day.getTime(),\n                        valid: valid\n                    });\n                }\n            }\n            var toMonth = d.getMonth();\n            for (var i = 0; i < 40; i++) {\n                today = moment(d).add(i, 'days').toDate();\n                valid = isValidTime(today.getTime());\n                if (opt.startDate && compare_day(today, opt.startDate) < 0) valid = false;\n                if (opt.endDate && compare_day(today, opt.endDate) > 0) valid = false;\n                days.push({\n                    date: today,\n                    type: today.getMonth() == toMonth ? 'toMonth' : 'nextMonth',\n                    day: today.getDate(),\n                    time: today.getTime(),\n                    valid: valid\n                });\n            }\n            var html = [];\n            for (var week = 0; week < 6; week++) {\n                if (days[week * 7].type == 'nextMonth') break;\n                html.push('<tr>');\n\n                for (var day = 0; day < 7; day++) {\n                    var _day = (opt.startOfWeek == 'monday') ? day + 1 : day;\n                    today = days[week * 7 + _day];\n                    var highlightToday = moment(today.time).format('L') == moment(now).format('L');\n                    today.extraClass = '';\n                    today.tooltip = '';\n                    if (today.valid && opt.beforeShowDay && typeof opt.beforeShowDay == 'function') {\n                        var _r = opt.beforeShowDay(moment(today.time).toDate());\n                        today.valid = _r[0];\n                        today.extraClass = _r[1] || '';\n                        today.tooltip = _r[2] || '';\n                        if (today.tooltip !== '') today.extraClass += ' has-tooltip ';\n                    }\n\n                    var todayDivAttr = {\n                        time: today.time,\n                        'data-tooltip': today.tooltip,\n                        'class': 'day ' + today.type + ' ' + today.extraClass + ' ' + (today.valid ? 'valid' : 'invalid') + ' ' + (highlightToday && opt.highlightToday ? 'real-today' : '')\n                    };\n\n                    if (day === 0 && opt.showWeekNumbers) {\n                        html.push('<td><div class=\"week-number\" data-start-time=\"' + today.time + '\">' + opt.getWeekNumber(today.date) + '</div></td>');\n                    }\n\n                    html.push('<td ' + attributesCallbacks({}, opt.dayTdAttrs, today) + '><div ' + attributesCallbacks(todayDivAttr, opt.dayDivAttrs, today) + '>' + showDayHTML(today.time, today.day) + '</div></td>');\n                }\n                html.push('</tr>');\n            }\n            return html.join('');\n        }\n\n        function showDayHTML(time, date) {\n            if (opt.showDateFilter && typeof opt.showDateFilter == 'function') return opt.showDateFilter(time, date);\n            return date;\n        }\n\n        function getLanguages() {\n            if (opt.language == 'auto') {\n                var language = navigator.language ? navigator.language : navigator.browserLanguage;\n                if (!language) {\n                    return $.dateRangePickerLanguages['default'];\n                }\n                language = language.toLowerCase();\n                if(language in $.dateRangePickerLanguages){\n                    return $.dateRangePickerLanguages[language];\n                }\n\n                return $.dateRangePickerLanguages['default'];\n            } else if (opt.language && opt.language in $.dateRangePickerLanguages) {\n                return $.dateRangePickerLanguages[opt.language];\n            } else {\n                return $.dateRangePickerLanguages['default'];\n            }\n        }\n\n        /**\n         * Translate language string, try both the provided translation key, as the lower case version\n         */\n        function translate(translationKey) {\n            var translationKeyLowerCase = translationKey.toLowerCase();\n            var result = (translationKey in languages) ? languages[translationKey] : (translationKeyLowerCase in languages) ? languages[translationKeyLowerCase] : null;\n            var defaultLanguage = $.dateRangePickerLanguages['default'];\n            if (result == null) result = (translationKey in defaultLanguage) ? defaultLanguage[translationKey] : (translationKeyLowerCase in defaultLanguage) ? defaultLanguage[translationKeyLowerCase] : '';\n\n            return result;\n        }\n\n        function getDefaultTime() {\n            var defaultTime = opt.defaultTime ? opt.defaultTime : new Date();\n\n            if (opt.lookBehind) {\n                if (opt.startDate && compare_month(defaultTime, opt.startDate) < 0) defaultTime = nextMonth(moment(opt.startDate).toDate());\n                if (opt.endDate && compare_month(defaultTime, opt.endDate) > 0) defaultTime = moment(opt.endDate).toDate();\n            } else {\n                if (opt.startDate && compare_month(defaultTime, opt.startDate) < 0) defaultTime = moment(opt.startDate).toDate();\n                if (opt.endDate && compare_month(nextMonth(defaultTime), opt.endDate) > 0) defaultTime = prevMonth(moment(opt.endDate).toDate());\n            }\n\n            if (opt.singleDate) {\n                if (opt.startDate && compare_month(defaultTime, opt.startDate) < 0) defaultTime = moment(opt.startDate).toDate();\n                if (opt.endDate && compare_month(defaultTime, opt.endDate) > 0) defaultTime = moment(opt.endDate).toDate();\n            }\n\n            return defaultTime;\n        }\n\n        function resetMonthsView(time) {\n            if (!time) {\n                time = getDefaultTime();\n            }\n\n            if (opt.lookBehind) {\n                showMonth(prevMonth(time), 'month1');\n                showMonth(time, 'month2');\n            } else {\n                showMonth(time, 'month1');\n                showMonth(nextMonth(time), 'month2');\n            }\n\n            if (opt.singleDate) {\n                showMonth(time, 'month1');\n            }\n\n            showSelectedDays();\n            showGap();\n        }\n\n    };\n}));","/**\n * @license AngularJS v1.6.6\n * (c) 2010-2017 Google, Inc. http://angularjs.org\n * License: MIT\n */\n(function(window, angular) {'use strict';\n\nvar ELEMENT_NODE = 1;\nvar COMMENT_NODE = 8;\n\nvar ADD_CLASS_SUFFIX = '-add';\nvar REMOVE_CLASS_SUFFIX = '-remove';\nvar EVENT_CLASS_PREFIX = 'ng-';\nvar ACTIVE_CLASS_SUFFIX = '-active';\nvar PREPARE_CLASS_SUFFIX = '-prepare';\n\nvar NG_ANIMATE_CLASSNAME = 'ng-animate';\nvar NG_ANIMATE_CHILDREN_DATA = '$$ngAnimateChildren';\n\n// Detect proper transitionend/animationend event names.\nvar CSS_PREFIX = '', TRANSITION_PROP, TRANSITIONEND_EVENT, ANIMATION_PROP, ANIMATIONEND_EVENT;\n\n// If unprefixed events are not supported but webkit-prefixed are, use the latter.\n// Otherwise, just use W3C names, browsers not supporting them at all will just ignore them.\n// Note: Chrome implements `window.onwebkitanimationend` and doesn't implement `window.onanimationend`\n// but at the same time dispatches the `animationend` event and not `webkitAnimationEnd`.\n// Register both events in case `window.onanimationend` is not supported because of that,\n// do the same for `transitionend` as Safari is likely to exhibit similar behavior.\n// Also, the only modern browser that uses vendor prefixes for transitions/keyframes is webkit\n// therefore there is no reason to test anymore for other vendor prefixes:\n// http://caniuse.com/#search=transition\nif ((window.ontransitionend === undefined) && (window.onwebkittransitionend !== undefined)) {\n  CSS_PREFIX = '-webkit-';\n  TRANSITION_PROP = 'WebkitTransition';\n  TRANSITIONEND_EVENT = 'webkitTransitionEnd transitionend';\n} else {\n  TRANSITION_PROP = 'transition';\n  TRANSITIONEND_EVENT = 'transitionend';\n}\n\nif ((window.onanimationend === undefined) && (window.onwebkitanimationend !== undefined)) {\n  CSS_PREFIX = '-webkit-';\n  ANIMATION_PROP = 'WebkitAnimation';\n  ANIMATIONEND_EVENT = 'webkitAnimationEnd animationend';\n} else {\n  ANIMATION_PROP = 'animation';\n  ANIMATIONEND_EVENT = 'animationend';\n}\n\nvar DURATION_KEY = 'Duration';\nvar PROPERTY_KEY = 'Property';\nvar DELAY_KEY = 'Delay';\nvar TIMING_KEY = 'TimingFunction';\nvar ANIMATION_ITERATION_COUNT_KEY = 'IterationCount';\nvar ANIMATION_PLAYSTATE_KEY = 'PlayState';\nvar SAFE_FAST_FORWARD_DURATION_VALUE = 9999;\n\nvar ANIMATION_DELAY_PROP = ANIMATION_PROP + DELAY_KEY;\nvar ANIMATION_DURATION_PROP = ANIMATION_PROP + DURATION_KEY;\nvar TRANSITION_DELAY_PROP = TRANSITION_PROP + DELAY_KEY;\nvar TRANSITION_DURATION_PROP = TRANSITION_PROP + DURATION_KEY;\n\nvar ngMinErr = angular.$$minErr('ng');\nfunction assertArg(arg, name, reason) {\n  if (!arg) {\n    throw ngMinErr('areq', 'Argument \\'{0}\\' is {1}', (name || '?'), (reason || 'required'));\n  }\n  return arg;\n}\n\nfunction mergeClasses(a,b) {\n  if (!a && !b) return '';\n  if (!a) return b;\n  if (!b) return a;\n  if (isArray(a)) a = a.join(' ');\n  if (isArray(b)) b = b.join(' ');\n  return a + ' ' + b;\n}\n\nfunction packageStyles(options) {\n  var styles = {};\n  if (options && (options.to || options.from)) {\n    styles.to = options.to;\n    styles.from = options.from;\n  }\n  return styles;\n}\n\nfunction pendClasses(classes, fix, isPrefix) {\n  var className = '';\n  classes = isArray(classes)\n      ? classes\n      : classes && isString(classes) && classes.length\n          ? classes.split(/\\s+/)\n          : [];\n  forEach(classes, function(klass, i) {\n    if (klass && klass.length > 0) {\n      className += (i > 0) ? ' ' : '';\n      className += isPrefix ? fix + klass\n                            : klass + fix;\n    }\n  });\n  return className;\n}\n\nfunction removeFromArray(arr, val) {\n  var index = arr.indexOf(val);\n  if (val >= 0) {\n    arr.splice(index, 1);\n  }\n}\n\nfunction stripCommentsFromElement(element) {\n  if (element instanceof jqLite) {\n    switch (element.length) {\n      case 0:\n        return element;\n\n      case 1:\n        // there is no point of stripping anything if the element\n        // is the only element within the jqLite wrapper.\n        // (it's important that we retain the element instance.)\n        if (element[0].nodeType === ELEMENT_NODE) {\n          return element;\n        }\n        break;\n\n      default:\n        return jqLite(extractElementNode(element));\n    }\n  }\n\n  if (element.nodeType === ELEMENT_NODE) {\n    return jqLite(element);\n  }\n}\n\nfunction extractElementNode(element) {\n  if (!element[0]) return element;\n  for (var i = 0; i < element.length; i++) {\n    var elm = element[i];\n    if (elm.nodeType === ELEMENT_NODE) {\n      return elm;\n    }\n  }\n}\n\nfunction $$addClass($$jqLite, element, className) {\n  forEach(element, function(elm) {\n    $$jqLite.addClass(elm, className);\n  });\n}\n\nfunction $$removeClass($$jqLite, element, className) {\n  forEach(element, function(elm) {\n    $$jqLite.removeClass(elm, className);\n  });\n}\n\nfunction applyAnimationClassesFactory($$jqLite) {\n  return function(element, options) {\n    if (options.addClass) {\n      $$addClass($$jqLite, element, options.addClass);\n      options.addClass = null;\n    }\n    if (options.removeClass) {\n      $$removeClass($$jqLite, element, options.removeClass);\n      options.removeClass = null;\n    }\n  };\n}\n\nfunction prepareAnimationOptions(options) {\n  options = options || {};\n  if (!options.$$prepared) {\n    var domOperation = options.domOperation || noop;\n    options.domOperation = function() {\n      options.$$domOperationFired = true;\n      domOperation();\n      domOperation = noop;\n    };\n    options.$$prepared = true;\n  }\n  return options;\n}\n\nfunction applyAnimationStyles(element, options) {\n  applyAnimationFromStyles(element, options);\n  applyAnimationToStyles(element, options);\n}\n\nfunction applyAnimationFromStyles(element, options) {\n  if (options.from) {\n    element.css(options.from);\n    options.from = null;\n  }\n}\n\nfunction applyAnimationToStyles(element, options) {\n  if (options.to) {\n    element.css(options.to);\n    options.to = null;\n  }\n}\n\nfunction mergeAnimationDetails(element, oldAnimation, newAnimation) {\n  var target = oldAnimation.options || {};\n  var newOptions = newAnimation.options || {};\n\n  var toAdd = (target.addClass || '') + ' ' + (newOptions.addClass || '');\n  var toRemove = (target.removeClass || '') + ' ' + (newOptions.removeClass || '');\n  var classes = resolveElementClasses(element.attr('class'), toAdd, toRemove);\n\n  if (newOptions.preparationClasses) {\n    target.preparationClasses = concatWithSpace(newOptions.preparationClasses, target.preparationClasses);\n    delete newOptions.preparationClasses;\n  }\n\n  // noop is basically when there is no callback; otherwise something has been set\n  var realDomOperation = target.domOperation !== noop ? target.domOperation : null;\n\n  extend(target, newOptions);\n\n  // TODO(matsko or sreeramu): proper fix is to maintain all animation callback in array and call at last,but now only leave has the callback so no issue with this.\n  if (realDomOperation) {\n    target.domOperation = realDomOperation;\n  }\n\n  if (classes.addClass) {\n    target.addClass = classes.addClass;\n  } else {\n    target.addClass = null;\n  }\n\n  if (classes.removeClass) {\n    target.removeClass = classes.removeClass;\n  } else {\n    target.removeClass = null;\n  }\n\n  oldAnimation.addClass = target.addClass;\n  oldAnimation.removeClass = target.removeClass;\n\n  return target;\n}\n\nfunction resolveElementClasses(existing, toAdd, toRemove) {\n  var ADD_CLASS = 1;\n  var REMOVE_CLASS = -1;\n\n  var flags = {};\n  existing = splitClassesToLookup(existing);\n\n  toAdd = splitClassesToLookup(toAdd);\n  forEach(toAdd, function(value, key) {\n    flags[key] = ADD_CLASS;\n  });\n\n  toRemove = splitClassesToLookup(toRemove);\n  forEach(toRemove, function(value, key) {\n    flags[key] = flags[key] === ADD_CLASS ? null : REMOVE_CLASS;\n  });\n\n  var classes = {\n    addClass: '',\n    removeClass: ''\n  };\n\n  forEach(flags, function(val, klass) {\n    var prop, allow;\n    if (val === ADD_CLASS) {\n      prop = 'addClass';\n      allow = !existing[klass] || existing[klass + REMOVE_CLASS_SUFFIX];\n    } else if (val === REMOVE_CLASS) {\n      prop = 'removeClass';\n      allow = existing[klass] || existing[klass + ADD_CLASS_SUFFIX];\n    }\n    if (allow) {\n      if (classes[prop].length) {\n        classes[prop] += ' ';\n      }\n      classes[prop] += klass;\n    }\n  });\n\n  function splitClassesToLookup(classes) {\n    if (isString(classes)) {\n      classes = classes.split(' ');\n    }\n\n    var obj = {};\n    forEach(classes, function(klass) {\n      // sometimes the split leaves empty string values\n      // incase extra spaces were applied to the options\n      if (klass.length) {\n        obj[klass] = true;\n      }\n    });\n    return obj;\n  }\n\n  return classes;\n}\n\nfunction getDomNode(element) {\n  return (element instanceof jqLite) ? element[0] : element;\n}\n\nfunction applyGeneratedPreparationClasses(element, event, options) {\n  var classes = '';\n  if (event) {\n    classes = pendClasses(event, EVENT_CLASS_PREFIX, true);\n  }\n  if (options.addClass) {\n    classes = concatWithSpace(classes, pendClasses(options.addClass, ADD_CLASS_SUFFIX));\n  }\n  if (options.removeClass) {\n    classes = concatWithSpace(classes, pendClasses(options.removeClass, REMOVE_CLASS_SUFFIX));\n  }\n  if (classes.length) {\n    options.preparationClasses = classes;\n    element.addClass(classes);\n  }\n}\n\nfunction clearGeneratedClasses(element, options) {\n  if (options.preparationClasses) {\n    element.removeClass(options.preparationClasses);\n    options.preparationClasses = null;\n  }\n  if (options.activeClasses) {\n    element.removeClass(options.activeClasses);\n    options.activeClasses = null;\n  }\n}\n\nfunction blockTransitions(node, duration) {\n  // we use a negative delay value since it performs blocking\n  // yet it doesn't kill any existing transitions running on the\n  // same element which makes this safe for class-based animations\n  var value = duration ? '-' + duration + 's' : '';\n  applyInlineStyle(node, [TRANSITION_DELAY_PROP, value]);\n  return [TRANSITION_DELAY_PROP, value];\n}\n\nfunction blockKeyframeAnimations(node, applyBlock) {\n  var value = applyBlock ? 'paused' : '';\n  var key = ANIMATION_PROP + ANIMATION_PLAYSTATE_KEY;\n  applyInlineStyle(node, [key, value]);\n  return [key, value];\n}\n\nfunction applyInlineStyle(node, styleTuple) {\n  var prop = styleTuple[0];\n  var value = styleTuple[1];\n  node.style[prop] = value;\n}\n\nfunction concatWithSpace(a,b) {\n  if (!a) return b;\n  if (!b) return a;\n  return a + ' ' + b;\n}\n\nvar $$rAFSchedulerFactory = ['$$rAF', function($$rAF) {\n  var queue, cancelFn;\n\n  function scheduler(tasks) {\n    // we make a copy since RAFScheduler mutates the state\n    // of the passed in array variable and this would be difficult\n    // to track down on the outside code\n    queue = queue.concat(tasks);\n    nextTick();\n  }\n\n  queue = scheduler.queue = [];\n\n  /* waitUntilQuiet does two things:\n   * 1. It will run the FINAL `fn` value only when an uncanceled RAF has passed through\n   * 2. It will delay the next wave of tasks from running until the quiet `fn` has run.\n   *\n   * The motivation here is that animation code can request more time from the scheduler\n   * before the next wave runs. This allows for certain DOM properties such as classes to\n   * be resolved in time for the next animation to run.\n   */\n  scheduler.waitUntilQuiet = function(fn) {\n    if (cancelFn) cancelFn();\n\n    cancelFn = $$rAF(function() {\n      cancelFn = null;\n      fn();\n      nextTick();\n    });\n  };\n\n  return scheduler;\n\n  function nextTick() {\n    if (!queue.length) return;\n\n    var items = queue.shift();\n    for (var i = 0; i < items.length; i++) {\n      items[i]();\n    }\n\n    if (!cancelFn) {\n      $$rAF(function() {\n        if (!cancelFn) nextTick();\n      });\n    }\n  }\n}];\n\n/**\n * @ngdoc directive\n * @name ngAnimateChildren\n * @restrict AE\n * @element ANY\n *\n * @description\n *\n * ngAnimateChildren allows you to specify that children of this element should animate even if any\n * of the children's parents are currently animating. By default, when an element has an active `enter`, `leave`, or `move`\n * (structural) animation, child elements that also have an active structural animation are not animated.\n *\n * Note that even if `ngAnimateChildren` is set, no child animations will run when the parent element is removed from the DOM (`leave` animation).\n *\n *\n * @param {string} ngAnimateChildren If the value is empty, `true` or `on`,\n *     then child animations are allowed. If the value is `false`, child animations are not allowed.\n *\n * @example\n * <example module=\"ngAnimateChildren\" name=\"ngAnimateChildren\" deps=\"angular-animate.js\" animations=\"true\">\n     <file name=\"index.html\">\n       <div ng-controller=\"MainController as main\">\n         <label>Show container? <input type=\"checkbox\" ng-model=\"main.enterElement\" /></label>\n         <label>Animate children? <input type=\"checkbox\" ng-model=\"main.animateChildren\" /></label>\n         <hr>\n         <div ng-animate-children=\"{{main.animateChildren}}\">\n           <div ng-if=\"main.enterElement\" class=\"container\">\n             List of items:\n             <div ng-repeat=\"item in [0, 1, 2, 3]\" class=\"item\">Item {{item}}</div>\n           </div>\n         </div>\n       </div>\n     </file>\n     <file name=\"animations.css\">\n\n      .container.ng-enter,\n      .container.ng-leave {\n        transition: all ease 1.5s;\n      }\n\n      .container.ng-enter,\n      .container.ng-leave-active {\n        opacity: 0;\n      }\n\n      .container.ng-leave,\n      .container.ng-enter-active {\n        opacity: 1;\n      }\n\n      .item {\n        background: firebrick;\n        color: #FFF;\n        margin-bottom: 10px;\n      }\n\n      .item.ng-enter,\n      .item.ng-leave {\n        transition: transform 1.5s ease;\n      }\n\n      .item.ng-enter {\n        transform: translateX(50px);\n      }\n\n      .item.ng-enter-active {\n        transform: translateX(0);\n      }\n    </file>\n    <file name=\"script.js\">\n      angular.module('ngAnimateChildren', ['ngAnimate'])\n        .controller('MainController', function MainController() {\n          this.animateChildren = false;\n          this.enterElement = false;\n        });\n    </file>\n  </example>\n */\nvar $$AnimateChildrenDirective = ['$interpolate', function($interpolate) {\n  return {\n    link: function(scope, element, attrs) {\n      var val = attrs.ngAnimateChildren;\n      if (isString(val) && val.length === 0) { //empty attribute\n        element.data(NG_ANIMATE_CHILDREN_DATA, true);\n      } else {\n        // Interpolate and set the value, so that it is available to\n        // animations that run right after compilation\n        setData($interpolate(val)(scope));\n        attrs.$observe('ngAnimateChildren', setData);\n      }\n\n      function setData(value) {\n        value = value === 'on' || value === 'true';\n        element.data(NG_ANIMATE_CHILDREN_DATA, value);\n      }\n    }\n  };\n}];\n\n/* exported $AnimateCssProvider */\n\nvar ANIMATE_TIMER_KEY = '$$animateCss';\n\n/**\n * @ngdoc service\n * @name $animateCss\n * @kind object\n *\n * @description\n * The `$animateCss` service is a useful utility to trigger customized CSS-based transitions/keyframes\n * from a JavaScript-based animation or directly from a directive. The purpose of `$animateCss` is NOT\n * to side-step how `$animate` and ngAnimate work, but the goal is to allow pre-existing animations or\n * directives to create more complex animations that can be purely driven using CSS code.\n *\n * Note that only browsers that support CSS transitions and/or keyframe animations are capable of\n * rendering animations triggered via `$animateCss` (bad news for IE9 and lower).\n *\n * ## Usage\n * Once again, `$animateCss` is designed to be used inside of a registered JavaScript animation that\n * is powered by ngAnimate. It is possible to use `$animateCss` directly inside of a directive, however,\n * any automatic control over cancelling animations and/or preventing animations from being run on\n * child elements will not be handled by Angular. For this to work as expected, please use `$animate` to\n * trigger the animation and then setup a JavaScript animation that injects `$animateCss` to trigger\n * the CSS animation.\n *\n * The example below shows how we can create a folding animation on an element using `ng-if`:\n *\n * ```html\n * <!-- notice the `fold-animation` CSS class -->\n * <div ng-if=\"onOff\" class=\"fold-animation\">\n *   This element will go BOOM\n * </div>\n * <button ng-click=\"onOff=true\">Fold In</button>\n * ```\n *\n * Now we create the **JavaScript animation** that will trigger the CSS transition:\n *\n * ```js\n * ngModule.animation('.fold-animation', ['$animateCss', function($animateCss) {\n *   return {\n *     enter: function(element, doneFn) {\n *       var height = element[0].offsetHeight;\n *       return $animateCss(element, {\n *         from: { height:'0px' },\n *         to: { height:height + 'px' },\n *         duration: 1 // one second\n *       });\n *     }\n *   }\n * }]);\n * ```\n *\n * ## More Advanced Uses\n *\n * `$animateCss` is the underlying code that ngAnimate uses to power **CSS-based animations** behind the scenes. Therefore CSS hooks\n * like `.ng-EVENT`, `.ng-EVENT-active`, `.ng-EVENT-stagger` are all features that can be triggered using `$animateCss` via JavaScript code.\n *\n * This also means that just about any combination of adding classes, removing classes, setting styles, dynamically setting a keyframe animation,\n * applying a hardcoded duration or delay value, changing the animation easing or applying a stagger animation are all options that work with\n * `$animateCss`. The service itself is smart enough to figure out the combination of options and examine the element styling properties in order\n * to provide a working animation that will run in CSS.\n *\n * The example below showcases a more advanced version of the `.fold-animation` from the example above:\n *\n * ```js\n * ngModule.animation('.fold-animation', ['$animateCss', function($animateCss) {\n *   return {\n *     enter: function(element, doneFn) {\n *       var height = element[0].offsetHeight;\n *       return $animateCss(element, {\n *         addClass: 'red large-text pulse-twice',\n *         easing: 'ease-out',\n *         from: { height:'0px' },\n *         to: { height:height + 'px' },\n *         duration: 1 // one second\n *       });\n *     }\n *   }\n * }]);\n * ```\n *\n * Since we're adding/removing CSS classes then the CSS transition will also pick those up:\n *\n * ```css\n * /&#42; since a hardcoded duration value of 1 was provided in the JavaScript animation code,\n * the CSS classes below will be transitioned despite them being defined as regular CSS classes &#42;/\n * .red { background:red; }\n * .large-text { font-size:20px; }\n *\n * /&#42; we can also use a keyframe animation and $animateCss will make it work alongside the transition &#42;/\n * .pulse-twice {\n *   animation: 0.5s pulse linear 2;\n *   -webkit-animation: 0.5s pulse linear 2;\n * }\n *\n * @keyframes pulse {\n *   from { transform: scale(0.5); }\n *   to { transform: scale(1.5); }\n * }\n *\n * @-webkit-keyframes pulse {\n *   from { -webkit-transform: scale(0.5); }\n *   to { -webkit-transform: scale(1.5); }\n * }\n * ```\n *\n * Given this complex combination of CSS classes, styles and options, `$animateCss` will figure everything out and make the animation happen.\n *\n * ## How the Options are handled\n *\n * `$animateCss` is very versatile and intelligent when it comes to figuring out what configurations to apply to the element to ensure the animation\n * works with the options provided. Say for example we were adding a class that contained a keyframe value and we wanted to also animate some inline\n * styles using the `from` and `to` properties.\n *\n * ```js\n * var animator = $animateCss(element, {\n *   from: { background:'red' },\n *   to: { background:'blue' }\n * });\n * animator.start();\n * ```\n *\n * ```css\n * .rotating-animation {\n *   animation:0.5s rotate linear;\n *   -webkit-animation:0.5s rotate linear;\n * }\n *\n * @keyframes rotate {\n *   from { transform: rotate(0deg); }\n *   to { transform: rotate(360deg); }\n * }\n *\n * @-webkit-keyframes rotate {\n *   from { -webkit-transform: rotate(0deg); }\n *   to { -webkit-transform: rotate(360deg); }\n * }\n * ```\n *\n * The missing pieces here are that we do not have a transition set (within the CSS code nor within the `$animateCss` options) and the duration of the animation is\n * going to be detected from what the keyframe styles on the CSS class are. In this event, `$animateCss` will automatically create an inline transition\n * style matching the duration detected from the keyframe style (which is present in the CSS class that is being added) and then prepare both the transition\n * and keyframe animations to run in parallel on the element. Then when the animation is underway the provided `from` and `to` CSS styles will be applied\n * and spread across the transition and keyframe animation.\n *\n * ## What is returned\n *\n * `$animateCss` works in two stages: a preparation phase and an animation phase. Therefore when `$animateCss` is first called it will NOT actually\n * start the animation. All that is going on here is that the element is being prepared for the animation (which means that the generated CSS classes are\n * added and removed on the element). Once `$animateCss` is called it will return an object with the following properties:\n *\n * ```js\n * var animator = $animateCss(element, { ... });\n * ```\n *\n * Now what do the contents of our `animator` variable look like:\n *\n * ```js\n * {\n *   // starts the animation\n *   start: Function,\n *\n *   // ends (aborts) the animation\n *   end: Function\n * }\n * ```\n *\n * To actually start the animation we need to run `animation.start()` which will then return a promise that we can hook into to detect when the animation ends.\n * If we choose not to run the animation then we MUST run `animation.end()` to perform a cleanup on the element (since some CSS classes and styles may have been\n * applied to the element during the preparation phase). Note that all other properties such as duration, delay, transitions and keyframes are just properties\n * and that changing them will not reconfigure the parameters of the animation.\n *\n * ### runner.done() vs runner.then()\n * It is documented that `animation.start()` will return a promise object and this is true, however, there is also an additional method available on the\n * runner called `.done(callbackFn)`. The done method works the same as `.finally(callbackFn)`, however, it does **not trigger a digest to occur**.\n * Therefore, for performance reasons, it's always best to use `runner.done(callback)` instead of `runner.then()`, `runner.catch()` or `runner.finally()`\n * unless you really need a digest to kick off afterwards.\n *\n * Keep in mind that, to make this easier, ngAnimate has tweaked the JS animations API to recognize when a runner instance is returned from $animateCss\n * (so there is no need to call `runner.done(doneFn)` inside of your JavaScript animation code).\n * Check the {@link ngAnimate.$animateCss#usage animation code above} to see how this works.\n *\n * @param {DOMElement} element the element that will be animated\n * @param {object} options the animation-related options that will be applied during the animation\n *\n * * `event` - The DOM event (e.g. enter, leave, move). When used, a generated CSS class of `ng-EVENT` and `ng-EVENT-active` will be applied\n * to the element during the animation. Multiple events can be provided when spaces are used as a separator. (Note that this will not perform any DOM operation.)\n * * `structural` - Indicates that the `ng-` prefix will be added to the event class. Setting to `false` or omitting will turn `ng-EVENT` and\n * `ng-EVENT-active` in `EVENT` and `EVENT-active`. Unused if `event` is omitted.\n * * `easing` - The CSS easing value that will be applied to the transition or keyframe animation (or both).\n * * `transitionStyle` - The raw CSS transition style that will be used (e.g. `1s linear all`).\n * * `keyframeStyle` - The raw CSS keyframe animation style that will be used (e.g. `1s my_animation linear`).\n * * `from` - The starting CSS styles (a key/value object) that will be applied at the start of the animation.\n * * `to` - The ending CSS styles (a key/value object) that will be applied across the animation via a CSS transition.\n * * `addClass` - A space separated list of CSS classes that will be added to the element and spread across the animation.\n * * `removeClass` - A space separated list of CSS classes that will be removed from the element and spread across the animation.\n * * `duration` - A number value representing the total duration of the transition and/or keyframe (note that a value of 1 is 1000ms). If a value of `0`\n * is provided then the animation will be skipped entirely.\n * * `delay` - A number value representing the total delay of the transition and/or keyframe (note that a value of 1 is 1000ms). If a value of `true` is\n * used then whatever delay value is detected from the CSS classes will be mirrored on the elements styles (e.g. by setting delay true then the style value\n * of the element will be `transition-delay: DETECTED_VALUE`). Using `true` is useful when you want the CSS classes and inline styles to all share the same\n * CSS delay value.\n * * `stagger` - A numeric time value representing the delay between successively animated elements\n * ({@link ngAnimate#css-staggering-animations Click here to learn how CSS-based staggering works in ngAnimate.})\n * * `staggerIndex` - The numeric index representing the stagger item (e.g. a value of 5 is equal to the sixth item in the stagger; therefore when a\n *   `stagger` option value of `0.1` is used then there will be a stagger delay of `600ms`)\n * * `applyClassesEarly` - Whether or not the classes being added or removed will be used when detecting the animation. This is set by `$animate` when enter/leave/move animations are fired to ensure that the CSS classes are resolved in time. (Note that this will prevent any transitions from occurring on the classes being added and removed.)\n * * `cleanupStyles` - Whether or not the provided `from` and `to` styles will be removed once\n *    the animation is closed. This is useful for when the styles are used purely for the sake of\n *    the animation and do not have a lasting visual effect on the element (e.g. a collapse and open animation).\n *    By default this value is set to `false`.\n *\n * @return {object} an object with start and end methods and details about the animation.\n *\n * * `start` - The method to start the animation. This will return a `Promise` when called.\n * * `end` - This method will cancel the animation and remove all applied CSS classes and styles.\n */\nvar ONE_SECOND = 1000;\n\nvar ELAPSED_TIME_MAX_DECIMAL_PLACES = 3;\nvar CLOSING_TIME_BUFFER = 1.5;\n\nvar DETECT_CSS_PROPERTIES = {\n  transitionDuration:      TRANSITION_DURATION_PROP,\n  transitionDelay:         TRANSITION_DELAY_PROP,\n  transitionProperty:      TRANSITION_PROP + PROPERTY_KEY,\n  animationDuration:       ANIMATION_DURATION_PROP,\n  animationDelay:          ANIMATION_DELAY_PROP,\n  animationIterationCount: ANIMATION_PROP + ANIMATION_ITERATION_COUNT_KEY\n};\n\nvar DETECT_STAGGER_CSS_PROPERTIES = {\n  transitionDuration:      TRANSITION_DURATION_PROP,\n  transitionDelay:         TRANSITION_DELAY_PROP,\n  animationDuration:       ANIMATION_DURATION_PROP,\n  animationDelay:          ANIMATION_DELAY_PROP\n};\n\nfunction getCssKeyframeDurationStyle(duration) {\n  return [ANIMATION_DURATION_PROP, duration + 's'];\n}\n\nfunction getCssDelayStyle(delay, isKeyframeAnimation) {\n  var prop = isKeyframeAnimation ? ANIMATION_DELAY_PROP : TRANSITION_DELAY_PROP;\n  return [prop, delay + 's'];\n}\n\nfunction computeCssStyles($window, element, properties) {\n  var styles = Object.create(null);\n  var detectedStyles = $window.getComputedStyle(element) || {};\n  forEach(properties, function(formalStyleName, actualStyleName) {\n    var val = detectedStyles[formalStyleName];\n    if (val) {\n      var c = val.charAt(0);\n\n      // only numerical-based values have a negative sign or digit as the first value\n      if (c === '-' || c === '+' || c >= 0) {\n        val = parseMaxTime(val);\n      }\n\n      // by setting this to null in the event that the delay is not set or is set directly as 0\n      // then we can still allow for negative values to be used later on and not mistake this\n      // value for being greater than any other negative value.\n      if (val === 0) {\n        val = null;\n      }\n      styles[actualStyleName] = val;\n    }\n  });\n\n  return styles;\n}\n\nfunction parseMaxTime(str) {\n  var maxValue = 0;\n  var values = str.split(/\\s*,\\s*/);\n  forEach(values, function(value) {\n    // it's always safe to consider only second values and omit `ms` values since\n    // getComputedStyle will always handle the conversion for us\n    if (value.charAt(value.length - 1) === 's') {\n      value = value.substring(0, value.length - 1);\n    }\n    value = parseFloat(value) || 0;\n    maxValue = maxValue ? Math.max(value, maxValue) : value;\n  });\n  return maxValue;\n}\n\nfunction truthyTimingValue(val) {\n  return val === 0 || val != null;\n}\n\nfunction getCssTransitionDurationStyle(duration, applyOnlyDuration) {\n  var style = TRANSITION_PROP;\n  var value = duration + 's';\n  if (applyOnlyDuration) {\n    style += DURATION_KEY;\n  } else {\n    value += ' linear all';\n  }\n  return [style, value];\n}\n\nfunction createLocalCacheLookup() {\n  var cache = Object.create(null);\n  return {\n    flush: function() {\n      cache = Object.create(null);\n    },\n\n    count: function(key) {\n      var entry = cache[key];\n      return entry ? entry.total : 0;\n    },\n\n    get: function(key) {\n      var entry = cache[key];\n      return entry && entry.value;\n    },\n\n    put: function(key, value) {\n      if (!cache[key]) {\n        cache[key] = { total: 1, value: value };\n      } else {\n        cache[key].total++;\n      }\n    }\n  };\n}\n\n// we do not reassign an already present style value since\n// if we detect the style property value again we may be\n// detecting styles that were added via the `from` styles.\n// We make use of `isDefined` here since an empty string\n// or null value (which is what getPropertyValue will return\n// for a non-existing style) will still be marked as a valid\n// value for the style (a falsy value implies that the style\n// is to be removed at the end of the animation). If we had a simple\n// \"OR\" statement then it would not be enough to catch that.\nfunction registerRestorableStyles(backup, node, properties) {\n  forEach(properties, function(prop) {\n    backup[prop] = isDefined(backup[prop])\n        ? backup[prop]\n        : node.style.getPropertyValue(prop);\n  });\n}\n\nvar $AnimateCssProvider = ['$animateProvider', /** @this */ function($animateProvider) {\n  var gcsLookup = createLocalCacheLookup();\n  var gcsStaggerLookup = createLocalCacheLookup();\n\n  this.$get = ['$window', '$$jqLite', '$$AnimateRunner', '$timeout',\n               '$$forceReflow', '$sniffer', '$$rAFScheduler', '$$animateQueue',\n       function($window,   $$jqLite,   $$AnimateRunner,   $timeout,\n                $$forceReflow,   $sniffer,   $$rAFScheduler, $$animateQueue) {\n\n    var applyAnimationClasses = applyAnimationClassesFactory($$jqLite);\n\n    var parentCounter = 0;\n    function gcsHashFn(node, extraClasses) {\n      var KEY = '$$ngAnimateParentKey';\n      var parentNode = node.parentNode;\n      var parentID = parentNode[KEY] || (parentNode[KEY] = ++parentCounter);\n      return parentID + '-' + node.getAttribute('class') + '-' + extraClasses;\n    }\n\n    function computeCachedCssStyles(node, className, cacheKey, properties) {\n      var timings = gcsLookup.get(cacheKey);\n\n      if (!timings) {\n        timings = computeCssStyles($window, node, properties);\n        if (timings.animationIterationCount === 'infinite') {\n          timings.animationIterationCount = 1;\n        }\n      }\n\n      // we keep putting this in multiple times even though the value and the cacheKey are the same\n      // because we're keeping an internal tally of how many duplicate animations are detected.\n      gcsLookup.put(cacheKey, timings);\n      return timings;\n    }\n\n    function computeCachedCssStaggerStyles(node, className, cacheKey, properties) {\n      var stagger;\n\n      // if we have one or more existing matches of matching elements\n      // containing the same parent + CSS styles (which is how cacheKey works)\n      // then staggering is possible\n      if (gcsLookup.count(cacheKey) > 0) {\n        stagger = gcsStaggerLookup.get(cacheKey);\n\n        if (!stagger) {\n          var staggerClassName = pendClasses(className, '-stagger');\n\n          $$jqLite.addClass(node, staggerClassName);\n\n          stagger = computeCssStyles($window, node, properties);\n\n          // force the conversion of a null value to zero incase not set\n          stagger.animationDuration = Math.max(stagger.animationDuration, 0);\n          stagger.transitionDuration = Math.max(stagger.transitionDuration, 0);\n\n          $$jqLite.removeClass(node, staggerClassName);\n\n          gcsStaggerLookup.put(cacheKey, stagger);\n        }\n      }\n\n      return stagger || {};\n    }\n\n    var rafWaitQueue = [];\n    function waitUntilQuiet(callback) {\n      rafWaitQueue.push(callback);\n      $$rAFScheduler.waitUntilQuiet(function() {\n        gcsLookup.flush();\n        gcsStaggerLookup.flush();\n\n        // DO NOT REMOVE THIS LINE OR REFACTOR OUT THE `pageWidth` variable.\n        // PLEASE EXAMINE THE `$$forceReflow` service to understand why.\n        var pageWidth = $$forceReflow();\n\n        // we use a for loop to ensure that if the queue is changed\n        // during this looping then it will consider new requests\n        for (var i = 0; i < rafWaitQueue.length; i++) {\n          rafWaitQueue[i](pageWidth);\n        }\n        rafWaitQueue.length = 0;\n      });\n    }\n\n    function computeTimings(node, className, cacheKey) {\n      var timings = computeCachedCssStyles(node, className, cacheKey, DETECT_CSS_PROPERTIES);\n      var aD = timings.animationDelay;\n      var tD = timings.transitionDelay;\n      timings.maxDelay = aD && tD\n          ? Math.max(aD, tD)\n          : (aD || tD);\n      timings.maxDuration = Math.max(\n          timings.animationDuration * timings.animationIterationCount,\n          timings.transitionDuration);\n\n      return timings;\n    }\n\n    return function init(element, initialOptions) {\n      // all of the animation functions should create\n      // a copy of the options data, however, if a\n      // parent service has already created a copy then\n      // we should stick to using that\n      var options = initialOptions || {};\n      if (!options.$$prepared) {\n        options = prepareAnimationOptions(copy(options));\n      }\n\n      var restoreStyles = {};\n      var node = getDomNode(element);\n      if (!node\n          || !node.parentNode\n          || !$$animateQueue.enabled()) {\n        return closeAndReturnNoopAnimator();\n      }\n\n      var temporaryStyles = [];\n      var classes = element.attr('class');\n      var styles = packageStyles(options);\n      var animationClosed;\n      var animationPaused;\n      var animationCompleted;\n      var runner;\n      var runnerHost;\n      var maxDelay;\n      var maxDelayTime;\n      var maxDuration;\n      var maxDurationTime;\n      var startTime;\n      var events = [];\n\n      if (options.duration === 0 || (!$sniffer.animations && !$sniffer.transitions)) {\n        return closeAndReturnNoopAnimator();\n      }\n\n      var method = options.event && isArray(options.event)\n            ? options.event.join(' ')\n            : options.event;\n\n      var isStructural = method && options.structural;\n      var structuralClassName = '';\n      var addRemoveClassName = '';\n\n      if (isStructural) {\n        structuralClassName = pendClasses(method, EVENT_CLASS_PREFIX, true);\n      } else if (method) {\n        structuralClassName = method;\n      }\n\n      if (options.addClass) {\n        addRemoveClassName += pendClasses(options.addClass, ADD_CLASS_SUFFIX);\n      }\n\n      if (options.removeClass) {\n        if (addRemoveClassName.length) {\n          addRemoveClassName += ' ';\n        }\n        addRemoveClassName += pendClasses(options.removeClass, REMOVE_CLASS_SUFFIX);\n      }\n\n      // there may be a situation where a structural animation is combined together\n      // with CSS classes that need to resolve before the animation is computed.\n      // However this means that there is no explicit CSS code to block the animation\n      // from happening (by setting 0s none in the class name). If this is the case\n      // we need to apply the classes before the first rAF so we know to continue if\n      // there actually is a detected transition or keyframe animation\n      if (options.applyClassesEarly && addRemoveClassName.length) {\n        applyAnimationClasses(element, options);\n      }\n\n      var preparationClasses = [structuralClassName, addRemoveClassName].join(' ').trim();\n      var fullClassName = classes + ' ' + preparationClasses;\n      var activeClasses = pendClasses(preparationClasses, ACTIVE_CLASS_SUFFIX);\n      var hasToStyles = styles.to && Object.keys(styles.to).length > 0;\n      var containsKeyframeAnimation = (options.keyframeStyle || '').length > 0;\n\n      // there is no way we can trigger an animation if no styles and\n      // no classes are being applied which would then trigger a transition,\n      // unless there a is raw keyframe value that is applied to the element.\n      if (!containsKeyframeAnimation\n           && !hasToStyles\n           && !preparationClasses) {\n        return closeAndReturnNoopAnimator();\n      }\n\n      var cacheKey, stagger;\n      if (options.stagger > 0) {\n        var staggerVal = parseFloat(options.stagger);\n        stagger = {\n          transitionDelay: staggerVal,\n          animationDelay: staggerVal,\n          transitionDuration: 0,\n          animationDuration: 0\n        };\n      } else {\n        cacheKey = gcsHashFn(node, fullClassName);\n        stagger = computeCachedCssStaggerStyles(node, preparationClasses, cacheKey, DETECT_STAGGER_CSS_PROPERTIES);\n      }\n\n      if (!options.$$skipPreparationClasses) {\n        $$jqLite.addClass(element, preparationClasses);\n      }\n\n      var applyOnlyDuration;\n\n      if (options.transitionStyle) {\n        var transitionStyle = [TRANSITION_PROP, options.transitionStyle];\n        applyInlineStyle(node, transitionStyle);\n        temporaryStyles.push(transitionStyle);\n      }\n\n      if (options.duration >= 0) {\n        applyOnlyDuration = node.style[TRANSITION_PROP].length > 0;\n        var durationStyle = getCssTransitionDurationStyle(options.duration, applyOnlyDuration);\n\n        // we set the duration so that it will be picked up by getComputedStyle later\n        applyInlineStyle(node, durationStyle);\n        temporaryStyles.push(durationStyle);\n      }\n\n      if (options.keyframeStyle) {\n        var keyframeStyle = [ANIMATION_PROP, options.keyframeStyle];\n        applyInlineStyle(node, keyframeStyle);\n        temporaryStyles.push(keyframeStyle);\n      }\n\n      var itemIndex = stagger\n          ? options.staggerIndex >= 0\n              ? options.staggerIndex\n              : gcsLookup.count(cacheKey)\n          : 0;\n\n      var isFirst = itemIndex === 0;\n\n      // this is a pre-emptive way of forcing the setup classes to be added and applied INSTANTLY\n      // without causing any combination of transitions to kick in. By adding a negative delay value\n      // it forces the setup class' transition to end immediately. We later then remove the negative\n      // transition delay to allow for the transition to naturally do it's thing. The beauty here is\n      // that if there is no transition defined then nothing will happen and this will also allow\n      // other transitions to be stacked on top of each other without any chopping them out.\n      if (isFirst && !options.skipBlocking) {\n        blockTransitions(node, SAFE_FAST_FORWARD_DURATION_VALUE);\n      }\n\n      var timings = computeTimings(node, fullClassName, cacheKey);\n      var relativeDelay = timings.maxDelay;\n      maxDelay = Math.max(relativeDelay, 0);\n      maxDuration = timings.maxDuration;\n\n      var flags = {};\n      flags.hasTransitions          = timings.transitionDuration > 0;\n      flags.hasAnimations           = timings.animationDuration > 0;\n      flags.hasTransitionAll        = flags.hasTransitions && timings.transitionProperty === 'all';\n      flags.applyTransitionDuration = hasToStyles && (\n                                        (flags.hasTransitions && !flags.hasTransitionAll)\n                                         || (flags.hasAnimations && !flags.hasTransitions));\n      flags.applyAnimationDuration  = options.duration && flags.hasAnimations;\n      flags.applyTransitionDelay    = truthyTimingValue(options.delay) && (flags.applyTransitionDuration || flags.hasTransitions);\n      flags.applyAnimationDelay     = truthyTimingValue(options.delay) && flags.hasAnimations;\n      flags.recalculateTimingStyles = addRemoveClassName.length > 0;\n\n      if (flags.applyTransitionDuration || flags.applyAnimationDuration) {\n        maxDuration = options.duration ? parseFloat(options.duration) : maxDuration;\n\n        if (flags.applyTransitionDuration) {\n          flags.hasTransitions = true;\n          timings.transitionDuration = maxDuration;\n          applyOnlyDuration = node.style[TRANSITION_PROP + PROPERTY_KEY].length > 0;\n          temporaryStyles.push(getCssTransitionDurationStyle(maxDuration, applyOnlyDuration));\n        }\n\n        if (flags.applyAnimationDuration) {\n          flags.hasAnimations = true;\n          timings.animationDuration = maxDuration;\n          temporaryStyles.push(getCssKeyframeDurationStyle(maxDuration));\n        }\n      }\n\n      if (maxDuration === 0 && !flags.recalculateTimingStyles) {\n        return closeAndReturnNoopAnimator();\n      }\n\n      if (options.delay != null) {\n        var delayStyle;\n        if (typeof options.delay !== 'boolean') {\n          delayStyle = parseFloat(options.delay);\n          // number in options.delay means we have to recalculate the delay for the closing timeout\n          maxDelay = Math.max(delayStyle, 0);\n        }\n\n        if (flags.applyTransitionDelay) {\n          temporaryStyles.push(getCssDelayStyle(delayStyle));\n        }\n\n        if (flags.applyAnimationDelay) {\n          temporaryStyles.push(getCssDelayStyle(delayStyle, true));\n        }\n      }\n\n      // we need to recalculate the delay value since we used a pre-emptive negative\n      // delay value and the delay value is required for the final event checking. This\n      // property will ensure that this will happen after the RAF phase has passed.\n      if (options.duration == null && timings.transitionDuration > 0) {\n        flags.recalculateTimingStyles = flags.recalculateTimingStyles || isFirst;\n      }\n\n      maxDelayTime = maxDelay * ONE_SECOND;\n      maxDurationTime = maxDuration * ONE_SECOND;\n      if (!options.skipBlocking) {\n        flags.blockTransition = timings.transitionDuration > 0;\n        flags.blockKeyframeAnimation = timings.animationDuration > 0 &&\n                                       stagger.animationDelay > 0 &&\n                                       stagger.animationDuration === 0;\n      }\n\n      if (options.from) {\n        if (options.cleanupStyles) {\n          registerRestorableStyles(restoreStyles, node, Object.keys(options.from));\n        }\n        applyAnimationFromStyles(element, options);\n      }\n\n      if (flags.blockTransition || flags.blockKeyframeAnimation) {\n        applyBlocking(maxDuration);\n      } else if (!options.skipBlocking) {\n        blockTransitions(node, false);\n      }\n\n      // TODO(matsko): for 1.5 change this code to have an animator object for better debugging\n      return {\n        $$willAnimate: true,\n        end: endFn,\n        start: function() {\n          if (animationClosed) return;\n\n          runnerHost = {\n            end: endFn,\n            cancel: cancelFn,\n            resume: null, //this will be set during the start() phase\n            pause: null\n          };\n\n          runner = new $$AnimateRunner(runnerHost);\n\n          waitUntilQuiet(start);\n\n          // we don't have access to pause/resume the animation\n          // since it hasn't run yet. AnimateRunner will therefore\n          // set noop functions for resume and pause and they will\n          // later be overridden once the animation is triggered\n          return runner;\n        }\n      };\n\n      function endFn() {\n        close();\n      }\n\n      function cancelFn() {\n        close(true);\n      }\n\n      function close(rejected) {\n        // if the promise has been called already then we shouldn't close\n        // the animation again\n        if (animationClosed || (animationCompleted && animationPaused)) return;\n        animationClosed = true;\n        animationPaused = false;\n\n        if (!options.$$skipPreparationClasses) {\n          $$jqLite.removeClass(element, preparationClasses);\n        }\n        $$jqLite.removeClass(element, activeClasses);\n\n        blockKeyframeAnimations(node, false);\n        blockTransitions(node, false);\n\n        forEach(temporaryStyles, function(entry) {\n          // There is only one way to remove inline style properties entirely from elements.\n          // By using `removeProperty` this works, but we need to convert camel-cased CSS\n          // styles down to hyphenated values.\n          node.style[entry[0]] = '';\n        });\n\n        applyAnimationClasses(element, options);\n        applyAnimationStyles(element, options);\n\n        if (Object.keys(restoreStyles).length) {\n          forEach(restoreStyles, function(value, prop) {\n            if (value) {\n              node.style.setProperty(prop, value);\n            } else {\n              node.style.removeProperty(prop);\n            }\n          });\n        }\n\n        // the reason why we have this option is to allow a synchronous closing callback\n        // that is fired as SOON as the animation ends (when the CSS is removed) or if\n        // the animation never takes off at all. A good example is a leave animation since\n        // the element must be removed just after the animation is over or else the element\n        // will appear on screen for one animation frame causing an overbearing flicker.\n        if (options.onDone) {\n          options.onDone();\n        }\n\n        if (events && events.length) {\n          // Remove the transitionend / animationend listener(s)\n          element.off(events.join(' '), onAnimationProgress);\n        }\n\n        //Cancel the fallback closing timeout and remove the timer data\n        var animationTimerData = element.data(ANIMATE_TIMER_KEY);\n        if (animationTimerData) {\n          $timeout.cancel(animationTimerData[0].timer);\n          element.removeData(ANIMATE_TIMER_KEY);\n        }\n\n        // if the preparation function fails then the promise is not setup\n        if (runner) {\n          runner.complete(!rejected);\n        }\n      }\n\n      function applyBlocking(duration) {\n        if (flags.blockTransition) {\n          blockTransitions(node, duration);\n        }\n\n        if (flags.blockKeyframeAnimation) {\n          blockKeyframeAnimations(node, !!duration);\n        }\n      }\n\n      function closeAndReturnNoopAnimator() {\n        runner = new $$AnimateRunner({\n          end: endFn,\n          cancel: cancelFn\n        });\n\n        // should flush the cache animation\n        waitUntilQuiet(noop);\n        close();\n\n        return {\n          $$willAnimate: false,\n          start: function() {\n            return runner;\n          },\n          end: endFn\n        };\n      }\n\n      function onAnimationProgress(event) {\n        event.stopPropagation();\n        var ev = event.originalEvent || event;\n\n        // we now always use `Date.now()` due to the recent changes with\n        // event.timeStamp in Firefox, Webkit and Chrome (see #13494 for more info)\n        var timeStamp = ev.$manualTimeStamp || Date.now();\n\n        /* Firefox (or possibly just Gecko) likes to not round values up\n         * when a ms measurement is used for the animation */\n        var elapsedTime = parseFloat(ev.elapsedTime.toFixed(ELAPSED_TIME_MAX_DECIMAL_PLACES));\n\n        /* $manualTimeStamp is a mocked timeStamp value which is set\n         * within browserTrigger(). This is only here so that tests can\n         * mock animations properly. Real events fallback to event.timeStamp,\n         * or, if they don't, then a timeStamp is automatically created for them.\n         * We're checking to see if the timeStamp surpasses the expected delay,\n         * but we're using elapsedTime instead of the timeStamp on the 2nd\n         * pre-condition since animationPauseds sometimes close off early */\n        if (Math.max(timeStamp - startTime, 0) >= maxDelayTime && elapsedTime >= maxDuration) {\n          // we set this flag to ensure that if the transition is paused then, when resumed,\n          // the animation will automatically close itself since transitions cannot be paused.\n          animationCompleted = true;\n          close();\n        }\n      }\n\n      function start() {\n        if (animationClosed) return;\n        if (!node.parentNode) {\n          close();\n          return;\n        }\n\n        // even though we only pause keyframe animations here the pause flag\n        // will still happen when transitions are used. Only the transition will\n        // not be paused since that is not possible. If the animation ends when\n        // paused then it will not complete until unpaused or cancelled.\n        var playPause = function(playAnimation) {\n          if (!animationCompleted) {\n            animationPaused = !playAnimation;\n            if (timings.animationDuration) {\n              var value = blockKeyframeAnimations(node, animationPaused);\n              if (animationPaused) {\n                temporaryStyles.push(value);\n              } else {\n                removeFromArray(temporaryStyles, value);\n              }\n            }\n          } else if (animationPaused && playAnimation) {\n            animationPaused = false;\n            close();\n          }\n        };\n\n        // checking the stagger duration prevents an accidentally cascade of the CSS delay style\n        // being inherited from the parent. If the transition duration is zero then we can safely\n        // rely that the delay value is an intentional stagger delay style.\n        var maxStagger = itemIndex > 0\n                         && ((timings.transitionDuration && stagger.transitionDuration === 0) ||\n                            (timings.animationDuration && stagger.animationDuration === 0))\n                         && Math.max(stagger.animationDelay, stagger.transitionDelay);\n        if (maxStagger) {\n          $timeout(triggerAnimationStart,\n                   Math.floor(maxStagger * itemIndex * ONE_SECOND),\n                   false);\n        } else {\n          triggerAnimationStart();\n        }\n\n        // this will decorate the existing promise runner with pause/resume methods\n        runnerHost.resume = function() {\n          playPause(true);\n        };\n\n        runnerHost.pause = function() {\n          playPause(false);\n        };\n\n        function triggerAnimationStart() {\n          // just incase a stagger animation kicks in when the animation\n          // itself was cancelled entirely\n          if (animationClosed) return;\n\n          applyBlocking(false);\n\n          forEach(temporaryStyles, function(entry) {\n            var key = entry[0];\n            var value = entry[1];\n            node.style[key] = value;\n          });\n\n          applyAnimationClasses(element, options);\n          $$jqLite.addClass(element, activeClasses);\n\n          if (flags.recalculateTimingStyles) {\n            fullClassName = node.getAttribute('class') + ' ' + preparationClasses;\n            cacheKey = gcsHashFn(node, fullClassName);\n\n            timings = computeTimings(node, fullClassName, cacheKey);\n            relativeDelay = timings.maxDelay;\n            maxDelay = Math.max(relativeDelay, 0);\n            maxDuration = timings.maxDuration;\n\n            if (maxDuration === 0) {\n              close();\n              return;\n            }\n\n            flags.hasTransitions = timings.transitionDuration > 0;\n            flags.hasAnimations = timings.animationDuration > 0;\n          }\n\n          if (flags.applyAnimationDelay) {\n            relativeDelay = typeof options.delay !== 'boolean' && truthyTimingValue(options.delay)\n                  ? parseFloat(options.delay)\n                  : relativeDelay;\n\n            maxDelay = Math.max(relativeDelay, 0);\n            timings.animationDelay = relativeDelay;\n            delayStyle = getCssDelayStyle(relativeDelay, true);\n            temporaryStyles.push(delayStyle);\n            node.style[delayStyle[0]] = delayStyle[1];\n          }\n\n          maxDelayTime = maxDelay * ONE_SECOND;\n          maxDurationTime = maxDuration * ONE_SECOND;\n\n          if (options.easing) {\n            var easeProp, easeVal = options.easing;\n            if (flags.hasTransitions) {\n              easeProp = TRANSITION_PROP + TIMING_KEY;\n              temporaryStyles.push([easeProp, easeVal]);\n              node.style[easeProp] = easeVal;\n            }\n            if (flags.hasAnimations) {\n              easeProp = ANIMATION_PROP + TIMING_KEY;\n              temporaryStyles.push([easeProp, easeVal]);\n              node.style[easeProp] = easeVal;\n            }\n          }\n\n          if (timings.transitionDuration) {\n            events.push(TRANSITIONEND_EVENT);\n          }\n\n          if (timings.animationDuration) {\n            events.push(ANIMATIONEND_EVENT);\n          }\n\n          startTime = Date.now();\n          var timerTime = maxDelayTime + CLOSING_TIME_BUFFER * maxDurationTime;\n          var endTime = startTime + timerTime;\n\n          var animationsData = element.data(ANIMATE_TIMER_KEY) || [];\n          var setupFallbackTimer = true;\n          if (animationsData.length) {\n            var currentTimerData = animationsData[0];\n            setupFallbackTimer = endTime > currentTimerData.expectedEndTime;\n            if (setupFallbackTimer) {\n              $timeout.cancel(currentTimerData.timer);\n            } else {\n              animationsData.push(close);\n            }\n          }\n\n          if (setupFallbackTimer) {\n            var timer = $timeout(onAnimationExpired, timerTime, false);\n            animationsData[0] = {\n              timer: timer,\n              expectedEndTime: endTime\n            };\n            animationsData.push(close);\n            element.data(ANIMATE_TIMER_KEY, animationsData);\n          }\n\n          if (events.length) {\n            element.on(events.join(' '), onAnimationProgress);\n          }\n\n          if (options.to) {\n            if (options.cleanupStyles) {\n              registerRestorableStyles(restoreStyles, node, Object.keys(options.to));\n            }\n            applyAnimationToStyles(element, options);\n          }\n        }\n\n        function onAnimationExpired() {\n          var animationsData = element.data(ANIMATE_TIMER_KEY);\n\n          // this will be false in the event that the element was\n          // removed from the DOM (via a leave animation or something\n          // similar)\n          if (animationsData) {\n            for (var i = 1; i < animationsData.length; i++) {\n              animationsData[i]();\n            }\n            element.removeData(ANIMATE_TIMER_KEY);\n          }\n        }\n      }\n    };\n  }];\n}];\n\nvar $$AnimateCssDriverProvider = ['$$animationProvider', /** @this */ function($$animationProvider) {\n  $$animationProvider.drivers.push('$$animateCssDriver');\n\n  var NG_ANIMATE_SHIM_CLASS_NAME = 'ng-animate-shim';\n  var NG_ANIMATE_ANCHOR_CLASS_NAME = 'ng-anchor';\n\n  var NG_OUT_ANCHOR_CLASS_NAME = 'ng-anchor-out';\n  var NG_IN_ANCHOR_CLASS_NAME = 'ng-anchor-in';\n\n  function isDocumentFragment(node) {\n    return node.parentNode && node.parentNode.nodeType === 11;\n  }\n\n  this.$get = ['$animateCss', '$rootScope', '$$AnimateRunner', '$rootElement', '$sniffer', '$$jqLite', '$document',\n       function($animateCss,   $rootScope,   $$AnimateRunner,   $rootElement,   $sniffer,   $$jqLite,   $document) {\n\n    // only browsers that support these properties can render animations\n    if (!$sniffer.animations && !$sniffer.transitions) return noop;\n\n    var bodyNode = $document[0].body;\n    var rootNode = getDomNode($rootElement);\n\n    var rootBodyElement = jqLite(\n      // this is to avoid using something that exists outside of the body\n      // we also special case the doc fragment case because our unit test code\n      // appends the $rootElement to the body after the app has been bootstrapped\n      isDocumentFragment(rootNode) || bodyNode.contains(rootNode) ? rootNode : bodyNode\n    );\n\n    return function initDriverFn(animationDetails) {\n      return animationDetails.from && animationDetails.to\n          ? prepareFromToAnchorAnimation(animationDetails.from,\n                                         animationDetails.to,\n                                         animationDetails.classes,\n                                         animationDetails.anchors)\n          : prepareRegularAnimation(animationDetails);\n    };\n\n    function filterCssClasses(classes) {\n      //remove all the `ng-` stuff\n      return classes.replace(/\\bng-\\S+\\b/g, '');\n    }\n\n    function getUniqueValues(a, b) {\n      if (isString(a)) a = a.split(' ');\n      if (isString(b)) b = b.split(' ');\n      return a.filter(function(val) {\n        return b.indexOf(val) === -1;\n      }).join(' ');\n    }\n\n    function prepareAnchoredAnimation(classes, outAnchor, inAnchor) {\n      var clone = jqLite(getDomNode(outAnchor).cloneNode(true));\n      var startingClasses = filterCssClasses(getClassVal(clone));\n\n      outAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME);\n      inAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME);\n\n      clone.addClass(NG_ANIMATE_ANCHOR_CLASS_NAME);\n\n      rootBodyElement.append(clone);\n\n      var animatorIn, animatorOut = prepareOutAnimation();\n\n      // the user may not end up using the `out` animation and\n      // only making use of the `in` animation or vice-versa.\n      // In either case we should allow this and not assume the\n      // animation is over unless both animations are not used.\n      if (!animatorOut) {\n        animatorIn = prepareInAnimation();\n        if (!animatorIn) {\n          return end();\n        }\n      }\n\n      var startingAnimator = animatorOut || animatorIn;\n\n      return {\n        start: function() {\n          var runner;\n\n          var currentAnimation = startingAnimator.start();\n          currentAnimation.done(function() {\n            currentAnimation = null;\n            if (!animatorIn) {\n              animatorIn = prepareInAnimation();\n              if (animatorIn) {\n                currentAnimation = animatorIn.start();\n                currentAnimation.done(function() {\n                  currentAnimation = null;\n                  end();\n                  runner.complete();\n                });\n                return currentAnimation;\n              }\n            }\n            // in the event that there is no `in` animation\n            end();\n            runner.complete();\n          });\n\n          runner = new $$AnimateRunner({\n            end: endFn,\n            cancel: endFn\n          });\n\n          return runner;\n\n          function endFn() {\n            if (currentAnimation) {\n              currentAnimation.end();\n            }\n          }\n        }\n      };\n\n      function calculateAnchorStyles(anchor) {\n        var styles = {};\n\n        var coords = getDomNode(anchor).getBoundingClientRect();\n\n        // we iterate directly since safari messes up and doesn't return\n        // all the keys for the coords object when iterated\n        forEach(['width','height','top','left'], function(key) {\n          var value = coords[key];\n          switch (key) {\n            case 'top':\n              value += bodyNode.scrollTop;\n              break;\n            case 'left':\n              value += bodyNode.scrollLeft;\n              break;\n          }\n          styles[key] = Math.floor(value) + 'px';\n        });\n        return styles;\n      }\n\n      function prepareOutAnimation() {\n        var animator = $animateCss(clone, {\n          addClass: NG_OUT_ANCHOR_CLASS_NAME,\n          delay: true,\n          from: calculateAnchorStyles(outAnchor)\n        });\n\n        // read the comment within `prepareRegularAnimation` to understand\n        // why this check is necessary\n        return animator.$$willAnimate ? animator : null;\n      }\n\n      function getClassVal(element) {\n        return element.attr('class') || '';\n      }\n\n      function prepareInAnimation() {\n        var endingClasses = filterCssClasses(getClassVal(inAnchor));\n        var toAdd = getUniqueValues(endingClasses, startingClasses);\n        var toRemove = getUniqueValues(startingClasses, endingClasses);\n\n        var animator = $animateCss(clone, {\n          to: calculateAnchorStyles(inAnchor),\n          addClass: NG_IN_ANCHOR_CLASS_NAME + ' ' + toAdd,\n          removeClass: NG_OUT_ANCHOR_CLASS_NAME + ' ' + toRemove,\n          delay: true\n        });\n\n        // read the comment within `prepareRegularAnimation` to understand\n        // why this check is necessary\n        return animator.$$willAnimate ? animator : null;\n      }\n\n      function end() {\n        clone.remove();\n        outAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME);\n        inAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME);\n      }\n    }\n\n    function prepareFromToAnchorAnimation(from, to, classes, anchors) {\n      var fromAnimation = prepareRegularAnimation(from, noop);\n      var toAnimation = prepareRegularAnimation(to, noop);\n\n      var anchorAnimations = [];\n      forEach(anchors, function(anchor) {\n        var outElement = anchor['out'];\n        var inElement = anchor['in'];\n        var animator = prepareAnchoredAnimation(classes, outElement, inElement);\n        if (animator) {\n          anchorAnimations.push(animator);\n        }\n      });\n\n      // no point in doing anything when there are no elements to animate\n      if (!fromAnimation && !toAnimation && anchorAnimations.length === 0) return;\n\n      return {\n        start: function() {\n          var animationRunners = [];\n\n          if (fromAnimation) {\n            animationRunners.push(fromAnimation.start());\n          }\n\n          if (toAnimation) {\n            animationRunners.push(toAnimation.start());\n          }\n\n          forEach(anchorAnimations, function(animation) {\n            animationRunners.push(animation.start());\n          });\n\n          var runner = new $$AnimateRunner({\n            end: endFn,\n            cancel: endFn // CSS-driven animations cannot be cancelled, only ended\n          });\n\n          $$AnimateRunner.all(animationRunners, function(status) {\n            runner.complete(status);\n          });\n\n          return runner;\n\n          function endFn() {\n            forEach(animationRunners, function(runner) {\n              runner.end();\n            });\n          }\n        }\n      };\n    }\n\n    function prepareRegularAnimation(animationDetails) {\n      var element = animationDetails.element;\n      var options = animationDetails.options || {};\n\n      if (animationDetails.structural) {\n        options.event = animationDetails.event;\n        options.structural = true;\n        options.applyClassesEarly = true;\n\n        // we special case the leave animation since we want to ensure that\n        // the element is removed as soon as the animation is over. Otherwise\n        // a flicker might appear or the element may not be removed at all\n        if (animationDetails.event === 'leave') {\n          options.onDone = options.domOperation;\n        }\n      }\n\n      // We assign the preparationClasses as the actual animation event since\n      // the internals of $animateCss will just suffix the event token values\n      // with `-active` to trigger the animation.\n      if (options.preparationClasses) {\n        options.event = concatWithSpace(options.event, options.preparationClasses);\n      }\n\n      var animator = $animateCss(element, options);\n\n      // the driver lookup code inside of $$animation attempts to spawn a\n      // driver one by one until a driver returns a.$$willAnimate animator object.\n      // $animateCss will always return an object, however, it will pass in\n      // a flag as a hint as to whether an animation was detected or not\n      return animator.$$willAnimate ? animator : null;\n    }\n  }];\n}];\n\n// TODO(matsko): use caching here to speed things up for detection\n// TODO(matsko): add documentation\n//  by the time...\n\nvar $$AnimateJsProvider = ['$animateProvider', /** @this */ function($animateProvider) {\n  this.$get = ['$injector', '$$AnimateRunner', '$$jqLite',\n       function($injector,   $$AnimateRunner,   $$jqLite) {\n\n    var applyAnimationClasses = applyAnimationClassesFactory($$jqLite);\n         // $animateJs(element, 'enter');\n    return function(element, event, classes, options) {\n      var animationClosed = false;\n\n      // the `classes` argument is optional and if it is not used\n      // then the classes will be resolved from the element's className\n      // property as well as options.addClass/options.removeClass.\n      if (arguments.length === 3 && isObject(classes)) {\n        options = classes;\n        classes = null;\n      }\n\n      options = prepareAnimationOptions(options);\n      if (!classes) {\n        classes = element.attr('class') || '';\n        if (options.addClass) {\n          classes += ' ' + options.addClass;\n        }\n        if (options.removeClass) {\n          classes += ' ' + options.removeClass;\n        }\n      }\n\n      var classesToAdd = options.addClass;\n      var classesToRemove = options.removeClass;\n\n      // the lookupAnimations function returns a series of animation objects that are\n      // matched up with one or more of the CSS classes. These animation objects are\n      // defined via the module.animation factory function. If nothing is detected then\n      // we don't return anything which then makes $animation query the next driver.\n      var animations = lookupAnimations(classes);\n      var before, after;\n      if (animations.length) {\n        var afterFn, beforeFn;\n        if (event === 'leave') {\n          beforeFn = 'leave';\n          afterFn = 'afterLeave'; // TODO(matsko): get rid of this\n        } else {\n          beforeFn = 'before' + event.charAt(0).toUpperCase() + event.substr(1);\n          afterFn = event;\n        }\n\n        if (event !== 'enter' && event !== 'move') {\n          before = packageAnimations(element, event, options, animations, beforeFn);\n        }\n        after  = packageAnimations(element, event, options, animations, afterFn);\n      }\n\n      // no matching animations\n      if (!before && !after) return;\n\n      function applyOptions() {\n        options.domOperation();\n        applyAnimationClasses(element, options);\n      }\n\n      function close() {\n        animationClosed = true;\n        applyOptions();\n        applyAnimationStyles(element, options);\n      }\n\n      var runner;\n\n      return {\n        $$willAnimate: true,\n        end: function() {\n          if (runner) {\n            runner.end();\n          } else {\n            close();\n            runner = new $$AnimateRunner();\n            runner.complete(true);\n          }\n          return runner;\n        },\n        start: function() {\n          if (runner) {\n            return runner;\n          }\n\n          runner = new $$AnimateRunner();\n          var closeActiveAnimations;\n          var chain = [];\n\n          if (before) {\n            chain.push(function(fn) {\n              closeActiveAnimations = before(fn);\n            });\n          }\n\n          if (chain.length) {\n            chain.push(function(fn) {\n              applyOptions();\n              fn(true);\n            });\n          } else {\n            applyOptions();\n          }\n\n          if (after) {\n            chain.push(function(fn) {\n              closeActiveAnimations = after(fn);\n            });\n          }\n\n          runner.setHost({\n            end: function() {\n              endAnimations();\n            },\n            cancel: function() {\n              endAnimations(true);\n            }\n          });\n\n          $$AnimateRunner.chain(chain, onComplete);\n          return runner;\n\n          function onComplete(success) {\n            close(success);\n            runner.complete(success);\n          }\n\n          function endAnimations(cancelled) {\n            if (!animationClosed) {\n              (closeActiveAnimations || noop)(cancelled);\n              onComplete(cancelled);\n            }\n          }\n        }\n      };\n\n      function executeAnimationFn(fn, element, event, options, onDone) {\n        var args;\n        switch (event) {\n          case 'animate':\n            args = [element, options.from, options.to, onDone];\n            break;\n\n          case 'setClass':\n            args = [element, classesToAdd, classesToRemove, onDone];\n            break;\n\n          case 'addClass':\n            args = [element, classesToAdd, onDone];\n            break;\n\n          case 'removeClass':\n            args = [element, classesToRemove, onDone];\n            break;\n\n          default:\n            args = [element, onDone];\n            break;\n        }\n\n        args.push(options);\n\n        var value = fn.apply(fn, args);\n        if (value) {\n          if (isFunction(value.start)) {\n            value = value.start();\n          }\n\n          if (value instanceof $$AnimateRunner) {\n            value.done(onDone);\n          } else if (isFunction(value)) {\n            // optional onEnd / onCancel callback\n            return value;\n          }\n        }\n\n        return noop;\n      }\n\n      function groupEventedAnimations(element, event, options, animations, fnName) {\n        var operations = [];\n        forEach(animations, function(ani) {\n          var animation = ani[fnName];\n          if (!animation) return;\n\n          // note that all of these animations will run in parallel\n          operations.push(function() {\n            var runner;\n            var endProgressCb;\n\n            var resolved = false;\n            var onAnimationComplete = function(rejected) {\n              if (!resolved) {\n                resolved = true;\n                (endProgressCb || noop)(rejected);\n                runner.complete(!rejected);\n              }\n            };\n\n            runner = new $$AnimateRunner({\n              end: function() {\n                onAnimationComplete();\n              },\n              cancel: function() {\n                onAnimationComplete(true);\n              }\n            });\n\n            endProgressCb = executeAnimationFn(animation, element, event, options, function(result) {\n              var cancelled = result === false;\n              onAnimationComplete(cancelled);\n            });\n\n            return runner;\n          });\n        });\n\n        return operations;\n      }\n\n      function packageAnimations(element, event, options, animations, fnName) {\n        var operations = groupEventedAnimations(element, event, options, animations, fnName);\n        if (operations.length === 0) {\n          var a, b;\n          if (fnName === 'beforeSetClass') {\n            a = groupEventedAnimations(element, 'removeClass', options, animations, 'beforeRemoveClass');\n            b = groupEventedAnimations(element, 'addClass', options, animations, 'beforeAddClass');\n          } else if (fnName === 'setClass') {\n            a = groupEventedAnimations(element, 'removeClass', options, animations, 'removeClass');\n            b = groupEventedAnimations(element, 'addClass', options, animations, 'addClass');\n          }\n\n          if (a) {\n            operations = operations.concat(a);\n          }\n          if (b) {\n            operations = operations.concat(b);\n          }\n        }\n\n        if (operations.length === 0) return;\n\n        // TODO(matsko): add documentation\n        return function startAnimation(callback) {\n          var runners = [];\n          if (operations.length) {\n            forEach(operations, function(animateFn) {\n              runners.push(animateFn());\n            });\n          }\n\n          if (runners.length) {\n            $$AnimateRunner.all(runners, callback);\n          }  else {\n            callback();\n          }\n\n          return function endFn(reject) {\n            forEach(runners, function(runner) {\n              if (reject) {\n                runner.cancel();\n              } else {\n                runner.end();\n              }\n            });\n          };\n        };\n      }\n    };\n\n    function lookupAnimations(classes) {\n      classes = isArray(classes) ? classes : classes.split(' ');\n      var matches = [], flagMap = {};\n      for (var i = 0; i < classes.length; i++) {\n        var klass = classes[i],\n            animationFactory = $animateProvider.$$registeredAnimations[klass];\n        if (animationFactory && !flagMap[klass]) {\n          matches.push($injector.get(animationFactory));\n          flagMap[klass] = true;\n        }\n      }\n      return matches;\n    }\n  }];\n}];\n\nvar $$AnimateJsDriverProvider = ['$$animationProvider', /** @this */ function($$animationProvider) {\n  $$animationProvider.drivers.push('$$animateJsDriver');\n  this.$get = ['$$animateJs', '$$AnimateRunner', function($$animateJs, $$AnimateRunner) {\n    return function initDriverFn(animationDetails) {\n      if (animationDetails.from && animationDetails.to) {\n        var fromAnimation = prepareAnimation(animationDetails.from);\n        var toAnimation = prepareAnimation(animationDetails.to);\n        if (!fromAnimation && !toAnimation) return;\n\n        return {\n          start: function() {\n            var animationRunners = [];\n\n            if (fromAnimation) {\n              animationRunners.push(fromAnimation.start());\n            }\n\n            if (toAnimation) {\n              animationRunners.push(toAnimation.start());\n            }\n\n            $$AnimateRunner.all(animationRunners, done);\n\n            var runner = new $$AnimateRunner({\n              end: endFnFactory(),\n              cancel: endFnFactory()\n            });\n\n            return runner;\n\n            function endFnFactory() {\n              return function() {\n                forEach(animationRunners, function(runner) {\n                  // at this point we cannot cancel animations for groups just yet. 1.5+\n                  runner.end();\n                });\n              };\n            }\n\n            function done(status) {\n              runner.complete(status);\n            }\n          }\n        };\n      } else {\n        return prepareAnimation(animationDetails);\n      }\n    };\n\n    function prepareAnimation(animationDetails) {\n      // TODO(matsko): make sure to check for grouped animations and delegate down to normal animations\n      var element = animationDetails.element;\n      var event = animationDetails.event;\n      var options = animationDetails.options;\n      var classes = animationDetails.classes;\n      return $$animateJs(element, event, classes, options);\n    }\n  }];\n}];\n\nvar NG_ANIMATE_ATTR_NAME = 'data-ng-animate';\nvar NG_ANIMATE_PIN_DATA = '$ngAnimatePin';\nvar $$AnimateQueueProvider = ['$animateProvider', /** @this */ function($animateProvider) {\n  var PRE_DIGEST_STATE = 1;\n  var RUNNING_STATE = 2;\n  var ONE_SPACE = ' ';\n\n  var rules = this.rules = {\n    skip: [],\n    cancel: [],\n    join: []\n  };\n\n  function makeTruthyCssClassMap(classString) {\n    if (!classString) {\n      return null;\n    }\n\n    var keys = classString.split(ONE_SPACE);\n    var map = Object.create(null);\n\n    forEach(keys, function(key) {\n      map[key] = true;\n    });\n    return map;\n  }\n\n  function hasMatchingClasses(newClassString, currentClassString) {\n    if (newClassString && currentClassString) {\n      var currentClassMap = makeTruthyCssClassMap(currentClassString);\n      return newClassString.split(ONE_SPACE).some(function(className) {\n        return currentClassMap[className];\n      });\n    }\n  }\n\n  function isAllowed(ruleType, currentAnimation, previousAnimation) {\n    return rules[ruleType].some(function(fn) {\n      return fn(currentAnimation, previousAnimation);\n    });\n  }\n\n  function hasAnimationClasses(animation, and) {\n    var a = (animation.addClass || '').length > 0;\n    var b = (animation.removeClass || '').length > 0;\n    return and ? a && b : a || b;\n  }\n\n  rules.join.push(function(newAnimation, currentAnimation) {\n    // if the new animation is class-based then we can just tack that on\n    return !newAnimation.structural && hasAnimationClasses(newAnimation);\n  });\n\n  rules.skip.push(function(newAnimation, currentAnimation) {\n    // there is no need to animate anything if no classes are being added and\n    // there is no structural animation that will be triggered\n    return !newAnimation.structural && !hasAnimationClasses(newAnimation);\n  });\n\n  rules.skip.push(function(newAnimation, currentAnimation) {\n    // why should we trigger a new structural animation if the element will\n    // be removed from the DOM anyway?\n    return currentAnimation.event === 'leave' && newAnimation.structural;\n  });\n\n  rules.skip.push(function(newAnimation, currentAnimation) {\n    // if there is an ongoing current animation then don't even bother running the class-based animation\n    return currentAnimation.structural && currentAnimation.state === RUNNING_STATE && !newAnimation.structural;\n  });\n\n  rules.cancel.push(function(newAnimation, currentAnimation) {\n    // there can never be two structural animations running at the same time\n    return currentAnimation.structural && newAnimation.structural;\n  });\n\n  rules.cancel.push(function(newAnimation, currentAnimation) {\n    // if the previous animation is already running, but the new animation will\n    // be triggered, but the new animation is structural\n    return currentAnimation.state === RUNNING_STATE && newAnimation.structural;\n  });\n\n  rules.cancel.push(function(newAnimation, currentAnimation) {\n    // cancel the animation if classes added / removed in both animation cancel each other out,\n    // but only if the current animation isn't structural\n\n    if (currentAnimation.structural) return false;\n\n    var nA = newAnimation.addClass;\n    var nR = newAnimation.removeClass;\n    var cA = currentAnimation.addClass;\n    var cR = currentAnimation.removeClass;\n\n    // early detection to save the global CPU shortage :)\n    if ((isUndefined(nA) && isUndefined(nR)) || (isUndefined(cA) && isUndefined(cR))) {\n      return false;\n    }\n\n    return hasMatchingClasses(nA, cR) || hasMatchingClasses(nR, cA);\n  });\n\n  this.$get = ['$$rAF', '$rootScope', '$rootElement', '$document', '$$Map',\n               '$$animation', '$$AnimateRunner', '$templateRequest', '$$jqLite', '$$forceReflow',\n               '$$isDocumentHidden',\n       function($$rAF,   $rootScope,   $rootElement,   $document,   $$Map,\n                $$animation,   $$AnimateRunner,   $templateRequest,   $$jqLite,   $$forceReflow,\n                $$isDocumentHidden) {\n\n    var activeAnimationsLookup = new $$Map();\n    var disabledElementsLookup = new $$Map();\n    var animationsEnabled = null;\n\n    function postDigestTaskFactory() {\n      var postDigestCalled = false;\n      return function(fn) {\n        // we only issue a call to postDigest before\n        // it has first passed. This prevents any callbacks\n        // from not firing once the animation has completed\n        // since it will be out of the digest cycle.\n        if (postDigestCalled) {\n          fn();\n        } else {\n          $rootScope.$$postDigest(function() {\n            postDigestCalled = true;\n            fn();\n          });\n        }\n      };\n    }\n\n    // Wait until all directive and route-related templates are downloaded and\n    // compiled. The $templateRequest.totalPendingRequests variable keeps track of\n    // all of the remote templates being currently downloaded. If there are no\n    // templates currently downloading then the watcher will still fire anyway.\n    var deregisterWatch = $rootScope.$watch(\n      function() { return $templateRequest.totalPendingRequests === 0; },\n      function(isEmpty) {\n        if (!isEmpty) return;\n        deregisterWatch();\n\n        // Now that all templates have been downloaded, $animate will wait until\n        // the post digest queue is empty before enabling animations. By having two\n        // calls to $postDigest calls we can ensure that the flag is enabled at the\n        // very end of the post digest queue. Since all of the animations in $animate\n        // use $postDigest, it's important that the code below executes at the end.\n        // This basically means that the page is fully downloaded and compiled before\n        // any animations are triggered.\n        $rootScope.$$postDigest(function() {\n          $rootScope.$$postDigest(function() {\n            // we check for null directly in the event that the application already called\n            // .enabled() with whatever arguments that it provided it with\n            if (animationsEnabled === null) {\n              animationsEnabled = true;\n            }\n          });\n        });\n      }\n    );\n\n    var callbackRegistry = Object.create(null);\n\n    // remember that the `customFilter`/`classNameFilter` are set during the\n    // provider/config stage therefore we can optimize here and setup helper functions\n    var customFilter = $animateProvider.customFilter();\n    var classNameFilter = $animateProvider.classNameFilter();\n    var returnTrue = function() { return true; };\n\n    var isAnimatableByFilter = customFilter || returnTrue;\n    var isAnimatableClassName = !classNameFilter ? returnTrue : function(node, options) {\n      var className = [node.getAttribute('class'), options.addClass, options.removeClass].join(' ');\n      return classNameFilter.test(className);\n    };\n\n    var applyAnimationClasses = applyAnimationClassesFactory($$jqLite);\n\n    function normalizeAnimationDetails(element, animation) {\n      return mergeAnimationDetails(element, animation, {});\n    }\n\n    // IE9-11 has no method \"contains\" in SVG element and in Node.prototype. Bug #10259.\n    var contains = window.Node.prototype.contains || /** @this */ function(arg) {\n      // eslint-disable-next-line no-bitwise\n      return this === arg || !!(this.compareDocumentPosition(arg) & 16);\n    };\n\n    function findCallbacks(targetParentNode, targetNode, event) {\n      var matches = [];\n      var entries = callbackRegistry[event];\n      if (entries) {\n        forEach(entries, function(entry) {\n          if (contains.call(entry.node, targetNode)) {\n            matches.push(entry.callback);\n          } else if (event === 'leave' && contains.call(entry.node, targetParentNode)) {\n            matches.push(entry.callback);\n          }\n        });\n      }\n\n      return matches;\n    }\n\n    function filterFromRegistry(list, matchContainer, matchCallback) {\n      var containerNode = extractElementNode(matchContainer);\n      return list.filter(function(entry) {\n        var isMatch = entry.node === containerNode &&\n                        (!matchCallback || entry.callback === matchCallback);\n        return !isMatch;\n      });\n    }\n\n    function cleanupEventListeners(phase, node) {\n      if (phase === 'close' && !node.parentNode) {\n        // If the element is not attached to a parentNode, it has been removed by\n        // the domOperation, and we can safely remove the event callbacks\n        $animate.off(node);\n      }\n    }\n\n    var $animate = {\n      on: function(event, container, callback) {\n        var node = extractElementNode(container);\n        callbackRegistry[event] = callbackRegistry[event] || [];\n        callbackRegistry[event].push({\n          node: node,\n          callback: callback\n        });\n\n        // Remove the callback when the element is removed from the DOM\n        jqLite(container).on('$destroy', function() {\n          var animationDetails = activeAnimationsLookup.get(node);\n\n          if (!animationDetails) {\n            // If there's an animation ongoing, the callback calling code will remove\n            // the event listeners. If we'd remove here, the callbacks would be removed\n            // before the animation ends\n            $animate.off(event, container, callback);\n          }\n        });\n      },\n\n      off: function(event, container, callback) {\n        if (arguments.length === 1 && !isString(arguments[0])) {\n          container = arguments[0];\n          for (var eventType in callbackRegistry) {\n            callbackRegistry[eventType] = filterFromRegistry(callbackRegistry[eventType], container);\n          }\n\n          return;\n        }\n\n        var entries = callbackRegistry[event];\n        if (!entries) return;\n\n        callbackRegistry[event] = arguments.length === 1\n            ? null\n            : filterFromRegistry(entries, container, callback);\n      },\n\n      pin: function(element, parentElement) {\n        assertArg(isElement(element), 'element', 'not an element');\n        assertArg(isElement(parentElement), 'parentElement', 'not an element');\n        element.data(NG_ANIMATE_PIN_DATA, parentElement);\n      },\n\n      push: function(element, event, options, domOperation) {\n        options = options || {};\n        options.domOperation = domOperation;\n        return queueAnimation(element, event, options);\n      },\n\n      // this method has four signatures:\n      //  () - global getter\n      //  (bool) - global setter\n      //  (element) - element getter\n      //  (element, bool) - element setter<F37>\n      enabled: function(element, bool) {\n        var argCount = arguments.length;\n\n        if (argCount === 0) {\n          // () - Global getter\n          bool = !!animationsEnabled;\n        } else {\n          var hasElement = isElement(element);\n\n          if (!hasElement) {\n            // (bool) - Global setter\n            bool = animationsEnabled = !!element;\n          } else {\n            var node = getDomNode(element);\n\n            if (argCount === 1) {\n              // (element) - Element getter\n              bool = !disabledElementsLookup.get(node);\n            } else {\n              // (element, bool) - Element setter\n              disabledElementsLookup.set(node, !bool);\n            }\n          }\n        }\n\n        return bool;\n      }\n    };\n\n    return $animate;\n\n    function queueAnimation(originalElement, event, initialOptions) {\n      // we always make a copy of the options since\n      // there should never be any side effects on\n      // the input data when running `$animateCss`.\n      var options = copy(initialOptions);\n\n      var element = stripCommentsFromElement(originalElement);\n      var node = getDomNode(element);\n      var parentNode = node && node.parentNode;\n\n      options = prepareAnimationOptions(options);\n\n      // we create a fake runner with a working promise.\n      // These methods will become available after the digest has passed\n      var runner = new $$AnimateRunner();\n\n      // this is used to trigger callbacks in postDigest mode\n      var runInNextPostDigestOrNow = postDigestTaskFactory();\n\n      if (isArray(options.addClass)) {\n        options.addClass = options.addClass.join(' ');\n      }\n\n      if (options.addClass && !isString(options.addClass)) {\n        options.addClass = null;\n      }\n\n      if (isArray(options.removeClass)) {\n        options.removeClass = options.removeClass.join(' ');\n      }\n\n      if (options.removeClass && !isString(options.removeClass)) {\n        options.removeClass = null;\n      }\n\n      if (options.from && !isObject(options.from)) {\n        options.from = null;\n      }\n\n      if (options.to && !isObject(options.to)) {\n        options.to = null;\n      }\n\n      // If animations are hard-disabled for the whole application there is no need to continue.\n      // There are also situations where a directive issues an animation for a jqLite wrapper that\n      // contains only comment nodes. In this case, there is no way we can perform an animation.\n      if (!animationsEnabled ||\n          !node ||\n          !isAnimatableByFilter(node, event, initialOptions) ||\n          !isAnimatableClassName(node, options)) {\n        close();\n        return runner;\n      }\n\n      var isStructural = ['enter', 'move', 'leave'].indexOf(event) >= 0;\n\n      var documentHidden = $$isDocumentHidden();\n\n      // This is a hard disable of all animations the element itself, therefore  there is no need to\n      // continue further past this point if not enabled\n      // Animations are also disabled if the document is currently hidden (page is not visible\n      // to the user), because browsers slow down or do not flush calls to requestAnimationFrame\n      var skipAnimations = documentHidden || disabledElementsLookup.get(node);\n      var existingAnimation = (!skipAnimations && activeAnimationsLookup.get(node)) || {};\n      var hasExistingAnimation = !!existingAnimation.state;\n\n      // there is no point in traversing the same collection of parent ancestors if a followup\n      // animation will be run on the same element that already did all that checking work\n      if (!skipAnimations && (!hasExistingAnimation || existingAnimation.state !== PRE_DIGEST_STATE)) {\n        skipAnimations = !areAnimationsAllowed(node, parentNode, event);\n      }\n\n      if (skipAnimations) {\n        // Callbacks should fire even if the document is hidden (regression fix for issue #14120)\n        if (documentHidden) notifyProgress(runner, event, 'start');\n        close();\n        if (documentHidden) notifyProgress(runner, event, 'close');\n        return runner;\n      }\n\n      if (isStructural) {\n        closeChildAnimations(node);\n      }\n\n      var newAnimation = {\n        structural: isStructural,\n        element: element,\n        event: event,\n        addClass: options.addClass,\n        removeClass: options.removeClass,\n        close: close,\n        options: options,\n        runner: runner\n      };\n\n      if (hasExistingAnimation) {\n        var skipAnimationFlag = isAllowed('skip', newAnimation, existingAnimation);\n        if (skipAnimationFlag) {\n          if (existingAnimation.state === RUNNING_STATE) {\n            close();\n            return runner;\n          } else {\n            mergeAnimationDetails(element, existingAnimation, newAnimation);\n            return existingAnimation.runner;\n          }\n        }\n        var cancelAnimationFlag = isAllowed('cancel', newAnimation, existingAnimation);\n        if (cancelAnimationFlag) {\n          if (existingAnimation.state === RUNNING_STATE) {\n            // this will end the animation right away and it is safe\n            // to do so since the animation is already running and the\n            // runner callback code will run in async\n            existingAnimation.runner.end();\n          } else if (existingAnimation.structural) {\n            // this means that the animation is queued into a digest, but\n            // hasn't started yet. Therefore it is safe to run the close\n            // method which will call the runner methods in async.\n            existingAnimation.close();\n          } else {\n            // this will merge the new animation options into existing animation options\n            mergeAnimationDetails(element, existingAnimation, newAnimation);\n\n            return existingAnimation.runner;\n          }\n        } else {\n          // a joined animation means that this animation will take over the existing one\n          // so an example would involve a leave animation taking over an enter. Then when\n          // the postDigest kicks in the enter will be ignored.\n          var joinAnimationFlag = isAllowed('join', newAnimation, existingAnimation);\n          if (joinAnimationFlag) {\n            if (existingAnimation.state === RUNNING_STATE) {\n              normalizeAnimationDetails(element, newAnimation);\n            } else {\n              applyGeneratedPreparationClasses(element, isStructural ? event : null, options);\n\n              event = newAnimation.event = existingAnimation.event;\n              options = mergeAnimationDetails(element, existingAnimation, newAnimation);\n\n              //we return the same runner since only the option values of this animation will\n              //be fed into the `existingAnimation`.\n              return existingAnimation.runner;\n            }\n          }\n        }\n      } else {\n        // normalization in this case means that it removes redundant CSS classes that\n        // already exist (addClass) or do not exist (removeClass) on the element\n        normalizeAnimationDetails(element, newAnimation);\n      }\n\n      // when the options are merged and cleaned up we may end up not having to do\n      // an animation at all, therefore we should check this before issuing a post\n      // digest callback. Structural animations will always run no matter what.\n      var isValidAnimation = newAnimation.structural;\n      if (!isValidAnimation) {\n        // animate (from/to) can be quickly checked first, otherwise we check if any classes are present\n        isValidAnimation = (newAnimation.event === 'animate' && Object.keys(newAnimation.options.to || {}).length > 0)\n                            || hasAnimationClasses(newAnimation);\n      }\n\n      if (!isValidAnimation) {\n        close();\n        clearElementAnimationState(node);\n        return runner;\n      }\n\n      // the counter keeps track of cancelled animations\n      var counter = (existingAnimation.counter || 0) + 1;\n      newAnimation.counter = counter;\n\n      markElementAnimationState(node, PRE_DIGEST_STATE, newAnimation);\n\n      $rootScope.$$postDigest(function() {\n        // It is possible that the DOM nodes inside `originalElement` have been replaced. This can\n        // happen if the animated element is a transcluded clone and also has a `templateUrl`\n        // directive on it. Therefore, we must recreate `element` in order to interact with the\n        // actual DOM nodes.\n        // Note: We still need to use the old `node` for certain things, such as looking up in\n        //       HashMaps where it was used as the key.\n\n        element = stripCommentsFromElement(originalElement);\n\n        var animationDetails = activeAnimationsLookup.get(node);\n        var animationCancelled = !animationDetails;\n        animationDetails = animationDetails || {};\n\n        // if addClass/removeClass is called before something like enter then the\n        // registered parent element may not be present. The code below will ensure\n        // that a final value for parent element is obtained\n        var parentElement = element.parent() || [];\n\n        // animate/structural/class-based animations all have requirements. Otherwise there\n        // is no point in performing an animation. The parent node must also be set.\n        var isValidAnimation = parentElement.length > 0\n                                && (animationDetails.event === 'animate'\n                                    || animationDetails.structural\n                                    || hasAnimationClasses(animationDetails));\n\n        // this means that the previous animation was cancelled\n        // even if the follow-up animation is the same event\n        if (animationCancelled || animationDetails.counter !== counter || !isValidAnimation) {\n          // if another animation did not take over then we need\n          // to make sure that the domOperation and options are\n          // handled accordingly\n          if (animationCancelled) {\n            applyAnimationClasses(element, options);\n            applyAnimationStyles(element, options);\n          }\n\n          // if the event changed from something like enter to leave then we do\n          // it, otherwise if it's the same then the end result will be the same too\n          if (animationCancelled || (isStructural && animationDetails.event !== event)) {\n            options.domOperation();\n            runner.end();\n          }\n\n          // in the event that the element animation was not cancelled or a follow-up animation\n          // isn't allowed to animate from here then we need to clear the state of the element\n          // so that any future animations won't read the expired animation data.\n          if (!isValidAnimation) {\n            clearElementAnimationState(node);\n          }\n\n          return;\n        }\n\n        // this combined multiple class to addClass / removeClass into a setClass event\n        // so long as a structural event did not take over the animation\n        event = !animationDetails.structural && hasAnimationClasses(animationDetails, true)\n            ? 'setClass'\n            : animationDetails.event;\n\n        markElementAnimationState(node, RUNNING_STATE);\n        var realRunner = $$animation(element, event, animationDetails.options);\n\n        // this will update the runner's flow-control events based on\n        // the `realRunner` object.\n        runner.setHost(realRunner);\n        notifyProgress(runner, event, 'start', {});\n\n        realRunner.done(function(status) {\n          close(!status);\n          var animationDetails = activeAnimationsLookup.get(node);\n          if (animationDetails && animationDetails.counter === counter) {\n            clearElementAnimationState(node);\n          }\n          notifyProgress(runner, event, 'close', {});\n        });\n      });\n\n      return runner;\n\n      function notifyProgress(runner, event, phase, data) {\n        runInNextPostDigestOrNow(function() {\n          var callbacks = findCallbacks(parentNode, node, event);\n          if (callbacks.length) {\n            // do not optimize this call here to RAF because\n            // we don't know how heavy the callback code here will\n            // be and if this code is buffered then this can\n            // lead to a performance regression.\n            $$rAF(function() {\n              forEach(callbacks, function(callback) {\n                callback(element, phase, data);\n              });\n              cleanupEventListeners(phase, node);\n            });\n          } else {\n            cleanupEventListeners(phase, node);\n          }\n        });\n        runner.progress(event, phase, data);\n      }\n\n      function close(reject) {\n        clearGeneratedClasses(element, options);\n        applyAnimationClasses(element, options);\n        applyAnimationStyles(element, options);\n        options.domOperation();\n        runner.complete(!reject);\n      }\n    }\n\n    function closeChildAnimations(node) {\n      var children = node.querySelectorAll('[' + NG_ANIMATE_ATTR_NAME + ']');\n      forEach(children, function(child) {\n        var state = parseInt(child.getAttribute(NG_ANIMATE_ATTR_NAME), 10);\n        var animationDetails = activeAnimationsLookup.get(child);\n        if (animationDetails) {\n          switch (state) {\n            case RUNNING_STATE:\n              animationDetails.runner.end();\n              /* falls through */\n            case PRE_DIGEST_STATE:\n              activeAnimationsLookup.delete(child);\n              break;\n          }\n        }\n      });\n    }\n\n    function clearElementAnimationState(node) {\n      node.removeAttribute(NG_ANIMATE_ATTR_NAME);\n      activeAnimationsLookup.delete(node);\n    }\n\n    /**\n     * This fn returns false if any of the following is true:\n     * a) animations on any parent element are disabled, and animations on the element aren't explicitly allowed\n     * b) a parent element has an ongoing structural animation, and animateChildren is false\n     * c) the element is not a child of the body\n     * d) the element is not a child of the $rootElement\n     */\n    function areAnimationsAllowed(node, parentNode, event) {\n      var bodyNode = $document[0].body;\n      var rootNode = getDomNode($rootElement);\n\n      var bodyNodeDetected = (node === bodyNode) || node.nodeName === 'HTML';\n      var rootNodeDetected = (node === rootNode);\n      var parentAnimationDetected = false;\n      var elementDisabled = disabledElementsLookup.get(node);\n      var animateChildren;\n\n      var parentHost = jqLite.data(node, NG_ANIMATE_PIN_DATA);\n      if (parentHost) {\n        parentNode = getDomNode(parentHost);\n      }\n\n      while (parentNode) {\n        if (!rootNodeDetected) {\n          // angular doesn't want to attempt to animate elements outside of the application\n          // therefore we need to ensure that the rootElement is an ancestor of the current element\n          rootNodeDetected = (parentNode === rootNode);\n        }\n\n        if (parentNode.nodeType !== ELEMENT_NODE) {\n          // no point in inspecting the #document element\n          break;\n        }\n\n        var details = activeAnimationsLookup.get(parentNode) || {};\n        // either an enter, leave or move animation will commence\n        // therefore we can't allow any animations to take place\n        // but if a parent animation is class-based then that's ok\n        if (!parentAnimationDetected) {\n          var parentNodeDisabled = disabledElementsLookup.get(parentNode);\n\n          if (parentNodeDisabled === true && elementDisabled !== false) {\n            // disable animations if the user hasn't explicitly enabled animations on the\n            // current element\n            elementDisabled = true;\n            // element is disabled via parent element, no need to check anything else\n            break;\n          } else if (parentNodeDisabled === false) {\n            elementDisabled = false;\n          }\n          parentAnimationDetected = details.structural;\n        }\n\n        if (isUndefined(animateChildren) || animateChildren === true) {\n          var value = jqLite.data(parentNode, NG_ANIMATE_CHILDREN_DATA);\n          if (isDefined(value)) {\n            animateChildren = value;\n          }\n        }\n\n        // there is no need to continue traversing at this point\n        if (parentAnimationDetected && animateChildren === false) break;\n\n        if (!bodyNodeDetected) {\n          // we also need to ensure that the element is or will be a part of the body element\n          // otherwise it is pointless to even issue an animation to be rendered\n          bodyNodeDetected = (parentNode === bodyNode);\n        }\n\n        if (bodyNodeDetected && rootNodeDetected) {\n          // If both body and root have been found, any other checks are pointless,\n          // as no animation data should live outside the application\n          break;\n        }\n\n        if (!rootNodeDetected) {\n          // If `rootNode` is not detected, check if `parentNode` is pinned to another element\n          parentHost = jqLite.data(parentNode, NG_ANIMATE_PIN_DATA);\n          if (parentHost) {\n            // The pin target element becomes the next parent element\n            parentNode = getDomNode(parentHost);\n            continue;\n          }\n        }\n\n        parentNode = parentNode.parentNode;\n      }\n\n      var allowAnimation = (!parentAnimationDetected || animateChildren) && elementDisabled !== true;\n      return allowAnimation && rootNodeDetected && bodyNodeDetected;\n    }\n\n    function markElementAnimationState(node, state, details) {\n      details = details || {};\n      details.state = state;\n\n      node.setAttribute(NG_ANIMATE_ATTR_NAME, state);\n\n      var oldValue = activeAnimationsLookup.get(node);\n      var newValue = oldValue\n          ? extend(oldValue, details)\n          : details;\n      activeAnimationsLookup.set(node, newValue);\n    }\n  }];\n}];\n\n/* exported $$AnimationProvider */\n\nvar $$AnimationProvider = ['$animateProvider', /** @this */ function($animateProvider) {\n  var NG_ANIMATE_REF_ATTR = 'ng-animate-ref';\n\n  var drivers = this.drivers = [];\n\n  var RUNNER_STORAGE_KEY = '$$animationRunner';\n\n  function setRunner(element, runner) {\n    element.data(RUNNER_STORAGE_KEY, runner);\n  }\n\n  function removeRunner(element) {\n    element.removeData(RUNNER_STORAGE_KEY);\n  }\n\n  function getRunner(element) {\n    return element.data(RUNNER_STORAGE_KEY);\n  }\n\n  this.$get = ['$$jqLite', '$rootScope', '$injector', '$$AnimateRunner', '$$Map', '$$rAFScheduler',\n       function($$jqLite,   $rootScope,   $injector,   $$AnimateRunner,   $$Map,   $$rAFScheduler) {\n\n    var animationQueue = [];\n    var applyAnimationClasses = applyAnimationClassesFactory($$jqLite);\n\n    function sortAnimations(animations) {\n      var tree = { children: [] };\n      var i, lookup = new $$Map();\n\n      // this is done first beforehand so that the map\n      // is filled with a list of the elements that will be animated\n      for (i = 0; i < animations.length; i++) {\n        var animation = animations[i];\n        lookup.set(animation.domNode, animations[i] = {\n          domNode: animation.domNode,\n          fn: animation.fn,\n          children: []\n        });\n      }\n\n      for (i = 0; i < animations.length; i++) {\n        processNode(animations[i]);\n      }\n\n      return flatten(tree);\n\n      function processNode(entry) {\n        if (entry.processed) return entry;\n        entry.processed = true;\n\n        var elementNode = entry.domNode;\n        var parentNode = elementNode.parentNode;\n        lookup.set(elementNode, entry);\n\n        var parentEntry;\n        while (parentNode) {\n          parentEntry = lookup.get(parentNode);\n          if (parentEntry) {\n            if (!parentEntry.processed) {\n              parentEntry = processNode(parentEntry);\n            }\n            break;\n          }\n          parentNode = parentNode.parentNode;\n        }\n\n        (parentEntry || tree).children.push(entry);\n        return entry;\n      }\n\n      function flatten(tree) {\n        var result = [];\n        var queue = [];\n        var i;\n\n        for (i = 0; i < tree.children.length; i++) {\n          queue.push(tree.children[i]);\n        }\n\n        var remainingLevelEntries = queue.length;\n        var nextLevelEntries = 0;\n        var row = [];\n\n        for (i = 0; i < queue.length; i++) {\n          var entry = queue[i];\n          if (remainingLevelEntries <= 0) {\n            remainingLevelEntries = nextLevelEntries;\n            nextLevelEntries = 0;\n            result.push(row);\n            row = [];\n          }\n          row.push(entry.fn);\n          entry.children.forEach(function(childEntry) {\n            nextLevelEntries++;\n            queue.push(childEntry);\n          });\n          remainingLevelEntries--;\n        }\n\n        if (row.length) {\n          result.push(row);\n        }\n\n        return result;\n      }\n    }\n\n    // TODO(matsko): document the signature in a better way\n    return function(element, event, options) {\n      options = prepareAnimationOptions(options);\n      var isStructural = ['enter', 'move', 'leave'].indexOf(event) >= 0;\n\n      // there is no animation at the current moment, however\n      // these runner methods will get later updated with the\n      // methods leading into the driver's end/cancel methods\n      // for now they just stop the animation from starting\n      var runner = new $$AnimateRunner({\n        end: function() { close(); },\n        cancel: function() { close(true); }\n      });\n\n      if (!drivers.length) {\n        close();\n        return runner;\n      }\n\n      setRunner(element, runner);\n\n      var classes = mergeClasses(element.attr('class'), mergeClasses(options.addClass, options.removeClass));\n      var tempClasses = options.tempClasses;\n      if (tempClasses) {\n        classes += ' ' + tempClasses;\n        options.tempClasses = null;\n      }\n\n      var prepareClassName;\n      if (isStructural) {\n        prepareClassName = 'ng-' + event + PREPARE_CLASS_SUFFIX;\n        $$jqLite.addClass(element, prepareClassName);\n      }\n\n      animationQueue.push({\n        // this data is used by the postDigest code and passed into\n        // the driver step function\n        element: element,\n        classes: classes,\n        event: event,\n        structural: isStructural,\n        options: options,\n        beforeStart: beforeStart,\n        close: close\n      });\n\n      element.on('$destroy', handleDestroyedElement);\n\n      // we only want there to be one function called within the post digest\n      // block. This way we can group animations for all the animations that\n      // were apart of the same postDigest flush call.\n      if (animationQueue.length > 1) return runner;\n\n      $rootScope.$$postDigest(function() {\n        var animations = [];\n        forEach(animationQueue, function(entry) {\n          // the element was destroyed early on which removed the runner\n          // form its storage. This means we can't animate this element\n          // at all and it already has been closed due to destruction.\n          if (getRunner(entry.element)) {\n            animations.push(entry);\n          } else {\n            entry.close();\n          }\n        });\n\n        // now any future animations will be in another postDigest\n        animationQueue.length = 0;\n\n        var groupedAnimations = groupAnimations(animations);\n        var toBeSortedAnimations = [];\n\n        forEach(groupedAnimations, function(animationEntry) {\n          toBeSortedAnimations.push({\n            domNode: getDomNode(animationEntry.from ? animationEntry.from.element : animationEntry.element),\n            fn: function triggerAnimationStart() {\n              // it's important that we apply the `ng-animate` CSS class and the\n              // temporary classes before we do any driver invoking since these\n              // CSS classes may be required for proper CSS detection.\n              animationEntry.beforeStart();\n\n              var startAnimationFn, closeFn = animationEntry.close;\n\n              // in the event that the element was removed before the digest runs or\n              // during the RAF sequencing then we should not trigger the animation.\n              var targetElement = animationEntry.anchors\n                  ? (animationEntry.from.element || animationEntry.to.element)\n                  : animationEntry.element;\n\n              if (getRunner(targetElement)) {\n                var operation = invokeFirstDriver(animationEntry);\n                if (operation) {\n                  startAnimationFn = operation.start;\n                }\n              }\n\n              if (!startAnimationFn) {\n                closeFn();\n              } else {\n                var animationRunner = startAnimationFn();\n                animationRunner.done(function(status) {\n                  closeFn(!status);\n                });\n                updateAnimationRunners(animationEntry, animationRunner);\n              }\n            }\n          });\n        });\n\n        // we need to sort each of the animations in order of parent to child\n        // relationships. This ensures that the child classes are applied at the\n        // right time.\n        $$rAFScheduler(sortAnimations(toBeSortedAnimations));\n      });\n\n      return runner;\n\n      // TODO(matsko): change to reference nodes\n      function getAnchorNodes(node) {\n        var SELECTOR = '[' + NG_ANIMATE_REF_ATTR + ']';\n        var items = node.hasAttribute(NG_ANIMATE_REF_ATTR)\n              ? [node]\n              : node.querySelectorAll(SELECTOR);\n        var anchors = [];\n        forEach(items, function(node) {\n          var attr = node.getAttribute(NG_ANIMATE_REF_ATTR);\n          if (attr && attr.length) {\n            anchors.push(node);\n          }\n        });\n        return anchors;\n      }\n\n      function groupAnimations(animations) {\n        var preparedAnimations = [];\n        var refLookup = {};\n        forEach(animations, function(animation, index) {\n          var element = animation.element;\n          var node = getDomNode(element);\n          var event = animation.event;\n          var enterOrMove = ['enter', 'move'].indexOf(event) >= 0;\n          var anchorNodes = animation.structural ? getAnchorNodes(node) : [];\n\n          if (anchorNodes.length) {\n            var direction = enterOrMove ? 'to' : 'from';\n\n            forEach(anchorNodes, function(anchor) {\n              var key = anchor.getAttribute(NG_ANIMATE_REF_ATTR);\n              refLookup[key] = refLookup[key] || {};\n              refLookup[key][direction] = {\n                animationID: index,\n                element: jqLite(anchor)\n              };\n            });\n          } else {\n            preparedAnimations.push(animation);\n          }\n        });\n\n        var usedIndicesLookup = {};\n        var anchorGroups = {};\n        forEach(refLookup, function(operations, key) {\n          var from = operations.from;\n          var to = operations.to;\n\n          if (!from || !to) {\n            // only one of these is set therefore we can't have an\n            // anchor animation since all three pieces are required\n            var index = from ? from.animationID : to.animationID;\n            var indexKey = index.toString();\n            if (!usedIndicesLookup[indexKey]) {\n              usedIndicesLookup[indexKey] = true;\n              preparedAnimations.push(animations[index]);\n            }\n            return;\n          }\n\n          var fromAnimation = animations[from.animationID];\n          var toAnimation = animations[to.animationID];\n          var lookupKey = from.animationID.toString();\n          if (!anchorGroups[lookupKey]) {\n            var group = anchorGroups[lookupKey] = {\n              structural: true,\n              beforeStart: function() {\n                fromAnimation.beforeStart();\n                toAnimation.beforeStart();\n              },\n              close: function() {\n                fromAnimation.close();\n                toAnimation.close();\n              },\n              classes: cssClassesIntersection(fromAnimation.classes, toAnimation.classes),\n              from: fromAnimation,\n              to: toAnimation,\n              anchors: [] // TODO(matsko): change to reference nodes\n            };\n\n            // the anchor animations require that the from and to elements both have at least\n            // one shared CSS class which effectively marries the two elements together to use\n            // the same animation driver and to properly sequence the anchor animation.\n            if (group.classes.length) {\n              preparedAnimations.push(group);\n            } else {\n              preparedAnimations.push(fromAnimation);\n              preparedAnimations.push(toAnimation);\n            }\n          }\n\n          anchorGroups[lookupKey].anchors.push({\n            'out': from.element, 'in': to.element\n          });\n        });\n\n        return preparedAnimations;\n      }\n\n      function cssClassesIntersection(a,b) {\n        a = a.split(' ');\n        b = b.split(' ');\n        var matches = [];\n\n        for (var i = 0; i < a.length; i++) {\n          var aa = a[i];\n          if (aa.substring(0,3) === 'ng-') continue;\n\n          for (var j = 0; j < b.length; j++) {\n            if (aa === b[j]) {\n              matches.push(aa);\n              break;\n            }\n          }\n        }\n\n        return matches.join(' ');\n      }\n\n      function invokeFirstDriver(animationDetails) {\n        // we loop in reverse order since the more general drivers (like CSS and JS)\n        // may attempt more elements, but custom drivers are more particular\n        for (var i = drivers.length - 1; i >= 0; i--) {\n          var driverName = drivers[i];\n          var factory = $injector.get(driverName);\n          var driver = factory(animationDetails);\n          if (driver) {\n            return driver;\n          }\n        }\n      }\n\n      function beforeStart() {\n        element.addClass(NG_ANIMATE_CLASSNAME);\n        if (tempClasses) {\n          $$jqLite.addClass(element, tempClasses);\n        }\n        if (prepareClassName) {\n          $$jqLite.removeClass(element, prepareClassName);\n          prepareClassName = null;\n        }\n      }\n\n      function updateAnimationRunners(animation, newRunner) {\n        if (animation.from && animation.to) {\n          update(animation.from.element);\n          update(animation.to.element);\n        } else {\n          update(animation.element);\n        }\n\n        function update(element) {\n          var runner = getRunner(element);\n          if (runner) runner.setHost(newRunner);\n        }\n      }\n\n      function handleDestroyedElement() {\n        var runner = getRunner(element);\n        if (runner && (event !== 'leave' || !options.$$domOperationFired)) {\n          runner.end();\n        }\n      }\n\n      function close(rejected) {\n        element.off('$destroy', handleDestroyedElement);\n        removeRunner(element);\n\n        applyAnimationClasses(element, options);\n        applyAnimationStyles(element, options);\n        options.domOperation();\n\n        if (tempClasses) {\n          $$jqLite.removeClass(element, tempClasses);\n        }\n\n        element.removeClass(NG_ANIMATE_CLASSNAME);\n        runner.complete(!rejected);\n      }\n    };\n  }];\n}];\n\n/**\n * @ngdoc directive\n * @name ngAnimateSwap\n * @restrict A\n * @scope\n *\n * @description\n *\n * ngAnimateSwap is a animation-oriented directive that allows for the container to\n * be removed and entered in whenever the associated expression changes. A\n * common usecase for this directive is a rotating banner or slider component which\n * contains one image being present at a time. When the active image changes\n * then the old image will perform a `leave` animation and the new element\n * will be inserted via an `enter` animation.\n *\n * @animations\n * | Animation                        | Occurs                               |\n * |----------------------------------|--------------------------------------|\n * | {@link ng.$animate#enter enter}  | when the new element is inserted to the DOM  |\n * | {@link ng.$animate#leave leave}  | when the old element is removed from the DOM |\n *\n * @example\n * <example name=\"ngAnimateSwap-directive\" module=\"ngAnimateSwapExample\"\n *          deps=\"angular-animate.js\"\n *          animations=\"true\" fixBase=\"true\">\n *   <file name=\"index.html\">\n *     <div class=\"container\" ng-controller=\"AppCtrl\">\n *       <div ng-animate-swap=\"number\" class=\"cell swap-animation\" ng-class=\"colorClass(number)\">\n *         {{ number }}\n *       </div>\n *     </div>\n *   </file>\n *   <file name=\"script.js\">\n *     angular.module('ngAnimateSwapExample', ['ngAnimate'])\n *       .controller('AppCtrl', ['$scope', '$interval', function($scope, $interval) {\n *         $scope.number = 0;\n *         $interval(function() {\n *           $scope.number++;\n *         }, 1000);\n *\n *         var colors = ['red','blue','green','yellow','orange'];\n *         $scope.colorClass = function(number) {\n *           return colors[number % colors.length];\n *         };\n *       }]);\n *   </file>\n *  <file name=\"animations.css\">\n *  .container {\n *    height:250px;\n *    width:250px;\n *    position:relative;\n *    overflow:hidden;\n *    border:2px solid black;\n *  }\n *  .container .cell {\n *    font-size:150px;\n *    text-align:center;\n *    line-height:250px;\n *    position:absolute;\n *    top:0;\n *    left:0;\n *    right:0;\n *    border-bottom:2px solid black;\n *  }\n *  .swap-animation.ng-enter, .swap-animation.ng-leave {\n *    transition:0.5s linear all;\n *  }\n *  .swap-animation.ng-enter {\n *    top:-250px;\n *  }\n *  .swap-animation.ng-enter-active {\n *    top:0px;\n *  }\n *  .swap-animation.ng-leave {\n *    top:0px;\n *  }\n *  .swap-animation.ng-leave-active {\n *    top:250px;\n *  }\n *  .red { background:red; }\n *  .green { background:green; }\n *  .blue { background:blue; }\n *  .yellow { background:yellow; }\n *  .orange { background:orange; }\n *  </file>\n * </example>\n */\nvar ngAnimateSwapDirective = ['$animate', '$rootScope', function($animate, $rootScope) {\n  return {\n    restrict: 'A',\n    transclude: 'element',\n    terminal: true,\n    priority: 600, // we use 600 here to ensure that the directive is caught before others\n    link: function(scope, $element, attrs, ctrl, $transclude) {\n      var previousElement, previousScope;\n      scope.$watchCollection(attrs.ngAnimateSwap || attrs['for'], function(value) {\n        if (previousElement) {\n          $animate.leave(previousElement);\n        }\n        if (previousScope) {\n          previousScope.$destroy();\n          previousScope = null;\n        }\n        if (value || value === 0) {\n          previousScope = scope.$new();\n          $transclude(previousScope, function(element) {\n            previousElement = element;\n            $animate.enter(element, null, $element);\n          });\n        }\n      });\n    }\n  };\n}];\n\n/**\n * @ngdoc module\n * @name ngAnimate\n * @description\n *\n * The `ngAnimate` module provides support for CSS-based animations (keyframes and transitions) as well as JavaScript-based animations via\n * callback hooks. Animations are not enabled by default, however, by including `ngAnimate` the animation hooks are enabled for an Angular app.\n *\n * <div doc-module-components=\"ngAnimate\"></div>\n *\n * # Usage\n * Simply put, there are two ways to make use of animations when ngAnimate is used: by using **CSS** and **JavaScript**. The former works purely based\n * using CSS (by using matching CSS selectors/styles) and the latter triggers animations that are registered via `module.animation()`. For\n * both CSS and JS animations the sole requirement is to have a matching `CSS class` that exists both in the registered animation and within\n * the HTML element that the animation will be triggered on.\n *\n * ## Directive Support\n * The following directives are \"animation aware\":\n *\n * | Directive                                                                                                | Supported Animations                                                     |\n * |----------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------|\n * | {@link ng.directive:ngRepeat#animations ngRepeat}                                                        | enter, leave and move                                                    |\n * | {@link ngRoute.directive:ngView#animations ngView}                                                       | enter and leave                                                          |\n * | {@link ng.directive:ngInclude#animations ngInclude}                                                      | enter and leave                                                          |\n * | {@link ng.directive:ngSwitch#animations ngSwitch}                                                        | enter and leave                                                          |\n * | {@link ng.directive:ngIf#animations ngIf}                                                                | enter and leave                                                          |\n * | {@link ng.directive:ngClass#animations ngClass}                                                          | add and remove (the CSS class(es) present)                               |\n * | {@link ng.directive:ngShow#animations ngShow} & {@link ng.directive:ngHide#animations ngHide}            | add and remove (the ng-hide class value)                                 |\n * | {@link ng.directive:form#animation-hooks form} & {@link ng.directive:ngModel#animation-hooks ngModel}    | add and remove (dirty, pristine, valid, invalid & all other validations) |\n * | {@link module:ngMessages#animations ngMessages}                                                          | add and remove (ng-active & ng-inactive)                                 |\n * | {@link module:ngMessages#animations ngMessage}                                                           | enter and leave                                                          |\n *\n * (More information can be found by visiting each the documentation associated with each directive.)\n *\n * ## CSS-based Animations\n *\n * CSS-based animations with ngAnimate are unique since they require no JavaScript code at all. By using a CSS class that we reference between our HTML\n * and CSS code we can create an animation that will be picked up by Angular when an underlying directive performs an operation.\n *\n * The example below shows how an `enter` animation can be made possible on an element using `ng-if`:\n *\n * ```html\n * <div ng-if=\"bool\" class=\"fade\">\n *    Fade me in out\n * </div>\n * <button ng-click=\"bool=true\">Fade In!</button>\n * <button ng-click=\"bool=false\">Fade Out!</button>\n * ```\n *\n * Notice the CSS class **fade**? We can now create the CSS transition code that references this class:\n *\n * ```css\n * /&#42; The starting CSS styles for the enter animation &#42;/\n * .fade.ng-enter {\n *   transition:0.5s linear all;\n *   opacity:0;\n * }\n *\n * /&#42; The finishing CSS styles for the enter animation &#42;/\n * .fade.ng-enter.ng-enter-active {\n *   opacity:1;\n * }\n * ```\n *\n * The key thing to remember here is that, depending on the animation event (which each of the directives above trigger depending on what's going on) two\n * generated CSS classes will be applied to the element; in the example above we have `.ng-enter` and `.ng-enter-active`. For CSS transitions, the transition\n * code **must** be defined within the starting CSS class (in this case `.ng-enter`). The destination class is what the transition will animate towards.\n *\n * If for example we wanted to create animations for `leave` and `move` (ngRepeat triggers move) then we can do so using the same CSS naming conventions:\n *\n * ```css\n * /&#42; now the element will fade out before it is removed from the DOM &#42;/\n * .fade.ng-leave {\n *   transition:0.5s linear all;\n *   opacity:1;\n * }\n * .fade.ng-leave.ng-leave-active {\n *   opacity:0;\n * }\n * ```\n *\n * We can also make use of **CSS Keyframes** by referencing the keyframe animation within the starting CSS class:\n *\n * ```css\n * /&#42; there is no need to define anything inside of the destination\n * CSS class since the keyframe will take charge of the animation &#42;/\n * .fade.ng-leave {\n *   animation: my_fade_animation 0.5s linear;\n *   -webkit-animation: my_fade_animation 0.5s linear;\n * }\n *\n * @keyframes my_fade_animation {\n *   from { opacity:1; }\n *   to { opacity:0; }\n * }\n *\n * @-webkit-keyframes my_fade_animation {\n *   from { opacity:1; }\n *   to { opacity:0; }\n * }\n * ```\n *\n * Feel free also mix transitions and keyframes together as well as any other CSS classes on the same element.\n *\n * ### CSS Class-based Animations\n *\n * Class-based animations (animations that are triggered via `ngClass`, `ngShow`, `ngHide` and some other directives) have a slightly different\n * naming convention. Class-based animations are basic enough that a standard transition or keyframe can be referenced on the class being added\n * and removed.\n *\n * For example if we wanted to do a CSS animation for `ngHide` then we place an animation on the `.ng-hide` CSS class:\n *\n * ```html\n * <div ng-show=\"bool\" class=\"fade\">\n *   Show and hide me\n * </div>\n * <button ng-click=\"bool=!bool\">Toggle</button>\n *\n * <style>\n * .fade.ng-hide {\n *   transition:0.5s linear all;\n *   opacity:0;\n * }\n * </style>\n * ```\n *\n * All that is going on here with ngShow/ngHide behind the scenes is the `.ng-hide` class is added/removed (when the hidden state is valid). Since\n * ngShow and ngHide are animation aware then we can match up a transition and ngAnimate handles the rest.\n *\n * In addition the addition and removal of the CSS class, ngAnimate also provides two helper methods that we can use to further decorate the animation\n * with CSS styles.\n *\n * ```html\n * <div ng-class=\"{on:onOff}\" class=\"highlight\">\n *   Highlight this box\n * </div>\n * <button ng-click=\"onOff=!onOff\">Toggle</button>\n *\n * <style>\n * .highlight {\n *   transition:0.5s linear all;\n * }\n * .highlight.on-add {\n *   background:white;\n * }\n * .highlight.on {\n *   background:yellow;\n * }\n * .highlight.on-remove {\n *   background:black;\n * }\n * </style>\n * ```\n *\n * We can also make use of CSS keyframes by placing them within the CSS classes.\n *\n *\n * ### CSS Staggering Animations\n * A Staggering animation is a collection of animations that are issued with a slight delay in between each successive operation resulting in a\n * curtain-like effect. The ngAnimate module (versions >=1.2) supports staggering animations and the stagger effect can be\n * performed by creating a **ng-EVENT-stagger** CSS class and attaching that class to the base CSS class used for\n * the animation. The style property expected within the stagger class can either be a **transition-delay** or an\n * **animation-delay** property (or both if your animation contains both transitions and keyframe animations).\n *\n * ```css\n * .my-animation.ng-enter {\n *   /&#42; standard transition code &#42;/\n *   transition: 1s linear all;\n *   opacity:0;\n * }\n * .my-animation.ng-enter-stagger {\n *   /&#42; this will have a 100ms delay between each successive leave animation &#42;/\n *   transition-delay: 0.1s;\n *\n *   /&#42; As of 1.4.4, this must always be set: it signals ngAnimate\n *     to not accidentally inherit a delay property from another CSS class &#42;/\n *   transition-duration: 0s;\n *\n *   /&#42; if you are using animations instead of transitions you should configure as follows:\n *     animation-delay: 0.1s;\n *     animation-duration: 0s; &#42;/\n * }\n * .my-animation.ng-enter.ng-enter-active {\n *   /&#42; standard transition styles &#42;/\n *   opacity:1;\n * }\n * ```\n *\n * Staggering animations work by default in ngRepeat (so long as the CSS class is defined). Outside of ngRepeat, to use staggering animations\n * on your own, they can be triggered by firing multiple calls to the same event on $animate. However, the restrictions surrounding this\n * are that each of the elements must have the same CSS className value as well as the same parent element. A stagger operation\n * will also be reset if one or more animation frames have passed since the multiple calls to `$animate` were fired.\n *\n * The following code will issue the **ng-leave-stagger** event on the element provided:\n *\n * ```js\n * var kids = parent.children();\n *\n * $animate.leave(kids[0]); //stagger index=0\n * $animate.leave(kids[1]); //stagger index=1\n * $animate.leave(kids[2]); //stagger index=2\n * $animate.leave(kids[3]); //stagger index=3\n * $animate.leave(kids[4]); //stagger index=4\n *\n * window.requestAnimationFrame(function() {\n *   //stagger has reset itself\n *   $animate.leave(kids[5]); //stagger index=0\n *   $animate.leave(kids[6]); //stagger index=1\n *\n *   $scope.$digest();\n * });\n * ```\n *\n * Stagger animations are currently only supported within CSS-defined animations.\n *\n * ### The `ng-animate` CSS class\n *\n * When ngAnimate is animating an element it will apply the `ng-animate` CSS class to the element for the duration of the animation.\n * This is a temporary CSS class and it will be removed once the animation is over (for both JavaScript and CSS-based animations).\n *\n * Therefore, animations can be applied to an element using this temporary class directly via CSS.\n *\n * ```css\n * .zipper.ng-animate {\n *   transition:0.5s linear all;\n * }\n * .zipper.ng-enter {\n *   opacity:0;\n * }\n * .zipper.ng-enter.ng-enter-active {\n *   opacity:1;\n * }\n * .zipper.ng-leave {\n *   opacity:1;\n * }\n * .zipper.ng-leave.ng-leave-active {\n *   opacity:0;\n * }\n * ```\n *\n * (Note that the `ng-animate` CSS class is reserved and it cannot be applied on an element directly since ngAnimate will always remove\n * the CSS class once an animation has completed.)\n *\n *\n * ### The `ng-[event]-prepare` class\n *\n * This is a special class that can be used to prevent unwanted flickering / flash of content before\n * the actual animation starts. The class is added as soon as an animation is initialized, but removed\n * before the actual animation starts (after waiting for a $digest).\n * It is also only added for *structural* animations (`enter`, `move`, and `leave`).\n *\n * In practice, flickering can appear when nesting elements with structural animations such as `ngIf`\n * into elements that have class-based animations such as `ngClass`.\n *\n * ```html\n * <div ng-class=\"{red: myProp}\">\n *   <div ng-class=\"{blue: myProp}\">\n *     <div class=\"message\" ng-if=\"myProp\"></div>\n *   </div>\n * </div>\n * ```\n *\n * It is possible that during the `enter` animation, the `.message` div will be briefly visible before it starts animating.\n * In that case, you can add styles to the CSS that make sure the element stays hidden before the animation starts:\n *\n * ```css\n * .message.ng-enter-prepare {\n *   opacity: 0;\n * }\n *\n * ```\n *\n * ## JavaScript-based Animations\n *\n * ngAnimate also allows for animations to be consumed by JavaScript code. The approach is similar to CSS-based animations (where there is a shared\n * CSS class that is referenced in our HTML code) but in addition we need to register the JavaScript animation on the module. By making use of the\n * `module.animation()` module function we can register the animation.\n *\n * Let's see an example of a enter/leave animation using `ngRepeat`:\n *\n * ```html\n * <div ng-repeat=\"item in items\" class=\"slide\">\n *   {{ item }}\n * </div>\n * ```\n *\n * See the **slide** CSS class? Let's use that class to define an animation that we'll structure in our module code by using `module.animation`:\n *\n * ```js\n * myModule.animation('.slide', [function() {\n *   return {\n *     // make note that other events (like addClass/removeClass)\n *     // have different function input parameters\n *     enter: function(element, doneFn) {\n *       jQuery(element).fadeIn(1000, doneFn);\n *\n *       // remember to call doneFn so that angular\n *       // knows that the animation has concluded\n *     },\n *\n *     move: function(element, doneFn) {\n *       jQuery(element).fadeIn(1000, doneFn);\n *     },\n *\n *     leave: function(element, doneFn) {\n *       jQuery(element).fadeOut(1000, doneFn);\n *     }\n *   }\n * }]);\n * ```\n *\n * The nice thing about JS-based animations is that we can inject other services and make use of advanced animation libraries such as\n * greensock.js and velocity.js.\n *\n * If our animation code class-based (meaning that something like `ngClass`, `ngHide` and `ngShow` triggers it) then we can still define\n * our animations inside of the same registered animation, however, the function input arguments are a bit different:\n *\n * ```html\n * <div ng-class=\"color\" class=\"colorful\">\n *   this box is moody\n * </div>\n * <button ng-click=\"color='red'\">Change to red</button>\n * <button ng-click=\"color='blue'\">Change to blue</button>\n * <button ng-click=\"color='green'\">Change to green</button>\n * ```\n *\n * ```js\n * myModule.animation('.colorful', [function() {\n *   return {\n *     addClass: function(element, className, doneFn) {\n *       // do some cool animation and call the doneFn\n *     },\n *     removeClass: function(element, className, doneFn) {\n *       // do some cool animation and call the doneFn\n *     },\n *     setClass: function(element, addedClass, removedClass, doneFn) {\n *       // do some cool animation and call the doneFn\n *     }\n *   }\n * }]);\n * ```\n *\n * ## CSS + JS Animations Together\n *\n * AngularJS 1.4 and higher has taken steps to make the amalgamation of CSS and JS animations more flexible. However, unlike earlier versions of Angular,\n * defining CSS and JS animations to work off of the same CSS class will not work anymore. Therefore the example below will only result in **JS animations taking\n * charge of the animation**:\n *\n * ```html\n * <div ng-if=\"bool\" class=\"slide\">\n *   Slide in and out\n * </div>\n * ```\n *\n * ```js\n * myModule.animation('.slide', [function() {\n *   return {\n *     enter: function(element, doneFn) {\n *       jQuery(element).slideIn(1000, doneFn);\n *     }\n *   }\n * }]);\n * ```\n *\n * ```css\n * .slide.ng-enter {\n *   transition:0.5s linear all;\n *   transform:translateY(-100px);\n * }\n * .slide.ng-enter.ng-enter-active {\n *   transform:translateY(0);\n * }\n * ```\n *\n * Does this mean that CSS and JS animations cannot be used together? Do JS-based animations always have higher priority? We can make up for the\n * lack of CSS animations by using the `$animateCss` service to trigger our own tweaked-out, CSS-based animations directly from\n * our own JS-based animation code:\n *\n * ```js\n * myModule.animation('.slide', ['$animateCss', function($animateCss) {\n *   return {\n *     enter: function(element) {\n*        // this will trigger `.slide.ng-enter` and `.slide.ng-enter-active`.\n *       return $animateCss(element, {\n *         event: 'enter',\n *         structural: true\n *       });\n *     }\n *   }\n * }]);\n * ```\n *\n * The nice thing here is that we can save bandwidth by sticking to our CSS-based animation code and we don't need to rely on a 3rd-party animation framework.\n *\n * The `$animateCss` service is very powerful since we can feed in all kinds of extra properties that will be evaluated and fed into a CSS transition or\n * keyframe animation. For example if we wanted to animate the height of an element while adding and removing classes then we can do so by providing that\n * data into `$animateCss` directly:\n *\n * ```js\n * myModule.animation('.slide', ['$animateCss', function($animateCss) {\n *   return {\n *     enter: function(element) {\n *       return $animateCss(element, {\n *         event: 'enter',\n *         structural: true,\n *         addClass: 'maroon-setting',\n *         from: { height:0 },\n *         to: { height: 200 }\n *       });\n *     }\n *   }\n * }]);\n * ```\n *\n * Now we can fill in the rest via our transition CSS code:\n *\n * ```css\n * /&#42; the transition tells ngAnimate to make the animation happen &#42;/\n * .slide.ng-enter { transition:0.5s linear all; }\n *\n * /&#42; this extra CSS class will be absorbed into the transition\n * since the $animateCss code is adding the class &#42;/\n * .maroon-setting { background:red; }\n * ```\n *\n * And `$animateCss` will figure out the rest. Just make sure to have the `done()` callback fire the `doneFn` function to signal when the animation is over.\n *\n * To learn more about what's possible be sure to visit the {@link ngAnimate.$animateCss $animateCss service}.\n *\n * ## Animation Anchoring (via `ng-animate-ref`)\n *\n * ngAnimate in AngularJS 1.4 comes packed with the ability to cross-animate elements between\n * structural areas of an application (like views) by pairing up elements using an attribute\n * called `ng-animate-ref`.\n *\n * Let's say for example we have two views that are managed by `ng-view` and we want to show\n * that there is a relationship between two components situated in within these views. By using the\n * `ng-animate-ref` attribute we can identify that the two components are paired together and we\n * can then attach an animation, which is triggered when the view changes.\n *\n * Say for example we have the following template code:\n *\n * ```html\n * <!-- index.html -->\n * <div ng-view class=\"view-animation\">\n * </div>\n *\n * <!-- home.html -->\n * <a href=\"#/banner-page\">\n *   <img src=\"./banner.jpg\" class=\"banner\" ng-animate-ref=\"banner\">\n * </a>\n *\n * <!-- banner-page.html -->\n * <img src=\"./banner.jpg\" class=\"banner\" ng-animate-ref=\"banner\">\n * ```\n *\n * Now, when the view changes (once the link is clicked), ngAnimate will examine the\n * HTML contents to see if there is a match reference between any components in the view\n * that is leaving and the view that is entering. It will scan both the view which is being\n * removed (leave) and inserted (enter) to see if there are any paired DOM elements that\n * contain a matching ref value.\n *\n * The two images match since they share the same ref value. ngAnimate will now create a\n * transport element (which is a clone of the first image element) and it will then attempt\n * to animate to the position of the second image element in the next view. For the animation to\n * work a special CSS class called `ng-anchor` will be added to the transported element.\n *\n * We can now attach a transition onto the `.banner.ng-anchor` CSS class and then\n * ngAnimate will handle the entire transition for us as well as the addition and removal of\n * any changes of CSS classes between the elements:\n *\n * ```css\n * .banner.ng-anchor {\n *   /&#42; this animation will last for 1 second since there are\n *          two phases to the animation (an `in` and an `out` phase) &#42;/\n *   transition:0.5s linear all;\n * }\n * ```\n *\n * We also **must** include animations for the views that are being entered and removed\n * (otherwise anchoring wouldn't be possible since the new view would be inserted right away).\n *\n * ```css\n * .view-animation.ng-enter, .view-animation.ng-leave {\n *   transition:0.5s linear all;\n *   position:fixed;\n *   left:0;\n *   top:0;\n *   width:100%;\n * }\n * .view-animation.ng-enter {\n *   transform:translateX(100%);\n * }\n * .view-animation.ng-leave,\n * .view-animation.ng-enter.ng-enter-active {\n *   transform:translateX(0%);\n * }\n * .view-animation.ng-leave.ng-leave-active {\n *   transform:translateX(-100%);\n * }\n * ```\n *\n * Now we can jump back to the anchor animation. When the animation happens, there are two stages that occur:\n * an `out` and an `in` stage. The `out` stage happens first and that is when the element is animated away\n * from its origin. Once that animation is over then the `in` stage occurs which animates the\n * element to its destination. The reason why there are two animations is to give enough time\n * for the enter animation on the new element to be ready.\n *\n * The example above sets up a transition for both the in and out phases, but we can also target the out or\n * in phases directly via `ng-anchor-out` and `ng-anchor-in`.\n *\n * ```css\n * .banner.ng-anchor-out {\n *   transition: 0.5s linear all;\n *\n *   /&#42; the scale will be applied during the out animation,\n *          but will be animated away when the in animation runs &#42;/\n *   transform: scale(1.2);\n * }\n *\n * .banner.ng-anchor-in {\n *   transition: 1s linear all;\n * }\n * ```\n *\n *\n *\n *\n * ### Anchoring Demo\n *\n  <example module=\"anchoringExample\"\n           name=\"anchoringExample\"\n           id=\"anchoringExample\"\n           deps=\"angular-animate.js;angular-route.js\"\n           animations=\"true\">\n    <file name=\"index.html\">\n      <a href=\"#!/\">Home</a>\n      <hr />\n      <div class=\"view-container\">\n        <div ng-view class=\"view\"></div>\n      </div>\n    </file>\n    <file name=\"script.js\">\n      angular.module('anchoringExample', ['ngAnimate', 'ngRoute'])\n        .config(['$routeProvider', function($routeProvider) {\n          $routeProvider.when('/', {\n            templateUrl: 'home.html',\n            controller: 'HomeController as home'\n          });\n          $routeProvider.when('/profile/:id', {\n            templateUrl: 'profile.html',\n            controller: 'ProfileController as profile'\n          });\n        }])\n        .run(['$rootScope', function($rootScope) {\n          $rootScope.records = [\n            { id: 1, title: 'Miss Beulah Roob' },\n            { id: 2, title: 'Trent Morissette' },\n            { id: 3, title: 'Miss Ava Pouros' },\n            { id: 4, title: 'Rod Pouros' },\n            { id: 5, title: 'Abdul Rice' },\n            { id: 6, title: 'Laurie Rutherford Sr.' },\n            { id: 7, title: 'Nakia McLaughlin' },\n            { id: 8, title: 'Jordon Blanda DVM' },\n            { id: 9, title: 'Rhoda Hand' },\n            { id: 10, title: 'Alexandrea Sauer' }\n          ];\n        }])\n        .controller('HomeController', [function() {\n          //empty\n        }])\n        .controller('ProfileController', ['$rootScope', '$routeParams',\n            function ProfileController($rootScope, $routeParams) {\n          var index = parseInt($routeParams.id, 10);\n          var record = $rootScope.records[index - 1];\n\n          this.title = record.title;\n          this.id = record.id;\n        }]);\n    </file>\n    <file name=\"home.html\">\n      <h2>Welcome to the home page</h1>\n      <p>Please click on an element</p>\n      <a class=\"record\"\n         ng-href=\"#!/profile/{{ record.id }}\"\n         ng-animate-ref=\"{{ record.id }}\"\n         ng-repeat=\"record in records\">\n        {{ record.title }}\n      </a>\n    </file>\n    <file name=\"profile.html\">\n      <div class=\"profile record\" ng-animate-ref=\"{{ profile.id }}\">\n        {{ profile.title }}\n      </div>\n    </file>\n    <file name=\"animations.css\">\n      .record {\n        display:block;\n        font-size:20px;\n      }\n      .profile {\n        background:black;\n        color:white;\n        font-size:100px;\n      }\n      .view-container {\n        position:relative;\n      }\n      .view-container > .view.ng-animate {\n        position:absolute;\n        top:0;\n        left:0;\n        width:100%;\n        min-height:500px;\n      }\n      .view.ng-enter, .view.ng-leave,\n      .record.ng-anchor {\n        transition:0.5s linear all;\n      }\n      .view.ng-enter {\n        transform:translateX(100%);\n      }\n      .view.ng-enter.ng-enter-active, .view.ng-leave {\n        transform:translateX(0%);\n      }\n      .view.ng-leave.ng-leave-active {\n        transform:translateX(-100%);\n      }\n      .record.ng-anchor-out {\n        background:red;\n      }\n    </file>\n  </example>\n *\n * ### How is the element transported?\n *\n * When an anchor animation occurs, ngAnimate will clone the starting element and position it exactly where the starting\n * element is located on screen via absolute positioning. The cloned element will be placed inside of the root element\n * of the application (where ng-app was defined) and all of the CSS classes of the starting element will be applied. The\n * element will then animate into the `out` and `in` animations and will eventually reach the coordinates and match\n * the dimensions of the destination element. During the entire animation a CSS class of `.ng-animate-shim` will be applied\n * to both the starting and destination elements in order to hide them from being visible (the CSS styling for the class\n * is: `visibility:hidden`). Once the anchor reaches its destination then it will be removed and the destination element\n * will become visible since the shim class will be removed.\n *\n * ### How is the morphing handled?\n *\n * CSS Anchoring relies on transitions and keyframes and the internal code is intelligent enough to figure out\n * what CSS classes differ between the starting element and the destination element. These different CSS classes\n * will be added/removed on the anchor element and a transition will be applied (the transition that is provided\n * in the anchor class). Long story short, ngAnimate will figure out what classes to add and remove which will\n * make the transition of the element as smooth and automatic as possible. Be sure to use simple CSS classes that\n * do not rely on DOM nesting structure so that the anchor element appears the same as the starting element (since\n * the cloned element is placed inside of root element which is likely close to the body element).\n *\n * Note that if the root element is on the `<html>` element then the cloned node will be placed inside of body.\n *\n *\n * ## Using $animate in your directive code\n *\n * So far we've explored how to feed in animations into an Angular application, but how do we trigger animations within our own directives in our application?\n * By injecting the `$animate` service into our directive code, we can trigger structural and class-based hooks which can then be consumed by animations. Let's\n * imagine we have a greeting box that shows and hides itself when the data changes\n *\n * ```html\n * <greeting-box active=\"onOrOff\">Hi there</greeting-box>\n * ```\n *\n * ```js\n * ngModule.directive('greetingBox', ['$animate', function($animate) {\n *   return function(scope, element, attrs) {\n *     attrs.$observe('active', function(value) {\n *       value ? $animate.addClass(element, 'on') : $animate.removeClass(element, 'on');\n *     });\n *   });\n * }]);\n * ```\n *\n * Now the `on` CSS class is added and removed on the greeting box component. Now if we add a CSS class on top of the greeting box element\n * in our HTML code then we can trigger a CSS or JS animation to happen.\n *\n * ```css\n * /&#42; normally we would create a CSS class to reference on the element &#42;/\n * greeting-box.on { transition:0.5s linear all; background:green; color:white; }\n * ```\n *\n * The `$animate` service contains a variety of other methods like `enter`, `leave`, `animate` and `setClass`. To learn more about what's\n * possible be sure to visit the {@link ng.$animate $animate service API page}.\n *\n *\n * ## Callbacks and Promises\n *\n * When `$animate` is called it returns a promise that can be used to capture when the animation has ended. Therefore if we were to trigger\n * an animation (within our directive code) then we can continue performing directive and scope related activities after the animation has\n * ended by chaining onto the returned promise that animation method returns.\n *\n * ```js\n * // somewhere within the depths of the directive\n * $animate.enter(element, parent).then(function() {\n *   //the animation has completed\n * });\n * ```\n *\n * (Note that earlier versions of Angular prior to v1.4 required the promise code to be wrapped using `$scope.$apply(...)`. This is not the case\n * anymore.)\n *\n * In addition to the animation promise, we can also make use of animation-related callbacks within our directives and controller code by registering\n * an event listener using the `$animate` service. Let's say for example that an animation was triggered on our view\n * routing controller to hook into that:\n *\n * ```js\n * ngModule.controller('HomePageController', ['$animate', function($animate) {\n *   $animate.on('enter', ngViewElement, function(element) {\n *     // the animation for this route has completed\n *   }]);\n * }])\n * ```\n *\n * (Note that you will need to trigger a digest within the callback to get angular to notice any scope-related changes.)\n */\n\nvar copy;\nvar extend;\nvar forEach;\nvar isArray;\nvar isDefined;\nvar isElement;\nvar isFunction;\nvar isObject;\nvar isString;\nvar isUndefined;\nvar jqLite;\nvar noop;\n\n/**\n * @ngdoc service\n * @name $animate\n * @kind object\n *\n * @description\n * The ngAnimate `$animate` service documentation is the same for the core `$animate` service.\n *\n * Click here {@link ng.$animate to learn more about animations with `$animate`}.\n */\nangular.module('ngAnimate', [], function initAngularHelpers() {\n  // Access helpers from angular core.\n  // Do it inside a `config` block to ensure `window.angular` is available.\n  noop        = angular.noop;\n  copy        = angular.copy;\n  extend      = angular.extend;\n  jqLite      = angular.element;\n  forEach     = angular.forEach;\n  isArray     = angular.isArray;\n  isString    = angular.isString;\n  isObject    = angular.isObject;\n  isUndefined = angular.isUndefined;\n  isDefined   = angular.isDefined;\n  isFunction  = angular.isFunction;\n  isElement   = angular.isElement;\n})\n  .info({ angularVersion: '1.6.6' })\n  .directive('ngAnimateSwap', ngAnimateSwapDirective)\n\n  .directive('ngAnimateChildren', $$AnimateChildrenDirective)\n  .factory('$$rAFScheduler', $$rAFSchedulerFactory)\n\n  .provider('$$animateQueue', $$AnimateQueueProvider)\n  .provider('$$animation', $$AnimationProvider)\n\n  .provider('$animateCss', $AnimateCssProvider)\n  .provider('$$animateCssDriver', $$AnimateCssDriverProvider)\n\n  .provider('$$animateJs', $$AnimateJsProvider)\n  .provider('$$animateJsDriver', $$AnimateJsDriverProvider);\n\n\n})(window, window.angular);\n","/**\n * @license AngularJS v1.6.6\n * (c) 2010-2017 Google, Inc. http://angularjs.org\n * License: MIT\n */\n(function(window, angular) {'use strict';\n\n/**\n * @ngdoc module\n * @name ngAria\n * @description\n *\n * The `ngAria` module provides support for common\n * [<abbr title=\"Accessible Rich Internet Applications\">ARIA</abbr>](http://www.w3.org/TR/wai-aria/)\n * attributes that convey state or semantic information about the application for users\n * of assistive technologies, such as screen readers.\n *\n * <div doc-module-components=\"ngAria\"></div>\n *\n * ## Usage\n *\n * For ngAria to do its magic, simply include the module `ngAria` as a dependency. The following\n * directives are supported:\n * `ngModel`, `ngChecked`, `ngReadonly`, `ngRequired`, `ngValue`, `ngDisabled`, `ngShow`, `ngHide`, `ngClick`,\n * `ngDblClick`, and `ngMessages`.\n *\n * Below is a more detailed breakdown of the attributes handled by ngAria:\n *\n * | Directive                                   | Supported Attributes                                                                                |\n * |---------------------------------------------|-----------------------------------------------------------------------------------------------------|\n * | {@link ng.directive:ngModel ngModel}        | aria-checked, aria-valuemin, aria-valuemax, aria-valuenow, aria-invalid, aria-required, input roles |\n * | {@link ng.directive:ngDisabled ngDisabled}  | aria-disabled                                                                                       |\n * | {@link ng.directive:ngRequired ngRequired}  | aria-required                                                                                       |\n * | {@link ng.directive:ngChecked ngChecked}    | aria-checked                                                                                        |\n * | {@link ng.directive:ngReadonly ngReadonly}  | aria-readonly                                                                                       |\n * | {@link ng.directive:ngValue ngValue}        | aria-checked                                                                                        |\n * | {@link ng.directive:ngShow ngShow}          | aria-hidden                                                                                         |\n * | {@link ng.directive:ngHide ngHide}          | aria-hidden                                                                                         |\n * | {@link ng.directive:ngDblclick ngDblclick}  | tabindex                                                                                            |\n * | {@link module:ngMessages ngMessages}        | aria-live                                                                                           |\n * | {@link ng.directive:ngClick ngClick}        | tabindex, keydown event, button role                                                                |\n *\n * Find out more information about each directive by reading the\n * {@link guide/accessibility ngAria Developer Guide}.\n *\n * ## Example\n * Using ngDisabled with ngAria:\n * ```html\n * <md-checkbox ng-disabled=\"disabled\">\n * ```\n * Becomes:\n * ```html\n * <md-checkbox ng-disabled=\"disabled\" aria-disabled=\"true\">\n * ```\n *\n * ## Disabling Attributes\n * It's possible to disable individual attributes added by ngAria with the\n * {@link ngAria.$ariaProvider#config config} method. For more details, see the\n * {@link guide/accessibility Developer Guide}.\n */\nvar ngAriaModule = angular.module('ngAria', ['ng']).\n                        info({ angularVersion: '1.6.6' }).\n                        provider('$aria', $AriaProvider);\n\n/**\n* Internal Utilities\n*/\nvar nodeBlackList = ['BUTTON', 'A', 'INPUT', 'TEXTAREA', 'SELECT', 'DETAILS', 'SUMMARY'];\n\nvar isNodeOneOf = function(elem, nodeTypeArray) {\n  if (nodeTypeArray.indexOf(elem[0].nodeName) !== -1) {\n    return true;\n  }\n};\n/**\n * @ngdoc provider\n * @name $ariaProvider\n * @this\n *\n * @description\n *\n * Used for configuring the ARIA attributes injected and managed by ngAria.\n *\n * ```js\n * angular.module('myApp', ['ngAria'], function config($ariaProvider) {\n *   $ariaProvider.config({\n *     ariaValue: true,\n *     tabindex: false\n *   });\n * });\n *```\n *\n * ## Dependencies\n * Requires the {@link ngAria} module to be installed.\n *\n */\nfunction $AriaProvider() {\n  var config = {\n    ariaHidden: true,\n    ariaChecked: true,\n    ariaReadonly: true,\n    ariaDisabled: true,\n    ariaRequired: true,\n    ariaInvalid: true,\n    ariaValue: true,\n    tabindex: true,\n    bindKeydown: true,\n    bindRoleForClick: true\n  };\n\n  /**\n   * @ngdoc method\n   * @name $ariaProvider#config\n   *\n   * @param {object} config object to enable/disable specific ARIA attributes\n   *\n   *  - **ariaHidden**  `{boolean}`  Enables/disables aria-hidden tags\n   *  - **ariaChecked**  `{boolean}`  Enables/disables aria-checked tags\n   *  - **ariaReadonly**  `{boolean}`  Enables/disables aria-readonly tags\n   *  - **ariaDisabled**  `{boolean}`  Enables/disables aria-disabled tags\n   *  - **ariaRequired**  `{boolean}`  Enables/disables aria-required tags\n   *  - **ariaInvalid**  `{boolean}`  Enables/disables aria-invalid tags\n   *  - **ariaValue**  `{boolean}`  Enables/disables aria-valuemin, aria-valuemax and\n   *    aria-valuenow tags\n   *  - **tabindex**  `{boolean}`  Enables/disables tabindex tags\n   *  - **bindKeydown**  `{boolean}`  Enables/disables keyboard event binding on non-interactive\n   *    elements (such as `div` or `li`) using ng-click, making them more accessible to users of\n   *    assistive technologies\n   *  - **bindRoleForClick**  `{boolean}`  Adds role=button to non-interactive elements (such as\n   *    `div` or `li`) using ng-click, making them more accessible to users of assistive\n   *    technologies\n   *\n   * @description\n   * Enables/disables various ARIA attributes\n   */\n  this.config = function(newConfig) {\n    config = angular.extend(config, newConfig);\n  };\n\n  function watchExpr(attrName, ariaAttr, nodeBlackList, negate) {\n    return function(scope, elem, attr) {\n      var ariaCamelName = attr.$normalize(ariaAttr);\n      if (config[ariaCamelName] && !isNodeOneOf(elem, nodeBlackList) && !attr[ariaCamelName]) {\n        scope.$watch(attr[attrName], function(boolVal) {\n          // ensure boolean value\n          boolVal = negate ? !boolVal : !!boolVal;\n          elem.attr(ariaAttr, boolVal);\n        });\n      }\n    };\n  }\n  /**\n   * @ngdoc service\n   * @name $aria\n   *\n   * @description\n   * @priority 200\n   *\n   * The $aria service contains helper methods for applying common\n   * [ARIA](http://www.w3.org/TR/wai-aria/) attributes to HTML directives.\n   *\n   * ngAria injects common accessibility attributes that tell assistive technologies when HTML\n   * elements are enabled, selected, hidden, and more. To see how this is performed with ngAria,\n   * let's review a code snippet from ngAria itself:\n   *\n   *```js\n   * ngAriaModule.directive('ngDisabled', ['$aria', function($aria) {\n   *   return $aria.$$watchExpr('ngDisabled', 'aria-disabled', nodeBlackList, false);\n   * }])\n   *```\n   * Shown above, the ngAria module creates a directive with the same signature as the\n   * traditional `ng-disabled` directive. But this ngAria version is dedicated to\n   * solely managing accessibility attributes on custom elements. The internal `$aria` service is\n   * used to watch the boolean attribute `ngDisabled`. If it has not been explicitly set by the\n   * developer, `aria-disabled` is injected as an attribute with its value synchronized to the\n   * value in `ngDisabled`.\n   *\n   * Because ngAria hooks into the `ng-disabled` directive, developers do not have to do\n   * anything to enable this feature. The `aria-disabled` attribute is automatically managed\n   * simply as a silent side-effect of using `ng-disabled` with the ngAria module.\n   *\n   * The full list of directives that interface with ngAria:\n   * * **ngModel**\n   * * **ngChecked**\n   * * **ngReadonly**\n   * * **ngRequired**\n   * * **ngDisabled**\n   * * **ngValue**\n   * * **ngShow**\n   * * **ngHide**\n   * * **ngClick**\n   * * **ngDblclick**\n   * * **ngMessages**\n   *\n   * Read the {@link guide/accessibility ngAria Developer Guide} for a thorough explanation of each\n   * directive.\n   *\n   *\n   * ## Dependencies\n   * Requires the {@link ngAria} module to be installed.\n   */\n  this.$get = function() {\n    return {\n      config: function(key) {\n        return config[key];\n      },\n      $$watchExpr: watchExpr\n    };\n  };\n}\n\n\nngAriaModule.directive('ngShow', ['$aria', function($aria) {\n  return $aria.$$watchExpr('ngShow', 'aria-hidden', [], true);\n}])\n.directive('ngHide', ['$aria', function($aria) {\n  return $aria.$$watchExpr('ngHide', 'aria-hidden', [], false);\n}])\n.directive('ngValue', ['$aria', function($aria) {\n  return $aria.$$watchExpr('ngValue', 'aria-checked', nodeBlackList, false);\n}])\n.directive('ngChecked', ['$aria', function($aria) {\n  return $aria.$$watchExpr('ngChecked', 'aria-checked', nodeBlackList, false);\n}])\n.directive('ngReadonly', ['$aria', function($aria) {\n  return $aria.$$watchExpr('ngReadonly', 'aria-readonly', nodeBlackList, false);\n}])\n.directive('ngRequired', ['$aria', function($aria) {\n  return $aria.$$watchExpr('ngRequired', 'aria-required', nodeBlackList, false);\n}])\n.directive('ngModel', ['$aria', function($aria) {\n\n  function shouldAttachAttr(attr, normalizedAttr, elem, allowBlacklistEls) {\n    return $aria.config(normalizedAttr) && !elem.attr(attr) && (allowBlacklistEls || !isNodeOneOf(elem, nodeBlackList));\n  }\n\n  function shouldAttachRole(role, elem) {\n    // if element does not have role attribute\n    // AND element type is equal to role (if custom element has a type equaling shape) <-- remove?\n    // AND element is not in nodeBlackList\n    return !elem.attr('role') && (elem.attr('type') === role) && !isNodeOneOf(elem, nodeBlackList);\n  }\n\n  function getShape(attr, elem) {\n    var type = attr.type,\n        role = attr.role;\n\n    return ((type || role) === 'checkbox' || role === 'menuitemcheckbox') ? 'checkbox' :\n           ((type || role) === 'radio'    || role === 'menuitemradio') ? 'radio' :\n           (type === 'range'              || role === 'progressbar' || role === 'slider') ? 'range' : '';\n  }\n\n  return {\n    restrict: 'A',\n    require: 'ngModel',\n    priority: 200, //Make sure watches are fired after any other directives that affect the ngModel value\n    compile: function(elem, attr) {\n      var shape = getShape(attr, elem);\n\n      return {\n        post: function(scope, elem, attr, ngModel) {\n          var needsTabIndex = shouldAttachAttr('tabindex', 'tabindex', elem, false);\n\n          function ngAriaWatchModelValue() {\n            return ngModel.$modelValue;\n          }\n\n          function getRadioReaction(newVal) {\n            // Strict comparison would cause a BC\n            // eslint-disable-next-line eqeqeq\n            var boolVal = (attr.value == ngModel.$viewValue);\n            elem.attr('aria-checked', boolVal);\n          }\n\n          function getCheckboxReaction() {\n            elem.attr('aria-checked', !ngModel.$isEmpty(ngModel.$viewValue));\n          }\n\n          switch (shape) {\n            case 'radio':\n            case 'checkbox':\n              if (shouldAttachRole(shape, elem)) {\n                elem.attr('role', shape);\n              }\n              if (shouldAttachAttr('aria-checked', 'ariaChecked', elem, false)) {\n                scope.$watch(ngAriaWatchModelValue, shape === 'radio' ?\n                    getRadioReaction : getCheckboxReaction);\n              }\n              if (needsTabIndex) {\n                elem.attr('tabindex', 0);\n              }\n              break;\n            case 'range':\n              if (shouldAttachRole(shape, elem)) {\n                elem.attr('role', 'slider');\n              }\n              if ($aria.config('ariaValue')) {\n                var needsAriaValuemin = !elem.attr('aria-valuemin') &&\n                    (attr.hasOwnProperty('min') || attr.hasOwnProperty('ngMin'));\n                var needsAriaValuemax = !elem.attr('aria-valuemax') &&\n                    (attr.hasOwnProperty('max') || attr.hasOwnProperty('ngMax'));\n                var needsAriaValuenow = !elem.attr('aria-valuenow');\n\n                if (needsAriaValuemin) {\n                  attr.$observe('min', function ngAriaValueMinReaction(newVal) {\n                    elem.attr('aria-valuemin', newVal);\n                  });\n                }\n                if (needsAriaValuemax) {\n                  attr.$observe('max', function ngAriaValueMinReaction(newVal) {\n                    elem.attr('aria-valuemax', newVal);\n                  });\n                }\n                if (needsAriaValuenow) {\n                  scope.$watch(ngAriaWatchModelValue, function ngAriaValueNowReaction(newVal) {\n                    elem.attr('aria-valuenow', newVal);\n                  });\n                }\n              }\n              if (needsTabIndex) {\n                elem.attr('tabindex', 0);\n              }\n              break;\n          }\n\n          if (!attr.hasOwnProperty('ngRequired') && ngModel.$validators.required\n            && shouldAttachAttr('aria-required', 'ariaRequired', elem, false)) {\n            // ngModel.$error.required is undefined on custom controls\n            attr.$observe('required', function() {\n              elem.attr('aria-required', !!attr['required']);\n            });\n          }\n\n          if (shouldAttachAttr('aria-invalid', 'ariaInvalid', elem, true)) {\n            scope.$watch(function ngAriaInvalidWatch() {\n              return ngModel.$invalid;\n            }, function ngAriaInvalidReaction(newVal) {\n              elem.attr('aria-invalid', !!newVal);\n            });\n          }\n        }\n      };\n    }\n  };\n}])\n.directive('ngDisabled', ['$aria', function($aria) {\n  return $aria.$$watchExpr('ngDisabled', 'aria-disabled', nodeBlackList, false);\n}])\n.directive('ngMessages', function() {\n  return {\n    restrict: 'A',\n    require: '?ngMessages',\n    link: function(scope, elem, attr, ngMessages) {\n      if (!elem.attr('aria-live')) {\n        elem.attr('aria-live', 'assertive');\n      }\n    }\n  };\n})\n.directive('ngClick',['$aria', '$parse', function($aria, $parse) {\n  return {\n    restrict: 'A',\n    compile: function(elem, attr) {\n      var fn = $parse(attr.ngClick);\n      return function(scope, elem, attr) {\n\n        if (!isNodeOneOf(elem, nodeBlackList)) {\n\n          if ($aria.config('bindRoleForClick') && !elem.attr('role')) {\n            elem.attr('role', 'button');\n          }\n\n          if ($aria.config('tabindex') && !elem.attr('tabindex')) {\n            elem.attr('tabindex', 0);\n          }\n\n          if ($aria.config('bindKeydown') && !attr.ngKeydown && !attr.ngKeypress && !attr.ngKeyup) {\n            elem.on('keydown', function(event) {\n              var keyCode = event.which || event.keyCode;\n              if (keyCode === 32 || keyCode === 13) {\n                scope.$apply(callback);\n              }\n\n              function callback() {\n                fn(scope, { $event: event });\n              }\n            });\n          }\n        }\n      };\n    }\n  };\n}])\n.directive('ngDblclick', ['$aria', function($aria) {\n  return function(scope, elem, attr) {\n    if ($aria.config('tabindex') && !elem.attr('tabindex') && !isNodeOneOf(elem, nodeBlackList)) {\n      elem.attr('tabindex', 0);\n    }\n  };\n}]);\n\n\n})(window, window.angular);\n","/**\n * Bunch of useful filters for angularJS(with no external dependencies!)\n * @version v0.5.14 - 2016-12-06 * @link https://github.com/a8m/angular-filter\n * @author Ariel Mashraki <ariel@mashraki.co.il>\n * @license MIT License, http://www.opensource.org/licenses/MIT\n */\n(function ( window, angular, undefined ) {\n/*jshint globalstrict:true*/\n'use strict';\n\nvar isDefined = angular.isDefined,\n    isUndefined = angular.isUndefined,\n    isFunction = angular.isFunction,\n    isString = angular.isString,\n    isNumber = angular.isNumber,\n    isObject = angular.isObject,\n    isArray = angular.isArray,\n    forEach = angular.forEach,\n    extend = angular.extend,\n    copy = angular.copy,\n    equals = angular.equals;\n\n\n/**\n * @description\n * get an object and return array of values\n * @param object\n * @returns {Array}\n */\nfunction toArray(object) {\n  return isArray(object) \n    ? object \n    : Object.keys(object).map(function(key) {\n      return object[key];\n    });\n}\n\n/**\n * @param value\n * @returns {boolean}\n */\nfunction isNull(value) {\n    return value === null;\n}\n\n/**\n * @description\n * return if object contains partial object\n * @param partial{object}\n * @param object{object}\n * @returns {boolean}\n */\nfunction objectContains(partial, object) {\n  var keys = Object.keys(partial);\n\n  return keys.map(function(el) {\n    return (object[el] !== undefined) && (object[el] == partial[el]);\n  }).indexOf(false) == -1;\n\n}\n\n/**\n * @description\n * search for approximate pattern in string\n * @param word\n * @param pattern\n * @returns {*}\n */\nfunction hasApproxPattern(word, pattern) {\n  // cheaper version of indexOf; instead of creating each\n  // iteration new str.\n  function indexOf(word, p, c) {\n    var j = 0;\n    while ((p + j) <= word.length) {\n      if (word.charAt(p + j) == c) return j;\n      j++;\n    }\n    return -1;\n  }\n  var p = 0;\n  for (var i = 0; i <= pattern.length; i++) {\n    var index = indexOf(word, p, pattern.charAt(i));\n    if (index == -1) return false;\n    p += index + 1;\n  }\n  return true\n}\n\n/**\n * @description\n * return the first n element of an array,\n * if expression provided, is returns as long the expression return truthy\n * @param array\n * @param n {number}\n * @param expression {$parse}\n * @return array or single object\n */\nfunction getFirstMatches(array, n, expression) {\n  var count = 0;\n\n  return array.filter(function(elm) {\n    var rest = isDefined(expression) ? (count < n && expression(elm)) : count < n;\n    count = rest ? count+1 : count;\n\n    return rest;\n  });\n}\n/**\n * Polyfill to ECMA6 String.prototype.contains\n */\nif (!String.prototype.contains) {\n  String.prototype.contains = function() {\n    return String.prototype.indexOf.apply(this, arguments) !== -1;\n  };\n}\n\n/**\n * @param num {Number}\n * @param decimal {Number}\n * @returns {Number}\n */\nfunction convertToDecimal(num, decimal){\n  return Math.round(num * Math.pow(10,decimal)) / (Math.pow(10, decimal));\n}\n\n/**\n * @description\n * Get an object, and return an array composed of it's properties names(nested too).\n * @param obj {Object}\n * @param stack {Array}\n * @param parent {String}\n * @returns {Array}\n * @example\n * parseKeys({ a:1, b: { c:2, d: { e: 3 } } }) ==> [\"a\", \"b.c\", \"b.d.e\"]\n */\nfunction deepKeys(obj, stack, parent) {\n  stack = stack || [];\n  var keys = Object.keys(obj);\n\n  keys.forEach(function(el) {\n    //if it's a nested object\n    if(isObject(obj[el]) && !isArray(obj[el])) {\n      //concatenate the new parent if exist\n      var p = parent ? parent + '.' + el : parent;\n      deepKeys(obj[el], stack, p || el);\n    } else {\n      //create and save the key\n      var key = parent ? parent + '.' + el : el;\n      stack.push(key)\n    }\n  });\n  return stack\n}\n\n/**\n * @description\n * Test if given object is a Scope instance\n * @param obj\n * @returns {Boolean}\n */\nfunction isScope(obj) {\n  return obj && obj.$evalAsync && obj.$watch;\n}\n\n/**\n * @ngdoc filter\n * @name a8m.angular\n * @kind function\n *\n * @description\n * reference to angular function\n */\n\nangular.module('a8m.angular', [])\n\n    .filter('isUndefined', function () {\n      return function (input) {\n        return angular.isUndefined(input);\n      }\n    })\n    .filter('isDefined', function() {\n      return function (input) {\n        return angular.isDefined(input);\n      }\n    })\n    .filter('isFunction', function() {\n      return function (input) {\n        return angular.isFunction(input);\n      }\n    })\n    .filter('isString', function() {\n      return function (input) {\n        return angular.isString(input)\n      }\n    })\n    .filter('isNumber', function() {\n      return function (input) {\n        return angular.isNumber(input);\n      }\n    })\n    .filter('isArray', function() {\n      return function (input) {\n        return angular.isArray(input);\n      }\n    })\n    .filter('isObject', function() {\n      return function (input) {\n        return angular.isObject(input);\n      }\n    })\n    .filter('isEqual', function() {\n      return function (o1, o2) {\n        return angular.equals(o1, o2);\n      }\n    });\n\n/**\n * @ngdoc filter\n * @name a8m.conditions\n * @kind function\n *\n * @description\n * reference to math conditions\n */\n angular.module('a8m.conditions', [])\n\n  .filter({\n    isGreaterThan  : isGreaterThanFilter,\n    '>'            : isGreaterThanFilter,\n\n    isGreaterThanOrEqualTo  : isGreaterThanOrEqualToFilter,\n    '>='                    : isGreaterThanOrEqualToFilter,\n\n    isLessThan  : isLessThanFilter,\n    '<'         : isLessThanFilter,\n\n    isLessThanOrEqualTo  : isLessThanOrEqualToFilter,\n    '<='                 : isLessThanOrEqualToFilter,\n\n    isEqualTo  : isEqualToFilter,\n    '=='       : isEqualToFilter,\n\n    isNotEqualTo  : isNotEqualToFilter,\n    '!='          : isNotEqualToFilter,\n\n    isIdenticalTo  : isIdenticalToFilter,\n    '==='          : isIdenticalToFilter,\n\n    isNotIdenticalTo  : isNotIdenticalToFilter,\n    '!=='             : isNotIdenticalToFilter\n  });\n\n  function isGreaterThanFilter() {\n    return function (input, check) {\n      return input > check;\n    };\n  }\n\n  function isGreaterThanOrEqualToFilter() {\n    return function (input, check) {\n      return input >= check;\n    };\n  }\n\n  function isLessThanFilter() {\n    return function (input, check) {\n      return input < check;\n    };\n  }\n\n  function isLessThanOrEqualToFilter() {\n    return function (input, check) {\n      return input <= check;\n    };\n  }\n\n  function isEqualToFilter() {\n    return function (input, check) {\n      return input == check;\n    };\n  }\n\n  function isNotEqualToFilter() {\n    return function (input, check) {\n      return input != check;\n    };\n  }\n\n  function isIdenticalToFilter() {\n    return function (input, check) {\n      return input === check;\n    };\n  }\n\n  function isNotIdenticalToFilter() {\n    return function (input, check) {\n      return input !== check;\n    };\n  }\n/**\n * @ngdoc filter\n * @name isNull\n * @kind function\n *\n * @description\n * checks if value is null or not\n * @return Boolean\n */\nangular.module('a8m.is-null', [])\n    .filter('isNull', function () {\n      return function(input) {\n        return isNull(input);\n      }\n    });\n\n/**\n * @ngdoc filter\n * @name after-where\n * @kind function\n *\n * @description\n * get a collection and properties object, and returns all of the items\n * in the collection after the first that found with the given properties.\n *\n */\nangular.module('a8m.after-where', [])\n    .filter('afterWhere', function() {\n      return function (collection, object) {\n\n        collection = isObject(collection)\n          ? toArray(collection)\n          : collection;\n\n        if(!isArray(collection) || isUndefined(object)) return collection;\n\n        var index = collection.map( function( elm ) {\n          return objectContains(object, elm);\n        }).indexOf( true );\n\n        return collection.slice((index === -1) ? 0 : index);\n      }\n    });\n\n/**\n * @ngdoc filter\n * @name after\n * @kind function\n *\n * @description\n * get a collection and specified count, and returns all of the items\n * in the collection after the specified count.\n *\n */\n\nangular.module('a8m.after', [])\n    .filter('after', function() {\n      return function (collection, count) {\n        collection = isObject(collection)\n          ? toArray(collection)\n          : collection;\n\n        return (isArray(collection))\n          ? collection.slice(count)\n          : collection;\n      }\n    });\n\n/**\n * @ngdoc filter\n * @name before-where\n * @kind function\n *\n * @description\n * get a collection and properties object, and returns all of the items\n * in the collection before the first that found with the given properties.\n */\nangular.module('a8m.before-where', [])\n  .filter('beforeWhere', function() {\n    return function (collection, object) {\n\n      collection = isObject(collection)\n        ? toArray(collection)\n        : collection;\n\n      if(!isArray(collection) || isUndefined(object)) return collection;\n\n      var index = collection.map( function( elm ) {\n        return objectContains(object, elm);\n      }).indexOf( true );\n\n      return collection.slice(0, (index === -1) ? collection.length : ++index);\n    }\n  });\n\n/**\n * @ngdoc filter\n * @name before\n * @kind function\n *\n * @description\n * get a collection and specified count, and returns all of the items\n * in the collection before the specified count.\n */\nangular.module('a8m.before', [])\n    .filter('before', function() {\n      return function (collection, count) {\n        collection = isObject(collection)\n          ? toArray(collection)\n          : collection;\n\n        return (isArray(collection))\n          ? collection.slice(0, (!count) ? count : --count)\n          : collection;\n      }\n    });\n\n/**\n * @ngdoc filter\n * @name chunkBy\n * @kind function\n *\n * @description\n * Collect data into fixed-length chunks or blocks\n */\n\nangular.module('a8m.chunk-by', ['a8m.filter-watcher'])\n    .filter('chunkBy', ['filterWatcher', function (filterWatcher) {\n      return function (array, n, fillVal) {\n\n        return filterWatcher.isMemoized('chunkBy', arguments) ||\n            filterWatcher.memoize('chunkBy', arguments, this,\n                _chunkBy(array, n, fillVal));\n        /**\n         * @description\n         * Get array with size `n` in `val` inside it.\n         * @param n\n         * @param val\n         * @returns {Array}\n         */\n        function fill(n, val) {\n          var ret = [];\n          while (n--) ret[n] = val;\n          return ret;\n        }\n\n        function _chunkBy(array, n, fillVal) {\n          if (!isArray(array)) return array;\n          return array.map(function (el, i, self) {\n            i = i * n;\n            el = self.slice(i, i + n);\n            return !isUndefined(fillVal) && el.length < n\n                ? el.concat(fill(n - el.length, fillVal))\n                : el;\n          }).slice(0, Math.ceil(array.length / n));\n        }\n      }\n    }]);\n\n/**\n * @ngdoc filter\n * @name concat\n * @kind function\n *\n * @description\n * get (array/object, object/array) and return merged collection\n */\nangular.module('a8m.concat', [])\n  .filter('concat', [function () {\n    return function (collection, joined) {\n\n      if (isUndefined(joined)) return collection;\n\n      if (isArray(collection)) {\n        return isObject(joined)\n          ? collection.concat(toArray(joined))\n          : collection.concat(joined);\n      }\n\n      if (isObject(collection)) {\n        var array = toArray(collection);\n        return (isObject(joined))\n          ? array.concat(toArray(joined))\n          : array.concat(joined);\n      }\n      return collection;\n    };\n  }\n]);\n\n/**\n * @ngdoc filter\n * @name contains\n * @kind function\n *\n * @description\n * Checks if given expression is present in one or more object in the collection\n */\nangular.module('a8m.contains', [])\n  .filter({\n    contains: ['$parse', containsFilter],\n    some: ['$parse', containsFilter]\n  });\n\nfunction containsFilter($parse) {\n    return function (collection, expression) {\n\n      collection = isObject(collection) ? toArray(collection) : collection;\n\n      if(!isArray(collection) || isUndefined(expression)) {\n        return false;\n      }\n\n      return collection.some(function(elm) {\n        return ((isString(expression) && isObject(elm)) || isFunction(expression))\n          ? $parse(expression)(elm)\n          : elm === expression;\n      });\n\n    }\n }\n\n/**\n * @ngdoc filter\n * @name countBy\n * @kind function\n *\n * @description\n * Sorts a list into groups and returns a count for the number of objects in each group.\n */\n\nangular.module('a8m.count-by', [])\n\n  .filter('countBy', [ '$parse', function ( $parse ) {\n    return function (collection, property) {\n\n      var result = {},\n        get = $parse(property),\n        prop;\n\n      collection = (isObject(collection)) ? toArray(collection) : collection;\n\n      if(!isArray(collection) || isUndefined(property)) {\n        return collection;\n      }\n\n      collection.forEach( function( elm ) {\n        prop = get(elm);\n\n        if(!result[prop]) {\n          result[prop] = 0;\n        }\n\n        result[prop]++;\n      });\n\n      return result;\n    }\n  }]);\n\n/**\n * @ngdoc filter\n * @name defaults\n * @kind function\n *\n * @description\n * defaultsFilter allows to specify a default fallback value for properties that resolve to undefined.\n */\nangular.module('a8m.defaults', [])\n  .filter('defaults', ['$parse', function( $parse ) {\n    return function(collection, defaults) {\n\n      collection = isObject(collection) ? toArray(collection) : collection;\n\n      if(!isArray(collection) || !isObject(defaults)) {\n        return collection;\n      }\n\n      var keys = deepKeys(defaults);\n\n      collection.forEach(function(elm) {\n        //loop through all the keys\n        keys.forEach(function(key) {\n          var getter = $parse(key);\n          var setter = getter.assign;\n          //if it's not exist\n          if(isUndefined(getter(elm))) {\n            //get from defaults, and set to the returned object\n            setter(elm, getter(defaults))\n          }\n        });\n      });\n\n      return collection;\n    }\n  }]);\n/**\n * @ngdoc filter\n * @name every\n * @kind function\n *\n * @description\n * Checks if given expression is present in all members in the collection\n *\n */\nangular.module('a8m.every', [])\n  .filter('every', ['$parse', function($parse) {\n    return function (collection, expression) {\n      collection = isObject(collection) ? toArray(collection) : collection;\n\n      if(!isArray(collection) || isUndefined(expression)) {\n        return true;\n      }\n\n      return collection.every( function(elm) {\n        return (isObject(elm) || isFunction(expression))\n          ? $parse(expression)(elm)\n          : elm === expression;\n      });\n    }\n  }]);\n\n/**\n * @ngdoc filter\n * @name filterBy\n * @kind function\n *\n * @description\n * filter by specific properties, avoid the rest\n */\nangular.module('a8m.filter-by', [])\n  .filter('filterBy', ['$parse', function( $parse ) {\n    return function(collection, properties, search, strict) {\n      var comparator;\n\n      search = (isString(search) || isNumber(search)) ?\n        String(search).toLowerCase() : undefined;\n\n      collection = isObject(collection) ? toArray(collection) : collection;\n\n      if(!isArray(collection) || isUndefined(search)) {\n        return collection;\n      }\n\n      return collection.filter(function(elm) {\n        return properties.some(function(prop) {\n\n          /**\n           * check if there is concatenate properties\n           * example:\n           * object: { first: 'foo', last:'bar' }\n           * filterBy: ['first + last'] => search by full name(i.e 'foo bar')\n           */\n          if(!~prop.indexOf('+')) {\n            comparator = $parse(prop)(elm)\n          } else {\n            var propList = prop.replace(/\\s+/g, '').split('+');\n            comparator = propList\n              .map(function(prop) { return $parse(prop)(elm); })\n              .join(' ');\n          }\n\n          if (!isString(comparator) && !isNumber(comparator)) {\n            return false;\n          }\n\n          comparator = String(comparator).toLowerCase();\n\n          return strict ? comparator === search : comparator.contains(search);\n        });\n      });\n    }\n  }]);\n\n/**\n * @ngdoc filter\n * @name first\n * @kind function\n *\n * @description\n * Gets the first element or first n elements of an array\n * if callback is provided, is returns as long the callback return truthy\n */\nangular.module('a8m.first', [])\n  .filter('first', ['$parse', function( $parse ) {\n    return function(collection) {\n      var n\n        , getter\n        , args;\n\n      collection = isObject(collection)\n        ? toArray(collection)\n        : collection;\n\n      if(!isArray(collection)) {\n        return collection;\n      }\n\n      args = Array.prototype.slice.call(arguments, 1);\n      n = (isNumber(args[0])) ? args[0] : 1;\n      getter = (!isNumber(args[0]))  ? args[0] : (!isNumber(args[1])) ? args[1] : undefined;\n\n      return (args.length) ? getFirstMatches(collection, n,(getter) ? $parse(getter) : getter) :\n        collection[0];\n    }\n  }]);\n\n/**\n * @ngdoc filter\n * @name flatten\n * @kind function\n *\n * @description\n * Flattens a nested array (the nesting can be to any depth).\n * If you pass shallow, the array will only be flattened a single level\n */\nangular.module('a8m.flatten', [])\n  .filter('flatten', function () {\n    return function(collection, shallow) {\n\n      shallow = shallow || false;\n      collection = isObject(collection)\n        ? toArray(collection)\n        : collection;\n\n      if(!isArray(collection)) {\n        return collection;\n      }\n\n      return !shallow\n        ? flatten(collection, 0)\n        : [].concat.apply([], collection);\n    }\n  });\n\n/**\n * flatten nested array (the nesting can be to any depth).\n * @param array {Array}\n * @param i {int}\n * @returns {Array}\n * @private\n */\nfunction flatten(array, i) {\n  i = i || 0;\n\n  if(i >= array.length)\n    return array;\n\n  if(isArray(array[i])) {\n    return flatten(array.slice(0,i)\n      .concat(array[i], array.slice(i+1)), i);\n  }\n  return flatten(array, i+1);\n}\n\n/**\n * @ngdoc filter\n * @name fuzzyByKey\n * @kind function\n *\n * @description\n * fuzzy string searching by key\n */\nangular.module('a8m.fuzzy-by', [])\n  .filter('fuzzyBy', ['$parse', function ( $parse ) {\n    return function (collection, property, search, csensitive) {\n\n      var sensitive = csensitive || false,\n        prop, getter;\n\n      collection = isObject(collection) ? toArray(collection) : collection;\n\n      if(!isArray(collection) || isUndefined(property)\n        || isUndefined(search)) {\n        return collection;\n      }\n\n      getter = $parse(property);\n\n      return collection.filter(function(elm) {\n\n        prop = getter(elm);\n        if(!isString(prop)) {\n          return false;\n        }\n\n        prop = (sensitive) ? prop : prop.toLowerCase();\n        search = (sensitive) ? search : search.toLowerCase();\n\n        return hasApproxPattern(prop, search) !== false\n      })\n    }\n\n }]);\n/**\n * @ngdoc filter\n * @name fuzzy\n * @kind function\n *\n * @description\n * fuzzy string searching for array of strings, objects\n */\nangular.module('a8m.fuzzy', [])\n  .filter('fuzzy', function () {\n    return function (collection, search, csensitive) {\n      var sensitive = csensitive || false;\n      collection = isObject(collection) ? toArray(collection) : collection;\n\n      if(!isArray(collection) || isUndefined(search)) {\n        return collection;\n      }\n\n      search = (sensitive) ? search : search.toLowerCase();\n\n      return collection.filter(function(elm) {\n        if(isString(elm)) {\n          elm = (sensitive) ? elm : elm.toLowerCase();\n          return hasApproxPattern(elm, search) !== false\n        }\n        return (isObject(elm)) ? _hasApproximateKey(elm, search) : false;\n      });\n\n      /**\n       * checks if object has key{string} that match\n       * to fuzzy search pattern\n       * @param object\n       * @param search\n       * @returns {boolean}\n       * @private\n       */\n      function _hasApproximateKey(object, search) {\n        var properties = Object.keys(object),\n          prop, flag;\n        return 0 < properties.filter(function (elm) {\n          prop = object[elm];\n\n          //avoid iteration if we found some key that equal[performance]\n          if(flag) return true;\n\n          if (isString(prop)) {\n            prop = (sensitive) ? prop : prop.toLowerCase();\n            return flag = (hasApproxPattern(prop, search) !== false);\n          }\n\n          return false;\n\n        }).length;\n      }\n    }\n  });\n\n/**\n * @ngdoc filter\n * @name groupBy\n * @kind function\n *\n * @description\n * Create an object composed of keys generated from the result of running each element of a collection,\n * each key is an array of the elements.\n */\n\nangular.module('a8m.group-by', [ 'a8m.filter-watcher' ])\n  .filter('groupBy', [ '$parse', 'filterWatcher', function ( $parse, filterWatcher ) {\n    return function (collection, property) {\n\n      if(!isObject(collection) || isUndefined(property)) {\n        return collection;\n      }\n\n      return filterWatcher.isMemoized('groupBy', arguments) ||\n        filterWatcher.memoize('groupBy', arguments, this,\n          _groupBy(collection, $parse(property)));\n\n      /**\n       * groupBy function\n       * @param collection\n       * @param getter\n       * @returns {{}}\n       */\n      function _groupBy(collection, getter) {\n        var result = {};\n        var prop;\n\n        forEach( collection, function( elm ) {\n          prop = getter(elm);\n\n          if(!result[prop]) {\n            result[prop] = [];\n          }\n          result[prop].push(elm);\n        });\n        return result;\n      }\n    }\n }]);\n\n/**\n * @ngdoc filter\n * @name isEmpty\n * @kind function\n *\n * @description\n * get collection or string and return if it empty\n */\nangular.module('a8m.is-empty', [])\n  .filter('isEmpty', function () {\n    return function(collection) {\n      return isObject(collection)\n        ? !toArray(collection).length\n        : !collection.length;\n    }\n  });\n\n/**\n * @ngdoc filter\n * @name join\n * @kind function\n *\n * @description\n * join a collection by a provided delimiter (space by default)\n */\nangular.module('a8m.join', [])\n  .filter('join', function () {\n    return function (input, delimiter) {\n      if (isUndefined(input) || !isArray(input)) {\n        return input;\n      }\n      if (isUndefined(delimiter)) delimiter = ' ';\n\n      return input.join(delimiter);\n    };\n  })\n;\n\n/**\n * @ngdoc filter\n * @name last\n * @kind function\n *\n * @description\n * Gets the last element or last n elements of an array\n * if callback is provided, is returns as long the callback return truthy\n */\nangular.module('a8m.last', [])\n  .filter('last', ['$parse', function( $parse ) {\n    return function(collection) {\n      var n\n        , getter\n        , args\n        //cuz reverse change our src collection\n        //and we don't want side effects\n        , reversed = copy(collection);\n\n      reversed = isObject(reversed)\n        ? toArray(reversed)\n        : reversed;\n\n      if(!isArray(reversed)) {\n        return reversed;\n      }\n\n      args = Array.prototype.slice.call(arguments, 1);\n      n = (isNumber(args[0])) ? args[0] : 1;\n      getter = (!isNumber(args[0]))  ? args[0] : (!isNumber(args[1])) ? args[1] : undefined;\n\n      return (args.length)\n        //send reversed collection as arguments, and reverse it back as result\n        ? getFirstMatches(reversed.reverse(), n,(getter) ? $parse(getter) : getter).reverse()\n        //get the last element\n        : reversed[reversed.length-1];\n    }\n  }]);\n\n/**\n * @ngdoc filter\n * @name map\n * @kind function\n *\n * @description\n * Returns a new collection of the results of each expression execution.\n */\nangular.module('a8m.map', [])\n  .filter('map', ['$parse', function($parse) {\n    return function (collection, expression) {\n\n      collection = isObject(collection)\n        ? toArray(collection)\n        : collection;\n\n      if(!isArray(collection) || isUndefined(expression)) {\n        return collection;\n      }\n\n      return collection.map(function (elm) {\n        return $parse(expression)(elm);\n      });\n    }\n  }]);\n\n/**\n * @ngdoc filter\n * @name omit\n * @kind function\n *\n * @description\n * filter collection by expression\n */\n\nangular.module('a8m.omit', [])\n\n  .filter('omit', ['$parse', function($parse) {\n    return function (collection, expression) {\n\n      collection = isObject(collection)\n        ? toArray(collection)\n        : collection;\n\n      if(!isArray(collection) || isUndefined(expression)) {\n        return collection;\n      }\n\n      return collection.filter(function (elm) {\n        return !($parse(expression)(elm));\n      });\n    }\n  }]);\n\n/**\n * @ngdoc filter\n * @name pick\n * @kind function\n *\n * @description\n * filter collection by expression\n */\n\nangular.module('a8m.pick', [])\n\n  .filter('pick', ['$parse', function($parse) {\n    return function (collection, expression) {\n\n      collection = isObject(collection)\n        ? toArray(collection)\n        : collection;\n\n      if(!isArray(collection) || isUndefined(expression)) {\n        return collection;\n      }\n\n      return collection.filter(function (elm) {\n        return $parse(expression)(elm);\n      });\n    }\n  }]);\n\n/**\n * @ngdoc filter\n * @name range\n * @kind function\n *\n * @description\n * rangeFilter provides some support for a for loop using numbers\n */\nangular.module('a8m.range', [])\n  .filter('range', function () {\n    return function (input, total, start, increment, cb) {\n      start = start || 0;\n      increment = increment || 1;\n      for (var i = 0; i < parseInt(total); i++) {\n        var j = start + i * increment;\n        input.push(isFunction(cb) ? cb(j) : j);\n      }\n      return input;\n    };\n  });\n/**\n * @ngdoc filter\n * @name removeWith\n * @kind function\n *\n * @description\n * get collection and properties object, and removed elements\n * with this properties\n */\n\nangular.module('a8m.remove-with', [])\n  .filter('removeWith', function() {\n    return function (collection, object) {\n\n      if(isUndefined(object)) {\n        return collection;\n      }\n      collection = isObject(collection)\n        ? toArray(collection)\n        : collection;\n\n      return collection.filter(function (elm) {\n        return !objectContains(object, elm);\n      });\n    }\n  });\n\n\n/**\n * @ngdoc filter\n * @name remove\n * @kind function\n *\n * @description\n * remove specific members from collection\n */\n\nangular.module('a8m.remove', [])\n\n  .filter('remove', function () {\n    return function (collection) {\n      collection = isObject(collection) ? toArray(collection) : collection;\n      var args = Array.prototype.slice.call(arguments, 1);\n\n      if(!isArray(collection)) {\n        return collection;\n      }\n\n      return collection.filter( function( member ) {\n        return !args.some(function(nest) {\n          return equals(nest, member);\n        })\n      });\n    }\n  });\n\n/**\n * @ngdoc filter\n * @name reverse\n * @kind function\n *\n * @description\n * Reverses a string or collection\n */\nangular.module('a8m.reverse', [])\n    .filter('reverse',[ function () {\n      return function (input) {\n        input = isObject(input) ? toArray(input) : input;\n\n        if(isString(input)) {\n          return input.split('').reverse().join('');\n        }\n\n        return isArray(input)\n          ? input.slice().reverse()\n          : input;\n      }\n    }]);\n\n/**\n * @ngdoc filter\n * @name searchField\n * @kind function\n *\n * @description\n * for each member, join several strings field and add them to\n * new field called 'searchField' (use for search filtering)\n */\nangular.module('a8m.search-field', [])\n  .filter('searchField', ['$parse', function ($parse) {\n    return function (collection) {\n\n      var get, field;\n\n      collection = isObject(collection) ? toArray(collection) : collection;\n\n      var args = Array.prototype.slice.call(arguments, 1);\n\n      if(!isArray(collection) || !args.length) {\n        return collection;\n      }\n\n      return collection.map(function(member) {\n\n        field = args.map(function(field) {\n          get = $parse(field);\n          return get(member);\n        }).join(' ');\n\n        return extend(member, { searchField: field });\n      });\n    }\n  }]);\n\n/**\n * @ngdoc filter\n * @name toArray\n * @kind function\n *\n * @description\n * Convert objects into stable arrays.\n * if addKey set to true,the filter also attaches a new property\n * $key to the value containing the original key that was used in\n * the object we are iterating over to reference the property\n */\nangular.module('a8m.to-array', [])\n  .filter('toArray', function() {\n    return function (collection, addKey) {\n\n      if(!isObject(collection)) {\n        return collection;\n      }\n\n      return !addKey\n        ? toArray(collection)\n        : Object.keys(collection).map(function (key) {\n            return extend(collection[key], { $key: key });\n          });\n    }\n  });\n\n/**\n * @ngdoc filter\n * @name unique/uniq\n * @kind function\n *\n * @description\n * get collection and filter duplicate members\n * if uniqueFilter get a property(nested to) as argument it's\n * filter by this property as unique identifier\n */\n\nangular.module('a8m.unique', [])\n  .filter({\n      unique: ['$parse', uniqFilter],\n      uniq: ['$parse', uniqFilter]\n    });\n\nfunction uniqFilter($parse) {\n    return function (collection, property) {\n\n      collection = isObject(collection) ? toArray(collection) : collection;\n\n      if (!isArray(collection)) {\n        return collection;\n      }\n\n      //store all unique identifiers\n      var uniqueItems = [],\n          get = $parse(property);\n\n      return (isUndefined(property))\n        //if it's kind of primitive array\n        ? collection.filter(function (elm, pos, self) {\n          return self.indexOf(elm) === pos;\n        })\n        //else compare with equals\n        : collection.filter(function (elm) {\n          var prop = get(elm);\n          if(some(uniqueItems, prop)) {\n            return false;\n          }\n          uniqueItems.push(prop);\n          return true;\n      });\n\n      //checked if the unique identifier is already exist\n      function some(array, member) {\n        if(isUndefined(member)) {\n          return false;\n        }\n        return array.some(function(el) {\n          return equals(el, member);\n        });\n      }\n    }\n}\n\n/**\n * @ngdoc filter\n * @name where\n * @kind function\n *\n * @description\n * of each element in a collection to the given properties object,\n * returning an array of all elements that have equivalent property values.\n *\n */\nangular.module('a8m.where', [])\n  .filter('where', function() {\n    return function (collection, object) {\n      if(isUndefined(object)) return collection;\n      collection = isObject(collection)\n        ? toArray(collection)\n        : collection;\n\n      return collection.filter(function (elm) {\n        return objectContains(object, elm);\n      });\n    }\n  });\n\n/**\n * @ngdoc filter\n * @name xor\n * @kind function\n *\n * @description\n * Exclusive or filter by expression\n */\n\nangular.module('a8m.xor', [])\n\n  .filter('xor', ['$parse', function($parse) {\n    return function (col1, col2, expression) {\n\n      expression = expression || false;\n\n      col1 = isObject(col1) ? toArray(col1) : col1;\n      col2 = isObject(col2) ? toArray(col2) : col2;\n\n      if(!isArray(col1) || !isArray(col2)) return col1;\n\n      return col1.concat(col2)\n        .filter(function(elm) {\n          return !(some(elm, col1) && some(elm, col2));\n        });\n\n      function some(el, col) {\n        var getter = $parse(expression);\n        return col.some(function(dElm) {\n          return expression\n            ? equals(getter(dElm), getter(el))\n            : equals(dElm, el);\n        });\n      }\n    }\n  }]);\n\n/**\n * @ngdoc filter\n * @name abs\n * @kind function\n *\n * @description\n * Will return the absolute value of a number\n */\nangular.module('a8m.math.abs', [])\n  .filter('abs', function () {\n    return function (input) {\n      return Math.abs(input);\n    }\n  });\n\n/**\n * @ngdoc filter\n * @name formatBytes\n * @kind function\n *\n * @description\n * Convert bytes into appropriate display \n * 1024 bytes => 1 KB\n */\nangular.module('a8m.math.byteFmt', [])\n  .filter('byteFmt', function () {\n    var compared = [{str: 'B', val: 1024}];\n    ['KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'].forEach(function(el, i) {\n      compared.push({str: el, val: compared[i].val * 1024 });\n    });\n    return function (bytes, decimal) {\n      if(isNumber(decimal) && isFinite(decimal) && decimal%1===0 && decimal >= 0 &&\n        isNumber(bytes) && isFinite(bytes)) {\n        var i = 0;\n        while (i < compared.length-1 && bytes >= compared[i].val) i++;\n        bytes /= i > 0 ? compared[i-1].val : 1;\n        return convertToDecimal(bytes, decimal) + ' ' + compared[i].str;\n      }\n      return 'NaN';\n    }\n  });\n\n/**\n * @ngdoc filter\n * @name degrees\n * @kind function\n *\n * @description\n * Convert angle from radians to degrees\n */\nangular.module('a8m.math.degrees', [])\n  .filter('degrees', function () {\n    return function (radians, decimal) {\n      // if decimal is not an integer greater than -1, we cannot do. quit with error \"NaN\"\n      // if degrees is not a real number, we cannot do also. quit with error \"NaN\"\n      if(isNumber(decimal) && isFinite(decimal) && decimal%1===0 && decimal >= 0 &&\n        isNumber(radians) && isFinite(radians)) {\n        var degrees = (radians * 180) / Math.PI;\n        return Math.round(degrees * Math.pow(10,decimal)) / (Math.pow(10,decimal));\n      } else {\n        return 'NaN';\n      }\n    }\n  });\n\n \n \n/**\n * @ngdoc filter\n * @name formatBytes\n * @kind function\n *\n * @description\n * Convert bytes into appropriate display \n * 1024 kilobytes => 1 MB\n */\nangular.module('a8m.math.kbFmt', [])\n  .filter('kbFmt', function () {\n    var compared = [{str: 'KB', val: 1024}];\n    ['MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'].forEach(function(el, i) {\n      compared.push({str: el, val: compared[i].val * 1024 });\n    });\n    return function (bytes, decimal) {\n      if(isNumber(decimal) && isFinite(decimal) && decimal%1===0 && decimal >= 0 &&\n        isNumber(bytes) && isFinite(bytes)) {\n        var i = 0;\n        while (i < compared.length-1 && bytes >= compared[i].val) i++;\n        bytes /= i > 0 ? compared[i-1].val : 1;\n        return convertToDecimal(bytes, decimal) + ' ' + compared[i].str;\n      }\n      return 'NaN';\n    }\n  });\n/**\n * @ngdoc filter\n * @name max\n * @kind function\n *\n * @description\n * Math.max will get an array and return the max value. if an expression\n * is provided, will return max value by expression.\n */\nangular.module('a8m.math.max', [])\n  .filter('max', ['$parse', function ($parse) {\n    return function (input, expression) {\n\n      if(!isArray(input)) {\n        return input;\n      }\n      return isUndefined(expression)\n        ? Math.max.apply(Math, input)\n        : input[indexByMax(input, expression)];\n    };\n\n    /**\n     * @private\n     * @param array\n     * @param exp\n     * @returns {number|*|Number}\n     */\n    function indexByMax(array, exp) {\n      var mappedArray = array.map(function(elm){\n        return $parse(exp)(elm);\n      });\n      return mappedArray.indexOf(Math.max.apply(Math, mappedArray));\n    }\n  }]);\n/**\n * @ngdoc filter\n * @name min\n * @kind function\n *\n * @description\n * Math.min will get an array and return the min value. if an expression\n * is provided, will return min value by expression.\n */\nangular.module('a8m.math.min', [])\n  .filter('min', ['$parse', function ($parse) {\n    return function (input, expression) {\n\n      if(!isArray(input)) {\n        return input;\n      }\n      return isUndefined(expression)\n        ? Math.min.apply(Math, input)\n        : input[indexByMin(input, expression)];\n    };\n\n    /**\n     * @private\n     * @param array\n     * @param exp\n     * @returns {number|*|Number}\n     */\n    function indexByMin(array, exp) {\n      var mappedArray = array.map(function(elm){\n        return $parse(exp)(elm);\n      });\n      return mappedArray.indexOf(Math.min.apply(Math, mappedArray));\n    }\n  }]);\n/**\n * @ngdoc filter\n * @name Percent\n * @kind function\n *\n * @description\n * percentage between two numbers\n */\nangular.module('a8m.math.percent', [])\n  .filter('percent', function () {\n    return function (input, divided, round) {\n\n      var divider = isString(input) ? Number(input) : input;\n      divided = divided || 100;\n      round = round || false;\n\n      if (!isNumber(divider) || isNaN(divider)) return input;\n\n      return round\n        ? Math.round((divider / divided) * 100)\n        : (divider / divided) * 100;\n    }\n  });\n\n/**\n * @ngdoc filter\n * @name toRadians\n * @kind function\n *\n * @description\n * Convert angle from degrees to radians\n */\nangular.module('a8m.math.radians', [])\n  .filter('radians', function() {\n    return function (degrees, decimal) {\n      // if decimal is not an integer greater than -1, we cannot do. quit with error \"NaN\"\n      // if degrees is not a real number, we cannot do also. quit with error \"NaN\"\n      if(isNumber(decimal) && isFinite(decimal) && decimal%1===0 && decimal >= 0 &&\n        isNumber(degrees) && isFinite(degrees)) {\n        var radians = (degrees * 3.14159265359) / 180;\n        return Math.round(radians * Math.pow(10,decimal)) / (Math.pow(10,decimal));\n      }\n      return 'NaN';\n    }\n  });\n\n \n \n/**\n * @ngdoc filter\n * @name Radix\n * @kind function\n *\n * @description\n * converting decimal numbers to different bases(radix)\n */\nangular.module('a8m.math.radix', [])\n  .filter('radix', function () {\n    return function (input, radix) {\n      var RANGE = /^[2-9]$|^[1-2]\\d$|^3[0-6]$/;\n\n      if(!isNumber(input) || !RANGE.test(radix)) {\n        return input;\n      }\n\n      return input.toString(radix).toUpperCase();\n    }\n  });\n\n/**\n * @ngdoc filter\n * @name formatBytes\n * @kind function\n *\n * @description\n * Convert number into abbreviations.\n * i.e: K for one thousand, M for Million, B for billion\n * e.g: number of users:235,221, decimal:1 => 235.2 K\n */\nangular.module('a8m.math.shortFmt', [])\n  .filter('shortFmt', function () {\n    return function (number, decimal) {\n      if(isNumber(decimal) && isFinite(decimal) && decimal%1===0 && decimal >= 0 &&\n        isNumber(number) && isFinite(number)){\n        if(number < 1e3) {\n          return '' + number;  // Coerce to string\n        } else if(number < 1e6) {\n          return convertToDecimal((number / 1e3), decimal) + ' K';\n        } else if(number < 1e9){\n          return convertToDecimal((number / 1e6), decimal) + ' M';\n        } else {\n          return convertToDecimal((number / 1e9), decimal) + ' B';\n        }\n\n      }\n      return 'NaN';\n    }\n  });\n/**\n * @ngdoc filter\n * @name sum\n * @kind function\n *\n * @description\n * Sum up all values within an array\n */\nangular.module('a8m.math.sum', [])\n  .filter('sum', function () {\n    return function (input, initial) {\n      return !isArray(input)\n        ? input\n        : input.reduce(function(prev, curr) {\n          return prev + curr;\n        }, initial || 0);\n    }\n  });\n\n/**\n * @ngdoc filter\n * @name endsWith\n * @kind function\n *\n * @description\n * checks whether string ends with the ends parameter.\n */\nangular.module('a8m.ends-with', [])\n\n  .filter('endsWith', function () {\n    return function (input, ends, csensitive) {\n\n      var sensitive = csensitive || false,\n        position;\n\n      if(!isString(input) || isUndefined(ends)) {\n        return input;\n      }\n\n      input = (sensitive) ? input : input.toLowerCase();\n      position = input.length - ends.length;\n\n      return input.indexOf((sensitive) ? ends : ends.toLowerCase(), position) !== -1;\n    }\n  });\n\n/**\r\n * @ngdoc filter\r\n * @name latinize\r\n * @kind function\r\n *\r\n * @description\r\n * remove accents/diacritics from a string\r\n */\r\nangular.module('a8m.latinize', [])\r\n  .filter('latinize',[ function () {\r\n    var defaultDiacriticsRemovalap = [\r\n      {'base':'A', 'letters':'\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F'},\r\n      {'base':'AA','letters':'\\uA732'},\r\n      {'base':'AE','letters':'\\u00C6\\u01FC\\u01E2'},\r\n      {'base':'AO','letters':'\\uA734'},\r\n      {'base':'AU','letters':'\\uA736'},\r\n      {'base':'AV','letters':'\\uA738\\uA73A'},\r\n      {'base':'AY','letters':'\\uA73C'},\r\n      {'base':'B', 'letters':'\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181'},\r\n      {'base':'C', 'letters':'\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E'},\r\n      {'base':'D', 'letters':'\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779'},\r\n      {'base':'DZ','letters':'\\u01F1\\u01C4'},\r\n      {'base':'Dz','letters':'\\u01F2\\u01C5'},\r\n      {'base':'E', 'letters':'\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E'},\r\n      {'base':'F', 'letters':'\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B'},\r\n      {'base':'G', 'letters':'\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E'},\r\n      {'base':'H', 'letters':'\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D'},\r\n      {'base':'I', 'letters':'\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197'},\r\n      {'base':'J', 'letters':'\\u004A\\u24BF\\uFF2A\\u0134\\u0248'},\r\n      {'base':'K', 'letters':'\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2'},\r\n      {'base':'L', 'letters':'\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780'},\r\n      {'base':'LJ','letters':'\\u01C7'},\r\n      {'base':'Lj','letters':'\\u01C8'},\r\n      {'base':'M', 'letters':'\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C'},\r\n      {'base':'N', 'letters':'\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4'},\r\n      {'base':'NJ','letters':'\\u01CA'},\r\n      {'base':'Nj','letters':'\\u01CB'},\r\n      {'base':'O', 'letters':'\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C'},\r\n      {'base':'OI','letters':'\\u01A2'},\r\n      {'base':'OO','letters':'\\uA74E'},\r\n      {'base':'OU','letters':'\\u0222'},\r\n      {'base':'OE','letters':'\\u008C\\u0152'},\r\n      {'base':'oe','letters':'\\u009C\\u0153'},\r\n      {'base':'P', 'letters':'\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754'},\r\n      {'base':'Q', 'letters':'\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A'},\r\n      {'base':'R', 'letters':'\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782'},\r\n      {'base':'S', 'letters':'\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784'},\r\n      {'base':'T', 'letters':'\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786'},\r\n      {'base':'TZ','letters':'\\uA728'},\r\n      {'base':'U', 'letters':'\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244'},\r\n      {'base':'V', 'letters':'\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245'},\r\n      {'base':'VY','letters':'\\uA760'},\r\n      {'base':'W', 'letters':'\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72'},\r\n      {'base':'X', 'letters':'\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C'},\r\n      {'base':'Y', 'letters':'\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE'},\r\n      {'base':'Z', 'letters':'\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762'},\r\n      {'base':'a', 'letters':'\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250'},\r\n      {'base':'aa','letters':'\\uA733'},\r\n      {'base':'ae','letters':'\\u00E6\\u01FD\\u01E3'},\r\n      {'base':'ao','letters':'\\uA735'},\r\n      {'base':'au','letters':'\\uA737'},\r\n      {'base':'av','letters':'\\uA739\\uA73B'},\r\n      {'base':'ay','letters':'\\uA73D'},\r\n      {'base':'b', 'letters':'\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253'},\r\n      {'base':'c', 'letters':'\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184'},\r\n      {'base':'d', 'letters':'\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A'},\r\n      {'base':'dz','letters':'\\u01F3\\u01C6'},\r\n      {'base':'e', 'letters':'\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD'},\r\n      {'base':'f', 'letters':'\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C'},\r\n      {'base':'g', 'letters':'\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F'},\r\n      {'base':'h', 'letters':'\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265'},\r\n      {'base':'hv','letters':'\\u0195'},\r\n      {'base':'i', 'letters':'\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131'},\r\n      {'base':'j', 'letters':'\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249'},\r\n      {'base':'k', 'letters':'\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3'},\r\n      {'base':'l', 'letters':'\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u017F\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747'},\r\n      {'base':'lj','letters':'\\u01C9'},\r\n      {'base':'m', 'letters':'\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F'},\r\n      {'base':'n', 'letters':'\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5'},\r\n      {'base':'nj','letters':'\\u01CC'},\r\n      {'base':'o', 'letters':'\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275'},\r\n      {'base':'oi','letters':'\\u01A3'},\r\n      {'base':'ou','letters':'\\u0223'},\r\n      {'base':'oo','letters':'\\uA74F'},\r\n      {'base':'p','letters':'\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755'},\r\n      {'base':'q','letters':'\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759'},\r\n      {'base':'r','letters':'\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783'},\r\n      {'base':'s','letters':'\\u0073\\u24E2\\uFF53\\u00DF\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B'},\r\n      {'base':'t','letters':'\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787'},\r\n      {'base':'tz','letters':'\\uA729'},\r\n      {'base':'u','letters': '\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289'},\r\n      {'base':'v','letters':'\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C'},\r\n      {'base':'vy','letters':'\\uA761'},\r\n      {'base':'w','letters':'\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73'},\r\n      {'base':'x','letters':'\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D'},\r\n      {'base':'y','letters':'\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF'},\r\n      {'base':'z','letters':'\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763'}\r\n    ];\r\n\r\n    var diacriticsMap = {};\r\n    for (var i = 0; i < defaultDiacriticsRemovalap.length; i++) {\r\n      var letters = defaultDiacriticsRemovalap[i].letters.split(\"\");\r\n      for (var j = 0; j < letters.length ; j++){\r\n        diacriticsMap[letters[j]] = defaultDiacriticsRemovalap[i].base;\r\n      }\r\n    }\r\n\r\n    // \"what?\" version ... http://jsperf.com/diacritics/12\r\n    function removeDiacritics (str) {\r\n      return str.replace(/[^\\u0000-\\u007E]/g, function(a){\r\n        return diacriticsMap[a] || a;\r\n      });\r\n    }\r\n\r\n    return function (input) {\r\n\r\n      return isString(input)\r\n        ? removeDiacritics(input)\r\n        : input;\r\n    }\r\n  }]);\r\n\n/**\n * @ngdoc filter\n * @name ltrim\n * @kind function\n *\n * @description\n * Left trim. Similar to trimFilter, but only for left side.\n */\nangular.module('a8m.ltrim', [])\n  .filter('ltrim', function () {\n    return function(input, chars) {\n\n      var trim = chars || '\\\\s';\n\n      return isString(input)\n        ? input.replace(new RegExp('^' + trim + '+'), '')\n        : input;\n    }\n  });\n\n/**\r\n * @ngdoc filter\r\n * @name match\r\n * @kind function\r\n *\r\n * @description\r\n * Return the matched pattern in a string.\r\n */\r\nangular.module('a8m.match', [])\r\n  .filter('match', function () {\r\n    return function (input, pattern, flag) {\r\n\r\n      var reg = new RegExp(pattern, flag);\r\n\r\n      return isString(input)\r\n        ? input.match(reg)\r\n        : null;\r\n    }\r\n  });\r\n\n/**\n * @ngdoc filter\n * @name repeat\n * @kind function\n *\n * @description\n * Repeats a string n times\n */\nangular.module('a8m.repeat', [])\n  .filter('repeat',[ function () {\n    return function (input, n, separator) {\n\n      var times = ~~n;\n\n      if(!isString(input)) {\n        return input;\n      }\n\n      return !times\n        ? input\n        : strRepeat(input, --n, separator || '');\n    }\n  }]);\n\n/**\n * Repeats a string n times with given separator\n * @param str string to repeat\n * @param n number of times\n * @param sep separator\n * @returns {*}\n */\nfunction strRepeat(str, n, sep) {\n  if(!n) {\n    return str;\n  }\n  return str + sep + strRepeat(str, --n, sep);\n}\n/**\n* @ngdoc filter\n* @name rtrim\n* @kind function\n*\n* @description\n* Right trim. Similar to trimFilter, but only for right side.\n*/\nangular.module('a8m.rtrim', [])\n  .filter('rtrim', function () {\n    return function(input, chars) {\n\n      var trim = chars || '\\\\s';\n\n      return isString(input)\n        ? input.replace(new RegExp(trim + '+$'), '')\n        : input;\n    }\n  });\n\n/**\n * @ngdoc filter\n * @name slugify\n * @kind function\n *\n * @description\n * remove spaces from string, replace with \"-\" or given argument\n */\nangular.module('a8m.slugify', [])\n  .filter('slugify',[ function () {\n    return function (input, sub) {\n\n      var replace = (isUndefined(sub)) ? '-' : sub;\n\n      return isString(input)\n        ? input.toLowerCase().replace(/\\s+/g, replace)\n        : input;\n    }\n  }]);\n\n/**\n * @ngdoc filter\n * @name startWith\n * @kind function\n *\n * @description\n * checks whether string starts with the starts parameter.\n */\nangular.module('a8m.starts-with', [])\n  .filter('startsWith', function () {\n    return function (input, start, csensitive) {\n\n      var sensitive = csensitive || false;\n\n      if(!isString(input) || isUndefined(start)) {\n        return input;\n      }\n\n      input = (sensitive) ? input : input.toLowerCase();\n\n      return !input.indexOf((sensitive) ? start : start.toLowerCase());\n    }\n  });\n\n/**\n * @ngdoc filter\n * @name stringular\n * @kind function\n *\n * @description\n * get string with {n} and replace match with enumeration values\n */\nangular.module('a8m.stringular', [])\n  .filter('stringular', function () {\n    return function(input) {\n\n      var args = Array.prototype.slice.call(arguments, 1);\n\n      return input.replace(/{(\\d+)}/g, function (match, number) {\n        return isUndefined(args[number]) ? match : args[number];\n      });\n    }\n  });\n\n/**\n * @ngdoc filter\n * @name stripTags\n * @kind function\n *\n * @description\n * strip html tags from string\n */\nangular.module('a8m.strip-tags', [])\n  .filter('stripTags', function () {\n    return function(input) {\n      return isString(input)\n        ? input.replace(/<\\S[^><]*>/g, '')\n        : input;\n    }\n  });\n\n/**\r\n * @ngdoc filter\r\n * @name test\r\n * @kind function\r\n *\r\n * @description\r\n * test if a string match a pattern.\r\n */\r\nangular.module('a8m.test', [])\r\n  .filter('test', function () {\r\n    return function (input, pattern, flag) {\r\n\r\n      var reg = new RegExp(pattern, flag);\r\n\r\n      return isString(input)\r\n        ? reg.test(input)\r\n        : input;\r\n    }\r\n  });\r\n\n/**\n * @ngdoc filter\n * @name trim\n * @kind function\n *\n * @description\n *  Strip whitespace (or other characters) from the beginning and end of a string\n */\nangular.module('a8m.trim', [])\n  .filter('trim', function () {\n    return function(input, chars) {\n\n      var trim = chars || '\\\\s';\n\n      return isString(input)\n        ? input.replace(new RegExp('^' + trim + '+|' + trim + '+$', 'g'), '')\n        : input;\n    }\n  });\n\n/**\n * @ngdoc filter\n * @name truncate\n * @kind function\n *\n * @description\n * truncates a string given a specified length, providing a custom string to denote an omission.\n */\nangular.module('a8m.truncate', [])\n  .filter('truncate', function () {\n    return function(input, length, suffix, preserve) {\n\n      length = isUndefined(length) ? input.length : length;\n      preserve = preserve || false;\n      suffix = suffix || '';\n\n      if(!isString(input) || (input.length <= length)) return input;\n\n      return input.substring(0, (preserve)\n        ? ((input.indexOf(' ', length) === -1) ? input.length : input.indexOf(' ', length))\n        : length) + suffix;\n    };\n  });\n\n/**\n * @ngdoc filter\n * @name ucfirst\n * @kind function\n *\n * @description\n * ucfirst\n */\nangular.module('a8m.ucfirst', [])\n  .filter('ucfirst', [function() {\n    return function(input) {\n      return isString(input)\n        ? input\n            .split(' ')\n            .map(function (ch) {\n              return ch.charAt(0).toUpperCase() + ch.substring(1);\n            })\n            .join(' ')\n        : input;\n    }\n  }]);\n\n/**\n * @ngdoc filter\n * @name uriComponentEncode\n * @kind function\n *\n * @description\n * get string as parameter and return encoded string\n */\nangular.module('a8m.uri-component-encode', [])\n  .filter('uriComponentEncode',['$window', function ($window) {\n      return function (input) {\n        return isString(input)\n          ? $window.encodeURIComponent(input)\n          : input;\n      }\n    }]);\n\n/**\n * @ngdoc filter\n * @name uriEncode\n * @kind function\n *\n * @description\n * get string as parameter and return encoded string\n */\nangular.module('a8m.uri-encode', [])\n  .filter('uriEncode',['$window', function ($window) {\n      return function (input) {\n        return isString(input)\n          ? $window.encodeURI(input)\n          : input;\n      }\n    }]);\n\n/**\n * @ngdoc filter\n * @name wrap\n * @kind function\n *\n * @description\n * Wrap a string with another string\n */\nangular.module('a8m.wrap', [])\n  .filter('wrap', function () {\n    return function(input, wrap, ends) {\n      return isString(input) && isDefined(wrap)\n        ? [wrap, input, ends || wrap].join('')\n        : input;\n    }\n  });\n\n/**\n * @ngdoc provider\n * @name filterWatcher\n * @kind function\n *\n * @description\n * store specific filters result in $$cache, based on scope life time(avoid memory leak).\n * on scope.$destroy remove it's cache from $$cache container\n */\n\nangular.module('a8m.filter-watcher', [])\n  .provider('filterWatcher', function() {\n\n    this.$get = ['$window', '$rootScope', function($window, $rootScope) {\n\n      /**\n       * Cache storing\n       * @type {Object}\n       */\n      var $$cache = {};\n\n      /**\n       * Scope listeners container\n       * scope.$destroy => remove all cache keys\n       * bind to current scope.\n       * @type {Object}\n       */\n      var $$listeners = {};\n\n      /**\n       * $timeout without triggering the digest cycle\n       * @type {function}\n       */\n      var $$timeout = $window.setTimeout;\n\n      /**\n       * @description\n       * get `HashKey` string based on the given arguments.\n       * @param fName\n       * @param args\n       * @returns {string}\n       */\n      function getHashKey(fName, args) {\n        function replacerFactory() {\n          var cache = [];\n          return function(key, val) {\n            if(isObject(val) && !isNull(val)) {\n              if (~cache.indexOf(val)) return '[Circular]';\n              cache.push(val)\n            }\n            if($window == val) return '$WINDOW';\n            if($window.document == val) return '$DOCUMENT';\n            if(isScope(val)) return '$SCOPE';\n            return val;\n          }\n        }\n        return [fName, JSON.stringify(args, replacerFactory())]\n          .join('#')\n          .replace(/\"/g,'');\n      }\n\n      /**\n       * @description\n       * fir on $scope.$destroy,\n       * remove cache based scope from `$$cache`,\n       * and remove itself from `$$listeners`\n       * @param event\n       */\n      function removeCache(event) {\n        var id = event.targetScope.$id;\n        forEach($$listeners[id], function(key) {\n          delete $$cache[key];\n        });\n        delete $$listeners[id];\n      }\n\n      /**\n       * @description\n       * for angular version that greater than v.1.3.0\n       * it clear cache when the digest cycle is end.\n       */\n      function cleanStateless() {\n        $$timeout(function() {\n          if(!$rootScope.$$phase)\n            $$cache = {};\n        }, 2000);\n      }\n\n      /**\n       * @description\n       * Store hashKeys in $$listeners container\n       * on scope.$destroy, remove them all(bind an event).\n       * @param scope\n       * @param hashKey\n       * @returns {*}\n       */\n      function addListener(scope, hashKey) {\n        var id = scope.$id;\n        if(isUndefined($$listeners[id])) {\n          scope.$on('$destroy', removeCache);\n          $$listeners[id] = [];\n        }\n        return $$listeners[id].push(hashKey);\n      }\n\n      /**\n       * @description\n       * return the `cacheKey` or undefined.\n       * @param filterName\n       * @param args\n       * @returns {*}\n       */\n      function $$isMemoized(filterName, args) {\n        var hashKey = getHashKey(filterName, args);\n        return $$cache[hashKey];\n      }\n\n      /**\n       * @description\n       * store `result` in `$$cache` container, based on the hashKey.\n       * add $destroy listener and return result\n       * @param filterName\n       * @param args\n       * @param scope\n       * @param result\n       * @returns {*}\n       */\n      function $$memoize(filterName, args, scope, result) {\n        var hashKey = getHashKey(filterName, args);\n        //store result in `$$cache` container\n        $$cache[hashKey] = result;\n        // for angular versions that less than 1.3\n        // add to `$destroy` listener, a cleaner callback\n        if(isScope(scope)) {\n          addListener(scope, hashKey);\n        } else {\n          cleanStateless();\n        }\n        return result;\n      }\n\n      return {\n        isMemoized: $$isMemoized,\n        memoize: $$memoize\n      }\n    }];\n  });\n  \n\n/**\n * @ngdoc module\n * @name angular.filters\n * @description\n * Bunch of useful filters for angularJS\n */\n\nangular.module('angular.filter', [\n\n  'a8m.ucfirst',\n  'a8m.uri-encode',\n  'a8m.uri-component-encode',\n  'a8m.slugify',\n  'a8m.latinize',\n  'a8m.strip-tags',\n  'a8m.stringular',\n  'a8m.truncate',\n  'a8m.starts-with',\n  'a8m.ends-with',\n  'a8m.wrap',\n  'a8m.trim',\n  'a8m.ltrim',\n  'a8m.rtrim',\n  'a8m.repeat',\n  'a8m.test',\n  'a8m.match',\n\n  'a8m.to-array',\n  'a8m.concat',\n  'a8m.contains',\n  'a8m.unique',\n  'a8m.is-empty',\n  'a8m.after',\n  'a8m.after-where',\n  'a8m.before',\n  'a8m.before-where',\n  'a8m.defaults',\n  'a8m.where',\n  'a8m.reverse',\n  'a8m.remove',\n  'a8m.remove-with',\n  'a8m.group-by',\n  'a8m.count-by',\n  'a8m.chunk-by',\n  'a8m.search-field',\n  'a8m.fuzzy-by',\n  'a8m.fuzzy',\n  'a8m.omit',\n  'a8m.pick',\n  'a8m.every',\n  'a8m.filter-by',\n  'a8m.xor',\n  'a8m.map',\n  'a8m.first',\n  'a8m.last',\n  'a8m.flatten',\n  'a8m.join',\n  'a8m.range',\n\n  'a8m.math.max',\n  'a8m.math.min',\n  'a8m.math.abs',\n  'a8m.math.percent',\n  'a8m.math.radix',\n  'a8m.math.sum',\n  'a8m.math.degrees',\n  'a8m.math.radians',\n  'a8m.math.byteFmt',\n  'a8m.math.kbFmt',\n  'a8m.math.shortFmt',\n\n  'a8m.angular',\n  'a8m.conditions',\n  'a8m.is-null',\n\n  'a8m.filter-watcher'\n]);\n})( window, window.angular );","(function(window) {\n   var createModule = function(angular) {\n      var module = angular.module('FBAngular', []);\n\n      module.factory('Fullscreen', ['$document', '$rootScope', function ($document,$rootScope) {\n         var document = $document[0];\n\n         // ensure ALLOW_KEYBOARD_INPUT is available and enabled\n         var isKeyboardAvailbleOnFullScreen = (typeof Element !== 'undefined' && 'ALLOW_KEYBOARD_INPUT' in Element) && Element.ALLOW_KEYBOARD_INPUT;\n\n         var emitter = $rootScope.$new();\n\n         // listen event on document instead of element to avoid firefox limitation\n         // see https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Using_full_screen_mode\n         $document.on('fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange', function(){\n            emitter.$emit('FBFullscreen.change', serviceInstance.isEnabled());\n         });\n\n         var serviceInstance = {\n            $on: angular.bind(emitter, emitter.$on),\n            all: function() {\n               serviceInstance.enable( document.documentElement );\n            },\n            enable: function(element) {\n               if(element.requestFullScreen) {\n                  element.requestFullScreen();\n               } else if(element.mozRequestFullScreen) {\n                  element.mozRequestFullScreen();\n               } else if(element.webkitRequestFullscreen) {\n                  // Safari temporary fix\n                  if (/Version\\/[\\d]{1,2}(\\.[\\d]{1,2}){1}(\\.(\\d){1,2}){0,1} Safari/.test(navigator.userAgent)) {\n                     element.webkitRequestFullscreen();\n                  } else {\n                     element.webkitRequestFullscreen(isKeyboardAvailbleOnFullScreen);\n                  }\n               } else if (element.msRequestFullscreen) {\n                  element.msRequestFullscreen();\n               }\n            },\n            cancel: function() {\n               if(document.cancelFullScreen) {\n                  document.cancelFullScreen();\n               } else if(document.mozCancelFullScreen) {\n                  document.mozCancelFullScreen();\n               } else if(document.webkitExitFullscreen) {\n                  document.webkitExitFullscreen();\n               } else if (document.msExitFullscreen) {\n                  document.msExitFullscreen();\n               }\n            },\n            isEnabled: function(){\n               var fullscreenElement = document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement;\n               return fullscreenElement ? true : false;\n            },\n            toggleAll: function(){\n                serviceInstance.isEnabled() ? serviceInstance.cancel() : serviceInstance.all();\n            },\n            isSupported: function(){\n                var docElm = document.documentElement;\n                var requestFullscreen = docElm.requestFullScreen || docElm.mozRequestFullScreen || docElm.webkitRequestFullscreen || docElm.msRequestFullscreen;\n                return requestFullscreen ? true : false;\n            }\n         };\n\n         return serviceInstance;\n      }]);\n\n      module.directive('fullscreen', ['Fullscreen', function(Fullscreen) {\n         return {\n            link : function ($scope, $element, $attrs) {\n               // Watch for changes on scope if model is provided\n               if ($attrs.fullscreen) {\n                  $scope.$watch($attrs.fullscreen, function(value) {\n                     var isEnabled = Fullscreen.isEnabled();\n                     if (value && !isEnabled) {\n                        Fullscreen.enable($element[0]);\n                        $element.addClass('isInFullScreen');\n                     } else if (!value && isEnabled) {\n                        Fullscreen.cancel();\n                        $element.removeClass('isInFullScreen');\n                     }\n                  });\n\n                  // Listen on the `FBFullscreen.change`\n                  // the event will fire when anything changes the fullscreen mode\n                  var removeFullscreenHandler = Fullscreen.$on('FBFullscreen.change', function(evt, isFullscreenEnabled){\n                     if(!isFullscreenEnabled){\n                        $scope.$evalAsync(function(){\n                           $scope.$eval($attrs.fullscreen + '= false');\n                           $element.removeClass('isInFullScreen');\n                        });\n                     }\n                  });\n\n                  $scope.$on('$destroy', function() {\n                     removeFullscreenHandler();\n                  });\n\n               } else {\n                  if ($attrs.onlyWatchedProperty !== undefined) {\n                     return;\n                  }\n\n                  $element.on('click', function (ev) {\n                     Fullscreen.enable(  $element[0] );\n                  });\n               }\n            }\n         };\n      }]);\n      return module;\n   };\n\n   if (typeof define === \"function\" && define.amd) {\n      define(\"FBAngular\", ['angular'], function (angular) { return createModule(angular); } );\n   } else {\n      createModule(window.angular);\n   }\n})(window);\n","/**\n * @license AngularJS v1.6.6\n * (c) 2010-2017 Google, Inc. http://angularjs.org\n * License: MIT\n */\n(function(window, angular) {'use strict';\n\nvar forEach;\nvar isArray;\nvar isString;\nvar jqLite;\n\n/**\n * @ngdoc module\n * @name ngMessages\n * @description\n *\n * The `ngMessages` module provides enhanced support for displaying messages within templates\n * (typically within forms or when rendering message objects that return key/value data).\n * Instead of relying on JavaScript code and/or complex ng-if statements within your form template to\n * show and hide error messages specific to the state of an input field, the `ngMessages` and\n * `ngMessage` directives are designed to handle the complexity, inheritance and priority\n * sequencing based on the order of how the messages are defined in the template.\n *\n * Currently, the ngMessages module only contains the code for the `ngMessages`, `ngMessagesInclude`\n * `ngMessage` and `ngMessageExp` directives.\n *\n * # Usage\n * The `ngMessages` directive allows keys in a key/value collection to be associated with a child element\n * (or 'message') that will show or hide based on the truthiness of that key's value in the collection. A common use\n * case for `ngMessages` is to display error messages for inputs using the `$error` object exposed by the\n * {@link ngModel ngModel} directive.\n *\n * The child elements of the `ngMessages` directive are matched to the collection keys by a `ngMessage` or\n * `ngMessageExp` directive. The value of these attributes must match a key in the collection that is provided by\n * the `ngMessages` directive.\n *\n * Consider the following example, which illustrates a typical use case of `ngMessages`. Within the form `myForm` we\n * have a text input named `myField` which is bound to the scope variable `field` using the {@link ngModel ngModel}\n * directive.\n *\n * The `myField` field is a required input of type `email` with a maximum length of 15 characters.\n *\n * ```html\n * <form name=\"myForm\">\n *   <label>\n *     Enter text:\n *     <input type=\"email\" ng-model=\"field\" name=\"myField\" required maxlength=\"15\" />\n *   </label>\n *   <div ng-messages=\"myForm.myField.$error\" role=\"alert\">\n *     <div ng-message=\"required\">Please enter a value for this field.</div>\n *     <div ng-message=\"email\">This field must be a valid email address.</div>\n *     <div ng-message=\"maxlength\">This field can be at most 15 characters long.</div>\n *   </div>\n * </form>\n * ```\n *\n * In order to show error messages corresponding to `myField` we first create an element with an `ngMessages` attribute\n * set to the `$error` object owned by the `myField` input in our `myForm` form.\n *\n * Within this element we then create separate elements for each of the possible errors that `myField` could have.\n * The `ngMessage` attribute is used to declare which element(s) will appear for which error - for example,\n * setting `ng-message=\"required\"` specifies that this particular element should be displayed when there\n * is no value present for the required field `myField` (because the key `required` will be `true` in the object\n * `myForm.myField.$error`).\n *\n * ### Message order\n *\n * By default, `ngMessages` will only display one message for a particular key/value collection at any time. If more\n * than one message (or error) key is currently true, then which message is shown is determined by the order of messages\n * in the HTML template code (messages declared first are prioritised). This mechanism means the developer does not have\n * to prioritize messages using custom JavaScript code.\n *\n * Given the following error object for our example (which informs us that the field `myField` currently has both the\n * `required` and `email` errors):\n *\n * ```javascript\n * <!-- keep in mind that ngModel automatically sets these error flags -->\n * myField.$error = { required : true, email: true, maxlength: false };\n * ```\n * The `required` message will be displayed to the user since it appears before the `email` message in the DOM.\n * Once the user types a single character, the `required` message will disappear (since the field now has a value)\n * but the `email` message will be visible because it is still applicable.\n *\n * ### Displaying multiple messages at the same time\n *\n * While `ngMessages` will by default only display one error element at a time, the `ng-messages-multiple` attribute can\n * be applied to the `ngMessages` container element to cause it to display all applicable error messages at once:\n *\n * ```html\n * <!-- attribute-style usage -->\n * <div ng-messages=\"myForm.myField.$error\" ng-messages-multiple>...</div>\n *\n * <!-- element-style usage -->\n * <ng-messages for=\"myForm.myField.$error\" multiple>...</ng-messages>\n * ```\n *\n * ## Reusing and Overriding Messages\n * In addition to prioritization, ngMessages also allows for including messages from a remote or an inline\n * template. This allows for generic collection of messages to be reused across multiple parts of an\n * application.\n *\n * ```html\n * <script type=\"text/ng-template\" id=\"error-messages\">\n *   <div ng-message=\"required\">This field is required</div>\n *   <div ng-message=\"minlength\">This field is too short</div>\n * </script>\n *\n * <div ng-messages=\"myForm.myField.$error\" role=\"alert\">\n *   <div ng-messages-include=\"error-messages\"></div>\n * </div>\n * ```\n *\n * However, including generic messages may not be useful enough to match all input fields, therefore,\n * `ngMessages` provides the ability to override messages defined in the remote template by redefining\n * them within the directive container.\n *\n * ```html\n * <!-- a generic template of error messages known as \"my-custom-messages\" -->\n * <script type=\"text/ng-template\" id=\"my-custom-messages\">\n *   <div ng-message=\"required\">This field is required</div>\n *   <div ng-message=\"minlength\">This field is too short</div>\n * </script>\n *\n * <form name=\"myForm\">\n *   <label>\n *     Email address\n *     <input type=\"email\"\n *            id=\"email\"\n *            name=\"myEmail\"\n *            ng-model=\"email\"\n *            minlength=\"5\"\n *            required />\n *   </label>\n *   <!-- any ng-message elements that appear BEFORE the ng-messages-include will\n *        override the messages present in the ng-messages-include template -->\n *   <div ng-messages=\"myForm.myEmail.$error\" role=\"alert\">\n *     <!-- this required message has overridden the template message -->\n *     <div ng-message=\"required\">You did not enter your email address</div>\n *\n *     <!-- this is a brand new message and will appear last in the prioritization -->\n *     <div ng-message=\"email\">Your email address is invalid</div>\n *\n *     <!-- and here are the generic error messages -->\n *     <div ng-messages-include=\"my-custom-messages\"></div>\n *   </div>\n * </form>\n * ```\n *\n * In the example HTML code above the message that is set on required will override the corresponding\n * required message defined within the remote template. Therefore, with particular input fields (such\n * email addresses, date fields, autocomplete inputs, etc...), specialized error messages can be applied\n * while more generic messages can be used to handle other, more general input errors.\n *\n * ## Dynamic Messaging\n * ngMessages also supports using expressions to dynamically change key values. Using arrays and\n * repeaters to list messages is also supported. This means that the code below will be able to\n * fully adapt itself and display the appropriate message when any of the expression data changes:\n *\n * ```html\n * <form name=\"myForm\">\n *   <label>\n *     Email address\n *     <input type=\"email\"\n *            name=\"myEmail\"\n *            ng-model=\"email\"\n *            minlength=\"5\"\n *            required />\n *   </label>\n *   <div ng-messages=\"myForm.myEmail.$error\" role=\"alert\">\n *     <div ng-message=\"required\">You did not enter your email address</div>\n *     <div ng-repeat=\"errorMessage in errorMessages\">\n *       <!-- use ng-message-exp for a message whose key is given by an expression -->\n *       <div ng-message-exp=\"errorMessage.type\">{{ errorMessage.text }}</div>\n *     </div>\n *   </div>\n * </form>\n * ```\n *\n * The `errorMessage.type` expression can be a string value or it can be an array so\n * that multiple errors can be associated with a single error message:\n *\n * ```html\n *   <label>\n *     Email address\n *     <input type=\"email\"\n *            ng-model=\"data.email\"\n *            name=\"myEmail\"\n *            ng-minlength=\"5\"\n *            ng-maxlength=\"100\"\n *            required />\n *   </label>\n *   <div ng-messages=\"myForm.myEmail.$error\" role=\"alert\">\n *     <div ng-message-exp=\"'required'\">You did not enter your email address</div>\n *     <div ng-message-exp=\"['minlength', 'maxlength']\">\n *       Your email must be between 5 and 100 characters long\n *     </div>\n *   </div>\n * ```\n *\n * Feel free to use other structural directives such as ng-if and ng-switch to further control\n * what messages are active and when. Be careful, if you place ng-message on the same element\n * as these structural directives, Angular may not be able to determine if a message is active\n * or not. Therefore it is best to place the ng-message on a child element of the structural\n * directive.\n *\n * ```html\n * <div ng-messages=\"myForm.myEmail.$error\" role=\"alert\">\n *   <div ng-if=\"showRequiredError\">\n *     <div ng-message=\"required\">Please enter something</div>\n *   </div>\n * </div>\n * ```\n *\n * ## Animations\n * If the `ngAnimate` module is active within the application then the `ngMessages`, `ngMessage` and\n * `ngMessageExp` directives will trigger animations whenever any messages are added and removed from\n * the DOM by the `ngMessages` directive.\n *\n * Whenever the `ngMessages` directive contains one or more visible messages then the `.ng-active` CSS\n * class will be added to the element. The `.ng-inactive` CSS class will be applied when there are no\n * messages present. Therefore, CSS transitions and keyframes as well as JavaScript animations can\n * hook into the animations whenever these classes are added/removed.\n *\n * Let's say that our HTML code for our messages container looks like so:\n *\n * ```html\n * <div ng-messages=\"myMessages\" class=\"my-messages\" role=\"alert\">\n *   <div ng-message=\"alert\" class=\"some-message\">...</div>\n *   <div ng-message=\"fail\" class=\"some-message\">...</div>\n * </div>\n * ```\n *\n * Then the CSS animation code for the message container looks like so:\n *\n * ```css\n * .my-messages {\n *   transition:1s linear all;\n * }\n * .my-messages.ng-active {\n *   // messages are visible\n * }\n * .my-messages.ng-inactive {\n *   // messages are hidden\n * }\n * ```\n *\n * Whenever an inner message is attached (becomes visible) or removed (becomes hidden) then the enter\n * and leave animation is triggered for each particular element bound to the `ngMessage` directive.\n *\n * Therefore, the CSS code for the inner messages looks like so:\n *\n * ```css\n * .some-message {\n *   transition:1s linear all;\n * }\n *\n * .some-message.ng-enter {}\n * .some-message.ng-enter.ng-enter-active {}\n *\n * .some-message.ng-leave {}\n * .some-message.ng-leave.ng-leave-active {}\n * ```\n *\n * {@link ngAnimate Click here} to learn how to use JavaScript animations or to learn more about ngAnimate.\n */\nangular.module('ngMessages', [], function initAngularHelpers() {\n  // Access helpers from angular core.\n  // Do it inside a `config` block to ensure `window.angular` is available.\n  forEach = angular.forEach;\n  isArray = angular.isArray;\n  isString = angular.isString;\n  jqLite = angular.element;\n})\n  .info({ angularVersion: '1.6.6' })\n\n  /**\n   * @ngdoc directive\n   * @module ngMessages\n   * @name ngMessages\n   * @restrict AE\n   *\n   * @description\n   * `ngMessages` is a directive that is designed to show and hide messages based on the state\n   * of a key/value object that it listens on. The directive itself complements error message\n   * reporting with the `ngModel` $error object (which stores a key/value state of validation errors).\n   *\n   * `ngMessages` manages the state of internal messages within its container element. The internal\n   * messages use the `ngMessage` directive and will be inserted/removed from the page depending\n   * on if they're present within the key/value object. By default, only one message will be displayed\n   * at a time and this depends on the prioritization of the messages within the template. (This can\n   * be changed by using the `ng-messages-multiple` or `multiple` attribute on the directive container.)\n   *\n   * A remote template can also be used to promote message reusability and messages can also be\n   * overridden.\n   *\n   * {@link module:ngMessages Click here} to learn more about `ngMessages` and `ngMessage`.\n   *\n   * @usage\n   * ```html\n   * <!-- using attribute directives -->\n   * <ANY ng-messages=\"expression\" role=\"alert\">\n   *   <ANY ng-message=\"stringValue\">...</ANY>\n   *   <ANY ng-message=\"stringValue1, stringValue2, ...\">...</ANY>\n   *   <ANY ng-message-exp=\"expressionValue\">...</ANY>\n   * </ANY>\n   *\n   * <!-- or by using element directives -->\n   * <ng-messages for=\"expression\" role=\"alert\">\n   *   <ng-message when=\"stringValue\">...</ng-message>\n   *   <ng-message when=\"stringValue1, stringValue2, ...\">...</ng-message>\n   *   <ng-message when-exp=\"expressionValue\">...</ng-message>\n   * </ng-messages>\n   * ```\n   *\n   * @param {string} ngMessages an angular expression evaluating to a key/value object\n   *                 (this is typically the $error object on an ngModel instance).\n   * @param {string=} ngMessagesMultiple|multiple when set, all messages will be displayed with true\n   *\n   * @example\n   * <example name=\"ngMessages-directive\" module=\"ngMessagesExample\"\n   *          deps=\"angular-messages.js\"\n   *          animations=\"true\" fixBase=\"true\">\n   *   <file name=\"index.html\">\n   *     <form name=\"myForm\">\n   *       <label>\n   *         Enter your name:\n   *         <input type=\"text\"\n   *                name=\"myName\"\n   *                ng-model=\"name\"\n   *                ng-minlength=\"5\"\n   *                ng-maxlength=\"20\"\n   *                required />\n   *       </label>\n   *       <pre>myForm.myName.$error = {{ myForm.myName.$error | json }}</pre>\n   *\n   *       <div ng-messages=\"myForm.myName.$error\" style=\"color:maroon\" role=\"alert\">\n   *         <div ng-message=\"required\">You did not enter a field</div>\n   *         <div ng-message=\"minlength\">Your field is too short</div>\n   *         <div ng-message=\"maxlength\">Your field is too long</div>\n   *       </div>\n   *     </form>\n   *   </file>\n   *   <file name=\"script.js\">\n   *     angular.module('ngMessagesExample', ['ngMessages']);\n   *   </file>\n   * </example>\n   */\n  .directive('ngMessages', ['$animate', function($animate) {\n    var ACTIVE_CLASS = 'ng-active';\n    var INACTIVE_CLASS = 'ng-inactive';\n\n    return {\n      require: 'ngMessages',\n      restrict: 'AE',\n      controller: ['$element', '$scope', '$attrs', function NgMessagesCtrl($element, $scope, $attrs) {\n        var ctrl = this;\n        var latestKey = 0;\n        var nextAttachId = 0;\n\n        this.getAttachId = function getAttachId() { return nextAttachId++; };\n\n        var messages = this.messages = {};\n        var renderLater, cachedCollection;\n\n        this.render = function(collection) {\n          collection = collection || {};\n\n          renderLater = false;\n          cachedCollection = collection;\n\n          // this is true if the attribute is empty or if the attribute value is truthy\n          var multiple = isAttrTruthy($scope, $attrs.ngMessagesMultiple) ||\n                         isAttrTruthy($scope, $attrs.multiple);\n\n          var unmatchedMessages = [];\n          var matchedKeys = {};\n          var messageItem = ctrl.head;\n          var messageFound = false;\n          var totalMessages = 0;\n\n          // we use != instead of !== to allow for both undefined and null values\n          while (messageItem != null) {\n            totalMessages++;\n            var messageCtrl = messageItem.message;\n\n            var messageUsed = false;\n            if (!messageFound) {\n              forEach(collection, function(value, key) {\n                if (!messageUsed && truthy(value) && messageCtrl.test(key)) {\n                  // this is to prevent the same error name from showing up twice\n                  if (matchedKeys[key]) return;\n                  matchedKeys[key] = true;\n\n                  messageUsed = true;\n                  messageCtrl.attach();\n                }\n              });\n            }\n\n            if (messageUsed) {\n              // unless we want to display multiple messages then we should\n              // set a flag here to avoid displaying the next message in the list\n              messageFound = !multiple;\n            } else {\n              unmatchedMessages.push(messageCtrl);\n            }\n\n            messageItem = messageItem.next;\n          }\n\n          forEach(unmatchedMessages, function(messageCtrl) {\n            messageCtrl.detach();\n          });\n\n          if (unmatchedMessages.length !== totalMessages) {\n            $animate.setClass($element, ACTIVE_CLASS, INACTIVE_CLASS);\n          } else {\n            $animate.setClass($element, INACTIVE_CLASS, ACTIVE_CLASS);\n          }\n        };\n\n        $scope.$watchCollection($attrs.ngMessages || $attrs['for'], ctrl.render);\n\n        // If the element is destroyed, proactively destroy all the currently visible messages\n        $element.on('$destroy', function() {\n          forEach(messages, function(item) {\n            item.message.detach();\n          });\n        });\n\n        this.reRender = function() {\n          if (!renderLater) {\n            renderLater = true;\n            $scope.$evalAsync(function() {\n              if (renderLater && cachedCollection) {\n                ctrl.render(cachedCollection);\n              }\n            });\n          }\n        };\n\n        this.register = function(comment, messageCtrl) {\n          var nextKey = latestKey.toString();\n          messages[nextKey] = {\n            message: messageCtrl\n          };\n          insertMessageNode($element[0], comment, nextKey);\n          comment.$$ngMessageNode = nextKey;\n          latestKey++;\n\n          ctrl.reRender();\n        };\n\n        this.deregister = function(comment) {\n          var key = comment.$$ngMessageNode;\n          delete comment.$$ngMessageNode;\n          removeMessageNode($element[0], comment, key);\n          delete messages[key];\n          ctrl.reRender();\n        };\n\n        function findPreviousMessage(parent, comment) {\n          var prevNode = comment;\n          var parentLookup = [];\n\n          while (prevNode && prevNode !== parent) {\n            var prevKey = prevNode.$$ngMessageNode;\n            if (prevKey && prevKey.length) {\n              return messages[prevKey];\n            }\n\n            // dive deeper into the DOM and examine its children for any ngMessage\n            // comments that may be in an element that appears deeper in the list\n            if (prevNode.childNodes.length && parentLookup.indexOf(prevNode) === -1) {\n              parentLookup.push(prevNode);\n              prevNode = prevNode.childNodes[prevNode.childNodes.length - 1];\n            } else if (prevNode.previousSibling) {\n              prevNode = prevNode.previousSibling;\n            } else {\n              prevNode = prevNode.parentNode;\n              parentLookup.push(prevNode);\n            }\n          }\n        }\n\n        function insertMessageNode(parent, comment, key) {\n          var messageNode = messages[key];\n          if (!ctrl.head) {\n            ctrl.head = messageNode;\n          } else {\n            var match = findPreviousMessage(parent, comment);\n            if (match) {\n              messageNode.next = match.next;\n              match.next = messageNode;\n            } else {\n              messageNode.next = ctrl.head;\n              ctrl.head = messageNode;\n            }\n          }\n        }\n\n        function removeMessageNode(parent, comment, key) {\n          var messageNode = messages[key];\n\n          var match = findPreviousMessage(parent, comment);\n          if (match) {\n            match.next = messageNode.next;\n          } else {\n            ctrl.head = messageNode.next;\n          }\n        }\n      }]\n    };\n\n    function isAttrTruthy(scope, attr) {\n     return (isString(attr) && attr.length === 0) || //empty attribute\n            truthy(scope.$eval(attr));\n    }\n\n    function truthy(val) {\n      return isString(val) ? val.length : !!val;\n    }\n  }])\n\n  /**\n   * @ngdoc directive\n   * @name ngMessagesInclude\n   * @restrict AE\n   * @scope\n   *\n   * @description\n   * `ngMessagesInclude` is a directive with the purpose to import existing ngMessage template\n   * code from a remote template and place the downloaded template code into the exact spot\n   * that the ngMessagesInclude directive is placed within the ngMessages container. This allows\n   * for a series of pre-defined messages to be reused and also allows for the developer to\n   * determine what messages are overridden due to the placement of the ngMessagesInclude directive.\n   *\n   * @usage\n   * ```html\n   * <!-- using attribute directives -->\n   * <ANY ng-messages=\"expression\" role=\"alert\">\n   *   <ANY ng-messages-include=\"remoteTplString\">...</ANY>\n   * </ANY>\n   *\n   * <!-- or by using element directives -->\n   * <ng-messages for=\"expression\" role=\"alert\">\n   *   <ng-messages-include src=\"expressionValue1\">...</ng-messages-include>\n   * </ng-messages>\n   * ```\n   *\n   * {@link module:ngMessages Click here} to learn more about `ngMessages` and `ngMessage`.\n   *\n   * @param {string} ngMessagesInclude|src a string value corresponding to the remote template.\n   */\n  .directive('ngMessagesInclude',\n    ['$templateRequest', '$document', '$compile', function($templateRequest, $document, $compile) {\n\n    return {\n      restrict: 'AE',\n      require: '^^ngMessages', // we only require this for validation sake\n      link: function($scope, element, attrs) {\n        var src = attrs.ngMessagesInclude || attrs.src;\n        $templateRequest(src).then(function(html) {\n          if ($scope.$$destroyed) return;\n\n          if (isString(html) && !html.trim()) {\n            // Empty template - nothing to compile\n            replaceElementWithMarker(element, src);\n          } else {\n            // Non-empty template - compile and link\n            $compile(html)($scope, function(contents) {\n              element.after(contents);\n              replaceElementWithMarker(element, src);\n            });\n          }\n        });\n      }\n    };\n\n    // Helpers\n    function replaceElementWithMarker(element, src) {\n      // A comment marker is placed for debugging purposes\n      var comment = $compile.$$createComment ?\n          $compile.$$createComment('ngMessagesInclude', src) :\n          $document[0].createComment(' ngMessagesInclude: ' + src + ' ');\n      var marker = jqLite(comment);\n      element.after(marker);\n\n      // Don't pollute the DOM anymore by keeping an empty directive element\n      element.remove();\n    }\n  }])\n\n  /**\n   * @ngdoc directive\n   * @name ngMessage\n   * @restrict AE\n   * @scope\n   *\n   * @description\n   * `ngMessage` is a directive with the purpose to show and hide a particular message.\n   * For `ngMessage` to operate, a parent `ngMessages` directive on a parent DOM element\n   * must be situated since it determines which messages are visible based on the state\n   * of the provided key/value map that `ngMessages` listens on.\n   *\n   * More information about using `ngMessage` can be found in the\n   * {@link module:ngMessages `ngMessages` module documentation}.\n   *\n   * @usage\n   * ```html\n   * <!-- using attribute directives -->\n   * <ANY ng-messages=\"expression\" role=\"alert\">\n   *   <ANY ng-message=\"stringValue\">...</ANY>\n   *   <ANY ng-message=\"stringValue1, stringValue2, ...\">...</ANY>\n   * </ANY>\n   *\n   * <!-- or by using element directives -->\n   * <ng-messages for=\"expression\" role=\"alert\">\n   *   <ng-message when=\"stringValue\">...</ng-message>\n   *   <ng-message when=\"stringValue1, stringValue2, ...\">...</ng-message>\n   * </ng-messages>\n   * ```\n   *\n   * @param {expression} ngMessage|when a string value corresponding to the message key.\n   */\n  .directive('ngMessage', ngMessageDirectiveFactory())\n\n\n  /**\n   * @ngdoc directive\n   * @name ngMessageExp\n   * @restrict AE\n   * @priority 1\n   * @scope\n   *\n   * @description\n   * `ngMessageExp` is the same as {@link directive:ngMessage `ngMessage`}, but instead of a static\n   * value, it accepts an expression to be evaluated for the message key.\n   *\n   * @usage\n   * ```html\n   * <!-- using attribute directives -->\n   * <ANY ng-messages=\"expression\">\n   *   <ANY ng-message-exp=\"expressionValue\">...</ANY>\n   * </ANY>\n   *\n   * <!-- or by using element directives -->\n   * <ng-messages for=\"expression\">\n   *   <ng-message when-exp=\"expressionValue\">...</ng-message>\n   * </ng-messages>\n   * ```\n   *\n   * {@link module:ngMessages Click here} to learn more about `ngMessages` and `ngMessage`.\n   *\n   * @param {expression} ngMessageExp|whenExp an expression value corresponding to the message key.\n   */\n  .directive('ngMessageExp', ngMessageDirectiveFactory());\n\nfunction ngMessageDirectiveFactory() {\n  return ['$animate', function($animate) {\n    return {\n      restrict: 'AE',\n      transclude: 'element',\n      priority: 1, // must run before ngBind, otherwise the text is set on the comment\n      terminal: true,\n      require: '^^ngMessages',\n      link: function(scope, element, attrs, ngMessagesCtrl, $transclude) {\n        var commentNode = element[0];\n\n        var records;\n        var staticExp = attrs.ngMessage || attrs.when;\n        var dynamicExp = attrs.ngMessageExp || attrs.whenExp;\n        var assignRecords = function(items) {\n          records = items\n              ? (isArray(items)\n                  ? items\n                  : items.split(/[\\s,]+/))\n              : null;\n          ngMessagesCtrl.reRender();\n        };\n\n        if (dynamicExp) {\n          assignRecords(scope.$eval(dynamicExp));\n          scope.$watchCollection(dynamicExp, assignRecords);\n        } else {\n          assignRecords(staticExp);\n        }\n\n        var currentElement, messageCtrl;\n        ngMessagesCtrl.register(commentNode, messageCtrl = {\n          test: function(name) {\n            return contains(records, name);\n          },\n          attach: function() {\n            if (!currentElement) {\n              $transclude(function(elm, newScope) {\n                $animate.enter(elm, null, element);\n                currentElement = elm;\n\n                // Each time we attach this node to a message we get a new id that we can match\n                // when we are destroying the node later.\n                var $$attachId = currentElement.$$attachId = ngMessagesCtrl.getAttachId();\n\n                // in the event that the element or a parent element is destroyed\n                // by another structural directive then it's time\n                // to deregister the message from the controller\n                currentElement.on('$destroy', function() {\n                  if (currentElement && currentElement.$$attachId === $$attachId) {\n                    ngMessagesCtrl.deregister(commentNode);\n                    messageCtrl.detach();\n                  }\n                  newScope.$destroy();\n                });\n              });\n            }\n          },\n          detach: function() {\n            if (currentElement) {\n              var elm = currentElement;\n              currentElement = null;\n              $animate.leave(elm);\n            }\n          }\n        });\n      }\n    };\n  }];\n\n  function contains(collection, key) {\n    if (collection) {\n      return isArray(collection)\n          ? collection.indexOf(key) >= 0\n          : collection.hasOwnProperty(key);\n    }\n  }\n}\n\n\n})(window, window.angular);\n","/**\n * @license AngularJS v1.6.6\n * (c) 2010-2017 Google, Inc. http://angularjs.org\n * License: MIT\n */\n(function(window, angular) {'use strict';\n\nvar $resourceMinErr = angular.$$minErr('$resource');\n\n// Helper functions and regex to lookup a dotted path on an object\n// stopping at undefined/null.  The path must be composed of ASCII\n// identifiers (just like $parse)\nvar MEMBER_NAME_REGEX = /^(\\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;\n\nfunction isValidDottedPath(path) {\n  return (path != null && path !== '' && path !== 'hasOwnProperty' &&\n      MEMBER_NAME_REGEX.test('.' + path));\n}\n\nfunction lookupDottedPath(obj, path) {\n  if (!isValidDottedPath(path)) {\n    throw $resourceMinErr('badmember', 'Dotted member path \"@{0}\" is invalid.', path);\n  }\n  var keys = path.split('.');\n  for (var i = 0, ii = keys.length; i < ii && angular.isDefined(obj); i++) {\n    var key = keys[i];\n    obj = (obj !== null) ? obj[key] : undefined;\n  }\n  return obj;\n}\n\n/**\n * Create a shallow copy of an object and clear other fields from the destination\n */\nfunction shallowClearAndCopy(src, dst) {\n  dst = dst || {};\n\n  angular.forEach(dst, function(value, key) {\n    delete dst[key];\n  });\n\n  for (var key in src) {\n    if (src.hasOwnProperty(key) && !(key.charAt(0) === '$' && key.charAt(1) === '$')) {\n      dst[key] = src[key];\n    }\n  }\n\n  return dst;\n}\n\n/**\n * @ngdoc module\n * @name ngResource\n * @description\n *\n * # ngResource\n *\n * The `ngResource` module provides interaction support with RESTful services\n * via the $resource service.\n *\n *\n * <div doc-module-components=\"ngResource\"></div>\n *\n * See {@link ngResource.$resourceProvider} and {@link ngResource.$resource} for usage.\n */\n\n/**\n * @ngdoc provider\n * @name $resourceProvider\n *\n * @description\n *\n * Use `$resourceProvider` to change the default behavior of the {@link ngResource.$resource}\n * service.\n *\n * ## Dependencies\n * Requires the {@link ngResource } module to be installed.\n *\n */\n\n/**\n * @ngdoc service\n * @name $resource\n * @requires $http\n * @requires ng.$log\n * @requires $q\n * @requires ng.$timeout\n *\n * @description\n * A factory which creates a resource object that lets you interact with\n * [RESTful](http://en.wikipedia.org/wiki/Representational_State_Transfer) server-side data sources.\n *\n * The returned resource object has action methods which provide high-level behaviors without\n * the need to interact with the low level {@link ng.$http $http} service.\n *\n * Requires the {@link ngResource `ngResource`} module to be installed.\n *\n * By default, trailing slashes will be stripped from the calculated URLs,\n * which can pose problems with server backends that do not expect that\n * behavior.  This can be disabled by configuring the `$resourceProvider` like\n * this:\n *\n * ```js\n     app.config(['$resourceProvider', function($resourceProvider) {\n       // Don't strip trailing slashes from calculated URLs\n       $resourceProvider.defaults.stripTrailingSlashes = false;\n     }]);\n * ```\n *\n * @param {string} url A parameterized URL template with parameters prefixed by `:` as in\n *   `/user/:username`. If you are using a URL with a port number (e.g.\n *   `http://example.com:8080/api`), it will be respected.\n *\n *   If you are using a url with a suffix, just add the suffix, like this:\n *   `$resource('http://example.com/resource.json')` or `$resource('http://example.com/:id.json')`\n *   or even `$resource('http://example.com/resource/:resource_id.:format')`\n *   If the parameter before the suffix is empty, :resource_id in this case, then the `/.` will be\n *   collapsed down to a single `.`.  If you need this sequence to appear and not collapse then you\n *   can escape it with `/\\.`.\n *\n * @param {Object=} paramDefaults Default values for `url` parameters. These can be overridden in\n *   `actions` methods. If a parameter value is a function, it will be called every time\n *   a param value needs to be obtained for a request (unless the param was overridden). The function\n *   will be passed the current data value as an argument.\n *\n *   Each key value in the parameter object is first bound to url template if present and then any\n *   excess keys are appended to the url search query after the `?`.\n *\n *   Given a template `/path/:verb` and parameter `{verb:'greet', salutation:'Hello'}` results in\n *   URL `/path/greet?salutation=Hello`.\n *\n *   If the parameter value is prefixed with `@`, then the value for that parameter will be\n *   extracted from the corresponding property on the `data` object (provided when calling actions\n *   with a request body).\n *   For example, if the `defaultParam` object is `{someParam: '@someProp'}` then the value of\n *   `someParam` will be `data.someProp`.\n *   Note that the parameter will be ignored, when calling a \"GET\" action method (i.e. an action\n *   method that does not accept a request body)\n *\n * @param {Object.<Object>=} actions Hash with declaration of custom actions that will be available\n *   in addition to the default set of resource actions (see below). If a custom action has the same\n *   key as a default action (e.g. `save`), then the default action will be *overwritten*, and not\n *   extended.\n *\n *   The declaration should be created in the format of {@link ng.$http#usage $http.config}:\n *\n *       {action1: {method:?, params:?, isArray:?, headers:?, ...},\n *        action2: {method:?, params:?, isArray:?, headers:?, ...},\n *        ...}\n *\n *   Where:\n *\n *   - **`action`**  {string}  The name of action. This name becomes the name of the method on\n *     your resource object.\n *   - **`method`**  {string}  Case insensitive HTTP method (e.g. `GET`, `POST`, `PUT`,\n *     `DELETE`, `JSONP`, etc).\n *   - **`params`**  {Object=}  Optional set of pre-bound parameters for this action. If any of\n *     the parameter value is a function, it will be called every time when a param value needs to\n *     be obtained for a request (unless the param was overridden). The function will be passed the\n *     current data value as an argument.\n *   - **`url`**  {string}  action specific `url` override. The url templating is supported just\n *     like for the resource-level urls.\n *   - **`isArray`**  {boolean=}  If true then the returned object for this action is an array,\n *     see `returns` section.\n *   - **`transformRequest`** \n *     `{function(data, headersGetter)|Array.<function(data, headersGetter)>}` \n *     transform function or an array of such functions. The transform function takes the http\n *     request body and headers and returns its transformed (typically serialized) version.\n *     By default, transformRequest will contain one function that checks if the request data is\n *     an object and serializes it using `angular.toJson`. To prevent this behavior, set\n *     `transformRequest` to an empty array: `transformRequest: []`\n *   - **`transformResponse`** \n *     `{function(data, headersGetter, status)|Array.<function(data, headersGetter, status)>}` \n *     transform function or an array of such functions. The transform function takes the http\n *     response body, headers and status and returns its transformed (typically deserialized)\n *     version.\n *     By default, transformResponse will contain one function that checks if the response looks\n *     like a JSON string and deserializes it using `angular.fromJson`. To prevent this behavior,\n *     set `transformResponse` to an empty array: `transformResponse: []`\n *   - **`cache`**  `{boolean|Cache}`  If true, a default $http cache will be used to cache the\n *     GET request, otherwise if a cache instance built with\n *     {@link ng.$cacheFactory $cacheFactory} is supplied, this cache will be used for\n *     caching.\n *   - **`timeout`**  `{number}`  timeout in milliseconds.<br />\n *     **Note:** In contrast to {@link ng.$http#usage $http.config}, {@link ng.$q promises} are\n *     **not** supported in $resource, because the same value would be used for multiple requests.\n *     If you are looking for a way to cancel requests, you should use the `cancellable` option.\n *   - **`cancellable`**  `{boolean}`  if set to true, the request made by a \"non-instance\" call\n *     will be cancelled (if not already completed) by calling `$cancelRequest()` on the call's\n *     return value. Calling `$cancelRequest()` for a non-cancellable or an already\n *     completed/cancelled request will have no effect.<br />\n *   - **`withCredentials`** - `{boolean}` - whether to set the `withCredentials` flag on the\n *     XHR object. See\n *     [requests with credentials](https://developer.mozilla.org/en/http_access_control#section_5)\n *     for more information.\n *   - **`responseType`** - `{string}` - see\n *     [requestType](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#responseType).\n *   - **`interceptor`** - `{Object=}` - The interceptor object has two optional methods -\n *     `response` and `responseError`. Both `response` and `responseError` interceptors get called\n *     with `http response` object. See {@link ng.$http $http interceptors}. In addition, the\n *     resource instance or array object is accessible by the `resource` property of the\n *     `http response` object.\n *     Keep in mind that the associated promise will be resolved with the value returned by the\n *     response interceptor, if one is specified. The default response interceptor returns\n *     `response.resource` (i.e. the resource instance or array).\n *   - **`hasBody`** - `{boolean}` - allows to specify if a request body should be included or not.\n *     If not specified only POST, PUT and PATCH requests will have a body.\n *\n * @param {Object} options Hash with custom settings that should extend the\n *   default `$resourceProvider` behavior.  The supported options are:\n *\n *   - **`stripTrailingSlashes`**  {boolean}  If true then the trailing\n *   slashes from any calculated URL will be stripped. (Defaults to true.)\n *   - **`cancellable`**  {boolean}  If true, the request made by a \"non-instance\" call will be\n *   cancelled (if not already completed) by calling `$cancelRequest()` on the call's return value.\n *   This can be overwritten per action. (Defaults to false.)\n *\n * @returns {Object} A resource \"class\" object with methods for the default set of resource actions\n *   optionally extended with custom `actions`. The default set contains these actions:\n *   ```js\n *   { 'get':    {method:'GET'},\n *     'save':   {method:'POST'},\n *     'query':  {method:'GET', isArray:true},\n *     'remove': {method:'DELETE'},\n *     'delete': {method:'DELETE'} };\n *   ```\n *\n *   Calling these methods invoke an {@link ng.$http} with the specified http method,\n *   destination and parameters. When the data is returned from the server then the object is an\n *   instance of the resource class. The actions `save`, `remove` and `delete` are available on it\n *   as  methods with the `$` prefix. This allows you to easily perform CRUD operations (create,\n *   read, update, delete) on server-side data like this:\n *   ```js\n *   var User = $resource('/user/:userId', {userId:'@id'});\n *   var user = User.get({userId:123}, function() {\n *     user.abc = true;\n *     user.$save();\n *   });\n *   ```\n *\n *   It is important to realize that invoking a $resource object method immediately returns an\n *   empty reference (object or array depending on `isArray`). Once the data is returned from the\n *   server the existing reference is populated with the actual data. This is a useful trick since\n *   usually the resource is assigned to a model which is then rendered by the view. Having an empty\n *   object results in no rendering, once the data arrives from the server then the object is\n *   populated with the data and the view automatically re-renders itself showing the new data. This\n *   means that in most cases one never has to write a callback function for the action methods.\n *\n *   The action methods on the class object or instance object can be invoked with the following\n *   parameters:\n *\n *   - \"class\" actions without a body: `Resource.action([parameters], [success], [error])`\n *   - \"class\" actions with a body: `Resource.action([parameters], postData, [success], [error])`\n *   - instance actions: `instance.$action([parameters], [success], [error])`\n *\n *\n *   When calling instance methods, the instance itself is used as the request body (if the action\n *   should have a body). By default, only actions using `POST`, `PUT` or `PATCH` have request\n *   bodies, but you can use the `hasBody` configuration option to specify whether an action\n *   should have a body or not (regardless of its HTTP method).\n *\n *\n *   Success callback is called with (value (Object|Array), responseHeaders (Function),\n *   status (number), statusText (string)) arguments, where the value is the populated resource\n *   instance or collection object. The error callback is called with (httpResponse) argument.\n *\n *   Class actions return empty instance (with additional properties below).\n *   Instance actions return promise of the action.\n *\n *   The Resource instances and collections have these additional properties:\n *\n *   - `$promise`: the {@link ng.$q promise} of the original server interaction that created this\n *     instance or collection.\n *\n *     On success, the promise is resolved with the same resource instance or collection object,\n *     updated with data from server. This makes it easy to use in\n *     {@link ngRoute.$routeProvider resolve section of $routeProvider.when()} to defer view\n *     rendering until the resource(s) are loaded.\n *\n *     On failure, the promise is rejected with the {@link ng.$http http response} object.\n *\n *     If an interceptor object was provided, the promise will instead be resolved with the value\n *     returned by the interceptor.\n *\n *   - `$resolved`: `true` after first server interaction is completed (either with success or\n *      rejection), `false` before that. Knowing if the Resource has been resolved is useful in\n *      data-binding.\n *\n *   The Resource instances and collections have these additional methods:\n *\n *   - `$cancelRequest`: If there is a cancellable, pending request related to the instance or\n *      collection, calling this method will abort the request.\n *\n *   The Resource instances have these additional methods:\n *\n *   - `toJSON`: It returns a simple object without any of the extra properties added as part of\n *     the Resource API. This object can be serialized through {@link angular.toJson} safely\n *     without attaching Angular-specific fields. Notice that `JSON.stringify` (and\n *     `angular.toJson`) automatically use this method when serializing a Resource instance\n *     (see [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#toJSON%28%29_behavior)).\n *\n * @example\n *\n * # Credit card resource\n *\n * ```js\n     // Define CreditCard class\n     var CreditCard = $resource('/user/:userId/card/:cardId',\n      {userId:123, cardId:'@id'}, {\n       charge: {method:'POST', params:{charge:true}}\n      });\n\n     // We can retrieve a collection from the server\n     var cards = CreditCard.query(function() {\n       // GET: /user/123/card\n       // server returns: [ {id:456, number:'1234', name:'Smith'} ];\n\n       var card = cards[0];\n       // each item is an instance of CreditCard\n       expect(card instanceof CreditCard).toEqual(true);\n       card.name = \"J. Smith\";\n       // non GET methods are mapped onto the instances\n       card.$save();\n       // POST: /user/123/card/456 {id:456, number:'1234', name:'J. Smith'}\n       // server returns: {id:456, number:'1234', name: 'J. Smith'};\n\n       // our custom method is mapped as well.\n       card.$charge({amount:9.99});\n       // POST: /user/123/card/456?amount=9.99&charge=true {id:456, number:'1234', name:'J. Smith'}\n     });\n\n     // we can create an instance as well\n     var newCard = new CreditCard({number:'0123'});\n     newCard.name = \"Mike Smith\";\n     newCard.$save();\n     // POST: /user/123/card {number:'0123', name:'Mike Smith'}\n     // server returns: {id:789, number:'0123', name: 'Mike Smith'};\n     expect(newCard.id).toEqual(789);\n * ```\n *\n * The object returned from this function execution is a resource \"class\" which has \"static\" method\n * for each action in the definition.\n *\n * Calling these methods invoke `$http` on the `url` template with the given `method`, `params` and\n * `headers`.\n *\n * @example\n *\n * # User resource\n *\n * When the data is returned from the server then the object is an instance of the resource type and\n * all of the non-GET methods are available with `$` prefix. This allows you to easily support CRUD\n * operations (create, read, update, delete) on server-side data.\n\n   ```js\n     var User = $resource('/user/:userId', {userId:'@id'});\n     User.get({userId:123}, function(user) {\n       user.abc = true;\n       user.$save();\n     });\n   ```\n *\n * It's worth noting that the success callback for `get`, `query` and other methods gets passed\n * in the response that came from the server as well as $http header getter function, so one\n * could rewrite the above example and get access to http headers as:\n *\n   ```js\n     var User = $resource('/user/:userId', {userId:'@id'});\n     User.get({userId:123}, function(user, getResponseHeaders){\n       user.abc = true;\n       user.$save(function(user, putResponseHeaders) {\n         //user => saved user object\n         //putResponseHeaders => $http header getter\n       });\n     });\n   ```\n *\n * You can also access the raw `$http` promise via the `$promise` property on the object returned\n *\n   ```\n     var User = $resource('/user/:userId', {userId:'@id'});\n     User.get({userId:123})\n         .$promise.then(function(user) {\n           $scope.user = user;\n         });\n   ```\n *\n * @example\n *\n * # Creating a custom 'PUT' request\n *\n * In this example we create a custom method on our resource to make a PUT request\n * ```js\n *    var app = angular.module('app', ['ngResource', 'ngRoute']);\n *\n *    // Some APIs expect a PUT request in the format URL/object/ID\n *    // Here we are creating an 'update' method\n *    app.factory('Notes', ['$resource', function($resource) {\n *    return $resource('/notes/:id', null,\n *        {\n *            'update': { method:'PUT' }\n *        });\n *    }]);\n *\n *    // In our controller we get the ID from the URL using ngRoute and $routeParams\n *    // We pass in $routeParams and our Notes factory along with $scope\n *    app.controller('NotesCtrl', ['$scope', '$routeParams', 'Notes',\n                                      function($scope, $routeParams, Notes) {\n *    // First get a note object from the factory\n *    var note = Notes.get({ id:$routeParams.id });\n *    $id = note.id;\n *\n *    // Now call update passing in the ID first then the object you are updating\n *    Notes.update({ id:$id }, note);\n *\n *    // This will PUT /notes/ID with the note object in the request payload\n *    }]);\n * ```\n *\n * @example\n *\n * # Cancelling requests\n *\n * If an action's configuration specifies that it is cancellable, you can cancel the request related\n * to an instance or collection (as long as it is a result of a \"non-instance\" call):\n *\n   ```js\n     // ...defining the `Hotel` resource...\n     var Hotel = $resource('/api/hotel/:id', {id: '@id'}, {\n       // Let's make the `query()` method cancellable\n       query: {method: 'get', isArray: true, cancellable: true}\n     });\n\n     // ...somewhere in the PlanVacationController...\n     ...\n     this.onDestinationChanged = function onDestinationChanged(destination) {\n       // We don't care about any pending request for hotels\n       // in a different destination any more\n       this.availableHotels.$cancelRequest();\n\n       // Let's query for hotels in '<destination>'\n       // (calls: /api/hotel?location=<destination>)\n       this.availableHotels = Hotel.query({location: destination});\n     };\n   ```\n *\n */\nangular.module('ngResource', ['ng']).\n  info({ angularVersion: '1.6.6' }).\n  provider('$resource', function ResourceProvider() {\n    var PROTOCOL_AND_IPV6_REGEX = /^https?:\\/\\/\\[[^\\]]*][^/]*/;\n\n    var provider = this;\n\n    /**\n     * @ngdoc property\n     * @name $resourceProvider#defaults\n     * @description\n     * Object containing default options used when creating `$resource` instances.\n     *\n     * The default values satisfy a wide range of usecases, but you may choose to overwrite any of\n     * them to further customize your instances. The available properties are:\n     *\n     * - **stripTrailingSlashes**  `{boolean}`  If true, then the trailing slashes from any\n     *   calculated URL will be stripped.<br />\n     *   (Defaults to true.)\n     * - **cancellable**  `{boolean}`  If true, the request made by a \"non-instance\" call will be\n     *   cancelled (if not already completed) by calling `$cancelRequest()` on the call's return\n     *   value. For more details, see {@link ngResource.$resource}. This can be overwritten per\n     *   resource class or action.<br />\n     *   (Defaults to false.)\n     * - **actions** - `{Object.<Object>}` - A hash with default actions declarations. Actions are\n     *   high-level methods corresponding to RESTful actions/methods on resources. An action may\n     *   specify what HTTP method to use, what URL to hit, if the return value will be a single\n     *   object or a collection (array) of objects etc. For more details, see\n     *   {@link ngResource.$resource}. The actions can also be enhanced or overwritten per resource\n     *   class.<br />\n     *   The default actions are:\n     *   ```js\n     *   {\n     *     get: {method: 'GET'},\n     *     save: {method: 'POST'},\n     *     query: {method: 'GET', isArray: true},\n     *     remove: {method: 'DELETE'},\n     *     delete: {method: 'DELETE'}\n     *   }\n     *   ```\n     *\n     * #### Example\n     *\n     * For example, you can specify a new `update` action that uses the `PUT` HTTP verb:\n     *\n     * ```js\n     *   angular.\n     *     module('myApp').\n     *     config(['$resourceProvider', function ($resourceProvider) {\n     *       $resourceProvider.defaults.actions.update = {\n     *         method: 'PUT'\n     *       };\n     *     }]);\n     * ```\n     *\n     * Or you can even overwrite the whole `actions` list and specify your own:\n     *\n     * ```js\n     *   angular.\n     *     module('myApp').\n     *     config(['$resourceProvider', function ($resourceProvider) {\n     *       $resourceProvider.defaults.actions = {\n     *         create: {method: 'POST'},\n     *         get:    {method: 'GET'},\n     *         getAll: {method: 'GET', isArray:true},\n     *         update: {method: 'PUT'},\n     *         delete: {method: 'DELETE'}\n     *       };\n     *     });\n     * ```\n     *\n     */\n    this.defaults = {\n      // Strip slashes by default\n      stripTrailingSlashes: true,\n\n      // Make non-instance requests cancellable (via `$cancelRequest()`)\n      cancellable: false,\n\n      // Default actions configuration\n      actions: {\n        'get': {method: 'GET'},\n        'save': {method: 'POST'},\n        'query': {method: 'GET', isArray: true},\n        'remove': {method: 'DELETE'},\n        'delete': {method: 'DELETE'}\n      }\n    };\n\n    this.$get = ['$http', '$log', '$q', '$timeout', function($http, $log, $q, $timeout) {\n\n      var noop = angular.noop,\n          forEach = angular.forEach,\n          extend = angular.extend,\n          copy = angular.copy,\n          isArray = angular.isArray,\n          isDefined = angular.isDefined,\n          isFunction = angular.isFunction,\n          isNumber = angular.isNumber,\n          encodeUriQuery = angular.$$encodeUriQuery,\n          encodeUriSegment = angular.$$encodeUriSegment;\n\n      function Route(template, defaults) {\n        this.template = template;\n        this.defaults = extend({}, provider.defaults, defaults);\n        this.urlParams = {};\n      }\n\n      Route.prototype = {\n        setUrlParams: function(config, params, actionUrl) {\n          var self = this,\n            url = actionUrl || self.template,\n            val,\n            encodedVal,\n            protocolAndIpv6 = '';\n\n          var urlParams = self.urlParams = Object.create(null);\n          forEach(url.split(/\\W/), function(param) {\n            if (param === 'hasOwnProperty') {\n              throw $resourceMinErr('badname', 'hasOwnProperty is not a valid parameter name.');\n            }\n            if (!(new RegExp('^\\\\d+$').test(param)) && param &&\n              (new RegExp('(^|[^\\\\\\\\]):' + param + '(\\\\W|$)').test(url))) {\n              urlParams[param] = {\n                isQueryParamValue: (new RegExp('\\\\?.*=:' + param + '(?:\\\\W|$)')).test(url)\n              };\n            }\n          });\n          url = url.replace(/\\\\:/g, ':');\n          url = url.replace(PROTOCOL_AND_IPV6_REGEX, function(match) {\n            protocolAndIpv6 = match;\n            return '';\n          });\n\n          params = params || {};\n          forEach(self.urlParams, function(paramInfo, urlParam) {\n            val = params.hasOwnProperty(urlParam) ? params[urlParam] : self.defaults[urlParam];\n            if (isDefined(val) && val !== null) {\n              if (paramInfo.isQueryParamValue) {\n                encodedVal = encodeUriQuery(val, true);\n              } else {\n                encodedVal = encodeUriSegment(val);\n              }\n              url = url.replace(new RegExp(':' + urlParam + '(\\\\W|$)', 'g'), function(match, p1) {\n                return encodedVal + p1;\n              });\n            } else {\n              url = url.replace(new RegExp('(/?):' + urlParam + '(\\\\W|$)', 'g'), function(match,\n                  leadingSlashes, tail) {\n                if (tail.charAt(0) === '/') {\n                  return tail;\n                } else {\n                  return leadingSlashes + tail;\n                }\n              });\n            }\n          });\n\n          // strip trailing slashes and set the url (unless this behavior is specifically disabled)\n          if (self.defaults.stripTrailingSlashes) {\n            url = url.replace(/\\/+$/, '') || '/';\n          }\n\n          // Collapse `/.` if found in the last URL path segment before the query.\n          // E.g. `http://url.com/id/.format?q=x` becomes `http://url.com/id.format?q=x`.\n          url = url.replace(/\\/\\.(?=\\w+($|\\?))/, '.');\n          // Replace escaped `/\\.` with `/.`.\n          // (If `\\.` comes from a param value, it will be encoded as `%5C.`.)\n          config.url = protocolAndIpv6 + url.replace(/\\/(\\\\|%5C)\\./, '/.');\n\n\n          // set params - delegate param encoding to $http\n          forEach(params, function(value, key) {\n            if (!self.urlParams[key]) {\n              config.params = config.params || {};\n              config.params[key] = value;\n            }\n          });\n        }\n      };\n\n\n      function resourceFactory(url, paramDefaults, actions, options) {\n        var route = new Route(url, options);\n\n        actions = extend({}, provider.defaults.actions, actions);\n\n        function extractParams(data, actionParams) {\n          var ids = {};\n          actionParams = extend({}, paramDefaults, actionParams);\n          forEach(actionParams, function(value, key) {\n            if (isFunction(value)) { value = value(data); }\n            ids[key] = value && value.charAt && value.charAt(0) === '@' ?\n              lookupDottedPath(data, value.substr(1)) : value;\n          });\n          return ids;\n        }\n\n        function defaultResponseInterceptor(response) {\n          return response.resource;\n        }\n\n        function Resource(value) {\n          shallowClearAndCopy(value || {}, this);\n        }\n\n        Resource.prototype.toJSON = function() {\n          var data = extend({}, this);\n          delete data.$promise;\n          delete data.$resolved;\n          delete data.$cancelRequest;\n          return data;\n        };\n\n        forEach(actions, function(action, name) {\n          var hasBody = action.hasBody === true || (action.hasBody !== false && /^(POST|PUT|PATCH)$/i.test(action.method));\n          var numericTimeout = action.timeout;\n          var cancellable = isDefined(action.cancellable) ?\n              action.cancellable : route.defaults.cancellable;\n\n          if (numericTimeout && !isNumber(numericTimeout)) {\n            $log.debug('ngResource:\\n' +\n                       '  Only numeric values are allowed as `timeout`.\\n' +\n                       '  Promises are not supported in $resource, because the same value would ' +\n                       'be used for multiple requests. If you are looking for a way to cancel ' +\n                       'requests, you should use the `cancellable` option.');\n            delete action.timeout;\n            numericTimeout = null;\n          }\n\n          Resource[name] = function(a1, a2, a3, a4) {\n            var params = {}, data, success, error;\n\n            switch (arguments.length) {\n              case 4:\n                error = a4;\n                success = a3;\n                // falls through\n              case 3:\n              case 2:\n                if (isFunction(a2)) {\n                  if (isFunction(a1)) {\n                    success = a1;\n                    error = a2;\n                    break;\n                  }\n\n                  success = a2;\n                  error = a3;\n                  // falls through\n                } else {\n                  params = a1;\n                  data = a2;\n                  success = a3;\n                  break;\n                }\n                // falls through\n              case 1:\n                if (isFunction(a1)) success = a1;\n                else if (hasBody) data = a1;\n                else params = a1;\n                break;\n              case 0: break;\n              default:\n                throw $resourceMinErr('badargs',\n                  'Expected up to 4 arguments [params, data, success, error], got {0} arguments',\n                  arguments.length);\n            }\n\n            var isInstanceCall = this instanceof Resource;\n            var value = isInstanceCall ? data : (action.isArray ? [] : new Resource(data));\n            var httpConfig = {};\n            var responseInterceptor = action.interceptor && action.interceptor.response ||\n              defaultResponseInterceptor;\n            var responseErrorInterceptor = action.interceptor && action.interceptor.responseError ||\n              undefined;\n            var hasError = !!error;\n            var hasResponseErrorInterceptor = !!responseErrorInterceptor;\n            var timeoutDeferred;\n            var numericTimeoutPromise;\n\n            forEach(action, function(value, key) {\n              switch (key) {\n                default:\n                  httpConfig[key] = copy(value);\n                  break;\n                case 'params':\n                case 'isArray':\n                case 'interceptor':\n                case 'cancellable':\n                  break;\n              }\n            });\n\n            if (!isInstanceCall && cancellable) {\n              timeoutDeferred = $q.defer();\n              httpConfig.timeout = timeoutDeferred.promise;\n\n              if (numericTimeout) {\n                numericTimeoutPromise = $timeout(timeoutDeferred.resolve, numericTimeout);\n              }\n            }\n\n            if (hasBody) httpConfig.data = data;\n            route.setUrlParams(httpConfig,\n              extend({}, extractParams(data, action.params || {}), params),\n              action.url);\n\n            var promise = $http(httpConfig).then(function(response) {\n              var data = response.data;\n\n              if (data) {\n                // Need to convert action.isArray to boolean in case it is undefined\n                if (isArray(data) !== (!!action.isArray)) {\n                  throw $resourceMinErr('badcfg',\n                      'Error in resource configuration for action `{0}`. Expected response to ' +\n                      'contain an {1} but got an {2} (Request: {3} {4})', name, action.isArray ? 'array' : 'object',\n                    isArray(data) ? 'array' : 'object', httpConfig.method, httpConfig.url);\n                }\n                if (action.isArray) {\n                  value.length = 0;\n                  forEach(data, function(item) {\n                    if (typeof item === 'object') {\n                      value.push(new Resource(item));\n                    } else {\n                      // Valid JSON values may be string literals, and these should not be converted\n                      // into objects. These items will not have access to the Resource prototype\n                      // methods, but unfortunately there\n                      value.push(item);\n                    }\n                  });\n                } else {\n                  var promise = value.$promise;     // Save the promise\n                  shallowClearAndCopy(data, value);\n                  value.$promise = promise;         // Restore the promise\n                }\n              }\n              response.resource = value;\n\n              return response;\n            }, function(response) {\n              response.resource = value;\n              return $q.reject(response);\n            });\n\n            promise = promise['finally'](function() {\n              value.$resolved = true;\n              if (!isInstanceCall && cancellable) {\n                value.$cancelRequest = noop;\n                $timeout.cancel(numericTimeoutPromise);\n                timeoutDeferred = numericTimeoutPromise = httpConfig.timeout = null;\n              }\n            });\n\n            promise = promise.then(\n              function(response) {\n                var value = responseInterceptor(response);\n                (success || noop)(value, response.headers, response.status, response.statusText);\n                return value;\n              },\n              (hasError || hasResponseErrorInterceptor) ?\n                function(response) {\n                  if (hasError && !hasResponseErrorInterceptor) {\n                    // Avoid `Possibly Unhandled Rejection` error,\n                    // but still fulfill the returned promise with a rejection\n                    promise.catch(noop);\n                  }\n                  if (hasError) error(response);\n                  return hasResponseErrorInterceptor ?\n                    responseErrorInterceptor(response) :\n                    $q.reject(response);\n                } :\n                undefined);\n\n            if (!isInstanceCall) {\n              // we are creating instance / collection\n              // - set the initial promise\n              // - return the instance / collection\n              value.$promise = promise;\n              value.$resolved = false;\n              if (cancellable) value.$cancelRequest = cancelRequest;\n\n              return value;\n            }\n\n            // instance call\n            return promise;\n\n            function cancelRequest(value) {\n              promise.catch(noop);\n              if (timeoutDeferred !== null) {\n                timeoutDeferred.resolve(value);\n              }\n            }\n          };\n\n\n          Resource.prototype['$' + name] = function(params, success, error) {\n            if (isFunction(params)) {\n              error = success; success = params; params = {};\n            }\n            var result = Resource[name].call(this, params, this, success, error);\n            return result.$promise || result;\n          };\n        });\n\n        Resource.bind = function(additionalParamDefaults) {\n          var extendedParamDefaults = extend({}, paramDefaults, additionalParamDefaults);\n          return resourceFactory(url, extendedParamDefaults, actions, options);\n        };\n\n        return Resource;\n      }\n\n      return resourceFactory;\n    }];\n  });\n\n\n})(window, window.angular);\n","/**\n * @license AngularJS v1.6.6\n * (c) 2010-2017 Google, Inc. http://angularjs.org\n * License: MIT\n */\n(function(window, angular) {'use strict';\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *     Any commits to this file should be reviewed with security in mind.  *\n *   Changes to this file can potentially create security vulnerabilities. *\n *          An approval from 2 Core members with history of modifying      *\n *                         this file is required.                          *\n *                                                                         *\n *  Does the change somehow allow for arbitrary javascript to be executed? *\n *    Or allows for someone to change the prototype of built-in objects?   *\n *     Or gives undesired access to variables likes document or window?    *\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n\nvar $sanitizeMinErr = angular.$$minErr('$sanitize');\nvar bind;\nvar extend;\nvar forEach;\nvar isDefined;\nvar lowercase;\nvar noop;\nvar nodeContains;\nvar htmlParser;\nvar htmlSanitizeWriter;\n\n/**\n * @ngdoc module\n * @name ngSanitize\n * @description\n *\n * # ngSanitize\n *\n * The `ngSanitize` module provides functionality to sanitize HTML.\n *\n *\n * <div doc-module-components=\"ngSanitize\"></div>\n *\n * See {@link ngSanitize.$sanitize `$sanitize`} for usage.\n */\n\n/**\n * @ngdoc service\n * @name $sanitize\n * @kind function\n *\n * @description\n *   Sanitizes an html string by stripping all potentially dangerous tokens.\n *\n *   The input is sanitized by parsing the HTML into tokens. All safe tokens (from a whitelist) are\n *   then serialized back to properly escaped html string. This means that no unsafe input can make\n *   it into the returned string.\n *\n *   The whitelist for URL sanitization of attribute values is configured using the functions\n *   `aHrefSanitizationWhitelist` and `imgSrcSanitizationWhitelist` of {@link ng.$compileProvider\n *   `$compileProvider`}.\n *\n *   The input may also contain SVG markup if this is enabled via {@link $sanitizeProvider}.\n *\n * @param {string} html HTML input.\n * @returns {string} Sanitized HTML.\n *\n * @example\n   <example module=\"sanitizeExample\" deps=\"angular-sanitize.js\" name=\"sanitize-service\">\n   <file name=\"index.html\">\n     <script>\n         angular.module('sanitizeExample', ['ngSanitize'])\n           .controller('ExampleController', ['$scope', '$sce', function($scope, $sce) {\n             $scope.snippet =\n               '<p style=\"color:blue\">an html\\n' +\n               '<em onmouseover=\"this.textContent=\\'PWN3D!\\'\">click here</em>\\n' +\n               'snippet</p>';\n             $scope.deliberatelyTrustDangerousSnippet = function() {\n               return $sce.trustAsHtml($scope.snippet);\n             };\n           }]);\n     </script>\n     <div ng-controller=\"ExampleController\">\n        Snippet: <textarea ng-model=\"snippet\" cols=\"60\" rows=\"3\"></textarea>\n       <table>\n         <tr>\n           <td>Directive</td>\n           <td>How</td>\n           <td>Source</td>\n           <td>Rendered</td>\n         </tr>\n         <tr id=\"bind-html-with-sanitize\">\n           <td>ng-bind-html</td>\n           <td>Automatically uses $sanitize</td>\n           <td><pre>&lt;div ng-bind-html=\"snippet\"&gt;<br/>&lt;/div&gt;</pre></td>\n           <td><div ng-bind-html=\"snippet\"></div></td>\n         </tr>\n         <tr id=\"bind-html-with-trust\">\n           <td>ng-bind-html</td>\n           <td>Bypass $sanitize by explicitly trusting the dangerous value</td>\n           <td>\n           <pre>&lt;div ng-bind-html=\"deliberatelyTrustDangerousSnippet()\"&gt;\n&lt;/div&gt;</pre>\n           </td>\n           <td><div ng-bind-html=\"deliberatelyTrustDangerousSnippet()\"></div></td>\n         </tr>\n         <tr id=\"bind-default\">\n           <td>ng-bind</td>\n           <td>Automatically escapes</td>\n           <td><pre>&lt;div ng-bind=\"snippet\"&gt;<br/>&lt;/div&gt;</pre></td>\n           <td><div ng-bind=\"snippet\"></div></td>\n         </tr>\n       </table>\n       </div>\n   </file>\n   <file name=\"protractor.js\" type=\"protractor\">\n     it('should sanitize the html snippet by default', function() {\n       expect(element(by.css('#bind-html-with-sanitize div')).getAttribute('innerHTML')).\n         toBe('<p>an html\\n<em>click here</em>\\nsnippet</p>');\n     });\n\n     it('should inline raw snippet if bound to a trusted value', function() {\n       expect(element(by.css('#bind-html-with-trust div')).getAttribute('innerHTML')).\n         toBe(\"<p style=\\\"color:blue\\\">an html\\n\" +\n              \"<em onmouseover=\\\"this.textContent='PWN3D!'\\\">click here</em>\\n\" +\n              \"snippet</p>\");\n     });\n\n     it('should escape snippet without any filter', function() {\n       expect(element(by.css('#bind-default div')).getAttribute('innerHTML')).\n         toBe(\"&lt;p style=\\\"color:blue\\\"&gt;an html\\n\" +\n              \"&lt;em onmouseover=\\\"this.textContent='PWN3D!'\\\"&gt;click here&lt;/em&gt;\\n\" +\n              \"snippet&lt;/p&gt;\");\n     });\n\n     it('should update', function() {\n       element(by.model('snippet')).clear();\n       element(by.model('snippet')).sendKeys('new <b onclick=\"alert(1)\">text</b>');\n       expect(element(by.css('#bind-html-with-sanitize div')).getAttribute('innerHTML')).\n         toBe('new <b>text</b>');\n       expect(element(by.css('#bind-html-with-trust div')).getAttribute('innerHTML')).toBe(\n         'new <b onclick=\"alert(1)\">text</b>');\n       expect(element(by.css('#bind-default div')).getAttribute('innerHTML')).toBe(\n         \"new &lt;b onclick=\\\"alert(1)\\\"&gt;text&lt;/b&gt;\");\n     });\n   </file>\n   </example>\n */\n\n\n/**\n * @ngdoc provider\n * @name $sanitizeProvider\n * @this\n *\n * @description\n * Creates and configures {@link $sanitize} instance.\n */\nfunction $SanitizeProvider() {\n  var svgEnabled = false;\n\n  this.$get = ['$$sanitizeUri', function($$sanitizeUri) {\n    if (svgEnabled) {\n      extend(validElements, svgElements);\n    }\n    return function(html) {\n      var buf = [];\n      htmlParser(html, htmlSanitizeWriter(buf, function(uri, isImage) {\n        return !/^unsafe:/.test($$sanitizeUri(uri, isImage));\n      }));\n      return buf.join('');\n    };\n  }];\n\n\n  /**\n   * @ngdoc method\n   * @name $sanitizeProvider#enableSvg\n   * @kind function\n   *\n   * @description\n   * Enables a subset of svg to be supported by the sanitizer.\n   *\n   * <div class=\"alert alert-warning\">\n   *   <p>By enabling this setting without taking other precautions, you might expose your\n   *   application to click-hijacking attacks. In these attacks, sanitized svg elements could be positioned\n   *   outside of the containing element and be rendered over other elements on the page (e.g. a login\n   *   link). Such behavior can then result in phishing incidents.</p>\n   *\n   *   <p>To protect against these, explicitly setup `overflow: hidden` css rule for all potential svg\n   *   tags within the sanitized content:</p>\n   *\n   *   <br>\n   *\n   *   <pre><code>\n   *   .rootOfTheIncludedContent svg {\n   *     overflow: hidden !important;\n   *   }\n   *   </code></pre>\n   * </div>\n   *\n   * @param {boolean=} flag Enable or disable SVG support in the sanitizer.\n   * @returns {boolean|ng.$sanitizeProvider} Returns the currently configured value if called\n   *    without an argument or self for chaining otherwise.\n   */\n  this.enableSvg = function(enableSvg) {\n    if (isDefined(enableSvg)) {\n      svgEnabled = enableSvg;\n      return this;\n    } else {\n      return svgEnabled;\n    }\n  };\n\n  //////////////////////////////////////////////////////////////////////////////////////////////////\n  // Private stuff\n  //////////////////////////////////////////////////////////////////////////////////////////////////\n\n  bind = angular.bind;\n  extend = angular.extend;\n  forEach = angular.forEach;\n  isDefined = angular.isDefined;\n  lowercase = angular.lowercase;\n  noop = angular.noop;\n\n  htmlParser = htmlParserImpl;\n  htmlSanitizeWriter = htmlSanitizeWriterImpl;\n\n  nodeContains = window.Node.prototype.contains || /** @this */ function(arg) {\n    // eslint-disable-next-line no-bitwise\n    return !!(this.compareDocumentPosition(arg) & 16);\n  };\n\n  // Regular Expressions for parsing tags and attributes\n  var SURROGATE_PAIR_REGEXP = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,\n    // Match everything outside of normal chars and \" (quote character)\n    NON_ALPHANUMERIC_REGEXP = /([^#-~ |!])/g;\n\n\n  // Good source of info about elements and attributes\n  // http://dev.w3.org/html5/spec/Overview.html#semantics\n  // http://simon.html5.org/html-elements\n\n  // Safe Void Elements - HTML5\n  // http://dev.w3.org/html5/spec/Overview.html#void-elements\n  var voidElements = toMap('area,br,col,hr,img,wbr');\n\n  // Elements that you can, intentionally, leave open (and which close themselves)\n  // http://dev.w3.org/html5/spec/Overview.html#optional-tags\n  var optionalEndTagBlockElements = toMap('colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr'),\n      optionalEndTagInlineElements = toMap('rp,rt'),\n      optionalEndTagElements = extend({},\n                                              optionalEndTagInlineElements,\n                                              optionalEndTagBlockElements);\n\n  // Safe Block Elements - HTML5\n  var blockElements = extend({}, optionalEndTagBlockElements, toMap('address,article,' +\n          'aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,' +\n          'h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul'));\n\n  // Inline Elements - HTML5\n  var inlineElements = extend({}, optionalEndTagInlineElements, toMap('a,abbr,acronym,b,' +\n          'bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,' +\n          'samp,small,span,strike,strong,sub,sup,time,tt,u,var'));\n\n  // SVG Elements\n  // https://wiki.whatwg.org/wiki/Sanitization_rules#svg_Elements\n  // Note: the elements animate,animateColor,animateMotion,animateTransform,set are intentionally omitted.\n  // They can potentially allow for arbitrary javascript to be executed. See #11290\n  var svgElements = toMap('circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,' +\n          'hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,' +\n          'radialGradient,rect,stop,svg,switch,text,title,tspan');\n\n  // Blocked Elements (will be stripped)\n  var blockedElements = toMap('script,style');\n\n  var validElements = extend({},\n                                     voidElements,\n                                     blockElements,\n                                     inlineElements,\n                                     optionalEndTagElements);\n\n  //Attributes that have href and hence need to be sanitized\n  var uriAttrs = toMap('background,cite,href,longdesc,src,xlink:href');\n\n  var htmlAttrs = toMap('abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,' +\n      'color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,' +\n      'ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,' +\n      'scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,' +\n      'valign,value,vspace,width');\n\n  // SVG attributes (without \"id\" and \"name\" attributes)\n  // https://wiki.whatwg.org/wiki/Sanitization_rules#svg_Attributes\n  var svgAttrs = toMap('accent-height,accumulate,additive,alphabetic,arabic-form,ascent,' +\n      'baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,' +\n      'cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,' +\n      'font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,' +\n      'height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,' +\n      'marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,' +\n      'max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,' +\n      'path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,' +\n      'requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,' +\n      'stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,' +\n      'stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,' +\n      'stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,' +\n      'underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,' +\n      'width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,' +\n      'xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan', true);\n\n  var validAttrs = extend({},\n                                  uriAttrs,\n                                  svgAttrs,\n                                  htmlAttrs);\n\n  function toMap(str, lowercaseKeys) {\n    var obj = {}, items = str.split(','), i;\n    for (i = 0; i < items.length; i++) {\n      obj[lowercaseKeys ? lowercase(items[i]) : items[i]] = true;\n    }\n    return obj;\n  }\n\n  /**\n   * Create an inert document that contains the dirty HTML that needs sanitizing\n   * Depending upon browser support we use one of three strategies for doing this.\n   * Support: Safari 10.x -> XHR strategy\n   * Support: Firefox -> DomParser strategy\n   */\n  var getInertBodyElement /* function(html: string): HTMLBodyElement */ = (function(window, document) {\n    var inertDocument;\n    if (document && document.implementation) {\n      inertDocument = document.implementation.createHTMLDocument('inert');\n    } else {\n      throw $sanitizeMinErr('noinert', 'Can\\'t create an inert html document');\n    }\n    var inertBodyElement = (inertDocument.documentElement || inertDocument.getDocumentElement()).querySelector('body');\n\n    // Check for the Safari 10.1 bug - which allows JS to run inside the SVG G element\n    inertBodyElement.innerHTML = '<svg><g onload=\"this.parentNode.remove()\"></g></svg>';\n    if (!inertBodyElement.querySelector('svg')) {\n      return getInertBodyElement_XHR;\n    } else {\n      // Check for the Firefox bug - which prevents the inner img JS from being sanitized\n      inertBodyElement.innerHTML = '<svg><p><style><img src=\"</style><img src=x onerror=alert(1)//\">';\n      if (inertBodyElement.querySelector('svg img')) {\n        return getInertBodyElement_DOMParser;\n      } else {\n        return getInertBodyElement_InertDocument;\n      }\n    }\n\n    function getInertBodyElement_XHR(html) {\n      // We add this dummy element to ensure that the rest of the content is parsed as expected\n      // e.g. leading whitespace is maintained and tags like `<meta>` do not get hoisted to the `<head>` tag.\n      html = '<remove></remove>' + html;\n      try {\n        html = encodeURI(html);\n      } catch (e) {\n        return undefined;\n      }\n      var xhr = new window.XMLHttpRequest();\n      xhr.responseType = 'document';\n      xhr.open('GET', 'data:text/html;charset=utf-8,' + html, false);\n      xhr.send(null);\n      var body = xhr.response.body;\n      body.firstChild.remove();\n      return body;\n    }\n\n    function getInertBodyElement_DOMParser(html) {\n      // We add this dummy element to ensure that the rest of the content is parsed as expected\n      // e.g. leading whitespace is maintained and tags like `<meta>` do not get hoisted to the `<head>` tag.\n      html = '<remove></remove>' + html;\n      try {\n        var body = new window.DOMParser().parseFromString(html, 'text/html').body;\n        body.firstChild.remove();\n        return body;\n      } catch (e) {\n        return undefined;\n      }\n    }\n\n    function getInertBodyElement_InertDocument(html) {\n      inertBodyElement.innerHTML = html;\n\n      // Support: IE 9-11 only\n      // strip custom-namespaced attributes on IE<=11\n      if (document.documentMode) {\n        stripCustomNsAttrs(inertBodyElement);\n      }\n\n      return inertBodyElement;\n    }\n  })(window, window.document);\n\n  /**\n   * @example\n   * htmlParser(htmlString, {\n   *     start: function(tag, attrs) {},\n   *     end: function(tag) {},\n   *     chars: function(text) {},\n   *     comment: function(text) {}\n   * });\n   *\n   * @param {string} html string\n   * @param {object} handler\n   */\n  function htmlParserImpl(html, handler) {\n    if (html === null || html === undefined) {\n      html = '';\n    } else if (typeof html !== 'string') {\n      html = '' + html;\n    }\n\n    var inertBodyElement = getInertBodyElement(html);\n    if (!inertBodyElement) return '';\n\n    //mXSS protection\n    var mXSSAttempts = 5;\n    do {\n      if (mXSSAttempts === 0) {\n        throw $sanitizeMinErr('uinput', 'Failed to sanitize html because the input is unstable');\n      }\n      mXSSAttempts--;\n\n      // trigger mXSS if it is going to happen by reading and writing the innerHTML\n      html = inertBodyElement.innerHTML;\n      inertBodyElement = getInertBodyElement(html);\n    } while (html !== inertBodyElement.innerHTML);\n\n    var node = inertBodyElement.firstChild;\n    while (node) {\n      switch (node.nodeType) {\n        case 1: // ELEMENT_NODE\n          handler.start(node.nodeName.toLowerCase(), attrToMap(node.attributes));\n          break;\n        case 3: // TEXT NODE\n          handler.chars(node.textContent);\n          break;\n      }\n\n      var nextNode;\n      if (!(nextNode = node.firstChild)) {\n        if (node.nodeType === 1) {\n          handler.end(node.nodeName.toLowerCase());\n        }\n        nextNode = getNonDescendant('nextSibling', node);\n        if (!nextNode) {\n          while (nextNode == null) {\n            node = getNonDescendant('parentNode', node);\n            if (node === inertBodyElement) break;\n            nextNode = getNonDescendant('nextSibling', node);\n            if (node.nodeType === 1) {\n              handler.end(node.nodeName.toLowerCase());\n            }\n          }\n        }\n      }\n      node = nextNode;\n    }\n\n    while ((node = inertBodyElement.firstChild)) {\n      inertBodyElement.removeChild(node);\n    }\n  }\n\n  function attrToMap(attrs) {\n    var map = {};\n    for (var i = 0, ii = attrs.length; i < ii; i++) {\n      var attr = attrs[i];\n      map[attr.name] = attr.value;\n    }\n    return map;\n  }\n\n\n  /**\n   * Escapes all potentially dangerous characters, so that the\n   * resulting string can be safely inserted into attribute or\n   * element text.\n   * @param value\n   * @returns {string} escaped text\n   */\n  function encodeEntities(value) {\n    return value.\n      replace(/&/g, '&amp;').\n      replace(SURROGATE_PAIR_REGEXP, function(value) {\n        var hi = value.charCodeAt(0);\n        var low = value.charCodeAt(1);\n        return '&#' + (((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000) + ';';\n      }).\n      replace(NON_ALPHANUMERIC_REGEXP, function(value) {\n        return '&#' + value.charCodeAt(0) + ';';\n      }).\n      replace(/</g, '&lt;').\n      replace(/>/g, '&gt;');\n  }\n\n  /**\n   * create an HTML/XML writer which writes to buffer\n   * @param {Array} buf use buf.join('') to get out sanitized html string\n   * @returns {object} in the form of {\n   *     start: function(tag, attrs) {},\n   *     end: function(tag) {},\n   *     chars: function(text) {},\n   *     comment: function(text) {}\n   * }\n   */\n  function htmlSanitizeWriterImpl(buf, uriValidator) {\n    var ignoreCurrentElement = false;\n    var out = bind(buf, buf.push);\n    return {\n      start: function(tag, attrs) {\n        tag = lowercase(tag);\n        if (!ignoreCurrentElement && blockedElements[tag]) {\n          ignoreCurrentElement = tag;\n        }\n        if (!ignoreCurrentElement && validElements[tag] === true) {\n          out('<');\n          out(tag);\n          forEach(attrs, function(value, key) {\n            var lkey = lowercase(key);\n            var isImage = (tag === 'img' && lkey === 'src') || (lkey === 'background');\n            if (validAttrs[lkey] === true &&\n              (uriAttrs[lkey] !== true || uriValidator(value, isImage))) {\n              out(' ');\n              out(key);\n              out('=\"');\n              out(encodeEntities(value));\n              out('\"');\n            }\n          });\n          out('>');\n        }\n      },\n      end: function(tag) {\n        tag = lowercase(tag);\n        if (!ignoreCurrentElement && validElements[tag] === true && voidElements[tag] !== true) {\n          out('</');\n          out(tag);\n          out('>');\n        }\n        // eslint-disable-next-line eqeqeq\n        if (tag == ignoreCurrentElement) {\n          ignoreCurrentElement = false;\n        }\n      },\n      chars: function(chars) {\n        if (!ignoreCurrentElement) {\n          out(encodeEntities(chars));\n        }\n      }\n    };\n  }\n\n\n  /**\n   * When IE9-11 comes across an unknown namespaced attribute e.g. 'xlink:foo' it adds 'xmlns:ns1' attribute to declare\n   * ns1 namespace and prefixes the attribute with 'ns1' (e.g. 'ns1:xlink:foo'). This is undesirable since we don't want\n   * to allow any of these custom attributes. This method strips them all.\n   *\n   * @param node Root element to process\n   */\n  function stripCustomNsAttrs(node) {\n    while (node) {\n      if (node.nodeType === window.Node.ELEMENT_NODE) {\n        var attrs = node.attributes;\n        for (var i = 0, l = attrs.length; i < l; i++) {\n          var attrNode = attrs[i];\n          var attrName = attrNode.name.toLowerCase();\n          if (attrName === 'xmlns:ns1' || attrName.lastIndexOf('ns1:', 0) === 0) {\n            node.removeAttributeNode(attrNode);\n            i--;\n            l--;\n          }\n        }\n      }\n\n      var nextNode = node.firstChild;\n      if (nextNode) {\n        stripCustomNsAttrs(nextNode);\n      }\n\n      node = getNonDescendant('nextSibling', node);\n    }\n  }\n\n  function getNonDescendant(propName, node) {\n    // An element is clobbered if its `propName` property points to one of its descendants\n    var nextNode = node[propName];\n    if (nextNode && nodeContains.call(node, nextNode)) {\n      throw $sanitizeMinErr('elclob', 'Failed to sanitize html because the element is clobbered: {0}', node.outerHTML || node.outerText);\n    }\n    return nextNode;\n  }\n}\n\nfunction sanitizeText(chars) {\n  var buf = [];\n  var writer = htmlSanitizeWriter(buf, noop);\n  writer.chars(chars);\n  return buf.join('');\n}\n\n\n// define ngSanitize module and register $sanitize service\nangular.module('ngSanitize', [])\n  .provider('$sanitize', $SanitizeProvider)\n  .info({ angularVersion: '1.6.6' });\n\n/**\n * @ngdoc filter\n * @name linky\n * @kind function\n *\n * @description\n * Finds links in text input and turns them into html links. Supports `http/https/ftp/mailto` and\n * plain email address links.\n *\n * Requires the {@link ngSanitize `ngSanitize`} module to be installed.\n *\n * @param {string} text Input text.\n * @param {string} target Window (`_blank|_self|_parent|_top`) or named frame to open links in.\n * @param {object|function(url)} [attributes] Add custom attributes to the link element.\n *\n *    Can be one of:\n *\n *    - `object`: A map of attributes\n *    - `function`: Takes the url as a parameter and returns a map of attributes\n *\n *    If the map of attributes contains a value for `target`, it overrides the value of\n *    the target parameter.\n *\n *\n * @returns {string} Html-linkified and {@link $sanitize sanitized} text.\n *\n * @usage\n   <span ng-bind-html=\"linky_expression | linky\"></span>\n *\n * @example\n   <example module=\"linkyExample\" deps=\"angular-sanitize.js\" name=\"linky-filter\">\n     <file name=\"index.html\">\n       <div ng-controller=\"ExampleController\">\n       Snippet: <textarea ng-model=\"snippet\" cols=\"60\" rows=\"3\"></textarea>\n       <table>\n         <tr>\n           <th>Filter</th>\n           <th>Source</th>\n           <th>Rendered</th>\n         </tr>\n         <tr id=\"linky-filter\">\n           <td>linky filter</td>\n           <td>\n             <pre>&lt;div ng-bind-html=\"snippet | linky\"&gt;<br>&lt;/div&gt;</pre>\n           </td>\n           <td>\n             <div ng-bind-html=\"snippet | linky\"></div>\n           </td>\n         </tr>\n         <tr id=\"linky-target\">\n          <td>linky target</td>\n          <td>\n            <pre>&lt;div ng-bind-html=\"snippetWithSingleURL | linky:'_blank'\"&gt;<br>&lt;/div&gt;</pre>\n          </td>\n          <td>\n            <div ng-bind-html=\"snippetWithSingleURL | linky:'_blank'\"></div>\n          </td>\n         </tr>\n         <tr id=\"linky-custom-attributes\">\n          <td>linky custom attributes</td>\n          <td>\n            <pre>&lt;div ng-bind-html=\"snippetWithSingleURL | linky:'_self':{rel: 'nofollow'}\"&gt;<br>&lt;/div&gt;</pre>\n          </td>\n          <td>\n            <div ng-bind-html=\"snippetWithSingleURL | linky:'_self':{rel: 'nofollow'}\"></div>\n          </td>\n         </tr>\n         <tr id=\"escaped-html\">\n           <td>no filter</td>\n           <td><pre>&lt;div ng-bind=\"snippet\"&gt;<br>&lt;/div&gt;</pre></td>\n           <td><div ng-bind=\"snippet\"></div></td>\n         </tr>\n       </table>\n     </file>\n     <file name=\"script.js\">\n       angular.module('linkyExample', ['ngSanitize'])\n         .controller('ExampleController', ['$scope', function($scope) {\n           $scope.snippet =\n             'Pretty text with some links:\\n' +\n             'http://angularjs.org/,\\n' +\n             'mailto:us@somewhere.org,\\n' +\n             'another@somewhere.org,\\n' +\n             'and one more: ftp://127.0.0.1/.';\n           $scope.snippetWithSingleURL = 'http://angularjs.org/';\n         }]);\n     </file>\n     <file name=\"protractor.js\" type=\"protractor\">\n       it('should linkify the snippet with urls', function() {\n         expect(element(by.id('linky-filter')).element(by.binding('snippet | linky')).getText()).\n             toBe('Pretty text with some links: http://angularjs.org/, us@somewhere.org, ' +\n                  'another@somewhere.org, and one more: ftp://127.0.0.1/.');\n         expect(element.all(by.css('#linky-filter a')).count()).toEqual(4);\n       });\n\n       it('should not linkify snippet without the linky filter', function() {\n         expect(element(by.id('escaped-html')).element(by.binding('snippet')).getText()).\n             toBe('Pretty text with some links: http://angularjs.org/, mailto:us@somewhere.org, ' +\n                  'another@somewhere.org, and one more: ftp://127.0.0.1/.');\n         expect(element.all(by.css('#escaped-html a')).count()).toEqual(0);\n       });\n\n       it('should update', function() {\n         element(by.model('snippet')).clear();\n         element(by.model('snippet')).sendKeys('new http://link.');\n         expect(element(by.id('linky-filter')).element(by.binding('snippet | linky')).getText()).\n             toBe('new http://link.');\n         expect(element.all(by.css('#linky-filter a')).count()).toEqual(1);\n         expect(element(by.id('escaped-html')).element(by.binding('snippet')).getText())\n             .toBe('new http://link.');\n       });\n\n       it('should work with the target property', function() {\n        expect(element(by.id('linky-target')).\n            element(by.binding(\"snippetWithSingleURL | linky:'_blank'\")).getText()).\n            toBe('http://angularjs.org/');\n        expect(element(by.css('#linky-target a')).getAttribute('target')).toEqual('_blank');\n       });\n\n       it('should optionally add custom attributes', function() {\n        expect(element(by.id('linky-custom-attributes')).\n            element(by.binding(\"snippetWithSingleURL | linky:'_self':{rel: 'nofollow'}\")).getText()).\n            toBe('http://angularjs.org/');\n        expect(element(by.css('#linky-custom-attributes a')).getAttribute('rel')).toEqual('nofollow');\n       });\n     </file>\n   </example>\n */\nangular.module('ngSanitize').filter('linky', ['$sanitize', function($sanitize) {\n  var LINKY_URL_REGEXP =\n        /((ftp|https?):\\/\\/|(www\\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\\S*[^\\s.;,(){}<>\"\\u201d\\u2019]/i,\n      MAILTO_REGEXP = /^mailto:/i;\n\n  var linkyMinErr = angular.$$minErr('linky');\n  var isDefined = angular.isDefined;\n  var isFunction = angular.isFunction;\n  var isObject = angular.isObject;\n  var isString = angular.isString;\n\n  return function(text, target, attributes) {\n    if (text == null || text === '') return text;\n    if (!isString(text)) throw linkyMinErr('notstring', 'Expected string but received: {0}', text);\n\n    var attributesFn =\n      isFunction(attributes) ? attributes :\n      isObject(attributes) ? function getAttributesObject() {return attributes;} :\n      function getEmptyAttributesObject() {return {};};\n\n    var match;\n    var raw = text;\n    var html = [];\n    var url;\n    var i;\n    while ((match = raw.match(LINKY_URL_REGEXP))) {\n      // We can not end in these as they are sometimes found at the end of the sentence\n      url = match[0];\n      // if we did not match ftp/http/www/mailto then assume mailto\n      if (!match[2] && !match[4]) {\n        url = (match[3] ? 'http://' : 'mailto:') + url;\n      }\n      i = match.index;\n      addText(raw.substr(0, i));\n      addLink(url, match[0].replace(MAILTO_REGEXP, ''));\n      raw = raw.substring(i + match[0].length);\n    }\n    addText(raw);\n    return $sanitize(html.join(''));\n\n    function addText(text) {\n      if (!text) {\n        return;\n      }\n      html.push(sanitizeText(text));\n    }\n\n    function addLink(url, text) {\n      var key, linkAttributes = attributesFn(url);\n      html.push('<a ');\n\n      for (key in linkAttributes) {\n        html.push(key + '=\"' + linkAttributes[key] + '\" ');\n      }\n\n      if (isDefined(target) && !('target' in linkAttributes)) {\n        html.push('target=\"',\n                  target,\n                  '\" ');\n      }\n      html.push('href=\"',\n                url.replace(/\"/g, '&quot;'),\n                '\">');\n      addText(text);\n      html.push('</a>');\n    }\n  };\n}]);\n\n\n})(window, window.angular);\n","/**\n * Higher order functions\n *\n * These utility functions are exported, but are subject to change without notice.\n *\n * @module common_hof\n */ /** */\n\nimport {Predicate} from \"./common\";\n/**\n * Returns a new function for [Partial Application](https://en.wikipedia.org/wiki/Partial_application) of the original function.\n *\n * Given a function with N parameters, returns a new function that supports partial application.\n * The new function accepts anywhere from 1 to N parameters.  When that function is called with M parameters,\n * where M is less than N, it returns a new function that accepts the remaining parameters.  It continues to\n * accept more parameters until all N parameters have been supplied.\n *\n *\n * This contrived example uses a partially applied function as an predicate, which returns true\n * if an object is found in both arrays.\n * @example\n * ```\n * // returns true if an object is in both of the two arrays\n * function inBoth(array1, array2, object) {\n *   return array1.indexOf(object) !== -1 &&\n *          array2.indexOf(object) !== 1;\n * }\n * let obj1, obj2, obj3, obj4, obj5, obj6, obj7\n * let foos = [obj1, obj3]\n * let bars = [obj3, obj4, obj5]\n *\n * // A curried \"copy\" of inBoth\n * let curriedInBoth = curry(inBoth);\n * // Partially apply both the array1 and array2\n * let inFoosAndBars = curriedInBoth(foos, bars);\n *\n * // Supply the final argument; since all arguments are\n * // supplied, the original inBoth function is then called.\n * let obj1InBoth = inFoosAndBars(obj1); // false\n *\n * // Use the inFoosAndBars as a predicate.\n * // Filter, on each iteration, supplies the final argument\n * let allObjs = [ obj1, obj2, obj3, obj4, obj5, obj6, obj7 ];\n * let foundInBoth = allObjs.filter(inFoosAndBars); // [ obj3 ]\n *\n * ```\n *\n * Stolen from: http://stackoverflow.com/questions/4394747/javascript-curry-function\n *\n * @param fn\n * @returns {*|function(): (*|any)}\n */\nexport function curry(fn: Function): Function {\n  let initial_args = [].slice.apply(arguments, [1]);\n  let func_args_length = fn.length;\n\n  function curried(args: any[]) {\n    if (args.length >= func_args_length)\n      return fn.apply(null, args);\n    return function () {\n      return curried(args.concat([].slice.apply(arguments)));\n    };\n  }\n  return curried(initial_args);\n}\n\n\n\n/**\n * Given a varargs list of functions, returns a function that composes the argument functions, right-to-left\n * given: f(x), g(x), h(x)\n * let composed = compose(f,g,h)\n * then, composed is: f(g(h(x)))\n */\nexport function compose() {\n  let args = arguments;\n  let start = args.length - 1;\n  return function() {\n    let i = start, result = args[start].apply(this, arguments);\n    while (i--) result = args[i].call(this, result);\n    return result;\n  };\n}\n\n/**\n * Given a varargs list of functions, returns a function that is composes the argument functions, left-to-right\n * given: f(x), g(x), h(x)\n * let piped = pipe(f,g,h);\n * then, piped is: h(g(f(x)))\n */\nexport function pipe(...funcs: Function[]): (obj: any) => any {\n  return compose.apply(null, [].slice.call(arguments).reverse());\n}\n\n/**\n * Given a property name, returns a function that returns that property from an object\n * let obj = { foo: 1, name: \"blarg\" };\n * let getName = prop(\"name\");\n * getName(obj) === \"blarg\"\n */\nexport const prop = (name: string) =>\n    (obj: any) => obj && obj[name];\n\n/**\n * Given a property name and a value, returns a function that returns a boolean based on whether\n * the passed object has a property that matches the value\n * let obj = { foo: 1, name: \"blarg\" };\n * let getName = propEq(\"name\", \"blarg\");\n * getName(obj) === true\n */\nexport const propEq = curry((name: string, val: any, obj: any) => obj && obj[name] === val);\n\n/**\n * Given a dotted property name, returns a function that returns a nested property from an object, or undefined\n * let obj = { id: 1, nestedObj: { foo: 1, name: \"blarg\" }, };\n * let getName = prop(\"nestedObj.name\");\n * getName(obj) === \"blarg\"\n * let propNotFound = prop(\"this.property.doesnt.exist\");\n * propNotFound(obj) === undefined\n */\nexport const parse = (name: string) =>\n    pipe.apply(null, name.split(\".\").map(prop));\n\n/**\n * Given a function that returns a truthy or falsey value, returns a\n * function that returns the opposite (falsey or truthy) value given the same inputs\n */\nexport const not: (fn: Predicate<any>) => Predicate<any> = (fn: Predicate<any>) =>\n    (...args: any[]) => !fn.apply(null, args);\n\n/**\n * Given two functions that return truthy or falsey values, returns a function that returns truthy\n * if both functions return truthy for the given arguments\n */\nexport function and(fn1: Predicate<any>, fn2: Predicate<any>): Predicate<any> {\n  return (...args: any[]) => fn1.apply(null, args) && fn2.apply(null, args);\n}\n\n/**\n * Given two functions that return truthy or falsey values, returns a function that returns truthy\n * if at least one of the functions returns truthy for the given arguments\n */\nexport function or(fn1: Predicate<any>, fn2: Predicate<any>): Predicate<any> {\n  return (...args: any[]) => fn1.apply(null, args) || fn2.apply(null, args);\n}\n\n/**\n * Check if all the elements of an array match a predicate function\n *\n * @param fn1 a predicate function `fn1`\n * @returns a function which takes an array and returns true if `fn1` is true for all elements of the array\n */\nexport const all = (fn1: Predicate<any>) =>\n    (arr: any[]) => arr.reduce((b, x) => b && !!fn1(x), true) as boolean;\nexport const any = (fn1: Predicate<any>) =>\n    (arr: any[]) => arr.reduce((b, x) => b || !!fn1(x), false) as boolean;\n\n/** Given a class, returns a Predicate function that returns true if the object is of that class */\nexport const is = <T> (ctor: { new(...args): T }) =>\n    (obj: any): obj is T =>\n        (obj != null && obj.constructor === ctor || obj instanceof ctor);\n\n/** Given a value, returns a Predicate function that returns true if another value is === equal to the original value */\nexport const eq: (comp: any) => Predicate<any> = (val: any) => (other: any) =>\n    val === other;\n\n/** Given a value, returns a function which returns the value */\nexport const val = <T> (v: T) => () => v;\n\n\n\nexport function invoke(fnName: string): Function;\nexport function invoke(fnName: string, args: any[]): Function;\nexport function invoke(fnName: string, args?: any[]): Function {\n  return (obj: any) =>\n      obj[fnName].apply(obj, args);\n}\n\n/**\n * Sorta like Pattern Matching (a functional programming conditional construct)\n *\n * See http://c2.com/cgi/wiki?PatternMatching\n *\n * This is a conditional construct which allows a series of predicates and output functions\n * to be checked and then applied.  Each predicate receives the input.  If the predicate\n * returns truthy, then its matching output function (mapping function) is provided with\n * the input and, then the result is returned.\n *\n * Each combination (2-tuple) of predicate + output function should be placed in an array\n * of size 2: [ predicate, mapFn ]\n *\n * These 2-tuples should be put in an outer array.\n *\n * @example\n * ```\n *\n * // Here's a 2-tuple where the first element is the isString predicate\n * // and the second element is a function that returns a description of the input\n * let firstTuple = [ angular.isString, (input) => `Heres your string ${input}` ];\n *\n * // Second tuple: predicate \"isNumber\", mapfn returns a description\n * let secondTuple = [ angular.isNumber, (input) => `(${input}) That's a number!` ];\n *\n * let third = [ (input) => input === null,  (input) => `Oh, null...` ];\n *\n * let fourth = [ (input) => input === undefined,  (input) => `notdefined` ];\n *\n * let descriptionOf = pattern([ firstTuple, secondTuple, third, fourth ]);\n *\n * console.log(descriptionOf(undefined)); // 'notdefined'\n * console.log(descriptionOf(55)); // '(55) That's a number!'\n * console.log(descriptionOf(\"foo\")); // 'Here's your string foo'\n * ```\n *\n * @param struct A 2D array.  Each element of the array should be an array, a 2-tuple,\n * with a Predicate and a mapping/output function\n * @returns {function(any): *}\n */\nexport function pattern(struct: Function[][]): Function {\n  return function(x: any) {\n    for (var i = 0; i < struct.length; i++) {\n      if (struct[i][0](x)) return struct[i][1](x);\n    }\n  };\n}\n\n","/** Predicates\n *\n * These predicates return true/false based on the input.\n * Although these functions are exported, they are subject to change without notice.\n *\n * @module common_predicates\n */\n/** */\nimport { and, not, pipe, prop, or } from \"./hof\";\nimport { Predicate } from \"./common\"; // has or is using\nimport { StateObject } from \"../state/stateObject\";\n\nconst toStr = Object.prototype.toString;\nconst tis = (t: string) => (x: any) => typeof(x) === t;\nexport const isUndefined = tis('undefined');\nexport const isDefined = not(isUndefined);\nexport const isNull = (o: any) => o === null;\nexport const isNullOrUndefined = or(isNull, isUndefined);\nexport const isFunction: (x: any) => x is Function = <any> tis('function');\nexport const isNumber: (x: any) => x is number = <any> tis('number');\nexport const isString = <(x: any) => x is string> tis('string');\nexport const isObject = (x: any) => x !== null && typeof x === 'object';\nexport const isArray = Array.isArray;\nexport const isDate: (x: any) => x is Date = <any> ((x: any) => toStr.call(x) === '[object Date]');\nexport const isRegExp: (x: any) => x is RegExp = <any> ((x: any) => toStr.call(x) === '[object RegExp]');\nexport const isState: (x: any) => x is StateObject = StateObject.isState;\n\n/**\n * Predicate which checks if a value is injectable\n *\n * A value is \"injectable\" if it is a function, or if it is an ng1 array-notation-style array\n * where all the elements in the array are Strings, except the last one, which is a Function\n */\nexport function isInjectable(val: any) {\n  if (isArray(val) && val.length) {\n    let head = val.slice(0, -1), tail = val.slice(-1);\n    return !(head.filter(not(isString)).length || tail.filter(not(isFunction)).length);\n  }\n  return isFunction(val);\n}\n\n/**\n * Predicate which checks if a value looks like a Promise\n *\n * It is probably a Promise if it's an object, and it has a `then` property which is a Function\n */\nexport const isPromise = <(x: any) => x is Promise<any>> and(isObject, pipe(prop('then'), isFunction));\n\n","/**\n * Random utility functions used in the UI-Router code\n *\n * These functions are exported, but are subject to change without notice.\n *\n * @preferred\n * @module common\n */\n/** for typedoc */\nimport { isFunction, isString, isArray, isRegExp, isDate } from \"./predicates\";\nimport { all, any, prop, curry, not } from \"./hof\";\nimport { services } from \"./coreservices\";\nimport { StateObject } from \"../state/stateObject\";\n\nlet w: any = typeof window === 'undefined' ? {} : window;\nlet angular = w.angular || {};\nexport const fromJson = angular.fromJson || JSON.parse.bind(JSON);\nexport const toJson = angular.toJson || JSON.stringify.bind(JSON);\nexport const copy = angular.copy || _copy;\nexport const forEach = angular.forEach || _forEach;\nexport const extend = Object.assign || _extend;\nexport const equals = angular.equals || _equals;\nexport function identity(x: any) { return x; }\nexport function noop(): any {}\n\nexport type Mapper<X, T> = (x: X, key?: (string|number)) => T;\nexport interface TypedMap<T> { [key: string]: T; }\nexport type Predicate<X> = (x?: X) => boolean;\n/**\n * An ng1-style injectable\n *\n * This could be a (non-minified) function such as:\n * ```js\n * function injectableFunction(SomeDependency) {\n *\n * }\n * ```\n *\n * or an explicitly annotated function (minify safe)\n * ```js\n * injectableFunction.$inject = [ 'SomeDependency' ];\n * function injectableFunction(SomeDependency) {\n *\n * }\n * ```\n *\n * or an array style annotated function (minify safe)\n * ```js\n * ['SomeDependency', function injectableFunction(SomeDependency) {\n *\n * }];\n * ```\n *\n * @publicapi\n */\nexport type IInjectable = (Function|any[]);\n\nexport interface Obj extends Object {\n  [key: string]: any;\n}\n\n/**\n * Builds proxy functions on the `to` object which pass through to the `from` object.\n *\n * For each key in `fnNames`, creates a proxy function on the `to` object.\n * The proxy function calls the real function on the `from` object.\n *\n *\n * #### Example:\n * This example creates an new class instance whose functions are prebound to the new'd object.\n * ```js\n * class Foo {\n *   constructor(data) {\n *     // Binds all functions from Foo.prototype to 'this',\n *     // then copies them to 'this'\n *     bindFunctions(Foo.prototype, this, this);\n *     this.data = data;\n *   }\n *\n *   log() {\n *     console.log(this.data);\n *   }\n * }\n *\n * let myFoo = new Foo([1,2,3]);\n * var logit = myFoo.log;\n * logit(); // logs [1, 2, 3] from the myFoo 'this' instance\n * ```\n *\n * #### Example:\n * This example creates a bound version of a service function, and copies it to another object\n * ```\n *\n * var SomeService = {\n *   this.data = [3, 4, 5];\n *   this.log = function() {\n *     console.log(this.data);\n *   }\n * }\n *\n * // Constructor fn\n * function OtherThing() {\n *   // Binds all functions from SomeService to SomeService,\n *   // then copies them to 'this'\n *   bindFunctions(SomeService, this, SomeService);\n * }\n *\n * let myOtherThing = new OtherThing();\n * myOtherThing.log(); // logs [3, 4, 5] from SomeService's 'this'\n * ```\n *\n * @param source A function that returns the source object which contains the original functions to be bound\n * @param target A function that returns the target object which will receive the bound functions\n * @param bind A function that returns the object which the functions will be bound to\n * @param fnNames The function names which will be bound (Defaults to all the functions found on the 'from' object)\n * @param latebind If true, the binding of the function is delayed until the first time it's invoked\n */\nexport function createProxyFunctions(source: Function, target: Obj, bind: Function, fnNames?: string[], latebind = false): Obj {\n  const bindFunction = (fnName) =>\n      source()[fnName].bind(bind());\n\n  const makeLateRebindFn = fnName => function lateRebindFunction() {\n    target[fnName] = bindFunction(fnName);\n    return target[fnName].apply(null, arguments);\n  };\n\n  fnNames = fnNames || Object.keys(source());\n\n  return fnNames.reduce((acc, name) => {\n    acc[name] = latebind ? makeLateRebindFn(name) : bindFunction(name);\n    return acc;\n  }, target);\n}\n\n\n/**\n * prototypal inheritance helper.\n * Creates a new object which has `parent` object as its prototype, and then copies the properties from `extra` onto it\n */\nexport const inherit = (parent: Obj, extra?: Obj) =>\n    extend(Object.create(parent), extra);\n\n/** Given an array, returns true if the object is found in the array, (using indexOf) */\nexport const inArray: typeof _inArray = curry(_inArray) as any;\nexport function _inArray(array: any[], obj: any): boolean;\nexport function _inArray(array: any[]): (obj: any) => boolean;\nexport function _inArray(array, obj?): any {\n  return array.indexOf(obj) !== -1;\n}\n\n/**\n * Given an array, and an item, if the item is found in the array, it removes it (in-place).\n * The same array is returned\n */\nexport const removeFrom: typeof _removeFrom = curry(_removeFrom) as any;\nexport function _removeFrom<T>(array: T[], obj: T): T[];\nexport function _removeFrom<T>(array: T[]): (obj: T) => T[];\nexport function _removeFrom(array, obj?) {\n  let idx = array.indexOf(obj);\n  if (idx >= 0) array.splice(idx, 1);\n  return array;\n}\n\n/** pushes a values to an array and returns the value */\nexport const pushTo: typeof _pushTo = curry(_pushTo) as any;\nexport function _pushTo<T>(arr: T[], val: T): T ;\nexport function _pushTo<T>(arr: T[]): (val: T) => T ;\nexport function _pushTo(arr, val?): any {\n  return (arr.push(val), val);\n}\n\n/** Given an array of (deregistration) functions, calls all functions and removes each one from the source array */\nexport const deregAll = (functions: Function[]) =>\n    functions.slice().forEach(fn => {\n      typeof fn === 'function' && fn();\n      removeFrom(functions, fn);\n    });\n/**\n * Applies a set of defaults to an options object.  The options object is filtered\n * to only those properties of the objects in the defaultsList.\n * Earlier objects in the defaultsList take precedence when applying defaults.\n */\nexport function defaults(opts, ...defaultsList: Obj[]) {\n  let _defaultsList = defaultsList.concat({}).reverse();\n  let defaultVals = extend.apply(null, _defaultsList);\n  return extend({}, defaultVals, pick(opts || {}, Object.keys(defaultVals)));\n}\n\n/** Reduce function that merges each element of the list into a single object, using extend */\nexport const mergeR = (memo: Obj, item: Obj) => extend(memo, item);\n\n/**\n * Finds the common ancestor path between two states.\n *\n * @param {Object} first The first state.\n * @param {Object} second The second state.\n * @return {Array} Returns an array of state names in descending order, not including the root.\n */\nexport function ancestors(first: StateObject, second: StateObject) {\n  let path: StateObject[] = [];\n\n  for (let n in first.path) {\n    if (first.path[n] !== second.path[n]) break;\n    path.push(first.path[n]);\n  }\n  return path;\n}\n\n/**\n * Return a copy of the object only containing the whitelisted properties.\n *\n * #### Example:\n * ```\n * var foo = { a: 1, b: 2, c: 3 };\n * var ab = pick(foo, ['a', 'b']); // { a: 1, b: 2 }\n * ```\n * @param obj the source object\n * @param propNames an Array of strings, which are the whitelisted property names\n */\nexport function pick(obj: Obj, propNames: string[]): Obj {\n  let objCopy = {};\n  for (let prop in obj) {\n    if (propNames.indexOf(prop) !== -1) {\n      objCopy[prop] = obj[prop];\n    }\n  }\n  return objCopy;\n}\n\n/**\n * Return a copy of the object omitting the blacklisted properties.\n *\n * @example\n * ```\n *\n * var foo = { a: 1, b: 2, c: 3 };\n * var ab = omit(foo, ['a', 'b']); // { c: 3 }\n * ```\n * @param obj the source object\n * @param propNames an Array of strings, which are the blacklisted property names\n */\nexport function omit(obj: Obj, propNames: string[]): Obj {\n  return Object.keys(obj)\n      .filter(not(inArray(propNames)))\n      .reduce((acc, key) => (acc[key] = obj[key], acc), {});\n}\n\n\n/** Given an array of objects, maps each element to a named property of the element. */\nexport function pluck<T>(collection: Obj[], propName: string): T[];\n/** Given an object, maps each property of the object to a named property of the property. */\nexport function pluck(collection: { [key: string]: any }, propName: string): { [key: string]: any };\n/**\n * Maps an array, or object to a property (by name)\n */\nexport function pluck(collection: any, propName: string): any {\n  return map(collection, <Mapper<any, string>> prop(propName));\n}\n\n\n/** Given an array of objects, returns a new array containing only the elements which passed the callback predicate */\nexport function filter<T>(collection: T[], callback: (t: T, key?: number) => boolean): T[];\n/** Given an object, returns a new object with only those properties that passed the callback predicate */\nexport function filter<T>(collection: TypedMap<T>, callback: (t: T, key?: string) => boolean): TypedMap<T>;\n/** Filters an Array or an Object's properties based on a predicate */\nexport function filter<T>(collection: any, callback: Function): T {\n  let arr = isArray(collection), result: any = arr ? [] : {};\n  let accept = arr ? x => result.push(x) : (x, key) => result[key] = x;\n  forEach(collection, function(item, i) {\n    if (callback(item, i)) accept(item, i);\n  });\n  return <T>result;\n}\n\n\n/** Given an object, return the first property of that object which passed the callback predicate */\nexport function find<T>(collection: TypedMap<T>, callback: Predicate<T>): T;\n/** Given an array of objects, returns the first object which passed the callback predicate */\nexport function find<T>(collection: T[], callback: Predicate<T>): T;\n/** Finds an object from an array, or a property of an object, that matches a predicate */\nexport function find(collection: any, callback: any) {\n  let result;\n\n  forEach(collection, function(item, i) {\n    if (result) return;\n    if (callback(item, i)) result = item;\n  });\n\n  return result;\n}\n\n/** Given an object, returns a new object, where each property is transformed by the callback function */\nexport let mapObj: <T, U>(collection: { [key: string]: T }, callback: Mapper<T, U>) => { [key: string]: U } = map;\n/** Given an array, returns a new array, where each element is transformed by the callback function */\nexport function map<T, U>(collection: T[], callback: Mapper<T, U>): U[];\nexport function map<T, U>(collection: { [key: string]: T }, callback: Mapper<T, U>): { [key: string]: U };\n/** Maps an array or object properties using a callback function */\nexport function map(collection: any, callback: any): any {\n  let result = isArray(collection) ? [] : {};\n  forEach(collection, (item, i) => result[i] = callback(item, i));\n  return result;\n}\n\n/**\n * Given an object, return its enumerable property values\n *\n * @example\n * ```\n *\n * let foo = { a: 1, b: 2, c: 3 }\n * let vals = values(foo); // [ 1, 2, 3 ]\n * ```\n */\nexport const values: (<T> (obj: TypedMap<T>) => T[]) = (obj: Obj) =>\n    Object.keys(obj).map(key => obj[key]);\n\n/**\n * Reduce function that returns true if all of the values are truthy.\n *\n * @example\n * ```\n *\n * let vals = [ 1, true, {}, \"hello world\"];\n * vals.reduce(allTrueR, true); // true\n *\n * vals.push(0);\n * vals.reduce(allTrueR, true); // false\n * ```\n */\nexport const allTrueR  = (memo: boolean, elem: any) => memo && elem;\n\n/**\n * Reduce function that returns true if any of the values are truthy.\n *\n *  * @example\n * ```\n *\n * let vals = [ 0, null, undefined ];\n * vals.reduce(anyTrueR, true); // false\n *\n * vals.push(\"hello world\");\n * vals.reduce(anyTrueR, true); // true\n * ```\n */\nexport const anyTrueR  = (memo: boolean, elem: any) => memo || elem;\n\n/**\n * Reduce function which un-nests a single level of arrays\n * @example\n * ```\n *\n * let input = [ [ \"a\", \"b\" ], [ \"c\", \"d\" ], [ [ \"double\", \"nested\" ] ] ];\n * input.reduce(unnestR, []) // [ \"a\", \"b\", \"c\", \"d\", [ \"double, \"nested\" ] ]\n * ```\n */\nexport const unnestR   = (memo: any[], elem: any[]) => memo.concat(elem);\n\n/**\n * Reduce function which recursively un-nests all arrays\n *\n * @example\n * ```\n *\n * let input = [ [ \"a\", \"b\" ], [ \"c\", \"d\" ], [ [ \"double\", \"nested\" ] ] ];\n * input.reduce(unnestR, []) // [ \"a\", \"b\", \"c\", \"d\", \"double, \"nested\" ]\n * ```\n */\nexport const flattenR  = (memo: any[], elem: any) =>\n    isArray(elem) ? memo.concat(elem.reduce(flattenR, [])) : pushR(memo, elem);\n\n/**\n * Reduce function that pushes an object to an array, then returns the array.\n * Mostly just for [[flattenR]] and [[uniqR]]\n */\nexport function pushR(arr: any[], obj: any) {\n  arr.push(obj);\n  return arr;\n}\n\n/** Reduce function that filters out duplicates */\nexport const uniqR = <T> (acc: T[], token: T): T[] =>\n    inArray(acc, token) ? acc : pushR(acc, token);\n\n/**\n * Return a new array with a single level of arrays unnested.\n *\n * @example\n * ```\n *\n * let input = [ [ \"a\", \"b\" ], [ \"c\", \"d\" ], [ [ \"double\", \"nested\" ] ] ];\n * unnest(input) // [ \"a\", \"b\", \"c\", \"d\", [ \"double, \"nested\" ] ]\n * ```\n */\nexport const unnest    = (arr: any[]) => arr.reduce(unnestR, []);\n/**\n * Return a completely flattened version of an array.\n *\n * @example\n * ```\n *\n * let input = [ [ \"a\", \"b\" ], [ \"c\", \"d\" ], [ [ \"double\", \"nested\" ] ] ];\n * flatten(input) // [ \"a\", \"b\", \"c\", \"d\", \"double, \"nested\" ]\n * ```\n */\nexport const flatten   = (arr: any[]) => arr.reduce(flattenR, []);\n\n/**\n * Given a .filter Predicate, builds a .filter Predicate which throws an error if any elements do not pass.\n * @example\n * ```\n *\n * let isNumber = (obj) => typeof(obj) === 'number';\n * let allNumbers = [ 1, 2, 3, 4, 5 ];\n * allNumbers.filter(assertPredicate(isNumber)); //OK\n *\n * let oneString = [ 1, 2, 3, 4, \"5\" ];\n * oneString.filter(assertPredicate(isNumber, \"Not all numbers\")); // throws Error(\"\"Not all numbers\"\");\n * ```\n */\nexport const assertPredicate: <T> (predicate: Predicate<T>, errMsg: (string|Function)) => Predicate<T> = assertFn;\n/**\n * Given a .map function, builds a .map function which throws an error if any mapped elements do not pass a truthyness test.\n * @example\n * ```\n *\n * var data = { foo: 1, bar: 2 };\n *\n * let keys = [ 'foo', 'bar' ]\n * let values = keys.map(assertMap(key => data[key], \"Key not found\"));\n * // values is [1, 2]\n *\n * let keys = [ 'foo', 'bar', 'baz' ]\n * let values = keys.map(assertMap(key => data[key], \"Key not found\"));\n * // throws Error(\"Key not found\")\n * ```\n */\nexport const assertMap: <T, U> (mapFn: (t: T) => U, errMsg: (string|Function)) => (t: T) => U = assertFn;\nexport function assertFn(predicateOrMap: Function, errMsg: (string|Function) = \"assert failure\"): any {\n  return (obj) => {\n    let result = predicateOrMap(obj);\n    if (!result) {\n      throw new Error(isFunction(errMsg) ? (<Function> errMsg)(obj) : errMsg);\n    }\n    return result;\n  };\n}\n\n/**\n * Like _.pairs: Given an object, returns an array of key/value pairs\n *\n * @example\n * ```\n *\n * pairs({ foo: \"FOO\", bar: \"BAR }) // [ [ \"foo\", \"FOO\" ], [ \"bar\": \"BAR\" ] ]\n * ```\n */\nexport const pairs = (obj: Obj) =>\n    Object.keys(obj).map(key => [ key, obj[key]] );\n\n/**\n * Given two or more parallel arrays, returns an array of tuples where\n * each tuple is composed of [ a[i], b[i], ... z[i] ]\n *\n * @example\n * ```\n *\n * let foo = [ 0, 2, 4, 6 ];\n * let bar = [ 1, 3, 5, 7 ];\n * let baz = [ 10, 30, 50, 70 ];\n * arrayTuples(foo, bar);       // [ [0, 1], [2, 3], [4, 5], [6, 7] ]\n * arrayTuples(foo, bar, baz);  // [ [0, 1, 10], [2, 3, 30], [4, 5, 50], [6, 7, 70] ]\n * ```\n */\nexport function arrayTuples(...args: any[]): any[] {\n  if (args.length === 0) return [];\n  let maxArrayLen = args.reduce((min, arr) => Math.min(arr.length, min), 9007199254740991); // aka 2^53  1 aka Number.MAX_SAFE_INTEGER\n\n  let i, result = [];\n\n  for (i = 0; i < maxArrayLen; i++) {\n    // This is a hot function\n    // Unroll when there are 1-4 arguments\n    switch (args.length) {\n      case 1: result.push([args[0][i]]); break;\n      case 2: result.push([args[0][i], args[1][i]]); break;\n      case 3: result.push([args[0][i], args[1][i], args[2][i]]); break;\n      case 4: result.push([args[0][i], args[1][i], args[2][i], args[3][i]]); break;\n      default:\n        result.push(args.map(array => array[i])); break;\n    }\n  }\n\n  return result;\n}\n\n/**\n * Reduce function which builds an object from an array of [key, value] pairs.\n *\n * Each iteration sets the key/val pair on the memo object, then returns the memo for the next iteration.\n *\n * Each keyValueTuple should be an array with values [ key: string, value: any ]\n *\n * @example\n * ```\n *\n * var pairs = [ [\"fookey\", \"fooval\"], [\"barkey\", \"barval\"] ]\n *\n * var pairsToObj = pairs.reduce((memo, pair) => applyPairs(memo, pair), {})\n * // pairsToObj == { fookey: \"fooval\", barkey: \"barval\" }\n *\n * // Or, more simply:\n * var pairsToObj = pairs.reduce(applyPairs, {})\n * // pairsToObj == { fookey: \"fooval\", barkey: \"barval\" }\n * ```\n */\nexport function applyPairs(memo: TypedMap<any>, keyValTuple: any[]) {\n  let key: string, value: any;\n  if (isArray(keyValTuple)) [key, value] = keyValTuple;\n  if (!isString(key)) throw new Error(\"invalid parameters to applyPairs\");\n  memo[key] = value;\n  return memo;\n}\n\n/** Get the last element of an array */\nexport function tail<T>(arr: T[]): T {\n  return arr.length && arr[arr.length - 1] || undefined;\n}\n\n/**\n * shallow copy from src to dest\n *\n * note: This is a shallow copy, while angular.copy is a deep copy.\n * ui-router uses `copy` only to make copies of state parameters.\n */\nfunction _copy(src: Obj, dest: Obj) {\n  if (dest) Object.keys(dest).forEach(key => delete dest[key]);\n  if (!dest) dest = {};\n  return extend(dest, src);\n}\n\n/** Naive forEach implementation works with Objects or Arrays */\nfunction _forEach(obj: (any[]|any), cb: (el, idx?) => void, _this: Obj) {\n  if (isArray(obj)) return obj.forEach(cb, _this);\n  Object.keys(obj).forEach(key => cb(obj[key], key));\n}\n\n/** Like Object.assign() */\nexport function _extend(toObj: Obj, ...fromObjs: Obj[]): any;\nexport function _extend(toObj: Obj): any {\n  for (let i = 1; i < arguments.length; i++) {\n    let obj = arguments[i];\n    if (!obj) continue;\n    let keys = Object.keys(obj);\n\n    for (let j = 0; j < keys.length; j++) {\n      toObj[keys[j]] = obj[keys[j]];\n    }\n  }\n\n  return toObj;\n}\n\nfunction _equals(o1: any, o2: any): boolean {\n  if (o1 === o2) return true;\n  if (o1 === null || o2 === null) return false;\n  if (o1 !== o1 && o2 !== o2) return true; // NaN === NaN\n  let t1 = typeof o1, t2 = typeof o2;\n  if (t1 !== t2 || t1 !== 'object') return false;\n\n  const tup = [o1, o2];\n  if (all(isArray)(tup)) return _arraysEq(o1, o2);\n  if (all(isDate)(tup)) return o1.getTime() === o2.getTime();\n  if (all(isRegExp)(tup)) return o1.toString() === o2.toString();\n  if (all(isFunction)(tup)) return true; // meh\n\n  let predicates = [isFunction, isArray, isDate, isRegExp];\n  if (predicates.map(any).reduce((b, fn) => b || !!fn(tup), false)) return false;\n\n  let key: string, keys: { [i: string]: boolean } = {};\n  for (key in o1) {\n    if (!_equals(o1[key], o2[key])) return false;\n    keys[key] = true;\n  }\n  for (key in o2) {\n    if (!keys[key]) return false;\n  }\n\n  return true;\n}\n\nfunction _arraysEq(a1: any[], a2: any[]) {\n  if (a1.length !== a2.length) return false;\n  return arrayTuples(a1, a2).reduce((b, t) => b && _equals(t[0], t[1]), true);\n}\n\n// issue #2676\nexport const silenceUncaughtInPromise = (promise: Promise<any>) =>\n    promise.catch(e => 0) && promise;\nexport const silentRejection = (error: any) =>\n    silenceUncaughtInPromise(services.$q.reject(error));\n","/**\n * # Transition tracing (debug)\n *\n * Enable transition tracing to print transition information to the console,\n * in order to help debug your application.\n * Tracing logs detailed information about each Transition to your console.\n *\n * To enable tracing, import the [[Trace]] singleton and enable one or more categories.\n *\n * ### ES6\n * ```js\n * import {trace} from \"ui-router-ng2\"; // or \"angular-ui-router\"\n * trace.enable(1, 5); // TRANSITION and VIEWCONFIG\n * ```\n *\n * ### CJS\n * ```js\n * let trace = require(\"angular-ui-router\").trace; // or \"ui-router-ng2\"\n * trace.enable(\"TRANSITION\", \"VIEWCONFIG\");\n * ```\n *\n * ### Globals\n * ```js\n * let trace = window[\"angular-ui-router\"].trace; // or \"ui-router-ng2\"\n * trace.enable(); // Trace everything (very verbose)\n * ```\n *\n * ### Angular 1:\n * ```js\n * app.run($trace => $trace.enable());\n * ```\n *\n * @coreapi\n * @module trace\n */ /** for typedoc */\nimport {parse} from \"../common/hof\";\nimport {isNumber} from \"../common/predicates\";\nimport {Transition}  from \"../transition/transition\";\nimport {ActiveUIView, ViewConfig, ViewContext}  from \"../view/interface\";\nimport {stringify, functionToString, maxLength, padString} from \"./strings\";\nimport {Resolvable} from \"../resolve/resolvable\";\nimport {PathNode} from \"../path/pathNode\";\nimport {PolicyWhen} from \"../resolve/interface\";\nimport {TransitionHook} from \"../transition/transitionHook\";\nimport {HookResult} from \"../transition/interface\";\nimport {StateObject} from \"../state/stateObject\";\n\n/** @hidden */\nfunction uiViewString (uiview: ActiveUIView) {\n    if (!uiview) return 'ui-view (defunct)';\n    const state = uiview.creationContext ? uiview.creationContext.name || '(root)' : '(none)';\n    return `[ui-view#${uiview.id} ${uiview.$type}:${uiview.fqn} (${uiview.name}@${state})]`;\n}\n\n/** @hidden */\nconst viewConfigString = (viewConfig: ViewConfig) => {\n  let view = viewConfig.viewDecl;\n  const state = view.$context.name || '(root)';\n  return `[View#${viewConfig.$id} from '${state}' state]: target ui-view: '${view.$uiViewName}@${view.$uiViewContextAnchor}'`;\n};\n\n/** @hidden */\nfunction normalizedCat(input: Category|string): string {\n  return isNumber(input) ? Category[input] : Category[Category[input]];\n}\n\n\n/**\n * Trace categories Enum\n *\n * Enable or disable a category using [[Trace.enable]] or [[Trace.disable]]\n *\n * `trace.enable(Category.TRANSITION)`\n *\n * These can also be provided using a matching string, or position ordinal\n *\n * `trace.enable(\"TRANSITION\")`\n *\n * `trace.enable(1)`\n */\nexport enum Category {\n  RESOLVE, TRANSITION, HOOK, UIVIEW, VIEWCONFIG,\n}\n\n/** @hidden */ const _tid = parse(\"$id\");\n/** @hidden */ const _rid = parse(\"router.$id\");\n/** @hidden */ const transLbl = (trans) => `Transition #${_tid(trans)}-${_rid(trans)}`;\n\n/**\n * Prints UI-Router Transition trace information to the console.\n */\nexport class Trace {\n  /** @hidden */\n  approximateDigests: number;\n\n  /** @hidden */\n  constructor() {\n    this.approximateDigests = 0;\n  }\n\n  /** @hidden */\n  private _enabled: { [key: string]: boolean } = {};\n\n   /** @hidden */\n  private _set(enabled: boolean, categories: Category[]) {\n    if (!categories.length) {\n      categories = <any> Object.keys(Category)\n          .map(k => parseInt(k, 10))\n          .filter(k => !isNaN(k))\n          .map(key => Category[key]);\n    }\n    categories.map(normalizedCat).forEach(category => this._enabled[category] = enabled);\n  }\n\n  /**\n   * Enables a trace [[Category]]\n   *\n   * ```js\n   * trace.enable(\"TRANSITION\");\n   * ```\n   *\n   * @param categories categories to enable. If `categories` is omitted, all categories are enabled.\n   *        Also takes strings (category name) or ordinal (category position)\n   */\n  enable(...categories: (Category|string|number)[]);\n  enable(...categories: any[]) { this._set(true, categories); }\n  /**\n   * Disables a trace [[Category]]\n   *\n   * ```js\n   * trace.disable(\"VIEWCONFIG\");\n   * ```\n   *\n   * @param categories categories to disable. If `categories` is omitted, all categories are disabled.\n   *        Also takes strings (category name) or ordinal (category position)\n   */\n  disable(...categories: (Category|string|number)[]);\n  disable(...categories: any[]) { this._set(false, categories); }\n\n  /**\n   * Retrieves the enabled stateus of a [[Category]]\n   *\n   * ```js\n   * trace.enabled(\"VIEWCONFIG\"); // true or false\n   * ```\n   *\n   * @returns boolean true if the category is enabled\n   */\n  enabled(category: (Category|string|number)): boolean {\n    return !!this._enabled[normalizedCat(category)];\n  }\n\n  /** @internalapi called by ui-router code */\n  traceTransitionStart(trans: Transition) {\n    if (!this.enabled(Category.TRANSITION)) return;\n    console.log(`${transLbl(trans)}: Started  -> ${stringify(trans)}`);\n  }\n\n  /** @internalapi called by ui-router code */\n  traceTransitionIgnored(trans: Transition) {\n    if (!this.enabled(Category.TRANSITION)) return;\n    console.log(`${transLbl(trans)}: Ignored  <> ${stringify(trans)}`);\n  }\n\n  /** @internalapi called by ui-router code */\n  traceHookInvocation(step: TransitionHook, trans: Transition, options: any) {\n    if (!this.enabled(Category.HOOK)) return;\n    let event = parse(\"traceData.hookType\")(options) || \"internal\",\n        context = parse(\"traceData.context.state.name\")(options) || parse(\"traceData.context\")(options) || \"unknown\",\n        name = functionToString((step as any).registeredHook.callback);\n    console.log(`${transLbl(trans)}:   Hook -> ${event} context: ${context}, ${maxLength(200, name)}`);\n  }\n\n  /** @internalapi called by ui-router code */\n  traceHookResult(hookResult: HookResult, trans: Transition, transitionOptions: any) {\n    if (!this.enabled(Category.HOOK)) return;\n    console.log(`${transLbl(trans)}:   <- Hook returned: ${maxLength(200, stringify(hookResult))}`);\n  }\n\n  /** @internalapi called by ui-router code */\n  traceResolvePath(path: PathNode[], when: PolicyWhen, trans?: Transition) {\n    if (!this.enabled(Category.RESOLVE)) return;\n    console.log(`${transLbl(trans)}:         Resolving ${path} (${when})`);\n  }\n\n  /** @internalapi called by ui-router code */\n  traceResolvableResolved(resolvable: Resolvable, trans?: Transition) {\n    if (!this.enabled(Category.RESOLVE)) return;\n    console.log(`${transLbl(trans)}:               <- Resolved  ${resolvable} to: ${maxLength(200, stringify(resolvable.data))}`);\n  }\n\n  /** @internalapi called by ui-router code */\n  traceError(reason: any, trans: Transition) {\n    if (!this.enabled(Category.TRANSITION)) return;\n    console.log(`${transLbl(trans)}: <- Rejected ${stringify(trans)}, reason: ${reason}`);\n  }\n\n  /** @internalapi called by ui-router code */\n  traceSuccess(finalState: StateObject, trans: Transition) {\n    if (!this.enabled(Category.TRANSITION)) return;\n    console.log(`${transLbl(trans)}: <- Success  ${stringify(trans)}, final state: ${finalState.name}`);\n  }\n\n  /** @internalapi called by ui-router code */\n  traceUIViewEvent(event: string, viewData: ActiveUIView, extra = \"\") {\n    if (!this.enabled(Category.UIVIEW)) return;\n    console.log(`ui-view: ${padString(30, event)} ${uiViewString(viewData)}${extra}`);\n  }\n\n  /** @internalapi called by ui-router code */\n  traceUIViewConfigUpdated(viewData: ActiveUIView, context: ViewContext) {\n    if (!this.enabled(Category.UIVIEW)) return;\n    this.traceUIViewEvent(\"Updating\", viewData, ` with ViewConfig from context='${context}'`);\n  }\n\n  /** @internalapi called by ui-router code */\n  traceUIViewFill(viewData: ActiveUIView, html: string) {\n    if (!this.enabled(Category.UIVIEW)) return;\n    this.traceUIViewEvent(\"Fill\", viewData, ` with: ${maxLength(200, html)}`);\n  }\n\n  /** @internalapi called by ui-router code */\n  traceViewSync(pairs: any[]) {\n    if (!this.enabled(Category.VIEWCONFIG)) return;\n    const mapping = pairs.map(([ uiViewData, config ]) => {\n      const uiView = `${uiViewData.$type}:${uiViewData.fqn}`;\n      const view = config && `${config.viewDecl.$context.name}: ${config.viewDecl.$name} (${config.viewDecl.$type})`;\n\n      return { 'ui-view fqn': uiView, 'state: view name': view };\n    }).sort((a, b) => a['ui-view fqn'].localeCompare(b['ui-view fqn']));\n\n    console.table(mapping);\n  }\n\n  /** @internalapi called by ui-router code */\n  traceViewServiceEvent(event: string, viewConfig: ViewConfig) {\n    if (!this.enabled(Category.VIEWCONFIG)) return;\n    console.log(`VIEWCONFIG: ${event} ${viewConfigString(viewConfig)}`);\n  }\n\n  /** @internalapi called by ui-router code */\n  traceViewServiceUIViewEvent(event: string, viewData: ActiveUIView) {\n    if (!this.enabled(Category.VIEWCONFIG)) return;\n    console.log(`VIEWCONFIG: ${event} ${uiViewString(viewData)}`);\n  }\n}\n\n/**\n * The [[Trace]] singleton\n *\n * #### Example:\n * ```js\n * import {trace} from \"angular-ui-router\";\n * trace.enable(1, 5);\n * ```\n */\nlet trace = new Trace();\nexport {trace};\n","/**\n * @coreapi\n * @module transition\n */ /** for typedoc */\nimport { extend, removeFrom, tail, values, identity, map } from \"../common/common\";\nimport {isString, isFunction} from \"../common/predicates\";\nimport {PathNode} from \"../path/pathNode\";\nimport {\n    TransitionStateHookFn, TransitionHookFn, TransitionHookPhase, TransitionHookScope, IHookRegistry, PathType\n} from \"./interface\"; // has or is using\n\nimport {\n    HookRegOptions, HookMatchCriteria, TreeChanges,\n    HookMatchCriterion, IMatchingNodes, HookFn\n} from \"./interface\";\nimport {Glob} from \"../common/glob\";\nimport {StateObject} from \"../state/stateObject\";\nimport {TransitionEventType} from \"./transitionEventType\";\nimport { TransitionService } from \"./transitionService\";\n\n/**\n * Determines if the given state matches the matchCriteria\n *\n * @hidden\n *\n * @param state a State Object to test against\n * @param criterion\n * - If a string, matchState uses the string as a glob-matcher against the state name\n * - If an array (of strings), matchState uses each string in the array as a glob-matchers against the state name\n *   and returns a positive match if any of the globs match.\n * - If a function, matchState calls the function with the state and returns true if the function's result is truthy.\n * @returns {boolean}\n */\nexport function matchState(state: StateObject, criterion: HookMatchCriterion) {\n  let toMatch = isString(criterion) ? [criterion] : criterion;\n\n  function matchGlobs(_state: StateObject) {\n    let globStrings = <string[]> toMatch;\n    for (let i = 0; i < globStrings.length; i++) {\n      let glob = new Glob(globStrings[i]);\n\n      if ((glob && glob.matches(_state.name)) || (!glob && globStrings[i] === _state.name)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  let matchFn = <any> (isFunction(toMatch) ? toMatch : matchGlobs);\n  return !!matchFn(state);\n}\n\n/**\n * @internalapi\n * The registration data for a registered transition hook\n */\nexport class RegisteredHook {\n  priority: number;\n  bind: any;\n  _deregistered: boolean;\n\n  constructor(public tranSvc: TransitionService,\n              public eventType: TransitionEventType,\n              public callback: HookFn,\n              public matchCriteria: HookMatchCriteria,\n              options: HookRegOptions = {} as any) {\n    this.priority = options.priority || 0;\n    this.bind = options.bind || null;\n    this._deregistered = false;\n  }\n\n  /**\n   * Gets the matching [[PathNode]]s\n   *\n   * Given an array of [[PathNode]]s, and a [[HookMatchCriterion]], returns an array containing\n   * the [[PathNode]]s that the criteria matches, or `null` if there were no matching nodes.\n   *\n   * Returning `null` is significant to distinguish between the default\n   * \"match-all criterion value\" of `true` compared to a `() => true` function,\n   * when the nodes is an empty array.\n   *\n   * This is useful to allow a transition match criteria of `entering: true`\n   * to still match a transition, even when `entering === []`.  Contrast that\n   * with `entering: (state) => true` which only matches when a state is actually\n   * being entered.\n   */\n  private _matchingNodes(nodes: PathNode[], criterion: HookMatchCriterion): PathNode[] {\n    if (criterion === true) return nodes;\n    let matching = nodes.filter(node => matchState(node.state, criterion));\n    return matching.length ? matching : null;\n  }\n\n  /**\n   * Gets the default match criteria (all `true`)\n   *\n   * Returns an object which has all the criteria match paths as keys and `true` as values, i.e.:\n   *\n   * ```js\n   * {\n   *   to: true,\n   *   from: true,\n   *   entering: true,\n   *   exiting: true,\n   *   retained: true,\n   * }\n   */\n  private _getDefaultMatchCriteria(): HookMatchCriteria {\n    return map(this.tranSvc._pluginapi._getPathTypes(), () => true);\n  }\n\n  /**\n   * Gets matching nodes as [[IMatchingNodes]]\n   *\n   * Create a IMatchingNodes object from the TransitionHookTypes that is roughly equivalent to:\n   *\n   * ```js\n   * let matches: IMatchingNodes = {\n   *   to:       _matchingNodes([tail(treeChanges.to)],   mc.to),\n   *   from:     _matchingNodes([tail(treeChanges.from)], mc.from),\n   *   exiting:  _matchingNodes(treeChanges.exiting,      mc.exiting),\n   *   retained: _matchingNodes(treeChanges.retained,     mc.retained),\n   *   entering: _matchingNodes(treeChanges.entering,     mc.entering),\n   * };\n   * ```\n   */\n  private _getMatchingNodes(treeChanges: TreeChanges): IMatchingNodes {\n    let criteria = extend(this._getDefaultMatchCriteria(), this.matchCriteria);\n    let paths: PathType[] = values(this.tranSvc._pluginapi._getPathTypes());\n\n    return paths.reduce((mn: IMatchingNodes, pathtype: PathType) => {\n      // STATE scope criteria matches against every node in the path.\n      // TRANSITION scope criteria matches against only the last node in the path\n      let isStateHook = pathtype.scope === TransitionHookScope.STATE;\n      let path = treeChanges[pathtype.name] || [];\n      let nodes: PathNode[] = isStateHook ? path : [tail(path)];\n\n      mn[pathtype.name] = this._matchingNodes(nodes, criteria[pathtype.name]);\n      return mn;\n    }, {} as IMatchingNodes);\n  }\n\n  /**\n   * Determines if this hook's [[matchCriteria]] match the given [[TreeChanges]]\n   *\n   * @returns an IMatchingNodes object, or null. If an IMatchingNodes object is returned, its values\n   * are the matching [[PathNode]]s for each [[HookMatchCriterion]] (to, from, exiting, retained, entering)\n   */\n  matches(treeChanges: TreeChanges): IMatchingNodes {\n    let matches = this._getMatchingNodes(treeChanges);\n\n    // Check if all the criteria matched the TreeChanges object\n    let allMatched = values(matches).every(identity);\n    return allMatched ? matches : null;\n  }\n}\n\n/** @hidden Return a registration function of the requested type. */\nexport function makeEvent(registry: IHookRegistry, transitionService: TransitionService, eventType: TransitionEventType) {\n  // Create the object which holds the registered transition hooks.\n  let _registeredHooks = registry._registeredHooks = (registry._registeredHooks || {});\n  let hooks = _registeredHooks[eventType.name] = [];\n\n  // Create hook registration function on the IHookRegistry for the event\n  registry[eventType.name] = hookRegistrationFn;\n\n  function hookRegistrationFn(matchObject, callback, options = {}) {\n    let registeredHook = new RegisteredHook(transitionService, eventType, callback, matchObject, options);\n    hooks.push(registeredHook);\n\n    return function deregisterEventHook() {\n      registeredHook._deregistered = true;\n      removeFrom(hooks)(registeredHook);\n    };\n  }\n\n  return hookRegistrationFn;\n}","/**\n * @coreapi\n * @module transition\n */ /** for typedoc */\n\nimport {extend, tail, assertPredicate, unnestR, identity} from \"../common/common\";\nimport {isArray} from \"../common/predicates\";\n\nimport {\n    TransitionOptions, TransitionHookOptions, IHookRegistry, TreeChanges, IMatchingNodes,\n    TransitionHookPhase, TransitionHookScope\n} from \"./interface\";\n\nimport {Transition} from \"./transition\";\nimport {TransitionHook} from \"./transitionHook\";\nimport {StateObject} from \"../state/stateObject\";\nimport {PathNode} from \"../path/pathNode\";\nimport {TransitionService} from \"./transitionService\";\nimport {TransitionEventType} from \"./transitionEventType\";\nimport {RegisteredHook} from \"./hookRegistry\";\n\n/**\n * This class returns applicable TransitionHooks for a specific Transition instance.\n *\n * Hooks ([[RegisteredHook]]) may be registered globally, e.g., $transitions.onEnter(...), or locally, e.g.\n * myTransition.onEnter(...).  The HookBuilder finds matching RegisteredHooks (where the match criteria is\n * determined by the type of hook)\n *\n * The HookBuilder also converts RegisteredHooks objects to TransitionHook objects, which are used to run a Transition.\n *\n * The HookBuilder constructor is given the $transitions service and a Transition instance.  Thus, a HookBuilder\n * instance may only be used for one specific Transition object. (side note: the _treeChanges accessor is private\n * in the Transition class, so we must also provide the Transition's _treeChanges)\n *\n */\nexport class HookBuilder {\n  constructor(private transition: Transition) { }\n\n  buildHooksForPhase(phase: TransitionHookPhase): TransitionHook[] {\n    let $transitions = this.transition.router.transitionService;\n    return $transitions._pluginapi._getEvents(phase)\n        .map(type => this.buildHooks(type))\n        .reduce(unnestR, [])\n        .filter(identity);\n  }\n\n  /**\n   * Returns an array of newly built TransitionHook objects.\n   *\n   * - Finds all RegisteredHooks registered for the given `hookType` which matched the transition's [[TreeChanges]].\n   * - Finds [[PathNode]] (or `PathNode[]`) to use as the TransitionHook context(s)\n   * - For each of the [[PathNode]]s, creates a TransitionHook\n   *\n   * @param hookType the type of the hook registration function, e.g., 'onEnter', 'onFinish'.\n   */\n  buildHooks(hookType: TransitionEventType): TransitionHook[] {\n    let transition = this.transition;\n    let treeChanges = transition.treeChanges();\n\n    // Find all the matching registered hooks for a given hook type\n    let matchingHooks = this.getMatchingHooks(hookType, treeChanges);\n    if (!matchingHooks) return [];\n\n    let baseHookOptions = <TransitionHookOptions> {\n      transition: transition,\n      current: transition.options().current\n    };\n\n    const makeTransitionHooks = (hook: RegisteredHook) => {\n       // Fetch the Nodes that caused this hook to match.\n       let matches: IMatchingNodes = hook.matches(treeChanges);\n       // Select the PathNode[] that will be used as TransitionHook context objects\n       let matchingNodes: PathNode[] = matches[hookType.criteriaMatchPath.name];\n\n       // Return an array of HookTuples\n       return matchingNodes.map(node => {\n         let _options = extend({\n           bind: hook.bind,\n           traceData: { hookType: hookType.name, context: node }\n         }, baseHookOptions);\n\n         let state = hookType.criteriaMatchPath.scope === TransitionHookScope.STATE ? node.state.self : null;\n         let transitionHook = new TransitionHook(transition, state, hook, _options);\n         return <HookTuple> { hook, node, transitionHook };\n       });\n    };\n\n    return matchingHooks.map(makeTransitionHooks)\n        .reduce(unnestR, [])\n        .sort(tupleSort(hookType.reverseSort))\n        .map(tuple => tuple.transitionHook);\n  }\n\n  /**\n   * Finds all RegisteredHooks from:\n   * - The Transition object instance hook registry\n   * - The TransitionService ($transitions) global hook registry\n   *\n   * which matched:\n   * - the eventType\n   * - the matchCriteria (to, from, exiting, retained, entering)\n   *\n   * @returns an array of matched [[RegisteredHook]]s\n   */\n  public getMatchingHooks(hookType: TransitionEventType, treeChanges: TreeChanges): RegisteredHook[] {\n    let isCreate = hookType.hookPhase === TransitionHookPhase.CREATE;\n\n    // Instance and Global hook registries\n    let $transitions = this.transition.router.transitionService;\n    let registries = isCreate ? [ $transitions ] : [ this.transition, $transitions ];\n\n    return registries.map((reg: IHookRegistry) => reg.getHooks(hookType.name))    // Get named hooks from registries\n        .filter(assertPredicate(isArray, `broken event named: ${hookType.name}`)) // Sanity check\n        .reduce(unnestR, [])                                                      // Un-nest RegisteredHook[][] to RegisteredHook[] array\n        .filter(hook => hook.matches(treeChanges));                               // Only those satisfying matchCriteria\n  }\n}\n\ninterface HookTuple { hook: RegisteredHook, node: PathNode, transitionHook: TransitionHook }\n\n/**\n * A factory for a sort function for HookTuples.\n *\n * The sort function first compares the PathNode depth (how deep in the state tree a node is), then compares\n * the EventHook priority.\n *\n * @param reverseDepthSort a boolean, when true, reverses the sort order for the node depth\n * @returns a tuple sort function\n */\nfunction tupleSort(reverseDepthSort = false) {\n  return function nodeDepthThenPriority(l: HookTuple, r: HookTuple): number {\n    let factor = reverseDepthSort ? -1 : 1;\n    let depthDelta = (l.node.state.path.length - r.node.state.path.length) * factor;\n    return depthDelta !== 0 ? depthDelta : r.hook.priority - l.hook.priority;\n  }\n}","/**\n * @coreapi\n * @module params\n */\n/** */\nimport {extend, filter, map} from \"../common/common\";\nimport {isArray, isDefined} from \"../common/predicates\";\nimport {ParamTypeDefinition} from \"./interface\";\n\n/**\n * An internal class which implements [[ParamTypeDefinition]].\n *\n * A [[ParamTypeDefinition]] is a plain javascript object used to register custom parameter types.\n * When a param type definition is registered, an instance of this class is created internally.\n *\n * This class has naive implementations for all the [[ParamTypeDefinition]] methods.\n *\n * Used by [[UrlMatcher]] when matching or formatting URLs, or comparing and validating parameter values.\n *\n * #### Example:\n * ```js\n * var paramTypeDef = {\n *   decode: function(val) { return parseInt(val, 10); },\n *   encode: function(val) { return val && val.toString(); },\n *   equals: function(a, b) { return this.is(a) && a === b; },\n *   is: function(val) { return angular.isNumber(val) && isFinite(val) && val % 1 === 0; },\n *   pattern: /\\d+/\n * }\n *\n * var paramType = new ParamType(paramTypeDef);\n * ```\n * @internalapi\n */\nexport class ParamType implements ParamTypeDefinition {\n  /** @inheritdoc */\n  pattern: RegExp = /.*/;\n  /** The name/id of the parameter type */\n  name: string;\n  /** @inheritdoc */\n  raw: boolean;\n  /** @inheritdoc */\n  dynamic: boolean;\n  /** @inheritdoc */\n  inherit = true;\n\n  /**\n   * @param def  A configuration object which contains the custom type definition.  The object's\n   *        properties will override the default methods and/or pattern in `ParamType`'s public interface.\n   * @returns a new ParamType object\n   */\n  constructor(def: ParamTypeDefinition) {\n    extend(this, def);\n  }\n\n\n  // consider these four methods to be \"abstract methods\" that should be overridden\n  /** @inheritdoc */\n  is(val: any, key?: string): boolean { return true; }\n  /** @inheritdoc */\n  encode(val: any, key?: string): (string|string[]) { return val; }\n  /** @inheritdoc */\n  decode(val: string, key?: string): any { return val; }\n  /** @inheritdoc */\n  equals(a: any, b: any): boolean { return a == b; }\n\n\n  $subPattern() {\n    let sub = this.pattern.toString();\n    return sub.substr(1, sub.length - 2);\n  }\n\n  toString() {\n    return `{ParamType:${this.name}}`;\n  }\n\n  /** Given an encoded string, or a decoded object, returns a decoded object */\n  $normalize(val: any) {\n    return this.is(val) ? val : this.decode(val);\n  }\n\n  /**\n   * Wraps an existing custom ParamType as an array of ParamType, depending on 'mode'.\n   * e.g.:\n   * - urlmatcher pattern \"/path?{queryParam[]:int}\"\n   * - url: \"/path?queryParam=1&queryParam=2\n   * - $stateParams.queryParam will be [1, 2]\n   * if `mode` is \"auto\", then\n   * - url: \"/path?queryParam=1 will create $stateParams.queryParam: 1\n   * - url: \"/path?queryParam=1&queryParam=2 will create $stateParams.queryParam: [1, 2]\n   */\n  $asArray(mode: (boolean|\"auto\"), isSearch: boolean) {\n    if (!mode) return this;\n    if (mode === \"auto\" && !isSearch) throw new Error(\"'auto' array mode is for query parameters only\");\n    return new (<any> ArrayType)(this, mode);\n  }\n}\n\n/**\n * Wraps up a `ParamType` object to handle array values.\n * @internalapi\n */\nfunction ArrayType(type: ParamType, mode: (boolean|\"auto\")) {\n  // Wrap non-array value as array\n  function arrayWrap(val: any): any[] {\n    return isArray(val) ? val : (isDefined(val) ? [ val ] : []);\n  }\n\n  // Unwrap array value for \"auto\" mode. Return undefined for empty array.\n  function arrayUnwrap(val: any) {\n    switch (val.length) {\n      case 0: return undefined;\n      case 1: return mode === \"auto\" ? val[0] : val;\n      default: return val;\n    }\n  }\n\n  // Wraps type (.is/.encode/.decode) functions to operate on each value of an array\n  function arrayHandler(callback: (x: any) => any, allTruthyMode?: boolean) {\n    return function handleArray(val: any) {\n      if (isArray(val) && val.length === 0) return val;\n      let arr = arrayWrap(val);\n      let result = map(arr, callback);\n      return (allTruthyMode === true) ? filter(result, x => !x).length === 0 : arrayUnwrap(result);\n    };\n  }\n\n  // Wraps type (.equals) functions to operate on each value of an array\n  function arrayEqualsHandler(callback: (l: any, r: any) => boolean) {\n    return function handleArray(val1: any, val2: any) {\n      let left = arrayWrap(val1), right = arrayWrap(val2);\n      if (left.length !== right.length) return false;\n      for (let i = 0; i < left.length; i++) {\n        if (!callback(left[i], right[i])) return false;\n      }\n      return true;\n    };\n  }\n\n  ['encode', 'decode', 'equals', '$normalize'].forEach(name => {\n    var paramTypeFn = type[name].bind(type);\n    var wrapperFn: Function = name === 'equals' ? arrayEqualsHandler : arrayHandler;\n    this[name] = wrapperFn(paramTypeFn);\n  });\n\n  extend(this, {\n    dynamic: type.dynamic,\n    name: type.name,\n    pattern: type.pattern,\n    inherit: type.inherit,\n    is: arrayHandler(type.is.bind(type), true),\n    $arrayMode: mode\n  });\n}\n","/**\n * @coreapi\n * @module params\n */ /** for typedoc */\nimport { extend, filter, map, allTrueR } from \"../common/common\";\nimport { prop } from \"../common/hof\";\nimport { isInjectable, isDefined, isString, isArray, isUndefined } from \"../common/predicates\";\nimport { RawParams, ParamDeclaration } from \"../params/interface\";\nimport { services } from \"../common/coreservices\";\nimport { ParamType } from \"./paramType\";\nimport { ParamTypes } from \"./paramTypes\";\nimport { UrlMatcherFactory } from \"../url/urlMatcherFactory\";\n\n/** @hidden */ let hasOwn = Object.prototype.hasOwnProperty;\n/** @hidden */ let isShorthand = (cfg: ParamDeclaration) =>\n    [\"value\", \"type\", \"squash\", \"array\", \"dynamic\"].filter(hasOwn.bind(cfg || {})).length === 0;\n\n/** @internalapi */\nexport enum DefType {\n  PATH,\n  SEARCH,\n  CONFIG,\n}\n\n/** @hidden */\nfunction unwrapShorthand(cfg: ParamDeclaration): ParamDeclaration {\n  cfg = isShorthand(cfg) && { value: cfg } as any || cfg;\n\n  getStaticDefaultValue['__cacheable'] = true;\n  function getStaticDefaultValue() {\n    return cfg.value;\n  }\n\n  return extend(cfg, {\n    $$fn: isInjectable(cfg.value) ? cfg.value : getStaticDefaultValue,\n  });\n}\n\n/** @hidden */\nfunction getType(cfg: ParamDeclaration, urlType: ParamType, location: DefType, id: string, paramTypes: ParamTypes) {\n  if (cfg.type && urlType && urlType.name !== 'string') throw new Error(`Param '${id}' has two type configurations.`);\n  if (cfg.type && urlType && urlType.name === 'string' && paramTypes.type(cfg.type as string)) return paramTypes.type(cfg.type as string);\n  if (urlType) return urlType;\n  if (!cfg.type) {\n    let type = location === DefType.CONFIG ? \"any\" :\n        location === DefType.PATH ? \"path\" :\n        location === DefType.SEARCH ? \"query\" : \"string\";\n    return paramTypes.type(type);\n  }\n  return cfg.type instanceof ParamType ? cfg.type : paramTypes.type(cfg.type as string);\n}\n\n/**\n * @internalapi\n * returns false, true, or the squash value to indicate the \"default parameter url squash policy\".\n */\nfunction getSquashPolicy(config: ParamDeclaration, isOptional: boolean, defaultPolicy: (boolean|string)) {\n  let squash = config.squash;\n  if (!isOptional || squash === false) return false;\n  if (!isDefined(squash) || squash == null) return defaultPolicy;\n  if (squash === true || isString(squash)) return squash;\n  throw new Error(`Invalid squash policy: '${squash}'. Valid policies: false, true, or arbitrary string`);\n}\n\n/** @internalapi */\nfunction getReplace(config: ParamDeclaration, arrayMode: boolean, isOptional: boolean, squash: (string|boolean)) {\n  let replace: any, configuredKeys: string[], defaultPolicy = [\n    {from: \"\", to: (isOptional || arrayMode ? undefined : \"\")},\n    {from: null, to: (isOptional || arrayMode ? undefined : \"\")},\n  ];\n  replace = isArray(config.replace) ? config.replace : [];\n  if (isString(squash)) replace.push({ from: squash, to: undefined });\n  configuredKeys = map(replace, prop(\"from\"));\n  return filter(defaultPolicy, item => configuredKeys.indexOf(item.from) === -1).concat(replace);\n}\n\n\n/** @internalapi */\nexport class Param {\n  id: string;\n  type: ParamType;\n  location: DefType;\n  isOptional: boolean;\n  dynamic: boolean;\n  raw: boolean;\n  squash: (boolean|string);\n  replace: [{ to: any, from: any }];\n  inherit: boolean;\n  array: boolean;\n  config: any;\n  /** Cache the default value if it is a static value */\n  _defaultValueCache: {\n    defaultValue: any,\n  };\n\n  constructor(id: string, type: ParamType, config: ParamDeclaration, location: DefType, urlMatcherFactory: UrlMatcherFactory) {\n    config = unwrapShorthand(config);\n    type = getType(config, type, location, id, urlMatcherFactory.paramTypes);\n    let arrayMode = getArrayMode();\n    type = arrayMode ? type.$asArray(arrayMode, location === DefType.SEARCH) : type;\n    let isOptional = config.value !== undefined || location === DefType.SEARCH;\n    let dynamic = isDefined(config.dynamic) ? !!config.dynamic : !!type.dynamic;\n    let raw = isDefined(config.raw) ? !!config.raw : !!type.raw;\n    let squash = getSquashPolicy(config, isOptional, urlMatcherFactory.defaultSquashPolicy());\n    let replace = getReplace(config, arrayMode, isOptional, squash);\n    let inherit = isDefined(config.inherit) ? !!config.inherit : !!type.inherit;\n\n    // array config: param name (param[]) overrides default settings.  explicit config overrides param name.\n    function getArrayMode() {\n      let arrayDefaults = { array: (location === DefType.SEARCH ? \"auto\" : false) };\n      let arrayParamNomenclature = id.match(/\\[\\]$/) ? { array: true } : {};\n      return extend(arrayDefaults, arrayParamNomenclature, config).array;\n    }\n\n    extend(this, {id, type, location, isOptional, dynamic, raw, squash, replace, inherit, array: arrayMode, config });\n  }\n\n  isDefaultValue(value: any): boolean {\n    return this.isOptional && this.type.equals(this.value(), value);\n  }\n\n  /**\n   * [Internal] Gets the decoded representation of a value if the value is defined, otherwise, returns the\n   * default value, which may be the result of an injectable function.\n   */\n  value(value?: any): any {\n    /**\n     * [Internal] Get the default value of a parameter, which may be an injectable function.\n     */\n    const getDefaultValue = () => {\n      if (this._defaultValueCache) return this._defaultValueCache.defaultValue;\n\n      if (!services.$injector) throw new Error(\"Injectable functions cannot be called at configuration time\");\n\n      let defaultValue = services.$injector.invoke(this.config.$$fn);\n\n      if (defaultValue !== null && defaultValue !== undefined && !this.type.is(defaultValue))\n        throw new Error(`Default value (${defaultValue}) for parameter '${this.id}' is not an instance of ParamType (${this.type.name})`);\n\n      if (this.config.$$fn['__cacheable']) {\n        this._defaultValueCache = { defaultValue };\n      }\n\n      return defaultValue;\n    };\n\n    const replaceSpecialValues = (val: any) => {\n      for (let tuple of this.replace) {\n        if (tuple.from === val) return tuple.to;\n      }\n      return val;\n    };\n\n    value = replaceSpecialValues(value);\n\n    return isUndefined(value) ? getDefaultValue() : this.type.$normalize(value);\n  }\n\n  isSearch(): boolean {\n    return this.location === DefType.SEARCH;\n  }\n\n  validates(value: any): boolean {\n    // There was no parameter value, but the param is optional\n    if ((isUndefined(value) || value === null) && this.isOptional) return true;\n\n    // The value was not of the correct ParamType, and could not be decoded to the correct ParamType\n    const normalized = this.type.$normalize(value);\n    if (!this.type.is(normalized)) return false;\n\n    // The value was of the correct type, but when encoded, did not match the ParamType's regexp\n    const encoded = this.type.encode(normalized);\n    return !(isString(encoded) && !this.type.pattern.exec(<string> encoded));\n  }\n\n  toString() {\n    return `{Param:${this.id} ${this.type} squash: '${this.squash}' optional: ${this.isOptional}}`;\n  }\n\n  static values(params: Param[], values: RawParams = {}): RawParams {\n    const paramValues = {} as RawParams;\n    for (let param of params) {\n      paramValues[param.id] = param.value(values[param.id]);\n    }\n    return paramValues;\n  }\n\n  /**\n   * Finds [[Param]] objects which have different param values\n   *\n   * Filters a list of [[Param]] objects to only those whose parameter values differ in two param value objects\n   *\n   * @param params: The list of Param objects to filter\n   * @param values1: The first set of parameter values\n   * @param values2: the second set of parameter values\n   *\n   * @returns any Param objects whose values were different between values1 and values2\n   */\n  static changed(params: Param[], values1: RawParams = {}, values2: RawParams = {}): Param[] {\n    return params.filter(param => !param.type.equals(values1[param.id], values2[param.id]));\n  }\n\n  /**\n   * Checks if two param value objects are equal (for a set of [[Param]] objects)\n   *\n   * @param params The list of [[Param]] objects to check\n   * @param values1 The first set of param values\n   * @param values2 The second set of param values\n   *\n   * @returns true if the param values in values1 and values2 are equal\n   */\n  static equals(params: Param[], values1 = {}, values2 = {}): boolean {\n    return Param.changed(params, values1, values2).length === 0;\n  }\n\n  /** Returns true if a the parameter values are valid, according to the Param definitions */\n  static validates(params: Param[], values: RawParams = {}): boolean {\n    return params.map(param => param.validates(values[param.id])).reduce(allTrueR, true);\n  }\n}","/**\n * Functions that manipulate strings\n *\n * Although these functions are exported, they are subject to change without notice.\n *\n * @module common_strings\n */ /** */\n\nimport { isString, isArray, isDefined, isNull, isPromise, isInjectable, isObject } from \"./predicates\";\nimport { Rejection } from \"../transition/rejectFactory\";\nimport { IInjectable, identity, Obj, tail, pushR } from \"./common\";\nimport { pattern, is, not, val, invoke } from \"./hof\";\nimport { Transition } from \"../transition/transition\";\nimport { Resolvable } from \"../resolve/resolvable\";\n\n/**\n * Returns a string shortened to a maximum length\n *\n * If the string is already less than the `max` length, return the string.\n * Else return the string, shortened to `max - 3` and append three dots (\"...\").\n *\n * @param max the maximum length of the string to return\n * @param str the input string\n */\nexport function maxLength(max: number, str: string) {\n  if (str.length <= max) return str;\n  return str.substr(0, max - 3) + \"...\";\n}\n\n/**\n * Returns a string, with spaces added to the end, up to a desired str length\n *\n * If the string is already longer than the desired length, return the string.\n * Else returns the string, with extra spaces on the end, such that it reaches `length` characters.\n *\n * @param length the desired length of the string to return\n * @param str the input string\n */\nexport function padString(length: number, str: string) {\n  while (str.length < length) str += \" \";\n  return str;\n}\n\nexport function kebobString(camelCase: string) {\n  return camelCase\n      .replace(/^([A-Z])/, $1 => $1.toLowerCase()) // replace first char\n      .replace(/([A-Z])/g, $1 => \"-\" + $1.toLowerCase()); // replace rest\n}\n\nfunction _toJson(obj: Obj) {\n  return JSON.stringify(obj);\n}\n\nfunction _fromJson(json: string) {\n  return isString(json) ? JSON.parse(json) : json;\n}\n\n\nfunction promiseToString(p: Promise<any>) {\n  return `Promise(${JSON.stringify(p)})`;\n}\n\nexport function functionToString(fn: Function) {\n  let fnStr = fnToString(fn);\n  let namedFunctionMatch = fnStr.match(/^(function [^ ]+\\([^)]*\\))/);\n  let toStr = namedFunctionMatch ? namedFunctionMatch[1] : fnStr;\n\n  let fnName = fn['name'] || \"\";\n  if (fnName && toStr.match(/function \\(/)) {\n    return 'function ' + fnName + toStr.substr(9);\n  }\n  return toStr;\n}\n\nexport function fnToString(fn: IInjectable) {\n  let _fn = isArray(fn) ? fn.slice(-1)[0] : fn;\n  return _fn && _fn.toString() || \"undefined\";\n}\n\nlet stringifyPatternFn: (val: any) => string = null;\nlet stringifyPattern = function(value: any) {\n  let isRejection = Rejection.isRejectionPromise;\n\n  stringifyPatternFn = <any> stringifyPatternFn || pattern([\n    [not(isDefined),  val(\"undefined\")],\n    [isNull,          val(\"null\")],\n    [isPromise,       val(\"[Promise]\")],\n    [isRejection,     (x: any) => x._transitionRejection.toString()],\n    [is(Rejection),   invoke(\"toString\")],\n    [is(Transition),  invoke(\"toString\")],\n    [is(Resolvable),  invoke(\"toString\")],\n    [isInjectable,    functionToString],\n    [val(true),       identity]\n  ]);\n\n  return stringifyPatternFn(value);\n};\n\nexport function stringify(o: any) {\n  var seen: any[] = [];\n\n  function format(val: any) {\n    if (isObject(val)) {\n      if (seen.indexOf(val) !== -1) return '[circular ref]';\n      seen.push(val);\n    }\n    return stringifyPattern(val);\n  }\n\n  return JSON.stringify(o, (key, val) => format(val)).replace(/\\\\\"/g, '\"');\n}\n\n/** Returns a function that splits a string on a character or substring */\nexport const beforeAfterSubstr = (char: string) => (str: string) => {\n  if (!str) return [\"\", \"\"];\n  let idx = str.indexOf(char);\n  if (idx === -1) return [str, \"\"];\n  return [str.substr(0, idx), str.substr(idx + 1)];\n};\n\n/**\n * Splits on a delimiter, but returns the delimiters in the array\n *\n * #### Example:\n * ```js\n * var splitOnSlashes = splitOnDelim('/');\n * splitOnSlashes(\"/foo\"); // [\"/\", \"foo\"]\n * splitOnSlashes(\"/foo/\"); // [\"/\", \"foo\", \"/\"]\n * ```\n */\nexport function splitOnDelim(delim: string) {\n  let re = new RegExp(\"(\" + delim + \")\", \"g\");\n  return (str: string) =>\n      str.split(re).filter(identity);\n};\n\n\n/**\n * Reduce fn that joins neighboring strings\n *\n * Given an array of strings, returns a new array\n * where all neighboring strings have been joined.\n *\n * #### Example:\n * ```js\n * let arr = [\"foo\", \"bar\", 1, \"baz\", \"\", \"qux\" ];\n * arr.reduce(joinNeighborsR, []) // [\"foobar\", 1, \"bazqux\" ]\n * ```\n */\nexport function joinNeighborsR(acc: any[], x: any) {\n  if (isString(tail(acc)) && isString(x))\n    return acc.slice(0, -1).concat(tail(acc)+ x);\n  return pushR(acc, x);\n};\n\n","/** @module state */ /** for typedoc */\nimport {Obj, omit, noop, extend, inherit, values, applyPairs, tail, mapObj, identity} from \"../common/common\";\nimport {isDefined, isFunction, isString, isArray} from \"../common/predicates\";\nimport {stringify} from \"../common/strings\";\nimport {prop, pattern, is, pipe, val} from \"../common/hof\";\nimport {StateDeclaration} from \"./interface\";\n\nimport {StateObject} from \"./stateObject\";\nimport {StateMatcher} from \"./stateMatcher\";\nimport {Param} from \"../params/param\";\nimport {UrlMatcherFactory} from \"../url/urlMatcherFactory\";\nimport {UrlMatcher} from \"../url/urlMatcher\";\nimport {Resolvable} from \"../resolve/resolvable\";\nimport {services} from \"../common/coreservices\";\nimport {ResolvePolicy} from \"../resolve/interface\";\nimport { ParamFactory } from \"../url/interface\";\n\nconst parseUrl = (url: string): any => {\n  if (!isString(url)) return false;\n  let root = url.charAt(0) === '^';\n  return { val: root ? url.substring(1) : url, root };\n};\n\nexport type BuilderFunction = (state: StateObject, parent?: BuilderFunction) => any;\n\ninterface Builders {\n  [key: string]: BuilderFunction[];\n\n  name: BuilderFunction[];\n  parent: BuilderFunction[];\n  data: BuilderFunction[];\n  url: BuilderFunction[];\n  navigable: BuilderFunction[];\n  params: BuilderFunction[];\n  views: BuilderFunction[];\n  path: BuilderFunction[];\n  includes: BuilderFunction[];\n  resolvables: BuilderFunction[];\n}\n\n\nfunction nameBuilder(state: StateObject) {\n  return state.name;\n}\n\nfunction selfBuilder(state: StateObject) {\n  state.self.$$state = () => state;\n  return state.self;\n}\n\nfunction dataBuilder(state: StateObject) {\n  if (state.parent && state.parent.data) {\n    state.data = state.self.data = inherit(state.parent.data, state.data);\n  }\n  return state.data;\n}\n\nconst getUrlBuilder = ($urlMatcherFactoryProvider: UrlMatcherFactory, root: () => StateObject) =>\nfunction urlBuilder(state: StateObject) {\n  let stateDec: StateDeclaration = <any> state;\n\n  // For future states, i.e., states whose name ends with `.**`,\n  // match anything that starts with the url prefix\n  if (stateDec && stateDec.url && stateDec.name && stateDec.name.match(/\\.\\*\\*$/)) {\n    stateDec.url += \"{remainder:any}\"; // match any path (.*)\n  }\n\n  const parsed = parseUrl(stateDec.url), parent = state.parent;\n  const url = !parsed ? stateDec.url : $urlMatcherFactoryProvider.compile(parsed.val, {\n    params: state.params || {},\n    paramMap: function (paramConfig: any, isSearch: boolean) {\n      if (stateDec.reloadOnSearch === false && isSearch) paramConfig = extend(paramConfig || {}, {dynamic: true});\n      return paramConfig;\n    }\n  });\n\n  if (!url) return null;\n  if (!$urlMatcherFactoryProvider.isMatcher(url)) throw new Error(`Invalid url '${url}' in state '${state}'`);\n  return (parsed && parsed.root) ? url : ((parent && parent.navigable) || root()).url.append(<UrlMatcher> url);\n};\n\nconst getNavigableBuilder = (isRoot: (state: StateObject) => boolean) =>\nfunction navigableBuilder(state: StateObject) {\n  return !isRoot(state) && state.url ? state : (state.parent ? state.parent.navigable : null);\n};\n\nconst getParamsBuilder = (paramFactory: ParamFactory) =>\nfunction paramsBuilder(state: StateObject): { [key: string]: Param } {\n  const makeConfigParam = (config: any, id: string) => paramFactory.fromConfig(id, null, config);\n  let urlParams: Param[] = (state.url && state.url.parameters({inherit: false})) || [];\n  let nonUrlParams: Param[] = values(mapObj(omit(state.params || {}, urlParams.map(prop('id'))), makeConfigParam));\n  return urlParams.concat(nonUrlParams).map(p => [p.id, p]).reduce(applyPairs, {});\n};\n\nfunction pathBuilder(state: StateObject) {\n  return state.parent ? state.parent.path.concat(state) : /*root*/ [state];\n}\n\nfunction includesBuilder(state: StateObject) {\n  let includes = state.parent ? extend({}, state.parent.includes) : {};\n  includes[state.name] = true;\n  return includes;\n}\n\n/**\n * This is a [[StateBuilder.builder]] function for the `resolve:` block on a [[StateDeclaration]].\n *\n * When the [[StateBuilder]] builds a [[StateObject]] object from a raw [[StateDeclaration]], this builder\n * validates the `resolve` property and converts it to a [[Resolvable]] array.\n *\n * resolve: input value can be:\n *\n * {\n *   // analyzed but not injected\n *   myFooResolve: function() { return \"myFooData\"; },\n *\n *   // function.toString() parsed, \"DependencyName\" dep as string (not min-safe)\n *   myBarResolve: function(DependencyName) { return DependencyName.fetchSomethingAsPromise() },\n *\n *   // Array split; \"DependencyName\" dep as string\n *   myBazResolve: [ \"DependencyName\", function(dep) { return dep.fetchSomethingAsPromise() },\n *\n *   // Array split; DependencyType dep as token (compared using ===)\n *   myQuxResolve: [ DependencyType, function(dep) { return dep.fetchSometingAsPromise() },\n *\n *   // val.$inject used as deps\n *   // where:\n *   //     corgeResolve.$inject = [\"DependencyName\"];\n *   //     function corgeResolve(dep) { dep.fetchSometingAsPromise() }\n *   // then \"DependencyName\" dep as string\n *   myCorgeResolve: corgeResolve,\n *\n *  // inject service by name\n *  // When a string is found, desugar creating a resolve that injects the named service\n *   myGraultResolve: \"SomeService\"\n * }\n *\n * or:\n *\n * [\n *   new Resolvable(\"myFooResolve\", function() { return \"myFooData\" }),\n *   new Resolvable(\"myBarResolve\", function(dep) { return dep.fetchSomethingAsPromise() }, [ \"DependencyName\" ]),\n *   { provide: \"myBazResolve\", useFactory: function(dep) { dep.fetchSomethingAsPromise() }, deps: [ \"DependencyName\" ] }\n * ]\n */\nexport function resolvablesBuilder(state: StateObject): Resolvable[] {\n  interface Tuple { token: any, val: any, deps: any[], policy: ResolvePolicy }\n  \n  /** convert resolve: {} and resolvePolicy: {} objects to an array of tuples */\n  const objects2Tuples    = (resolveObj: Obj, resolvePolicies: { [key: string]: ResolvePolicy }) =>\n      Object.keys(resolveObj || {}).map(token => ({token, val: resolveObj[token], deps: undefined, policy: resolvePolicies[token]}));\n\n  /** fetch DI annotations from a function or ng1-style array */\n  const annotate          = (fn: Function)  => {\n    let $injector = services.$injector;\n    // ng1 doesn't have an $injector until runtime.\n    // If the $injector doesn't exist, use \"deferred\" literal as a\n    // marker indicating they should be annotated when runtime starts\n    return fn['$inject'] || ($injector && $injector.annotate(fn, $injector.strictDi)) || <any> \"deferred\";\n  };\n\n  /** true if the object has both `token` and `resolveFn`, and is probably a [[ResolveLiteral]] */\n  const isResolveLiteral  = (obj: any) => !!(obj.token && obj.resolveFn);\n\n  /** true if the object looks like a provide literal, or a ng2 Provider */\n  const isLikeNg2Provider = (obj: any) => !!((obj.provide || obj.token) && (obj.useValue || obj.useFactory || obj.useExisting || obj.useClass));\n\n  /** true if the object looks like a tuple from obj2Tuples */\n  const isTupleFromObj    = (obj: any) => !!(obj && obj.val && (isString(obj.val) || isArray(obj.val)  || isFunction(obj.val)));\n\n  /** extracts the token from a Provider or provide literal */\n  const token             = (p: any) => p.provide || p.token;\n\n  /** Given a literal resolve or provider object, returns a Resolvable */\n  const literal2Resolvable = pattern([\n    [prop('resolveFn'),   p => new Resolvable(token(p), p.resolveFn, p.deps, p.policy)],\n    [prop('useFactory'),  p => new Resolvable(token(p), p.useFactory, (p.deps || p.dependencies), p.policy)],\n    [prop('useClass'),    p => new Resolvable(token(p), () => new (<any>p.useClass)(), [], p.policy)],\n    [prop('useValue'),    p => new Resolvable(token(p), () => p.useValue, [], p.policy, p.useValue)],\n    [prop('useExisting'), p => new Resolvable(token(p), identity, [p.useExisting], p.policy)],\n  ]);\n\n  const tuple2Resolvable = pattern([\n    [pipe(prop(\"val\"), isString),   (tuple: Tuple) => new Resolvable(tuple.token, identity, [ tuple.val ], tuple.policy)],\n    [pipe(prop(\"val\"), isArray),    (tuple: Tuple) => new Resolvable(tuple.token, tail(<any[]> tuple.val), tuple.val.slice(0, -1), tuple.policy)],\n    [pipe(prop(\"val\"), isFunction), (tuple: Tuple) => new Resolvable(tuple.token, tuple.val, annotate(tuple.val), tuple.policy)],\n  ]);\n\n  const item2Resolvable = <(obj: any) => Resolvable> pattern([\n    [is(Resolvable),                (r: Resolvable) => r],\n    [isResolveLiteral,              literal2Resolvable],\n    [isLikeNg2Provider,             literal2Resolvable],\n    [isTupleFromObj,                tuple2Resolvable],\n    [val(true),                     (obj: any) => { throw new Error(\"Invalid resolve value: \" + stringify(obj)) }]\n  ]);\n\n  // If resolveBlock is already an array, use it as-is.\n  // Otherwise, assume it's an object and convert to an Array of tuples\n  let decl = state.resolve;\n  let items: any[] = isArray(decl) ? decl : objects2Tuples(decl, state.resolvePolicy || {});\n  return items.map(item2Resolvable);\n}\n\n/**\n * @internalapi A internal global service\n *\n * StateBuilder is a factory for the internal [[StateObject]] objects.\n *\n * When you register a state with the [[StateRegistry]], you register a plain old javascript object which\n * conforms to the [[StateDeclaration]] interface.  This factory takes that object and builds the corresponding\n * [[StateObject]] object, which has an API and is used internally.\n *\n * Custom properties or API may be added to the internal [[StateObject]] object by registering a decorator function\n * using the [[builder]] method.\n */\nexport class StateBuilder {\n  /** An object that contains all the BuilderFunctions registered, key'd by the name of the State property they build */\n  private builders: Builders;\n\n  constructor(private matcher: StateMatcher, urlMatcherFactory: UrlMatcherFactory) {\n    let self = this;\n\n    const root = () => matcher.find(\"\");\n    const isRoot = (state: StateObject) => state.name === \"\";\n\n    function parentBuilder(state: StateObject) {\n      if (isRoot(state)) return null;\n      return matcher.find(self.parentName(state)) || root();\n    }\n\n    this.builders = {\n      name: [ nameBuilder ],\n      self: [ selfBuilder ],\n      parent: [ parentBuilder ],\n      data: [ dataBuilder ],\n      // Build a URLMatcher if necessary, either via a relative or absolute URL\n      url: [ getUrlBuilder(urlMatcherFactory, root) ],\n      // Keep track of the closest ancestor state that has a URL (i.e. is navigable)\n      navigable: [ getNavigableBuilder(isRoot) ],\n      params: [ getParamsBuilder(urlMatcherFactory.paramFactory) ],\n      // Each framework-specific ui-router implementation should define its own `views` builder\n      // e.g., src/ng1/statebuilders/views.ts\n      views: [],\n      // Keep a full path from the root down to this state as this is needed for state activation.\n      path: [ pathBuilder ],\n      // Speed up $state.includes() as it's used a lot\n      includes: [ includesBuilder ],\n      resolvables: [ resolvablesBuilder ]\n    };\n  }\n\n  /**\n   * Registers a [[BuilderFunction]] for a specific [[StateObject]] property (e.g., `parent`, `url`, or `path`).\n   * More than one BuilderFunction can be registered for a given property.\n   *\n   * The BuilderFunction(s) will be used to define the property on any subsequently built [[StateObject]] objects.\n   *\n   * @param name The name of the State property being registered for.\n   * @param fn The BuilderFunction which will be used to build the State property\n   * @returns a function which deregisters the BuilderFunction\n   */\n  builder(name: string, fn: BuilderFunction): (BuilderFunction|BuilderFunction[]|Function) {\n    let builders = this.builders;\n    let array = builders[name] || [];\n    // Backwards compat: if only one builder exists, return it, else return whole arary.\n    if (isString(name) && !isDefined(fn)) return array.length > 1 ? array : array[0];\n    if (!isString(name) || !isFunction(fn)) return;\n\n    builders[name] = array;\n    builders[name].push(fn);\n    return () => builders[name].splice(builders[name].indexOf(fn, 1)) && null;\n  }\n\n  /**\n   * Builds all of the properties on an essentially blank State object, returning a State object which has all its\n   * properties and API built.\n   *\n   * @param state an uninitialized State object\n   * @returns the built State object\n   */\n  build(state: StateObject): StateObject {\n    let {matcher, builders} = this;\n    let parent = this.parentName(state);\n\n    if (parent && !matcher.find(parent, undefined, false)) {\n      return null;\n    }\n\n    for (let key in builders) {\n      if (!builders.hasOwnProperty(key)) continue;\n      let chain = builders[key].reduce((parentFn: BuilderFunction, step: BuilderFunction) => (_state) => step(_state, parentFn), noop);\n      state[key] = chain(state);\n    }\n    return state;\n  }\n\n  parentName(state: StateObject) {\n    // name = 'foo.bar.baz.**'\n    let name = state.name || \"\";\n    // segments = ['foo', 'bar', 'baz', '.**']\n    let segments = name.split('.');\n    // segments = ['foo', 'bar', 'baz']\n    let lastSegment = segments.pop();\n    // segments = ['foo', 'bar'] (ignore .** segment for future states)\n    if (lastSegment === '**') segments.pop();\n\n    if (segments.length) {\n      if (state.parent) {\n        throw new Error(`States that specify the 'parent:' property should not have a '.' in their name (${name})`);\n      }\n\n      // 'foo.bar'\n      return segments.join(\".\");\n    }\n\n    if (!state.parent) return \"\";\n    return isString(state.parent) ? state.parent : state.parent.name;\n  }\n\n  name(state: StateObject) {\n    let name = state.name;\n    if (name.indexOf('.') !== -1 || !state.parent) return name;\n\n    let parentName = isString(state.parent) ? state.parent : state.parent.name;\n    return parentName ? parentName + \".\" + name : name;\n  }\n}\n","/**\n * @coreapi\n * @module url\n */\n/** for typedoc */\nimport {\n  map, defaults, inherit, identity, unnest, tail, find, Obj, pairs, allTrueR, unnestR, arrayTuples\n} from \"../common/common\";\nimport { prop, propEq } from \"../common/hof\";\nimport { isArray, isString, isDefined } from \"../common/predicates\";\nimport { Param, DefType } from \"../params/param\";\nimport { ParamTypes } from \"../params/paramTypes\";\nimport { RawParams } from \"../params/interface\";\nimport { ParamFactory } from \"./interface\";\nimport { joinNeighborsR, splitOnDelim } from \"../common/strings\";\n\n/** @hidden */\nfunction quoteRegExp(string: any, param?: any) {\n  let surroundPattern = ['', ''], result = string.replace(/[\\\\\\[\\]\\^$*+?.()|{}]/g, \"\\\\$&\");\n  if (!param) return result;\n\n  switch (param.squash) {\n    case false:\n      surroundPattern = ['(', ')' + (param.isOptional ? '?' : '')]; break;\n    case true:\n      result = result.replace(/\\/$/, '');\n      surroundPattern = ['(?:\\/(', ')|\\/)?'];\n      break;\n    default:\n      surroundPattern = [`(${param.squash}|`, ')?']; break;\n  }\n  return result + surroundPattern[0] + param.type.pattern.source + surroundPattern[1];\n}\n\n/** @hidden */\nconst memoizeTo = (obj: Obj, prop: string, fn: Function) =>\n    obj[prop] = obj[prop] || fn();\n\n/** @hidden */\nconst splitOnSlash = splitOnDelim('/');\n\n/** @hidden */\ninterface UrlMatcherCache {\n  segments?: any[];\n  weights?: number[];\n  path?: UrlMatcher[];\n  parent?: UrlMatcher;\n  pattern?: RegExp;\n}\n\n/**\n * Matches URLs against patterns.\n *\n * Matches URLs against patterns and extracts named parameters from the path or the search\n * part of the URL.\n *\n * A URL pattern consists of a path pattern, optionally followed by '?' and a list of search (query)\n * parameters. Multiple search parameter names are separated by '&'. Search parameters\n * do not influence whether or not a URL is matched, but their values are passed through into\n * the matched parameters returned by [[UrlMatcher.exec]].\n *\n * - *Path parameters* are defined using curly brace placeholders (`/somepath/{param}`)\n * or colon placeholders (`/somePath/:param`).\n *\n * - *A parameter RegExp* may be defined for a param after a colon\n * (`/somePath/{param:[a-zA-Z0-9]+}`) in a curly brace placeholder.\n * The regexp must match for the url to be matched.\n * Should the regexp itself contain curly braces, they must be in matched pairs or escaped with a backslash.\n *\n * Note: a RegExp parameter will encode its value using either [[ParamTypes.path]] or [[ParamTypes.query]].\n *\n * - *Custom parameter types* may also be specified after a colon (`/somePath/{param:int}`) in curly brace parameters.\n *   See [[UrlMatcherFactory.type]] for more information.\n *\n * - *Catch-all parameters* are defined using an asterisk placeholder (`/somepath/*catchallparam`).\n *   A catch-all * parameter value will contain the remainder of the URL.\n *\n * ---\n *\n * Parameter names may contain only word characters (latin letters, digits, and underscore) and\n * must be unique within the pattern (across both path and search parameters).\n * A path parameter matches any number of characters other than '/'. For catch-all\n * placeholders the path parameter matches any number of characters.\n *\n * Examples:\n *\n * * `'/hello/'` - Matches only if the path is exactly '/hello/'. There is no special treatment for\n *   trailing slashes, and patterns have to match the entire path, not just a prefix.\n * * `'/user/:id'` - Matches '/user/bob' or '/user/1234!!!' or even '/user/' but not '/user' or\n *   '/user/bob/details'. The second path segment will be captured as the parameter 'id'.\n * * `'/user/{id}'` - Same as the previous example, but using curly brace syntax.\n * * `'/user/{id:[^/]*}'` - Same as the previous example.\n * * `'/user/{id:[0-9a-fA-F]{1,8}}'` - Similar to the previous example, but only matches if the id\n *   parameter consists of 1 to 8 hex digits.\n * * `'/files/{path:.*}'` - Matches any URL starting with '/files/' and captures the rest of the\n *   path into the parameter 'path'.\n * * `'/files/*path'` - ditto.\n * * `'/calendar/{start:date}'` - Matches \"/calendar/2014-11-12\" (because the pattern defined\n *   in the built-in  `date` ParamType matches `2014-11-12`) and provides a Date object in $stateParams.start\n *\n */\nexport class UrlMatcher {\n  /** @hidden */\n  static nameValidator: RegExp = /^\\w+([-.]+\\w+)*(?:\\[\\])?$/;\n\n  /** @hidden */\n  private _cache: UrlMatcherCache = { path: [this] };\n  /** @hidden */\n  private _children: UrlMatcher[] = [];\n  /** @hidden */\n  private _params:   Param[]      = [];\n  /** @hidden */\n  private _segments: string[]     = [];\n  /** @hidden */\n  private _compiled: string[]     = [];\n\n  /** The pattern that was passed into the constructor */\n  public pattern: string;\n\n  /**\n   * @param pattern The pattern to compile into a matcher.\n   * @param paramTypes The [[ParamTypes]] registry\n   * @param config  A configuration object\n   * - `caseInsensitive` - `true` if URL matching should be case insensitive, otherwise `false`, the default value (for backward compatibility) is `false`.\n   * - `strict` - `false` if matching against a URL with a trailing slash should be treated as equivalent to a URL without a trailing slash, the default value is `true`.\n   */\n  constructor(pattern: string, paramTypes: ParamTypes, paramFactory: ParamFactory, public config?: any) {\n    this.pattern = pattern;\n    this.config = defaults(this.config, {\n      params: {},\n      strict: true,\n      caseInsensitive: false,\n      paramMap: identity\n    });\n\n    // Find all placeholders and create a compiled pattern, using either classic or curly syntax:\n    //   '*' name\n    //   ':' name\n    //   '{' name '}'\n    //   '{' name ':' regexp '}'\n    // The regular expression is somewhat complicated due to the need to allow curly braces\n    // inside the regular expression. The placeholder regexp breaks down as follows:\n    //    ([:*])([\\w\\[\\]]+)              - classic placeholder ($1 / $2) (search version has - for snake-case)\n    //    \\{([\\w\\[\\]]+)(?:\\:\\s*( ... ))?\\}  - curly brace placeholder ($3) with optional regexp/type ... ($4) (search version has - for snake-case\n    //    (?: ... | ... | ... )+         - the regexp consists of any number of atoms, an atom being either\n    //    [^{}\\\\]+                       - anything other than curly braces or backslash\n    //    \\\\.                            - a backslash escape\n    //    \\{(?:[^{}\\\\]+|\\\\.)*\\}          - a matched set of curly braces containing other atoms\n    let placeholder = /([:*])([\\w\\[\\]]+)|\\{([\\w\\[\\]]+)(?:\\:\\s*((?:[^{}\\\\]+|\\\\.|\\{(?:[^{}\\\\]+|\\\\.)*\\})+))?\\}/g,\n        searchPlaceholder = /([:]?)([\\w\\[\\].-]+)|\\{([\\w\\[\\].-]+)(?:\\:\\s*((?:[^{}\\\\]+|\\\\.|\\{(?:[^{}\\\\]+|\\\\.)*\\})+))?\\}/g,\n        last = 0, m: RegExpExecArray, patterns: any[][] = [];\n\n    const checkParamErrors = (id: string) => {\n      if (!UrlMatcher.nameValidator.test(id)) throw new Error(`Invalid parameter name '${id}' in pattern '${pattern}'`);\n      if (find(this._params, propEq('id', id))) throw new Error(`Duplicate parameter name '${id}' in pattern '${pattern}'`);\n    };\n\n    // Split into static segments separated by path parameter placeholders.\n    // The number of segments is always 1 more than the number of parameters.\n    const matchDetails = (m: RegExpExecArray, isSearch: boolean) => {\n      // IE[78] returns '' for unmatched groups instead of null\n      let id = m[2] || m[3];\n      let regexp = isSearch ? m[4] : m[4] || (m[1] === '*' ? '[\\\\s\\\\S]*' : null);\n\n      const makeRegexpType = (regexp) => inherit(paramTypes.type(isSearch ? \"query\" : \"path\"), {\n        pattern: new RegExp(regexp, this.config.caseInsensitive ? 'i' : undefined)\n      });\n\n      return {\n        id,\n        regexp,\n        cfg:     this.config.params[id],\n        segment: pattern.substring(last, m.index),\n        type:    !regexp ? null : paramTypes.type(regexp) || makeRegexpType(regexp)\n      };\n    };\n\n    let p: any, segment: string;\n\n    while ((m = placeholder.exec(pattern))) {\n      p = matchDetails(m, false);\n      if (p.segment.indexOf('?') >= 0) break; // we're into the search part\n\n      checkParamErrors(p.id);\n      this._params.push(paramFactory.fromPath(p.id, p.type, this.config.paramMap(p.cfg, false)));\n      this._segments.push(p.segment);\n      patterns.push([p.segment, tail(this._params)]);\n      last = placeholder.lastIndex;\n    }\n    segment = pattern.substring(last);\n\n    // Find any search parameter names and remove them from the last segment\n    let i = segment.indexOf('?');\n\n    if (i >= 0) {\n      let search = segment.substring(i);\n      segment = segment.substring(0, i);\n\n      if (search.length > 0) {\n        last = 0;\n\n        while ((m = searchPlaceholder.exec(search))) {\n          p = matchDetails(m, true);\n          checkParamErrors(p.id);\n          this._params.push(paramFactory.fromSearch(p.id, p.type, this.config.paramMap(p.cfg, true)));\n          last = placeholder.lastIndex;\n          // check if ?&\n        }\n      }\n    }\n\n    this._segments.push(segment);\n    this._compiled = patterns.map(pattern => quoteRegExp.apply(null, pattern)).concat(quoteRegExp(segment));\n  }\n\n  /**\n   * Creates a new concatenated UrlMatcher\n   *\n   * Builds a new UrlMatcher by appending another UrlMatcher to this one.\n   *\n   * @param url A `UrlMatcher` instance to append as a child of the current `UrlMatcher`.\n   */\n  append(url: UrlMatcher): UrlMatcher {\n    this._children.push(url);\n    url._cache = {\n      path: this._cache.path.concat(url),\n      parent: this,\n      pattern: null,\n    };\n    return url;\n  }\n\n  /** @hidden */\n  isRoot(): boolean {\n    return this._cache.path[0] === this;\n  }\n\n  /** Returns the input pattern string */\n  toString(): string {\n    return this.pattern;\n  }\n\n  /**\n   * Tests the specified url/path against this matcher.\n   *\n   * Tests if the given url matches this matcher's pattern, and returns an object containing the captured\n   * parameter values.  Returns null if the path does not match.\n   *\n   * The returned object contains the values\n   * of any search parameters that are mentioned in the pattern, but their value may be null if\n   * they are not present in `search`. This means that search parameters are always treated\n   * as optional.\n   *\n   * #### Example:\n   * ```js\n   * new UrlMatcher('/user/{id}?q&r').exec('/user/bob', {\n   *   x: '1', q: 'hello'\n   * });\n   * // returns { id: 'bob', q: 'hello', r: null }\n   * ```\n   *\n   * @param path    The URL path to match, e.g. `$location.path()`.\n   * @param search  URL search parameters, e.g. `$location.search()`.\n   * @param hash    URL hash e.g. `$location.hash()`.\n   * @param options\n   *\n   * @returns The captured parameter values.\n   */\n  exec(path: string, search: any = {}, hash?: string, options: any = {}): RawParams {\n    let match = memoizeTo(this._cache, 'pattern', () => {\n      return new RegExp([\n        '^',\n        unnest(this._cache.path.map(prop('_compiled'))).join(''),\n        this.config.strict === false ? '\\/?' : '',\n        '$'\n      ].join(''), this.config.caseInsensitive ? 'i' : undefined);\n    }).exec(path);\n\n    if (!match) return null;\n\n    //options = defaults(options, { isolate: false });\n\n    let allParams:    Param[] = this.parameters(),\n        pathParams:   Param[] = allParams.filter(param => !param.isSearch()),\n        searchParams: Param[] = allParams.filter(param => param.isSearch()),\n        nPathSegments  = this._cache.path.map(urlm => urlm._segments.length - 1).reduce((a, x) => a + x),\n        values: RawParams = {};\n\n    if (nPathSegments !== match.length - 1)\n      throw new Error(`Unbalanced capture group in route '${this.pattern}'`);\n\n    function decodePathArray(string: string) {\n      const reverseString = (str: string) => str.split(\"\").reverse().join(\"\");\n      const unquoteDashes = (str: string) => str.replace(/\\\\-/g, \"-\");\n\n      let split = reverseString(string).split(/-(?!\\\\)/);\n      let allReversed = map(split, reverseString);\n      return map(allReversed, unquoteDashes).reverse();\n    }\n\n    for (let i = 0; i < nPathSegments; i++) {\n      let param: Param = pathParams[i];\n      let value: (any|any[]) = match[i + 1];\n\n      // if the param value matches a pre-replace pair, replace the value before decoding.\n      for (let j = 0; j < param.replace.length; j++) {\n        if (param.replace[j].from === value) value = param.replace[j].to;\n      }\n      if (value && param.array === true) value = decodePathArray(value);\n      if (isDefined(value)) value = param.type.decode(value);\n      values[param.id] = param.value(value);\n    }\n    searchParams.forEach(param => {\n      let value = search[param.id];\n      for (let j = 0; j < param.replace.length; j++) {\n        if (param.replace[j].from === value) value = param.replace[j].to;\n      }\n      if (isDefined(value)) value = param.type.decode(value);\n      values[param.id] = param.value(value);\n    });\n\n    if (hash) values[\"#\"] = hash;\n\n    return values;\n  }\n\n  /**\n   * @hidden\n   * Returns all the [[Param]] objects of all path and search parameters of this pattern in order of appearance.\n   *\n   * @returns {Array.<Param>}  An array of [[Param]] objects. Must be treated as read-only. If the\n   *    pattern has no parameters, an empty array is returned.\n   */\n  parameters(opts: any = {}): Param[] {\n    if (opts.inherit === false) return this._params;\n    return unnest(this._cache.path.map(matcher => matcher._params));\n  }\n\n  /**\n   * @hidden\n   * Returns a single parameter from this UrlMatcher by id\n   *\n   * @param id\n   * @param opts\n   * @returns {T|Param|any|boolean|UrlMatcher|null}\n   */\n  parameter(id: string, opts: any = {}): Param {\n    const findParam = () => {\n      for (let param of this._params) {\n        if (param.id === id) return param;\n      }\n    };\n\n    let parent = this._cache.parent;\n    return findParam() || (opts.inherit !== false && parent && parent.parameter(id, opts)) || null;\n  }\n\n  /**\n   * Validates the input parameter values against this UrlMatcher\n   *\n   * Checks an object hash of parameters to validate their correctness according to the parameter\n   * types of this `UrlMatcher`.\n   *\n   * @param params The object hash of parameters to validate.\n   * @returns Returns `true` if `params` validates, otherwise `false`.\n   */\n  validates(params: RawParams): boolean {\n    const validParamVal = (param: Param, val: any) =>\n        !param || param.validates(val);\n\n    params = params || {};\n\n    // I'm not sure why this checks only the param keys passed in, and not all the params known to the matcher\n    let paramSchema = this.parameters().filter(paramDef => params.hasOwnProperty(paramDef.id));\n    return paramSchema.map(paramDef => validParamVal(paramDef, params[paramDef.id])).reduce(allTrueR, true);\n  }\n\n  /**\n   * Given a set of parameter values, creates a URL from this UrlMatcher.\n   *\n   * Creates a URL that matches this pattern by substituting the specified values\n   * for the path and search parameters.\n   *\n   * #### Example:\n   * ```js\n   * new UrlMatcher('/user/{id}?q').format({ id:'bob', q:'yes' });\n   * // returns '/user/bob?q=yes'\n   * ```\n   *\n   * @param values  the values to substitute for the parameters in this pattern.\n   * @returns the formatted URL (path and optionally search part).\n   */\n  format(values: RawParams = {}) {\n    // Build the full path of UrlMatchers (including all parent UrlMatchers)\n    let urlMatchers = this._cache.path;\n\n    // Extract all the static segments and Params (processed as ParamDetails)\n    // into an ordered array\n    let pathSegmentsAndParams: Array<string|ParamDetails> = urlMatchers.map(UrlMatcher.pathSegmentsAndParams)\n            .reduce(unnestR, [])\n            .map(x => isString(x) ? x : getDetails(x));\n\n    // Extract the query params into a separate array\n    let queryParams: Array<ParamDetails> = urlMatchers.map(UrlMatcher.queryParams)\n            .reduce(unnestR, [])\n            .map(getDetails);\n\n    const isInvalid = (param: ParamDetails) => param.isValid === false;\n    if (pathSegmentsAndParams.concat(queryParams).filter(isInvalid).length) {\n      return null;\n    }\n\n    /**\n     * Given a Param, applies the parameter value, then returns detailed information about it\n     */\n    function getDetails(param: Param): ParamDetails {\n      // Normalize to typed value\n      let value = param.value(values[param.id]);\n      let isValid = param.validates(value);\n      let isDefaultValue = param.isDefaultValue(value);\n      // Check if we're in squash mode for the parameter\n      let squash = isDefaultValue ? param.squash : false;\n      // Allow the Parameter's Type to encode the value\n      let encoded = param.type.encode(value);\n\n      return { param, value, isValid, isDefaultValue, squash, encoded };\n    }\n\n    // Build up the path-portion from the list of static segments and parameters\n    let pathString = pathSegmentsAndParams.reduce((acc: string, x: string|ParamDetails) => {\n      // The element is a static segment (a raw string); just append it\n      if (isString(x)) return acc + x;\n\n      // Otherwise, it's a ParamDetails.\n      let { squash, encoded, param } = x;\n\n      // If squash is === true, try to remove a slash from the path\n      if (squash === true) return (acc.match(/\\/$/)) ? acc.slice(0, -1) : acc;\n      // If squash is a string, use the string for the param value\n      if (isString(squash)) return acc + squash;\n      if (squash !== false) return acc; // ?\n      if (encoded == null) return acc;\n      // If this parameter value is an array, encode the value using encodeDashes\n      if (isArray(encoded)) return acc + map(<string[]> encoded, UrlMatcher.encodeDashes).join(\"-\");\n      // If the parameter type is \"raw\", then do not encodeURIComponent\n      if (param.raw) return acc + encoded;\n      // Encode the value\n      return acc + encodeURIComponent(<string> encoded);\n    }, \"\");\n\n    // Build the query string by applying parameter values (array or regular)\n    // then mapping to key=value, then flattening and joining using \"&\"\n    let queryString = queryParams.map((paramDetails: ParamDetails) => {\n      let { param, squash, encoded, isDefaultValue } = paramDetails;\n      if (encoded == null || (isDefaultValue && squash !== false)) return;\n      if (!isArray(encoded)) encoded = [<string> encoded];\n      if (encoded.length === 0) return;\n      if (!param.raw) encoded = map(<string[]> encoded, encodeURIComponent);\n\n      return (<string[]> encoded).map(val => `${param.id}=${val}`);\n    }).filter(identity).reduce(unnestR, []).join(\"&\");\n\n    // Concat the pathstring with the queryString (if exists) and the hashString (if exists)\n    return pathString + (queryString ? `?${queryString}` : \"\") + (values[\"#\"] ? \"#\" + values[\"#\"] : \"\");\n  }\n\n  /** @hidden */\n  static encodeDashes(str: string) { // Replace dashes with encoded \"\\-\"\n    return encodeURIComponent(str).replace(/-/g, c => `%5C%${c.charCodeAt(0).toString(16).toUpperCase()}`);\n  }\n\n  /** @hidden Given a matcher, return an array with the matcher's path segments and path params, in order */\n  static pathSegmentsAndParams(matcher: UrlMatcher) {\n    let staticSegments = matcher._segments;\n    let pathParams = matcher._params.filter(p => p.location === DefType.PATH);\n    return arrayTuples(staticSegments, pathParams.concat(undefined))\n        .reduce(unnestR, [])\n        .filter(x => x !== \"\" && isDefined(x));\n  }\n\n  /** @hidden Given a matcher, return an array with the matcher's query params */\n  static queryParams(matcher: UrlMatcher): Param[] {\n    return matcher._params.filter(p => p.location === DefType.SEARCH);\n  }\n\n  /**\n   * Compare two UrlMatchers\n   *\n   * This comparison function converts a UrlMatcher into static and dynamic path segments.\n   * Each static path segment is a static string between a path separator (slash character).\n   * Each dynamic segment is a path parameter.\n   *\n   * The comparison function sorts static segments before dynamic ones.\n   */\n  static compare(a: UrlMatcher, b: UrlMatcher): number {\n    /**\n     * Turn a UrlMatcher and all its parent matchers into an array\n     * of slash literals '/', string literals, and Param objects\n     *\n     * This example matcher matches strings like \"/foo/:param/tail\":\n     * var matcher = $umf.compile(\"/foo\").append($umf.compile(\"/:param\")).append($umf.compile(\"/\")).append($umf.compile(\"tail\"));\n     * var result = segments(matcher); // [ '/', 'foo', '/', Param, '/', 'tail' ]\n     *\n     * Caches the result as `matcher._cache.segments`\n     */\n    const segments = (matcher: UrlMatcher) =>\n        matcher._cache.segments = matcher._cache.segments ||\n            matcher._cache.path.map(UrlMatcher.pathSegmentsAndParams)\n                .reduce(unnestR, [])\n                .reduce(joinNeighborsR, [])\n                .map(x => isString(x) ? splitOnSlash(x) : x)\n                .reduce(unnestR, []);\n\n    /**\n     * Gets the sort weight for each segment of a UrlMatcher\n     *\n     * Caches the result as `matcher._cache.weights`\n     */\n    const weights = (matcher: UrlMatcher) =>\n        matcher._cache.weights = matcher._cache.weights ||\n            segments(matcher).map(segment => {\n              // Sort slashes first, then static strings, the Params\n              if (segment === '/') return 1;\n              if (isString(segment)) return 2;\n              if (segment instanceof Param) return 3;\n            });\n\n    /**\n     * Pads shorter array in-place (mutates)\n     */\n    const padArrays = (l: any[], r: any[], padVal: any) => {\n      const len = Math.max(l.length, r.length);\n      while (l.length < len) l.push(padVal);\n      while (r.length < len) r.push(padVal);\n    };\n\n    const weightsA = weights(a), weightsB = weights(b);\n    padArrays(weightsA, weightsB, 0);\n    let cmp, i, pairs = arrayTuples(weightsA, weightsB);\n\n    for (i = 0; i < pairs.length; i++) {\n      cmp = pairs[i][0] - pairs[i][1];\n      if (cmp !== 0) return cmp;\n    }\n\n    return 0;\n  }\n}\n\n/** @hidden */\ninterface ParamDetails {\n  param: Param;\n  value: any;\n  isValid: boolean;\n  isDefaultValue: boolean;\n  squash: (boolean|string);\n  encoded: (string|string[]);\n}\n","/**\n * @internalapi\n * @module url\n */\n/** for typedoc */\nimport { createProxyFunctions, extend, removeFrom } from '../common/common';\nimport { isDefined, isFunction, isString } from '../common/predicates';\nimport { UrlMatcher } from './urlMatcher';\nimport { RawParams } from '../params/interface';\nimport { Disposable } from '../interface';\nimport { UIRouter } from '../router';\nimport { is, pattern, val } from '../common/hof';\nimport { UrlRuleFactory } from './urlRule';\nimport { TargetState } from '../state/targetState';\nimport { MatcherUrlRule, MatchResult, UrlParts, UrlRule, UrlRuleHandlerFn, UrlRuleMatchFn, UrlRulesApi, UrlSyncApi, } from './interface';\nimport { TargetStateDef } from '../state/interface';\n\n/** @hidden */\nfunction appendBasePath(url: string, isHtml5: boolean, absolute: boolean, baseHref: string): string {\n  if (baseHref === '/') return url;\n  if (isHtml5) return baseHref.slice(0, -1) + url;\n  if (absolute) return baseHref.slice(1) + url;\n  return url;\n}\n\n/** @hidden */\nconst prioritySort = (a: UrlRule, b: UrlRule) =>\n  (b.priority || 0) - (a.priority || 0);\n\n/** @hidden */\nconst typeSort = (a: UrlRule, b: UrlRule) => {\n  const weights = { \"STATE\": 4, \"URLMATCHER\": 4, \"REGEXP\": 3, \"RAW\": 2, \"OTHER\": 1 };\n  return (weights[a.type] || 0) - (weights[b.type] || 0);\n};\n\n/** @hidden */\nconst urlMatcherSort = (a: MatcherUrlRule, b: MatcherUrlRule) =>\n  !a.urlMatcher || !b.urlMatcher ? 0 : UrlMatcher.compare(a.urlMatcher, b.urlMatcher);\n\n/** @hidden */\nconst idSort = (a: UrlRule, b: UrlRule) => {\n  // Identically sorted STATE and URLMATCHER best rule will be chosen by `matchPriority` after each rule matches the URL\n  const useMatchPriority = { STATE: true, URLMATCHER: true };\n  const equal = useMatchPriority[a.type] && useMatchPriority[b.type];\n  return equal ? 0 : (a.$id || 0) - (b.$id || 0);\n};\n\n/**\n * Default rule priority sorting function.\n *\n * Sorts rules by:\n *\n * - Explicit priority (set rule priority using [[UrlRulesApi.when]])\n * - Rule type (STATE: 4, URLMATCHER: 4, REGEXP: 3, RAW: 2, OTHER: 1)\n * - `UrlMatcher` specificity ([[UrlMatcher.compare]]): works for STATE and URLMATCHER types to pick the most specific rule.\n * - Rule registration order (for rule types other than STATE and URLMATCHER)\n *   - Equally sorted State and UrlMatcher rules will each match the URL.\n *     Then, the *best* match is chosen based on how many parameter values were matched.\n *\n * @coreapi\n */\nlet defaultRuleSortFn: (a: UrlRule, b: UrlRule) => number;\ndefaultRuleSortFn = (a, b) => {\n  let cmp = prioritySort(a, b);\n  if (cmp !== 0) return cmp;\n\n  cmp = typeSort(a, b);\n  if (cmp !== 0) return cmp;\n\n  cmp = urlMatcherSort(a as MatcherUrlRule, b as MatcherUrlRule);\n  if (cmp !== 0) return cmp;\n\n  return idSort(a, b);\n};\n\n/**\n * Updates URL and responds to URL changes\n *\n * ### Deprecation warning:\n * This class is now considered to be an internal API\n * Use the [[UrlService]] instead.\n * For configuring URL rules, use the [[UrlRulesApi]] which can be found as [[UrlService.rules]].\n *\n * This class updates the URL when the state changes.\n * It also responds to changes in the URL.\n */\nexport class UrlRouter implements UrlRulesApi, UrlSyncApi, Disposable {\n  /** used to create [[UrlRule]] objects for common cases */\n  public urlRuleFactory: UrlRuleFactory;\n\n  /** @hidden */ private _router: UIRouter;\n  /** @hidden */ private location: string;\n  /** @hidden */ private _sortFn = defaultRuleSortFn;\n  /** @hidden */ private _stopFn: Function;\n  /** @hidden */ _rules: UrlRule[] = [];\n  /** @hidden */ private _otherwiseFn: UrlRule;\n  /** @hidden */ interceptDeferred = false;\n  /** @hidden */ private _id = 0;\n  /** @hidden */ private _sorted = false;\n\n  /** @hidden */\n  constructor(router: UIRouter) {\n    this._router = router;\n    this.urlRuleFactory = new UrlRuleFactory(router);\n    createProxyFunctions(val(UrlRouter.prototype), this, val(this));\n  }\n\n  /** @internalapi */\n  dispose() {\n    this.listen(false);\n    this._rules = [];\n    delete this._otherwiseFn;\n  }\n\n  /** @inheritdoc */\n  sort(compareFn?: (a: UrlRule, b: UrlRule) => number) {\n    this._rules = this.stableSort(this._rules, this._sortFn = compareFn || this._sortFn);\n    this._sorted = true;\n  }\n\n  private ensureSorted() {\n    this._sorted || this.sort();\n  }\n\n  private stableSort(arr, compareFn) {\n    const arrOfWrapper = arr.map((elem, idx) => ({ elem, idx }));\n\n    arrOfWrapper.sort((wrapperA, wrapperB) => {\n      const cmpDiff = compareFn(wrapperA.elem, wrapperB.elem);\n      return cmpDiff === 0\n        ? wrapperA.idx - wrapperB.idx\n        : cmpDiff;\n    });\n\n    return arrOfWrapper.map(wrapper => wrapper.elem);\n  }\n\n  /**\n   * Given a URL, check all rules and return the best [[MatchResult]]\n   * @param url\n   * @returns {MatchResult}\n   */\n  match(url: UrlParts): MatchResult {\n    this.ensureSorted();\n\n    url = extend({path: '', search: {}, hash: '' }, url);\n    let rules = this.rules();\n    if (this._otherwiseFn) rules.push(this._otherwiseFn);\n\n    // Checks a single rule. Returns { rule: rule, match: match, weight: weight } if it matched, or undefined\n\n    let checkRule = (rule: UrlRule): MatchResult => {\n      let match = rule.match(url, this._router);\n      return match && { match, rule, weight: rule.matchPriority(match) };\n    };\n\n    // The rules are pre-sorted.\n    // - Find the first matching rule.\n    // - Find any other matching rule that sorted *exactly the same*, according to `.sort()`.\n    // - Choose the rule with the highest match weight.\n    let best: MatchResult;\n    for (let i = 0; i < rules.length; i++) {\n      // Stop when there is a 'best' rule and the next rule sorts differently than it.\n      if (best && this._sortFn(rules[i], best.rule) !== 0) break;\n\n      let current = checkRule(rules[i]);\n      // Pick the best MatchResult\n      best = (!best || current && current.weight > best.weight) ? current : best;\n    }\n\n    return best;\n  }\n\n  /** @inheritdoc */\n  sync(evt?) {\n    if (evt && evt.defaultPrevented) return;\n\n    let router = this._router,\n        $url = router.urlService,\n        $state = router.stateService;\n\n    let url: UrlParts = {\n      path: $url.path(), search: $url.search(), hash: $url.hash(),\n    };\n\n    let best = this.match(url);\n\n    let applyResult = pattern([\n      [isString, (newurl: string) => $url.url(newurl, true)],\n      [TargetState.isDef, (def: TargetStateDef) => $state.go(def.state, def.params, def.options)],\n      [is(TargetState), (target: TargetState) => $state.go(target.state(), target.params(), target.options())],\n    ]);\n\n    applyResult(best && best.rule.handler(best.match, url, router));\n  }\n\n  /** @inheritdoc */\n  listen(enabled?: boolean): Function {\n    if (enabled === false) {\n      this._stopFn && this._stopFn();\n      delete this._stopFn;\n    } else {\n      return this._stopFn = this._stopFn || this._router.urlService.onChange(evt => this.sync(evt));\n    }\n  }\n\n  /**\n   * Internal API.\n   * @internalapi\n   */\n  update(read?: boolean) {\n    let $url = this._router.locationService;\n    if (read) {\n      this.location = $url.path();\n      return;\n    }\n    if ($url.path() === this.location) return;\n\n    $url.url(this.location, true);\n  }\n\n  /**\n   * Internal API.\n   *\n   * Pushes a new location to the browser history.\n   *\n   * @internalapi\n   * @param urlMatcher\n   * @param params\n   * @param options\n   */\n  push(urlMatcher: UrlMatcher, params?: RawParams, options?: { replace?: (string|boolean) }) {\n    let replace = options && !!options.replace;\n    this._router.urlService.url(urlMatcher.format(params || {}), replace);\n  }\n\n  /**\n   * Builds and returns a URL with interpolated parameters\n   *\n   * #### Example:\n   * ```js\n   * matcher = $umf.compile(\"/about/:person\");\n   * params = { person: \"bob\" };\n   * $bob = $urlRouter.href(matcher, params);\n   * // $bob == \"/about/bob\";\n   * ```\n   *\n   * @param urlMatcher The [[UrlMatcher]] object which is used as the template of the URL to generate.\n   * @param params An object of parameter values to fill the matcher's required parameters.\n   * @param options Options object. The options are:\n   *\n   * - **`absolute`** - {boolean=false},  If true will generate an absolute url, e.g. \"http://www.example.com/fullurl\".\n   *\n   * @returns Returns the fully compiled URL, or `null` if `params` fail validation against `urlMatcher`\n   */\n  href(urlMatcher: UrlMatcher, params?: any, options?: { absolute: boolean }): string {\n    let url = urlMatcher.format(params);\n    if (url == null) return null;\n\n    options = options || { absolute: false };\n\n    let cfg = this._router.urlService.config;\n    let isHtml5 = cfg.html5Mode();\n    if (!isHtml5 && url !== null) {\n      url = \"#\" + cfg.hashPrefix() + url;\n    }\n    url = appendBasePath(url, isHtml5, options.absolute, cfg.baseHref());\n\n    if (!options.absolute || !url) {\n      return url;\n    }\n\n    let slash = (!isHtml5 && url ? '/' : ''), port = cfg.port();\n    port = <any> (port === 80 || port === 443 ? '' : ':' + port);\n\n    return [cfg.protocol(), '://', cfg.host(), port, slash, url].join('');\n  }\n\n\n  /**\n   * Manually adds a URL Rule.\n   *\n   * Usually, a url rule is added using [[StateDeclaration.url]] or [[when]].\n   * This api can be used directly for more control (to register a [[BaseUrlRule]], for example).\n   * Rules can be created using [[UrlRouter.urlRuleFactory]], or create manually as simple objects.\n   *\n   * A rule should have a `match` function which returns truthy if the rule matched.\n   * It should also have a `handler` function which is invoked if the rule is the best match.\n   *\n   * @return a function that deregisters the rule\n   */\n  rule(rule: UrlRule): Function {\n    if (!UrlRuleFactory.isUrlRule(rule)) throw new Error(\"invalid rule\");\n    rule.$id = this._id++;\n    rule.priority = rule.priority || 0;\n\n    this._rules.push(rule);\n    this._sorted = false;\n\n    return () => this.removeRule(rule);\n  }\n\n  /** @inheritdoc */\n  removeRule(rule): void {\n    removeFrom(this._rules, rule);\n  }\n\n  /** @inheritdoc */\n  rules(): UrlRule[] {\n    this.ensureSorted();\n    return this._rules.slice();\n  }\n\n  /** @inheritdoc */\n  otherwise(handler: string|UrlRuleHandlerFn|TargetState|TargetStateDef) {\n    let handlerFn: UrlRuleHandlerFn = getHandlerFn(handler);\n\n    this._otherwiseFn = this.urlRuleFactory.create(val(true), handlerFn);\n    this._sorted = false;\n  };\n\n  /** @inheritdoc */\n  initial(handler: string | UrlRuleHandlerFn | TargetState | TargetStateDef) {\n    let handlerFn: UrlRuleHandlerFn = getHandlerFn(handler);\n\n    let matchFn: UrlRuleMatchFn = (urlParts, router) =>\n        router.globals.transitionHistory.size() === 0 && !!/^\\/?$/.exec(urlParts.path);\n\n    this.rule(this.urlRuleFactory.create(matchFn, handlerFn));\n  };\n\n  /** @inheritdoc */\n  when(matcher: (RegExp|UrlMatcher|string), handler: string|UrlRuleHandlerFn, options?: { priority: number }): UrlRule {\n    let rule = this.urlRuleFactory.create(matcher, handler);\n    if (isDefined(options && options.priority)) rule.priority = options.priority;\n    this.rule(rule);\n    return rule;\n  };\n\n  /** @inheritdoc */\n  deferIntercept(defer?: boolean) {\n    if (defer === undefined) defer = true;\n    this.interceptDeferred = defer;\n  };\n}\n\nfunction getHandlerFn(handler: string|UrlRuleHandlerFn|TargetState|TargetStateDef): UrlRuleHandlerFn {\n  if (!isFunction(handler) && !isString(handler) && !is(TargetState)(handler) && !TargetState.isDef(handler)) {\n    throw new Error(\"'handler' must be a string, function, TargetState, or have a state: 'newtarget' property\");\n  }\n  return isFunction(handler) ? handler as UrlRuleHandlerFn : val(handler);\n}\n","/** @module hooks */ /** */\nimport { Transition } from \"../transition/transition\";\nimport { UIRouter } from \"../router\";\nimport { TransitionService } from \"../transition/transitionService\";\n\nfunction addCoreResolvables(trans: Transition) {\n  trans.addResolvable({ token: UIRouter,       deps: [], resolveFn: () => trans.router,   data: trans.router },   \"\");\n  trans.addResolvable({ token: Transition,     deps: [], resolveFn: () => trans,          data: trans },          \"\");\n  trans.addResolvable({ token: '$transition$', deps: [], resolveFn: () => trans,          data: trans },          \"\");\n  trans.addResolvable({ token: '$stateParams', deps: [], resolveFn: () => trans.params(), data: trans.params() }, \"\");\n\n  trans.entering().forEach(state => {\n    trans.addResolvable({ token: '$state$',    deps: [], resolveFn: () => state,          data: state },       state);\n  });\n}\n\nexport const registerAddCoreResolvables = (transitionService: TransitionService) =>\n    transitionService.onCreate({}, addCoreResolvables);\n","/** @module hooks */\n/** for typedoc */\nimport { TransitionStateHookFn } from '../transition/interface';\nimport { Transition } from '../transition/transition';\nimport { TransitionService } from '../transition/transitionService';\nimport { StateDeclaration } from '../state/interface';\nimport { StateObject } from '../state/stateObject';\n\n/**\n * A factory which creates an onEnter, onExit or onRetain transition hook function\n *\n * The returned function invokes the (for instance) state.onEnter hook when the\n * state is being entered.\n *\n * @hidden\n */\nfunction makeEnterExitRetainHook(hookName: string): TransitionStateHookFn {\n  return (transition: Transition, state: StateDeclaration) => {\n    let _state: StateObject = state.$$state();\n    let hookFn: TransitionStateHookFn = _state[hookName];\n    return hookFn(transition, state);\n  }\n}\n\n/**\n * The [[TransitionStateHookFn]] for onExit\n *\n * When the state is being exited, the state's .onExit function is invoked.\n *\n * Registered using `transitionService.onExit({ exiting: (state) => !!state.onExit }, onExitHook);`\n *\n * See: [[IHookRegistry.onExit]]\n */\nconst onExitHook: TransitionStateHookFn = makeEnterExitRetainHook('onExit');\nexport const registerOnExitHook = (transitionService: TransitionService) =>\n    transitionService.onExit({exiting: state => !!state.onExit}, onExitHook);\n\n/**\n * The [[TransitionStateHookFn]] for onRetain\n *\n * When the state was already entered, and is not being exited or re-entered, the state's .onRetain function is invoked.\n *\n * Registered using `transitionService.onRetain({ retained: (state) => !!state.onRetain }, onRetainHook);`\n *\n * See: [[IHookRegistry.onRetain]]\n */\nconst onRetainHook: TransitionStateHookFn = makeEnterExitRetainHook('onRetain');\nexport const registerOnRetainHook = (transitionService: TransitionService) =>\n    transitionService.onRetain({retained: state => !!state.onRetain}, onRetainHook);\n\n/**\n * The [[TransitionStateHookFn]] for onEnter\n *\n * When the state is being entered, the state's .onEnter function is invoked.\n *\n * Registered using `transitionService.onEnter({ entering: (state) => !!state.onEnter }, onEnterHook);`\n *\n * See: [[IHookRegistry.onEnter]]\n */\nconst onEnterHook: TransitionStateHookFn = makeEnterExitRetainHook('onEnter');\nexport const registerOnEnterHook = (transitionService: TransitionService) =>\n    transitionService.onEnter({entering: state => !!state.onEnter}, onEnterHook);\n\n","/** @module hooks */ /** */\nimport {Transition} from \"../transition/transition\";\nimport {TransitionService} from \"../transition/transitionService\";\nimport {TransitionHookFn} from \"../transition/interface\";\nimport {StateDeclaration, LazyLoadResult} from \"../state/interface\";\nimport {services} from \"../common/coreservices\";\nimport { StateRule } from \"../url/interface\";\n\n/**\n * A [[TransitionHookFn]] that performs lazy loading\n *\n * When entering a state \"abc\" which has a `lazyLoad` function defined:\n * - Invoke the `lazyLoad` function (unless it is already in process)\n *   - Flag the hook function as \"in process\"\n *   - The function should return a promise (that resolves when lazy loading is complete)\n * - Wait for the promise to settle\n *   - If the promise resolves to a [[LazyLoadResult]], then register those states\n *   - Flag the hook function as \"not in process\"\n * - If the hook was successful\n *   - Remove the `lazyLoad` function from the state declaration\n * - If all the hooks were successful\n *   - Retry the transition (by returning a TargetState)\n *\n * ```\n * .state('abc', {\n *   component: 'fooComponent',\n *   lazyLoad: () => System.import('./fooComponent')\n *   });\n * ```\n *\n * See [[StateDeclaration.lazyLoad]]\n */\nconst lazyLoadHook: TransitionHookFn = (transition: Transition) => {\n  let router = transition.router;\n\n  function retryTransition() {\n    if (transition.originalTransition().options().source !== 'url') {\n      // The original transition was not triggered via url sync\n      // The lazy state should be loaded now, so re-try the original transition\n      let orig = transition.targetState();\n      return router.stateService.target(orig.identifier(), orig.params(), orig.options());\n    }\n\n    // The original transition was triggered via url sync\n    // Run the URL rules and find the best match\n    let $url = router.urlService;\n    let result = $url.match($url.parts());\n    let rule = result && result.rule;\n\n    // If the best match is a state, redirect the transition (instead\n    // of calling sync() which supersedes the current transition)\n    if (rule && rule.type === \"STATE\") {\n      let state = (rule as StateRule).state;\n      let params = result.match;\n      return router.stateService.target(state, params, transition.options());\n    }\n\n    // No matching state found, so let .sync() choose the best non-state match/otherwise\n    router.urlService.sync();\n  }\n\n  let promises = transition.entering()\n      .filter(state => !!state.$$state().lazyLoad)\n      .map(state => lazyLoadState(transition, state));\n\n  return services.$q.all(promises).then(retryTransition);\n};\n\nexport const registerLazyLoadHook = (transitionService: TransitionService) =>\n    transitionService.onBefore({ entering: (state) => !!state.lazyLoad }, lazyLoadHook);\n\n\n/**\n * Invokes a state's lazy load function\n *\n * @param transition a Transition context\n * @param state the state to lazy load\n * @returns A promise for the lazy load result\n */\nexport function lazyLoadState(transition: Transition, state: StateDeclaration): Promise<LazyLoadResult> {\n  let lazyLoadFn = state.$$state().lazyLoad;\n\n  // Store/get the lazy load promise on/from the hookfn so it doesn't get re-invoked\n  let promise = lazyLoadFn['_promise'];\n  if (!promise) {\n    const success = (result) => {\n      delete state.lazyLoad;\n      delete state.$$state().lazyLoad;\n      delete lazyLoadFn['_promise'];\n      return result;\n    };\n\n    const error = (err) => {\n      delete lazyLoadFn['_promise'];\n      return services.$q.reject(err);\n    };\n\n    promise = lazyLoadFn['_promise'] =\n        services.$q.when(lazyLoadFn(transition, state))\n            .then(updateStateRegistry)\n            .then(success, error);\n  }\n\n  /** Register any lazy loaded state definitions */\n  function updateStateRegistry(result: LazyLoadResult) {\n    if (result && Array.isArray(result.states)) {\n      result.states.forEach(state => transition.router.stateRegistry.register(state));\n    }\n    return result;\n  }\n\n  return promise;\n}\n","/** @module hooks */ /** */\n\nimport { trace } from '../common/trace';\nimport { Rejection } from '../transition/rejectFactory';\nimport { TransitionService } from '../transition/transitionService';\nimport { Transition } from '../transition/transition';\n\n/**\n * A [[TransitionHookFn]] that skips a transition if it should be ignored\n *\n * This hook is invoked at the end of the onBefore phase.\n *\n * If the transition should be ignored (because no parameter or states changed)\n * then the transition is ignored and not processed.\n */\nfunction ignoredHook(trans: Transition) {\n  const ignoredReason = trans._ignoredReason();\n  if (!ignoredReason) return;\n\n  trace.traceTransitionIgnored(trans);\n\n  const pending = trans.router.globals.transition;\n\n  // The user clicked a link going back to the *current state* ('A')\n  // However, there is also a pending transition in flight (to 'B')\n  // Abort the transition to 'B' because the user now wants to be back at 'A'.\n  if (ignoredReason === 'SameAsCurrent' && pending) {\n    pending.abort();\n  }\n\n  return Rejection.ignored().toPromise();\n}\n\nexport const registerIgnoredTransitionHook = (transitionService: TransitionService) =>\n    transitionService.onBefore({}, ignoredHook, { priority: -9999 });\n","/** @module hooks */ /** */\n\nimport { TransitionService } from '../transition/transitionService';\nimport { Transition } from '../transition/transition';\n\n/**\n * A [[TransitionHookFn]] that rejects the Transition if it is invalid\n *\n * This hook is invoked at the end of the onBefore phase.\n * If the transition is invalid (for example, param values do not validate)\n * then the transition is rejected.\n */\nfunction invalidTransitionHook(trans: Transition) {\n  if (!trans.valid()) {\n    throw new Error(trans.error());\n  }\n}\n\nexport const registerInvalidTransitionHook = (transitionService: TransitionService) =>\n    transitionService.onBefore({}, invalidTransitionHook, { priority: -10000 });\n","/**\n * @internalapi\n * @module vanilla\n */\n/** */\nimport { isArray } from \"../common/index\";\nimport { LocationServices, LocationConfig } from \"../common/coreservices\";\nimport { UIRouter } from \"../router\";\nimport { identity, unnestR, removeFrom, deregAll, extend } from \"../common/common\";\nimport { LocationLike, HistoryLike } from \"./interface\";\nimport { isDefined } from \"../common/predicates\";\nimport { Disposable } from \"../interface\";\n\nconst beforeAfterSubstr = (char: string) => (str: string): string[] => {\n  if (!str) return [\"\", \"\"];\n  let idx = str.indexOf(char);\n  if (idx === -1) return [str, \"\"];\n  return [str.substr(0, idx), str.substr(idx + 1)];\n};\n\nexport const splitHash = beforeAfterSubstr(\"#\");\nexport const splitQuery = beforeAfterSubstr(\"?\");\nexport const splitEqual = beforeAfterSubstr(\"=\");\nexport const trimHashVal = (str) => str ? str.replace(/^#/, \"\") : \"\";\n\nexport const keyValsToObjectR = (accum, [key, val]) => {\n  if (!accum.hasOwnProperty(key)) {\n    accum[key] = val;\n  } else if (isArray(accum[key])) {\n    accum[key].push(val);\n  } else {\n    accum[key] = [accum[key], val]\n  }\n  return accum;\n};\n\nexport const getParams = (queryString: string): any =>\n    queryString.split(\"&\").filter(identity).map(splitEqual).reduce(keyValsToObjectR, {});\n\nexport function parseUrl(url: string) {\n  const orEmptyString = x => x || \"\";\n  let [beforehash, hash] = splitHash(url).map(orEmptyString);\n  let [path, search] = splitQuery(beforehash).map(orEmptyString);\n\n  return { path, search, hash, url };\n}\n\nexport const buildUrl = (loc: LocationServices) => {\n  let path = loc.path();\n  let searchObject = loc.search();\n  let hash = loc.hash();\n\n  let search = Object.keys(searchObject).map(key => {\n    let param = searchObject[key];\n    let vals = isArray(param) ? param : [param];\n    return vals.map(val => key + \"=\" + val);\n  }).reduce(unnestR, []).join(\"&\");\n\n  return path + (search ? \"?\" + search : \"\") + (hash ? \"#\" + hash : \"\");\n};\n\nexport function locationPluginFactory(\n    name: string,\n    isHtml5: boolean,\n    serviceClass: { new(router?: UIRouter): LocationServices },\n    configurationClass: { new(router?: UIRouter, isHtml5?: boolean): LocationConfig }\n) {\n  return function(router: UIRouter) {\n    let service       = router.locationService = new serviceClass(router);\n    let configuration = router.locationConfig  = new configurationClass(router, isHtml5);\n\n    function dispose(router: UIRouter) {\n      router.dispose(service);\n      router.dispose(configuration);\n    }\n\n    return { name, service, configuration, dispose };\n  };\n}\n\n","/**\n * @internalapi\n * @module vanilla\n */\n/** */\nimport { BrowserLocationConfig } from \"./browserLocationConfig\";\nimport { HashLocationService } from \"./hashLocationService\";\nimport { locationPluginFactory } from \"./utils\";\nimport { LocationPlugin, ServicesPlugin } from \"./interface\";\nimport { UIRouter } from \"../router\";\nimport { PushStateLocationService } from \"./pushStateLocationService\";\nimport { MemoryLocationService } from \"./memoryLocationService\";\nimport { MemoryLocationConfig } from \"./memoryLocationConfig\";\nimport { $injector } from \"./injector\";\nimport { $q } from \"./q\";\nimport { services } from \"../common/coreservices\";\n\nexport function servicesPlugin(router: UIRouter): ServicesPlugin {\n  services.$injector = $injector;\n  services.$q = $q;\n\n  return { name: \"vanilla.services\", $q, $injector, dispose: () => null };\n}\n\n/** A `UIRouterPlugin` uses the browser hash to get/set the current location */\nexport const hashLocationPlugin: (router: UIRouter) => LocationPlugin =\n    locationPluginFactory('vanilla.hashBangLocation', false, HashLocationService, BrowserLocationConfig);\n\n/** A `UIRouterPlugin` that gets/sets the current location using the browser's `location` and `history` apis */\nexport const pushStateLocationPlugin: (router: UIRouter) => LocationPlugin =\n    locationPluginFactory(\"vanilla.pushStateLocation\", true, PushStateLocationService, BrowserLocationConfig);\n\n/** A `UIRouterPlugin` that gets/sets the current location from an in-memory object */\nexport const memoryLocationPlugin: (router: UIRouter) => LocationPlugin =\n    locationPluginFactory(\"vanilla.memoryLocation\", false, MemoryLocationService, MemoryLocationConfig);\n","/** @module ng1 */ /** */\nimport { ng as angular } from \"../angular\";\nimport {\n    StateObject, pick, forEach, tail, extend,\n    isArray, isInjectable, isDefined, isString, services, trace,\n    ViewConfig, ViewService, ViewConfigFactory, PathNode, ResolveContext, Resolvable, IInjectable\n} from \"@uirouter/core\";\nimport { Ng1ViewDeclaration } from \"../interface\";\nimport { TemplateFactory } from \"../templateFactory\";\nimport IInjectorService = angular.auto.IInjectorService;\n\nexport function getNg1ViewConfigFactory(): ViewConfigFactory {\n  let templateFactory: TemplateFactory = null;\n  return (path, view) => {\n    templateFactory = templateFactory || services.$injector.get(\"$templateFactory\");\n    return [new Ng1ViewConfig(path, view, templateFactory)];\n  };\n}\n\nconst hasAnyKey = (keys, obj) =>\n    keys.reduce((acc, key) => acc || isDefined(obj[key]), false);\n\n/**\n * This is a [[StateBuilder.builder]] function for angular1 `views`.\n *\n * When the [[StateBuilder]] builds a [[StateObject]] object from a raw [[StateDeclaration]], this builder\n * handles the `views` property with logic specific to @uirouter/angularjs (ng1).\n *\n * If no `views: {}` property exists on the [[StateDeclaration]], then it creates the `views` object\n * and applies the state-level configuration to a view named `$default`.\n */\nexport function ng1ViewsBuilder(state: StateObject) {\n  // Do not process root state\n  if (!state.parent) return {};\n\n  let tplKeys = ['templateProvider', 'templateUrl', 'template', 'notify', 'async'],\n      ctrlKeys = ['controller', 'controllerProvider', 'controllerAs', 'resolveAs'],\n      compKeys = ['component', 'bindings', 'componentProvider'],\n      nonCompKeys = tplKeys.concat(ctrlKeys),\n      allViewKeys = compKeys.concat(nonCompKeys);\n\n  // Do not allow a state to have both state-level props and also a `views: {}` property.\n  // A state without a `views: {}` property can declare properties for the `$default` view as properties of the state.\n  // However, the `$default` approach should not be mixed with a separate `views: ` block.\n  if (isDefined(state.views) && hasAnyKey(allViewKeys, state)) {\n    throw new Error(`State '${state.name}' has a 'views' object. ` +\n        `It cannot also have \"view properties\" at the state level.  ` +\n        `Move the following properties into a view (in the 'views' object): ` +\n        ` ${allViewKeys.filter(key => isDefined(state[key])).join(\", \")}`);\n  }\n\n  let views: { [key: string]: Ng1ViewDeclaration } = {},\n      viewsObject = state.views || { \"$default\": pick(state, allViewKeys) };\n\n  forEach(viewsObject, function (config: Ng1ViewDeclaration, name: string) {\n    // Account for views: { \"\": { template... } }\n    name = name || \"$default\";\n    // Account for views: { header: \"headerComponent\" }\n    if (isString(config)) config = { component: <string> config };\n\n    // Make a shallow copy of the config object\n    config = extend({}, config);\n\n    // Do not allow a view to mix props for component-style view with props for template/controller-style view\n    if (hasAnyKey(compKeys, config) && hasAnyKey(nonCompKeys, config)) {\n      throw new Error(`Cannot combine: ${compKeys.join(\"|\")} with: ${nonCompKeys.join(\"|\")} in stateview: '${name}@${state.name}'`);\n    }\n\n    config.resolveAs = config.resolveAs || '$resolve';\n    config.$type = \"ng1\";\n    config.$context = state;\n    config.$name = name;\n\n    let normalized = ViewService.normalizeUIViewTarget(config.$context, config.$name);\n    config.$uiViewName = normalized.uiViewName;\n    config.$uiViewContextAnchor = normalized.uiViewContextAnchor;\n\n    views[name] = config;\n  });\n  return views;\n}\n\nlet id = 0;\nexport class Ng1ViewConfig implements ViewConfig {\n  $id = id++;\n  loaded: boolean = false;\n  controller: Function; // actually IInjectable|string\n  template: string;\n  component: string;\n  locals: any; // TODO: delete me\n\n  constructor(public path: PathNode[], public viewDecl: Ng1ViewDeclaration, public factory: TemplateFactory) { }\n\n  load() {\n    let $q = services.$q;\n    let context = new ResolveContext(this.path);\n    let params = this.path.reduce((acc, node) => extend(acc, node.paramValues), {});\n\n    let promises: any = {\n      template: $q.when(this.factory.fromConfig(this.viewDecl, params, context)),\n      controller: $q.when(this.getController(context))\n    };\n\n    return $q.all(promises).then((results) => {\n      trace.traceViewServiceEvent(\"Loaded\", this);\n      this.controller = results.controller;\n      extend(this, results.template); // Either { template: \"tpl\" } or { component: \"cmpName\" }\n      return this;\n    });\n  }\n\n  getTemplate = (uiView, context: ResolveContext) =>\n    this.component ? this.factory.makeComponentTemplate(uiView, context, this.component, this.viewDecl.bindings) : this.template;\n\n  /**\n   * Gets the controller for a view configuration.\n   *\n   * @returns {Function|Promise.<Function>} Returns a controller, or a promise that resolves to a controller.\n   */\n  getController(context: ResolveContext): (IInjectable|string|Promise<IInjectable|string>) {\n    let provider = this.viewDecl.controllerProvider;\n    if (!isInjectable(provider)) return this.viewDecl.controller;\n    let deps = services.$injector.annotate(provider);\n    let providerFn = isArray(provider) ? tail(<any> provider) : provider;\n    let resolvable = new Resolvable(\"\", <any> providerFn, deps);\n    return resolvable.get(context);\n  }\n}\n","/** @module view */\n/** for typedoc */\nimport { ng as angular } from \"./angular\";\nimport { IAugmentedJQuery } from \"angular\";\nimport {\n  isArray, isDefined, isFunction, isObject, services, Obj, IInjectable, tail, kebobString, unnestR, ResolveContext,\n  Resolvable, RawParams\n} from \"@uirouter/core\";\nimport { Ng1ViewDeclaration, TemplateFactoryProvider } from \"./interface\";\n\n/**\n * Service which manages loading of templates from a ViewConfig.\n */\nexport class TemplateFactory implements TemplateFactoryProvider {\n  /** @hidden */ private _useHttp = angular.version.minor < 3;\n  /** @hidden */ private $templateRequest;\n  /** @hidden */ private $templateCache;\n  /** @hidden */ private $http;\n\n  /** @hidden */ $get = ['$http', '$templateCache', '$injector', ($http, $templateCache, $injector) => {\n    this.$templateRequest = $injector.has && $injector.has('$templateRequest') && $injector.get('$templateRequest');\n    this.$http = $http;\n    this.$templateCache = $templateCache;\n    return this;\n  }];\n\n  /** @hidden */\n  useHttpService(value: boolean) {\n    this._useHttp = value;\n  };\n\n  /**\n   * Creates a template from a configuration object.\n   *\n   * @param config Configuration object for which to load a template.\n   * The following properties are search in the specified order, and the first one\n   * that is defined is used to create the template:\n   *\n   * @param params  Parameters to pass to the template function.\n   * @param context The resolve context associated with the template's view\n   *\n   * @return {string|object}  The template html as a string, or a promise for\n   * that string,or `null` if no template is configured.\n   */\n  fromConfig(config: Ng1ViewDeclaration, params: any, context: ResolveContext): Promise<{ template?: string, component?: string }> {\n    const defaultTemplate = \"<ui-view></ui-view>\";\n\n    const asTemplate  = (result) => services.$q.when(result).then(str => ({ template:  str }));\n    const asComponent = (result) => services.$q.when(result).then(str => ({ component: str }));\n\n    return (\n        isDefined(config.template)          ? asTemplate(this.fromString(config.template, params)) :\n        isDefined(config.templateUrl)       ? asTemplate(this.fromUrl(config.templateUrl, params)) :\n        isDefined(config.templateProvider)  ? asTemplate(this.fromProvider(config.templateProvider, params, context)) :\n        isDefined(config.component)         ? asComponent(config.component) :\n        isDefined(config.componentProvider) ? asComponent(this.fromComponentProvider(config.componentProvider, params, context)) :\n        asTemplate(defaultTemplate)\n    );\n  };\n\n  /**\n   * Creates a template from a string or a function returning a string.\n   *\n   * @param template html template as a string or function that returns an html template as a string.\n   * @param params Parameters to pass to the template function.\n   *\n   * @return {string|object} The template html as a string, or a promise for that\n   * string.\n   */\n  fromString(template: (string | Function), params?: RawParams) {\n    return isFunction(template) ? (<any> template)(params) : template;\n  };\n\n  /**\n   * Loads a template from the a URL via `$http` and `$templateCache`.\n   *\n   * @param {string|Function} url url of the template to load, or a function\n   * that returns a url.\n   * @param {Object} params Parameters to pass to the url function.\n   * @return {string|Promise.<string>} The template html as a string, or a promise\n   * for that string.\n   */\n  fromUrl(url: (string | Function), params: any) {\n    if (isFunction(url)) url = (<any> url)(params);\n    if (url == null) return null;\n\n    if (this._useHttp) {\n      return this.$http.get(url, { cache: this.$templateCache, headers: { Accept: 'text/html' } })\n          .then(function (response) {\n            return response.data;\n          });\n    }\n\n    return this.$templateRequest(url);\n  };\n\n  /**\n   * Creates a template by invoking an injectable provider function.\n   *\n   * @param provider Function to invoke via `locals`\n   * @param {Function} injectFn a function used to invoke the template provider\n   * @return {string|Promise.<string>} The template html as a string, or a promise\n   * for that string.\n   */\n  fromProvider(provider: IInjectable, params: any, context: ResolveContext) {\n    let deps = services.$injector.annotate(provider);\n    let providerFn = isArray(provider) ? tail(<any[]> provider) : provider;\n    let resolvable = new Resolvable(\"\", <Function> providerFn, deps);\n    return resolvable.get(context);\n  };\n\n  /**\n   * Creates a component's template by invoking an injectable provider function.\n   *\n   * @param provider Function to invoke via `locals`\n   * @param {Function} injectFn a function used to invoke the template provider\n   * @return {string} The template html as a string: \"<component-name input1='::$resolve.foo'></component-name>\".\n   */\n  fromComponentProvider(provider: IInjectable, params: any, context: ResolveContext) {\n    let deps = services.$injector.annotate(provider);\n    let providerFn = isArray(provider) ? tail(<any[]> provider) : provider;\n    let resolvable = new Resolvable(\"\", <Function> providerFn, deps);\n    return resolvable.get(context);\n  };\n\n  /**\n   * Creates a template from a component's name\n   *\n   * This implements route-to-component.\n   * It works by retrieving the component (directive) metadata from the injector.\n   * It analyses the component's bindings, then constructs a template that instantiates the component.\n   * The template wires input and output bindings to resolves or from the parent component.\n   *\n   * @param uiView {object} The parent ui-view (for binding outputs to callbacks)\n   * @param context The ResolveContext (for binding outputs to callbacks returned from resolves)\n   * @param component {string} Component's name in camel case.\n   * @param bindings An object defining the component's bindings: {foo: '<'}\n   * @return {string} The template as a string: \"<component-name input1='::$resolve.foo'></component-name>\".\n   */\n  makeComponentTemplate(uiView: IAugmentedJQuery, context: ResolveContext, component: string, bindings?: any) {\n    bindings = bindings || {};\n\n    // Bind once prefix\n    const prefix = angular.version.minor >= 3 ? \"::\" : \"\";\n    // Convert to kebob name. Add x- prefix if the string starts with `x-` or `data-`\n    const kebob = (camelCase: string) => {\n      const kebobed = kebobString(camelCase);\n      return /^(x|data)-/.exec(kebobed) ? `x-${kebobed}` : kebobed;\n    };\n\n\n    const attributeTpl = (input: BindingTuple) => {\n      let { name, type } = input;\n      let attrName = kebob(name);\n      // If the ui-view has an attribute which matches a binding on the routed component\n      // then pass that attribute through to the routed component template.\n      // Prefer ui-view wired mappings to resolve data, unless the resolve was explicitly bound using `bindings:`\n      if (uiView.attr(attrName) && !bindings[name])\n        return `${attrName}='${uiView.attr(attrName)}'`;\n\n      let resolveName = bindings[name] || name;\n      // Pre-evaluate the expression for \"@\" bindings by enclosing in {{ }}\n      // some-attr=\"{{ ::$resolve.someResolveName }}\"\n      if (type === '@')\n        return `${attrName}='{{${prefix}$resolve.${resolveName}}}'`;\n\n      // Wire \"&\" callbacks to resolves that return a callback function\n      // Get the result of the resolve (should be a function) and annotate it to get its arguments.\n      // some-attr=\"$resolve.someResolveResultName(foo, bar)\"\n      if (type === '&') {\n        let res = context.getResolvable(resolveName);\n        let fn = res && res.data;\n        let args = fn && services.$injector.annotate(fn) || [];\n        // account for array style injection, i.e., ['foo', function(foo) {}]\n        let arrayIdxStr = isArray(fn) ? `[${fn.length - 1}]` : '';\n        return `${attrName}='$resolve.${resolveName}${arrayIdxStr}(${args.join(\",\")})'`;\n      }\n\n      // some-attr=\"::$resolve.someResolveName\"\n      return `${attrName}='${prefix}$resolve.${resolveName}'`;\n    };\n\n    let attrs = getComponentBindings(component).map(attributeTpl).join(\" \");\n    let kebobName = kebob(component);\n    return `<${kebobName} ${attrs}></${kebobName}>`;\n  };\n}\n\n// Gets all the directive(s)' inputs ('@', '=', and '<') and outputs ('&')\nfunction getComponentBindings(name: string) {\n  let cmpDefs = <any[]> services.$injector.get(name + \"Directive\"); // could be multiple\n  if (!cmpDefs || !cmpDefs.length) throw new Error(`Unable to find component named '${name}'`);\n  return cmpDefs.map(getBindings).reduce(unnestR, []);\n}\n\n// Given a directive definition, find its object input attributes\n// Use different properties, depending on the type of directive (component, bindToController, normal)\nconst getBindings = (def: any) => {\n  if (isObject(def.bindToController)) return scopeBindings(def.bindToController);\n  return scopeBindings(def.scope);\n};\n\ninterface BindingTuple {\n  name: string;\n  type: string;\n}\n\n// for ng 1.2 style, process the scope: { input: \"=foo\" }\n// for ng 1.3 through ng 1.5, process the component's bindToController: { input: \"=foo\" } object\nconst scopeBindings = (bindingsObj: Obj) => Object.keys(bindingsObj || {})\n    // [ 'input', [ '=foo', '=', 'foo' ] ]\n    .map(key => [key, /^([=<@&])[?]?(.*)/.exec(bindingsObj[key])])\n    // skip malformed values\n    .filter(tuple => isDefined(tuple) && isArray(tuple[1]))\n    // { name: ('foo' || 'input'), type: '=' }\n    .map(tuple => ({ name: tuple[1][2] || tuple[0], type: tuple[1][1] } as BindingTuple));\n\n","/**\n * # Angular 1 types\n *\n * UI-Router core provides various Typescript types which you can use for code completion and validating parameter values, etc.\n * The customizations to the core types for Angular UI-Router are documented here.\n *\n * The optional [[$resolve]] service is also documented here.\n *\n * @module ng1\n * @preferred\n */\n/** for typedoc */\nimport { ng as angular } from \"./angular\";\nimport {\n  IRootScopeService, IQService, ILocationService, ILocationProvider, IHttpService, ITemplateCacheService\n} from \"angular\";\nimport {\n  services, applyPairs, isString, trace, extend, UIRouter, StateService, UrlRouter, UrlMatcherFactory, ResolveContext,\n  unnestR, TypedMap\n} from \"@uirouter/core\";\nimport { ng1ViewsBuilder, getNg1ViewConfigFactory } from \"./statebuilders/views\";\nimport { TemplateFactory } from \"./templateFactory\";\nimport { StateProvider } from \"./stateProvider\";\nimport { getStateHookBuilder } from \"./statebuilders/onEnterExitRetain\";\nimport { Ng1LocationServices } from \"./locationServices\";\nimport { UrlRouterProvider } from \"./urlRouterProvider\";\nimport IInjectorService = angular.auto.IInjectorService; // tslint:disable-line\n\nangular.module(\"ui.router.angular1\", []);\nlet mod_init  = angular.module('ui.router.init',   []);\nlet mod_util  = angular.module('ui.router.util',   ['ng', 'ui.router.init']);\nlet mod_rtr   = angular.module('ui.router.router', ['ui.router.util']);\nlet mod_state = angular.module('ui.router.state',  ['ui.router.router', 'ui.router.util', 'ui.router.angular1']);\nlet mod_main  = angular.module('ui.router',        ['ui.router.init', 'ui.router.state', 'ui.router.angular1']);\nlet mod_cmpt  = angular.module('ui.router.compat', ['ui.router']); // tslint:disable-line\n\ndeclare module '@uirouter/core/lib/router' {\n  interface UIRouter {\n    /** @hidden */\n    stateProvider: StateProvider;\n    /** @hidden */\n    urlRouterProvider: UrlRouterProvider;\n  }\n}\n\nlet router: UIRouter = null;\n\n$uiRouter.$inject = ['$locationProvider'];\n/** This angular 1 provider instantiates a Router and exposes its services via the angular injector */\nfunction $uiRouter($locationProvider: ILocationProvider) {\n\n  // Create a new instance of the Router when the $uiRouterProvider is initialized\n  router = this.router = new UIRouter();\n  router.stateProvider = new StateProvider(router.stateRegistry, router.stateService);\n\n  // Apply ng1 specific StateBuilder code for `views`, `resolve`, and `onExit/Retain/Enter` properties\n  router.stateRegistry.decorator(\"views\",    ng1ViewsBuilder);\n  router.stateRegistry.decorator(\"onExit\",   getStateHookBuilder(\"onExit\"));\n  router.stateRegistry.decorator(\"onRetain\", getStateHookBuilder(\"onRetain\"));\n  router.stateRegistry.decorator(\"onEnter\",  getStateHookBuilder(\"onEnter\"));\n\n  router.viewService._pluginapi._viewConfigFactory('ng1', getNg1ViewConfigFactory());\n\n  let ng1LocationService = router.locationService = router.locationConfig = new Ng1LocationServices($locationProvider);\n\n  Ng1LocationServices.monkeyPatchPathParameterType(router);\n\n  // backwards compat: also expose router instance as $uiRouterProvider.router\n  router['router'] = router;\n  router['$get'] = $get;\n  $get.$inject = ['$location', '$browser', '$sniffer', '$rootScope', '$http', '$templateCache'];\n  function $get($location: ILocationService, $browser: any, $sniffer: any, $rootScope: ng.IScope, $http: IHttpService, $templateCache: ITemplateCacheService) {\n    ng1LocationService._runtimeServices($rootScope, $location, $sniffer, $browser);\n    delete router['router'];\n    delete router['$get'];\n    return router;\n  }\n  return router;\n}\n\nconst getProviderFor = (serviceName) => [ '$uiRouterProvider', ($urp) => {\n  let service = $urp.router[serviceName];\n  service[\"$get\"] = () => service;\n  return service;\n}];\n\n// This effectively calls $get() on `$uiRouterProvider` to trigger init (when ng enters runtime)\nrunBlock.$inject = ['$injector', '$q', '$uiRouter'];\nfunction runBlock($injector: IInjectorService, $q: IQService, $uiRouter: UIRouter) {\n  services.$injector = $injector;\n  services.$q = <any> $q;\n\n  // The $injector is now available.\n  // Find any resolvables that had dependency annotation deferred\n  $uiRouter.stateRegistry.get()\n      .map(x => x.$$state().resolvables)\n      .reduce(unnestR, [])\n      .filter(x => x.deps === \"deferred\")\n      .forEach(resolvable => resolvable.deps = $injector.annotate(resolvable.resolveFn, $injector.strictDi));\n}\n\n// $urlRouter service and $urlRouterProvider\nconst getUrlRouterProvider = (uiRouter: UIRouter) =>\n  uiRouter.urlRouterProvider = new UrlRouterProvider(uiRouter);\n\n// $state service and $stateProvider\n// $urlRouter service and $urlRouterProvider\nconst getStateProvider = () =>\n    extend(router.stateProvider, { $get: () => router.stateService });\n\nwatchDigests.$inject = ['$rootScope'];\nexport function watchDigests($rootScope: IRootScopeService) {\n  $rootScope.$watch(function() { trace.approximateDigests++; });\n}\n\nmod_init .provider(\"$uiRouter\",          <any> $uiRouter);\nmod_rtr  .provider('$urlRouter',         ['$uiRouterProvider', getUrlRouterProvider]);\nmod_util .provider('$urlService',        getProviderFor('urlService'));\nmod_util .provider('$urlMatcherFactory', ['$uiRouterProvider', () => router.urlMatcherFactory]);\nmod_util .provider('$templateFactory',   () => new TemplateFactory());\nmod_state.provider('$stateRegistry',     getProviderFor('stateRegistry'));\nmod_state.provider('$uiRouterGlobals',   getProviderFor('globals'));\nmod_state.provider('$transitions',       getProviderFor('transitionService'));\nmod_state.provider('$state',             ['$uiRouterProvider', getStateProvider]);\n\nmod_state.factory ('$stateParams',       ['$uiRouter', ($uiRouter: UIRouter) => $uiRouter.globals.params]);\nmod_main .factory ('$view',              () => router.viewService);\nmod_main .service (\"$trace\",             () => trace);\n\nmod_main .run     (watchDigests);\nmod_util .run     (['$urlMatcherFactory', function ($urlMatcherFactory: UrlMatcherFactory) { }]);\nmod_state.run     (['$state', function ($state: StateService) { }]);\nmod_rtr  .run     (['$urlRouter', function ($urlRouter: UrlRouter) { }]);\nmod_init .run     (runBlock);\n\n/** @hidden TODO: find a place to move this */\nexport const getLocals = (ctx: ResolveContext): TypedMap<any> => {\n  let tokens = ctx.getTokens().filter(isString);\n\n  let tuples = tokens .map(key => {\n    let resolvable = ctx.getResolvable(key);\n    let waitPolicy = ctx.getPolicy(resolvable).async;\n    return [ key, waitPolicy === 'NOWAIT' ? resolvable.promise : resolvable.data ];\n  });\n\n  return tuples.reduce(applyPairs, {});\n};\n\n","/**\n * # Angular 1 Directives\n *\n * These are the directives included in UI-Router for Angular 1.\n * These directives are used in templates to create viewports and link/navigate to states.\n *\n * @ng1api\n * @preferred\n * @module directives\n */ /** for typedoc */\nimport { ng as angular } from \"../angular\";\nimport { IAugmentedJQuery, ITimeoutService, IScope, IInterpolateService } from \"angular\";\n\nimport {\n    Obj, extend, forEach, tail, isString, isObject, isArray, parse, noop, unnestR, identity, uniqR, inArray, removeFrom,\n    RawParams, PathNode, StateOrName, StateService, StateDeclaration, UIRouter\n} from \"@uirouter/core\";\nimport { UIViewData } from \"./viewDirective\";\n\n/** @hidden Used for typedoc */\nexport interface ng1_directive {}\n\n/** @hidden */\nfunction parseStateRef(ref: string) {\n  let paramsOnly = ref.match(/^\\s*({[^}]*})\\s*$/), parsed;\n  if (paramsOnly) ref = '(' + paramsOnly[1] + ')';\n\n  parsed = ref.replace(/\\n/g, \" \").match(/^\\s*([^(]*?)\\s*(\\((.*)\\))?\\s*$/);\n  if (!parsed || parsed.length !== 4) throw new Error(\"Invalid state ref '\" + ref + \"'\");\n  return { state: parsed[1] || null, paramExpr: parsed[3] || null };\n}\n\n/** @hidden */\nfunction stateContext(el: IAugmentedJQuery) {\n  let $uiView: UIViewData = (el.parent() as IAugmentedJQuery).inheritedData('$uiView');\n  let path: PathNode[] = parse('$cfg.path')($uiView);\n  return path ? tail(path).state.name : undefined;\n}\n\n/** @hidden */\nfunction processedDef($state: StateService, $element: IAugmentedJQuery, def: Def): Def {\n  let uiState = def.uiState || $state.current.name;\n  let uiStateOpts = extend(defaultOpts($element, $state), def.uiStateOpts || {});\n  let href = $state.href(uiState, def.uiStateParams, uiStateOpts);\n  return { uiState, uiStateParams: def.uiStateParams, uiStateOpts, href };\n}\n\n/** @hidden */\ninterface TypeInfo {\n  attr: string;\n  isAnchor: boolean;\n  clickable: boolean;\n}\n\n/** @hidden */\nfunction getTypeInfo(el: IAugmentedJQuery): TypeInfo {\n  // SVGAElement does not use the href attribute, but rather the 'xlinkHref' attribute.\n  var isSvg = Object.prototype.toString.call(el.prop('href')) === '[object SVGAnimatedString]';\n  var isForm = el[0].nodeName === \"FORM\";\n\n  return {\n    attr: isForm ? \"action\" : (isSvg ? 'xlink:href' : 'href'),\n    isAnchor: el.prop(\"tagName\").toUpperCase() === \"A\",\n    clickable: !isForm\n  };\n}\n\n/** @hidden */\nfunction clickHook(el: IAugmentedJQuery, $state: StateService, $timeout: ITimeoutService, type: TypeInfo, getDef: () => Def) {\n  return function (e: JQueryMouseEventObject) {\n    var button = e.which || e.button, target = getDef();\n\n    if (!(button > 1 || e.ctrlKey || e.metaKey || e.shiftKey || el.attr('target'))) {\n      // HACK: This is to allow ng-clicks to be processed before the transition is initiated:\n      var transition = $timeout(function () {\n        $state.go(target.uiState, target.uiStateParams, target.uiStateOpts);\n      });\n      e.preventDefault();\n\n      // if the state has no URL, ignore one preventDefault from the <a> directive.\n      var ignorePreventDefaultCount = type.isAnchor && !target.href ? 1 : 0;\n\n      e.preventDefault = function () {\n        if (ignorePreventDefaultCount-- <= 0) $timeout.cancel(transition);\n      };\n    }\n  };\n}\n\n/** @hidden */\nfunction defaultOpts(el: IAugmentedJQuery, $state: StateService) {\n  return {\n    relative: stateContext(el) || $state.$current,\n    inherit: true,\n    source: \"sref\"\n  };\n}\n\n/** @hidden */\nfunction bindEvents(element: IAugmentedJQuery, scope: IScope, hookFn: (e: JQueryMouseEventObject) => void, uiStateOpts: any): void {\n  let events;\n\n  if (uiStateOpts) {\n    events = uiStateOpts.events;\n  }\n\n  if (!isArray(events)) {\n    events = ['click'];\n  }\n\n  let on = element.on ? 'on' : 'bind';\n  for (let event of events) {\n    element[on](event, hookFn);\n  }\n\n  scope.$on('$destroy', function() {\n    let off = element.off ? 'off' : 'unbind';\n    for (let event of events) {\n      element[off](event, hookFn);\n    }\n  });\n}\n\n/**\n * `ui-sref`: A directive for linking to a state\n *\n * A directive which links to a state (and optionally, parameters).\n * When clicked, this directive activates the linked state with the supplied parameter values.\n *\n * ### Linked State\n * The attribute value of the `ui-sref` is the name of the state to link to.\n *\n * #### Example:\n * This will activate the `home` state when the link is clicked.\n * ```html\n * <a ui-sref=\"home\">Home</a>\n * ```\n *\n * ### Relative Links\n * You can also use relative state paths within `ui-sref`, just like a relative path passed to `$state.go()` ([[StateService.go]]).\n * You just need to be aware that the path is relative to the state that *created* the link.\n * This allows a state to create a relative `ui-sref` which always targets the same destination.\n *\n * #### Example:\n * Both these links are relative to the parent state, even when a child state is currently active.\n * ```html\n * <a ui-sref=\".child1\">child 1 state</a>\n * <a ui-sref=\".child2\">child 2 state</a>\n * ```\n *\n * This link activates the parent state.\n * ```html\n * <a ui-sref=\"^\">Return</a>\n * ```\n *\n * ### hrefs\n * If the linked state has a URL, the directive will automatically generate and\n * update the `href` attribute (using the [[StateService.href]]  method).\n *\n * #### Example:\n * Assuming the `users` state has a url of `/users/`\n * ```html\n * <a ui-sref=\"users\" href=\"/users/\">Users</a>\n * ```\n *\n * ### Parameter Values\n * In addition to the state name, a `ui-sref` can include parameter values which are applied when activating the state.\n * Param values can be provided in the `ui-sref` value after the state name, enclosed by parentheses.\n * The content inside the parentheses is an expression, evaluated to the parameter values.\n *\n * #### Example:\n * This example renders a list of links to users.\n * The state's `userId` parameter value comes from each user's `user.id` property.\n * ```html\n * <li ng-repeat=\"user in users\">\n *   <a ui-sref=\"users.detail({ userId: user.id })\">{{ user.displayName }}</a>\n * </li>\n * ```\n *\n * Note:\n * The parameter values expression is `$watch`ed for updates.\n *\n * ### Transition Options\n * You can specify [[TransitionOptions]] to pass to [[StateService.go]] by using the `ui-sref-opts` attribute.\n * Options are restricted to `location`, `inherit`, and `reload`.\n *\n * #### Example:\n * ```html\n * <a ui-sref=\"home\" ui-sref-opts=\"{ reload: true }\">Home</a>\n * ```\n *\n * ### Other DOM Events\n *\n * You can also customize which DOM events to respond to (instead of `click`) by\n * providing an `events` array in the `ui-sref-opts` attribute.\n *\n * #### Example:\n * ```html\n * <input type=\"text\" ui-sref=\"contacts\" ui-sref-opts=\"{ events: ['change', 'blur'] }\">\n * ```\n *\n * ### Highlighting the active link\n * This directive can be used in conjunction with [[uiSrefActive]] to highlight the active link.\n *\n * ### Examples\n * If you have the following template:\n *\n * ```html\n * <a ui-sref=\"home\">Home</a>\n * <a ui-sref=\"about\">About</a>\n * <a ui-sref=\"{page: 2}\">Next page</a>\n *\n * <ul>\n *     <li ng-repeat=\"contact in contacts\">\n *         <a ui-sref=\"contacts.detail({ id: contact.id })\">{{ contact.name }}</a>\n *     </li>\n * </ul>\n * ```\n *\n * Then (assuming the current state is `contacts`) the rendered html including hrefs would be:\n *\n * ```html\n * <a href=\"#/home\" ui-sref=\"home\">Home</a>\n * <a href=\"#/about\" ui-sref=\"about\">About</a>\n * <a href=\"#/contacts?page=2\" ui-sref=\"{page: 2}\">Next page</a>\n *\n * <ul>\n *     <li ng-repeat=\"contact in contacts\">\n *         <a href=\"#/contacts/1\" ui-sref=\"contacts.detail({ id: contact.id })\">Joe</a>\n *     </li>\n *     <li ng-repeat=\"contact in contacts\">\n *         <a href=\"#/contacts/2\" ui-sref=\"contacts.detail({ id: contact.id })\">Alice</a>\n *     </li>\n *     <li ng-repeat=\"contact in contacts\">\n *         <a href=\"#/contacts/3\" ui-sref=\"contacts.detail({ id: contact.id })\">Bob</a>\n *     </li>\n * </ul>\n *\n * <a href=\"#/home\" ui-sref=\"home\" ui-sref-opts=\"{reload: true}\">Home</a>\n * ```\n *\n * ### Notes\n *\n * - You can use `ui-sref` to change **only the parameter values** by omitting the state name and parentheses.\n * #### Example:\n * Sets the `lang` parameter to `en` and remains on the same state.\n *\n * ```html\n * <a ui-sref=\"{ lang: 'en' }\">English</a>\n * ```\n *\n * - A middle-click, right-click, or ctrl-click is handled (natively) by the browser to open the href in a new window, for example.\n *\n * - Unlike the parameter values expression, the state name is not `$watch`ed (for performance reasons).\n * If you need to dynamically update the state being linked to, use the fully dynamic [[uiState]] directive.\n */\nlet uiSref: ng1_directive;\nuiSref = ['$uiRouter', '$timeout',\n  function $StateRefDirective($uiRouter: UIRouter, $timeout: ITimeoutService) {\n    let $state = $uiRouter.stateService;\n\n    return {\n      restrict: 'A',\n      require: ['?^uiSrefActive', '?^uiSrefActiveEq'],\n      link: function (scope: IScope, element: IAugmentedJQuery, attrs: any, uiSrefActive: any) {\n        let type = getTypeInfo(element);\n        let active = uiSrefActive[1] || uiSrefActive[0];\n        let unlinkInfoFn: Function = null;\n        let hookFn;\n\n        let rawDef = {} as Def;\n        let getDef = () => processedDef($state, element, rawDef);\n\n        let ref = parseStateRef(attrs.uiSref);\n        rawDef.uiState = ref.state;\n        rawDef.uiStateOpts = attrs.uiSrefOpts ? scope.$eval(attrs.uiSrefOpts) : {};\n\n        function update() {\n          let def = getDef();\n          if (unlinkInfoFn) unlinkInfoFn();\n          if (active) unlinkInfoFn = active.$$addStateInfo(def.uiState, def.uiStateParams);\n          if (def.href != null) attrs.$set(type.attr, def.href);\n        }\n\n        if (ref.paramExpr) {\n          scope.$watch(ref.paramExpr, function (val) {\n            rawDef.uiStateParams = extend({}, val);\n            update();\n          }, true);\n          rawDef.uiStateParams = extend({}, scope.$eval(ref.paramExpr));\n        }\n\n        update();\n\n        scope.$on('$destroy', <any> $uiRouter.stateRegistry.onStatesChanged(update));\n        scope.$on('$destroy', <any> $uiRouter.transitionService.onSuccess({}, update));\n\n        if (!type.clickable) return;\n        hookFn = clickHook(element, $state, $timeout, type, getDef);\n        bindEvents(element, scope, hookFn, rawDef.uiStateOpts);\n      }\n    };\n  }];\n\n/**\n * `ui-state`: A fully dynamic directive for linking to a state\n *\n * A directive which links to a state (and optionally, parameters).\n * When clicked, this directive activates the linked state with the supplied parameter values.\n *\n * **This directive is very similar to [[uiSref]], but it `$observe`s and `$watch`es/evaluates all its inputs.**\n *\n * A directive which links to a state (and optionally, parameters).\n * When clicked, this directive activates the linked state with the supplied parameter values.\n *\n * ### Linked State\n * The attribute value of `ui-state` is an expression which is `$watch`ed and evaluated as the state to link to.\n * **This is in contrast with `ui-sref`, which takes a state name as a string literal.**\n *\n * #### Example:\n * Create a list of links.\n * ```html\n * <li ng-repeat=\"link in navlinks\">\n *   <a ui-state=\"link.state\">{{ link.displayName }}</a>\n * </li>\n * ```\n *\n * ### Relative Links\n * If the expression evaluates to a relative path, it is processed like [[uiSref]].\n * You just need to be aware that the path is relative to the state that *created* the link.\n * This allows a state to create relative `ui-state` which always targets the same destination.\n *\n * ### hrefs\n * If the linked state has a URL, the directive will automatically generate and\n * update the `href` attribute (using the [[StateService.href]]  method).\n *\n * ### Parameter Values\n * In addition to the state name expression, a `ui-state` can include parameter values which are applied when activating the state.\n * Param values should be provided using the `ui-state-params` attribute.\n * The `ui-state-params` attribute value is `$watch`ed and evaluated as an expression.\n *\n * #### Example:\n * This example renders a list of links with param values.\n * The state's `userId` parameter value comes from each user's `user.id` property.\n * ```html\n * <li ng-repeat=\"link in navlinks\">\n *   <a ui-state=\"link.state\" ui-state-params=\"link.params\">{{ link.displayName }}</a>\n * </li>\n * ```\n *\n * ### Transition Options\n * You can specify [[TransitionOptions]] to pass to [[StateService.go]] by using the `ui-state-opts` attribute.\n * Options are restricted to `location`, `inherit`, and `reload`.\n * The value of the `ui-state-opts` is `$watch`ed and evaluated as an expression.\n *\n * #### Example:\n * ```html\n * <a ui-state=\"returnto.state\" ui-state-opts=\"{ reload: true }\">Home</a>\n * ```\n *\n * ### Other DOM Events\n *\n * You can also customize which DOM events to respond to (instead of `click`) by\n * providing an `events` array in the `ui-state-opts` attribute.\n *\n * #### Example:\n * ```html\n * <input type=\"text\" ui-state=\"contacts\" ui-state-opts=\"{ events: ['change', 'blur'] }\">\n * ```\n *\n * ### Highlighting the active link\n * This directive can be used in conjunction with [[uiSrefActive]] to highlight the active link.\n *\n * ### Notes\n *\n * - You can use `ui-params` to change **only the parameter values** by omitting the state name and supplying only `ui-state-params`.\n *   However, it might be simpler to use [[uiSref]] parameter-only links.\n *\n * #### Example:\n * Sets the `lang` parameter to `en` and remains on the same state.\n *\n * ```html\n * <a ui-state=\"\" ui-state-params=\"{ lang: 'en' }\">English</a>\n * ```\n *\n * - A middle-click, right-click, or ctrl-click is handled (natively) by the browser to open the href in a new window, for example.\n * ```\n */\nlet uiState: ng1_directive;\nuiState = ['$uiRouter', '$timeout',\n  function $StateRefDynamicDirective($uiRouter: UIRouter, $timeout: ITimeoutService) {\n    let $state = $uiRouter.stateService;\n\n    return {\n      restrict: 'A',\n      require: ['?^uiSrefActive', '?^uiSrefActiveEq'],\n      link: function (scope: IScope, element: IAugmentedJQuery, attrs: any, uiSrefActive: any) {\n        let type = getTypeInfo(element);\n        let active = uiSrefActive[1] || uiSrefActive[0];\n        let unlinkInfoFn: Function = null;\n        let hookFn;\n\n        let rawDef = {} as Def;\n        let getDef = () => processedDef($state, element, rawDef);\n\n        let inputAttrs = ['uiState', 'uiStateParams', 'uiStateOpts'];\n        let watchDeregFns = inputAttrs.reduce((acc, attr) => (acc[attr] = noop, acc), {});\n\n        function update() {\n          let def = getDef();\n          if (unlinkInfoFn) unlinkInfoFn();\n          if (active) unlinkInfoFn = active.$$addStateInfo(def.uiState, def.uiStateParams);\n          if (def.href != null) attrs.$set(type.attr, def.href);\n        }\n\n        inputAttrs.forEach((field) => {\n          rawDef[field] = attrs[field] ? scope.$eval(attrs[field]) : null;\n\n          attrs.$observe(field, (expr) => {\n            watchDeregFns[field]();\n            watchDeregFns[field] = scope.$watch(expr, (newval) => {\n              rawDef[field] = newval;\n              update();\n            }, true);\n          })\n        });\n\n        update();\n\n        scope.$on('$destroy', <any> $uiRouter.stateRegistry.onStatesChanged(update));\n        scope.$on('$destroy', <any> $uiRouter.transitionService.onSuccess({}, update));\n\n        if (!type.clickable) return;\n        hookFn = clickHook(element, $state, $timeout, type, getDef);\n        bindEvents(element, scope, hookFn, rawDef.uiStateOpts);\n      }\n    };\n  }];\n\n\n/**\n * `ui-sref-active` and `ui-sref-active-eq`: A directive that adds a CSS class when a `ui-sref` is active\n *\n * A directive working alongside [[uiSref]] and [[uiState]] to add classes to an element when the\n * related directive's state is active (and remove them when it is inactive).\n *\n * The primary use-case is to highlight the active link in navigation menus,\n * distinguishing it from the inactive menu items.\n *\n * ### Linking to a `ui-sref` or `ui-state`\n * `ui-sref-active` can live on the same element as `ui-sref`/`ui-state`, or it can be on a parent element.\n * If a `ui-sref-active` is a parent to more than one `ui-sref`/`ui-state`, it will apply the CSS class when **any of the links are active**.\n *\n * ### Matching\n *\n * The `ui-sref-active` directive applies the CSS class when the `ui-sref`/`ui-state`'s target state **or any child state is active**.\n * This is a \"fuzzy match\" which uses [[StateService.includes]].\n *\n * The `ui-sref-active-eq` directive applies the CSS class when the `ui-sref`/`ui-state`'s target state is directly active (not when child states are active).\n * This is an \"exact match\" which uses [[StateService.is]].\n *\n * ### Parameter values\n * If the `ui-sref`/`ui-state` includes parameter values, the current parameter values must match the link's values for the link to be highlighted.\n * This allows a list of links to the same state with different parameters to be rendered, and the correct one highlighted.\n *\n * #### Example:\n * ```html\n * <li ng-repeat=\"user in users\" ui-sref-active=\"active\">\n *   <a ui-sref=\"user.details({ userId: user.id })\">{{ user.lastName }}</a>\n * </li>\n * ```\n *\n * ### Examples\n *\n * Given the following template:\n * #### Example:\n * ```html\n * <ul>\n *   <li ui-sref-active=\"active\" class=\"item\">\n *     <a href ui-sref=\"app.user({user: 'bilbobaggins'})\">@bilbobaggins</a>\n *   </li>\n * </ul>\n * ```\n *\n * When the app state is `app.user` (or any child state),\n * and contains the state parameter \"user\" with value \"bilbobaggins\",\n * the resulting HTML will appear as (note the 'active' class):\n *\n * ```html\n * <ul>\n *   <li ui-sref-active=\"active\" class=\"item active\">\n *     <a ui-sref=\"app.user({user: 'bilbobaggins'})\" href=\"/users/bilbobaggins\">@bilbobaggins</a>\n *   </li>\n * </ul>\n * ```\n *\n * ### Glob mode\n *\n * It is possible to pass `ui-sref-active` an expression that evaluates to an object.\n * The objects keys represent active class names and values represent the respective state names/globs.\n * `ui-sref-active` will match if the current active state **includes** any of\n * the specified state names/globs, even the abstract ones.\n *\n * #### Example:\n * Given the following template, with \"admin\" being an abstract state:\n * ```html\n * <div ui-sref-active=\"{'active': 'admin.**'}\">\n *   <a ui-sref-active=\"active\" ui-sref=\"admin.roles\">Roles</a>\n * </div>\n * ```\n *\n * When the current state is \"admin.roles\" the \"active\" class will be applied to both the <div> and <a> elements.\n * It is important to note that the state names/globs passed to `ui-sref-active` override any state provided by a linked `ui-sref`.\n *\n * ### Notes:\n *\n * - The class name is interpolated **once** during the directives link time (any further changes to the\n * interpolated value are ignored).\n *\n * - Multiple classes may be specified in a space-separated format: `ui-sref-active='class1 class2 class3'`\n */\nlet uiSrefActive: ng1_directive;\nuiSrefActive = ['$state', '$stateParams', '$interpolate', '$uiRouter',\n  function $StateRefActiveDirective($state: StateService, $stateParams: Obj, $interpolate: IInterpolateService, $uiRouter: UIRouter) {\n    return {\n      restrict: \"A\",\n      controller: ['$scope', '$element', '$attrs',\n        function ($scope: IScope, $element: IAugmentedJQuery, $attrs: any) {\n          let states: StateData[] = [],\n              activeEqClass: string,\n              uiSrefActive: any;\n\n          // There probably isn't much point in $observing this\n          // uiSrefActive and uiSrefActiveEq share the same directive object with some\n          // slight difference in logic routing\n          activeEqClass = $interpolate($attrs.uiSrefActiveEq || '', false)($scope);\n\n          try {\n            uiSrefActive = $scope.$eval($attrs.uiSrefActive);\n          } catch (e) {\n            // Do nothing. uiSrefActive is not a valid expression.\n            // Fall back to using $interpolate below\n          }\n          uiSrefActive = uiSrefActive || $interpolate($attrs.uiSrefActive || '', false)($scope);\n          if (isObject(uiSrefActive)) {\n            forEach(uiSrefActive, function (stateOrName: StateOrName, activeClass: string) {\n              if (isString(stateOrName)) {\n                let ref = parseStateRef(stateOrName);\n                addState(ref.state, $scope.$eval(ref.paramExpr), activeClass);\n              }\n            });\n          }\n\n          // Allow uiSref to communicate with uiSrefActive[Equals]\n          this.$$addStateInfo = function (newState: string, newParams: Obj) {\n            // we already got an explicit state provided by ui-sref-active, so we\n            // shadow the one that comes from ui-sref\n            if (isObject(uiSrefActive) && states.length > 0) {\n              return;\n            }\n            let deregister = addState(newState, newParams, uiSrefActive);\n            update();\n            return deregister;\n          };\n\n          function updateAfterTransition(trans) {\n            trans.promise.then(update, noop);\n          }\n\n          $scope.$on('$stateChangeSuccess', update);\n          $scope.$on('$destroy', <any> $uiRouter.transitionService.onStart({}, updateAfterTransition));\n          if ($uiRouter.globals.transition) {\n            updateAfterTransition($uiRouter.globals.transition);\n          }\n\n          function addState(stateName: string, stateParams: Obj, activeClass: string) {\n            var state = $state.get(stateName, stateContext($element));\n\n            var stateInfo = {\n              state: state || { name: stateName },\n              params: stateParams,\n              activeClass: activeClass\n            };\n\n            states.push(stateInfo);\n\n            return function removeState() {\n              removeFrom(states)(stateInfo);\n            }\n          }\n\n          // Update route state\n          function update() {\n            const splitClasses = str =>\n                str.split(/\\s/).filter(identity);\n            const getClasses = (stateList: StateData[]) =>\n                stateList.map(x => x.activeClass).map(splitClasses).reduce(unnestR, []);\n\n            let allClasses = getClasses(states).concat(splitClasses(activeEqClass)).reduce(uniqR, []);\n            let fuzzyClasses = getClasses(states.filter(x => $state.includes(x.state.name, x.params)));\n            let exactlyMatchesAny = !!states.filter(x => $state.is(x.state.name, x.params)).length;\n            let exactClasses = exactlyMatchesAny ? splitClasses(activeEqClass) : [];\n\n            let addClasses = fuzzyClasses.concat(exactClasses).reduce(uniqR, []);\n            let removeClasses = allClasses.filter(cls => !inArray(addClasses, cls));\n\n            $scope.$evalAsync(() => {\n              addClasses.forEach(className => $element.addClass(className));\n              removeClasses.forEach(className => $element.removeClass(className));\n            });\n          }\n\n          update();\n        }]\n    };\n  }];\n\n/** @hidden */\ninterface Def { uiState: string; href: string; uiStateParams: Obj; uiStateOpts: any; }\n/** @hidden */\ninterface StateData { state: StateDeclaration; params: RawParams; activeClass: string; }\n\nangular.module('ui.router.state')\n    .directive('uiSref', uiSref)\n    .directive('uiSrefActive', uiSrefActive)\n    .directive('uiSrefActiveEq', uiSrefActive)\n    .directive('uiState', uiState);\n","/** @module ng1 */ /** for typedoc */\n\nimport { ng as angular } from \"./angular\";\nimport { Obj, StateService, StateOrName } from \"@uirouter/core\";\n\n/**\n * `isState` Filter: truthy if the current state is the parameter\n *\n * Translates to [[StateService.is]] `$state.is(\"stateName\")`.\n *\n * #### Example:\n * ```html\n * <div ng-if=\"'stateName' | isState\">show if state is 'stateName'</div>\n * ```\n */\n$IsStateFilter.$inject = ['$state'];\nexport function $IsStateFilter($state: StateService) {\n  var isFilter: any = function(state: StateOrName, params: Obj, options?: { relative?: StateOrName }) {\n    return $state.is(state, params, options);\n  };\n  isFilter.$stateful = true;\n  return isFilter;\n}\n\n/**\n * `includedByState` Filter: truthy if the current state includes the parameter\n *\n * Translates to [[StateService.includes]]` $state.is(\"fullOrPartialStateName\")`.\n *\n * #### Example:\n * ```html\n * <div ng-if=\"'fullOrPartialStateName' | includedByState\">show if state includes 'fullOrPartialStateName'</div>\n * ```\n */\n$IncludedByStateFilter.$inject = ['$state'];\nexport function $IncludedByStateFilter($state: StateService) {\n  var includesFilter: any = function(state: StateOrName, params: Obj, options: { relative?: StateOrName }) {\n    return $state.includes(state, params, options);\n  };\n  includesFilter.$stateful = true;\n  return  includesFilter;\n}\n\nangular.module('ui.router.state')\n  .filter('isState', $IsStateFilter)\n  .filter('includedByState', $IncludedByStateFilter);\n","/** \n * @ng1api \n * @module directives \n */ /** for typedoc */\nimport { ng as angular } from \"../angular\";\nimport {\n    IInterpolateService, IScope, ITranscludeFunction, IAugmentedJQuery,\n    ICompileService, IControllerService, ITimeoutService, noop\n} from \"angular\";\n\nimport {\n    extend, unnestR, filter, tail, isDefined, isFunction, isString, trace, parse,\n    ActiveUIView, TransitionService, ResolveContext, Transition, PathNode, StateDeclaration,\n    Param, kebobString, HookRegOptions, ViewService, $QLike, Obj, TypedMap\n} from \"@uirouter/core\";\nimport {Ng1ViewConfig} from \"../statebuilders/views\";\nimport {Ng1Controller, Ng1StateDeclaration} from \"../interface\";\nimport {getLocals} from \"../services\";\nimport { ng1_directive } from \"./stateDirectives\";\n\n/** @hidden */\nexport type UIViewData = {\n  $cfg: Ng1ViewConfig;\n  $uiView: ActiveUIView;\n}\n\n/** @hidden */\nexport type UIViewAnimData = {\n  $animEnter: Promise<any>;\n  $animLeave: Promise<any>;\n  $$animLeave: { resolve: () => any; } // \"deferred\"\n}\n\n/**\n * `ui-view`: A viewport directive which is filled in by a view from the active state.\n *\n * ### Attributes\n *\n * - `name`: (Optional) A view name.\n *   The name should be unique amongst the other views in the same state.\n *   You can have views of the same name that live in different states.\n *   The ui-view can be targeted in a View using the name ([[Ng1StateDeclaration.views]]).\n *\n * - `autoscroll`: an expression. When it evaluates to true, the `ui-view` will be scrolled into view when it is activated.\n *   Uses [[$uiViewScroll]] to do the scrolling.\n *\n * - `onload`: Expression to evaluate whenever the view updates.\n *\n * #### Example:\n * A view can be unnamed or named.\n * ```html\n * <!-- Unnamed -->\n * <div ui-view></div>\n *\n * <!-- Named -->\n * <div ui-view=\"viewName\"></div>\n *\n * <!-- Named (different style) -->\n * <ui-view name=\"viewName\"></ui-view>\n * ```\n *\n * You can only have one unnamed view within any template (or root html). If you are only using a\n * single view and it is unnamed then you can populate it like so:\n *\n * ```html\n * <div ui-view></div>\n * $stateProvider.state(\"home\", {\n *   template: \"<h1>HELLO!</h1>\"\n * })\n * ```\n *\n * The above is a convenient shortcut equivalent to specifying your view explicitly with the\n * [[Ng1StateDeclaration.views]] config property, by name, in this case an empty name:\n *\n * ```js\n * $stateProvider.state(\"home\", {\n *   views: {\n *     \"\": {\n *       template: \"<h1>HELLO!</h1>\"\n *     }\n *   }\n * })\n * ```\n *\n * But typically you'll only use the views property if you name your view or have more than one view\n * in the same template. There's not really a compelling reason to name a view if its the only one,\n * but you could if you wanted, like so:\n *\n * ```html\n * <div ui-view=\"main\"></div>\n * ```\n *\n * ```js\n * $stateProvider.state(\"home\", {\n *   views: {\n *     \"main\": {\n *       template: \"<h1>HELLO!</h1>\"\n *     }\n *   }\n * })\n * ```\n *\n * Really though, you'll use views to set up multiple views:\n *\n * ```html\n * <div ui-view></div>\n * <div ui-view=\"chart\"></div>\n * <div ui-view=\"data\"></div>\n * ```\n *\n * ```js\n * $stateProvider.state(\"home\", {\n *   views: {\n *     \"\": {\n *       template: \"<h1>HELLO!</h1>\"\n *     },\n *     \"chart\": {\n *       template: \"<chart_thing/>\"\n *     },\n *     \"data\": {\n *       template: \"<data_thing/>\"\n *     }\n *   }\n * })\n * ```\n *\n * #### Examples for `autoscroll`:\n * ```html\n * <!-- If autoscroll present with no expression,\n *      then scroll ui-view into view -->\n * <ui-view autoscroll/>\n *\n * <!-- If autoscroll present with valid expression,\n *      then scroll ui-view into view if expression evaluates to true -->\n * <ui-view autoscroll='true'/>\n * <ui-view autoscroll='false'/>\n * <ui-view autoscroll='scopeVariable'/>\n * ```\n *\n * Resolve data:\n *\n * The resolved data from the state's `resolve` block is placed on the scope as `$resolve` (this\n * can be customized using [[Ng1ViewDeclaration.resolveAs]]).  This can be then accessed from the template.\n *\n * Note that when `controllerAs` is being used, `$resolve` is set on the controller instance *after* the\n * controller is instantiated.  The `$onInit()` hook can be used to perform initialization code which\n * depends on `$resolve` data.\n *\n * #### Example:\n * ```js\n * $stateProvider.state('home', {\n *   template: '<my-component user=\"$resolve.user\"></my-component>',\n *   resolve: {\n *     user: function(UserService) { return UserService.fetchUser(); }\n *   }\n * });\n * ```\n */\nexport let uiView: ng1_directive;\nuiView = ['$view', '$animate', '$uiViewScroll', '$interpolate', '$q',\nfunction $ViewDirective($view: ViewService, $animate: any, $uiViewScroll: any, $interpolate: IInterpolateService, $q: $QLike) {\n\n  function getRenderer(attrs: Obj, scope: IScope) {\n    return {\n      enter: function(element: JQuery, target: any, cb: Function) {\n        if (angular.version.minor > 2) {\n          $animate.enter(element, null, target).then(cb);\n        } else {\n          $animate.enter(element, null, target, cb);\n        }\n      },\n      leave: function(element: JQuery, cb: Function) {\n        if (angular.version.minor > 2) {\n          $animate.leave(element).then(cb);\n        } else {\n          $animate.leave(element, cb);\n        }\n      }\n    };\n  }\n\n  function configsEqual(config1: Ng1ViewConfig, config2: Ng1ViewConfig) {\n    return config1 === config2;\n  }\n\n  let rootData = {\n    $cfg: { viewDecl: { $context: $view._pluginapi._rootViewContext() } },\n    $uiView: { }\n  };\n\n  let directive = {\n    count: 0,\n    restrict: 'ECA',\n    terminal: true,\n    priority: 400,\n    transclude: 'element',\n    compile: function (tElement: JQuery, tAttrs: Obj, $transclude: ITranscludeFunction) {\n\n      return function (scope: IScope, $element: IAugmentedJQuery, attrs: Obj) {\n        let previousEl: JQuery, currentEl: JQuery,\n            currentScope: IScope, unregister: Function,\n            onloadExp     = attrs['onload'] || '',\n            autoScrollExp = attrs['autoscroll'],\n            renderer      = getRenderer(attrs, scope),\n            viewConfig    = undefined as Ng1ViewConfig,\n            inherited     = $element.inheritedData('$uiView') || rootData,\n            name          = $interpolate(attrs['uiView'] || attrs['name'] || '')(scope) || '$default';\n\n        let activeUIView: ActiveUIView = {\n          $type: 'ng1',\n          id: directive.count++,                                   // Global sequential ID for ui-view tags added to DOM\n          name: name,                                              // ui-view name (<div ui-view=\"name\"></div>\n          fqn: inherited.$uiView.fqn ? inherited.$uiView.fqn + \".\" + name : name, // fully qualified name, describes location in DOM\n          config: null,                                            // The ViewConfig loaded (from a state.views definition)\n          configUpdated: configUpdatedCallback,                    // Called when the matching ViewConfig changes\n          get creationContext() {                                  // The context in which this ui-view \"tag\" was created\n            let fromParentTagConfig = parse('$cfg.viewDecl.$context')(inherited);\n            // Allow <ui-view name=\"foo\"><ui-view name=\"bar\"></ui-view></ui-view>\n            // See https://github.com/angular-ui/ui-router/issues/3355\n            let fromParentTag = parse('$uiView.creationContext')(inherited);\n            return fromParentTagConfig || fromParentTag;\n          }\n        };\n\n        trace.traceUIViewEvent(\"Linking\", activeUIView);\n\n        function configUpdatedCallback(config?: Ng1ViewConfig) {\n          if (config && !(config instanceof Ng1ViewConfig)) return;\n          if (configsEqual(viewConfig, config)) return;\n          trace.traceUIViewConfigUpdated(activeUIView, config && config.viewDecl && config.viewDecl.$context);\n\n          viewConfig = config;\n          updateView(config);\n        }\n\n        $element.data('$uiView', { $uiView: activeUIView });\n\n        updateView();\n\n        unregister = $view.registerUIView(activeUIView);\n        scope.$on(\"$destroy\", function() {\n          trace.traceUIViewEvent(\"Destroying/Unregistering\", activeUIView);\n          unregister();\n        });\n\n        function cleanupLastView() {\n          if (previousEl) {\n            trace.traceUIViewEvent(\"Removing (previous) el\", previousEl.data('$uiView'));\n            previousEl.remove();\n            previousEl = null;\n          }\n\n          if (currentScope) {\n            trace.traceUIViewEvent(\"Destroying scope\", activeUIView);\n            currentScope.$destroy();\n            currentScope = null;\n          }\n\n          if (currentEl) {\n            let _viewData = currentEl.data('$uiViewAnim');\n            trace.traceUIViewEvent(\"Animate out\", _viewData);\n            renderer.leave(currentEl, function() {\n              _viewData.$$animLeave.resolve();\n              previousEl = null;\n            });\n\n            previousEl = currentEl;\n            currentEl = null;\n          }\n        }\n\n        function updateView(config?: Ng1ViewConfig) {\n          let newScope = scope.$new();\n          let animEnter = $q.defer(), animLeave = $q.defer();\n\n          let $uiViewData: UIViewData = {\n            $cfg: config,\n            $uiView: activeUIView,\n          };\n\n          let $uiViewAnim: UIViewAnimData = {\n            $animEnter: animEnter.promise,\n            $animLeave: animLeave.promise,\n            $$animLeave: animLeave\n          };\n\n          /**\n           * @ngdoc event\n           * @name ui.router.state.directive:ui-view#$viewContentLoading\n           * @eventOf ui.router.state.directive:ui-view\n           * @eventType emits on ui-view directive scope\n           * @description\n           *\n           * Fired once the view **begins loading**, *before* the DOM is rendered.\n           *\n           * @param {Object} event Event object.\n           * @param {string} viewName Name of the view.\n           */\n          newScope.$emit('$viewContentLoading', name);\n\n          let cloned = $transclude(newScope, function(clone) {\n            clone.data('$uiViewAnim', $uiViewAnim);\n            clone.data('$uiView', $uiViewData);\n            renderer.enter(clone, $element, function onUIViewEnter() {\n              animEnter.resolve();\n              if (currentScope) currentScope.$emit('$viewContentAnimationEnded');\n\n              if (isDefined(autoScrollExp) && !autoScrollExp || scope.$eval(autoScrollExp)) {\n                $uiViewScroll(clone);\n              }\n            });\n\n            cleanupLastView();\n          });\n\n          currentEl = cloned;\n          currentScope = newScope;\n          /**\n           * @ngdoc event\n           * @name ui.router.state.directive:ui-view#$viewContentLoaded\n           * @eventOf ui.router.state.directive:ui-view\n           * @eventType emits on ui-view directive scope\n           * @description           *\n           * Fired once the view is **loaded**, *after* the DOM is rendered.\n           *\n           * @param {Object} event Event object.\n           */\n          currentScope.$emit('$viewContentLoaded', config || viewConfig);\n          currentScope.$eval(onloadExp);\n        }\n      };\n    }\n  };\n\n  return directive;\n}];\n\n$ViewDirectiveFill.$inject = ['$compile', '$controller', '$transitions', '$view', '$q', '$timeout'];\n/** @hidden */\nfunction $ViewDirectiveFill($compile: angular.ICompileService,\n                            $controller: angular.IControllerService,\n                            $transitions: TransitionService,\n                            $view: ViewService,\n                            $q: angular.IQService,\n                            $timeout: ITimeoutService) {\n  const getControllerAs = parse('viewDecl.controllerAs');\n  const getResolveAs = parse('viewDecl.resolveAs');\n\n  return {\n    restrict: 'ECA',\n    priority: -400,\n    compile: function (tElement: JQuery) {\n      let initial = tElement.html();\n      tElement.empty();\n\n      return function (scope: IScope, $element: JQuery) {\n        let data: UIViewData = $element.data('$uiView');\n        if (!data) {\n            $element.html(initial);\n            $compile($element.contents())(scope);\n            return;\n        }\n\n        let cfg: Ng1ViewConfig = data.$cfg || <any> { viewDecl: {}, getTemplate: noop };\n        let resolveCtx: ResolveContext = cfg.path && new ResolveContext(cfg.path);\n        $element.html(cfg.getTemplate($element, resolveCtx) || initial);\n        trace.traceUIViewFill(data.$uiView, $element.html());\n\n        let link = $compile($element.contents());\n        let controller = cfg.controller;\n        let controllerAs: string = getControllerAs(cfg);\n        let resolveAs: string = getResolveAs(cfg);\n        let locals = resolveCtx && getLocals(resolveCtx);\n\n        scope[resolveAs] = locals;\n\n        if (controller) {\n          let controllerInstance = <Ng1Controller> $controller(controller, extend({}, locals, { $scope: scope, $element: $element }));\n          if (controllerAs) {\n            scope[controllerAs] = controllerInstance;\n            scope[controllerAs][resolveAs] = locals;\n          }\n\n          // TODO: Use $view service as a central point for registering component-level hooks\n          // Then, when a component is created, tell the $view service, so it can invoke hooks\n          // $view.componentLoaded(controllerInstance, { $scope: scope, $element: $element });\n          // scope.$on('$destroy', () => $view.componentUnloaded(controllerInstance, { $scope: scope, $element: $element }));\n\n          $element.data('$ngControllerController', controllerInstance);\n          $element.children().data('$ngControllerController', controllerInstance);\n\n          registerControllerCallbacks($q, $transitions, controllerInstance, scope, cfg);\n        }\n\n        // Wait for the component to appear in the DOM\n        if (isString(cfg.viewDecl.component)) {\n          let cmp = cfg.viewDecl.component;\n          let kebobName = kebobString(cmp);\n          let tagRegexp = new RegExp(`^(x-|data-)?${kebobName}$`, \"i\");\n\n          let getComponentController = () => {\n            let directiveEl = [].slice.call($element[0].children)\n                .filter((el: Element) => el && el.tagName && tagRegexp.exec(el.tagName)) ;\n            \n            return directiveEl && angular.element(directiveEl).data(`$${cmp}Controller`);\n          };\n\n          let deregisterWatch = scope.$watch(getComponentController, function(ctrlInstance) {\n            if (!ctrlInstance) return;\n            registerControllerCallbacks($q, $transitions, ctrlInstance, scope, cfg);\n            deregisterWatch();\n          });\n        }\n\n        link(scope);\n      };\n    }\n  };\n}\n\n/** @hidden */\nlet hasComponentImpl = typeof (angular as any).module('ui.router')['component'] === 'function';\n/** @hidden incrementing id */\nlet _uiCanExitId = 0;\n\n/** @hidden TODO: move these callbacks to $view and/or `/hooks/components.ts` or something */\nfunction registerControllerCallbacks($q: angular.IQService,\n                                     $transitions: TransitionService,\n                                     controllerInstance: Ng1Controller,\n                                     $scope: IScope,\n                                     cfg: Ng1ViewConfig) {\n  // Call $onInit() ASAP\n  if (isFunction(controllerInstance.$onInit) && !(cfg.viewDecl.component && hasComponentImpl)) {\n    controllerInstance.$onInit();\n  }\n\n  let viewState: Ng1StateDeclaration = tail(cfg.path).state.self;\n\n  let hookOptions: HookRegOptions = { bind: controllerInstance };\n  // Add component-level hook for onParamsChange\n  if (isFunction(controllerInstance.uiOnParamsChanged)) {\n    let resolveContext: ResolveContext = new ResolveContext(cfg.path);\n    let viewCreationTrans = resolveContext.getResolvable('$transition$').data;\n\n    // Fire callback on any successful transition\n    const paramsUpdated = ($transition$: Transition) => {\n      // Exit early if the $transition$ is the same as the view was created within.\n      // Exit early if the $transition$ will exit the state the view is for.\n      if ($transition$ === viewCreationTrans || $transition$.exiting().indexOf(viewState as StateDeclaration) !== -1) return;\n\n      let toParams = $transition$.params(\"to\") as TypedMap<any>;\n      let fromParams = $transition$.params<TypedMap<any>>(\"from\") as TypedMap<any>;\n      let toSchema: Param[] = $transition$.treeChanges().to.map((node: PathNode) => node.paramSchema).reduce(unnestR, []);\n      let fromSchema: Param[] = $transition$.treeChanges().from.map((node: PathNode) => node.paramSchema).reduce(unnestR, []);\n\n      // Find the to params that have different values than the from params\n      let changedToParams = toSchema.filter((param: Param) => {\n        let idx = fromSchema.indexOf(param);\n        return idx === -1 || !fromSchema[idx].type.equals(toParams[param.id], fromParams[param.id]);\n      });\n\n      // Only trigger callback if a to param has changed or is new\n      if (changedToParams.length) {\n        let changedKeys: string[] = changedToParams.map(x => x.id);\n        // Filter the params to only changed/new to params.  `$transition$.params()` may be used to get all params.\n        let newValues = filter(toParams, (val, key) => changedKeys.indexOf(key) !== -1);\n        controllerInstance.uiOnParamsChanged(newValues, $transition$);\n      }\n    };\n    $scope.$on('$destroy', <any> $transitions.onSuccess({}, paramsUpdated, hookOptions));\n  }\n\n  // Add component-level hook for uiCanExit\n  if (isFunction(controllerInstance.uiCanExit)) {\n    let id = _uiCanExitId++;\n    let cacheProp = '_uiCanExitIds';\n\n    // Returns true if a redirect transition already answered truthy\n    const prevTruthyAnswer = (trans: Transition) =>\n        !!trans && (trans[cacheProp] && trans[cacheProp][id] === true || prevTruthyAnswer(trans.redirectedFrom()));\n\n    // If a user answered yes, but the transition was later redirected, don't also ask for the new redirect transition\n    const wrappedHook = (trans: Transition) => {\n      let promise, ids = trans[cacheProp] = trans[cacheProp] || {};\n      if (!prevTruthyAnswer(trans)) {\n        promise = $q.when(controllerInstance.uiCanExit(trans));\n        promise.then(val => ids[id] = (val !== false));\n      }\n      return promise;\n    };\n\n    let criteria = {exiting: viewState.name};\n    $scope.$on('$destroy', <any> $transitions.onBefore(criteria, wrappedHook, hookOptions));\n  }\n}\n\nangular.module('ui.router.state').directive('uiView', <any> uiView);\nangular.module('ui.router.state').directive('uiView', <any> $ViewDirectiveFill);\n","/**\n * @hidden\n * @module ng1\n */ /** */\ndeclare var angular;\nimport * as ng_from_import from \"angular\";\nlet ng_from_global = angular;\n\nexport const ng = (ng_from_import && ng_from_import.module) ? ng_from_import : ng_from_global;\n","/**\n * @coreapi\n * @module core\n */\n/** \n * Matches state names using glob-like pattern strings.\n *\n * Globs can be used in specific APIs including:\n *\n * - [[StateService.is]]\n * - [[StateService.includes]]\n * - The first argument to Hook Registration functions like [[TransitionService.onStart]]\n *    - [[HookMatchCriteria]] and [[HookMatchCriterion]]\n *\n * A `Glob` string is a pattern which matches state names.\n * Nested state names are split into segments (separated by a dot) when processing.\n * The state named `foo.bar.baz` is split into three segments ['foo', 'bar', 'baz']\n *\n * Globs work according to the following rules:\n *\n * ### Exact match:\n *\n * The glob `'A.B'` matches the state named exactly `'A.B'`.\n *\n * | Glob        |Matches states named|Does not match state named|\n * |:------------|:--------------------|:---------------------|\n * | `'A'`       | `'A'`               | `'B'` , `'A.C'`      |\n * | `'A.B'`     | `'A.B'`             | `'A'` , `'A.B.C'`    |\n * | `'foo'`     | `'foo'`             | `'FOO'` , `'foo.bar'`|\n *\n * ### Single star (`*`)\n *\n * A single star (`*`) is a wildcard that matches exactly one segment.\n *\n * | Glob        |Matches states named  |Does not match state named |\n * |:------------|:---------------------|:--------------------------|\n * | `'*'`       | `'A'` , `'Z'`        | `'A.B'` , `'Z.Y.X'`       |\n * | `'A.*'`     | `'A.B'` , `'A.C'`    | `'A'` , `'A.B.C'`         |\n * | `'A.*.*'`   | `'A.B.C'` , `'A.X.Y'`| `'A'`, `'A.B'` , `'Z.Y.X'`|\n *\n * ### Double star (`**`)\n *\n * A double star (`'**'`) is a wildcard that matches *zero or more segments*\n *\n * | Glob        |Matches states named                           |Does not match state named         |\n * |:------------|:----------------------------------------------|:----------------------------------|\n * | `'**'`      | `'A'` , `'A.B'`, `'Z.Y.X'`                    | (matches all states)              |\n * | `'A.**'`    | `'A'` , `'A.B'` , `'A.C.X'`                   | `'Z.Y.X'`                         |\n * | `'**.X'`    | `'X'` , `'A.X'` , `'Z.Y.X'`                   | `'A'` , `'A.login.Z'`             |\n * | `'A.**.X'`  | `'A.X'` , `'A.B.X'` , `'A.B.C.X'`             | `'A'` , `'A.B.C'`                 |\n *\n */\nexport class Glob {\n  text: string;\n  glob: Array<string>;\n  regexp: RegExp;\n\n  constructor(text: string) {\n    this.text = text;\n    this.glob = text.split('.');\n\n    let regexpString = this.text.split('.')\n        .map(seg => {\n          if (seg === '**') return '(?:|(?:\\\\.[^.]*)*)';\n          if (seg === '*')  return '\\\\.[^.]*';\n          return                   '\\\\.' + seg;\n        }).join('');\n\n    this.regexp = new RegExp(\"^\" + regexpString + \"$\");\n  }\n\n  matches(name: string) {\n    return this.regexp.test('.' + name);\n  }\n\n  /** Returns true if the string has glob-like characters in it */\n  static is(text: string) {\n    return !!/[!,*]+/.exec(text);\n  }\n\n  /** Returns a glob from the string, or null if the string isn't Glob-like */\n  static fromString(text: string) {\n    return Glob.is(text) ? new Glob(text) : null;\n  }\n}\n","/**\n * @coreapi\n * @module state\n */\n/** for typedoc */\nimport { StateDeclaration, _ViewDeclaration, _StateDeclaration, LazyLoadResult } from \"./interface\";\nimport { defaults, values, find, inherit } from \"../common/common\";\nimport { propEq } from \"../common/hof\";\nimport { Param } from \"../params/param\";\nimport { UrlMatcher } from \"../url/urlMatcher\";\nimport { Resolvable } from \"../resolve/resolvable\";\nimport { TransitionStateHookFn } from \"../transition/interface\";\nimport { TargetState } from \"./targetState\";\nimport { Transition } from \"../transition/transition\";\nimport { Glob } from \"../common/glob\";\nimport { isObject, isFunction } from \"../common/predicates\";\n\n/**\n * Internal representation of a UI-Router state.\n *\n * Instances of this class are created when a [[StateDeclaration]] is registered with the [[StateRegistry]].\n *\n * A registered [[StateDeclaration]] is augmented with a getter ([[StateDeclaration.$$state]]) which returns the corresponding [[StateObject]] object.\n *\n * This class prototypally inherits from the corresponding [[StateDeclaration]].\n * Each of its own properties (i.e., `hasOwnProperty`) are built using builders from the [[StateBuilder]].\n */\nexport class StateObject {\n  /** The parent [[StateObject]] */\n  public parent: StateObject;\n\n  /** The name used to register the state */\n  public name: string;\n\n  /** Prototypally inherits from [[StateDeclaration.abstract]] */\n  public abstract: boolean;\n\n  /** Prototypally inherits from [[StateDeclaration.resolve]] */\n  public resolve: ({ [key: string]: (string|any[]|Function) }|any[]);\n\n  /** A list of [[Resolvable]] objects.  The internal representation of [[resolve]]. */\n  public resolvables: Resolvable[];\n\n  /** Prototypally inherits from [[StateDeclaration.resolvePolicy]] */\n  public resolvePolicy: any;\n\n  /** A compiled URLMatcher which detects when the state's URL is matched */\n  public url: UrlMatcher;\n\n  /** The parameters for the state, built from the URL and [[StateDeclaration.params]] */\n  public params: { [key: string]: Param };\n\n  /**\n   * The views for the state.\n   * Note: `@uirouter/core` does not register a builder for views.\n   * The framework specific code should register a `views` builder.\n   */\n  public views: { [key: string]: _ViewDeclaration; };\n\n  /**\n   * The original [[StateDeclaration]] used to build this [[StateObject]].\n   * Note: `this` object also prototypally inherits from the `self` declaration object.\n   */\n  public self: StateDeclaration;\n\n  /** The nearest parent [[StateObject]] which has a URL */\n  public navigable: StateObject;\n\n  /** The parent [[StateObject]] objects from this state up to the root */\n  public path: StateObject[];\n\n  /**\n   * Prototypally inherits from [[StateDeclaration.data]]\n   * Note: This is the only field on the [[StateDeclaration]] which is mutated.\n   * The definition object's `data` field is replaced with a new object\n   * which prototypally inherits from the parent state definition's `data` field.\n   */\n  public data: any;\n\n  /** \n   * An object containing the parent States' names as keys and \n   * true as their values.\n   */\n  public includes: { [name: string]: boolean };\n\n  /** Prototypally inherits from [[StateDeclaration.onExit]] */\n  public onExit: TransitionStateHookFn;\n  /** Prototypally inherits from [[StateDeclaration.onRetain]] */\n  public onRetain: TransitionStateHookFn;\n  /** Prototypally inherits from [[StateDeclaration.onEnter]] */\n  public onEnter: TransitionStateHookFn;\n\n  /** Prototypally inherits from [[StateDeclaration.lazyLoad]] */\n  public lazyLoad: (transition: Transition, state: StateDeclaration) => Promise<LazyLoadResult>;\n\n  /** Prototypally inherits from [[StateDeclaration.redirectTo]] */\n  redirectTo: (\n      string |\n      (($transition$: Transition) => TargetState) |\n      { state: (string|StateDeclaration), params: { [key: string]: any }}\n  );\n\n  /** @hidden */\n  __stateObjectCache: {\n    /** Might be null */\n    nameGlob?: Glob\n  };\n\n\n  /** @deprecated use State.create() */\n  constructor(config?: StateDeclaration) {\n    return StateObject.create(config || {});\n  }\n\n  /**\n   * Create a state object to put the private/internal implementation details onto.\n   * The object's prototype chain looks like:\n   * (Internal State Object) -> (Copy of State.prototype) -> (State Declaration object) -> (State Declaration's prototype...)\n   *\n   * @param stateDecl the user-supplied State Declaration\n   * @returns {StateObject} an internal State object\n   */\n  static create(stateDecl: _StateDeclaration): StateObject {\n    stateDecl = StateObject.isStateClass(stateDecl) ? new stateDecl() : stateDecl;\n\n    let state = inherit(inherit(stateDecl, StateObject.prototype)) as StateObject;\n    stateDecl.$$state = () => state;\n    state.self = stateDecl;\n    state.__stateObjectCache = {\n      nameGlob: Glob.fromString(state.name) // might return null\n    };\n    return state;\n  }\n\n  /** Predicate which returns true if the object is an class with @State() decorator */\n  static isStateClass = (stateDecl: _StateDeclaration): stateDecl is ({ new (): StateDeclaration }) =>\n      isFunction(stateDecl) && stateDecl['__uiRouterState'] === true;\n\n  /** Predicate which returns true if the object is an internal [[StateObject]] object */\n  static isState = (obj: any): obj is StateObject =>\n      isObject(obj['__stateObjectCache']);\n\n  /**\n   * Returns true if the provided parameter is the same state.\n   *\n   * Compares the identity of the state against the passed value, which is either an object\n   * reference to the actual `State` instance, the original definition object passed to\n   * `$stateProvider.state()`, or the fully-qualified name.\n   *\n   * @param ref Can be one of (a) a `State` instance, (b) an object that was passed\n   *        into `$stateProvider.state()`, (c) the fully-qualified name of a state as a string.\n   * @returns Returns `true` if `ref` matches the current `State` instance.\n   */\n  is(ref: StateObject|StateDeclaration|string): boolean {\n    return this === ref || this.self === ref || this.fqn() === ref;\n  }\n\n  /**\n   * @deprecated this does not properly handle dot notation\n   * @returns Returns a dot-separated name of the state.\n   */\n  fqn(): string {\n    if (!this.parent || !(this.parent instanceof this.constructor)) return this.name;\n    let name = this.parent.fqn();\n    return name ? name + \".\" + this.name : this.name;\n  }\n\n  /**\n   * Returns the root node of this state's tree.\n   *\n   * @returns The root of this state's tree.\n   */\n  root(): StateObject {\n    return this.parent && this.parent.root() || this;\n  }\n\n  /**\n   * Gets the state's `Param` objects\n   *\n   * Gets the list of [[Param]] objects owned by the state.\n   * If `opts.inherit` is true, it also includes the ancestor states' [[Param]] objects.\n   * If `opts.matchingKeys` exists, returns only `Param`s whose `id` is a key on the `matchingKeys` object\n   *\n   * @param opts options\n   */\n  parameters(opts?: { inherit?: boolean, matchingKeys?: any }): Param[] {\n    opts = defaults(opts, { inherit: true, matchingKeys: null });\n    let inherited = opts.inherit && this.parent && this.parent.parameters() || [];\n    return inherited.concat(values(this.params))\n        .filter(param => !opts.matchingKeys || opts.matchingKeys.hasOwnProperty(param.id));\n  }\n\n  /**\n   * Returns a single [[Param]] that is owned by the state\n   *\n   * If `opts.inherit` is true, it also searches the ancestor states` [[Param]]s.\n   * @param id the name of the [[Param]] to return\n   * @param opts options\n   */\n  parameter(id: string, opts: { inherit?: boolean } = {}): Param {\n    return (\n        this.url && this.url.parameter(id, opts) ||\n        find(values(this.params), propEq('id', id)) ||\n        opts.inherit && this.parent && this.parent.parameter(id)\n    );\n  }\n\n  toString() {\n    return this.fqn();\n  }\n}\n","/**\n * This module is a stub for core services such as Dependency Injection or Browser Location.\n * Core services may be implemented by a specific framework, such as ng1 or ng2, or be pure javascript.\n *\n * @module common\n */\n/** for typedoc */\nimport {IInjectable, Obj} from \"./common\";\nimport { Disposable } from \"../interface\";\nimport { UrlParts } from \"../url/interface\";\n\nexport let notImplemented = (fnname: string) => () => {\n  throw new Error(`${fnname}(): No coreservices implementation for UI-Router is loaded.`);\n};\n\nlet services: CoreServices = {\n  $q: undefined,\n  $injector: undefined,\n};\n\nexport interface $QLikeDeferred {\n  resolve: (val?: any) => void;\n  reject: (reason?: any) => void;\n  promise: Promise<any>;\n}\n\nexport interface $QLike {\n  when<T>(value?: T | PromiseLike<T>): Promise<T>;\n  reject<T>(reason: any): Promise<T>;\n  defer(): $QLikeDeferred;\n  all(promises: { [key: string]: Promise<any> }): Promise<any>;\n  all(promises: Promise<any>[]): Promise<any[]>;\n}\n\nexport interface $InjectorLike {\n  get(token: any): any;\n  get<T>(token: any): T;\n  has(token: any): boolean;\n  invoke(fn: IInjectable, context?: any, locals?: Obj): any;\n  annotate(fn: IInjectable, strictDi?: boolean): any[];\n  strictDi?: boolean;\n}\n\nexport interface CoreServices {\n  $q: $QLike;\n  $injector: $InjectorLike;\n}\n\nexport interface LocationServices extends Disposable {\n  /**\n   * Gets the current url string\n   *\n   * The URL is normalized using the internal [[path]]/[[search]]/[[hash]] values.\n   *\n   * For example, the URL may be stored in the hash ([[HashLocationServices]]) or\n   * have a base HREF prepended ([[PushStateLocationServices]]).\n   *\n   * The raw URL in the browser might be:\n   *\n   * ```\n   * http://mysite.com/somepath/index.html#/internal/path/123?param1=foo#anchor\n   * ```\n   *\n   * or\n   *\n   * ```\n   * http://mysite.com/basepath/internal/path/123?param1=foo#anchor\n   * ```\n   *\n   * then this method returns:\n   *\n   * ```\n   * /internal/path/123?param1=foo#anchor\n   * ```\n   *\n   *\n   * #### Example:\n   * ```js\n   * locationServices.url(); // \"/some/path?query=value#anchor\"\n   * ```\n   *\n   * @returns the current value of the url, as a string.\n   */\n  url(): string;\n\n  /**\n   * Updates the url, or gets the current url\n   *\n   * Updates the url, changing it to the value in `newurl`\n   *\n   * #### Example:\n   * ```js\n   * locationServices.url(\"/some/path?query=value#anchor\", true);\n   * ```\n   *\n   * @param newurl The new value for the URL.\n   *               This url should reflect only the new internal [[path]], [[search]], and [[hash]] values.\n   *               It should not include the protocol, site, port, or base path of an absolute HREF.\n   * @param replace When true, replaces the current history entry (instead of appending it) with this new url\n   * @param state The history's state object, i.e., pushState (if the LocationServices implementation supports it)\n   * @return the url (after potentially being processed)\n   */\n  url(newurl: string, replace?: boolean, state?: any): string;\n\n  /**\n   * Gets the path part of the current url\n   *\n   * If the current URL is `/some/path?query=value#anchor`, this returns `/some/path`\n   *\n   * @return the path portion of the url\n   */\n  path(): string;\n\n  /**\n   * Gets the search part of the current url as an object\n   *\n   * If the current URL is `/some/path?query=value#anchor`, this returns `{ query: 'value' }`\n   *\n   * @return the search (querystring) portion of the url, as an object\n   */\n  search(): { [key: string]: any };\n\n  /**\n   * Gets the hash part of the current url\n   *\n   * If the current URL is `/some/path?query=value#anchor`, this returns `anchor`\n   *\n   * @return the hash (anchor) portion of the url\n   */\n  hash(): string;\n\n  /**\n   * Registers a url change handler\n   *\n   * #### Example:\n   * ```js\n   * let deregisterFn = locationServices.onChange((evt) => console.log(\"url change\", evt));\n   * ```\n   *\n   * @param callback a function that will be called when the url is changing\n   * @return a function that de-registers the callback\n   */\n  onChange(callback: Function): Function;\n}\n\n/**\n * This service returns the location configuration\n *\n * This service returns information about the location configuration.\n * This service is primarily used when building URLs (e.g., for `hrefs`)\n */\nexport interface LocationConfig extends Disposable {\n  /**\n   * Gets the port, e.g., `80`\n   *\n   * @return the port number\n   */\n  port(): number;\n  /**\n   * Gets the protocol, e.g., `http`\n   *\n   * @return the protocol\n   */\n  protocol(): string;\n  /**\n   * Gets the host, e.g., `localhost`\n   *\n   * @return the protocol\n   */\n  host(): string;\n  /**\n   * Gets the base Href, e.g., `http://localhost/approot/`\n   *\n   * @return the application's base href\n   */\n  baseHref(): string;\n  /**\n   * Returns true when running in pushstate mode\n   *\n   * @return true when running in pushstate mode\n   */\n  html5Mode(): boolean;\n  /**\n   * Gets the hashPrefix (when not running in pushstate mode)\n   *\n   * If the current url is `http://localhost/app#!/uirouter/path/#anchor`, it returns `!` which is the prefix for the \"hashbang\" portion.\n   *\n   * @return the hash prefix\n   */\n  hashPrefix(): string;\n  /**\n   * Sets the hashPrefix (when not running in pushstate mode)\n   *\n   * @return the new hash prefix\n   */\n  hashPrefix(newprefix: string): string;\n}\n\nexport {services};\n","/**\n * @module common\n */ /** for typedoc */\n\nexport class Queue<T> {\n  constructor(private _items: T[] = [], private _limit: number = null) { }\n\n  enqueue(item: T) {\n    let items = this._items;\n    items.push(item);\n    if (this._limit && items.length > this._limit) items.shift();\n    return item;\n  }\n\n  dequeue(): T {\n    if (this.size())\n      return this._items.splice(0, 1)[0];\n  }\n\n  clear(): Array<T> {\n    let current = this._items;\n    this._items = [];\n    return current;\n  }\n\n  size(): number {\n    return this._items.length;\n  }\n\n  remove(item: T) {\n    let idx = this._items.indexOf(item);\n    return idx > -1 && this._items.splice(idx, 1)[0];\n  }\n\n  peekTail(): T {\n    return this._items[this._items.length - 1];\n  }\n\n  peekHead(): T {\n    if (this.size())\n      return this._items[0];\n  }\n}\n","/**\n * @coreapi\n * @module transition\n */ /** for typedoc */\n\"use strict\";\nimport {extend, silentRejection} from \"../common/common\";\nimport {stringify} from \"../common/strings\";\nimport { is } from '../common/hof';\n\nexport enum RejectType {\n  SUPERSEDED = 2, ABORTED = 3, INVALID = 4, IGNORED = 5, ERROR = 6\n}\n\n/** @hidden */ let id = 0;\n\nexport class Rejection {\n  $id = id++;\n  type: number;\n  message: string;\n  detail: any;\n  redirected: boolean;\n\n  constructor(type: number, message?: string, detail?: any) {\n    this.type = type;\n    this.message = message;\n    this.detail = detail;\n  }\n\n  toString() {\n    const detailString = (d: any) => \n        d && d.toString !== Object.prototype.toString ? d.toString() : stringify(d);\n    let detail = detailString(this.detail);\n    let { $id, type, message } = this;\n    return `Transition Rejection($id: ${$id} type: ${type}, message: ${message}, detail: ${detail})`;\n  }\n\n  toPromise(): Promise<any> {\n    return extend(silentRejection(this), { _transitionRejection: this });\n  }\n\n  /** Returns true if the obj is a rejected promise created from the `asPromise` factory */\n  static isRejectionPromise(obj: any): boolean {\n    return obj && (typeof obj.then === 'function') && is(Rejection)(obj._transitionRejection);\n  }\n\n  /** Returns a Rejection due to transition superseded */\n  static superseded(detail?: any, options?: any): Rejection {\n    let message = \"The transition has been superseded by a different transition\";\n    let rejection = new Rejection(RejectType.SUPERSEDED, message, detail);\n    if (options && options.redirected) {\n      rejection.redirected = true;\n    }\n    return rejection;\n  }\n\n  /** Returns a Rejection due to redirected transition */\n  static redirected(detail?: any): Rejection {\n    return Rejection.superseded(detail, { redirected: true });\n  }\n\n  /** Returns a Rejection due to invalid transition */\n  static invalid(detail?: any): Rejection {\n    let message = \"This transition is invalid\";\n    return new Rejection(RejectType.INVALID, message, detail);\n  }\n\n  /** Returns a Rejection due to ignored transition */\n  static ignored(detail?: any): Rejection {\n    let message = \"The transition was ignored\";\n    return new Rejection(RejectType.IGNORED, message, detail);\n  }\n\n  /** Returns a Rejection due to aborted transition */\n  static aborted(detail?: any): Rejection {\n    let message = \"The transition has been aborted\";\n    return new Rejection(RejectType.ABORTED, message, detail);\n  }\n\n  /** Returns a Rejection due to aborted transition */\n  static errored(detail?: any): Rejection {\n    let message = \"The transition errored\";\n    return new Rejection(RejectType.ERROR, message, detail);\n  }\n  \n  /**\n   * Returns a Rejection\n   *\n   * Normalizes a value as a Rejection.\n   * If the value is already a Rejection, returns it.\n   * Otherwise, wraps and returns the value as a Rejection (Rejection type: ERROR).\n   *\n   * @returns `detail` if it is already a `Rejection`, else returns an ERROR Rejection.\n   */\n  static normalize(detail?: Rejection | Error | any): Rejection {\n    return is(Rejection)(detail) ? detail : Rejection.errored(detail);\n  }\n}\n","/**\n * @coreapi\n * @module transition\n */ /** for typedoc */\nimport {StateDeclaration} from \"../state/interface\";\nimport {Predicate} from \"../common/common\";\n\nimport {Transition} from \"./transition\";\nimport {StateObject} from \"../state/stateObject\";\nimport {PathNode} from \"../path/pathNode\";\nimport {TargetState} from \"../state/targetState\";\nimport {RegisteredHook} from \"./hookRegistry\";\n\n/**\n * The TransitionOptions object can be used to change the behavior of a transition.\n *\n * It is passed as the third argument to [[StateService.go]], [[StateService.transitionTo]].\n * It can also be used with a `uiSref`.\n */\nexport interface TransitionOptions {\n  /**\n   * This option changes how the Transition interacts with the browser's location bar (URL).\n   *\n   * - If `true`, it will update the url in the location bar.\n   * - If `false`, it will not update the url in the location bar.\n   * - If it is the string `\"replace\"`, it will update the url and also replace the last history record.\n   *\n   * @default `true`\n   */\n  location    ?: (boolean|string);\n\n  /**\n   * When transitioning to relative path (e.g '`^`'), this option defines which state to be relative from.\n   * @default `$state.current`\n   */\n  relative    ?: (string|StateDeclaration|StateObject);\n\n  /**\n   * This option sets whether or not the transition's parameter values should be inherited from\n   * the current parameter values.\n   *\n   * - If `true`, it will inherit parameter values from the current parameter values.\n   * - If `false`, only the parameters which are provided to `transitionTo` will be used.\n   *\n   * @default `false`\n   */\n  inherit     ?: boolean;\n\n  /**\n   * @deprecated\n   */\n  notify      ?: boolean;\n\n  /**\n   * This option may be used to force states which are currently active to reload.\n   *\n   * During a normal transition, a state is \"retained\" if:\n   * - It was previously active\n   * - The state's parameter values have not changed\n   * - All the parent states' parameter values have not changed\n   *\n   * Forcing a reload of a state will cause it to be exited and entered, which will:\n   * - Refetch that state's resolve data\n   * - Exit the state (onExit hook)\n   * - Re-enter the state (onEnter hook)\n   * - Re-render the views (controllers and templates)\n   *\n   * - When `true`, the destination state (and all parent states) will be reloaded.\n   * - When it is a string and is the name of a state, or when it is a State object,\n   *   that state and any children states will be reloaded.\n   *\n   * @default `false`\n   */\n  reload      ?: (boolean|string|StateDeclaration|StateObject);\n  /**\n   * You can define your own Transition Options inside this property and use them, e.g., from a Transition Hook\n   */\n  custom      ?: any;\n  /** @internalapi */\n  reloadState ?: (StateObject);\n  /** @internalapi\n   * If this transition is a redirect, this property should be the original Transition (which was redirected to this one)\n   */\n  redirectedFrom?: Transition;\n  /** @internalapi */\n  current     ?: () => Transition;\n  /** @internalapi */\n  source      ?: \"sref\" | \"url\" | \"redirect\" | \"otherwise\" | \"unknown\";\n}\n\n/** @internalapi */\nexport interface TransitionHookOptions {\n  current             ?: () => Transition;  //path?\n  transition          ?: Transition;\n  hookType            ?: string;\n  target              ?: any;\n  traceData           ?: any;\n  bind                ?: any;\n  stateHook           ?: boolean;\n}\n\n/**\n * TreeChanges encapsulates the various Paths that are involved in a Transition.\n *\n * Get a TreeChanges object using [[Transition.treeChanges]]\n *\n * A UI-Router Transition is from one Path in a State Tree to another Path.  For a given Transition,\n * this object stores the \"to\" and \"from\" paths, as well as subsets of those: the \"retained\",\n * \"exiting\" and \"entering\" paths.\n *\n * Each path in TreeChanges is an array of [[PathNode]] objects. Each PathNode in the array corresponds to a portion\n * of a nested state.\n *\n * For example, if you had a nested state named `foo.bar.baz`, it would have three\n * portions, `foo, bar, baz`.  If you transitioned **to** `foo.bar.baz` and inspected the [[TreeChanges.to]]\n * Path, you would find a node in the array for each portion: `foo`, `bar`, and `baz`.\n *\n * ---\n *\n * @todo show visual state tree\n */\nexport interface TreeChanges {\n  /** @nodoc */\n  [key: string]: PathNode[];\n\n  /** The path of nodes in the state tree that the transition is coming *from* */\n  from: PathNode[];\n\n  /** The path of nodes in the state tree that the transition is going *to* */\n  to: PathNode[];\n\n  /**\n   * The path of active nodes that the transition is retaining.\n   *\n   * These nodes are neither exited, nor entered.\n   * Before and after the transition is successful, these nodes are active.\n   */\n  retained: PathNode[];\n\n  /**\n   * The path of previously active nodes that the transition is exiting.\n   *\n   * After the Transition is successful, these nodes are no longer active.\n   *\n   * Note that a state that is being reloaded (due to parameter values changing, or `reload: true`) may be in both the\n   * `exiting` and `entering` paths.\n   */\n  exiting: PathNode[];\n\n  /**\n   * The path of nodes that the transition is entering.\n   *\n   * After the Transition is successful, these nodes will be active.\n   * Because they are entering, they have their resolves fetched, `onEnter` hooks run, and their views\n   * (component(s) or controller(s)+template(s)) refreshed.\n   *\n   * Note that a state that is reloaded (due to parameter values changing, or `reload: true`) may be in both the\n   * `exiting` and `entering` paths.\n   */\n  entering: PathNode[];\n}\n\nexport type IHookRegistration = (matchCriteria: HookMatchCriteria, callback: HookFn, options?: HookRegOptions) => Function;\n\n/**\n * The signature for Transition Hooks.\n *\n * Transition hooks are callback functions that hook into the lifecycle of transitions.\n * As a transition runs, it reaches certain lifecycle events.\n * As each event occurs, the hooks which are registered for the event are called (in priority order).\n *\n * A transition hook may alter a Transition by returning a [[HookResult]].\n *\n * #### See:\n *\n * - [[IHookRegistry.onBefore]]\n * - [[IHookRegistry.onStart]]\n * - [[IHookRegistry.onFinish]]\n * - [[IHookRegistry.onSuccess]]\n * - [[IHookRegistry.onError]]\n *\n * @param transition the current [[Transition]]\n * @param injector (for ng1 or ng2 only) the injector service\n *\n * @returns a [[HookResult]] which may alter the transition\n *\n */\nexport interface TransitionHookFn {\n  (transition: Transition) : HookResult;\n}\n\n/**\n * The signature for Transition State Hooks.\n *\n * A function which hooks into a lifecycle event for a specific state.\n *\n * Transition State Hooks are callback functions that hook into the lifecycle events of specific states during a transition.\n * As a transition runs, it may exit some states, retain (keep) states, and enter states.\n * As each lifecycle event occurs, the hooks which are registered for the event and that state are called (in priority order).\n *\n * #### See:\n *\n * - [[IHookRegistry.onExit]]\n * - [[IHookRegistry.onRetain]]\n * - [[IHookRegistry.onEnter]]\n *\n * @param transition the current [[Transition]]\n * @param state the [[StateObject]] that the hook is bound to\n * @param injector (for ng1 or ng2 only) the injector service\n *\n * @returns a [[HookResult]] which may alter the transition\n */\nexport interface TransitionStateHookFn {\n  (transition: Transition, state: StateDeclaration) : HookResult;\n}\n\n/**\n * The signature for Transition onCreate Hooks.\n *\n * Transition onCreate Hooks are callbacks that allow customization or preprocessing of\n * a Transition before it is returned from [[TransitionService.create]]\n *\n * @param transition the [[Transition]] that was just created\n * @return a [[Transition]] which will then be returned from [[TransitionService.create]]\n */\nexport interface TransitionCreateHookFn {\n  (transition: Transition): void;\n}\n\nexport type HookFn = (TransitionHookFn|TransitionStateHookFn|TransitionCreateHookFn);\n\n/**\n * The return value of a [[TransitionHookFn]] or [[TransitionStateHookFn]]\n *\n * When returned from a [[TransitionHookFn]] or [[TransitionStateHookFn]], these values alter the running [[Transition]]:\n *\n * - `false`: the transition will be cancelled.\n * - [[TargetState]]: the transition will be redirected to the new target state (see: [[StateService.target]])\n * - `Promise`: the transition will wait for the promise to resolve or reject\n *    - If the promise is rejected (or resolves to `false`), the transition will be cancelled\n *    - If the promise resolves to a [[TargetState]], the transition will be redirected\n *    - If the promise resolves to anything else, the transition will resume\n * - Anything else: the transition will resume\n */\nexport type HookResult = (boolean | TargetState | void | Promise<boolean|TargetState|void>);\n\n/**\n * These options may be provided when registering a Transition Hook (such as `onStart`)\n */\nexport interface HookRegOptions {\n  /**\n   * Sets the priority of the registered hook\n   *\n   * Hooks of the same type (onBefore, onStart, etc) are invoked in priority order.  A hook with a higher priority\n   * is invoked before a hook with a lower priority.\n   *\n   * The default hook priority is 0\n   */\n  priority?: number;\n\n  /**\n   * Specifies what `this` is bound to during hook invocation.\n   */\n  bind?: any;\n}\n\n/**\n * This interface specifies the api for registering Transition Hooks.  Both the\n * [[TransitionService]] and also the [[Transition]] object itself implement this interface.\n * Note: the Transition object only allows hooks to be registered before the Transition is started.\n */\nexport interface IHookRegistry {\n  /**\n   * Registers a [[TransitionHookFn]], called *before a transition starts*.\n   *\n   * Registers a transition lifecycle hook, which is invoked before a transition even begins.\n   * This hook can be useful to implement logic which prevents a transition from even starting, such\n   * as authentication, redirection\n   *\n   * See [[TransitionHookFn]] for the signature of the function.\n   *\n   * The [[HookMatchCriteria]] is used to determine which Transitions the hook should be invoked for.\n   * To match all Transitions, use an empty criteria object `{}`.\n   *\n   * ### Lifecycle\n   *\n   * `onBefore` hooks are invoked *before a Transition starts*.\n   * No resolves have been fetched yet.\n   * Each `onBefore` hook is invoked synchronously, in the same call stack as [[StateService.transitionTo]].\n   * The registered `onBefore` hooks are invoked in priority order.\n   *\n   * Note: during the `onBefore` phase, additional hooks can be added to the specific [[Transition]] instance.\n   * These \"on-the-fly\" hooks only affect the currently running transition..\n   *\n   * ### Return value\n   *\n   * The hook's return value can be used to pause, cancel, or redirect the current Transition.\n   * See [[HookResult]] for more information.\n   *\n   * If any hook modifies the transition *synchronously* (by throwing, returning `false`, or returning\n   * a [[TargetState]]), the remainder of the hooks are skipped.\n   * If a hook returns a promise, the remainder of the `onBefore` hooks are still invoked synchronously.\n   * All promises are resolved, and processed asynchronously before the `onStart` phase of the Transition.\n   *\n   * ### Examples\n   *\n   * #### Default Substate\n   *\n   * This example redirects any transition from 'home' to 'home.dashboard'.  This is commonly referred to as a\n   * \"default substate\".\n   *\n   * @example\n   * ```js\n   * // ng2\n   * transitionService.onBefore({ to: 'home' }, (trans: Transition) =>\n   *     trans.router.stateService.target(\"home.dashboard\"));\n   * ```\n   *\n   * #### Data Driven Default Substate\n   *\n   * This example provides data-driven default substate functionality. It matches on a transition to any state\n   * which has `defaultSubstate: \"some.sub.state\"` defined.  See: [[Transition.to]] which returns the \"to state\"\n   * definition.\n   *\n   * @example\n   * ```js\n   * // ng1\n   * // state declaration\n   * {\n   *   name: 'home',\n   *   template: '<div ui-view/>',\n   *   defaultSubstate: 'home.dashboard'\n   * }\n   *\n   * var criteria = {\n   *   to: function(state) {\n   *     return state.defaultSubstate != null;\n   *   }\n   * }\n   *\n   * $transitions.onBefore(criteria, function(trans: Transition) {\n   *   var substate = trans.to().defaultSubstate;\n   *   return trans.router.stateService.target(substate);\n   * });\n   * ```\n   *\n   *\n   * #### Require authentication\n   *\n   * This example cancels a transition to a state which requires authentication, if the user is not currently authenticated.\n   *\n   * This example assumes a state tree where all states which require authentication are children of a parent `'requireauth'` state.\n   * This example assumes `MyAuthService` synchronously returns a boolean from `isAuthenticated()`.\n   *\n   * #### Example:\n   * ```js\n   * // ng1\n   * $transitions.onBefore( { to: 'requireauth.**' }, function(trans) {\n   *   var myAuthService = trans.injector().get('MyAuthService');\n   *   // If isAuthenticated returns false, the transition is cancelled.\n   *   return myAuthService.isAuthenticated();\n   * });\n   * ```\n   *\n   * @param matchCriteria defines which Transitions the Hook should be invoked for.\n   * @param callback the hook function which will be invoked.\n   * @returns a function which deregisters the hook.\n   */\n  onBefore(matchCriteria: HookMatchCriteria, callback: TransitionHookFn, options?: HookRegOptions): Function;\n\n  /**\n   * Registers a [[TransitionHookFn]], called when a transition starts.\n   *\n   * Registers a transition lifecycle hook, which is invoked as a transition starts running.\n   * This hook can be useful to perform some asynchronous action before completing a transition.\n   *\n   * See [[TransitionHookFn]] for the signature of the function.\n   *\n   * The [[HookMatchCriteria]] is used to determine which Transitions the hook should be invoked for.\n   * To match all Transitions, use an empty criteria object `{}`.\n   *\n   * ### Lifecycle\n   *\n   * `onStart` hooks are invoked asynchronously when the Transition starts running.\n   * This happens after the `onBefore` phase is complete.\n   * At this point, the Transition has not yet exited nor entered any states.\n   * The registered `onStart` hooks are invoked in priority order.\n   *\n   * Note: A built-in `onStart` hook with high priority is used to fetch any eager resolve data.\n   *\n   * ### Return value\n   *\n   * The hook's return value can be used to pause, cancel, or redirect the current Transition.\n   * See [[HookResult]] for more information.\n   *\n   * ### Example\n   *\n   * #### Login during transition\n   *\n   * This example intercepts any transition to a state which requires authentication, when the user is\n   * not currently authenticated.  It allows the user to authenticate asynchronously, then resumes the\n   * transition.  If the user did not authenticate successfully, it redirects to the \"guest\" state, which\n   * does not require authentication.\n   *\n   * This example assumes:\n   * - a state tree where all states which require authentication are children of a parent `'auth'` state.\n   * - `MyAuthService.isAuthenticated()` synchronously returns a boolean.\n   * - `MyAuthService.authenticate()` presents a login dialog, and returns a promise which is resolved\n   *   or rejected, whether or not the login attempt was successful.\n   *\n   * #### Example:\n   * ```js\n   * // ng1\n   * $transitions.onStart( { to: 'auth.**' }, function(trans) {\n   *   var $state = trans.router.stateService;\n   *   var MyAuthService = trans.injector().get('MyAuthService');\n   *\n   *   // If the user is not authenticated\n   *   if (!MyAuthService.isAuthenticated()) {\n   *\n   *     // Then return a promise for a successful login.\n   *     // The transition will wait for this promise to settle\n   *\n   *     return MyAuthService.authenticate().catch(function() {\n   *\n   *       // If the authenticate() method failed for whatever reason,\n   *       // redirect to a 'guest' state which doesn't require auth.\n   *       return $state.target(\"guest\");\n   *     });\n   *   }\n   * });\n   * ```\n   *\n   * @param matchCriteria defines which Transitions the Hook should be invoked for.\n   * @param callback the hook function which will be injected and invoked.\n   * @returns a function which deregisters the hook.\n   */\n  onStart(matchCriteria: HookMatchCriteria, callback: TransitionHookFn, options?: HookRegOptions): Function;\n\n  /**\n   * Registers a [[TransitionStateHookFn]], called when a specific state is entered.\n   *\n   * Registers a lifecycle hook, which is invoked (during a transition) when a specific state is being entered.\n   *\n   * Since this hook is run only when the specific state is being *entered*, it can be useful for\n   * performing tasks when entering a submodule/feature area such as initializing a stateful service, \n   * or for guarding access to a submodule/feature area.\n   *\n   * See [[TransitionStateHookFn]] for the signature of the function.\n   *\n   * The [[HookMatchCriteria]] is used to determine which Transitions the hook should be invoked for.\n   * `onEnter` hooks generally specify `{ entering: 'somestate' }`.\n   * To match all Transitions, use an empty criteria object `{}`.\n   *\n   * ### Lifecycle\n   *\n   * `onEnter` hooks are invoked when the Transition is entering a state.\n   * States are entered after the `onRetain` phase is complete.\n   * If more than one state is being entered, the parent state is entered first.\n   * The registered `onEnter` hooks for a state are invoked in priority order.\n   *\n   * Note: A built-in `onEnter` hook with high priority is used to fetch lazy resolve data for states being entered.\n   *\n   * ### Return value\n   *\n   * The hook's return value can be used to pause, cancel, or redirect the current Transition.\n   * See [[HookResult]] for more information.\n   *\n   * ### Inside a state declaration\n   *\n   * Instead of registering `onEnter` hooks using the [[TransitionService]], you may define an `onEnter` hook\n   * directly on a state declaration (see: [[StateDeclaration.onEnter]]).\n   * \n   *\n   * ### Examples\n   *\n   * #### Audit Log\n   *\n   * This example uses a service to log that a user has entered the admin section of an app.\n   * This assumes that there are substates of the \"admin\" state, such as \"admin.users\", \"admin.pages\", etc.\n   * @example\n   * ```\n   *\n   * $transitions.onEnter({ entering: 'admin' }, function(transition, state) {\n   *   var AuditService = trans.injector().get('AuditService');\n   *   AuditService.log(\"Entered \" + state.name + \" module while transitioning to \" + transition.to().name);\n   * }\n   * ```\n   *\n   * #### Audit Log (inside a state declaration)\n   *\n   * The `onEnter` inside this state declaration is syntactic sugar for the previous Audit Log example.\n   * ```\n   * {\n   *   name: 'admin',\n   *   component: 'admin',\n   *   onEnter: function($transition$, $state$) {\n   *     var AuditService = $transition$.injector().get('AuditService');\n   *     AuditService.log(\"Entered \" + state.name + \" module while transitioning to \" + transition.to().name);\n   *   }\n   * }\n   * ```\n   *\n   * Note: A state declaration's `onEnter` function is injected for Angular 1 only.\n   *\n   * @param matchCriteria defines which Transitions the Hook should be invoked for.\n   * @param callback the hook function which will be injected and invoked.\n   * @returns a function which deregisters the hook.\n   */\n  onEnter(matchCriteria: HookMatchCriteria, callback: TransitionStateHookFn, options?: HookRegOptions): Function;\n\n  /**\n   * Registers a [[TransitionStateHookFn]], called when a specific state is retained/kept.\n   *\n   * Registers a lifecycle hook, which is invoked (during a transition) for\n   * a specific state that was previously active will remain active (is not being entered nor exited).\n   * \n   * This hook is invoked when a state is \"retained\" or \"kept\".\n   * It means the transition is coming *from* a substate of the retained state *to* a substate of the retained state.\n   * This hook can be used to perform actions when the user moves from one substate to another, such as between steps in a wizard.\n   *\n   * The [[HookMatchCriteria]] is used to determine which Transitions the hook should be invoked for.\n   * `onRetain` hooks generally specify `{ retained: 'somestate' }`.\n   * To match all Transitions, use an empty criteria object `{}`.\n   *\n   * ### Lifecycle\n   *\n   * `onRetain` hooks are invoked after any `onExit` hooks have been fired.\n   * If more than one state is retained, the child states' `onRetain` hooks are invoked first.\n   * The registered `onRetain` hooks for a state are invoked in priority order.\n   *\n   * ### Return value\n   *\n   * The hook's return value can be used to pause, cancel, or redirect the current Transition.\n   * See [[HookResult]] for more information.\n   *\n   * ### Inside a state declaration\n   *\n   * Instead of registering `onRetain` hooks using the [[TransitionService]], you may define an `onRetain` hook\n   * directly on a state declaration (see: [[StateDeclaration.onRetain]]).\n   *\n   * Note: A state declaration's `onRetain` function is injected for Angular 1 only.\n   *\n   * @param matchCriteria defines which Transitions the Hook should be invoked for.\n   * @param callback the hook function which will be injected and invoked.\n   * @returns a function which deregisters the hook.\n   */\n  onRetain(matchCriteria: HookMatchCriteria, callback: TransitionStateHookFn, options?: HookRegOptions): Function;\n\n  /**\n   * Registers a [[TransitionStateHookFn]], called when a specific state is exited.\n   *\n   * Registers a lifecycle hook, which is invoked (during a transition) when a specific state is being exited.\n   *\n   * Since this hook is run only when the specific state is being *exited*, it can be useful for\n   * performing tasks when leaving a submodule/feature area such as cleaning up a stateful service, \n   * or for preventing the user from leaving a state or submodule until some criteria is satisfied.\n   *\n   * See [[TransitionStateHookFn]] for the signature of the function.\n   *\n   * The [[HookMatchCriteria]] is used to determine which Transitions the hook should be invoked for.\n   * `onExit` hooks generally specify `{ exiting: 'somestate' }`.\n   * To match all Transitions, use an empty criteria object `{}`.\n   *\n   * ### Lifecycle\n   *\n   * `onExit` hooks are invoked when the Transition is exiting a state.\n   * States are exited after any `onStart` phase is complete.\n   * If more than one state is being exited, the child states are exited first.\n   * The registered `onExit` hooks for a state are invoked in priority order.\n   *\n   * ### Return value\n   *\n   * The hook's return value can be used to pause, cancel, or redirect the current Transition.\n   * See [[HookResult]] for more information.\n   *\n   * ### Inside a state declaration\n   *\n   * Instead of registering `onExit` hooks using the [[TransitionService]], you may define an `onExit` hook\n   * directly on a state declaration (see: [[StateDeclaration.onExit]]).\n   *\n   * Note: A state declaration's `onExit` function is injected for Angular 1 only.\n   *\n   * @param matchCriteria defines which Transitions the Hook should be invoked for.\n   * @param callback the hook function which will be injected and invoked.\n   * @returns a function which deregisters the hook.\n   */\n  onExit(matchCriteria: HookMatchCriteria, callback: TransitionStateHookFn, options?: HookRegOptions): Function;\n\n  /**\n   * Registers a [[TransitionHookFn]], called *just before a transition finishes*.\n   *\n   * Registers a transition lifecycle hook, which is invoked just before a transition finishes.\n   * This hook is a last chance to cancel or redirect a transition.\n   *\n   * See [[TransitionHookFn]] for the signature of the function.\n   *\n   * The [[HookMatchCriteria]] is used to determine which Transitions the hook should be invoked for.\n   * To match all Transitions, use an empty criteria object `{}`.\n   *\n   * ### Lifecycle\n   *\n   * `onFinish` hooks are invoked after the `onEnter` phase is complete.\n   * These hooks are invoked just before the transition is \"committed\".\n   * Each hook is invoked in priority order.\n   *\n   * ### Return value\n   *\n   * The hook's return value can be used to pause, cancel, or redirect the current Transition.\n   * See [[HookResult]] for more information.\n   *\n   * @param matchCriteria defines which Transitions the Hook should be invoked for.\n   * @param callback the hook function which will be injected and invoked.\n   * @returns a function which deregisters the hook.\n   */\n  onFinish(matchCriteria: HookMatchCriteria, callback: TransitionHookFn, options?: HookRegOptions): Function;\n\n  /**\n   * Registers a [[TransitionHookFn]], called after a successful transition completed.\n   *\n   * Registers a transition lifecycle hook, which is invoked after a transition successfully completes.\n   *\n   * See [[TransitionHookFn]] for the signature of the function.\n   *\n   * The [[HookMatchCriteria]] is used to determine which Transitions the hook should be invoked for.\n   * To match all Transitions, use an empty criteria object `{}`.\n   *\n   * ### Lifecycle\n   *\n   * `onSuccess` hooks are chained off the Transition's promise (see [[Transition.promise]]).\n   * If the Transition is successful and its promise is resolved, then the `onSuccess` hooks are invoked.\n   * Since these hooks are run after the transition is over, their return value is ignored.\n   * The `onSuccess` hooks are invoked in priority order.\n   *\n   * ### Return value\n   *\n   * Since the Transition is already completed, the hook's return value is ignored\n   *\n   * @param matchCriteria defines which Transitions the Hook should be invoked for.\n   * @param callback the hook function which will be injected and invoked.\n   * @returns a function which deregisters the hook.\n   */\n  onSuccess(matchCriteria: HookMatchCriteria, callback: TransitionHookFn, options?: HookRegOptions): Function;\n\n  /**\n   * Registers a [[TransitionHookFn]], called after a transition has errored.\n   *\n   * Registers a transition lifecycle hook, which is invoked after a transition has been rejected for any reason.\n   *\n   * See [[TransitionHookFn]] for the signature of the function.\n   *\n   * The [[HookMatchCriteria]] is used to determine which Transitions the hook should be invoked for.\n   * To match all Transitions, use an empty criteria object `{}`.\n   *\n   * ### Lifecycle\n   *\n   * The `onError` hooks are chained off the Transition's promise (see [[Transition.promise]]).\n   * If a Transition fails, its promise is rejected and the `onError` hooks are invoked.\n   * The `onError` hooks are invoked in priority order.\n   *\n   * Since these hooks are run after the transition is over, their return value is ignored.\n   *\n   * A transition \"errors\" if it was started, but failed to complete (for any reason).\n   * A *non-exhaustive list* of reasons a transition can error:\n   *\n   * - A transition was cancelled because a new transition started while it was still running (`Transition superseded`)\n   * - A transition was cancelled by a Transition Hook returning false\n   * - A transition was redirected by a Transition Hook returning a [[TargetState]]\n   * - A Transition Hook or resolve function threw an error\n   * - A Transition Hook returned a rejected promise\n   * - A resolve function returned a rejected promise\n   *\n   * To check the failure reason, inspect the return value of [[Transition.error]].\n   * \n   * Note: `onError` should be used for targeted error handling, or error recovery.\n   * For simple catch-all error reporting, use [[StateService.defaultErrorHandler]].\n   *\n   * ### Return value\n   *\n   * Since the Transition is already completed, the hook's return value is ignored\n   *\n   * @param matchCriteria defines which Transitions the Hook should be invoked for.\n   * @param callback the hook function which will be injected and invoked.\n   * @returns a function which deregisters the hook.\n   */\n  onError(matchCriteria: HookMatchCriteria, callback: TransitionHookFn, options?: HookRegOptions): Function;\n\n  /**\n   * Returns all the registered hooks of a given `hookName` type\n   *\n   * #### Example:\n   * ```\n   * $transitions.getHooks(\"onEnter\")\n   * ```\n   */\n  getHooks(hookName: string): RegisteredHook[];\n\n  /** @hidden place to store the hooks */\n  _registeredHooks: { [key: string]: RegisteredHook[] };\n}\n\n/** A predicate type which tests if a [[StateDeclaration]] passes some test. Returns a boolean. */\nexport type IStateMatch = Predicate<StateDeclaration>\n\n/**\n * This object is used to configure whether or not a Transition Hook is invoked for a particular transition,\n * based on the Transition's \"to state\" and \"from state\".\n *\n * Each property (`to`, `from`, `exiting`, `retained`, and `entering`) can be a state [[Glob]] string,\n * a boolean, or a function that takes a state and returns a boolean (see [[HookMatchCriterion]])\n *\n * All properties are optional.  If any property is omitted, it is replaced with the value `true`, and always matches.\n * To match any transition, use an empty criteria object `{}`.\n *\n * #### Example:\n * ```js\n * // This matches a transition coming from the `parent` state and going to the `parent.child` state.\n * var match = {\n *   to: 'parent',\n *   from: 'parent.child'\n * }\n * ```\n *\n * #### Example:\n * ```js\n * // This matches a transition coming from any substate of `parent` and going directly to the `parent` state.\n * var match = {\n *   to: 'parent',\n *   from: 'parent.**'\n * }\n * ```\n *\n * #### Example:\n * ```js\n * // This matches a transition coming from any state and going to any substate of `mymodule`\n * var match = {\n *   to: 'mymodule.**'\n * }\n * ```\n *\n * #### Example:\n * ```js\n * // This matches a transition coming from any state and going to any state that has `data.authRequired`\n * // set to a truthy value.\n * var match = {\n *   to: function(state) {\n *     return state.data != null && state.data.authRequired === true;\n *   }\n * }\n * ```\n *\n * #### Example:\n * ```js\n * // This matches a transition that is exiting `parent.child`\n * var match = {\n *   exiting: 'parent.child'\n * }\n * ```\n */\nexport interface HookMatchCriteria {\n  [key: string]: HookMatchCriterion | undefined;\n\n  /** A [[HookMatchCriterion]] to match the destination state */\n  to?: HookMatchCriterion;\n  /** A [[HookMatchCriterion]] to match the original (from) state */\n  from?: HookMatchCriterion;\n  /** A [[HookMatchCriterion]] to match any state that would be exiting */\n  exiting?: HookMatchCriterion;\n  /** A [[HookMatchCriterion]] to match any state that would be retained */\n  retained?: HookMatchCriterion;\n  /** A [[HookMatchCriterion]] to match any state that would be entering */\n  entering?: HookMatchCriterion;\n}\n\nexport interface IMatchingNodes {\n  [key: string]: PathNode[];\n\n  to: PathNode[];\n  from: PathNode[];\n  exiting: PathNode[];\n  retained: PathNode[];\n  entering: PathNode[];\n}\n\n/** @hidden */\nexport interface RegisteredHooks {\n  [key: string]: RegisteredHook[];\n}\n\n/** @hidden */\nexport interface PathTypes {\n  [key: string]: PathType;\n\n  to: PathType;\n  from: PathType;\n  exiting: PathType;\n  retained: PathType;\n  entering: PathType;\n}\n\n/** @hidden */\nexport interface PathType {\n  name: string;\n  scope: TransitionHookScope;\n}\n\n/**\n * Hook Criterion used to match a transition.\n *\n * A [[Glob]] string that matches the name of a state.\n *\n * Or, a function with the signature `function(state) { return matches; }`\n * which should return a boolean to indicate if a state matches.\n *\n * Or, `true` to always match\n */\nexport type HookMatchCriterion = (string|IStateMatch|boolean)\n\nexport enum TransitionHookPhase { CREATE, BEFORE, RUN, SUCCESS, ERROR }\nexport enum TransitionHookScope { TRANSITION, STATE }\n","/**\n * @coreapi\n * @module state\n */ /** for typedoc */\n\nimport { StateDeclaration, StateOrName, TargetStateDef } from \"./interface\";\nimport { ParamsOrArray } from \"../params/interface\";\nimport { TransitionOptions } from \"../transition/interface\";\nimport { StateObject } from \"./stateObject\";\nimport { toJson } from \"../common/common\";\nimport { isString } from \"../common/predicates\";\n\n/**\n * Encapsulate the target (destination) state/params/options of a [[Transition]].\n *\n * This class is frequently used to redirect a transition to a new destination.\n *\n * See:\n *\n * - [[HookResult]]\n * - [[TransitionHookFn]]\n * - [[TransitionService.onStart]]\n *\n * To create a `TargetState`, use [[StateService.target]].\n *\n * ---\n *\n * This class wraps:\n *\n * 1) an identifier for a state\n * 2) a set of parameters\n * 3) and transition options\n * 4) the registered state object (the [[StateDeclaration]])\n *\n * Many UI-Router APIs such as [[StateService.go]] take a [[StateOrName]] argument which can\n * either be a *state object* (a [[StateDeclaration]] or [[StateObject]]) or a *state name* (a string).\n * The `TargetState` class normalizes those options.\n *\n * A `TargetState` may be valid (the state being targeted exists in the registry)\n * or invalid (the state being targeted is not registered).\n */\nexport class TargetState {\n  private _params: ParamsOrArray;\n\n  /**\n   * The TargetState constructor\n   *\n   * Note: Do not construct a `TargetState` manually.\n   * To create a `TargetState`, use the [[StateService.target]] factory method.\n   *\n   * @param _identifier An identifier for a state.\n   *    Either a fully-qualified state name, or the object used to define the state.\n   * @param _definition The internal state representation, if exists.\n   * @param _params Parameters for the target state\n   * @param _options Transition options.\n   *\n   * @internalapi\n   */\n  constructor(\n    private _identifier: StateOrName,\n    private _definition?: StateObject,\n    _params?: ParamsOrArray,\n    private _options: TransitionOptions = {}\n  ) {\n    this._params = _params || {};\n  }\n\n  /** The name of the state this object targets */\n  name(): string {\n    return this._definition && this._definition.name || <string> this._identifier;\n  }\n\n  /** The identifier used when creating this TargetState */\n  identifier(): StateOrName {\n    return this._identifier;\n  }\n\n  /** The target parameter values */\n  params(): ParamsOrArray {\n    return this._params;\n  }\n\n  /** The internal state object (if it was found) */\n  $state(): StateObject {\n    return this._definition;\n  }\n\n  /** The internal state declaration (if it was found) */\n  state(): StateDeclaration {\n    return this._definition && this._definition.self;\n  }\n\n  /** The target options */\n  options() {\n    return this._options;\n  }\n\n  /** True if the target state was found */\n  exists(): boolean {\n    return !!(this._definition && this._definition.self);\n  }\n\n  /** True if the object is valid */\n  valid(): boolean {\n    return !this.error();\n  }\n\n  /** If the object is invalid, returns the reason why */\n  error(): string {\n    let base = <any> this.options().relative;\n    if (!this._definition && !!base) {\n      let stateName = base.name ? base.name : base;\n      return `Could not resolve '${this.name()}' from state '${stateName}'`;\n    }\n    if (!this._definition)\n      return `No such state '${this.name()}'`;\n    if (!this._definition.self)\n      return `State '${this.name()}' has an invalid definition`;\n  }\n\n  toString() {\n    return `'${this.name()}'${toJson(this.params())}`;\n  }\n\n  /** Returns true if the object has a state property that might be a state or state name */\n  static isDef = (obj): obj is TargetStateDef =>\n      obj && obj.state && (isString(obj.state) || isString(obj.state.name));\n\n  // /** Returns a new TargetState based on this one, but using the specified options */\n  // withOptions(_options: TransitionOptions): TargetState {\n  //   return extend(this._clone(), { _options });\n  // }\n  //\n  // /** Returns a new TargetState based on this one, but using the specified params */\n  // withParams(_params: ParamsOrArray): TargetState {\n  //   return extend(this._clone(), { _params });\n  // }\n\n  // private _clone = () =>\n  //     new TargetState(this._identifier, this._definition, this._params, this._options);\n}\n","/**\n * @coreapi\n * @module transition\n */\n/** for typedoc */\nimport { TransitionHookOptions, HookResult, TransitionHookPhase } from './interface';\nimport { defaults, noop, silentRejection } from '../common/common';\nimport { fnToString, maxLength } from '../common/strings';\nimport { isPromise } from '../common/predicates';\nimport { is, parse } from '../common/hof';\nimport { trace } from '../common/trace';\nimport { services } from '../common/coreservices';\nimport { Rejection } from './rejectFactory';\nimport { TargetState } from '../state/targetState';\nimport { Transition } from './transition';\nimport { TransitionEventType } from './transitionEventType';\nimport { RegisteredHook } from './hookRegistry';\nimport { StateDeclaration } from '../state/interface';\n\nlet defaultOptions: TransitionHookOptions = {\n  current: noop,\n  transition: null,\n  traceData: {},\n  bind: null,\n};\n\nexport type GetResultHandler = (hook: TransitionHook) => ResultHandler;\nexport type GetErrorHandler  = (hook: TransitionHook) => ErrorHandler;\n\nexport type ResultHandler = (result: HookResult)      => Promise<HookResult>;\nexport type ErrorHandler  = (error: any)              => Promise<any>;\n\n/** @hidden */\nexport class TransitionHook {\n  type: TransitionEventType;\n  constructor(private transition: Transition,\n              private stateContext: StateDeclaration,\n              private registeredHook: RegisteredHook,\n              private options: TransitionHookOptions) {\n    this.options = defaults(options, defaultOptions);\n    this.type = registeredHook.eventType;\n  }\n\n  /**\n   * These GetResultHandler(s) are used by [[invokeHook]] below\n   * Each HookType chooses a GetResultHandler (See: [[TransitionService._defineCoreEvents]])\n   */\n  static HANDLE_RESULT: GetResultHandler = (hook: TransitionHook) => (result: HookResult) =>\n      hook.handleHookResult(result);\n\n  /**\n   * If the result is a promise rejection, log it.\n   * Otherwise, ignore the result.\n   */\n  static LOG_REJECTED_RESULT: GetResultHandler = (hook: TransitionHook) => (result: HookResult) => {\n    isPromise(result) && result.catch(err =>\n        hook.logError(Rejection.normalize(err)));\n    return undefined;\n  }\n\n  /**\n   * These GetErrorHandler(s) are used by [[invokeHook]] below\n   * Each HookType chooses a GetErrorHandler (See: [[TransitionService._defineCoreEvents]])\n   */\n  static LOG_ERROR: GetErrorHandler = (hook: TransitionHook) => (error: any) =>\n      hook.logError(error);\n\n  static REJECT_ERROR: GetErrorHandler = (hook: TransitionHook) => (error: any) =>\n      silentRejection(error);\n\n  static THROW_ERROR: GetErrorHandler = (hook: TransitionHook) => (error: any) => {\n    throw error;\n  }\n\n  private isSuperseded = () =>\n    this.type.hookPhase === TransitionHookPhase.RUN && !this.options.transition.isActive();\n\n  logError(err): any {\n    this.transition.router.stateService.defaultErrorHandler()(err);\n  }\n\n  invokeHook(): Promise<HookResult> | void {\n    let hook = this.registeredHook;\n    if (hook._deregistered) return;\n\n    let notCurrent = this.getNotCurrentRejection();\n    if (notCurrent) return notCurrent;\n\n    let options = this.options;\n    trace.traceHookInvocation(this, this.transition, options);\n\n    const invokeCallback = () =>\n        hook.callback.call(options.bind, this.transition, this.stateContext);\n\n    const normalizeErr = err =>\n        Rejection.normalize(err).toPromise();\n\n    const handleError = err =>\n        hook.eventType.getErrorHandler(this)(err);\n\n    const handleResult = result =>\n        hook.eventType.getResultHandler(this)(result);\n\n    try {\n      let result = invokeCallback();\n\n      if (!this.type.synchronous && isPromise(result)) {\n        return result.catch(normalizeErr)\n            .then(handleResult, handleError);\n      } else {\n        return handleResult(result);\n      }\n    } catch (err) {\n      // If callback throws (synchronously)\n      return handleError(Rejection.normalize(err));\n    }\n  }\n\n  /**\n   * This method handles the return value of a Transition Hook.\n   *\n   * A hook can return false (cancel), a TargetState (redirect),\n   * or a promise (which may later resolve to false or a redirect)\n   *\n   * This also handles \"transition superseded\" -- when a new transition\n   * was started while the hook was still running\n   */\n  handleHookResult(result: HookResult): Promise<HookResult> {\n    let notCurrent = this.getNotCurrentRejection();\n    if (notCurrent) return notCurrent;\n\n    // Hook returned a promise\n    if (isPromise(result)) {\n      // Wait for the promise, then reprocess with the resulting value\n      return result.then(val => this.handleHookResult(val));\n    }\n\n    trace.traceHookResult(result, this.transition, this.options);\n\n    // Hook returned false\n    if (result === false) {\n      // Abort this Transition\n      return Rejection.aborted(\"Hook aborted transition\").toPromise();\n    }\n\n    const isTargetState = is(TargetState);\n    // hook returned a TargetState\n    if (isTargetState(result)) {\n      // Halt the current Transition and redirect (a new Transition) to the TargetState.\n      return Rejection.redirected(result).toPromise();\n    }\n  }\n\n\n  /**\n   * Return a Rejection promise if the transition is no longer current due\n   * to a stopped router (disposed), or a new transition has started and superseded this one.\n   */\n  private getNotCurrentRejection() {\n    let router = this.transition.router;\n\n    // The router is stopped\n    if (router._disposed) {\n      return Rejection.aborted(`UIRouter instance #${router.$id} has been stopped (disposed)`).toPromise();\n    }\n\n    if (this.transition._aborted) {\n      return Rejection.aborted().toPromise();\n    }\n\n    // This transition is no longer current.\n    // Another transition started while this hook was still running.\n    if (this.isSuperseded()) {\n      // Abort this transition\n      return Rejection.superseded(this.options.current()).toPromise();\n    }\n  }\n\n  toString() {\n    let { options, registeredHook } = this;\n    let event = parse(\"traceData.hookType\")(options) || \"internal\",\n        context = parse(\"traceData.context.state.name\")(options) || parse(\"traceData.context\")(options) || \"unknown\",\n        name = fnToString(registeredHook.callback);\n    return `${event} context: ${context}, ${maxLength(200, name)}`;\n  }\n\n  /**\n   * Chains together an array of TransitionHooks.\n   *\n   * Given a list of [[TransitionHook]] objects, chains them together.\n   * Each hook is invoked after the previous one completes.\n   *\n   * #### Example:\n   * ```js\n   * var hooks: TransitionHook[] = getHooks();\n   * let promise: Promise<any> = TransitionHook.chain(hooks);\n   *\n   * promise.then(handleSuccess, handleError);\n   * ```\n   *\n   * @param hooks the list of hooks to chain together\n   * @param waitFor if provided, the chain is `.then()`'ed off this promise\n   * @returns a `Promise` for sequentially invoking the hooks (in order)\n   */\n  static chain(hooks: TransitionHook[], waitFor?: Promise<any>): Promise<any> {\n    // Chain the next hook off the previous\n    const createHookChainR = (prev: Promise<any>, nextHook: TransitionHook) =>\n        prev.then(() => nextHook.invokeHook());\n    return hooks.reduce(createHookChainR, waitFor || services.$q.when());\n  }\n\n\n  /**\n   * Invokes all the provided TransitionHooks, in order.\n   * Each hook's return value is checked.\n   * If any hook returns a promise, then the rest of the hooks are chained off that promise, and the promise is returned.\n   * If no hook returns a promise, then all hooks are processed synchronously.\n   *\n   * @param hooks the list of TransitionHooks to invoke\n   * @param doneCallback a callback that is invoked after all the hooks have successfully completed\n   *\n   * @returns a promise for the async result, or the result of the callback\n   */\n  static invokeHooks<T>(hooks: TransitionHook[], doneCallback: (result?: HookResult) => T): Promise<any> | T {\n    for (let idx = 0; idx < hooks.length; idx++) {\n      let hookResult = hooks[idx].invokeHook();\n\n      if (isPromise(hookResult)) {\n        let remainingHooks = hooks.slice(idx + 1);\n\n        return TransitionHook.chain(remainingHooks, hookResult)\n            .then(doneCallback);\n      }\n    }\n\n    return doneCallback();\n  }\n\n  /**\n   * Run all TransitionHooks, ignoring their return value.\n   */\n  static runAllHooks(hooks: TransitionHook[]): void {\n    hooks.forEach(hook => hook.invokeHook());\n  }\n\n}","/** @module path */ /** for typedoc */\nimport {extend, applyPairs, find, allTrueR, pairs, arrayTuples} from \"../common/common\";\nimport {propEq} from \"../common/hof\";\nimport {StateObject} from \"../state/stateObject\";\nimport {RawParams} from \"../params/interface\";\nimport {Param} from \"../params/param\";\nimport {Resolvable} from \"../resolve/resolvable\";\nimport {ViewConfig} from \"../view/interface\";\n\n/**\n * @internalapi\n *\n * A node in a [[TreeChanges]] path\n *\n * For a [[TreeChanges]] path, this class holds the stateful information for a single node in the path.\n * Each PathNode corresponds to a state being entered, exited, or retained.\n * The stateful information includes parameter values and resolve data.\n */\nexport class PathNode {\n  /** The state being entered, exited, or retained */\n  public state: StateObject;\n  /** The parameters declared on the state */\n  public paramSchema: Param[];\n  /** The parameter values that belong to the state */\n  public paramValues: { [key: string]: any };\n  /** The individual (stateful) resolvable objects that belong to the state */\n  public resolvables: Resolvable[];\n  /** The state's declared view configuration objects */\n  public views: ViewConfig[];\n\n  /** Creates a copy of a PathNode */\n  constructor(node: PathNode);\n  /** Creates a new (empty) PathNode for a State */\n  constructor(state: StateObject);\n  constructor(stateOrNode: any) {\n    if (stateOrNode instanceof PathNode) {\n      let node: PathNode = stateOrNode;\n      this.state = node.state;\n      this.paramSchema = node.paramSchema.slice();\n      this.paramValues = extend({}, node.paramValues);\n      this.resolvables = node.resolvables.slice();\n      this.views = node.views && node.views.slice();\n    } else {\n      let state: StateObject = stateOrNode;\n      this.state = state;\n      this.paramSchema = state.parameters({ inherit: false });\n      this.paramValues = {};\n      this.resolvables = state.resolvables.map(res => res.clone());\n    }\n  }\n\n  /** Sets [[paramValues]] for the node, from the values of an object hash */\n  applyRawParams(params: RawParams): PathNode {\n    const getParamVal = (paramDef: Param) => [ paramDef.id, paramDef.value(params[paramDef.id]) ];\n    this.paramValues = this.paramSchema.reduce((memo, pDef) => applyPairs(memo, getParamVal(pDef)), {});\n    return this;\n  }\n\n  /** Gets a specific [[Param]] metadata that belongs to the node */\n  parameter(name: string): Param {\n    return find(this.paramSchema, propEq(\"id\", name));\n  }\n\n  /**\n   * @returns true if the state and parameter values for another PathNode are\n   * equal to the state and param values for this PathNode\n   */\n  equals(node: PathNode, paramsFn?: GetParamsFn): boolean {\n    const diff = this.diff(node, paramsFn);\n    return diff && diff.length === 0;\n  }\n\n  /**\n   * Finds Params with different parameter values on another PathNode.\n   *\n   * Given another node (of the same state), finds the parameter values which differ.\n   * Returns the [[Param]] (schema objects) whose parameter values differ.\n   *\n   * Given another node for a different state, returns `false`\n   *\n   * @param node The node to compare to\n   * @param paramsFn A function that returns which parameters should be compared.\n   * @returns The [[Param]]s which differ, or null if the two nodes are for different states\n   */\n  diff(node: PathNode, paramsFn?: GetParamsFn): Param[] | false {\n    if (this.state !== node.state) return false;\n\n    const params: Param[] = paramsFn ? paramsFn(this) : this.paramSchema;\n    return Param.changed(params, this.paramValues, node.paramValues);\n  }\n\n  /** Returns a clone of the PathNode */\n  static clone(node: PathNode) {\n    return new PathNode(node);\n  }\n}\n\n/** @hidden */\nexport type GetParamsFn = (pathNode: PathNode) => Param[];","/** @module path */ /** for typedoc */\n\nimport {\n  extend, find, pick, omit, tail, mergeR, values, unnestR, Predicate, inArray, arrayTuples,\n} from \"../common/common\";\nimport {prop, propEq, not} from \"../common/hof\";\n\nimport {RawParams} from \"../params/interface\";\nimport {TreeChanges} from \"../transition/interface\";\nimport {ViewConfig} from \"../view/interface\";\nimport {_ViewDeclaration} from \"../state/interface\";\n\nimport {StateObject} from \"../state/stateObject\";\nimport {TargetState} from \"../state/targetState\";\nimport {GetParamsFn, PathNode} from \"./pathNode\";\nimport {ViewService} from \"../view/view\";\nimport { Param } from '../params/param';\n\n/**\n * This class contains functions which convert TargetStates, Nodes and paths from one type to another.\n */\nexport class PathUtils {\n\n  constructor() { }\n\n  /** Given a PathNode[], create an TargetState */\n  static makeTargetState(path: PathNode[]): TargetState {\n    let state = tail(path).state;\n    return new TargetState(state, state, path.map(prop(\"paramValues\")).reduce(mergeR, {}));\n  }\n\n  static buildPath(targetState: TargetState) {\n    let toParams = targetState.params();\n    return targetState.$state().path.map(state => new PathNode(state).applyRawParams(toParams));\n  }\n\n  /** Given a fromPath: PathNode[] and a TargetState, builds a toPath: PathNode[] */\n  static buildToPath(fromPath: PathNode[], targetState: TargetState): PathNode[] {\n    let toPath: PathNode[] = PathUtils.buildPath(targetState);\n    if (targetState.options().inherit) {\n      return PathUtils.inheritParams(fromPath, toPath, Object.keys(targetState.params()));\n    }\n    return toPath;\n  }\n\n  /**\n   * Creates ViewConfig objects and adds to nodes.\n   *\n   * On each [[PathNode]], creates ViewConfig objects from the views: property of the node's state\n   */\n  static applyViewConfigs($view: ViewService, path: PathNode[], states: StateObject[]) {\n    // Only apply the viewConfigs to the nodes for the given states\n    path.filter(node => inArray(states, node.state)).forEach(node => {\n      let viewDecls: _ViewDeclaration[] = values(node.state.views || {});\n      let subPath = PathUtils.subPath(path, n => n === node);\n      let viewConfigs: ViewConfig[][] = viewDecls.map(view => $view.createViewConfig(subPath, view));\n      node.views = viewConfigs.reduce(unnestR, []);\n    });\n  }\n\n  /**\n   * Given a fromPath and a toPath, returns a new to path which inherits parameters from the fromPath\n   *\n   * For a parameter in a node to be inherited from the from path:\n   * - The toPath's node must have a matching node in the fromPath (by state).\n   * - The parameter name must not be found in the toKeys parameter array.\n   *\n   * Note: the keys provided in toKeys are intended to be those param keys explicitly specified by some\n   * caller, for instance, $state.transitionTo(..., toParams).  If a key was found in toParams,\n   * it is not inherited from the fromPath.\n   */\n  static inheritParams(fromPath: PathNode[], toPath: PathNode[], toKeys: string[] = []): PathNode[] {\n    function nodeParamVals(path: PathNode[], state: StateObject): RawParams {\n      let node: PathNode = find(path, propEq('state', state));\n      return extend({}, node && node.paramValues);\n    }\n\n    let noInherit = fromPath.map(node => node.paramSchema)\n        .reduce(unnestR, [])\n        .filter(param => !param.inherit)\n        .map(prop('id'));\n\n    /**\n     * Given an [[PathNode]] \"toNode\", return a new [[PathNode]] with param values inherited from the\n     * matching node in fromPath.  Only inherit keys that aren't found in \"toKeys\" from the node in \"fromPath\"\"\n     */\n    function makeInheritedParamsNode(toNode: PathNode): PathNode {\n      // All param values for the node (may include default key/vals, when key was not found in toParams)\n      let toParamVals = extend({}, toNode && toNode.paramValues);\n      // limited to only those keys found in toParams\n      let incomingParamVals = pick(toParamVals, toKeys);\n      toParamVals = omit(toParamVals, toKeys);\n      let fromParamVals = omit(nodeParamVals(fromPath, toNode.state) || {}, noInherit);\n      // extend toParamVals with any fromParamVals, then override any of those those with incomingParamVals\n      let ownParamVals: RawParams = extend(toParamVals, fromParamVals, incomingParamVals);\n      return new PathNode(toNode.state).applyRawParams(ownParamVals);\n    }\n\n    // The param keys specified by the incoming toParams\n    return <PathNode[]> toPath.map(makeInheritedParamsNode);\n  }\n\n  static nonDynamicParams = (node: PathNode): Param[] =>\n      node.state.parameters({ inherit: false })\n          .filter(param => !param.dynamic);\n\n  /**\n   * Computes the tree changes (entering, exiting) between a fromPath and toPath.\n   */\n  static treeChanges(fromPath: PathNode[], toPath: PathNode[], reloadState: StateObject): TreeChanges {\n    let keep = 0, max = Math.min(fromPath.length, toPath.length);\n\n    const nodesMatch = (node1: PathNode, node2: PathNode) =>\n        node1.equals(node2, PathUtils.nonDynamicParams);\n\n    while (keep < max && fromPath[keep].state !== reloadState && nodesMatch(fromPath[keep], toPath[keep])) {\n      keep++;\n    }\n\n    /** Given a retained node, return a new node which uses the to node's param values */\n    function applyToParams(retainedNode: PathNode, idx: number): PathNode {\n      let cloned = PathNode.clone(retainedNode);\n      cloned.paramValues = toPath[idx].paramValues;\n      return cloned;\n    }\n\n    let from: PathNode[], retained: PathNode[], exiting: PathNode[], entering: PathNode[], to: PathNode[];\n\n    from                  = fromPath;\n    retained              = from.slice(0, keep);\n    exiting               = from.slice(keep);\n\n    // Create a new retained path (with shallow copies of nodes) which have the params of the toPath mapped\n    let retainedWithToParams  = retained.map(applyToParams);\n    entering              = toPath.slice(keep);\n    to                    = (retainedWithToParams).concat(entering);\n\n    return { from, to, retained, exiting, entering };\n  }\n\n  /**\n   * Returns a new path which is: the subpath of the first path which matches the second path.\n   *\n   * The new path starts from root and contains any nodes that match the nodes in the second path.\n   * It stops before the first non-matching node.\n   *\n   * Nodes are compared using their state property and their parameter values.\n   * If a `paramsFn` is provided, only the [[Param]] returned by the function will be considered when comparing nodes.\n   *\n   * @param pathA the first path\n   * @param pathB the second path\n   * @param paramsFn a function which returns the parameters to consider when comparing\n   *\n   * @returns an array of PathNodes from the first path which match the nodes in the second path\n   */\n  static matching(pathA: PathNode[], pathB: PathNode[], paramsFn?: GetParamsFn): PathNode[] {\n    let done = false;\n    let tuples: PathNode[][] = arrayTuples(pathA, pathB);\n    return tuples.reduce((matching, [nodeA, nodeB]) => {\n      done = done || !nodeA.equals(nodeB, paramsFn);\n      return done ? matching : matching.concat(nodeA);\n    }, []);\n  }\n\n  /**\n   * Returns true if two paths are identical.\n   *\n   * @param pathA\n   * @param pathB\n   * @param paramsFn a function which returns the parameters to consider when comparing\n   * @returns true if the the states and parameter values for both paths are identical\n   */\n  static equals(pathA: PathNode[], pathB: PathNode[], paramsFn?: GetParamsFn): boolean {\n    return pathA.length === pathB.length &&\n        PathUtils.matching(pathA, pathB, paramsFn).length === pathA.length;\n  }\n\n  /**\n   * Return a subpath of a path, which stops at the first matching node\n   *\n   * Given an array of nodes, returns a subset of the array starting from the first node,\n   * stopping when the first node matches the predicate.\n   *\n   * @param path a path of [[PathNode]]s\n   * @param predicate a [[Predicate]] fn that matches [[PathNode]]s\n   * @returns a subpath up to the matching node, or undefined if no match is found\n   */\n  static subPath(path: PathNode[], predicate: Predicate<PathNode>): PathNode[] {\n    let node = find(path, predicate);\n    let elementIdx = path.indexOf(node);\n    return elementIdx === -1 ? undefined : path.slice(0, elementIdx + 1);\n  }\n\n  /** Gets the raw parameter values from a path */\n  static paramValues = (path: PathNode[]) =>\n      path.reduce((acc, node) => extend(acc, node.paramValues), {});\n}\n","/**\n * @coreapi\n * @module resolve\n */ /** for typedoc */\nimport {extend, equals, inArray, identity} from \"../common/common\";\nimport {services} from \"../common/coreservices\";\nimport {trace} from \"../common/trace\";\nimport {ResolvePolicy, ResolvableLiteral, resolvePolicies} from \"./interface\";\n\nimport {ResolveContext} from \"./resolveContext\";\nimport {stringify} from \"../common/strings\";\nimport {isFunction, isObject} from \"../common/predicates\";\nimport {Transition} from \"../transition/transition\";\nimport {StateObject} from \"../state/stateObject\";\nimport {PathNode} from \"../path/pathNode\";\nimport { isNullOrUndefined } from '../common';\n\n\n// TODO: explicitly make this user configurable\nexport let defaultResolvePolicy: ResolvePolicy = {\n  when: \"LAZY\",\n  async: \"WAIT\"\n};\n\n/**\n * The basic building block for the resolve system.\n *\n * Resolvables encapsulate a state's resolve's resolveFn, the resolveFn's declared dependencies, the wrapped (.promise),\n * and the unwrapped-when-complete (.data) result of the resolveFn.\n *\n * Resolvable.get() either retrieves the Resolvable's existing promise, or else invokes resolve() (which invokes the\n * resolveFn) and returns the resulting promise.\n *\n * Resolvable.get() and Resolvable.resolve() both execute within a context path, which is passed as the first\n * parameter to those fns.\n */\nexport class Resolvable implements ResolvableLiteral {\n  token: any;\n  policy: ResolvePolicy;\n  resolveFn: Function;\n  deps: any[];\n\n  data: any;\n  resolved: boolean = false;\n  promise: Promise<any> = undefined;\n\n  /** This constructor creates a Resolvable copy */\n  constructor(resolvable: Resolvable)\n\n  /** This constructor creates a new Resolvable from the plain old [[ResolvableLiteral]] javascript object */\n  constructor(resolvable: ResolvableLiteral)\n\n  /**\n   * This constructor creates a new `Resolvable`\n   *\n   * #### Example:\n   * ```js\n   * var resolvable1 = new Resolvable('mytoken', http => http.get('foo.json').toPromise(), [Http]);\n   *\n   * var resolvable2 = new Resolvable(UserService, dep => new UserService(dep.data), [SomeDependency]);\n   *\n   * var resolvable1Clone = new Resolvable(resolvable1);\n   * ```\n   *\n   * @param token The new resolvable's injection token, such as `\"userList\"` (a string) or `UserService` (a class).\n   *              When this token is used during injection, the resolved value will be injected.\n   * @param resolveFn The function that returns the resolved value, or a promise for the resolved value\n   * @param deps An array of dependencies, which will be injected into the `resolveFn`\n   * @param policy the [[ResolvePolicy]] defines when and how the Resolvable is processed\n   * @param data Pre-resolved data. If the resolve value is already known, it may be provided here.\n   */\n  constructor(token: any, resolveFn: Function, deps?: any[], policy?: ResolvePolicy, data?: any)\n  constructor(arg1: any, resolveFn?: Function, deps?: any[], policy?: ResolvePolicy, data?: any) {\n    if (arg1 instanceof Resolvable) {\n      extend(this, arg1);\n    } else if (isFunction(resolveFn)) {\n      if (isNullOrUndefined(arg1)) throw new Error(\"new Resolvable(): token argument is required\");\n      if (!isFunction(resolveFn)) throw new Error(\"new Resolvable(): resolveFn argument must be a function\");\n\n      this.token = arg1;\n      this.policy = policy;\n      this.resolveFn = resolveFn;\n      this.deps = deps || [];\n\n      this.data = data;\n      this.resolved = data !== undefined;\n      this.promise = this.resolved ? services.$q.when(this.data) : undefined;\n    } else if (isObject(arg1) && arg1.token && isFunction(arg1.resolveFn)) {\n      let literal = <ResolvableLiteral> arg1;\n      return new Resolvable(literal.token, literal.resolveFn, literal.deps, literal.policy, literal.data);\n    }\n  }\n\n  getPolicy(state: StateObject): ResolvePolicy {\n    let thisPolicy = this.policy || {};\n    let statePolicy = state && state.resolvePolicy || {};\n    return {\n      when: thisPolicy.when || statePolicy.when || defaultResolvePolicy.when,\n      async: thisPolicy.async || statePolicy.async || defaultResolvePolicy.async,\n    };\n  }\n\n  /**\n   * Asynchronously resolve this Resolvable's data\n   *\n   * Given a ResolveContext that this Resolvable is found in:\n   * Wait for this Resolvable's dependencies, then invoke this Resolvable's function\n   * and update the Resolvable's state\n   */\n  resolve(resolveContext: ResolveContext, trans?: Transition) {\n    let $q = services.$q;\n\n    // Gets all dependencies from ResolveContext and wait for them to be resolved\n    const getResolvableDependencies = () =>\n        $q.all(resolveContext.getDependencies(this).map(resolvable =>\n            resolvable.get(resolveContext, trans))) as Promise<any[]>;\n\n    // Invokes the resolve function passing the resolved dependencies as arguments\n    const invokeResolveFn = (resolvedDeps: any[]) =>\n        this.resolveFn.apply(null, resolvedDeps);\n\n    /**\n     * For RXWAIT policy:\n     *\n     * Given an observable returned from a resolve function:\n     * - enables .cache() mode (this allows multicast subscribers)\n     * - then calls toPromise() (this triggers subscribe() and thus fetches)\n     * - Waits for the promise, then return the cached observable (not the first emitted value).\n     */\n    const waitForRx = (observable$: any) => {\n      let cached = observable$.cache(1);\n      return cached.take(1).toPromise().then(() => cached);\n    };\n\n    // If the resolve policy is RXWAIT, wait for the observable to emit something. otherwise pass through.\n    let node: PathNode = resolveContext.findNode(this);\n    let state: StateObject = node && node.state;\n    let maybeWaitForRx = this.getPolicy(state).async === \"RXWAIT\" ? waitForRx : identity;\n\n    // After the final value has been resolved, update the state of the Resolvable\n    const applyResolvedValue = (resolvedValue: any) => {\n      this.data = resolvedValue;\n      this.resolved = true;\n      trace.traceResolvableResolved(this, trans);\n      return this.data;\n    };\n\n    // Sets the promise property first, then getsResolvableDependencies in the context of the promise chain. Always waits one tick.\n    return this.promise = $q.when()\n        .then(getResolvableDependencies)\n        .then(invokeResolveFn)\n        .then(maybeWaitForRx)\n        .then(applyResolvedValue);\n  }\n\n  /**\n   * Gets a promise for this Resolvable's data.\n   *\n   * Fetches the data and returns a promise.\n   * Returns the existing promise if it has already been fetched once.\n   */\n  get(resolveContext: ResolveContext, trans?: Transition): Promise<any> {\n    return this.promise || this.resolve(resolveContext, trans);\n  }\n\n  toString() {\n    return `Resolvable(token: ${stringify(this.token)}, requires: [${this.deps.map(stringify)}])`;\n  }\n\n  clone(): Resolvable {\n    return new Resolvable(this);\n  }\n  \n  static fromData = (token: any, data: any) =>  \n      new Resolvable(token, () => data, null, null, data);\n}\n","/**\n * # The Resolve subsystem\n *\n * This subsystem is an asynchronous, hierarchical Dependency Injection system.\n *\n * Typically, resolve is configured on a state using a [[StateDeclaration.resolve]] declaration.\n *\n * @coreapi\n * @module resolve\n */ /** for typedoc */\nimport {Resolvable} from \"./resolvable\";\n\n/**\n * An interface which is similar to an Angular 2 `Provider`\n */\nexport interface ProviderLike {\n  provide: any,\n  useClass?: any,\n  useFactory?: Function,\n  useValue?: any,\n  useExisting?: any,\n  deps?: any[]\n}\n\n/**\n * A plain object used to describe a [[Resolvable]]\n *\n * These objects may be used in the [[StateDeclaration.resolve]] array to declare\n * async data that the state or substates require.\n *\n * #### Example:\n * ```js\n *\n * var state = {\n *   name: 'main',\n *   resolve: [\n *     { token: 'myData', deps: [MyDataApi], resolveFn: (myDataApi) => myDataApi.getData() },\n *   ],\n * }\n * ```\n */\nexport interface ResolvableLiteral {\n  /**\n   * A Dependency Injection token\n   *\n   * This Resolvable's DI token.\n   * The Resolvable will be injectable elsewhere using the token.\n   */\n  token: any;\n\n  /**\n   * A function which fetches the Resolvable's data\n   *\n   * A function which returns one of:\n   *\n   * - The resolved value (synchronously)\n   * - A promise for the resolved value\n   * - An Observable of the resolved value(s)\n   *\n   * This function will be provided the dependencies listed in [[deps]] as its arguments.\n   * The resolve system will asynchronously fetch the dependencies before invoking this function.\n   */\n  resolveFn: Function;\n\n  /**\n   * Defines the Resolve Policy\n   *\n   * A policy that defines when to invoke the resolve,\n   * and whether to wait for async and unwrap the data\n   */\n  policy?: ResolvePolicy;\n\n  /**\n   * The Dependency Injection tokens\n   *\n   * This is an array of Dependency Injection tokens for the dependencies of the [[resolveFn]].\n   *\n   * The DI tokens are references to other `Resolvables`, or to other\n   * services from the native DI system.\n   */\n  deps?: any[];\n\n  /** Pre-resolved data. */\n  data?: any\n}\n\n/**\n * Defines how a resolve is processed during a transition\n *\n * This object is the [[StateDeclaration.resolvePolicy]] property.\n *\n * #### Example:\n * ```js\n * // Fetched when the resolve's state is being entered.\n * // Wait for the promise to resolve.\n * var policy1 = { when: \"LAZY\", async: \"WAIT\" }\n *\n * // Fetched when the Transition is starting.\n * // Do not wait for the returned promise to resolve.\n * // Inject the raw promise/value\n * var policy2 = { when: \"EAGER\", async: \"NOWAIT\" }\n * ```\n *\n * The policy for a given Resolvable is merged from three sources (highest priority first):\n *\n * - 1) Individual resolve definition\n * - 2) State definition\n * - 3) Global default\n *\n * #### Example:\n * ```js\n * // Wait for an Observable to emit one item.\n * // Since `wait` is not specified, it uses the `wait`\n * // policy defined on the state, or the global default\n * // if no `wait` policy is defined on the state\n * var myResolvablePolicy = { async: \"RXWAIT\" }\n * ```\n */\nexport interface ResolvePolicy {\n  /**\n   * Defines when a Resolvable is resolved (fetched) during a transition\n   *\n   * - `LAZY` (default)\n   *   - Resolved as the resolve's state is being entered\n   * - `EAGER`\n   *   - Resolved as the transition is starting\n   *\n   * #### Example:\n   * Resolves for `main` and `main.home` are fetched when each state is entered.\n   * All of `main` resolves are processed before fetching `main.home` resolves.\n   * ```js\n   * var state = {\n   *   name: 'main',\n   *   resolve: mainResolves, // defined elsewhere\n   *   resolvePolicy: { when: 'LAZY' }, // default\n   * }\n   *\n   * var state = {\n   *   name: 'main.home',\n   *   resolve: homeResolves, // defined elsewhere\n   *   resolvePolicy: { when: 'LAZY' }, // default\n   * }\n   * ```\n   *\n   * #### Example:\n   * Resolves for `main` and `main.home` are fetched at the same time when the transition starts.\n   * This happens earlier in the lifecycle than when states are entered.\n   * All of the `main` and `main.home` resolves are fetched as soon as possible.\n   * ```js\n   * var mainState = {\n   *   name: 'main',\n   *   resolve: mainResolves, // defined elsewhere\n   *   resolvePolicy: { when: 'EAGER' },\n   * }\n   *\n   * var homeState = {\n   *   name: 'main.home',\n   *   resolve: homeResolves, // defined elsewhere\n   *   resolvePolicy: { when: 'EAGER' },\n   * }\n   * ```\n   */\n  when?: PolicyWhen;\n\n  /**\n   * Determines the unwrapping behavior of asynchronous resolve values.\n   *\n   * - `WAIT` (default)\n   *   - If a promise is returned from the resolveFn, wait for the promise before proceeding\n   *   - The unwrapped value from the promise\n   * - `NOWAIT`\n   *   - If a promise is returned from the resolve, do not wait for the promise.\n   *   - Any other value returned is wrapped in a promise.\n   *   - The promise will not be unwrapped.\n   *   - The promise itself will be provided when the resolve is injected or bound elsewhere.\n   * - `RXWAIT`\n   *   - When an Observable is returned from the resolveFn, wait until the Observable emits at least one item.\n   *   - The Observable item will not be unwrapped.\n   *   - The Observable stream itself will be provided when the resolve is injected or bound elsewhere.\n   *\n   * #### Example:\n   * The `Transition` will not wait for the resolve promise(s) from `main` to settle before continuing.\n   * Resolves for `main` will be provided to components wrapped in a `Promise`.\n   *\n   * The `Transition` will wait for the `main.home` resolve promises.\n   * Resolved values will be unwrapped before being provided to components.\n   * ```js\n   * var mainState = {\n   *   name: 'main',\n   *   resolve: mainResolves, // defined elsewhere\n   *   resolvePolicy: { async: 'NOWAIT' },\n   * }\n   * var homeState = {\n   *   name: 'main.home',\n   *   resolve: homeResolves, // defined elsewhere\n   *   resolvePolicy: { async: 'WAIT' }, // default\n   * }\n   * ```\n   */\n  async?: PolicyAsync;\n}\n\nexport type PolicyWhen = \"LAZY\" | \"EAGER\" ;\nexport type PolicyAsync = \"WAIT\" | \"NOWAIT\" | \"RXWAIT\" ;\n\n/** @internalapi */\nexport let resolvePolicies = {\n  when: {\n    LAZY: \"LAZY\",\n    EAGER: \"EAGER\"\n  },\n  async: {\n    WAIT: \"WAIT\",\n    NOWAIT: \"NOWAIT\",\n    RXWAIT: \"RXWAIT\"\n  }\n};\n","/** @module resolve */\n/** for typedoc */\nimport { find, tail, uniqR, unnestR, inArray } from \"../common/common\";\nimport { propEq, not } from \"../common/hof\";\nimport { trace } from \"../common/trace\";\nimport { services, $InjectorLike } from \"../common/coreservices\";\nimport { resolvePolicies, PolicyWhen, ResolvePolicy } from \"./interface\";\nimport { PathNode } from \"../path/pathNode\";\nimport { Resolvable } from \"./resolvable\";\nimport { StateObject } from \"../state/stateObject\";\nimport { PathUtils } from \"../path/pathFactory\";\nimport { stringify } from \"../common/strings\";\nimport { Transition } from \"../transition/transition\";\nimport { UIInjector } from \"../interface\";\n\nconst when = resolvePolicies.when;\nconst ALL_WHENS = [when.EAGER, when.LAZY];\nconst EAGER_WHENS = [when.EAGER];\n\nexport const NATIVE_INJECTOR_TOKEN: string = \"Native Injector\";\n\n/**\n * Encapsulates Dependency Injection for a path of nodes\n *\n * UI-Router states are organized as a tree.\n * A nested state has a path of ancestors to the root of the tree.\n * When a state is being activated, each element in the path is wrapped as a [[PathNode]].\n * A `PathNode` is a stateful object that holds things like parameters and resolvables for the state being activated.\n *\n * The ResolveContext closes over the [[PathNode]]s, and provides DI for the last node in the path.\n */\nexport class ResolveContext {\n  _injector: UIInjector;\n\n  constructor(private _path: PathNode[]) { }\n\n  /** Gets all the tokens found in the resolve context, de-duplicated */\n  getTokens(): any[] {\n    return this._path.reduce((acc, node) => acc.concat(node.resolvables.map(r => r.token)), []).reduce(uniqR, []);\n  }\n\n  /**\n   * Gets the Resolvable that matches the token\n   *\n   * Gets the last Resolvable that matches the token in this context, or undefined.\n   * Throws an error if it doesn't exist in the ResolveContext\n   */\n  getResolvable(token: any): Resolvable {\n    let matching = this._path.map(node => node.resolvables)\n        .reduce(unnestR, [])\n        .filter((r: Resolvable) => r.token === token);\n    return tail(matching);\n  }\n\n  /** Returns the [[ResolvePolicy]] for the given [[Resolvable]] */\n  getPolicy(resolvable: Resolvable): ResolvePolicy {\n    let node = this.findNode(resolvable);\n    return resolvable.getPolicy(node.state);\n  }\n\n  /**\n   * Returns a ResolveContext that includes a portion of this one\n   *\n   * Given a state, this method creates a new ResolveContext from this one.\n   * The new context starts at the first node (root) and stops at the node for the `state` parameter.\n   *\n   * #### Why\n   *\n   * When a transition is created, the nodes in the \"To Path\" are injected from a ResolveContext.\n   * A ResolveContext closes over a path of [[PathNode]]s and processes the resolvables.\n   * The \"To State\" can inject values from its own resolvables, as well as those from all its ancestor state's (node's).\n   * This method is used to create a narrower context when injecting ancestor nodes.\n   *\n   * @example\n   * `let ABCD = new ResolveContext([A, B, C, D]);`\n   *\n   * Given a path `[A, B, C, D]`, where `A`, `B`, `C` and `D` are nodes for states `a`, `b`, `c`, `d`:\n   * When injecting `D`, `D` should have access to all resolvables from `A`, `B`, `C`, `D`.\n   * However, `B` should only be able to access resolvables from `A`, `B`.\n   *\n   * When resolving for the `B` node, first take the full \"To Path\" Context `[A,B,C,D]` and limit to the subpath `[A,B]`.\n   * `let AB = ABCD.subcontext(a)`\n   */\n  subContext(state: StateObject): ResolveContext {\n    return new ResolveContext(PathUtils.subPath(this._path, node => node.state === state));\n  }\n\n  /**\n   * Adds Resolvables to the node that matches the state\n   *\n   * This adds a [[Resolvable]] (generally one created on the fly; not declared on a [[StateDeclaration.resolve]] block).\n   * The resolvable is added to the node matching the `state` parameter.\n   *\n   * These new resolvables are not automatically fetched.\n   * The calling code should either fetch them, fetch something that depends on them,\n   * or rely on [[resolvePath]] being called when some state is being entered.\n   *\n   * Note: each resolvable's [[ResolvePolicy]] is merged with the state's policy, and the global default.\n   *\n   * @param newResolvables the new Resolvables\n   * @param state Used to find the node to put the resolvable on\n   */\n  addResolvables(newResolvables: Resolvable[], state: StateObject) {\n    let node = <PathNode> find(this._path, propEq('state', state));\n    let keys = newResolvables.map(r => r.token);\n    node.resolvables = node.resolvables.filter(r => keys.indexOf(r.token) === -1).concat(newResolvables);\n  }\n  \n  /**\n   * Returns a promise for an array of resolved path Element promises\n   *\n   * @param when\n   * @param trans\n   * @returns {Promise<any>|any}\n   */\n  resolvePath(when: PolicyWhen = \"LAZY\", trans?: Transition): Promise<{ token: any, value: any }[]> {\n    // This option determines which 'when' policy Resolvables we are about to fetch.\n    let whenOption: string = inArray(ALL_WHENS, when) ? when : \"LAZY\";\n    // If the caller specified EAGER, only the EAGER Resolvables are fetched.\n    // if the caller specified LAZY, both EAGER and LAZY Resolvables are fetched.`\n    let matchedWhens = whenOption === resolvePolicies.when.EAGER ? EAGER_WHENS : ALL_WHENS;\n    \n    // get the subpath to the state argument, if provided\n    trace.traceResolvePath(this._path, when, trans);\n\n    const matchesPolicy = (acceptedVals: string[], whenOrAsync: \"when\"|\"async\") =>\n        (resolvable: Resolvable) =>\n            inArray(acceptedVals, this.getPolicy(resolvable)[whenOrAsync]);\n\n    // Trigger all the (matching) Resolvables in the path\n    // Reduce all the \"WAIT\" Resolvables into an array\n    let promises: Promise<any>[] = this._path.reduce((acc, node) => {\n      let nodeResolvables = node.resolvables.filter(matchesPolicy(matchedWhens, 'when'));\n      let nowait = nodeResolvables.filter(matchesPolicy(['NOWAIT'], 'async'));\n      let wait = nodeResolvables.filter(not(matchesPolicy(['NOWAIT'], 'async')));\n\n      // For the matching Resolvables, start their async fetch process.\n      let subContext = this.subContext(node.state);\n      let getResult = (r: Resolvable) => r.get(subContext, trans)\n          // Return a tuple that includes the Resolvable's token\n          .then(value => ({ token: r.token, value: value }));\n      nowait.forEach(getResult);\n      return acc.concat(wait.map(getResult));\n    }, []);\n\n    // Wait for all the \"WAIT\" resolvables\n    return services.$q.all(promises);\n  }\n\n  injector(): UIInjector {\n    return this._injector || (this._injector = new UIInjectorImpl(this));\n  }\n\n  findNode(resolvable: Resolvable): PathNode {\n    return find(this._path, (node: PathNode) => inArray(node.resolvables, resolvable));\n  }\n\n  /**\n   * Gets the async dependencies of a Resolvable\n   *\n   * Given a Resolvable, returns its dependencies as a Resolvable[]\n   */\n  getDependencies(resolvable: Resolvable): Resolvable[] {\n    let node = this.findNode(resolvable);\n    // Find which other resolvables are \"visible\" to the `resolvable` argument\n    // subpath stopping at resolvable's node, or the whole path (if the resolvable isn't in the path)\n    let subPath: PathNode[] = PathUtils.subPath(this._path, x => x === node) || this._path;\n    let availableResolvables: Resolvable[] = subPath\n        .reduce((acc, node) => acc.concat(node.resolvables), []) //all of subpath's resolvables\n        .filter(res => res !== resolvable); // filter out the `resolvable` argument\n\n    const getDependency = (token: any) => {\n      let matching = availableResolvables.filter(r => r.token === token);\n      if (matching.length) return tail(matching);\n\n      let fromInjector = this.injector().getNative(token);\n      if (!fromInjector) {\n        throw new Error(\"Could not find Dependency Injection token: \" + stringify(token));\n      }\n\n      return new Resolvable(token, () => fromInjector, [], fromInjector);\n    };\n\n    return resolvable.deps.map(getDependency);\n  }\n}\n\nclass UIInjectorImpl implements UIInjector {\n  native: $InjectorLike;\n\n  constructor(public context: ResolveContext) {\n    this.native = this.get(NATIVE_INJECTOR_TOKEN) || services.$injector;\n  }\n\n  get(token: any) {\n    let resolvable = this.context.getResolvable(token);\n    if (resolvable) {\n      if (this.context.getPolicy(resolvable).async === 'NOWAIT') {\n        return resolvable.get(this.context);\n      }\n\n      if (!resolvable.resolved) {\n        throw new Error(\"Resolvable async .get() not complete:\" + stringify(resolvable.token))\n      }\n      return resolvable.data;\n    }\n    return this.native && this.native.get(token);\n  }\n\n  getAsync(token: any) {\n    let resolvable = this.context.getResolvable(token);\n    if (resolvable) return resolvable.get(this.context);\n    return services.$q.when(this.native.get(token));\n  }\n\n  getNative(token: any) {\n    return this.native && this.native.get(token);\n  }\n}","/**\n * @coreapi\n * @module transition\n */\n/** for typedoc */\nimport { trace } from '../common/trace';\nimport { services } from '../common/coreservices';\nimport {\n  map, find, extend, mergeR, tail, omit, toJson, arrayTuples, unnestR, identity, anyTrueR,\n} from '../common/common';\nimport {isObject, isUndefined} from '../common/predicates';\nimport { prop, propEq, val, not, is } from '../common/hof';\nimport { StateDeclaration, StateOrName } from '../state/interface';\nimport {\n  TransitionOptions, TreeChanges, IHookRegistry, TransitionHookPhase, RegisteredHooks, HookRegOptions,\n  HookMatchCriteria, TransitionStateHookFn, TransitionHookFn,\n} from './interface'; // has or is using\nimport { TransitionHook } from './transitionHook';\nimport { matchState, makeEvent, RegisteredHook } from './hookRegistry';\nimport { HookBuilder } from './hookBuilder';\nimport { PathNode } from '../path/pathNode';\nimport { PathUtils } from '../path/pathFactory';\nimport { StateObject } from '../state/stateObject';\nimport { TargetState } from '../state/targetState';\nimport { Param } from '../params/param';\nimport { Resolvable } from '../resolve/resolvable';\nimport { ViewConfig } from '../view/interface';\nimport { ResolveContext } from '../resolve/resolveContext';\nimport { UIRouter } from '../router';\nimport { UIInjector } from '../interface';\nimport { RawParams } from '../params/interface';\nimport { ResolvableLiteral } from '../resolve/interface';\n\n/** @hidden */\nconst stateSelf: (_state: StateObject) => StateDeclaration = prop(\"self\");\n\n/**\n * Represents a transition between two states.\n *\n * When navigating to a state, we are transitioning **from** the current state **to** the new state.\n *\n * This object contains all contextual information about the to/from states, parameters, resolves.\n * It has information about all states being entered and exited as a result of the transition.\n */\nexport class Transition implements IHookRegistry {\n\n  /** @hidden */\n  static diToken = Transition;\n\n  /**\n   * A unique identifier for the transition.\n   *\n   * This is an auto incrementing integer, starting from `0`.\n   */\n  $id: number;\n\n  /**\n   * A reference to the [[UIRouter]] instance\n   *\n   * This reference can be used to access the router services, such as the [[StateService]]\n   */\n  router: UIRouter;\n\n  /** @hidden */\n  private _deferred = services.$q.defer();\n  /**\n   * This promise is resolved or rejected based on the outcome of the Transition.\n   *\n   * When the transition is successful, the promise is resolved\n   * When the transition is unsuccessful, the promise is rejected with the [[Rejection]] or javascript error\n   */\n  promise: Promise<any> = this._deferred.promise;\n  /**\n   * A boolean which indicates if the transition was successful\n   *\n   * After a successful transition, this value is set to true.\n   * After an unsuccessful transition, this value is set to false.\n   *\n   * The value will be undefined if the transition is not complete\n   */\n  success: boolean;\n  /** @hidden */\n  _aborted: boolean;\n  /** @hidden */\n  private _error: any;\n\n  /** @hidden Holds the hook registration functions such as those passed to Transition.onStart() */\n  _registeredHooks: RegisteredHooks = { };\n\n  /** @hidden */\n  private _options: TransitionOptions;\n  /** @hidden */\n  private _treeChanges: TreeChanges;\n  /** @hidden */\n  private _targetState: TargetState;\n  /** @hidden */\n  private _hookBuilder = new HookBuilder(this);\n\n\n  /** @hidden */\n  onBefore(criteria: HookMatchCriteria, callback: TransitionHookFn, options?: HookRegOptions): Function { return; }\n  /** @inheritdoc */\n  onStart(criteria: HookMatchCriteria, callback: TransitionHookFn, options?: HookRegOptions): Function { return; }\n  /** @inheritdoc */\n  onExit(criteria: HookMatchCriteria, callback: TransitionStateHookFn, options?: HookRegOptions): Function { return; }\n  /** @inheritdoc */\n  onRetain(criteria: HookMatchCriteria, callback: TransitionStateHookFn, options?: HookRegOptions): Function { return; }\n  /** @inheritdoc */\n  onEnter(criteria: HookMatchCriteria, callback: TransitionStateHookFn, options?: HookRegOptions): Function { return; }\n  /** @inheritdoc */\n  onFinish(criteria: HookMatchCriteria, callback: TransitionHookFn, options?: HookRegOptions): Function { return; }\n  /** @inheritdoc */\n  onSuccess(criteria: HookMatchCriteria, callback: TransitionHookFn, options?: HookRegOptions): Function { return; }\n  /** @inheritdoc */\n  onError(criteria: HookMatchCriteria, callback: TransitionHookFn, options?: HookRegOptions): Function { return; }\n\n  /** @hidden\n   * Creates the transition-level hook registration functions\n   * (which can then be used to register hooks)\n   */\n  private createTransitionHookRegFns() {\n    this.router.transitionService._pluginapi._getEvents()\n        .filter(type => type.hookPhase !== TransitionHookPhase.CREATE)\n        .forEach(type => makeEvent(this, this.router.transitionService, type));\n  }\n\n  /** @internalapi */\n  getHooks(hookName: string): RegisteredHook[] {\n    return this._registeredHooks[hookName];\n  }\n\n  /**\n   * Creates a new Transition object.\n   *\n   * If the target state is not valid, an error is thrown.\n   *\n   * @internalapi\n   *\n   * @param fromPath The path of [[PathNode]]s from which the transition is leaving.  The last node in the `fromPath`\n   *        encapsulates the \"from state\".\n   * @param targetState The target state and parameters being transitioned to (also, the transition options)\n   * @param router The [[UIRouter]] instance\n   */\n  constructor(fromPath: PathNode[], targetState: TargetState, router: UIRouter) {\n    this.router = router;\n    this._targetState = targetState;\n\n    if (!targetState.valid()) {\n      throw new Error(targetState.error());\n    }\n\n    // current() is assumed to come from targetState.options, but provide a naive implementation otherwise.\n    this._options = extend({ current: val(this) }, targetState.options());\n    this.$id = router.transitionService._transitionCount++;\n    let toPath = PathUtils.buildToPath(fromPath, targetState);\n    this._treeChanges = PathUtils.treeChanges(fromPath, toPath, this._options.reloadState);\n    this.createTransitionHookRegFns();\n\n    let onCreateHooks = this._hookBuilder.buildHooksForPhase(TransitionHookPhase.CREATE);\n    TransitionHook.invokeHooks(onCreateHooks, () => null);\n\n    this.applyViewConfigs(router);\n  }\n\n  private applyViewConfigs(router: UIRouter) {\n    let enteringStates = this._treeChanges.entering.map(node => node.state);\n    PathUtils.applyViewConfigs(router.transitionService.$view, this._treeChanges.to, enteringStates);\n  }\n\n  /**\n   * @internalapi\n   *\n   * @returns the internal from [State] object\n   */\n  $from() {\n    return tail(this._treeChanges.from).state;\n  }\n\n  /**\n   * @internalapi\n   *\n   * @returns the internal to [State] object\n   */\n  $to() {\n    return tail(this._treeChanges.to).state;\n  }\n\n  /**\n   * Returns the \"from state\"\n   *\n   * Returns the state that the transition is coming *from*.\n   *\n   * @returns The state declaration object for the Transition's (\"from state\").\n   */\n  from(): StateDeclaration {\n    return this.$from().self;\n  }\n\n  /**\n   * Returns the \"to state\"\n   *\n   * Returns the state that the transition is going *to*.\n   *\n   * @returns The state declaration object for the Transition's target state (\"to state\").\n   */\n  to(): StateDeclaration {\n    return this.$to().self;\n  }\n\n  /**\n   * Gets the Target State\n   *\n   * A transition's [[TargetState]] encapsulates the [[to]] state, the [[params]], and the [[options]] as a single object.\n   *\n   * @returns the [[TargetState]] of this Transition\n   */\n  targetState() {\n    return this._targetState;\n  }\n\n  /**\n   * Determines whether two transitions are equivalent.\n   * @deprecated\n   */\n  is(compare: (Transition|{to?: any, from?: any})): boolean {\n    if (compare instanceof Transition) {\n      // TODO: Also compare parameters\n      return this.is({ to: compare.$to().name, from: compare.$from().name });\n    }\n    return !(\n      (compare.to && !matchState(this.$to(), compare.to)) ||\n      (compare.from && !matchState(this.$from(), compare.from))\n    );\n  }\n\n  /**\n   * Gets transition parameter values\n   *\n   * Returns the parameter values for a transition as key/value pairs.\n   * This object is immutable.\n   *\n   * By default, returns the new parameter values (for the \"to state\").\n   * To return the previous parameter values,  supply `'from'` as the `pathname` argument.\n   *\n   * @param pathname the name of the treeChanges path to get parameter values for:\n   *   (`'to'`, `'from'`, `'entering'`, `'exiting'`, `'retained'`)\n   *\n   * @returns transition parameter values for the desired path.\n   */\n  params(pathname?: string): any;\n  params<T>(pathname?: string): T;\n  params(pathname: string = \"to\") {\n    return Object.freeze(this._treeChanges[pathname].map(prop(\"paramValues\")).reduce(mergeR, {}));\n  }\n\n\n  /**\n   * Creates a [[UIInjector]] Dependency Injector\n   *\n   * Returns a Dependency Injector for the Transition's target state (to state).\n   * The injector provides resolve values which the target state has access to.\n   *\n   * The `UIInjector` can also provide values from the native root/global injector (ng1/ng2).\n   *\n   * #### Example:\n   * ```js\n   * .onEnter({ entering: 'myState' }, trans => {\n   *   var myResolveValue = trans.injector().get('myResolve');\n   *   // Inject a global service from the global/native injector (if it exists)\n   *   var MyService = trans.injector().get('MyService');\n   * })\n   * ```\n   *\n   * In some cases (such as `onBefore`), you may need access to some resolve data but it has not yet been fetched.\n   * You can use [[UIInjector.getAsync]] to get a promise for the data.\n   * #### Example:\n   * ```js\n   * .onBefore({}, trans => {\n   *   return trans.injector().getAsync('myResolve').then(myResolveValue =>\n   *     return myResolveValue !== 'ABORT';\n   *   });\n   * });\n   * ```\n   *\n   * If a `state` is provided, the injector that is returned will be limited to resolve values that the provided state has access to.\n   * This can be useful if both a parent state `foo` and a child state `foo.bar` have both defined a resolve such as `data`.\n   * #### Example:\n   * ```js\n   * .onEnter({ to: 'foo.bar' }, trans => {\n   *   // returns result of `foo` state's `data` resolve\n   *   // even though `foo.bar` also has a `data` resolve\n   *   var fooData = trans.injector('foo').get('data');\n   * });\n   * ```\n   *\n   * If you need resolve data from the exiting states, pass `'from'` as `pathName`.\n   * The resolve data from the `from` path will be returned.\n   * #### Example:\n   * ```js\n   * .onExit({ exiting: 'foo.bar' }, trans => {\n   *   // Gets the resolve value of `data` from the exiting state.\n   *   var fooData = trans.injector(null, 'foo.bar').get('data');\n   * });\n   * ```\n   *\n   *\n   * @param state Limits the resolves provided to only the resolves the provided state has access to.\n   * @param pathName Default: `'to'`: Chooses the path for which to create the injector. Use this to access resolves for `exiting` states.\n   *\n   * @returns a [[UIInjector]]\n   */\n  injector(state?: StateOrName, pathName = \"to\"): UIInjector {\n    let path: PathNode[] = this._treeChanges[pathName];\n    if (state) path = PathUtils.subPath(path, node => node.state === state || node.state.name === state);\n    return new ResolveContext(path).injector();\n  }\n\n  /**\n   * Gets all available resolve tokens (keys)\n   *\n   * This method can be used in conjunction with [[injector]] to inspect the resolve values\n   * available to the Transition.\n   *\n   * This returns all the tokens defined on [[StateDeclaration.resolve]] blocks, for the states\n   * in the Transition's [[TreeChanges.to]] path.\n   *\n   * #### Example:\n   * This example logs all resolve values\n   * ```js\n   * let tokens = trans.getResolveTokens();\n   * tokens.forEach(token => console.log(token + \" = \" + trans.injector().get(token)));\n   * ```\n   *\n   * #### Example:\n   * This example creates promises for each resolve value.\n   * This triggers fetches of resolves (if any have not yet been fetched).\n   * When all promises have all settled, it logs the resolve values.\n   * ```js\n   * let tokens = trans.getResolveTokens();\n   * let promise = tokens.map(token => trans.injector().getAsync(token));\n   * Promise.all(promises).then(values => console.log(\"Resolved values: \" + values));\n   * ```\n   *\n   * Note: Angular 1 users whould use `$q.all()`\n   *\n   * @param pathname resolve context's path name (e.g., `to` or `from`)\n   *\n   * @returns an array of resolve tokens (keys)\n   */\n  getResolveTokens(pathname: string = \"to\"): any[] {\n    return new ResolveContext(this._treeChanges[pathname]).getTokens();\n  }\n\n  /**\n   * Dynamically adds a new [[Resolvable]] (i.e., [[StateDeclaration.resolve]]) to this transition.\n   *\n   * #### Example:\n   * ```js\n   * transitionService.onBefore({}, transition => {\n   *   transition.addResolvable({\n   *     token: 'myResolve',\n   *     deps: ['MyService'],\n   *     resolveFn: myService => myService.getData()\n   *   });\n   * });\n   * ```\n   *\n   * @param resolvable a [[ResolvableLiteral]] object (or a [[Resolvable]])\n   * @param state the state in the \"to path\" which should receive the new resolve (otherwise, the root state)\n   */\n  addResolvable(resolvable: Resolvable|ResolvableLiteral, state: StateOrName = \"\"): void {\n    resolvable = is(Resolvable)(resolvable) ? resolvable : new Resolvable(resolvable);\n\n    let stateName: string = (typeof state === \"string\") ? state : state.name;\n    let topath = this._treeChanges.to;\n    let targetNode = find(topath, node => node.state.name === stateName);\n    let resolveContext: ResolveContext = new ResolveContext(topath);\n    resolveContext.addResolvables([resolvable as Resolvable], targetNode.state);\n  }\n\n  /**\n   * Gets the transition from which this transition was redirected.\n   *\n   * If the current transition is a redirect, this method returns the transition that was redirected.\n   *\n   * #### Example:\n   * ```js\n   * let transitionA = $state.go('A').transition\n   * transitionA.onStart({}, () => $state.target('B'));\n   * $transitions.onSuccess({ to: 'B' }, (trans) => {\n   *   trans.to().name === 'B'; // true\n   *   trans.redirectedFrom() === transitionA; // true\n   * });\n   * ```\n   *\n   * @returns The previous Transition, or null if this Transition is not the result of a redirection\n   */\n  redirectedFrom(): Transition {\n    return this._options.redirectedFrom || null;\n  }\n\n  /**\n   * Gets the original transition in a redirect chain\n   *\n   * A transition might belong to a long chain of multiple redirects.\n   * This method walks the [[redirectedFrom]] chain back to the original (first) transition in the chain.\n   *\n   * #### Example:\n   * ```js\n   * // states\n   * registry.register({ name: 'A', redirectTo: 'B' });\n   * registry.register({ name: 'B', redirectTo: 'C' });\n   * registry.register({ name: 'C', redirectTo: 'D' });\n   * registry.register({ name: 'D' });\n   *\n   * let transitionA = $state.go('A').transition\n   *\n   * $transitions.onSuccess({ to: 'D' }, (trans) => {\n   *   trans.to().name === 'D'; // true\n   *   trans.redirectedFrom().to().name === 'C'; // true\n   *   trans.originalTransition() === transitionA; // true\n   *   trans.originalTransition().to().name === 'A'; // true\n   * });\n   * ```\n   *\n   * @returns The original Transition that started a redirect chain\n   */\n  originalTransition(): Transition {\n    let rf = this.redirectedFrom();\n    return (rf && rf.originalTransition()) || this;\n  }\n\n  /**\n   * Get the transition options\n   *\n   * @returns the options for this Transition.\n   */\n  options(): TransitionOptions {\n    return this._options;\n  }\n\n  /**\n   * Gets the states being entered.\n   *\n   * @returns an array of states that will be entered during this transition.\n   */\n  entering(): StateDeclaration[] {\n    return map(this._treeChanges.entering, prop('state')).map(stateSelf);\n  }\n\n  /**\n   * Gets the states being exited.\n   *\n   * @returns an array of states that will be exited during this transition.\n   */\n  exiting(): StateDeclaration[] {\n    return map(this._treeChanges.exiting, prop('state')).map(stateSelf).reverse();\n  }\n\n  /**\n   * Gets the states being retained.\n   *\n   * @returns an array of states that are already entered from a previous Transition, that will not be\n   *    exited during this Transition\n   */\n  retained(): StateDeclaration[] {\n    return map(this._treeChanges.retained, prop('state')).map(stateSelf);\n  }\n\n  /**\n   * Get the [[ViewConfig]]s associated with this Transition\n   *\n   * Each state can define one or more views (template/controller), which are encapsulated as `ViewConfig` objects.\n   * This method fetches the `ViewConfigs` for a given path in the Transition (e.g., \"to\" or \"entering\").\n   *\n   * @param pathname the name of the path to fetch views for:\n   *   (`'to'`, `'from'`, `'entering'`, `'exiting'`, `'retained'`)\n   * @param state If provided, only returns the `ViewConfig`s for a single state in the path\n   *\n   * @returns a list of ViewConfig objects for the given path.\n   */\n  views(pathname: string = \"entering\", state?: StateObject): ViewConfig[] {\n    let path = this._treeChanges[pathname];\n    path = !state ? path : path.filter(propEq('state', state));\n    return path.map(prop(\"views\")).filter(identity).reduce(unnestR, []);\n  }\n\n  /**\n   * Return the transition's tree changes\n   *\n   * A transition goes from one state/parameters to another state/parameters.\n   * During a transition, states are entered and/or exited.\n   *\n   * This function returns various branches (paths) which represent the changes to the\n   * active state tree that are caused by the transition.\n   *\n   * @param pathname The name of the tree changes path to get:\n   *   (`'to'`, `'from'`, `'entering'`, `'exiting'`, `'retained'`)\n   */\n  treeChanges(pathname: string): PathNode[];\n  treeChanges(): TreeChanges;\n  treeChanges(pathname?: string) {\n    return pathname ? this._treeChanges[pathname] : this._treeChanges;\n  }\n\n  /**\n   * Creates a new transition that is a redirection of the current one.\n   *\n   * This transition can be returned from a [[TransitionService]] hook to\n   * redirect a transition to a new state and/or set of parameters.\n   *\n   * @internalapi\n   *\n   * @returns Returns a new [[Transition]] instance.\n   */\n  redirect(targetState: TargetState): Transition {\n    let redirects = 1, trans: Transition = this;\n    while ((trans = trans.redirectedFrom()) != null) {\n      if (++redirects > 20) throw new Error(`Too many consecutive Transition redirects (20+)`);\n    }\n\n    let redirectOpts: TransitionOptions = { redirectedFrom: this, source: \"redirect\" };\n    // If the original transition was caused by URL sync, then use { location: 'replace' }\n    // on the new transition (unless the target state explicitly specifies location: false).\n    // This causes the original url to be replaced with the url for the redirect target\n    // so the original url disappears from the browser history.\n    if (this.options().source === 'url' && targetState.options().location !== false) {\n      redirectOpts.location = 'replace';\n    }\n\n    let newOptions = extend({}, this.options(), targetState.options(), redirectOpts);\n\n    targetState = new TargetState(targetState.identifier(), targetState.$state(), targetState.params(), newOptions);\n\n    let newTransition = this.router.transitionService.create(this._treeChanges.from, targetState);\n    let originalEnteringNodes = this._treeChanges.entering;\n    let redirectEnteringNodes = newTransition._treeChanges.entering;\n\n    // --- Re-use resolve data from original transition ---\n    // When redirecting from a parent state to a child state where the parent parameter values haven't changed\n    // (because of the redirect), the resolves fetched by the original transition are still valid in the\n    // redirected transition.\n    //\n    // This allows you to define a redirect on a parent state which depends on an async resolve value.\n    // You can wait for the resolve, then redirect to a child state based on the result.\n    // The redirected transition does not have to re-fetch the resolve.\n    // ---------------------------------------------------------\n\n    const nodeIsReloading = (reloadState: StateObject) => (node: PathNode) => {\n      return reloadState && node.state.includes[reloadState.name];\n    };\n\n    // Find any \"entering\" nodes in the redirect path that match the original path and aren't being reloaded\n    let matchingEnteringNodes: PathNode[] = PathUtils.matching(redirectEnteringNodes, originalEnteringNodes, PathUtils.nonDynamicParams)\n        .filter(not(nodeIsReloading(targetState.options().reloadState)));\n\n    // Use the existing (possibly pre-resolved) resolvables for the matching entering nodes.\n    matchingEnteringNodes.forEach((node, idx) => {\n      node.resolvables = originalEnteringNodes[idx].resolvables;\n    });\n\n    return newTransition;\n  }\n\n  /** @hidden If a transition doesn't exit/enter any states, returns any [[Param]] whose value changed */\n  private _changedParams(): Param[] {\n    let tc = this._treeChanges;\n\n    /** Return undefined if it's not a \"dynamic\" transition, for the following reasons */\n    // If user explicitly wants a reload\n    if (this._options.reload) return undefined;\n    // If any states are exiting or entering\n    if (tc.exiting.length || tc.entering.length) return undefined;\n    // If to/from path lengths differ\n    if (tc.to.length !== tc.from.length) return undefined;\n    // If the to/from paths are different\n    let pathsDiffer: boolean = arrayTuples(tc.to, tc.from)\n        .map(tuple => tuple[0].state !== tuple[1].state)\n        .reduce(anyTrueR, false);\n    if (pathsDiffer) return undefined;\n\n    // Find any parameter values that differ\n    let nodeSchemas: Param[][] = tc.to.map((node: PathNode) => node.paramSchema);\n    let [toValues, fromValues] = [tc.to, tc.from].map(path => path.map(x => x.paramValues));\n    let tuples = arrayTuples(nodeSchemas, toValues, fromValues);\n\n    return tuples.map(([schema, toVals, fromVals]) => Param.changed(schema, toVals, fromVals)).reduce(unnestR, []);\n  }\n\n  /**\n   * Returns true if the transition is dynamic.\n   *\n   * A transition is dynamic if no states are entered nor exited, but at least one dynamic parameter has changed.\n   *\n   * @returns true if the Transition is dynamic\n   */\n  dynamic(): boolean {\n    let changes = this._changedParams();\n    return !changes ? false : changes.map(x => x.dynamic).reduce(anyTrueR, false);\n  }\n\n  /**\n   * Returns true if the transition is ignored.\n   *\n   * A transition is ignored if no states are entered nor exited, and no parameter values have changed.\n   *\n   * @returns true if the Transition is ignored.\n   */\n  ignored(): boolean {\n    return !!this._ignoredReason();\n  }\n\n  /** @hidden */\n  _ignoredReason(): \"SameAsCurrent\"|\"SameAsPending\"|undefined {\n    const pending = this.router.globals.transition;\n    const reloadState = this._options.reloadState;\n\n    const same = (pathA, pathB) => {\n      if (pathA.length !== pathB.length) return false;\n      const matching = PathUtils.matching(pathA, pathB);\n      return pathA.length === matching.filter(node => !reloadState || !node.state.includes[reloadState.name]).length;\n    };\n\n    let newTC = this.treeChanges();\n    let pendTC = pending && pending.treeChanges();\n\n    if (pendTC && same(pendTC.to, newTC.to) && same(pendTC.exiting, newTC.exiting)) return \"SameAsPending\";\n    if (newTC.exiting.length === 0 && newTC.entering.length === 0 && same(newTC.from, newTC.to)) return \"SameAsCurrent\";\n  }\n\n  /**\n   * Runs the transition\n   *\n   * This method is generally called from the [[StateService.transitionTo]]\n   *\n   * @internalapi\n   *\n   * @returns a promise for a successful transition.\n   */\n  run(): Promise<any> {\n    let runAllHooks = TransitionHook.runAllHooks;\n\n    // Gets transition hooks array for the given phase\n    const getHooksFor = (phase: TransitionHookPhase) =>\n        this._hookBuilder.buildHooksForPhase(phase);\n\n    // When the chain is complete, then resolve or reject the deferred\n    const transitionSuccess = () => {\n      trace.traceSuccess(this.$to(), this);\n      this.success = true;\n      this._deferred.resolve(this.to());\n      runAllHooks(getHooksFor(TransitionHookPhase.SUCCESS));\n    };\n\n    const transitionError = (reason: any) => {\n      trace.traceError(reason, this);\n      this.success = false;\n      this._deferred.reject(reason);\n      this._error = reason;\n      runAllHooks(getHooksFor(TransitionHookPhase.ERROR));\n    };\n\n    const runTransition = () => {\n      // Wait to build the RUN hook chain until the BEFORE hooks are done\n      // This allows a BEFORE hook to dynamically add additional RUN hooks via the Transition object.\n      let allRunHooks = getHooksFor(TransitionHookPhase.RUN);\n      let done = () => services.$q.when(undefined);\n      return TransitionHook.invokeHooks(allRunHooks, done);\n    };\n\n    const startTransition = () => {\n      let globals = this.router.globals;\n\n      globals.lastStartedTransitionId = this.$id;\n      globals.transition = this;\n      globals.transitionHistory.enqueue(this);\n\n      trace.traceTransitionStart(this);\n\n      return services.$q.when(undefined);\n    };\n\n    let allBeforeHooks = getHooksFor(TransitionHookPhase.BEFORE);\n    TransitionHook.invokeHooks(allBeforeHooks, startTransition)\n        .then(runTransition)\n        .then(transitionSuccess, transitionError);\n\n    return this.promise;\n  }\n\n  /** Checks if this transition is currently active/running. */\n  isActive = () =>\n      this.router.globals.transition === this;\n\n  /**\n   * Checks if the Transition is valid\n   *\n   * @returns true if the Transition is valid\n   */\n  valid() {\n    return !this.error() || this.success !== undefined;\n  }\n\n  /**\n   * Aborts this transition\n   *\n   * Imperative API to abort a Transition.\n   * This only applies to Transitions that are not yet complete.\n   */\n  abort() {\n    // Do not set flag if the transition is already complete\n    if (isUndefined(this.success))  {\n      this._aborted = true;\n    }\n  }\n\n  /**\n   * The Transition error reason.\n   *\n   * If the transition is invalid (and could not be run), returns the reason the transition is invalid.\n   * If the transition was valid and ran, but was not successful, returns the reason the transition failed.\n   *\n   * @returns an error message explaining why the transition is invalid, or the reason the transition failed.\n   */\n  error() {\n    let state: StateObject = this.$to();\n\n    if (state.self.abstract)\n      return `Cannot transition to abstract state '${state.name}'`;\n\n    const paramDefs = state.parameters(), values = this.params();\n    const invalidParams = paramDefs.filter(param => !param.validates(values[param.id]));\n    if (invalidParams.length) {\n      return `Param values not valid for state '${state.name}'. Invalid params: [ ${invalidParams.map(param => param.id).join(', ')} ]`;\n    }\n\n    if (this.success === false)\n      return this._error;\n  }\n\n  /**\n   * A string representation of the Transition\n   *\n   * @returns A string representation of the Transition\n   */\n  toString () {\n    let fromStateOrName = this.from();\n    let toStateOrName = this.to();\n\n    const avoidEmptyHash = (params: RawParams) =>\n      (params[\"#\"] !== null && params[\"#\"] !== undefined) ? params : omit(params, [\"#\"]);\n\n    // (X) means the to state is invalid.\n    let id = this.$id,\n        from = isObject(fromStateOrName) ? fromStateOrName.name : fromStateOrName,\n        fromParams = toJson(avoidEmptyHash(this._treeChanges.from.map(prop('paramValues')).reduce(mergeR, {}))),\n        toValid = this.valid() ? \"\" : \"(X) \",\n        to = isObject(toStateOrName) ? toStateOrName.name : toStateOrName,\n        toParams = toJson(avoidEmptyHash(this.params()));\n\n    return `Transition#${id}( '${from}'${fromParams} -> ${toValid}'${to}'${toParams} )`;\n  }\n}\n","/**\n * @coreapi\n * @module params\n */\n/** */\nimport { fromJson, toJson, identity, equals, inherit, map, extend, pick } from \"../common/common\";\nimport { isDefined, isNullOrUndefined } from \"../common/predicates\";\nimport { is } from \"../common/hof\";\nimport { services } from \"../common/coreservices\";\nimport { ParamType } from \"./paramType\";\nimport { ParamTypeDefinition } from \"./interface\";\n\n/**\n * A registry for parameter types.\n *\n * This registry manages the built-in (and custom) parameter types.\n *\n * The built-in parameter types are:\n *\n * - [[string]]\n * - [[path]]\n * - [[query]]\n * - [[hash]]\n * - [[int]]\n * - [[bool]]\n * - [[date]]\n * - [[json]]\n * - [[any]]\n */\nexport class ParamTypes {\n  /** @hidden */\n  types: any;\n  /** @hidden */\n  enqueue: boolean = true;\n  /** @hidden */\n  typeQueue: any[] = [];\n\n  /**\n   * Built-in parameter type: `string`\n   *\n   * This parameter type coerces values to strings.\n   * It matches anything (`new RegExp(\".*\")`) in the URL\n   */\n  static string: ParamTypeDefinition;\n\n  /**\n   * Built-in parameter type: `path`\n   *\n   * This parameter type is the default type for path parameters.\n   * A path parameter is any parameter declared in the path portion of a url\n   *\n   * - `/foo/:param1/:param2`: two path parameters\n   *\n   * This parameter type behaves exactly like the [[string]] type with one exception.\n   * When matching parameter values in the URL, the `path` type does not match forward slashes `/`.\n   *\n   * #### Angular 1 note:\n   * In ng1, this type is overridden with one that pre-encodes slashes as `~2F` instead of `%2F`.\n   * For more details about this angular 1 behavior, see: https://github.com/angular-ui/ui-router/issues/2598\n   */\n  static path: ParamTypeDefinition;\n\n  /**\n   * Built-in parameter type: `query`\n   *\n   * This parameter type is the default type for query/search parameters.\n   * It behaves the same as the [[string]] parameter type.\n   *\n   * A query parameter is any parameter declared in the query/search portion of a url\n   *\n   * - `/bar?param2`: a query parameter\n   */\n  static query: ParamTypeDefinition;\n\n  /**\n   * Built-in parameter type: `hash`\n   *\n   * This parameter type is used for the `#` parameter (the hash)\n   * It behaves the same as the [[string]] parameter type.\n   * @coreapi\n   */\n  static hash: ParamTypeDefinition;\n\n  /**\n   * Built-in parameter type: `int`\n   *\n   * This parameter type serializes javascript integers (`number`s which represent an integer) to the URL.\n   *\n   * #### Example:\n   * ```js\n   * .state({\n   *   name: 'user',\n   *   url: '/user/{id:int}'\n   * });\n   * ```\n   * ```js\n   * $state.go('user', { id: 1298547 });\n   * ```\n   *\n   * The URL will serialize to: `/user/1298547`.\n   *\n   * When the parameter value is read, it will be the `number` `1298547`, not the string `\"1298547\"`.\n   */\n  static int: ParamTypeDefinition;\n\n  /**\n   * Built-in parameter type: `bool`\n   *\n   * This parameter type serializes `true`/`false` as `1`/`0`\n   *\n   * #### Example:\n   * ```js\n   * .state({\n   *   name: 'inbox',\n   *   url: '/inbox?{unread:bool}'\n   * });\n   * ```\n   * ```js\n   * $state.go('inbox', { unread: true });\n   * ```\n   *\n   * The URL will serialize to: `/inbox?unread=1`.\n   *\n   * Conversely, if the url is `/inbox?unread=0`, the value of the `unread` parameter will be a `false`.\n   */\n  static bool: ParamTypeDefinition;\n\n  /**\n   * Built-in parameter type: `date`\n   *\n   * This parameter type can be used to serialize Javascript dates as parameter values.\n   *\n   * #### Example:\n   * ```js\n   * .state({\n   *   name: 'search',\n   *   url: '/search?{start:date}'\n   * });\n   * ```\n   * ```js\n   * $state.go('search', { start: new Date(2000, 0, 1) });\n   * ```\n   *\n   * The URL will serialize to: `/search?start=2000-01-01`.\n   *\n   * Conversely, if the url is `/search?start=2016-12-25`, the value of the `start` parameter will be a `Date` object where:\n   *\n   * - `date.getFullYear() === 2016`\n   * - `date.getMonth() === 11` (month is 0-based)\n   * - `date.getDate() === 25`\n   */\n  static date: ParamTypeDefinition;\n\n  /**\n   * Built-in parameter type: `json`\n   *\n   * This parameter type can be used to serialize javascript objects into the URL using JSON serialization.\n   *\n   * #### Example:\n   * This example serializes an plain javascript object to the URL\n   * ```js\n   * .state({\n   *   name: 'map',\n   *   url: '/map/{coords:json}'\n   * });\n   * ```\n   * ```js\n   * $state.go('map', { coords: { x: 10399.2, y: 49071 });\n   * ```\n   *\n   * The URL will serialize to: `/map/%7B%22x%22%3A10399.2%2C%22y%22%3A49071%7D`\n   */\n  static json: ParamTypeDefinition;\n\n  /**\n   * Built-in parameter type: `any`\n   *\n   * This parameter type is used by default for url-less parameters (parameters that do not appear in the URL).\n   * This type does not encode or decode.\n   * It is compared using a deep `equals` comparison.\n   *\n   * #### Example:\n   * This example defines a non-url parameter on a [[StateDeclaration]].\n   * ```js\n   * .state({\n   *   name: 'new',\n   *   url: '/new',\n   *   params: {\n   *     inrepyto: null\n   *   }\n   * });\n   * ```\n   * ```js\n   * $state.go('new', { inreplyto: currentMessage });\n   * ```\n   */\n  static any: ParamTypeDefinition;\n\n\n  /** @internalapi */\n  private defaultTypes: any = pick(ParamTypes.prototype, [\"hash\", \"string\", \"query\", \"path\", \"int\", \"bool\", \"date\", \"json\", \"any\"]);\n\n  /** @internalapi */\n  constructor() {\n    // Register default types. Store them in the prototype of this.types.\n    const makeType = (definition: ParamTypeDefinition, name: string) =>\n        new ParamType(extend({ name }, definition));\n    this.types = inherit(map(this.defaultTypes, makeType), {});\n  }\n\n  /** @internalapi */\n  dispose() {\n    this.types = {};\n  }\n\n  /**\n   * Registers a parameter type\n   *\n   * End users should call [[UrlMatcherFactory.type]], which delegates to this method.\n   */\n  type(name: string, definition?: ParamTypeDefinition, definitionFn?: () => ParamTypeDefinition) {\n    if (!isDefined(definition)) return this.types[name];\n    if (this.types.hasOwnProperty(name)) throw new Error(`A type named '${name}' has already been defined.`);\n\n    this.types[name] = new ParamType(extend({ name }, definition));\n\n    if (definitionFn) {\n      this.typeQueue.push({ name, def: definitionFn });\n      if (!this.enqueue) this._flushTypeQueue();\n    }\n\n    return this;\n  }\n\n  /** @internalapi */\n  _flushTypeQueue() {\n    while (this.typeQueue.length) {\n      let type = this.typeQueue.shift();\n      if (type.pattern) throw new Error(\"You cannot override a type's .pattern at runtime.\");\n      extend(this.types[type.name], services.$injector.invoke(type.def));\n    }\n  }\n}\n\n/** @hidden */\nfunction initDefaultTypes() {\n\n  const makeDefaultType = (def) => {\n    const valToString = (val: any) =>\n        val != null ? val.toString() : val;\n\n    const defaultTypeBase = {\n      encode: valToString,\n      decode: valToString,\n      is: is(String),\n      pattern: /.*/,\n      equals: (a: any, b: any) => a == b, // allow coersion for null/undefined/\"\"\n    };\n\n    return extend({}, defaultTypeBase, def) as ParamTypeDefinition;\n  };\n\n  // Default Parameter Type Definitions\n  extend(ParamTypes.prototype, {\n    string: makeDefaultType({}),\n\n    path: makeDefaultType({\n      pattern: /[^/]*/,\n    }),\n\n    query: makeDefaultType({}),\n\n    hash: makeDefaultType({\n      inherit: false,\n    }),\n\n    int: makeDefaultType({\n      decode: (val: string) => parseInt(val, 10),\n      is: function(val: any) {\n        return !isNullOrUndefined(val) && this.decode(val.toString()) === val;\n      },\n      pattern: /-?\\d+/,\n    }),\n\n    bool: makeDefaultType({\n      encode: (val: any) => val && 1 || 0,\n      decode: (val: string) => parseInt(val, 10) !== 0,\n      is: is(Boolean),\n      pattern: /0|1/\n    }),\n\n    date: makeDefaultType({\n      encode: function(val: any) {\n        return !this.is(val) ? undefined : [\n          val.getFullYear(),\n          ('0' + (val.getMonth() + 1)).slice(-2),\n          ('0' + val.getDate()).slice(-2)\n        ].join(\"-\");\n      },\n      decode: function(val: string) {\n        if (this.is(val)) return <any> val as Date;\n        let match = this.capture.exec(val);\n        return match ? new Date(match[1], match[2] - 1, match[3]) : undefined;\n      },\n      is: (val: any) => val instanceof Date && !isNaN(val.valueOf()),\n      equals(l: any, r: any) {\n        return ['getFullYear', 'getMonth', 'getDate']\n            .reduce((acc, fn) => acc && l[fn]() === r[fn](), true)\n      },\n      pattern: /[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,\n      capture: /([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/\n    }),\n\n    json: makeDefaultType({\n      encode: toJson,\n      decode: fromJson,\n      is: is(Object),\n      equals: equals,\n      pattern: /[^/]*/\n    }),\n\n    // does not encode/decode\n    any: makeDefaultType({\n      encode: identity,\n      decode: identity,\n      is: () => true,\n      equals: equals,\n    }),\n  })\n\n}\n\ninitDefaultTypes();\n\n","/**\n * @coreapi\n * @module params\n */\n/** */\nimport {extend, ancestors, Obj} from \"../common/common\";\nimport {StateObject} from \"../state/stateObject\";\n\n/** @internalapi */\nexport class StateParams {\n  [key: string]: any;\n\n  constructor(params: Obj = {}) {\n    extend(this, params);\n  }\n\n  /**\n   * Merges a set of parameters with all parameters inherited between the common parents of the\n   * current state and a given destination state.\n   *\n   * @param {Object} newParams The set of parameters which will be composited with inherited params.\n   * @param {Object} $current Internal definition of object representing the current state.\n   * @param {Object} $to Internal definition of object representing state to transition to.\n   */\n  $inherit(newParams: Obj, $current: StateObject, $to: StateObject) {\n    let parents = ancestors($current, $to),\n        parentParams: string[],\n        inherited: Obj = {},\n        inheritList: string[] = [];\n\n    for (let i in parents) {\n      if (!parents[i] || !parents[i].params) continue;\n      parentParams = Object.keys(parents[i].params);\n      if (!parentParams.length) continue;\n\n      for (let j in parentParams) {\n        if (inheritList.indexOf(parentParams[j]) >= 0) continue;\n        inheritList.push(parentParams[j]);\n        inherited[parentParams[j]] = this[parentParams[j]];\n      }\n    }\n    return extend({}, inherited, newParams);\n  };\n}\n\n","/** @module state */ /** for typedoc */\nimport {isString} from \"../common/predicates\";\nimport {StateOrName} from \"./interface\";\nimport {StateObject} from \"./stateObject\";\nimport {values} from \"../common/common\";\n\nexport class StateMatcher {\n  constructor (private _states: { [key: string]: StateObject }) { }\n  \n  isRelative(stateName: string) {\n    stateName = stateName || \"\";\n    return stateName.indexOf(\".\") === 0 || stateName.indexOf(\"^\") === 0;\n  }\n\n\n  find(stateOrName: StateOrName, base?: StateOrName, matchGlob = true): StateObject {\n    if (!stateOrName && stateOrName !== \"\") return undefined;\n    let isStr = isString(stateOrName);\n    let name: string = isStr ? stateOrName : (<any>stateOrName).name;\n\n    if (this.isRelative(name)) name = this.resolvePath(name, base);\n    let state = this._states[name];\n\n    if (state && (isStr || (!isStr && (state === stateOrName || state.self === stateOrName)))) {\n      return state;\n    } else if (isStr && matchGlob) {\n      let _states = values(this._states);\n      let matches = _states.filter(state =>\n          state.__stateObjectCache.nameGlob &&\n          state.__stateObjectCache.nameGlob.matches(name)\n      );\n\n      if (matches.length > 1) {\n        console.log(`stateMatcher.find: Found multiple matches for ${name} using glob: `, matches.map(match => match.name));\n      }\n      return matches[0];\n    }\n    return undefined;\n  }\n\n  resolvePath(name: string, base: StateOrName) {\n    if (!base) throw new Error(`No reference point given for path '${name}'`);\n    \n    let baseState: StateObject = this.find(base);\n\n    let splitName = name.split(\".\"), i = 0, pathLength = splitName.length, current = baseState;\n\n    for (; i < pathLength; i++) {\n      if (splitName[i] === \"\" && i === 0) {\n        current = baseState;\n        continue;\n      }\n      if (splitName[i] === \"^\") {\n        if (!current.parent) throw new Error(`Path '${name}' not valid for state '${baseState.name}'`);\n        current = current.parent;\n        continue;\n      }\n      break;\n    }\n    let relName = splitName.slice(i).join(\".\");\n    return current.name + (current.name && relName ? \".\" : \"\") + relName;\n  }\n}\n","/** @module state */ /** for typedoc */\nimport { inArray } from \"../common/common\";\nimport { isString } from \"../common/predicates\";\nimport { StateDeclaration, _StateDeclaration } from \"./interface\";\nimport { StateObject } from \"./stateObject\";\nimport { StateBuilder } from \"./stateBuilder\";\nimport { StateRegistryListener, StateRegistry } from \"./stateRegistry\";\nimport { Disposable } from \"../interface\";\nimport { UrlRouter } from \"../url/urlRouter\";\nimport { prop } from \"../common/hof\";\nimport { StateMatcher } from \"./stateMatcher\";\n\n/** @internalapi */\nexport class StateQueueManager implements Disposable {\n  queue: StateObject[];\n  matcher: StateMatcher;\n\n  constructor(\n      private $registry: StateRegistry,\n      private $urlRouter: UrlRouter,\n      public states: { [key: string]: StateObject; },\n      public builder: StateBuilder,\n      public listeners: StateRegistryListener[]) {\n    this.queue = [];\n    this.matcher = $registry.matcher;\n  }\n\n  /** @internalapi */\n  dispose() {\n    this.queue = [];\n  }\n\n  register(stateDecl: _StateDeclaration) {\n    let queue = this.queue;\n    let state = StateObject.create(stateDecl);\n    let name = state.name;\n\n    if (!isString(name)) throw new Error(\"State must have a valid name\");\n    if (this.states.hasOwnProperty(name) || inArray(queue.map(prop('name')), name))\n      throw new Error(`State '${name}' is already defined`);\n\n    queue.push(state);\n    this.flush();\n\n    return state;\n  }\n\n  flush() {\n    let {queue, states, builder} = this;\n    let registered: StateObject[] = [], // states that got registered\n        orphans: StateObject[] = [], // states that don't yet have a parent registered\n        previousQueueLength = {}; // keep track of how long the queue when an orphan was first encountered\n    const getState = (name) =>\n        this.states.hasOwnProperty(name) && this.states[name];\n\n    while (queue.length > 0) {\n      let state: StateObject = queue.shift();\n      let name = state.name;\n      let result: StateObject = builder.build(state);\n      let orphanIdx: number = orphans.indexOf(state);\n\n      if (result) {\n        let existingState = getState(name);\n        if (existingState && existingState.name === name) {\n          throw new Error(`State '${name}' is already defined`);\n        }\n\n        let existingFutureState = getState(name + \".**\");\n        if (existingFutureState) {\n          // Remove future state of the same name\n          this.$registry.deregister(existingFutureState);\n        }\n\n        states[name] = state;\n        this.attachRoute(state);\n        if (orphanIdx >= 0) orphans.splice(orphanIdx, 1);\n        registered.push(state);\n        continue;\n      }\n\n      let prev = previousQueueLength[name];\n      previousQueueLength[name] = queue.length;\n      if (orphanIdx >= 0 && prev === queue.length) {\n        // Wait until two consecutive iterations where no additional states were dequeued successfully.\n        // throw new Error(`Cannot register orphaned state '${name}'`);\n        queue.push(state);\n        return states;\n      } else if (orphanIdx < 0) {\n        orphans.push(state);\n      }\n\n      queue.push(state);\n    }\n\n    if (registered.length) {\n      this.listeners.forEach(listener => listener(\"registered\", registered.map(s => s.self)));\n    }\n\n    return states;\n  }\n\n  attachRoute(state: StateObject) {\n    if (state.abstract || !state.url) return;\n\n    this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(state));\n  }\n}\n","/**\n * @coreapi\n * @module state\n */ /** for typedoc */\n\nimport { StateObject } from \"./stateObject\";\nimport { StateMatcher } from \"./stateMatcher\";\nimport { StateBuilder } from \"./stateBuilder\";\nimport { StateQueueManager } from \"./stateQueueManager\";\nimport { StateDeclaration, _StateDeclaration } from \"./interface\";\nimport { BuilderFunction } from \"./stateBuilder\";\nimport { StateOrName } from \"./interface\";\nimport { removeFrom } from \"../common/common\";\nimport { UIRouter } from \"../router\";\nimport { propEq } from \"../common/hof\";\n\n/**\n * The signature for the callback function provided to [[StateRegistry.onStatesChanged]].\n *\n * This callback receives two parameters:\n *\n * @param event a string; either \"registered\" or \"deregistered\"\n * @param states the list of [[StateDeclaration]]s that were registered (or deregistered).\n */\nexport type StateRegistryListener = (event: \"registered\"|\"deregistered\", states: StateDeclaration[]) => void;\n\nexport class StateRegistry {\n  private _root: StateObject;\n  private states: { [key: string]: StateObject } = {};\n\n  matcher: StateMatcher;\n  private builder: StateBuilder;\n  stateQueue: StateQueueManager;\n\n  listeners: StateRegistryListener[] = [];\n\n  /** @internalapi */\n  constructor(private _router: UIRouter) {\n    this.matcher = new StateMatcher(this.states);\n    this.builder = new StateBuilder(this.matcher, _router.urlMatcherFactory);\n    this.stateQueue = new StateQueueManager(this, _router.urlRouter, this.states, this.builder, this.listeners);\n    this._registerRoot();\n  }\n\n  /** @internalapi */\n  private _registerRoot() {\n    let rootStateDef: StateDeclaration = {\n      name: '',\n      url: '^',\n      views: null,\n      params: {\n        '#': { value: null, type: 'hash', dynamic: true }\n      },\n      abstract: true\n    };\n\n    let _root = this._root = this.stateQueue.register(rootStateDef);\n    _root.navigable = null;\n  }\n\n  /** @internalapi */\n  dispose() {\n    this.stateQueue.dispose();\n    this.listeners = [];\n    this.get().forEach(state => this.get(state) && this.deregister(state));\n  }\n\n  /**\n   * Listen for a State Registry events\n   *\n   * Adds a callback that is invoked when states are registered or deregistered with the StateRegistry.\n   *\n   * #### Example:\n   * ```js\n   * let allStates = registry.get();\n   *\n   * // Later, invoke deregisterFn() to remove the listener\n   * let deregisterFn = registry.onStatesChanged((event, states) => {\n   *   switch(event) {\n   *     case: 'registered':\n   *       states.forEach(state => allStates.push(state));\n   *       break;\n   *     case: 'deregistered':\n   *       states.forEach(state => {\n   *         let idx = allStates.indexOf(state);\n   *         if (idx !== -1) allStates.splice(idx, 1);\n   *       });\n   *       break;\n   *   }\n   * });\n   * ```\n   *\n   * @param listener a callback function invoked when the registered states changes.\n   *        The function receives two parameters, `event` and `state`.\n   *        See [[StateRegistryListener]]\n   * @return a function that deregisters the listener\n   */\n  onStatesChanged(listener: StateRegistryListener): () => void {\n    this.listeners.push(listener);\n    return function deregisterListener() {\n      removeFrom(this.listeners)(listener);\n    }.bind(this);\n  }\n\n  /**\n   * Gets the implicit root state\n   *\n   * Gets the root of the state tree.\n   * The root state is implicitly created by UI-Router.\n   * Note: this returns the internal [[StateObject]] representation, not a [[StateDeclaration]]\n   *\n   * @return the root [[StateObject]]\n   */\n  root() {\n    return this._root;\n  }\n\n  /**\n   * Adds a state to the registry\n   *\n   * Registers a [[StateDeclaration]] or queues it for registration.\n   *\n   * Note: a state will be queued if the state's parent isn't yet registered.\n   *\n   * @param stateDefinition the definition of the state to register.\n   * @returns the internal [[StateObject]] object.\n   *          If the state was successfully registered, then the object is fully built (See: [[StateBuilder]]).\n   *          If the state was only queued, then the object is not fully built.\n   */\n  register(stateDefinition: _StateDeclaration): StateObject {\n    return this.stateQueue.register(stateDefinition);\n  }\n\n  /** @hidden */\n  private _deregisterTree(state: StateObject) {\n    let all = this.get().map(s => s.$$state());\n    const getChildren = (states: StateObject[]) => {\n      let children = all.filter(s => states.indexOf(s.parent) !== -1);\n      return children.length === 0 ? children : children.concat(getChildren(children));\n    };\n\n    let children = getChildren([state]);\n    let deregistered: StateObject[] = [state].concat(children).reverse();\n\n    deregistered.forEach(state => {\n      let $ur = this._router.urlRouter;\n      // Remove URL rule\n      $ur.rules().filter(propEq(\"state\", state)).forEach($ur.removeRule.bind($ur));\n      // Remove state from registry\n      delete this.states[state.name];\n    });\n\n    return deregistered;\n  }\n\n  /**\n   * Removes a state from the registry\n   *\n   * This removes a state from the registry.\n   * If the state has children, they are are also removed from the registry.\n   *\n   * @param stateOrName the state's name or object representation\n   * @returns {StateObject[]} a list of removed states\n   */\n  deregister(stateOrName: StateOrName) {\n    let _state = this.get(stateOrName);\n    if (!_state) throw new Error(\"Can't deregister state; not found: \" + stateOrName);\n    let deregisteredStates = this._deregisterTree(_state.$$state());\n\n    this.listeners.forEach(listener => listener(\"deregistered\", deregisteredStates.map(s => s.self)));\n    return deregisteredStates;\n  }\n\n  /**\n   * Gets all registered states\n   *\n   * Calling this method with no arguments will return a list of all the states that are currently registered.\n   * Note: this does not return states that are *queued* but not yet registered.\n   *\n   * @return a list of [[StateDeclaration]]s\n   */\n  get(): StateDeclaration[];\n\n  /**\n   * Gets a registered state\n   *\n   * Given a state or a name, finds and returns the [[StateDeclaration]] from the registry.\n   * Note: this does not return states that are *queued* but not yet registered.\n   *\n   * @param stateOrName either the name of a state, or a state object.\n   * @return a registered [[StateDeclaration]] that matched the `stateOrName`, or null if the state isn't registered.\n   */\n  get(stateOrName: StateOrName, base?: StateOrName): StateDeclaration;\n  get(stateOrName?: StateOrName, base?: StateOrName): any {\n    if (arguments.length === 0) \n      return <StateDeclaration[]> Object.keys(this.states).map(name => this.states[name].self);\n    let found = this.matcher.find(stateOrName, base);\n    return found && found.self || null;\n  }\n\n  decorator(name: string, func: BuilderFunction) {\n    return this.builder.builder(name, func);\n  }\n}","/**\n * @internalapi\n * @module url\n */ /** for typedoc */\nimport { forEach, extend } from \"../common/common\";\nimport { isObject, isDefined, isFunction, isString } from \"../common/predicates\";\nimport { UrlMatcher } from \"./urlMatcher\";\nimport { Param, DefType } from \"../params/param\";\nimport { ParamTypes } from \"../params/paramTypes\";\nimport { ParamTypeDefinition } from \"../params/interface\";\nimport { Disposable } from \"../interface\";\nimport { ParamType } from \"../params/paramType\";\nimport { ParamFactory, UrlMatcherConfig } from \"./interface\";\n\n/**\n * Factory for [[UrlMatcher]] instances.\n *\n * The factory is available to ng1 services as\n * `$urlMatcherFactor` or ng1 providers as `$urlMatcherFactoryProvider`.\n */\nexport class UrlMatcherFactory implements Disposable, UrlMatcherConfig {\n  /** @hidden */ paramTypes = new ParamTypes();\n  /** @hidden */ _isCaseInsensitive: boolean = false;\n  /** @hidden */ _isStrictMode: boolean = true;\n  /** @hidden */ _defaultSquashPolicy: (boolean|string) = false;\n\n  constructor() {\n    extend(this, { UrlMatcher, Param });\n  }\n\n  /** @inheritdoc */\n  caseInsensitive(value?: boolean): boolean {\n    return this._isCaseInsensitive = isDefined(value) ? value : this._isCaseInsensitive;\n  }\n\n  /** @inheritdoc */\n  strictMode(value?: boolean): boolean {\n    return this._isStrictMode = isDefined(value) ? value : this._isStrictMode;\n  }\n\n  /** @inheritdoc */\n  defaultSquashPolicy(value?: (boolean|string)) {\n    if (isDefined(value) && value !== true && value !== false && !isString(value))\n      throw new Error(`Invalid squash policy: ${value}. Valid policies: false, true, arbitrary-string`);\n    return this._defaultSquashPolicy = isDefined(value) ? value : this._defaultSquashPolicy;\n  }\n\n  /** @hidden */\n  private _getConfig = (config) =>\n      extend({ strict: this._isStrictMode, caseInsensitive: this._isCaseInsensitive }, config);\n\n  /**\n   * Creates a [[UrlMatcher]] for the specified pattern.\n   *\n   * @param pattern  The URL pattern.\n   * @param config  The config object hash.\n   * @returns The UrlMatcher.\n   */\n  compile(pattern: string, config?: { [key: string]: any }) {\n    return new UrlMatcher(pattern, this.paramTypes, this.paramFactory, this._getConfig(config));\n  }\n\n  /**\n   * Returns true if the specified object is a [[UrlMatcher]], or false otherwise.\n   *\n   * @param object  The object to perform the type check against.\n   * @returns `true` if the object matches the `UrlMatcher` interface, by\n   *          implementing all the same methods.\n   */\n  isMatcher(object: any): boolean {\n    // TODO: typeof?\n    if (!isObject(object)) return false;\n    let result = true;\n\n    forEach(UrlMatcher.prototype, (val, name) => {\n      if (isFunction(val)) result = result && (isDefined(object[name]) && isFunction(object[name]));\n    });\n    return result;\n  };\n\n  /**\n   * Creates and registers a custom [[ParamType]] object\n   *\n   * A [[ParamType]] can be used to generate URLs with typed parameters.\n   *\n   * @param name  The type name.\n   * @param definition The type definition. See [[ParamTypeDefinition]] for information on the values accepted.\n   * @param definitionFn A function that is injected before the app runtime starts.\n   *        The result of this function should be a [[ParamTypeDefinition]].\n   *        The result is merged into the existing `definition`.\n   *        See [[ParamType]] for information on the values accepted.\n   *\n   * @returns - if a type was registered: the [[UrlMatcherFactory]]\n   *   - if only the `name` parameter was specified: the currently registered [[ParamType]] object, or undefined\n   *\n   * Note: Register custom types *before using them* in a state definition.\n   *\n   * See [[ParamTypeDefinition]] for examples\n   */\n  type(name: string, definition?: ParamTypeDefinition, definitionFn?: () => ParamTypeDefinition) {\n    let type = this.paramTypes.type(name, definition, definitionFn);\n    return !isDefined(definition) ? type : this;\n  };\n\n  /** @hidden */\n  $get() {\n    this.paramTypes.enqueue = false;\n    this.paramTypes._flushTypeQueue();\n    return this;\n  };\n\n  /** @internalapi Creates a new [[Param]] for a given location (DefType) */\n  paramFactory: ParamFactory = {\n    /** Creates a new [[Param]] from a CONFIG block */\n    fromConfig: (id: string, type: ParamType, config: any) =>\n        new Param(id, type, config, DefType.CONFIG, this),\n\n    /** Creates a new [[Param]] from a url PATH */\n    fromPath: (id: string, type: ParamType, config: any) =>\n        new Param(id, type, config, DefType.PATH, this),\n\n    /** Creates a new [[Param]] from a url SEARCH */\n    fromSearch: (id: string, type: ParamType, config: any) =>\n        new Param(id, type, config, DefType.SEARCH, this),\n  };\n\n  /** @internalapi */\n  dispose() {\n    this.paramTypes.dispose();\n  }\n}\n","/**\n * @coreapi\n * @module url\n */ /** */\nimport { UrlMatcher } from \"./urlMatcher\";\nimport { isString, isDefined, isFunction, isState } from \"../common/predicates\";\nimport { UIRouter } from \"../router\";\nimport { identity, extend } from \"../common/common\";\nimport { is, pattern } from \"../common/hof\";\nimport { StateObject } from \"../state/stateObject\";\nimport { RawParams } from \"../params/interface\";\nimport {\n    UrlRule, UrlRuleMatchFn, UrlRuleHandlerFn, UrlRuleType, UrlParts, MatcherUrlRule, StateRule, RegExpRule\n} from \"./interface\";\n\n/**\n * Creates a [[UrlRule]]\n *\n * Creates a [[UrlRule]] from a:\n *\n * - `string`\n * - [[UrlMatcher]]\n * - `RegExp`\n * - [[StateObject]]\n * @internalapi\n */\nexport class UrlRuleFactory {\n  constructor(public router: UIRouter) { }\n\n  compile(str: string) {\n    return this.router.urlMatcherFactory.compile(str);\n  }\n\n  static isUrlRule = obj =>\n      obj && ['type', 'match', 'handler'].every(key => isDefined(obj[key]));\n\n  create(what: string|UrlMatcher|StateObject|RegExp|UrlRuleMatchFn, handler?: string|UrlRuleHandlerFn): UrlRule {\n    const makeRule = pattern([\n      [isString,       (_what: string)         => makeRule(this.compile(_what))],\n      [is(UrlMatcher), (_what: UrlMatcher)     => this.fromUrlMatcher(_what, handler)],\n      [isState,        (_what: StateObject)    => this.fromState(_what, this.router)],\n      [is(RegExp),     (_what: RegExp)         => this.fromRegExp(_what, handler)],\n      [isFunction,     (_what: UrlRuleMatchFn) => new BaseUrlRule(_what, handler as UrlRuleHandlerFn)],\n    ]);\n\n    let rule = makeRule(what);\n    if (!rule) throw new Error(\"invalid 'what' in when()\");\n    return rule;\n  }\n\n  /**\n   * A UrlRule which matches based on a UrlMatcher\n   *\n   * The `handler` may be either a `string`, a [[UrlRuleHandlerFn]] or another [[UrlMatcher]]\n   *\n   * ## Handler as a function\n   *\n   * If `handler` is a function, the function is invoked with:\n   *\n   * - matched parameter values ([[RawParams]] from [[UrlMatcher.exec]])\n   * - url: the current Url ([[UrlParts]])\n   * - router: the router object ([[UIRouter]])\n   *\n   * #### Example:\n   * ```js\n   * var urlMatcher = $umf.compile(\"/foo/:fooId/:barId\");\n   * var rule = factory.fromUrlMatcher(urlMatcher, match => \"/home/\" + match.fooId + \"/\" + match.barId);\n   * var match = rule.match('/foo/123/456'); // results in { fooId: '123', barId: '456' }\n   * var result = rule.handler(match); // '/home/123/456'\n   * ```\n   *\n   * ## Handler as UrlMatcher\n   *\n   * If `handler` is a UrlMatcher, the handler matcher is used to create the new url.\n   * The `handler` UrlMatcher is formatted using the matched param from the first matcher.\n   * The url is replaced with the result.\n   *\n   * #### Example:\n   * ```js\n   * var urlMatcher = $umf.compile(\"/foo/:fooId/:barId\");\n   * var handler = $umf.compile(\"/home/:fooId/:barId\");\n   * var rule = factory.fromUrlMatcher(urlMatcher, handler);\n   * var match = rule.match('/foo/123/456'); // results in { fooId: '123', barId: '456' }\n   * var result = rule.handler(match); // '/home/123/456'\n   * ```\n   */\n  fromUrlMatcher(urlMatcher: UrlMatcher, handler: string|UrlMatcher|UrlRuleHandlerFn): MatcherUrlRule {\n    let _handler: UrlRuleHandlerFn = handler as any;\n    if (isString(handler)) handler = this.router.urlMatcherFactory.compile(handler);\n    if (is(UrlMatcher)(handler)) _handler = (match: RawParams) => (handler as UrlMatcher).format(match);\n\n    function match(url: UrlParts) {\n      let match = urlMatcher.exec(url.path, url.search, url.hash);\n      return urlMatcher.validates(match) && match;\n    }\n\n    // Prioritize URLs, lowest to highest:\n    // - Some optional URL parameters, but none matched\n    // - No optional parameters in URL\n    // - Some optional parameters, some matched\n    // - Some optional parameters, all matched\n    function matchPriority(params: RawParams): number {\n      let optional = urlMatcher.parameters().filter(param => param.isOptional);\n      if (!optional.length) return 0.000001;\n      let matched = optional.filter(param => params[param.id]);\n      return matched.length / optional.length;\n    }\n\n    let details = { urlMatcher, matchPriority, type: \"URLMATCHER\" };\n    return extend(new BaseUrlRule(match, _handler), details) as MatcherUrlRule;\n  }\n\n\n  /**\n   * A UrlRule which matches a state by its url\n   *\n   * #### Example:\n   * ```js\n   * var rule = factory.fromState($state.get('foo'), router);\n   * var match = rule.match('/foo/123/456'); // results in { fooId: '123', barId: '456' }\n   * var result = rule.handler(match);\n   * // Starts a transition to 'foo' with params: { fooId: '123', barId: '456' }\n   * ```\n   */\n  fromState(state: StateObject, router: UIRouter): StateRule {\n    /**\n     * Handles match by transitioning to matched state\n     *\n     * First checks if the router should start a new transition.\n     * A new transition is not required if the current state's URL\n     * and the new URL are already identical\n     */\n    const handler = (match: RawParams) => {\n      let $state = router.stateService;\n      let globals = router.globals;\n      if ($state.href(state, match) !== $state.href(globals.current, globals.params)) {\n        $state.transitionTo(state, match, { inherit: true, source: \"url\" });\n      }\n    };\n\n    let details = { state, type: \"STATE\" };\n    return extend(this.fromUrlMatcher(state.url, handler), details) as StateRule;\n  }\n\n  /**\n   * A UrlRule which matches based on a regular expression\n   *\n   * The `handler` may be either a [[UrlRuleHandlerFn]] or a string.\n   *\n   * ## Handler as a function\n   *\n   * If `handler` is a function, the function is invoked with:\n   *\n   * - regexp match array (from `regexp`)\n   * - url: the current Url ([[UrlParts]])\n   * - router: the router object ([[UIRouter]])\n   *\n   * #### Example:\n   * ```js\n   * var rule = factory.fromRegExp(/^\\/foo\\/(bar|baz)$/, match => \"/home/\" + match[1])\n   * var match = rule.match('/foo/bar'); // results in [ '/foo/bar', 'bar' ]\n   * var result = rule.handler(match); // '/home/bar'\n   * ```\n   *\n   * ## Handler as string\n   *\n   * If `handler` is a string, the url is *replaced by the string* when the Rule is invoked.\n   * The string is first interpolated using `string.replace()` style pattern.\n   *\n   * #### Example:\n   * ```js\n   * var rule = factory.fromRegExp(/^\\/foo\\/(bar|baz)$/, \"/home/$1\")\n   * var match = rule.match('/foo/bar'); // results in [ '/foo/bar', 'bar' ]\n   * var result = rule.handler(match); // '/home/bar'\n   * ```\n   */\n  fromRegExp(regexp: RegExp, handler: string|UrlRuleHandlerFn): RegExpRule {\n    if (regexp.global || regexp.sticky) throw new Error(\"Rule RegExp must not be global or sticky\");\n\n    /**\n     * If handler is a string, the url will be replaced by the string.\n     * If the string has any String.replace() style variables in it (like `$2`),\n     * they will be replaced by the captures from [[match]]\n     */\n    const redirectUrlTo = (match: RegExpExecArray) =>\n        // Interpolates matched values into $1 $2, etc using a String.replace()-style pattern\n        (handler as string).replace(/\\$(\\$|\\d{1,2})/, (m, what) =>\n            match[what === '$' ? 0 : Number(what)]);\n\n    const _handler = isString(handler) ? redirectUrlTo : handler;\n\n    const match = (url: UrlParts): RegExpExecArray =>\n        regexp.exec(url.path);\n\n    let details = { regexp, type: \"REGEXP\" };\n    return extend(new BaseUrlRule(match, _handler), details) as RegExpRule\n  }\n}\n\n/**\n * A base rule which calls `match`\n *\n * The value from the `match` function is passed through to the `handler`.\n * @internalapi\n */\nexport class BaseUrlRule implements UrlRule {\n  $id: number;\n  priority: number;\n  type: UrlRuleType = \"RAW\";\n  handler: UrlRuleHandlerFn;\n  matchPriority = (match) => 0 - this.$id;\n\n  constructor(public match: UrlRuleMatchFn, handler?: UrlRuleHandlerFn) {\n    this.handler = handler || identity;\n  }\n}","/**\n * @coreapi\n * @module view\n */ /** for typedoc */\nimport {equals, applyPairs, removeFrom, TypedMap} from \"../common/common\";\nimport {curry, prop} from \"../common/hof\";\nimport {isString, isArray} from \"../common/predicates\";\nimport {trace} from \"../common/trace\";\nimport {PathNode} from \"../path/pathNode\";\n\nimport {ActiveUIView, ViewContext, ViewConfig} from \"./interface\";\nimport {_ViewDeclaration} from \"../state/interface\";\n\nexport type ViewConfigFactory = (path: PathNode[], decl: _ViewDeclaration) => ViewConfig|ViewConfig[];\n\nexport interface ViewServicePluginAPI {\n  _rootViewContext(context?: ViewContext): ViewContext;\n  _viewConfigFactory(viewType: string, factory: ViewConfigFactory);\n  _registeredUIViews(): ActiveUIView[];\n  _activeViewConfigs(): ViewConfig[];\n}\n\n/**\n * The View service\n *\n * This service pairs existing `ui-view` components (which live in the DOM)\n * with view configs (from the state declaration objects: [[StateDeclaration.views]]).\n *\n * - After a successful Transition, the views from the newly entered states are activated via [[activateViewConfig]].\n *   The views from exited states are deactivated via [[deactivateViewConfig]].\n *   (See: the [[registerActivateViews]] Transition Hook)\n *\n * - As `ui-view` components pop in and out of existence, they register themselves using [[registerUIView]].\n *\n * - When the [[sync]] function is called, the registered `ui-view`(s) ([[ActiveUIView]])\n * are configured with the matching [[ViewConfig]](s)\n *\n */\nexport class ViewService {\n  private _uiViews: ActiveUIView[] = [];\n  private _viewConfigs: ViewConfig[] = [];\n  private _rootContext: ViewContext;\n  private _viewConfigFactories: { [key: string]: ViewConfigFactory } = {};\n\n  constructor() { }\n\n  public _pluginapi: ViewServicePluginAPI = {\n    _rootViewContext: this._rootViewContext.bind(this),\n    _viewConfigFactory: this._viewConfigFactory.bind(this),\n    _registeredUIViews: () => this._uiViews,\n    _activeViewConfigs: () => this._viewConfigs,\n  };\n\n  private _rootViewContext(context?: ViewContext): ViewContext {\n    return this._rootContext = context || this._rootContext;\n  };\n\n  private _viewConfigFactory(viewType: string, factory: ViewConfigFactory) {\n    this._viewConfigFactories[viewType] = factory;\n  }\n\n  createViewConfig(path: PathNode[], decl: _ViewDeclaration): ViewConfig[] {\n    let cfgFactory = this._viewConfigFactories[decl.$type];\n    if (!cfgFactory) throw new Error(\"ViewService: No view config factory registered for type \" + decl.$type);\n    let cfgs = cfgFactory(path, decl);\n    return isArray(cfgs) ? cfgs : [cfgs];\n  }\n  \n  /**\n   * Deactivates a ViewConfig.\n   *\n   * This function deactivates a `ViewConfig`.\n   * After calling [[sync]], it will un-pair from any `ui-view` with which it is currently paired.\n   *\n   * @param viewConfig The ViewConfig view to deregister.\n   */\n  deactivateViewConfig(viewConfig: ViewConfig) {\n    trace.traceViewServiceEvent(\"<- Removing\", viewConfig);\n    removeFrom(this._viewConfigs, viewConfig);\n  }\n\n  activateViewConfig(viewConfig: ViewConfig) {\n    trace.traceViewServiceEvent(\"-> Registering\", <any> viewConfig);\n    this._viewConfigs.push(viewConfig);\n  }\n\n  /**\n   * Given a ui-view and a ViewConfig, determines if they \"match\".\n   *\n   * A ui-view has a fully qualified name (fqn) and a context object.  The fqn is built from its overall location in\n   * the DOM, describing its nesting relationship to any parent ui-view tags it is nested inside of.\n   *\n   * A ViewConfig has a target ui-view name and a context anchor.  The ui-view name can be a simple name, or\n   * can be a segmented ui-view path, describing a portion of a ui-view fqn.\n   *\n   * In order for a ui-view to match ViewConfig, ui-view's $type must match the ViewConfig's $type\n   *\n   * If the ViewConfig's target ui-view name is a simple name (no dots), then a ui-view matches if:\n   * - the ui-view's name matches the ViewConfig's target name\n   * - the ui-view's context matches the ViewConfig's anchor\n   *\n   * If the ViewConfig's target ui-view name is a segmented name (with dots), then a ui-view matches if:\n   * - There exists a parent ui-view where:\n   *    - the parent ui-view's name matches the first segment (index 0) of the ViewConfig's target name\n   *    - the parent ui-view's context matches the ViewConfig's anchor\n   * - And the remaining segments (index 1..n) of the ViewConfig's target name match the tail of the ui-view's fqn\n   *\n   * Example:\n   *\n   * DOM:\n   * <ui-view>                        <!-- created in the root context (name: \"\") -->\n   *   <ui-view name=\"foo\">                <!-- created in the context named: \"A\"      -->\n   *     <ui-view>                    <!-- created in the context named: \"A.B\"    -->\n   *       <ui-view name=\"bar\">            <!-- created in the context named: \"A.B.C\"  -->\n   *       </ui-view>\n   *     </ui-view>\n   *   </ui-view>\n   * </ui-view>\n   *\n   * uiViews: [\n   *  { fqn: \"$default\",                  creationContext: { name: \"\" } },\n   *  { fqn: \"$default.foo\",              creationContext: { name: \"A\" } },\n   *  { fqn: \"$default.foo.$default\",     creationContext: { name: \"A.B\" } }\n   *  { fqn: \"$default.foo.$default.bar\", creationContext: { name: \"A.B.C\" } }\n   * ]\n   *\n   * These four view configs all match the ui-view with the fqn: \"$default.foo.$default.bar\":\n   *\n   * - ViewConfig1: { uiViewName: \"bar\",                       uiViewContextAnchor: \"A.B.C\" }\n   * - ViewConfig2: { uiViewName: \"$default.bar\",              uiViewContextAnchor: \"A.B\" }\n   * - ViewConfig3: { uiViewName: \"foo.$default.bar\",          uiViewContextAnchor: \"A\" }\n   * - ViewConfig4: { uiViewName: \"$default.foo.$default.bar\", uiViewContextAnchor: \"\" }\n   *\n   * Using ViewConfig3 as an example, it matches the ui-view with fqn \"$default.foo.$default.bar\" because:\n   * - The ViewConfig's segmented target name is: [ \"foo\", \"$default\", \"bar\" ]\n   * - There exists a parent ui-view (which has fqn: \"$default.foo\") where:\n   *    - the parent ui-view's name \"foo\" matches the first segment \"foo\" of the ViewConfig's target name\n   *    - the parent ui-view's context \"A\" matches the ViewConfig's anchor context \"A\"\n   * - And the remaining segments [ \"$default\", \"bar\" ].join(\".\"_ of the ViewConfig's target name match\n   *   the tail of the ui-view's fqn \"default.bar\"\n   *\n   * @internalapi\n   */\n  static matches = (uiViewsByFqn: TypedMap<ActiveUIView>, uiView: ActiveUIView) => (viewConfig: ViewConfig) => {\n    // Don't supply an ng1 ui-view with an ng2 ViewConfig, etc\n    if (uiView.$type !== viewConfig.viewDecl.$type) return false;\n\n    // Split names apart from both viewConfig and uiView into segments\n    let vc = viewConfig.viewDecl;\n    let vcSegments = vc.$uiViewName.split(\".\");\n    let uivSegments = uiView.fqn.split(\".\");\n\n    // Check if the tails of the segment arrays match. ex, these arrays' tails match:\n    // vc: [\"foo\", \"bar\"], uiv fqn: [\"$default\", \"foo\", \"bar\"]\n    if (!equals(vcSegments, uivSegments.slice(0 - vcSegments.length)))\n      return false;\n\n    // Now check if the fqn ending at the first segment of the viewConfig matches the context:\n    // [\"$default\", \"foo\"].join(\".\") == \"$default.foo\", does the ui-view $default.foo context match?\n    let negOffset = (1 - vcSegments.length) || undefined;\n    let fqnToFirstSegment = uivSegments.slice(0, negOffset).join(\".\");\n    let uiViewContext = uiViewsByFqn[fqnToFirstSegment].creationContext;\n    return vc.$uiViewContextAnchor === (uiViewContext && uiViewContext.name);\n  }\n\n  sync() {\n    let uiViewsByFqn: TypedMap<ActiveUIView> =\n        this._uiViews.map(uiv => [uiv.fqn, uiv]).reduce(applyPairs, <any> {});\n\n    // Return a weighted depth value for a uiView.\n    // The depth is the nesting depth of ui-views (based on FQN; times 10,000)\n    // plus the depth of the state that is populating the uiView\n    function uiViewDepth(uiView: ActiveUIView) {\n      const stateDepth = (context: ViewContext) =>\n          context && context.parent ? stateDepth(context.parent) + 1 : 1;\n      return (uiView.fqn.split(\".\").length * 10000) + stateDepth(uiView.creationContext);\n    }\n\n    // Return the ViewConfig's context's depth in the context tree.\n    function viewConfigDepth(config: ViewConfig) {\n      let context: ViewContext = config.viewDecl.$context, count = 0;\n      while (++count && context.parent) context = context.parent;\n      return count;\n    }\n\n    // Given a depth function, returns a compare function which can return either ascending or descending order\n    const depthCompare = curry((depthFn, posNeg, left, right) => posNeg * (depthFn(left) - depthFn(right)));\n\n    const matchingConfigPair = (uiView: ActiveUIView) => {\n      let matchingConfigs = this._viewConfigs.filter(ViewService.matches(uiViewsByFqn, uiView));\n      if (matchingConfigs.length > 1) {\n        // This is OK.  Child states can target a ui-view that the parent state also targets (the child wins)\n        // Sort by depth and return the match from the deepest child\n        // console.log(`Multiple matching view configs for ${uiView.fqn}`, matchingConfigs);\n        matchingConfigs.sort(depthCompare(viewConfigDepth, -1)); // descending\n      }\n      return [uiView, matchingConfigs[0]];\n    };\n\n    const configureUIView = ([uiView, viewConfig]) => {\n      // If a parent ui-view is reconfigured, it could destroy child ui-views.\n      // Before configuring a child ui-view, make sure it's still in the active uiViews array.\n      if (this._uiViews.indexOf(uiView) !== -1)\n        uiView.configUpdated(viewConfig);\n    };\n\n    // Sort views by FQN and state depth. Process uiviews nearest the root first.\n    const pairs = this._uiViews.sort(depthCompare(uiViewDepth, 1)).map(matchingConfigPair);\n\n    trace.traceViewSync(pairs);\n\n    pairs.forEach(configureUIView);\n  };\n\n  /**\n   * Registers a `ui-view` component\n   *\n   * When a `ui-view` component is created, it uses this method to register itself.\n   * After registration the [[sync]] method is used to ensure all `ui-view` are configured with the proper [[ViewConfig]].\n   *\n   * Note: the `ui-view` component uses the `ViewConfig` to determine what view should be loaded inside the `ui-view`,\n   * and what the view's state context is.\n   *\n   * Note: There is no corresponding `deregisterUIView`.\n   *       A `ui-view` should hang on to the return value of `registerUIView` and invoke it to deregister itself.\n   *\n   * @param uiView The metadata for a UIView\n   * @return a de-registration function used when the view is destroyed.\n   */\n  registerUIView(uiView: ActiveUIView) {\n    trace.traceViewServiceUIViewEvent(\"-> Registering\", uiView);\n    let uiViews = this._uiViews;\n    const fqnAndTypeMatches = (uiv: ActiveUIView) => uiv.fqn === uiView.fqn && uiv.$type === uiView.$type;\n    if (uiViews.filter(fqnAndTypeMatches).length)\n      trace.traceViewServiceUIViewEvent(\"!!!! duplicate uiView named:\", uiView);\n\n    uiViews.push(uiView);\n    this.sync();\n\n    return () => {\n      let idx = uiViews.indexOf(uiView);\n      if (idx === -1) {\n        trace.traceViewServiceUIViewEvent(\"Tried removing non-registered uiView\", uiView);\n        return;\n      }\n      trace.traceViewServiceUIViewEvent(\"<- Deregistering\", uiView);\n      removeFrom(uiViews)(uiView);\n    };\n  };\n\n  /**\n   * Returns the list of views currently available on the page, by fully-qualified name.\n   *\n   * @return {Array} Returns an array of fully-qualified view names.\n   */\n  available() {\n    return this._uiViews.map(prop(\"fqn\"));\n  }\n\n  /**\n   * Returns the list of views on the page containing loaded content.\n   *\n   * @return {Array} Returns an array of fully-qualified view names.\n   */\n  active() {\n    return this._uiViews.filter(prop(\"$config\")).map(prop(\"name\"));\n  }\n\n  /**\n   * Normalizes a view's name from a state.views configuration block.\n   *\n   * This should be used by a framework implementation to calculate the values for\n   * [[_ViewDeclaration.$uiViewName]] and [[_ViewDeclaration.$uiViewContextAnchor]].\n   *\n   * @param context the context object (state declaration) that the view belongs to\n   * @param rawViewName the name of the view, as declared in the [[StateDeclaration.views]]\n   *\n   * @returns the normalized uiViewName and uiViewContextAnchor that the view targets\n   */\n  static normalizeUIViewTarget(context: ViewContext, rawViewName = \"\") {\n    // TODO: Validate incoming view name with a regexp to allow:\n    // ex: \"view.name@foo.bar\" , \"^.^.view.name\" , \"view.name@^.^\" , \"\" ,\n    // \"@\" , \"$default@^\" , \"!$default.$default\" , \"!foo.bar\"\n    let viewAtContext: string[] = rawViewName.split(\"@\");\n    let uiViewName = viewAtContext[0] || \"$default\";  // default to unnamed view\n    let uiViewContextAnchor = isString(viewAtContext[1]) ? viewAtContext[1] : \"^\";    // default to parent context\n\n    // Handle relative view-name sugar syntax.\n    // Matches rawViewName \"^.^.^.foo.bar\" into array: [\"^.^.^.foo.bar\", \"^.^.^\", \"foo.bar\"],\n    let relativeViewNameSugar = /^(\\^(?:\\.\\^)*)\\.(.*$)/.exec(uiViewName);\n    if (relativeViewNameSugar) {\n      // Clobbers existing contextAnchor (rawViewName validation will fix this)\n      uiViewContextAnchor = relativeViewNameSugar[1]; // set anchor to \"^.^.^\"\n      uiViewName = relativeViewNameSugar[2]; // set view-name to \"foo.bar\"\n    }\n\n    if (uiViewName.charAt(0) === '!') {\n      uiViewName = uiViewName.substr(1);\n      uiViewContextAnchor = \"\"; // target absolutely from root\n    }\n\n    // handle parent relative targeting \"^.^.^\"\n    let relativeMatch = /^(\\^(?:\\.\\^)*)$/;\n    if (relativeMatch.exec(uiViewContextAnchor)) {\n      let anchor = uiViewContextAnchor.split(\".\").reduce(((anchor, x) => anchor.parent), context);\n      uiViewContextAnchor = anchor.name;\n    } else if (uiViewContextAnchor === '.') {\n      uiViewContextAnchor = context.name;\n    }\n\n    return {uiViewName, uiViewContextAnchor};\n  }\n}","/**\n * @coreapi\n * @module core\n */ /** */\nimport {StateParams} from \"./params/stateParams\";\nimport {StateDeclaration} from \"./state/interface\";\nimport {StateObject} from \"./state/stateObject\";\nimport {Transition} from \"./transition/transition\";\nimport {Queue} from \"./common/queue\";\nimport {TransitionService} from \"./transition/transitionService\";\nimport {copy} from \"./common/common\";\nimport { Disposable } from './interface';\n\n/**\n * Global router state\n *\n * This is where we hold the global mutable state such as current state, current\n * params, current transition, etc.\n */\nexport class UIRouterGlobals implements Disposable {\n  /**\n   * Current parameter values\n   *\n   * The parameter values from the latest successful transition\n   */\n  params: StateParams = new StateParams();\n\n  /**\n   * Current state\n   *\n   * The to-state from the latest successful transition\n   */\n  current: StateDeclaration;\n\n  /**\n   * Current state (internal object)\n   *\n   * The to-state from the latest successful transition\n   * @internalapi\n   */\n  $current: StateObject;\n\n  /**\n   * The current started/running transition.\n   * This transition has reached at least the onStart phase, but is not yet complete\n   */\n  transition: Transition;\n\n  /** @internalapi */\n  lastStartedTransitionId: number = -1;\n\n  /** @internalapi */\n  transitionHistory = new Queue<Transition>([], 1);\n\n  /** @internalapi */\n  successfulTransitions = new Queue<Transition>([], 1);\n\n  dispose() {\n    this.transitionHistory.clear();\n    this.successfulTransitions.clear();\n    this.transition = null;\n  }\n}\n","/**\n * @coreapi\n * @module url\n */ /** */\n\nimport { UIRouter } from \"../router\";\nimport { LocationServices, notImplemented, LocationConfig } from \"../common/coreservices\";\nimport { noop, createProxyFunctions } from \"../common/common\";\nimport { UrlConfigApi, UrlSyncApi, UrlRulesApi, UrlParts, MatchResult } from \"./interface\";\n\n/** @hidden */\nconst makeStub = (keys: string[]): any =>\n    keys.reduce((acc, key) => (acc[key] = notImplemented(key), acc), { dispose: noop });\n\n/** @hidden */ const locationServicesFns = [\"url\", \"path\", \"search\", \"hash\", \"onChange\"];\n/** @hidden */ const locationConfigFns = [\"port\", \"protocol\", \"host\", \"baseHref\", \"html5Mode\", \"hashPrefix\"];\n/** @hidden */ const umfFns = [\"type\", \"caseInsensitive\", \"strictMode\", \"defaultSquashPolicy\"];\n/** @hidden */ const rulesFns = [\"sort\", \"when\", \"initial\", \"otherwise\", \"rules\", \"rule\", \"removeRule\"];\n/** @hidden */ const syncFns = [\"deferIntercept\", \"listen\", \"sync\", \"match\"];\n\n/**\n * API for URL management\n */\nexport class UrlService implements LocationServices, UrlSyncApi {\n  /** @hidden */\n  static locationServiceStub: LocationServices = makeStub(locationServicesFns);\n  /** @hidden */\n  static locationConfigStub: LocationConfig = makeStub(locationConfigFns);\n\n  /** @inheritdoc */\n  url(): string;\n  /** @inheritdoc */\n  url(newurl: string, replace?: boolean, state?): void;\n  url(newurl?, replace?, state?): any { return };\n  /** @inheritdoc */\n  path(): string { return };\n  /** @inheritdoc */\n  search(): { [key: string]: any } { return };\n  /** @inheritdoc */\n  hash(): string { return };\n  /** @inheritdoc */\n  onChange(callback: Function): Function { return };\n\n\n  /**\n   * Returns the current URL parts\n   *\n   * This method returns the current URL components as a [[UrlParts]] object.\n   *\n   * @returns the current url parts\n   */\n  parts(): UrlParts {\n    return { path: this.path(), search: this.search(), hash: this.hash() }\n  }\n\n  dispose() { }\n\n  /** @inheritdoc */\n  sync(evt?) { return }\n  /** @inheritdoc */\n  listen(enabled?: boolean): Function { return };\n  /** @inheritdoc */\n  deferIntercept(defer?: boolean) { return }\n  /** @inheritdoc */\n  match(urlParts: UrlParts): MatchResult { return }\n\n  /**\n   * A nested API for managing URL rules and rewrites\n   *\n   * See: [[UrlRulesApi]] for details\n   */\n  rules: UrlRulesApi;\n\n  /**\n   * A nested API to configure the URL and retrieve URL information\n   *\n   * See: [[UrlConfigApi]] for details\n   */\n  config: UrlConfigApi;\n\n  /** @hidden */\n  private router: UIRouter;\n\n  /** @hidden */\n  constructor(router: UIRouter, lateBind = true) {\n    this.router = router;\n    this.rules = {} as any;\n    this.config = {} as any;\n\n    // proxy function calls from UrlService to the LocationService/LocationConfig\n    const locationServices = () => router.locationService;\n    createProxyFunctions(locationServices, this, locationServices, locationServicesFns, lateBind);\n\n    const locationConfig = () => router.locationConfig;\n    createProxyFunctions(locationConfig, this.config, locationConfig, locationConfigFns, lateBind);\n\n    const umf = () => router.urlMatcherFactory;\n    createProxyFunctions(umf, this.config, umf, umfFns);\n\n    const urlRouter = () => router.urlRouter;\n    createProxyFunctions(urlRouter, this.rules, urlRouter, rulesFns);\n    createProxyFunctions(urlRouter, this, urlRouter, syncFns);\n  }\n}\n","/**\n * @coreapi\n * @module core\n */ /** */\nimport { UrlMatcherFactory } from \"./url/urlMatcherFactory\";\nimport { UrlRouter } from \"./url/urlRouter\";\nimport { TransitionService } from \"./transition/transitionService\";\nimport { ViewService } from \"./view/view\";\nimport { StateRegistry } from \"./state/stateRegistry\";\nimport { StateService } from \"./state/stateService\";\nimport { UIRouterGlobals } from \"./globals\";\nimport { UIRouterPlugin, Disposable } from \"./interface\";\nimport { values, removeFrom } from \"./common/common\";\nimport { isFunction } from \"./common/predicates\";\nimport { UrlService } from \"./url/urlService\";\nimport { LocationServices, LocationConfig } from \"./common/coreservices\";\nimport { Trace, trace } from \"./common/trace\";\n\n/** @hidden */\nlet _routerInstance = 0;\n\n/**\n * The master class used to instantiate an instance of UI-Router.\n *\n * UI-Router (for each specific framework) will create an instance of this class during bootstrap.\n * This class instantiates and wires the UI-Router services together.\n *\n * After a new instance of the UIRouter class is created, it should be configured for your app.\n * For instance, app states should be registered with the [[UIRouter.stateRegistry]].\n *\n * ---\n *\n * Normally the framework code will bootstrap UI-Router.\n * If you are bootstrapping UIRouter manually, tell it to monitor the URL by calling\n * [[UrlService.listen]] then [[UrlService.sync]].\n */\nexport class UIRouter {\n  /** @hidden */ $id = _routerInstance++;\n  /** @hidden */ _disposed = false;\n  /** @hidden */ private _disposables: Disposable[] = [];\n\n  /** Provides trace information to the console */\n  trace: Trace = trace;\n\n  /** Provides services related to ui-view synchronization */\n  viewService = new ViewService();\n\n  /** Provides services related to Transitions */\n  transitionService: TransitionService = new TransitionService(this);\n\n  /** Global router state */\n  globals: UIRouterGlobals = new UIRouterGlobals();\n\n  /**\n   * Deprecated for public use. Use [[urlService]] instead.\n   * @deprecated Use [[urlService]] instead\n   */\n  urlMatcherFactory: UrlMatcherFactory = new UrlMatcherFactory();\n\n  /**\n   * Deprecated for public use. Use [[urlService]] instead.\n   * @deprecated Use [[urlService]] instead\n   */\n  urlRouter: UrlRouter = new UrlRouter(this);\n\n  /** Provides a registry for states, and related registration services */\n  stateRegistry: StateRegistry = new StateRegistry(this);\n\n  /** Provides services related to states */\n  stateService = new StateService(this);\n\n  /** Provides services related to the URL */\n  urlService: UrlService = new UrlService(this);\n\n\n  /** Registers an object to be notified when the router is disposed */\n  disposable(disposable: Disposable) {\n    this._disposables.push(disposable);\n  }\n\n  /**\n   * Disposes this router instance\n   *\n   * When called, clears resources retained by the router by calling `dispose(this)` on all\n   * registered [[disposable]] objects.\n   *\n   * Or, if a `disposable` object is provided, calls `dispose(this)` on that object only.\n   *\n   * @param disposable (optional) the disposable to dispose\n   */\n  dispose(disposable?: any): void {\n    if (disposable && isFunction(disposable.dispose)) {\n      disposable.dispose(this);\n      return undefined;\n    }\n\n    this._disposed = true;\n    this._disposables.slice().forEach(d => {\n      try {\n        typeof d.dispose === 'function' && d.dispose(this);\n        removeFrom(this._disposables, d);\n      } catch (ignored) {}\n    });\n  }\n\n  /**\n   * Creates a new `UIRouter` object\n   *\n   * @param locationService a [[LocationServices]] implementation\n   * @param locationConfig a [[LocationConfig]] implementation\n   * @internalapi\n   */\n  constructor(\n      public locationService: LocationServices = UrlService.locationServiceStub,\n      public locationConfig: LocationConfig = UrlService.locationConfigStub\n  ) {\n\n    this.viewService._pluginapi._rootViewContext(this.stateRegistry.root());\n    this.globals.$current = this.stateRegistry.root();\n    this.globals.current = this.globals.$current.self;\n\n    this.disposable(this.globals);\n    this.disposable(this.stateService);\n    this.disposable(this.stateRegistry);\n    this.disposable(this.transitionService);\n    this.disposable(this.urlRouter);\n    this.disposable(locationService);\n    this.disposable(locationConfig);\n  }\n\n  /** @hidden */\n  private _plugins: { [key: string]: UIRouterPlugin } = {};\n\n  /** Add plugin (as ES6 class) */\n  plugin<T extends UIRouterPlugin>(plugin: { new(router: UIRouter, options?: any): T }, options?: any): T;\n  /** Add plugin (as javascript constructor function) */\n  plugin<T extends UIRouterPlugin>(plugin: { (router: UIRouter, options?: any): void }, options?: any): T;\n  /** Add plugin (as javascript factory function) */\n  plugin<T extends UIRouterPlugin>(plugin: PluginFactory<T>, options?: any): T;\n  /**\n   * Adds a plugin to UI-Router\n   *\n   * This method adds a UI-Router Plugin.\n   * A plugin can enhance or change UI-Router behavior using any public API.\n   *\n   * #### Example:\n   * ```js\n   * import { MyCoolPlugin } from \"ui-router-cool-plugin\";\n   *\n   * var plugin = router.addPlugin(MyCoolPlugin);\n   * ```\n   *\n   * ### Plugin authoring\n   *\n   * A plugin is simply a class (or constructor function) which accepts a [[UIRouter]] instance and (optionally) an options object.\n   *\n   * The plugin can implement its functionality using any of the public APIs of [[UIRouter]].\n   * For example, it may configure router options or add a Transition Hook.\n   *\n   * The plugin can then be published as a separate module.\n   *\n   * #### Example:\n   * ```js\n   * export class MyAuthPlugin implements UIRouterPlugin {\n   *   constructor(router: UIRouter, options: any) {\n   *     this.name = \"MyAuthPlugin\";\n   *     let $transitions = router.transitionService;\n   *     let $state = router.stateService;\n   *\n   *     let authCriteria = {\n   *       to: (state) => state.data && state.data.requiresAuth\n   *     };\n   *\n   *     function authHook(transition: Transition) {\n   *       let authService = transition.injector().get('AuthService');\n   *       if (!authService.isAuthenticated()) {\n   *         return $state.target('login');\n   *       }\n   *     }\n   *\n   *     $transitions.onStart(authCriteria, authHook);\n   *   }\n   * }\n   * ```\n   *\n   * @param plugin one of:\n   *        - a plugin class which implements [[UIRouterPlugin]]\n   *        - a constructor function for a [[UIRouterPlugin]] which accepts a [[UIRouter]] instance\n   *        - a factory function which accepts a [[UIRouter]] instance and returns a [[UIRouterPlugin]] instance\n   * @param options options to pass to the plugin class/factory\n   * @returns the registered plugin instance\n   */\n  plugin<T extends UIRouterPlugin>(plugin: any, options: any = {}): T {\n    let pluginInstance = new plugin(this, options);\n    if (!pluginInstance.name) throw new Error(\"Required property `name` missing on plugin: \" + pluginInstance);\n    this._disposables.push(pluginInstance);\n    return this._plugins[pluginInstance.name] = pluginInstance;\n  }\n\n  /**\n   * Returns registered plugins\n   *\n   * Returns the registered plugin of the given `pluginName`.\n   * If no `pluginName` is given, returns all registered plugins\n   *\n   * @param pluginName (optional) the name of the plugin to get\n   * @return the named plugin (undefined if not found), or all plugins (if `pluginName` is omitted)\n   */\n  getPlugin(pluginName: string): UIRouterPlugin;\n  getPlugin(): UIRouterPlugin[];\n  getPlugin(pluginName?: string): UIRouterPlugin|UIRouterPlugin[] {\n    return pluginName ? this._plugins[pluginName] : values(this._plugins);\n  }\n}\n\n/** @internalapi */\nexport type PluginFactory<T> = (router: UIRouter, options?: any) => T;\n","/** @module hooks */ /** */\nimport {isString, isFunction} from \"../common/predicates\"\nimport {Transition} from \"../transition/transition\";\nimport {services} from \"../common/coreservices\";\nimport {TargetState} from \"../state/targetState\";\nimport {TransitionService} from \"../transition/transitionService\";\nimport {TransitionHookFn} from \"../transition/interface\";\n\n/**\n * A [[TransitionHookFn]] that redirects to a different state or params\n *\n * Registered using `transitionService.onStart({ to: (state) => !!state.redirectTo }, redirectHook);`\n * \n * See [[StateDeclaration.redirectTo]]\n */\nconst redirectToHook: TransitionHookFn = (trans: Transition) => {\n  let redirect = trans.to().redirectTo;\n  if (!redirect) return;\n\n  let $state = trans.router.stateService;\n\n  function handleResult(result: any) {\n    if (!result) return;\n    if (result instanceof TargetState) return result;\n    if (isString(result)) return $state.target(<any> result, trans.params(), trans.options());\n    if (result['state'] || result['params'])\n      return $state.target(result['state'] || trans.to(), result['params'] || trans.params(), trans.options());\n  }\n\n  if (isFunction(redirect)) {\n    return services.$q.when(redirect(trans)).then(handleResult);\n  }\n  return handleResult(redirect);\n};\n\nexport const registerRedirectToHook = (transitionService: TransitionService) =>\n    transitionService.onStart({to: (state) => !!state.redirectTo}, redirectToHook);\n","/** @module hooks */\n/** for typedoc */\nimport { noop } from '../common/common';\nimport { Transition } from '../transition/transition';\nimport { ResolveContext } from '../resolve/resolveContext';\nimport { TransitionStateHookFn, TransitionHookFn } from '../transition/interface';\nimport { TransitionService } from '../transition/transitionService';\nimport { val } from '../common/hof';\nimport { StateDeclaration } from '../state/interface';\n\n/**\n * A [[TransitionHookFn]] which resolves all EAGER Resolvables in the To Path\n *\n * Registered using `transitionService.onStart({}, eagerResolvePath);`\n *\n * When a Transition starts, this hook resolves all the EAGER Resolvables, which the transition then waits for.\n *\n * See [[StateDeclaration.resolve]]\n */\nconst eagerResolvePath: TransitionHookFn = (trans: Transition) =>\n    new ResolveContext(trans.treeChanges().to)\n        .resolvePath(\"EAGER\", trans)\n        .then(noop);\n\nexport const registerEagerResolvePath = (transitionService: TransitionService) =>\n    transitionService.onStart({}, eagerResolvePath, {priority: 1000});\n\n/**\n * A [[TransitionHookFn]] which resolves all LAZY Resolvables for the state (and all its ancestors) in the To Path\n *\n * Registered using `transitionService.onEnter({ entering: () => true }, lazyResolveState);`\n *\n * When a State is being entered, this hook resolves all the Resolvables for this state, which the transition then waits for.\n *\n * See [[StateDeclaration.resolve]]\n */\nconst lazyResolveState: TransitionStateHookFn = (trans: Transition, state: StateDeclaration) =>\n    new ResolveContext(trans.treeChanges().to)\n        .subContext(state.$$state())\n        .resolvePath(\"LAZY\", trans)\n        .then(noop);\n\nexport const registerLazyResolveState = (transitionService: TransitionService) =>\n    transitionService.onEnter({ entering: val(true) }, lazyResolveState, {priority: 1000});\n\n","/** @module hooks */ /** for typedoc */\nimport {noop} from \"../common/common\";\nimport {services} from \"../common/coreservices\";\nimport {Transition} from \"../transition/transition\";\nimport {ViewService} from \"../view/view\";\nimport {ViewConfig} from \"../view/interface\";\nimport {TransitionHookFn} from \"../transition/interface\";\nimport {TransitionService} from \"../transition/transitionService\";\n\n\n/**\n * A [[TransitionHookFn]] which waits for the views to load\n *\n * Registered using `transitionService.onStart({}, loadEnteringViews);`\n *\n * Allows the views to do async work in [[ViewConfig.load]] before the transition continues.\n * In angular 1, this includes loading the templates.\n */\nconst loadEnteringViews: TransitionHookFn = (transition: Transition) => {\n  let $q = services.$q;\n  let enteringViews = transition.views(\"entering\");\n  if (!enteringViews.length) return;\n  return $q.all(enteringViews.map(view => $q.when(view.load()))).then(noop);\n};\n\nexport const registerLoadEnteringViews = (transitionService: TransitionService) =>\n    transitionService.onFinish({}, loadEnteringViews);\n\n/**\n * A [[TransitionHookFn]] which activates the new views when a transition is successful.\n *\n * Registered using `transitionService.onSuccess({}, activateViews);`\n *\n * After a transition is complete, this hook deactivates the old views from the previous state,\n * and activates the new views from the destination state.\n *\n * See [[ViewService]]\n */\nconst activateViews: TransitionHookFn = (transition: Transition) => {\n  let enteringViews = transition.views(\"entering\");\n  let exitingViews = transition.views(\"exiting\");\n  if (!enteringViews.length && !exitingViews.length) return;\n\n  let $view: ViewService = transition.router.viewService;\n\n  exitingViews.forEach((vc: ViewConfig) => $view.deactivateViewConfig(vc));\n  enteringViews.forEach((vc: ViewConfig) => $view.activateViewConfig(vc));\n\n  $view.sync();\n};\n\nexport const registerActivateViews = (transitionService: TransitionService) =>\n    transitionService.onSuccess({}, activateViews);\n","/** @module hooks */\n/** for typedoc */\nimport { Transition } from '../transition/transition';\nimport { copy } from '../common/common';\nimport { TransitionService } from '../transition/transitionService';\n\n/**\n * A [[TransitionHookFn]] which updates global UI-Router state\n *\n * Registered using `transitionService.onBefore({}, updateGlobalState);`\n *\n * Before a [[Transition]] starts, updates the global value of \"the current transition\" ([[Globals.transition]]).\n * After a successful [[Transition]], updates the global values of \"the current state\"\n * ([[Globals.current]] and [[Globals.$current]]) and \"the current param values\" ([[Globals.params]]).\n *\n * See also the deprecated properties:\n * [[StateService.transition]], [[StateService.current]], [[StateService.params]]\n */\nconst updateGlobalState = (trans: Transition) => {\n  let globals = trans.router.globals;\n\n  const transitionSuccessful = () => {\n    globals.successfulTransitions.enqueue(trans);\n    globals.$current = trans.$to();\n    globals.current = globals.$current.self;\n\n    copy(trans.params(), globals.params);\n  };\n\n  const clearCurrentTransition = () => {\n    // Do not clear globals.transition if a different transition has started in the meantime\n    if (globals.transition === trans) globals.transition = null;\n  };\n\n  trans.onSuccess({}, transitionSuccessful, { priority: 10000 });\n  trans.promise.then(clearCurrentTransition, clearCurrentTransition);\n};\n\nexport const registerUpdateGlobalState = (transitionService: TransitionService) =>\n    transitionService.onCreate({}, updateGlobalState);\n","/** @module hooks */ /** */\nimport {UrlRouter} from \"../url/urlRouter\";\nimport {StateService} from \"../state/stateService\";\nimport {Transition} from \"../transition/transition\";\nimport {TransitionHookFn} from \"../transition/interface\";\nimport {TransitionService} from \"../transition/transitionService\";\n\n/** \n * A [[TransitionHookFn]] which updates the URL after a successful transition\n * \n * Registered using `transitionService.onSuccess({}, updateUrl);`\n */\nconst updateUrl: TransitionHookFn = (transition: Transition) => {\n  let options = transition.options();\n  let $state: StateService = transition.router.stateService;\n  let $urlRouter: UrlRouter = transition.router.urlRouter;\n\n  // Dont update the url in these situations:\n  // The transition was triggered by a URL sync (options.source === 'url')\n  // The user doesn't want the url to update (options.location === false)\n  // The destination state, and all parents have no navigable url\n  if (options.source !== 'url' && options.location && $state.$current.navigable) {\n    var urlOptions = {replace: options.location === 'replace'};\n    $urlRouter.push($state.$current.navigable.url, $state.params, urlOptions);\n  }\n\n  $urlRouter.update(true);\n};\n\nexport const registerUpdateUrl = (transitionService: TransitionService) =>\n    transitionService.onSuccess({}, updateUrl, {priority: 9999});\n","/** @module transition */ /** */\nimport { TransitionHookPhase, PathType } from \"./interface\";\nimport { GetErrorHandler, GetResultHandler, TransitionHook } from \"./transitionHook\";\n/**\n * This class defines a type of hook, such as `onBefore` or `onEnter`.\n * Plugins can define custom hook types, such as sticky states does for `onInactive`.\n *\n * @interalapi\n */\nexport class TransitionEventType {\n\n  constructor(public name:               string,\n              public hookPhase:          TransitionHookPhase,\n              public hookOrder:          number,\n              public criteriaMatchPath:  PathType,\n              public reverseSort:        boolean = false,\n              public getResultHandler:   GetResultHandler = TransitionHook.HANDLE_RESULT,\n              public getErrorHandler:    GetErrorHandler = TransitionHook.REJECT_ERROR,\n              public synchronous:        boolean = false,\n  ) { }\n}\n","/**\n * @coreapi\n * @module transition\n */\n/** for typedoc */\nimport {\n  IHookRegistry, TransitionOptions, TransitionHookScope, TransitionHookPhase, TransitionCreateHookFn, HookMatchCriteria,\n  HookRegOptions, PathTypes, PathType, RegisteredHooks, TransitionHookFn, TransitionStateHookFn\n} from \"./interface\";\nimport { Transition } from \"./transition\";\nimport { makeEvent, RegisteredHook } from \"./hookRegistry\";\nimport { TargetState } from \"../state/targetState\";\nimport { PathNode } from \"../path/pathNode\";\nimport { ViewService } from \"../view/view\";\nimport { UIRouter } from \"../router\";\nimport { registerAddCoreResolvables } from \"../hooks/coreResolvables\";\nimport { registerRedirectToHook } from \"../hooks/redirectTo\";\nimport { registerOnExitHook, registerOnRetainHook, registerOnEnterHook } from \"../hooks/onEnterExitRetain\";\nimport { registerEagerResolvePath, registerLazyResolveState } from \"../hooks/resolve\";\nimport { registerLoadEnteringViews, registerActivateViews } from \"../hooks/views\";\nimport { registerUpdateGlobalState } from \"../hooks/updateGlobals\";\nimport { registerUpdateUrl } from \"../hooks/url\";\nimport { registerLazyLoadHook } from \"../hooks/lazyLoad\";\nimport { TransitionEventType } from \"./transitionEventType\";\nimport { TransitionHook, GetResultHandler, GetErrorHandler } from \"./transitionHook\";\nimport { isDefined } from \"../common/predicates\";\nimport { removeFrom, values, createProxyFunctions } from \"../common/common\";\nimport { Disposable } from \"../interface\"; // has or is using\nimport { val } from \"../common/hof\";\nimport { registerIgnoredTransitionHook } from '../hooks/ignoredTransition';\nimport { registerInvalidTransitionHook } from '../hooks/invalidTransition';\n\n/**\n * The default [[Transition]] options.\n *\n * Include this object when applying custom defaults:\n * let reloadOpts = { reload: true, notify: true }\n * let options = defaults(theirOpts, customDefaults, defaultOptions);\n */\nexport let defaultTransOpts: TransitionOptions = {\n  location    : true,\n  relative    : null,\n  inherit     : false,\n  notify      : true,\n  reload      : false,\n  custom      : {},\n  current     : () => null,\n  source      : \"unknown\"\n};\n\n\n/**\n * Plugin API for Transition Service\n * @internalapi\n */\nexport interface TransitionServicePluginAPI {\n  /**\n   * Adds a Path to be used as a criterion against a TreeChanges path\n   *\n   * For example: the `exiting` path in [[HookMatchCriteria]] is a STATE scoped path.\n   * It was defined by calling `defineTreeChangesCriterion('exiting', TransitionHookScope.STATE)`\n   * Each state in the exiting path is checked against the criteria and returned as part of the match.\n   *\n   * Another example: the `to` path in [[HookMatchCriteria]] is a TRANSITION scoped path.\n   * It was defined by calling `defineTreeChangesCriterion('to', TransitionHookScope.TRANSITION)`\n   * Only the tail of the `to` path is checked against the criteria and returned as part of the match.\n   */\n  _definePathType(name: string, hookScope: TransitionHookScope);\n\n  /**\n   * Gets a Path definition used as a criterion against a TreeChanges path\n   */\n  _getPathTypes(): PathTypes;\n\n  /**\n   * Defines a transition hook type and returns a transition hook registration\n   * function (which can then be used to register hooks of this type).\n   */\n  _defineEvent(name: string,\n               hookPhase: TransitionHookPhase,\n               hookOrder: number,\n               criteriaMatchPath: PathType,\n               reverseSort?: boolean,\n               getResultHandler?: GetResultHandler,\n               getErrorHandler?: GetErrorHandler,\n               rejectIfSuperseded?: boolean);\n\n  /**\n   * Returns the known event types, such as `onBefore`\n   * If a phase argument is provided, returns only events for the given phase.\n   */\n  _getEvents(phase?: TransitionHookPhase): TransitionEventType[];\n\n  /** Returns the hooks registered for the given hook name */\n  getHooks(hookName: string): RegisteredHook[];\n}\n\n/**\n * This class provides services related to Transitions.\n *\n * - Most importantly, it allows global Transition Hooks to be registered.\n * - It allows the default transition error handler to be set.\n * - It also has a factory function for creating new [[Transition]] objects, (used internally by the [[StateService]]).\n *\n * At bootstrap, [[UIRouter]] creates a single instance (singleton) of this class.\n */\nexport class TransitionService implements IHookRegistry, Disposable {\n  /** @hidden */\n  _transitionCount = 0;\n\n  /**\n   * Registers a [[TransitionHookFn]], called *while a transition is being constructed*.\n   *\n   * Registers a transition lifecycle hook, which is invoked during transition construction.\n   *\n   * This low level hook should only be used by plugins.\n   * This can be a useful time for plugins to add resolves or mutate the transition as needed.\n   * The Sticky States plugin uses this hook to modify the treechanges.\n   *\n   * ### Lifecycle\n   *\n   * `onCreate` hooks are invoked *while a transition is being constructed*.\n   *\n   * ### Return value\n   *\n   * The hook's return value is ignored\n   *\n   * @internalapi\n   * @param criteria defines which Transitions the Hook should be invoked for.\n   * @param callback the hook function which will be invoked.\n   * @param options the registration options\n   * @returns a function which deregisters the hook.\n   */\n  onCreate(criteria: HookMatchCriteria, callback: TransitionCreateHookFn, options?: HookRegOptions): Function { return }\n  /** @inheritdoc */\n  onBefore(criteria: HookMatchCriteria, callback: TransitionHookFn, options?: HookRegOptions): Function { return }\n  /** @inheritdoc */\n  onStart(criteria: HookMatchCriteria, callback: TransitionHookFn, options?: HookRegOptions): Function { return }\n  /** @inheritdoc */\n  onExit(criteria: HookMatchCriteria, callback: TransitionStateHookFn, options?: HookRegOptions): Function { return }\n  /** @inheritdoc */\n  onRetain(criteria: HookMatchCriteria, callback: TransitionStateHookFn, options?: HookRegOptions): Function { return }\n  /** @inheritdoc */\n  onEnter(criteria: HookMatchCriteria, callback: TransitionStateHookFn, options?: HookRegOptions): Function { return }\n  /** @inheritdoc */\n  onFinish(criteria: HookMatchCriteria, callback: TransitionHookFn, options?: HookRegOptions): Function { return }\n  /** @inheritdoc */\n  onSuccess(criteria: HookMatchCriteria, callback: TransitionHookFn, options?: HookRegOptions): Function { return }\n  /** @inheritdoc */\n  onError(criteria: HookMatchCriteria, callback: TransitionHookFn, options?: HookRegOptions): Function { return }\n\n  /** @hidden */\n  public $view: ViewService;\n\n  /** @hidden The transition hook types, such as `onEnter`, `onStart`, etc */\n  private _eventTypes: TransitionEventType[] = [];\n  /** @hidden The registered transition hooks */\n  _registeredHooks = { } as RegisteredHooks;\n  /** @hidden The  paths on a criteria object */\n  private _criteriaPaths = { } as PathTypes;\n  /** @hidden */\n  private _router: UIRouter;\n\n  /** @internalapi */\n  _pluginapi: TransitionServicePluginAPI;\n\n  /**\n   * This object has hook de-registration functions for the built-in hooks.\n   * This can be used by third parties libraries that wish to customize the behaviors\n   *\n   * @hidden\n   */\n  _deregisterHookFns: {\n    addCoreResolves: Function;\n    ignored: Function;\n    invalid: Function;\n    redirectTo: Function;\n    onExit: Function;\n    onRetain: Function;\n    onEnter: Function;\n    eagerResolve: Function;\n    lazyResolve: Function;\n    loadViews: Function;\n    activateViews: Function;\n    updateGlobals: Function;\n    updateUrl: Function;\n    lazyLoad: Function;\n  };\n\n  /** @hidden */\n  constructor(_router: UIRouter) {\n    this._router = _router;\n    this.$view = _router.viewService;\n    this._deregisterHookFns = <any> {};\n    this._pluginapi = <TransitionServicePluginAPI> createProxyFunctions(val(this), {}, val(this), [\n      '_definePathType',\n      '_defineEvent',\n      '_getPathTypes',\n      '_getEvents',\n      'getHooks',\n    ]);\n\n    this._defineCorePaths();\n    this._defineCoreEvents();\n    this._registerCoreTransitionHooks();\n  }\n\n  /**\n   * dispose\n   * @internalapi\n   */\n  dispose(router: UIRouter) {\n    values(this._registeredHooks).forEach((hooksArray: RegisteredHook[]) => hooksArray.forEach(hook => {\n      hook._deregistered = true;\n      removeFrom(hooksArray, hook);\n    }));\n  }\n\n  /**\n   * Creates a new [[Transition]] object\n   *\n   * This is a factory function for creating new Transition objects.\n   * It is used internally by the [[StateService]] and should generally not be called by application code.\n   *\n   * @param fromPath the path to the current state (the from state)\n   * @param targetState the target state (destination)\n   * @returns a Transition\n   */\n  create(fromPath: PathNode[], targetState: TargetState): Transition {\n    return new Transition(fromPath, targetState, this._router);\n  }\n\n  /** @hidden */\n  private _defineCoreEvents() {\n    const Phase = TransitionHookPhase;\n    const TH = TransitionHook;\n    const paths = this._criteriaPaths;\n    const NORMAL_SORT = false, REVERSE_SORT = true;\n    const ASYNCHRONOUS = false, SYNCHRONOUS = true;\n\n    this._defineEvent(\"onCreate\",  Phase.CREATE,  0,   paths.to, NORMAL_SORT, TH.LOG_REJECTED_RESULT, TH.THROW_ERROR, SYNCHRONOUS);\n\n    this._defineEvent(\"onBefore\",  Phase.BEFORE,  0,   paths.to);\n\n    this._defineEvent(\"onStart\",   Phase.RUN,     0,   paths.to);\n    this._defineEvent(\"onExit\",    Phase.RUN,     100, paths.exiting, REVERSE_SORT);\n    this._defineEvent(\"onRetain\",  Phase.RUN,     200, paths.retained);\n    this._defineEvent(\"onEnter\",   Phase.RUN,     300, paths.entering);\n    this._defineEvent(\"onFinish\",  Phase.RUN,     400, paths.to);\n\n    this._defineEvent(\"onSuccess\", Phase.SUCCESS, 0,   paths.to, NORMAL_SORT, TH.LOG_REJECTED_RESULT, TH.LOG_ERROR, SYNCHRONOUS);\n    this._defineEvent(\"onError\",   Phase.ERROR,   0,   paths.to, NORMAL_SORT, TH.LOG_REJECTED_RESULT, TH.LOG_ERROR, SYNCHRONOUS);\n  }\n\n  /** @hidden */\n  private _defineCorePaths() {\n    const { STATE, TRANSITION } = TransitionHookScope;\n\n    this._definePathType(\"to\", TRANSITION);\n    this._definePathType(\"from\", TRANSITION);\n    this._definePathType(\"exiting\", STATE);\n    this._definePathType(\"retained\", STATE);\n    this._definePathType(\"entering\", STATE);\n  }\n\n  /** @hidden */\n  _defineEvent(name: string,\n               hookPhase: TransitionHookPhase,\n               hookOrder: number,\n               criteriaMatchPath: PathType,\n               reverseSort: boolean = false,\n               getResultHandler: GetResultHandler = TransitionHook.HANDLE_RESULT,\n               getErrorHandler: GetErrorHandler = TransitionHook.REJECT_ERROR,\n               synchronous: boolean = false)\n  {\n    let eventType = new TransitionEventType(name, hookPhase, hookOrder, criteriaMatchPath, reverseSort, getResultHandler, getErrorHandler, synchronous);\n\n    this._eventTypes.push(eventType);\n    makeEvent(this, this, eventType);\n  };\n\n  /** @hidden */\n  private _getEvents(phase?: TransitionHookPhase): TransitionEventType[] {\n    let transitionHookTypes = isDefined(phase) ?\n        this._eventTypes.filter(type => type.hookPhase === phase) :\n        this._eventTypes.slice();\n\n    return transitionHookTypes.sort((l, r) => {\n      let cmpByPhase = l.hookPhase - r.hookPhase;\n      return cmpByPhase === 0 ? l.hookOrder - r.hookOrder : cmpByPhase;\n    })\n  }\n\n  /**\n   * Adds a Path to be used as a criterion against a TreeChanges path\n   *\n   * For example: the `exiting` path in [[HookMatchCriteria]] is a STATE scoped path.\n   * It was defined by calling `defineTreeChangesCriterion('exiting', TransitionHookScope.STATE)`\n   * Each state in the exiting path is checked against the criteria and returned as part of the match.\n   *\n   * Another example: the `to` path in [[HookMatchCriteria]] is a TRANSITION scoped path.\n   * It was defined by calling `defineTreeChangesCriterion('to', TransitionHookScope.TRANSITION)`\n   * Only the tail of the `to` path is checked against the criteria and returned as part of the match.\n   *\n   * @hidden\n   */\n  private _definePathType(name: string, hookScope: TransitionHookScope) {\n    this._criteriaPaths[name] = { name, scope: hookScope };\n  }\n\n  /** * @hidden */\n  private _getPathTypes(): PathTypes {\n    return this._criteriaPaths;\n  }\n\n  /** @hidden */\n  public getHooks(hookName: string): RegisteredHook[] {\n    return this._registeredHooks[hookName];\n  }\n\n  /** @hidden */\n  private _registerCoreTransitionHooks() {\n    let fns = this._deregisterHookFns;\n\n    fns.addCoreResolves = registerAddCoreResolvables(this);\n    fns.ignored         = registerIgnoredTransitionHook(this);\n    fns.invalid         = registerInvalidTransitionHook(this);\n\n    // Wire up redirectTo hook\n    fns.redirectTo      = registerRedirectToHook(this);\n    \n    // Wire up onExit/Retain/Enter state hooks\n    fns.onExit          = registerOnExitHook(this);\n    fns.onRetain        = registerOnRetainHook(this);\n    fns.onEnter         = registerOnEnterHook(this);\n\n    // Wire up Resolve hooks\n    fns.eagerResolve    = registerEagerResolvePath(this);\n    fns.lazyResolve     = registerLazyResolveState(this);\n                                 \n    // Wire up the View management hooks\n    fns.loadViews       = registerLoadEnteringViews(this);\n    fns.activateViews   = registerActivateViews(this);\n\n    // Updates global state after a transition\n    fns.updateGlobals   = registerUpdateGlobalState(this);\n\n    // After globals.current is updated at priority: 10000\n    fns.updateUrl       = registerUpdateUrl(this);\n\n    // Lazy load state trees\n    fns.lazyLoad        = registerLazyLoadHook(this);\n  }\n}\n","/**\n * @coreapi\n * @module state\n */\n/** */\nimport { createProxyFunctions, defaults, extend, inArray, noop, removeFrom, silenceUncaughtInPromise, silentRejection } from '../common/common';\nimport { isDefined, isObject, isString } from '../common/predicates';\nimport { Queue } from '../common/queue';\nimport { services } from '../common/coreservices';\n\nimport { PathUtils } from '../path/pathFactory';\nimport { PathNode } from '../path/pathNode';\n\nimport { HookResult, TransitionOptions } from '../transition/interface';\nimport { defaultTransOpts } from '../transition/transitionService';\nimport { Rejection, RejectType } from '../transition/rejectFactory';\nimport { Transition } from '../transition/transition';\n\nimport { HrefOptions, LazyLoadResult, StateDeclaration, StateOrName, TransitionPromise } from './interface';\nimport { StateObject } from './stateObject';\nimport { TargetState } from './targetState';\n\nimport { ParamsOrArray, RawParams } from '../params/interface';\nimport { Param } from '../params/param';\nimport { Glob } from '../common/glob';\nimport { UIRouter } from '../router';\nimport { UIInjector } from '../interface';\nimport { ResolveContext } from '../resolve/resolveContext';\nimport { lazyLoadState } from '../hooks/lazyLoad';\nimport { not, val } from '../common/hof';\nimport { StateParams } from '../params/stateParams';\n\nexport type OnInvalidCallback =\n    (toState?: TargetState, fromState?: TargetState, injector?: UIInjector) => HookResult;\n\n/**\n * Provides state related service functions\n *\n * This class provides services related to ui-router states.\n * An instance of this class is located on the global [[UIRouter]] object.\n */\nexport class StateService {\n  /** @internalapi */\n  invalidCallbacks: OnInvalidCallback[] = [];\n\n  /**\n   * The [[Transition]] currently in progress (or null)\n   *\n   * This is a passthrough through to [[UIRouterGlobals.transition]]\n   */\n  get transition() { return this.router.globals.transition; }\n  /**\n   * The latest successful state parameters\n   *\n   * This is a passthrough through to [[UIRouterGlobals.params]]\n   */\n  get params(): StateParams { return this.router.globals.params; }\n  /**\n   * The current [[StateDeclaration]]\n   *\n   * This is a passthrough through to [[UIRouterGlobals.current]]\n   */\n  get current() { return this.router.globals.current; }\n  /**\n   * The current [[StateObject]]\n   *\n   * This is a passthrough through to [[UIRouterGlobals.$current]]\n   */\n  get $current() { return this.router.globals.$current; }\n\n  /** @internalapi */\n  constructor(private router: UIRouter) {\n    let getters = ['current', '$current', 'params', 'transition'];\n    let boundFns = Object.keys(StateService.prototype).filter(not(inArray(getters)));\n    createProxyFunctions(val(StateService.prototype), this, val(this), boundFns);\n  }\n\n  /** @internalapi */\n  dispose() {\n    this.defaultErrorHandler(noop);\n    this.invalidCallbacks = [];\n  }\n\n  /**\n   * Handler for when [[transitionTo]] is called with an invalid state.\n   *\n   * Invokes the [[onInvalid]] callbacks, in natural order.\n   * Each callback's return value is checked in sequence until one of them returns an instance of TargetState.\n   * The results of the callbacks are wrapped in $q.when(), so the callbacks may return promises.\n   *\n   * If a callback returns an TargetState, then it is used as arguments to $state.transitionTo() and the result returned.\n   *\n   * @internalapi\n   */\n  private _handleInvalidTargetState(fromPath: PathNode[], toState: TargetState) {\n    let fromState = PathUtils.makeTargetState(fromPath);\n    let globals = this.router.globals;\n    const latestThing = () => globals.transitionHistory.peekTail();\n    let latest = latestThing();\n    let callbackQueue = new Queue<OnInvalidCallback>(this.invalidCallbacks.slice());\n    let injector = new ResolveContext(fromPath).injector();\n\n    const checkForRedirect = (result: HookResult) => {\n      if (!(result instanceof TargetState)) {\n        return;\n      }\n\n      let target = <TargetState> result;\n      // Recreate the TargetState, in case the state is now defined.\n      target = this.target(target.identifier(), target.params(), target.options());\n\n      if (!target.valid()) {\n        return Rejection.invalid(target.error()).toPromise();\n      }\n\n      if (latestThing() !== latest) {\n        return Rejection.superseded().toPromise();\n      }\n\n      return this.transitionTo(target.identifier(), target.params(), target.options());\n    };\n\n    function invokeNextCallback() {\n      let nextCallback = callbackQueue.dequeue();\n      if (nextCallback === undefined) return Rejection.invalid(toState.error()).toPromise();\n\n      let callbackResult = services.$q.when(nextCallback(toState, fromState, injector));\n      return callbackResult.then(checkForRedirect).then(result => result || invokeNextCallback());\n    }\n\n    return invokeNextCallback();\n  }\n\n  /**\n   * Registers an Invalid State handler\n   *\n   * Registers a [[OnInvalidCallback]] function to be invoked when [[StateService.transitionTo]]\n   * has been called with an invalid state reference parameter\n   *\n   * Example:\n   * ```js\n   * stateService.onInvalid(function(to, from, injector) {\n   *   if (to.name() === 'foo') {\n   *     let lazyLoader = injector.get('LazyLoadService');\n   *     return lazyLoader.load('foo')\n   *         .then(() => stateService.target('foo'));\n   *   }\n   * });\n   * ```\n   *\n   * @param {function} callback invoked when the toState is invalid\n   *   This function receives the (invalid) toState, the fromState, and an injector.\n   *   The function may optionally return a [[TargetState]] or a Promise for a TargetState.\n   *   If one is returned, it is treated as a redirect.\n   *\n   * @returns a function which deregisters the callback\n   */\n  onInvalid(callback: OnInvalidCallback): Function {\n    this.invalidCallbacks.push(callback);\n    return function deregisterListener() {\n      removeFrom(this.invalidCallbacks)(callback);\n    }.bind(this);\n  }\n\n\n  /**\n   * Reloads the current state\n   *\n   * A method that force reloads the current state, or a partial state hierarchy.\n   * All resolves are re-resolved, and components reinstantiated.\n   *\n   * #### Example:\n   * ```js\n   * let app angular.module('app', ['ui.router']);\n   *\n   * app.controller('ctrl', function ($scope, $state) {\n   *   $scope.reload = function(){\n   *     $state.reload();\n   *   }\n   * });\n   * ```\n   *\n   * Note: `reload()` is just an alias for:\n   *\n   * ```js\n   * $state.transitionTo($state.current, $state.params, {\n   *   reload: true, inherit: false\n   * });\n   * ```\n   *\n   * @param reloadState A state name or a state object.\n   *    If present, this state and all its children will be reloaded, but ancestors will not reload.\n   *\n   * #### Example:\n   * ```js\n   * //assuming app application consists of 3 states: 'contacts', 'contacts.detail', 'contacts.detail.item'\n   * //and current state is 'contacts.detail.item'\n   * let app angular.module('app', ['ui.router']);\n   *\n   * app.controller('ctrl', function ($scope, $state) {\n   *   $scope.reload = function(){\n   *     //will reload 'contact.detail' and nested 'contact.detail.item' states\n   *     $state.reload('contact.detail');\n   *   }\n   * });\n   * ```\n   *\n   * @returns A promise representing the state of the new transition. See [[StateService.go]]\n   */\n  reload(reloadState?: StateOrName): Promise<StateObject> {\n    return this.transitionTo(this.current, this.params, {\n      reload: isDefined(reloadState) ? reloadState : true,\n      inherit: false,\n      notify: false,\n    });\n  };\n\n  /**\n   * Transition to a different state and/or parameters\n   *\n   * Convenience method for transitioning to a new state.\n   *\n   * `$state.go` calls `$state.transitionTo` internally but automatically sets options to\n   * `{ location: true, inherit: true, relative: router.globals.$current, notify: true }`.\n   * This allows you to use either an absolute or relative `to` argument (because of `relative: router.globals.$current`).\n   * It also allows you to specify * only the parameters you'd like to update, while letting unspecified parameters\n   * inherit from the current parameter values (because of `inherit: true`).\n   *\n   * #### Example:\n   * ```js\n   * let app = angular.module('app', ['ui.router']);\n   *\n   * app.controller('ctrl', function ($scope, $state) {\n   *   $scope.changeState = function () {\n   *     $state.go('contact.detail');\n   *   };\n   * });\n   * ```\n   *\n   * @param to Absolute state name, state object, or relative state path (relative to current state).\n   *\n   * Some examples:\n   *\n   * - `$state.go('contact.detail')` - will go to the `contact.detail` state\n   * - `$state.go('^')` - will go to the parent state\n   * - `$state.go('^.sibling')` - if current state is `home.child`, will go to the `home.sibling` state\n   * - `$state.go('.child.grandchild')` - if current state is home, will go to the `home.child.grandchild` state\n   *\n   * @param params A map of the parameters that will be sent to the state, will populate $stateParams.\n   *\n   *    Any parameters that are not specified will be inherited from current parameter values (because of `inherit: true`).\n   *    This allows, for example, going to a sibling state that shares parameters defined by a parent state.\n   *\n   * @param options Transition options\n   *\n   * @returns {promise} A promise representing the state of the new transition.\n   */\n  go(to: StateOrName, params?: RawParams, options?: TransitionOptions): TransitionPromise {\n    let defautGoOpts = { relative: this.$current, inherit: true };\n    let transOpts = defaults(options, defautGoOpts, defaultTransOpts);\n    return this.transitionTo(to, params, transOpts);\n  };\n\n  /**\n   * Creates a [[TargetState]]\n   *\n   * This is a factory method for creating a TargetState\n   *\n   * This may be returned from a Transition Hook to redirect a transition, for example.\n   */\n  target(identifier: StateOrName, params?: ParamsOrArray, options: TransitionOptions = {}): TargetState {\n    // If we're reloading, find the state object to reload from\n    if (isObject(options.reload) && !(<any>options.reload).name)\n      throw new Error('Invalid reload state object');\n    let reg = this.router.stateRegistry;\n    options.reloadState = options.reload === true ? reg.root() : reg.matcher.find(<any> options.reload, options.relative);\n\n    if (options.reload && !options.reloadState)\n      throw new Error(`No such reload state '${(isString(options.reload) ? options.reload : (<any>options.reload).name)}'`);\n\n    let stateDefinition = reg.matcher.find(identifier, options.relative);\n    return new TargetState(identifier, stateDefinition, params, options);\n  };\n\n  private getCurrentPath(): PathNode[] {\n    let globals = this.router.globals;\n    let latestSuccess: Transition = globals.successfulTransitions.peekTail();\n    const rootPath = () => [ new PathNode(this.router.stateRegistry.root()) ];\n    return latestSuccess ? latestSuccess.treeChanges().to : rootPath();\n  }\n\n  /**\n   * Low-level method for transitioning to a new state.\n   *\n   * The [[go]] method (which uses `transitionTo` internally) is recommended in most situations.\n   *\n   * #### Example:\n   * ```js\n   * let app = angular.module('app', ['ui.router']);\n   *\n   * app.controller('ctrl', function ($scope, $state) {\n   *   $scope.changeState = function () {\n   *     $state.transitionTo('contact.detail');\n   *   };\n   * });\n   * ```\n   *\n   * @param to State name or state object.\n   * @param toParams A map of the parameters that will be sent to the state,\n   *      will populate $stateParams.\n   * @param options Transition options\n   *\n   * @returns A promise representing the state of the new transition. See [[go]]\n   */\n  transitionTo(to: StateOrName, toParams: RawParams = {}, options: TransitionOptions = {}): TransitionPromise {\n    let router = this.router;\n    let globals = router.globals;\n    options = defaults(options, defaultTransOpts);\n    const getCurrent = () =>\n        globals.transition;\n    options = extend(options, { current: getCurrent });\n\n    let ref: TargetState = this.target(to, toParams, options);\n    let currentPath = this.getCurrentPath();\n\n    if (!ref.exists())\n      return this._handleInvalidTargetState(currentPath, ref);\n\n    if (!ref.valid())\n      return <TransitionPromise> silentRejection(ref.error());\n\n    /**\n     * Special handling for Ignored, Aborted, and Redirected transitions\n     *\n     * The semantics for the transition.run() promise and the StateService.transitionTo()\n     * promise differ. For instance, the run() promise may be rejected because it was\n     * IGNORED, but the transitionTo() promise is resolved because from the user perspective\n     * no error occurred.  Likewise, the transition.run() promise may be rejected because of\n     * a Redirect, but the transitionTo() promise is chained to the new Transition's promise.\n     */\n    const rejectedTransitionHandler = (transition: Transition) => (error: any): Promise<any> => {\n      if (error instanceof Rejection) {\n        const isLatest = router.globals.lastStartedTransitionId === transition.$id;\n\n        if (error.type === RejectType.IGNORED) {\n          isLatest && router.urlRouter.update();\n          // Consider ignored `Transition.run()` as a successful `transitionTo`\n          return services.$q.when(globals.current);\n        }\n\n        const detail: any = error.detail;\n        if (error.type === RejectType.SUPERSEDED && error.redirected && detail instanceof TargetState) {\n          // If `Transition.run()` was redirected, allow the `transitionTo()` promise to resolve successfully\n          // by returning the promise for the new (redirect) `Transition.run()`.\n          let redirect: Transition = transition.redirect(detail);\n          return redirect.run().catch(rejectedTransitionHandler(redirect));\n        }\n\n        if (error.type === RejectType.ABORTED) {\n          isLatest && router.urlRouter.update();\n          return services.$q.reject(error);\n        }\n      }\n\n      let errorHandler = this.defaultErrorHandler();\n      errorHandler(error);\n\n      return services.$q.reject(error);\n    };\n\n    let transition = this.router.transitionService.create(currentPath, ref);\n    let transitionToPromise = transition.run().catch(rejectedTransitionHandler(transition));\n    silenceUncaughtInPromise(transitionToPromise); // issue #2676\n\n    // Return a promise for the transition, which also has the transition object on it.\n    return extend(transitionToPromise, { transition });\n  };\n\n  /**\n   * Checks if the current state *is* the provided state\n   *\n   * Similar to [[includes]] but only checks for the full state name.\n   * If params is supplied then it will be tested for strict equality against the current\n   * active params object, so all params must match with none missing and no extras.\n   *\n   * #### Example:\n   * ```js\n   * $state.$current.name = 'contacts.details.item';\n   *\n   * // absolute name\n   * $state.is('contact.details.item'); // returns true\n   * $state.is(contactDetailItemStateObject); // returns true\n   * ```\n   *\n   * // relative name (. and ^), typically from a template\n   * // E.g. from the 'contacts.details' template\n   * ```html\n   * <div ng-class=\"{highlighted: $state.is('.item')}\">Item</div>\n   * ```\n   *\n   * @param stateOrName The state name (absolute or relative) or state object you'd like to check.\n   * @param params A param object, e.g. `{sectionId: section.id}`, that you'd like\n   * to test against the current active state.\n   * @param options An options object. The options are:\n   *   - `relative`: If `stateOrName` is a relative state name and `options.relative` is set, .is will\n   *     test relative to `options.relative` state (or name).\n   *\n   * @returns Returns true if it is the state.\n   */\n  is(stateOrName: StateOrName, params?: RawParams, options?: { relative?: StateOrName }): boolean {\n    options = defaults(options, { relative: this.$current });\n    let state = this.router.stateRegistry.matcher.find(stateOrName, options.relative);\n    if (!isDefined(state)) return undefined;\n    if (this.$current !== state) return false;\n    if (!params) return true;\n\n    let schema: Param[] = state.parameters({ inherit: true, matchingKeys: params });\n    return Param.equals(schema, Param.values(schema, params), this.params);\n  };\n\n  /**\n   * Checks if the current state *includes* the provided state\n   *\n   * A method to determine if the current active state is equal to or is the child of the\n   * state stateName. If any params are passed then they will be tested for a match as well.\n   * Not all the parameters need to be passed, just the ones you'd like to test for equality.\n   *\n   * #### Example when `$state.$current.name === 'contacts.details.item'`\n   * ```js\n   * // Using partial names\n   * $state.includes(\"contacts\"); // returns true\n   * $state.includes(\"contacts.details\"); // returns true\n   * $state.includes(\"contacts.details.item\"); // returns true\n   * $state.includes(\"contacts.list\"); // returns false\n   * $state.includes(\"about\"); // returns false\n   * ```\n   *\n   * #### Glob Examples when `* $state.$current.name === 'contacts.details.item.url'`:\n   * ```js\n   * $state.includes(\"*.details.*.*\"); // returns true\n   * $state.includes(\"*.details.**\"); // returns true\n   * $state.includes(\"**.item.**\"); // returns true\n   * $state.includes(\"*.details.item.url\"); // returns true\n   * $state.includes(\"*.details.*.url\"); // returns true\n   * $state.includes(\"*.details.*\"); // returns false\n   * $state.includes(\"item.**\"); // returns false\n   * ```\n   *\n   * @param stateOrName A partial name, relative name, glob pattern,\n   *   or state object to be searched for within the current state name.\n   * @param params A param object, e.g. `{sectionId: section.id}`,\n   *   that you'd like to test against the current active state.\n   * @param options An options object. The options are:\n   *   - `relative`: If `stateOrName` is a relative state name and `options.relative` is set, .is will\n   *     test relative to `options.relative` state (or name).\n   *\n   * @returns {boolean} Returns true if it does include the state\n   */\n  includes(stateOrName: StateOrName, params?: RawParams, options?: TransitionOptions): boolean {\n    options = defaults(options, { relative: this.$current });\n    let glob = isString(stateOrName) && Glob.fromString(<string> stateOrName);\n\n    if (glob) {\n      if (!glob.matches(this.$current.name)) return false;\n      stateOrName = this.$current.name;\n    }\n    let state = this.router.stateRegistry.matcher.find(stateOrName, options.relative), include = this.$current.includes;\n\n    if (!isDefined(state)) return undefined;\n    if (!isDefined(include[state.name])) return false;\n    if (!params) return true;\n\n    let schema: Param[] = state.parameters({ inherit: true, matchingKeys: params });\n    return Param.equals(schema, Param.values(schema, params), this.params);\n  };\n\n\n  /**\n   * Generates a URL for a state and parameters\n   *\n   * Returns the url for the given state populated with the given params.\n   *\n   * #### Example:\n   * ```js\n   * expect($state.href(\"about.person\", { person: \"bob\" })).toEqual(\"/about/bob\");\n   * ```\n   *\n   * @param stateOrName The state name or state object you'd like to generate a url from.\n   * @param params An object of parameter values to fill the state's required parameters.\n   * @param options Options object. The options are:\n   *\n   * @returns {string} compiled state url\n   */\n  href(stateOrName: StateOrName, params: RawParams, options?: HrefOptions): string {\n    let defaultHrefOpts = {\n      lossy:    true,\n      inherit:  true,\n      absolute: false,\n      relative: this.$current,\n    };\n    options = defaults(options, defaultHrefOpts);\n    params = params || {};\n\n    let state = this.router.stateRegistry.matcher.find(stateOrName, options.relative);\n\n    if (!isDefined(state)) return null;\n    if (options.inherit) params = <any> this.params.$inherit(params, this.$current, state);\n\n    let nav = (state && options.lossy) ? state.navigable : state;\n\n    if (!nav || nav.url === undefined || nav.url === null) {\n      return null;\n    }\n    return this.router.urlRouter.href(nav.url, params, {\n      absolute: options.absolute,\n    });\n  };\n\n  /** @hidden */\n  private _defaultErrorHandler: ((_error: any) => void) = function $defaultErrorHandler($error$) {\n    if ($error$ instanceof Error && $error$.stack) {\n      console.error($error$);\n      console.error($error$.stack);\n    } else if ($error$ instanceof Rejection) {\n      console.error($error$.toString());\n      if ($error$.detail && $error$.detail.stack)\n        console.error($error$.detail.stack);\n    } else {\n      console.error($error$);\n    }\n  };\n\n  /**\n   * Sets or gets the default [[transitionTo]] error handler.\n   *\n   * The error handler is called when a [[Transition]] is rejected or when any error occurred during the Transition.\n   * This includes errors caused by resolves and transition hooks.\n   *\n   * Note:\n   * This handler does not receive certain Transition rejections.\n   * Redirected and Ignored Transitions are not considered to be errors by [[StateService.transitionTo]].\n   *\n   * The built-in default error handler logs the error to the console.\n   *\n   * You can provide your own custom handler.\n   *\n   * #### Example:\n   * ```js\n   * stateService.defaultErrorHandler(function() {\n   *   // Do not log transitionTo errors\n   * });\n   * ```\n   *\n   * @param handler a global error handler function\n   * @returns the current global error handler\n   */\n  defaultErrorHandler(handler?: (error: any) => void): (error: any) => void {\n    return this._defaultErrorHandler = handler || this._defaultErrorHandler;\n  }\n\n  /**\n   * Gets a registered [[StateDeclaration]] object\n   *\n   * Returns the state declaration object for any specific state, or for all registered states.\n   *\n   * @param stateOrName (absolute or relative) If provided, will only get the declaration object for the requested state.\n   * If not provided, returns an array of ALL states.\n   * @param base When `stateOrName` is a relative state reference (such as `.bar.baz`), the state will be retrieved relative to this state.\n   *\n   * @returns a [[StateDeclaration]] object (or array of all registered [[StateDeclaration]] objects.)\n   */\n  get(stateOrName: StateOrName, base: StateOrName): StateDeclaration;\n  get(stateOrName: StateOrName): StateDeclaration;\n  get(): StateDeclaration[];\n  get(stateOrName?: StateOrName, base?: StateOrName): any {\n    let reg = this.router.stateRegistry;\n    if (arguments.length === 0) return reg.get();\n    return reg.get(stateOrName, base || this.$current);\n  }\n\n  /**\n   * Lazy loads a state\n   *\n   * Explicitly runs a state's [[StateDeclaration.lazyLoad]] function.\n   *\n   * @param stateOrName the state that should be lazy loaded\n   * @param transition the optional Transition context to use (if the lazyLoad function requires an injector, etc)\n   * Note: If no transition is provided, a noop transition is created using the from the current state to the current state.\n   * This noop transition is not actually run.\n   *\n   * @returns a promise to lazy load\n   */\n  lazyLoad(stateOrName: StateOrName, transition?: Transition): Promise<LazyLoadResult> {\n    let state: StateDeclaration = this.get(stateOrName);\n    if (!state || !state.lazyLoad) throw new Error(\"Can not lazy load \" + stateOrName);\n\n    let currentPath = this.getCurrentPath();\n    let target = PathUtils.makeTargetState(currentPath);\n    transition = transition || this.router.transitionService.create(currentPath, target);\n\n    return lazyLoadState(transition, state);\n  }\n}\n","/**\n * @internalapi\n * @module vanilla\n */\n/** */\nimport { isArray, isObject, $QLike } from \"../common/index\";\n\n/**\n * An angular1-like promise api\n *\n * This object implements four methods similar to the\n * [angular 1 promise api](https://docs.angularjs.org/api/ng/service/$q)\n *\n * UI-Router evolved from an angular 1 library to a framework agnostic library.\n * However, some of the `@uirouter/core` code uses these ng1 style APIs to support ng1 style dependency injection.\n *\n * This API provides native ES6 promise support wrapped as a $q-like API.\n * Internally, UI-Router uses this $q object to perform promise operations.\n * The `angular-ui-router` (ui-router for angular 1) uses the $q API provided by angular.\n *\n * $q-like promise api\n */\nexport const $q = {\n  /** Normalizes a value as a promise */\n  when: (val) => new Promise((resolve, reject) => resolve(val)),\n\n  /** Normalizes a value as a promise rejection */\n  reject: (val) => new Promise((resolve, reject) => { reject(val); }),\n\n  /** @returns a deferred object, which has `resolve` and `reject` functions */\n  defer: () => {\n    let deferred: any = {};\n    deferred.promise = new Promise((resolve, reject) => {\n      deferred.resolve = resolve;\n      deferred.reject = reject;\n    });\n    return deferred;\n  },\n\n  /** Like Promise.all(), but also supports object key/promise notation like $q */\n  all: (promises: { [key: string]: Promise<any> } | Promise<any>[]) => {\n    if (isArray(promises)) {\n      return Promise.all(promises);\n    }\n\n    if (isObject(promises)) {\n      // Convert promises map to promises array.\n      // When each promise resolves, map it to a tuple { key: key, val: val }\n      let chain = Object.keys(promises)\n          .map(key => promises[key].then(val => ({key, val})));\n\n      // Then wait for all promises to resolve, and convert them back to an object\n      return $q.all(chain).then(values =>\n        values.reduce((acc, tuple) => { acc[tuple.key] = tuple.val; return acc; }, {}));\n    }\n  }\n} as $QLike;","/**\n * @internalapi\n * @module vanilla\n */\n/** */\nimport {\n  extend, assertPredicate, isFunction, isArray, isInjectable, $InjectorLike, IInjectable\n} from \"../common/index\";\n\n// globally available injectables\nlet globals = {};\nlet STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\nlet ARGUMENT_NAMES = /([^\\s,]+)/g;\n\n/**\n * A basic angular1-like injector api\n *\n * This object implements four methods similar to the\n * [angular 1 dependency injector](https://docs.angularjs.org/api/auto/service/$injector)\n *\n * UI-Router evolved from an angular 1 library to a framework agnostic library.\n * However, some of the `@uirouter/core` code uses these ng1 style APIs to support ng1 style dependency injection.\n *\n * This object provides a naive implementation of a globally scoped dependency injection system.\n * It supports the following DI approaches:\n *\n * ### Function parameter names\n *\n * A function's `.toString()` is called, and the parameter names are parsed.\n * This only works when the parameter names aren't \"mangled\" by a minifier such as UglifyJS.\n *\n * ```js\n * function injectedFunction(FooService, BarService) {\n *   // FooService and BarService are injected\n * }\n * ```\n *\n * ### Function annotation\n *\n * A function may be annotated with an array of dependency names as the `$inject` property.\n *\n * ```js\n * injectedFunction.$inject = [ 'FooService', 'BarService' ];\n * function injectedFunction(fs, bs) {\n *   // FooService and BarService are injected as fs and bs parameters\n * }\n * ```\n *\n * ### Array notation\n *\n * An array provides the names of the dependencies to inject (as strings).\n * The function is the last element of the array.\n *\n * ```js\n * [ 'FooService', 'BarService', function (fs, bs) {\n *   // FooService and BarService are injected as fs and bs parameters\n * }]\n * ```\n *\n * @type {$InjectorLike}\n */\nexport const $injector = {\n  /** Gets an object from DI based on a string token */\n  get: name => globals[name],\n\n  /** Returns true if an object named `name` exists in global DI */\n  has: (name) => $injector.get(name) != null,\n\n  /**\n   * Injects a function\n   *\n   * @param fn the function to inject\n   * @param context the function's `this` binding\n   * @param locals An object with additional DI tokens and values, such as `{ someToken: { foo: 1 } }`\n   */\n  invoke: (fn: IInjectable, context?, locals?) => {\n    let all = extend({}, globals, locals || {});\n    let params = $injector.annotate(fn);\n    let ensureExist = assertPredicate((key: string) => all.hasOwnProperty(key), key => `DI can't find injectable: '${key}'`);\n    let args = params.filter(ensureExist).map(x => all[x]);\n    if (isFunction(fn)) return fn.apply(context, args);\n    else return (fn as any[]).slice(-1)[0].apply(context, args);\n  },\n\n  /**\n   * Returns a function's dependencies\n   *\n   * Analyzes a function (or array) and returns an array of DI tokens that the function requires.\n   * @return an array of `string`s\n   */\n  annotate: (fn: IInjectable): any[] => {\n    if (!isInjectable(fn)) throw new Error(`Not an injectable function: ${fn}`);\n    if (fn && (fn as any).$inject) return (fn as any).$inject;\n    if (isArray(fn)) return fn.slice(0, -1);\n    let fnStr = fn.toString().replace(STRIP_COMMENTS, '');\n    let result = fnStr.slice(fnStr.indexOf('(') + 1, fnStr.indexOf(')')).match(ARGUMENT_NAMES);\n    return result || [];\n  }\n} as $InjectorLike;","/**\n * @internalapi\n * @module vanilla\n */ /** */\n\nimport { LocationServices } from \"../common/coreservices\";\nimport { Disposable } from \"../interface\";\nimport { UIRouter } from \"../router\";\nimport { LocationLike, HistoryLike } from \"./interface\";\nimport { parseUrl, getParams, buildUrl } from \"./utils\";\nimport { isDefined } from \"../common/predicates\";\nimport { extend, deregAll, removeFrom } from \"../common/common\";\n/** A base `LocationServices` */\nexport abstract class BaseLocationServices implements LocationServices, Disposable {\n  constructor(router: UIRouter, public fireAfterUpdate: boolean) {\n    this._location = window && window.location;\n    this._history = window && window.history;\n  }\n\n  _listener = evt => this._listeners.forEach(cb => cb(evt));\n\n  private _listeners: Function[] = [];\n  _location: LocationLike;\n  _history: HistoryLike;\n\n  /**\n   * This should return the current internal URL representation.\n   *\n   * The internal URL includes only the portion that UI-Router matches.\n   * It does not include:\n   * - protocol\n   * - server\n   * - port\n   * - base href or hash\n   */\n  abstract _get(): string;\n\n  /**\n   * This should set the current URL.\n   *\n   * The `url` param should include only the portion that UI-Router matches on.\n   * It should not include:\n   * - protocol\n   * - server\n   * - port\n   * - base href or hash\n   *\n   * However, after this function completes, the browser URL should reflect the entire (fully qualified)\n   * HREF including those data.\n   */\n  abstract _set(state: any, title: string, url: string, replace: boolean);\n\n  hash   = () => parseUrl(this._get()).hash;\n  path   = () => parseUrl(this._get()).path;\n  search = () => getParams(parseUrl(this._get()).search);\n\n  url(url?: string, replace: boolean = true): string {\n    if (isDefined(url) && url !== this._get()) {\n      this._set(null, null, url, replace);\n\n      if (this.fireAfterUpdate) {\n        let evt = extend(new Event(\"locationchange\"), { url });\n        this._listeners.forEach(cb => cb(evt));\n      }\n    }\n\n    return buildUrl(this);\n  }\n\n  onChange(cb: EventListener) {\n    this._listeners.push(cb);\n    return () => removeFrom(this._listeners, cb);\n  }\n\n  dispose(router: UIRouter) {\n    deregAll(this._listeners);\n  }\n}\n","/**\n * @internalapi\n * @module vanilla\n */\n/** */\nimport { trimHashVal } from \"./utils\";\nimport { UIRouter } from \"../router\";\nimport { BaseLocationServices } from \"./baseLocationService\";\n\n/** A `LocationServices` that uses the browser hash \"#\" to get/set the current location */\nexport class HashLocationService extends BaseLocationServices {\n  constructor(router: UIRouter) {\n    super(router, false);\n    window.addEventListener('hashchange', this._listener, false);\n  }\n\n  _get() {\n    return trimHashVal(this._location.hash);\n  }\n  _set(state: any, title: string, url: string, replace: boolean) {\n    this._location.hash = url;\n  }\n\n  dispose (router: UIRouter) {\n    super.dispose(router);\n    window.removeEventListener('hashchange', this._listener);\n  }\n}\n\n","/**\n * @internalapi\n * @module vanilla\n */\n/** */\nimport { BaseLocationServices } from \"./baseLocationService\";\nimport { UIRouter } from \"../router\";\n\n/** A `LocationServices` that gets/sets the current location from an in-memory object */\nexport class MemoryLocationService extends BaseLocationServices {\n  _url: string;\n\n  constructor(router: UIRouter) {\n    super(router, true);\n  }\n\n  _get() {\n    return this._url;\n  }\n\n  _set(state: any, title: string, url: string, replace: boolean) {\n    this._url = url;\n  }\n}\n","/**\n * @internalapi\n * @module vanilla\n */\n/** */\nimport { LocationConfig } from \"../common/coreservices\";\nimport { splitQuery, splitHash } from \"./utils\";\nimport { UIRouter } from \"../router\";\nimport { BaseLocationServices } from \"./baseLocationService\";\n\n/**\n * A `LocationServices` that gets/sets the current location using the browser's `location` and `history` apis\n *\n * Uses `history.pushState` and `history.replaceState`\n */\nexport class PushStateLocationService extends BaseLocationServices {\n  _config: LocationConfig;\n\n  constructor(router: UIRouter) {\n    super(router, true);\n    this._config = router.urlService.config;\n    window.addEventListener(\"popstate\", this._listener, false);\n  };\n\n  _get() {\n    let { pathname, hash, search } = this._location;\n    search = splitQuery(search)[1]; // strip ? if found\n    hash = splitHash(hash)[1]; // strip # if found\n    return pathname + (search ? \"?\" + search : \"\") + (hash ? \"$\" + search : \"\");\n  }\n\n  _set(state: any, title: string, url: string, replace: boolean) {\n    let { _config, _history } = this;\n    let fullUrl = _config.baseHref() + url;\n\n    if (replace) {\n      _history.replaceState(state, title, fullUrl);\n    } else {\n      _history.pushState(state, title, fullUrl);\n    }\n  }\n\n  dispose(router: UIRouter) {\n    super.dispose(router);\n    window.removeEventListener(\"popstate\", this._listener);\n  }\n}\n\n","/**\n * @internalapi\n * @module vanilla\n */\n/** */\nimport { LocationConfig } from \"../common/coreservices\";\nimport { isDefined } from \"../common/predicates\";\nimport { noop } from \"../common/common\";\n\n/** A `LocationConfig` mock that gets/sets all config from an in-memory object */\nexport class MemoryLocationConfig implements LocationConfig {\n  _baseHref = '';\n  _port = 80;\n  _protocol = \"http\";\n  _host = \"localhost\";\n  _hashPrefix = \"\";\n\n  port = () => this._port;\n  protocol = () => this._protocol;\n  host = () => this._host;\n  baseHref = () => this._baseHref;\n  html5Mode = () => false;\n  hashPrefix = (newval?) => isDefined(newval) ? this._hashPrefix = newval : this._hashPrefix;\n  dispose = noop;\n}","/**\n * @internalapi\n * @module vanilla\n */\n/** */\nimport { isDefined } from \"../common/predicates\";\nimport { LocationConfig } from \"../common/coreservices\";\n\n/** A `LocationConfig` that delegates to the browser's `location` object */\nexport class BrowserLocationConfig implements LocationConfig {\n  private _baseHref = undefined;\n  private _hashPrefix = \"\";\n\n  constructor(router?, private _isHtml5 = false) { }\n\n  port(): number {\n    if (location.port) {\n      return Number(location.port);\n    }\n\n    return this.protocol() === 'https' ? 443 : 80;\n  }\n\n  protocol(): string {\n    return location.protocol.replace(/:/g, '');\n  }\n\n  host(): string {\n    return location.hostname;\n  }\n\n  html5Mode(): boolean {\n    return this._isHtml5;\n  }\n\n  hashPrefix(): string;\n  hashPrefix(newprefix?: string): string {\n    return isDefined(newprefix) ? this._hashPrefix = newprefix : this._hashPrefix;\n  };\n\n  baseHref(href?: string): string {\n    return isDefined(href) ? this._baseHref = href : this._baseHref || this.applyDocumentBaseHref();\n  }\n\n  applyDocumentBaseHref() {\n    let baseTags = document.getElementsByTagName(\"base\");\n    return this._baseHref = baseTags.length ? baseTags[0].href.substr(location.origin.length) : \"\";\n  }\n\n  dispose() {}\n}\n","/**\n * # Core classes and interfaces\n *\n * The classes and interfaces that are core to ui-router and do not belong\n * to a more specific subsystem (such as resolve).\n *\n * @coreapi\n * @preferred\n * @module core\n */ /** for typedoc */\n\n// Need to import or export at least one concrete something\nimport {noop} from \"./common/common\";\nimport {UIRouter} from \"./router\";\n\n/**\n * An interface for getting values from dependency injection.\n *\n * This is primarily used to get resolve values for a given token.\n * An instance of the `UIInjector` can be retrieved from the current transition using [[Transition.injector]].\n *\n * ---\n *\n * If no resolve is found for a token, then it will delegate to the native injector.\n * The native injector may be Angular 1 `$injector`, Angular 2 `Injector`, or a simple polyfill.\n *\n * In Angular 2, the native injector might be the root Injector,\n * or it might be a lazy loaded `NgModule` injector scoped to a lazy load state tree.\n */\nexport interface UIInjector {\n  /**\n   * Gets a value from the injector.\n   *\n   * For a given token, returns the value from the injector that matches the token.\n   * If the token is for a resolve that has not yet been fetched, this throws an error.\n   *\n   * #### Example:\n   * ```js\n   * var myResolve = injector.get('myResolve');\n   * ```\n   *\n   * #### ng1 Example:\n   * ```js\n   * // Fetch StateService\n   * injector.get('$state').go('home');\n   * ```\n   *\n   * #### ng2 Example:\n   * ```js\n   * import {StateService} from \"ui-router-ng2\";\n   * // Fetch StateService\n   * injector.get(StateService).go('home');\n   * ```\n   *\n   * #### Typescript Example:\n   * ```js\n   * var stringArray = injector.get<string[]>('myStringArray');\n   * ```\n   *\n   * ### `NOWAIT` policy\n   *\n   * When using [[ResolvePolicy.async]] === `NOWAIT`, the value returned from `get()` is a promise for the result.\n   * The promise is not automatically unwrapped.\n   *\n   * @param token the key for the value to get.  May be a string, a class, or any arbitrary object.\n   * @return the Dependency Injection value that matches the token\n   */\n  get(token: any): any;\n  /** Gets a value as type `T` (generics parameter) */\n  get<T>(token: any): T;\n\n  /**\n   * Asynchronously gets a value from the injector\n   *\n   * For a given token, returns a promise for the value from the injector that matches the token.\n   * If the token is for a resolve that has not yet been fetched, this triggers the resolve to load.\n   *\n   * #### Example:\n   * ```js\n   * return injector.getAsync('myResolve').then(value => {\n   *   if (value === 'declined') return false;\n   * });\n   * ```\n   *\n   * @param token the key for the value to get.  May be a string or arbitrary object.\n   * @return a Promise for the Dependency Injection value that matches the token\n   */\n  getAsync(token: any): Promise<any>;\n  /** Asynchronously gets a value as type `T` (generics parameter) */\n  getAsync<T>(token: any): Promise<T>;\n\n  /**\n   * Gets a value from the native injector\n   *\n   * Returns a value from the native injector, bypassing anything in the [[ResolveContext]].\n   *\n   * Example:\n   * ```js\n   * let someThing = injector.getNative(SomeToken);\n   * ```\n   *\n   * @param token the key for the value to get.  May be a string or arbitrary object.\n   * @return the Dependency Injection value that matches the token\n   */\n  getNative(token: any): any;\n  getNative<T>(token: any): T;\n}\n\n/** @internalapi */\nexport interface UIRouterPlugin extends Disposable {\n  name: string;\n}\n\n/** @internalapi */\nexport abstract class UIRouterPluginBase implements UIRouterPlugin, Disposable {\n  abstract name: string;\n  dispose(router: UIRouter) { }\n}\n\n/** @internalapi */\nexport interface Disposable {\n  /** Instructs the Disposable to clean up any resources */\n  dispose(router?: UIRouter);\n}","/** @module ng1 */ /** for typedoc */\nimport {\n    val, isObject, createProxyFunctions, BuilderFunction, StateRegistry, StateService, OnInvalidCallback\n} from \"@uirouter/core\";\nimport { Ng1StateDeclaration } from \"./interface\";\n\n/**\n * The Angular 1 `StateProvider`\n *\n * The `$stateProvider` works similar to Angular's v1 router, but it focuses purely\n * on state.\n *\n * A state corresponds to a \"place\" in the application in terms of the overall UI and\n * navigation. A state describes (via the controller / template / view properties) what\n * the UI looks like and does at that place.\n *\n * States often have things in common, and the primary way of factoring out these\n * commonalities in this model is via the state hierarchy, i.e. parent/child states aka\n * nested states.\n *\n * The `$stateProvider` provides interfaces to declare these states for your app.\n */\nexport class StateProvider {\n  constructor(private stateRegistry: StateRegistry, private stateService: StateService) {\n    createProxyFunctions(val(StateProvider.prototype), this, val(this));\n  }\n\n  /**\n   * Decorates states when they are registered\n   *\n   * Allows you to extend (carefully) or override (at your own peril) the\n   * `stateBuilder` object used internally by [[StateRegistry]].\n   * This can be used to add custom functionality to ui-router,\n   * for example inferring templateUrl based on the state name.\n   *\n   * When passing only a name, it returns the current (original or decorated) builder\n   * function that matches `name`.\n   *\n   * The builder functions that can be decorated are listed below. Though not all\n   * necessarily have a good use case for decoration, that is up to you to decide.\n   *\n   * In addition, users can attach custom decorators, which will generate new\n   * properties within the state's internal definition. There is currently no clear\n   * use-case for this beyond accessing internal states (i.e. $state.$current),\n   * however, expect this to become increasingly relevant as we introduce additional\n   * meta-programming features.\n   *\n   * **Warning**: Decorators should not be interdependent because the order of\n   * execution of the builder functions in non-deterministic. Builder functions\n   * should only be dependent on the state definition object and super function.\n   *\n   *\n   * Existing builder functions and current return values:\n   *\n   * - **parent** `{object}` - returns the parent state object.\n   * - **data** `{object}` - returns state data, including any inherited data that is not\n   *   overridden by own values (if any).\n   * - **url** `{object}` - returns a {@link ui.router.util.type:UrlMatcher UrlMatcher}\n   *   or `null`.\n   * - **navigable** `{object}` - returns closest ancestor state that has a URL (aka is\n   *   navigable).\n   * - **params** `{object}` - returns an array of state params that are ensured to\n   *   be a super-set of parent's params.\n   * - **views** `{object}` - returns a views object where each key is an absolute view\n   *   name (i.e. \"viewName@stateName\") and each value is the config object\n   *   (template, controller) for the view. Even when you don't use the views object\n   *   explicitly on a state config, one is still created for you internally.\n   *   So by decorating this builder function you have access to decorating template\n   *   and controller properties.\n   * - **ownParams** `{object}` - returns an array of params that belong to the state,\n   *   not including any params defined by ancestor states.\n   * - **path** `{string}` - returns the full path from the root down to this state.\n   *   Needed for state activation.\n   * - **includes** `{object}` - returns an object that includes every state that\n   *   would pass a `$state.includes()` test.\n   *\n   * #### Example:\n   * Override the internal 'views' builder with a function that takes the state\n   * definition, and a reference to the internal function being overridden:\n   * ```js\n   * $stateProvider.decorator('views', function (state, parent) {\n   *   let result = {},\n   *       views = parent(state);\n   *\n   *   angular.forEach(views, function (config, name) {\n   *     let autoName = (state.name + '.' + name).replace('.', '/');\n   *     config.templateUrl = config.templateUrl || '/partials/' + autoName + '.html';\n   *     result[name] = config;\n   *   });\n   *   return result;\n   * });\n   *\n   * $stateProvider.state('home', {\n   *   views: {\n   *     'contact.list': { controller: 'ListController' },\n   *     'contact.item': { controller: 'ItemController' }\n   *   }\n   * });\n   * ```\n   *\n   *\n   * ```js\n   * // Auto-populates list and item views with /partials/home/contact/list.html,\n   * // and /partials/home/contact/item.html, respectively.\n   * $state.go('home');\n   * ```\n   *\n   * @param {string} name The name of the builder function to decorate.\n   * @param {object} func A function that is responsible for decorating the original\n   * builder function. The function receives two parameters:\n   *\n   *   - `{object}` - state - The state config object.\n   *   - `{object}` - super - The original builder function.\n   *\n   * @return {object} $stateProvider - $stateProvider instance\n   */\n  decorator(name: string, func: BuilderFunction) {\n    return this.stateRegistry.decorator(name, func) || this;\n  }\n\n  /**\n   * Registers a state\n   *\n   * ### This is a passthrough to [[StateRegistry.register]].\n   *\n   * Registers a state configuration under a given state name.\n   * The stateConfig object has the following acceptable properties.\n   *\n   * <a id='template'></a>\n   *\n   * - **`template`** - {string|function=} - html template as a string or a function that returns\n   *   an html template as a string which should be used by the uiView directives. This property\n   *   takes precedence over templateUrl.\n   *\n   *   If `template` is a function, it will be called with the following parameters:\n   *\n   *   - {array.&lt;object&gt;} - state parameters extracted from the current $location.path() by\n   *     applying the current state\n   *\n   * <a id='templateUrl'></a>\n   *\n   * - **`templateUrl`** - {string|function=} - path or function that returns a path to an html\n   *   template that should be used by uiView.\n   *\n   *   If `templateUrl` is a function, it will be called with the following parameters:\n   *\n   *   - {array.&lt;object&gt;} - state parameters extracted from the current $location.path() by\n   *     applying the current state\n   *\n   * <a id='templateProvider'></a>\n   *\n   * - **`templateProvider`** - {function=} - Provider function that returns HTML content\n   *   string.\n   *\n   * <a id='controller'></a>\n   *\n   * - **`controller`** - {string|function=} -  Controller fn that should be associated with newly\n   *   related scope or the name of a registered controller if passed as a string.\n   *\n   * <a id='controllerProvider'></a>\n   *\n   * - **`controllerProvider`** - {function=} - Injectable provider function that returns\n   *   the actual controller or string.\n   *\n   * <a id='controllerAs'></a>\n   *\n   * - **`controllerAs`**  {string=}  A controller alias name. If present the controller will be\n   *   published to scope under the controllerAs name.\n   *\n   * <a id='resolve'></a>\n   *\n   * - **`resolve`** - {object.&lt;string, function&gt;=} - An optional map of dependencies which\n   *   should be injected into the controller. If any of these dependencies are promises,\n   *   the router will wait for them all to be resolved or one to be rejected before the\n   *   controller is instantiated. If all the promises are resolved successfully, the values\n   *   of the resolved promises are injected and $stateChangeSuccess event is fired. If any\n   *   of the promises are rejected the $stateChangeError event is fired. The map object is:\n   *\n   *   - key - {string}: name of dependency to be injected into controller\n   *   - factory - {string|function}: If string then it is alias for service. Otherwise if function,\n   *     it is injected and return value it treated as dependency. If result is a promise, it is\n   *     resolved before its value is injected into controller.\n   *\n   * <a id='url'></a>\n   *\n   * - **`url`** - {string=} - A url with optional parameters. When a state is navigated or\n   *   transitioned to, the `$stateParams` service will be populated with any\n   *   parameters that were passed.\n   *\n   * <a id='params'></a>\n   *\n   * - **`params`** - {object=} - An array of parameter names or regular expressions. Only\n   *   use this within a state if you are not using url. Otherwise you can specify your\n   *   parameters within the url. When a state is navigated or transitioned to, the\n   *   $stateParams service will be populated with any parameters that were passed.\n   *\n   * <a id='views'></a>\n   *\n   * - **`views`** - {object=} - Use the views property to set up multiple views or to target views\n   *   manually/explicitly.\n   *\n   * <a id='abstract'></a>\n   *\n   * - **`abstract`** - {boolean=} - An abstract state will never be directly activated,\n   *   but can provide inherited properties to its common children states.\n   *\n   * <a id='onEnter'></a>\n   *\n   * - **`onEnter`** - {object=} - Callback function for when a state is entered. Good way\n   *   to trigger an action or dispatch an event, such as opening a dialog.\n   * If minifying your scripts, make sure to use the `['injection1', 'injection2', function(injection1, injection2){}]` syntax.\n   *\n   * <a id='onExit'></a>\n   *\n   * - **`onExit`** - {object=} - Callback function for when a state is exited. Good way to\n   *   trigger an action or dispatch an event, such as opening a dialog.\n   * If minifying your scripts, make sure to use the `['injection1', 'injection2', function(injection1, injection2){}]` syntax.\n   *\n   * <a id='reloadOnSearch'></a>\n   *\n   * - **`reloadOnSearch = true`** - {boolean=} - If `false`, will not retrigger the same state\n   *   just because a search/query parameter has changed (via $location.search() or $location.hash()).\n   *   Useful for when you'd like to modify $location.search() without triggering a reload.\n   *\n   * <a id='data'></a>\n   *\n   * - **`data`** - {object=} - Arbitrary data object, useful for custom configuration.\n   *\n   * #### Example:\n   * Some state name examples\n   * ```js\n   * // stateName can be a single top-level name (must be unique).\n   * $stateProvider.state(\"home\", {});\n   *\n   * // Or it can be a nested state name. This state is a child of the\n   * // above \"home\" state.\n   * $stateProvider.state(\"home.newest\", {});\n   *\n   * // Nest states as deeply as needed.\n   * $stateProvider.state(\"home.newest.abc.xyz.inception\", {});\n   *\n   * // state() returns $stateProvider, so you can chain state declarations.\n   * $stateProvider\n   *   .state(\"home\", {})\n   *   .state(\"about\", {})\n   *   .state(\"contacts\", {});\n   * ```\n   *\n   * @param {string} name A unique state name, e.g. \"home\", \"about\", \"contacts\".\n   * To create a parent/child state use a dot, e.g. \"about.sales\", \"home.newest\".\n   * @param {object} definition State configuration object.\n   */\n  state(name: string, definition: Ng1StateDeclaration): StateProvider;\n  state(definition: Ng1StateDeclaration): StateProvider;\n  state(name: any, definition?: any) {\n    if (isObject(name)) {\n      definition = name;\n    } else {\n      definition.name = name;\n    }\n    this.stateRegistry.register(definition);\n    return this;\n  }\n\n  /**\n   * Registers an invalid state handler\n   *\n   * This is a passthrough to [[StateService.onInvalid]] for ng1.\n   */\n\n  onInvalid(callback: OnInvalidCallback): Function {\n    return this.stateService.onInvalid(callback);\n  }\n}\n","/** @module ng1 */ /** */\nimport {\n  StateObject, TransitionStateHookFn, HookResult, Transition, services, ResolveContext, extend, BuilderFunction\n} from \"@uirouter/core\";\nimport { getLocals } from \"../services\";\nimport { Ng1StateDeclaration } from '../interface';\n\n/**\n * This is a [[StateBuilder.builder]] function for angular1 `onEnter`, `onExit`,\n * `onRetain` callback hooks on a [[Ng1StateDeclaration]].\n *\n * When the [[StateBuilder]] builds a [[StateObject]] object from a raw [[StateDeclaration]], this builder\n * ensures that those hooks are injectable for @uirouter/angularjs (ng1).\n */\nexport const getStateHookBuilder = (hookName: \"onEnter\"|\"onExit\"|\"onRetain\") =>\nfunction stateHookBuilder(state: StateObject, parentFn: BuilderFunction): TransitionStateHookFn {\n  let hook = state[hookName];\n  let pathname = hookName === 'onExit' ? 'from' : 'to';\n\n  function decoratedNg1Hook(trans: Transition, state: Ng1StateDeclaration): HookResult {\n    let resolveContext = new ResolveContext(trans.treeChanges(pathname));\n    let locals = extend(getLocals(resolveContext), { $state$: state, $transition$: trans });\n    return services.$injector.invoke(hook, this, locals);\n  }\n\n  return hook ? decoratedNg1Hook : undefined;\n};\n","/**\n * @internalapi\n * @module ng1\n */ /** */\nimport { LocationConfig, LocationServices, UIRouter, ParamType } from \"@uirouter/core\";\nimport { val, createProxyFunctions, removeFrom, isObject } from \"@uirouter/core\";\nimport { ILocationService, ILocationProvider } from \"angular\";\n\n/**\n * Implements UI-Router LocationServices and LocationConfig using Angular 1's $location service\n */\nexport class Ng1LocationServices implements LocationConfig, LocationServices {\n  private $locationProvider: ILocationProvider;\n  private $location: ILocationService;\n  private $sniffer;\n\n  path;\n  search;\n  hash;\n  hashPrefix;\n  port;\n  protocol;\n  host;\n  baseHref;\n\n  // .onChange() registry\n  private _urlListeners: Function[] = [];\n\n  dispose() { }\n\n  constructor($locationProvider: ILocationProvider) {\n    this.$locationProvider = $locationProvider;\n    let _lp = val($locationProvider);\n    createProxyFunctions(_lp, this, _lp, ['hashPrefix']);\n  }\n\n  onChange(callback: Function) {\n    this._urlListeners.push(callback);\n    return () => removeFrom(this._urlListeners)(callback);\n  }\n\n  html5Mode() {\n    let html5Mode: any = this.$locationProvider.html5Mode();\n    html5Mode = isObject(html5Mode) ? html5Mode.enabled : html5Mode;\n    return html5Mode && this.$sniffer.history;\n  }\n\n  url(newUrl?: string, replace = false, state?) {\n    if (newUrl) this.$location.url(newUrl);\n    if (replace) this.$location.replace();\n    if (state) this.$location.state(state);\n    return this.$location.url();\n  }\n\n  _runtimeServices($rootScope, $location: ILocationService, $sniffer, $browser) {\n    this.$location = $location;\n    this.$sniffer = $sniffer;\n\n    // Bind $locationChangeSuccess to the listeners registered in LocationService.onChange\n    $rootScope.$on(\"$locationChangeSuccess\", evt => this._urlListeners.forEach(fn => fn(evt)));\n    let _loc = val($location);\n    let _browser = val($browser);\n\n    // Bind these LocationService functions to $location\n    createProxyFunctions(_loc, this, _loc, [\"replace\", \"path\", \"search\", \"hash\"]);\n    // Bind these LocationConfig functions to $location\n    createProxyFunctions(_loc, this, _loc, ['port', 'protocol', 'host']);\n    // Bind these LocationConfig functions to $browser\n    createProxyFunctions(_browser, this, _browser, ['baseHref']);\n  }\n\n  /**\n   * Applys ng1-specific path parameter encoding\n   *\n   * The Angular 1 `$location` service is a bit weird.\n   * It doesn't allow slashes to be encoded/decoded bi-directionally.\n   *\n   * See the writeup at https://github.com/angular-ui/ui-router/issues/2598\n   *\n   * This code patches the `path` parameter type so it encoded/decodes slashes as ~2F\n   *\n   * @param router\n   */\n  static monkeyPatchPathParameterType(router: UIRouter) {\n    let pathType: ParamType = router.urlMatcherFactory.type('path');\n\n    pathType.encode = (val: any) =>\n        val != null ? val.toString().replace(/(~|\\/)/g, m => ({ '~': '~~', '/': '~2F' }[m])) : val;\n\n    pathType.decode = (val: string) =>\n        val != null ? val.toString().replace(/(~~|~2F)/g, m => ({ '~~': '~', '~2F': '/' }[m])) : val;\n\n  }\n}\n","/** @module url */ /** */\nimport {\n    UIRouter, UrlRouter, LocationServices, $InjectorLike, BaseUrlRule, UrlRuleHandlerFn, UrlMatcher,\n    IInjectable\n} from \"@uirouter/core\";\nimport { services, isString, isFunction, isArray, identity } from \"@uirouter/core\";\n\nexport interface RawNg1RuleFunction {\n  ($injector: $InjectorLike, $location: LocationServices): string|void;\n}\n\n/**\n * Manages rules for client-side URL\n *\n * ### Deprecation warning:\n * This class is now considered to be an internal API\n * Use the [[UrlService]] instead.\n * For configuring URL rules, use the [[UrlRulesApi]] which can be found as [[UrlService.rules]].\n *\n * This class manages the router rules for what to do when the URL changes.\n *\n * This provider remains for backwards compatibility.\n *\n * @deprecated\n */\nexport class UrlRouterProvider {\n  /** @hidden */ _router: UIRouter;\n  /** @hidden */ _urlRouter: UrlRouter;\n\n  /** @hidden */\n  constructor(router: UIRouter) {\n    this._router = router;\n    this._urlRouter = router.urlRouter;\n  }\n\n  /** @hidden */\n  $get() {\n    let urlRouter = this._urlRouter;\n    urlRouter.update(true);\n    if (!urlRouter.interceptDeferred) urlRouter.listen();\n    return urlRouter;\n  }\n\n  /**\n   * Registers a url handler function.\n   *\n   * Registers a low level url handler (a `rule`).\n   * A rule detects specific URL patterns and returns a redirect, or performs some action.\n   *\n   * If a rule returns a string, the URL is replaced with the string, and all rules are fired again.\n   *\n   * #### Example:\n   * ```js\n   * var app = angular.module('app', ['ui.router.router']);\n   *\n   * app.config(function ($urlRouterProvider) {\n   *   // Here's an example of how you might allow case insensitive urls\n   *   $urlRouterProvider.rule(function ($injector, $location) {\n   *     var path = $location.path(),\n   *         normalized = path.toLowerCase();\n   *\n   *     if (path !== normalized) {\n   *       return normalized;\n   *     }\n   *   });\n   * });\n   * ```\n   *\n   * @param ruleFn\n   * Handler function that takes `$injector` and `$location` services as arguments.\n   * You can use them to detect a url and return a different url as a string.\n   *\n   * @return [[UrlRouterProvider]] (`this`)\n   */\n  rule(ruleFn: RawNg1RuleFunction): UrlRouterProvider {\n    if (!isFunction(ruleFn)) throw new Error(\"'rule' must be a function\");\n\n    const match = () =>\n        ruleFn(services.$injector, this._router.locationService);\n\n    let rule = new BaseUrlRule(match, identity);\n    this._urlRouter.rule(rule);\n    return this;\n  };\n\n  /**\n   * Defines the path or behavior to use when no url can be matched.\n   *\n   * #### Example:\n   * ```js\n   * var app = angular.module('app', ['ui.router.router']);\n   *\n   * app.config(function ($urlRouterProvider) {\n   *   // if the path doesn't match any of the urls you configured\n   *   // otherwise will take care of routing the user to the\n   *   // specified url\n   *   $urlRouterProvider.otherwise('/index');\n   *\n   *   // Example of using function rule as param\n   *   $urlRouterProvider.otherwise(function ($injector, $location) {\n   *     return '/a/valid/url';\n   *   });\n   * });\n   * ```\n   *\n   * @param rule\n   * The url path you want to redirect to or a function rule that returns the url path or performs a `$state.go()`.\n   * The function version is passed two params: `$injector` and `$location` services, and should return a url string.\n   *\n   * @return {object} `$urlRouterProvider` - `$urlRouterProvider` instance\n   */\n  otherwise(rule: string | RawNg1RuleFunction): UrlRouterProvider {\n    let urlRouter = this._urlRouter;\n\n    if (isString(rule)) {\n      urlRouter.otherwise(rule);\n    } else if (isFunction(rule)) {\n      urlRouter.otherwise(() => rule(services.$injector, this._router.locationService));\n    } else {\n      throw new Error(\"'rule' must be a string or function\");\n    }\n\n    return this;\n  };\n\n  /**\n   * Registers a handler for a given url matching.\n   *\n   * If the handler is a string, it is\n   * treated as a redirect, and is interpolated according to the syntax of match\n   * (i.e. like `String.replace()` for `RegExp`, or like a `UrlMatcher` pattern otherwise).\n   *\n   * If the handler is a function, it is injectable.\n   * It gets invoked if `$location` matches.\n   * You have the option of inject the match object as `$match`.\n   *\n   * The handler can return\n   *\n   * - **falsy** to indicate that the rule didn't match after all, then `$urlRouter`\n   *   will continue trying to find another one that matches.\n   * - **string** which is treated as a redirect and passed to `$location.url()`\n   * - **void** or any **truthy** value tells `$urlRouter` that the url was handled.\n   *\n   * #### Example:\n   * ```js\n   * var app = angular.module('app', ['ui.router.router']);\n   *\n   * app.config(function ($urlRouterProvider) {\n   *   $urlRouterProvider.when($state.url, function ($match, $stateParams) {\n   *     if ($state.$current.navigable !== state ||\n   *         !equalForKeys($match, $stateParams) {\n   *      $state.transitionTo(state, $match, false);\n   *     }\n   *   });\n   * });\n   * ```\n   *\n   * @param what A pattern string to match, compiled as a [[UrlMatcher]].\n   * @param handler The path (or function that returns a path) that you want to redirect your user to.\n   * @param ruleCallback [optional] A callback that receives the `rule` registered with [[UrlMatcher.rule]]\n   *\n   * Note: the handler may also invoke arbitrary code, such as `$state.go()`\n   */\n  when(what: (RegExp|UrlMatcher|string), handler: string|IInjectable) {\n    if (isArray(handler) || isFunction(handler)) {\n      handler = UrlRouterProvider.injectableHandler(this._router, handler);\n    }\n\n    this._urlRouter.when(what, handler as any);\n    return this;\n  };\n\n  static injectableHandler(router: UIRouter, handler): UrlRuleHandlerFn {\n    return match =>\n        services.$injector.invoke(handler, null, { $match: match, $stateParams: router.globals.params });\n  }\n\n  /**\n   * Disables monitoring of the URL.\n   *\n   * Call this method before UI-Router has bootstrapped.\n   * It will stop UI-Router from performing the initial url sync.\n   *\n   * This can be useful to perform some asynchronous initialization before the router starts.\n   * Once the initialization is complete, call [[listen]] to tell UI-Router to start watching and synchronizing the URL.\n   *\n   * #### Example:\n   * ```js\n   * var app = angular.module('app', ['ui.router']);\n   *\n   * app.config(function ($urlRouterProvider) {\n   *   // Prevent $urlRouter from automatically intercepting URL changes;\n   *   $urlRouterProvider.deferIntercept();\n   * })\n   *\n   * app.run(function (MyService, $urlRouter, $http) {\n   *   $http.get(\"/stuff\").then(function(resp) {\n   *     MyService.doStuff(resp.data);\n   *     $urlRouter.listen();\n   *     $urlRouter.sync();\n   *   });\n   * });\n   * ```\n   *\n   * @param defer Indicates whether to defer location change interception.\n   *        Passing no parameter is equivalent to `true`.\n   */\n  deferIntercept(defer?: boolean) {\n    this._urlRouter.deferIntercept(defer);\n  };\n}\n","/** @module ng1 */ /** */\nimport { ng as angular } from \"./angular\";\nimport { IServiceProviderFactory } from \"angular\";\nimport IAnchorScrollService = angular.IAnchorScrollService;\nimport ITimeoutService = angular.ITimeoutService;\n\nexport interface UIViewScrollProvider {\n  /**\n   * Uses standard anchorScroll behavior\n   *\n   * Reverts [[$uiViewScroll]] back to using the core [`$anchorScroll`](http://docs.angularjs.org/api/ng.$anchorScroll)\n   * service for scrolling based on the url anchor.\n   */\n  useAnchorScroll(): void;\n}\n\n\n/** @hidden */\nfunction $ViewScrollProvider() {\n\n  var useAnchorScroll = false;\n\n  this.useAnchorScroll = function () {\n    useAnchorScroll = true;\n  };\n\n  this.$get = ['$anchorScroll', '$timeout', function ($anchorScroll: IAnchorScrollService, $timeout: ITimeoutService): Function {\n    if (useAnchorScroll) {\n      return $anchorScroll;\n    }\n\n    return function ($element: JQuery) {\n      return $timeout(function () {\n        $element[0].scrollIntoView();\n      }, 0, false);\n    };\n  }];\n}\n\nangular.module('ui.router.state').provider('$uiViewScroll', <IServiceProviderFactory> $ViewScrollProvider);\n","/**\n * Main entry point for angular 1.x build\n * @module ng1\n */ /** */\n\nexport * from \"./interface\";\nexport * from \"./services\";\nexport * from \"./statebuilders/views\";\nexport * from \"./stateProvider\";\nexport * from \"./urlRouterProvider\";\n\nimport \"./injectables\";\nimport \"./directives/stateDirectives\";\nimport \"./stateFilters\";\nimport \"./directives/viewDirective\";\nimport \"./viewScroll\";\n\nexport default \"ui.router\";\n\nimport * as core from \"@uirouter/core\";\nexport { core };\nexport * from \"@uirouter/core\";\n\n","/**!\n * AngularJS file upload directives and services. Supoorts: file upload/drop/paste, resume, cancel/abort,\n * progress, resize, thumbnail, preview, validation and CORS\n * @author  Danial  <danial.farid@gmail.com>\n * @version 12.2.13\n */\n\nif (window.XMLHttpRequest && !(window.FileAPI && FileAPI.shouldLoad)) {\n  window.XMLHttpRequest.prototype.setRequestHeader = (function (orig) {\n    return function (header, value) {\n      if (header === '__setXHR_') {\n        var val = value(this);\n        // fix for angular < 1.2.0\n        if (val instanceof Function) {\n          val(this);\n        }\n      } else {\n        orig.apply(this, arguments);\n      }\n    };\n  })(window.XMLHttpRequest.prototype.setRequestHeader);\n}\n\nvar ngFileUpload = angular.module('ngFileUpload', []);\n\nngFileUpload.version = '12.2.13';\n\nngFileUpload.service('UploadBase', ['$http', '$q', '$timeout', function ($http, $q, $timeout) {\n  var upload = this;\n  upload.promisesCount = 0;\n\n  this.isResumeSupported = function () {\n    return window.Blob && window.Blob.prototype.slice;\n  };\n\n  var resumeSupported = this.isResumeSupported();\n\n  function sendHttp(config) {\n    config.method = config.method || 'POST';\n    config.headers = config.headers || {};\n\n    var deferred = config._deferred = config._deferred || $q.defer();\n    var promise = deferred.promise;\n\n    function notifyProgress(e) {\n      if (deferred.notify) {\n        deferred.notify(e);\n      }\n      if (promise.progressFunc) {\n        $timeout(function () {\n          promise.progressFunc(e);\n        });\n      }\n    }\n\n    function getNotifyEvent(n) {\n      if (config._start != null && resumeSupported) {\n        return {\n          loaded: n.loaded + config._start,\n          total: (config._file && config._file.size) || n.total,\n          type: n.type, config: config,\n          lengthComputable: true, target: n.target\n        };\n      } else {\n        return n;\n      }\n    }\n\n    if (!config.disableProgress) {\n      config.headers.__setXHR_ = function () {\n        return function (xhr) {\n          if (!xhr || !xhr.upload || !xhr.upload.addEventListener) return;\n          config.__XHR = xhr;\n          if (config.xhrFn) config.xhrFn(xhr);\n          xhr.upload.addEventListener('progress', function (e) {\n            e.config = config;\n            notifyProgress(getNotifyEvent(e));\n          }, false);\n          //fix for firefox not firing upload progress end, also IE8-9\n          xhr.upload.addEventListener('load', function (e) {\n            if (e.lengthComputable) {\n              e.config = config;\n              notifyProgress(getNotifyEvent(e));\n            }\n          }, false);\n        };\n      };\n    }\n\n    function uploadWithAngular() {\n      $http(config).then(function (r) {\n          if (resumeSupported && config._chunkSize && !config._finished && config._file) {\n            var fileSize = config._file && config._file.size || 0;\n            notifyProgress({\n                loaded: Math.min(config._end, fileSize),\n                total: fileSize,\n                config: config,\n                type: 'progress'\n              }\n            );\n            upload.upload(config, true);\n          } else {\n            if (config._finished) delete config._finished;\n            deferred.resolve(r);\n          }\n        }, function (e) {\n          deferred.reject(e);\n        }, function (n) {\n          deferred.notify(n);\n        }\n      );\n    }\n\n    if (!resumeSupported) {\n      uploadWithAngular();\n    } else if (config._chunkSize && config._end && !config._finished) {\n      config._start = config._end;\n      config._end += config._chunkSize;\n      uploadWithAngular();\n    } else if (config.resumeSizeUrl) {\n      $http.get(config.resumeSizeUrl).then(function (resp) {\n        if (config.resumeSizeResponseReader) {\n          config._start = config.resumeSizeResponseReader(resp.data);\n        } else {\n          config._start = parseInt((resp.data.size == null ? resp.data : resp.data.size).toString());\n        }\n        if (config._chunkSize) {\n          config._end = config._start + config._chunkSize;\n        }\n        uploadWithAngular();\n      }, function (e) {\n        throw e;\n      });\n    } else if (config.resumeSize) {\n      config.resumeSize().then(function (size) {\n        config._start = size;\n        if (config._chunkSize) {\n          config._end = config._start + config._chunkSize;\n        }\n        uploadWithAngular();\n      }, function (e) {\n        throw e;\n      });\n    } else {\n      if (config._chunkSize) {\n        config._start = 0;\n        config._end = config._start + config._chunkSize;\n      }\n      uploadWithAngular();\n    }\n\n\n    promise.success = function (fn) {\n      promise.then(function (response) {\n        fn(response.data, response.status, response.headers, config);\n      });\n      return promise;\n    };\n\n    promise.error = function (fn) {\n      promise.then(null, function (response) {\n        fn(response.data, response.status, response.headers, config);\n      });\n      return promise;\n    };\n\n    promise.progress = function (fn) {\n      promise.progressFunc = fn;\n      promise.then(null, null, function (n) {\n        fn(n);\n      });\n      return promise;\n    };\n    promise.abort = promise.pause = function () {\n      if (config.__XHR) {\n        $timeout(function () {\n          config.__XHR.abort();\n        });\n      }\n      return promise;\n    };\n    promise.xhr = function (fn) {\n      config.xhrFn = (function (origXhrFn) {\n        return function () {\n          if (origXhrFn) origXhrFn.apply(promise, arguments);\n          fn.apply(promise, arguments);\n        };\n      })(config.xhrFn);\n      return promise;\n    };\n\n    upload.promisesCount++;\n    if (promise['finally'] && promise['finally'] instanceof Function) {\n      promise['finally'](function () {\n        upload.promisesCount--;\n      });\n    }\n    return promise;\n  }\n\n  this.isUploadInProgress = function () {\n    return upload.promisesCount > 0;\n  };\n\n  this.rename = function (file, name) {\n    file.ngfName = name;\n    return file;\n  };\n\n  this.jsonBlob = function (val) {\n    if (val != null && !angular.isString(val)) {\n      val = JSON.stringify(val);\n    }\n    var blob = new window.Blob([val], {type: 'application/json'});\n    blob._ngfBlob = true;\n    return blob;\n  };\n\n  this.json = function (val) {\n    return angular.toJson(val);\n  };\n\n  function copy(obj) {\n    var clone = {};\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        clone[key] = obj[key];\n      }\n    }\n    return clone;\n  }\n\n  this.isFile = function (file) {\n    return file != null && (file instanceof window.Blob || (file.flashId && file.name && file.size));\n  };\n\n  this.upload = function (config, internal) {\n    function toResumeFile(file, formData) {\n      if (file._ngfBlob) return file;\n      config._file = config._file || file;\n      if (config._start != null && resumeSupported) {\n        if (config._end && config._end >= file.size) {\n          config._finished = true;\n          config._end = file.size;\n        }\n        var slice = file.slice(config._start, config._end || file.size);\n        slice.name = file.name;\n        slice.ngfName = file.ngfName;\n        if (config._chunkSize) {\n          formData.append('_chunkSize', config._chunkSize);\n          formData.append('_currentChunkSize', config._end - config._start);\n          formData.append('_chunkNumber', Math.floor(config._start / config._chunkSize));\n          formData.append('_totalSize', config._file.size);\n        }\n        return slice;\n      }\n      return file;\n    }\n\n    function addFieldToFormData(formData, val, key) {\n      if (val !== undefined) {\n        if (angular.isDate(val)) {\n          val = val.toISOString();\n        }\n        if (angular.isString(val)) {\n          formData.append(key, val);\n        } else if (upload.isFile(val)) {\n          var file = toResumeFile(val, formData);\n          var split = key.split(',');\n          if (split[1]) {\n            file.ngfName = split[1].replace(/^\\s+|\\s+$/g, '');\n            key = split[0];\n          }\n          config._fileKey = config._fileKey || key;\n          formData.append(key, file, file.ngfName || file.name);\n        } else {\n          if (angular.isObject(val)) {\n            if (val.$$ngfCircularDetection) throw 'ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: ' + key;\n\n            val.$$ngfCircularDetection = true;\n            try {\n              for (var k in val) {\n                if (val.hasOwnProperty(k) && k !== '$$ngfCircularDetection') {\n                  var objectKey = config.objectKey == null ? '[i]' : config.objectKey;\n                  if (val.length && parseInt(k) > -1) {\n                    objectKey = config.arrayKey == null ? objectKey : config.arrayKey;\n                  }\n                  addFieldToFormData(formData, val[k], key + objectKey.replace(/[ik]/g, k));\n                }\n              }\n            } finally {\n              delete val.$$ngfCircularDetection;\n            }\n          } else {\n            formData.append(key, val);\n          }\n        }\n      }\n    }\n\n    function digestConfig() {\n      config._chunkSize = upload.translateScalars(config.resumeChunkSize);\n      config._chunkSize = config._chunkSize ? parseInt(config._chunkSize.toString()) : null;\n\n      config.headers = config.headers || {};\n      config.headers['Content-Type'] = undefined;\n      config.transformRequest = config.transformRequest ?\n        (angular.isArray(config.transformRequest) ?\n          config.transformRequest : [config.transformRequest]) : [];\n      config.transformRequest.push(function (data) {\n        var formData = new window.FormData(), key;\n        data = data || config.fields || {};\n        if (config.file) {\n          data.file = config.file;\n        }\n        for (key in data) {\n          if (data.hasOwnProperty(key)) {\n            var val = data[key];\n            if (config.formDataAppender) {\n              config.formDataAppender(formData, key, val);\n            } else {\n              addFieldToFormData(formData, val, key);\n            }\n          }\n        }\n\n        return formData;\n      });\n    }\n\n    if (!internal) config = copy(config);\n    if (!config._isDigested) {\n      config._isDigested = true;\n      digestConfig();\n    }\n\n    return sendHttp(config);\n  };\n\n  this.http = function (config) {\n    config = copy(config);\n    config.transformRequest = config.transformRequest || function (data) {\n        if ((window.ArrayBuffer && data instanceof window.ArrayBuffer) || data instanceof window.Blob) {\n          return data;\n        }\n        return $http.defaults.transformRequest[0].apply(this, arguments);\n      };\n    config._chunkSize = upload.translateScalars(config.resumeChunkSize);\n    config._chunkSize = config._chunkSize ? parseInt(config._chunkSize.toString()) : null;\n\n    return sendHttp(config);\n  };\n\n  this.translateScalars = function (str) {\n    if (angular.isString(str)) {\n      if (str.search(/kb/i) === str.length - 2) {\n        return parseFloat(str.substring(0, str.length - 2) * 1024);\n      } else if (str.search(/mb/i) === str.length - 2) {\n        return parseFloat(str.substring(0, str.length - 2) * 1048576);\n      } else if (str.search(/gb/i) === str.length - 2) {\n        return parseFloat(str.substring(0, str.length - 2) * 1073741824);\n      } else if (str.search(/b/i) === str.length - 1) {\n        return parseFloat(str.substring(0, str.length - 1));\n      } else if (str.search(/s/i) === str.length - 1) {\n        return parseFloat(str.substring(0, str.length - 1));\n      } else if (str.search(/m/i) === str.length - 1) {\n        return parseFloat(str.substring(0, str.length - 1) * 60);\n      } else if (str.search(/h/i) === str.length - 1) {\n        return parseFloat(str.substring(0, str.length - 1) * 3600);\n      }\n    }\n    return str;\n  };\n\n  this.urlToBlob = function(url) {\n    var defer = $q.defer();\n    $http({url: url, method: 'get', responseType: 'arraybuffer'}).then(function (resp) {\n      var arrayBufferView = new Uint8Array(resp.data);\n      var type = resp.headers('content-type') || 'image/WebP';\n      var blob = new window.Blob([arrayBufferView], {type: type});\n      var matches = url.match(/.*\\/(.+?)(\\?.*)?$/);\n      if (matches.length > 1) {\n        blob.name = matches[1];\n      }\n      defer.resolve(blob);\n    }, function (e) {\n      defer.reject(e);\n    });\n    return defer.promise;\n  };\n\n  this.setDefaults = function (defaults) {\n    this.defaults = defaults || {};\n  };\n\n  this.defaults = {};\n  this.version = ngFileUpload.version;\n}\n\n]);\n\nngFileUpload.service('Upload', ['$parse', '$timeout', '$compile', '$q', 'UploadExif', function ($parse, $timeout, $compile, $q, UploadExif) {\n  var upload = UploadExif;\n  upload.getAttrWithDefaults = function (attr, name) {\n    if (attr[name] != null) return attr[name];\n    var def = upload.defaults[name];\n    return (def == null ? def : (angular.isString(def) ? def : JSON.stringify(def)));\n  };\n\n  upload.attrGetter = function (name, attr, scope, params) {\n    var attrVal = this.getAttrWithDefaults(attr, name);\n    if (scope) {\n      try {\n        if (params) {\n          return $parse(attrVal)(scope, params);\n        } else {\n          return $parse(attrVal)(scope);\n        }\n      } catch (e) {\n        // hangle string value without single qoute\n        if (name.search(/min|max|pattern/i)) {\n          return attrVal;\n        } else {\n          throw e;\n        }\n      }\n    } else {\n      return attrVal;\n    }\n  };\n\n  upload.shouldUpdateOn = function (type, attr, scope) {\n    var modelOptions = upload.attrGetter('ngfModelOptions', attr, scope);\n    if (modelOptions && modelOptions.updateOn) {\n      return modelOptions.updateOn.split(' ').indexOf(type) > -1;\n    }\n    return true;\n  };\n\n  upload.emptyPromise = function () {\n    var d = $q.defer();\n    var args = arguments;\n    $timeout(function () {\n      d.resolve.apply(d, args);\n    });\n    return d.promise;\n  };\n\n  upload.rejectPromise = function () {\n    var d = $q.defer();\n    var args = arguments;\n    $timeout(function () {\n      d.reject.apply(d, args);\n    });\n    return d.promise;\n  };\n\n  upload.happyPromise = function (promise, data) {\n    var d = $q.defer();\n    promise.then(function (result) {\n      d.resolve(result);\n    }, function (error) {\n      $timeout(function () {\n        throw error;\n      });\n      d.resolve(data);\n    });\n    return d.promise;\n  };\n\n  function applyExifRotations(files, attr, scope) {\n    var promises = [upload.emptyPromise()];\n    angular.forEach(files, function (f, i) {\n      if (f.type.indexOf('image/jpeg') === 0 && upload.attrGetter('ngfFixOrientation', attr, scope, {$file: f})) {\n        promises.push(upload.happyPromise(upload.applyExifRotation(f), f).then(function (fixedFile) {\n          files.splice(i, 1, fixedFile);\n        }));\n      }\n    });\n    return $q.all(promises);\n  }\n\n  function resizeFile(files, attr, scope, ngModel) {\n    var resizeVal = upload.attrGetter('ngfResize', attr, scope);\n    if (!resizeVal || !upload.isResizeSupported() || !files.length) return upload.emptyPromise();\n    if (resizeVal instanceof Function) {\n      var defer = $q.defer();\n      return resizeVal(files).then(function (p) {\n        resizeWithParams(p, files, attr, scope, ngModel).then(function (r) {\n          defer.resolve(r);\n        }, function (e) {\n          defer.reject(e);\n        });\n      }, function (e) {\n        defer.reject(e);\n      });\n    } else {\n      return resizeWithParams(resizeVal, files, attr, scope, ngModel);\n    }\n  }\n\n  function resizeWithParams(params, files, attr, scope, ngModel) {\n    var promises = [upload.emptyPromise()];\n\n    function handleFile(f, i) {\n      if (f.type.indexOf('image') === 0) {\n        if (params.pattern && !upload.validatePattern(f, params.pattern)) return;\n        params.resizeIf = function (width, height) {\n          return upload.attrGetter('ngfResizeIf', attr, scope,\n            {$width: width, $height: height, $file: f});\n        };\n        var promise = upload.resize(f, params);\n        promises.push(promise);\n        promise.then(function (resizedFile) {\n          files.splice(i, 1, resizedFile);\n        }, function (e) {\n          f.$error = 'resize';\n          (f.$errorMessages = (f.$errorMessages || {})).resize = true;\n          f.$errorParam = (e ? (e.message ? e.message : e) + ': ' : '') + (f && f.name);\n          ngModel.$ngfValidations.push({name: 'resize', valid: false});\n          upload.applyModelValidation(ngModel, files);\n        });\n      }\n    }\n\n    for (var i = 0; i < files.length; i++) {\n      handleFile(files[i], i);\n    }\n    return $q.all(promises);\n  }\n\n  upload.updateModel = function (ngModel, attr, scope, fileChange, files, evt, noDelay) {\n    function update(files, invalidFiles, newFiles, dupFiles, isSingleModel) {\n      attr.$$ngfPrevValidFiles = files;\n      attr.$$ngfPrevInvalidFiles = invalidFiles;\n      var file = files && files.length ? files[0] : null;\n      var invalidFile = invalidFiles && invalidFiles.length ? invalidFiles[0] : null;\n\n      if (ngModel) {\n        upload.applyModelValidation(ngModel, files);\n        ngModel.$setViewValue(isSingleModel ? file : files);\n      }\n\n      if (fileChange) {\n        $parse(fileChange)(scope, {\n          $files: files,\n          $file: file,\n          $newFiles: newFiles,\n          $duplicateFiles: dupFiles,\n          $invalidFiles: invalidFiles,\n          $invalidFile: invalidFile,\n          $event: evt\n        });\n      }\n\n      var invalidModel = upload.attrGetter('ngfModelInvalid', attr);\n      if (invalidModel) {\n        $timeout(function () {\n          $parse(invalidModel).assign(scope, isSingleModel ? invalidFile : invalidFiles);\n        });\n      }\n      $timeout(function () {\n        // scope apply changes\n      });\n    }\n\n    var allNewFiles, dupFiles = [], prevValidFiles, prevInvalidFiles,\n      invalids = [], valids = [];\n\n    function removeDuplicates() {\n      function equals(f1, f2) {\n        return f1.name === f2.name && (f1.$ngfOrigSize || f1.size) === (f2.$ngfOrigSize || f2.size) &&\n          f1.type === f2.type;\n      }\n\n      function isInPrevFiles(f) {\n        var j;\n        for (j = 0; j < prevValidFiles.length; j++) {\n          if (equals(f, prevValidFiles[j])) {\n            return true;\n          }\n        }\n        for (j = 0; j < prevInvalidFiles.length; j++) {\n          if (equals(f, prevInvalidFiles[j])) {\n            return true;\n          }\n        }\n        return false;\n      }\n\n      if (files) {\n        allNewFiles = [];\n        dupFiles = [];\n        for (var i = 0; i < files.length; i++) {\n          if (isInPrevFiles(files[i])) {\n            dupFiles.push(files[i]);\n          } else {\n            allNewFiles.push(files[i]);\n          }\n        }\n      }\n    }\n\n    function toArray(v) {\n      return angular.isArray(v) ? v : [v];\n    }\n\n    function resizeAndUpdate() {\n      function updateModel() {\n        $timeout(function () {\n          update(keep ? prevValidFiles.concat(valids) : valids,\n            keep ? prevInvalidFiles.concat(invalids) : invalids,\n            files, dupFiles, isSingleModel);\n        }, options && options.debounce ? options.debounce.change || options.debounce : 0);\n      }\n\n      var resizingFiles = validateAfterResize ? allNewFiles : valids;\n      resizeFile(resizingFiles, attr, scope, ngModel).then(function () {\n        if (validateAfterResize) {\n          upload.validate(allNewFiles, keep ? prevValidFiles.length : 0, ngModel, attr, scope)\n            .then(function (validationResult) {\n              valids = validationResult.validsFiles;\n              invalids = validationResult.invalidsFiles;\n              updateModel();\n            });\n        } else {\n          updateModel();\n        }\n      }, function () {\n        for (var i = 0; i < resizingFiles.length; i++) {\n          var f = resizingFiles[i];\n          if (f.$error === 'resize') {\n            var index = valids.indexOf(f);\n            if (index > -1) {\n              valids.splice(index, 1);\n              invalids.push(f);\n            }\n            updateModel();\n          }\n        }\n      });\n    }\n\n    prevValidFiles = attr.$$ngfPrevValidFiles || [];\n    prevInvalidFiles = attr.$$ngfPrevInvalidFiles || [];\n    if (ngModel && ngModel.$modelValue) {\n      prevValidFiles = toArray(ngModel.$modelValue);\n    }\n\n    var keep = upload.attrGetter('ngfKeep', attr, scope);\n    allNewFiles = (files || []).slice(0);\n    if (keep === 'distinct' || upload.attrGetter('ngfKeepDistinct', attr, scope) === true) {\n      removeDuplicates(attr, scope);\n    }\n\n    var isSingleModel = !keep && !upload.attrGetter('ngfMultiple', attr, scope) && !upload.attrGetter('multiple', attr);\n\n    if (keep && !allNewFiles.length) return;\n\n    upload.attrGetter('ngfBeforeModelChange', attr, scope, {\n      $files: files,\n      $file: files && files.length ? files[0] : null,\n      $newFiles: allNewFiles,\n      $duplicateFiles: dupFiles,\n      $event: evt\n    });\n\n    var validateAfterResize = upload.attrGetter('ngfValidateAfterResize', attr, scope);\n\n    var options = upload.attrGetter('ngfModelOptions', attr, scope);\n    upload.validate(allNewFiles, keep ? prevValidFiles.length : 0, ngModel, attr, scope)\n      .then(function (validationResult) {\n      if (noDelay) {\n        update(allNewFiles, [], files, dupFiles, isSingleModel);\n      } else {\n        if ((!options || !options.allowInvalid) && !validateAfterResize) {\n          valids = validationResult.validFiles;\n          invalids = validationResult.invalidFiles;\n        } else {\n          valids = allNewFiles;\n        }\n        if (upload.attrGetter('ngfFixOrientation', attr, scope) && upload.isExifSupported()) {\n          applyExifRotations(valids, attr, scope).then(function () {\n            resizeAndUpdate();\n          });\n        } else {\n          resizeAndUpdate();\n        }\n      }\n    });\n  };\n\n  return upload;\n}]);\n\nngFileUpload.directive('ngfSelect', ['$parse', '$timeout', '$compile', 'Upload', function ($parse, $timeout, $compile, Upload) {\n  var generatedElems = [];\n\n  function isDelayedClickSupported(ua) {\n    // fix for android native browser < 4.4 and safari windows\n    var m = ua.match(/Android[^\\d]*(\\d+)\\.(\\d+)/);\n    if (m && m.length > 2) {\n      var v = Upload.defaults.androidFixMinorVersion || 4;\n      return parseInt(m[1]) < 4 || (parseInt(m[1]) === v && parseInt(m[2]) < v);\n    }\n\n    // safari on windows\n    return ua.indexOf('Chrome') === -1 && /.*Windows.*Safari.*/.test(ua);\n  }\n\n  function linkFileSelect(scope, elem, attr, ngModel, $parse, $timeout, $compile, upload) {\n    /** @namespace attr.ngfSelect */\n    /** @namespace attr.ngfChange */\n    /** @namespace attr.ngModel */\n    /** @namespace attr.ngfModelOptions */\n    /** @namespace attr.ngfMultiple */\n    /** @namespace attr.ngfCapture */\n    /** @namespace attr.ngfValidate */\n    /** @namespace attr.ngfKeep */\n    var attrGetter = function (name, scope) {\n      return upload.attrGetter(name, attr, scope);\n    };\n\n    function isInputTypeFile() {\n      return elem[0].tagName.toLowerCase() === 'input' && attr.type && attr.type.toLowerCase() === 'file';\n    }\n\n    function fileChangeAttr() {\n      return attrGetter('ngfChange') || attrGetter('ngfSelect');\n    }\n\n    function changeFn(evt) {\n      if (upload.shouldUpdateOn('change', attr, scope)) {\n        var fileList = evt.__files_ || (evt.target && evt.target.files), files = [];\n        /* Handle duplicate call in  IE11 */\n        if (!fileList) return;\n        for (var i = 0; i < fileList.length; i++) {\n          files.push(fileList[i]);\n        }\n        upload.updateModel(ngModel, attr, scope, fileChangeAttr(),\n          files.length ? files : null, evt);\n      }\n    }\n\n    upload.registerModelChangeValidator(ngModel, attr, scope);\n\n    var unwatches = [];\n    if (attrGetter('ngfMultiple')) {\n      unwatches.push(scope.$watch(attrGetter('ngfMultiple'), function () {\n        fileElem.attr('multiple', attrGetter('ngfMultiple', scope));\n      }));\n    }\n    if (attrGetter('ngfCapture')) {\n      unwatches.push(scope.$watch(attrGetter('ngfCapture'), function () {\n        fileElem.attr('capture', attrGetter('ngfCapture', scope));\n      }));\n    }\n    if (attrGetter('ngfAccept')) {\n      unwatches.push(scope.$watch(attrGetter('ngfAccept'), function () {\n        fileElem.attr('accept', attrGetter('ngfAccept', scope));\n      }));\n    }\n    unwatches.push(attr.$observe('accept', function () {\n      fileElem.attr('accept', attrGetter('accept'));\n    }));\n    function bindAttrToFileInput(fileElem, label) {\n      function updateId(val) {\n        fileElem.attr('id', 'ngf-' + val);\n        label.attr('id', 'ngf-label-' + val);\n      }\n\n      for (var i = 0; i < elem[0].attributes.length; i++) {\n        var attribute = elem[0].attributes[i];\n        if (attribute.name !== 'type' && attribute.name !== 'class' && attribute.name !== 'style') {\n          if (attribute.name === 'id') {\n            updateId(attribute.value);\n            unwatches.push(attr.$observe('id', updateId));\n          } else {\n            fileElem.attr(attribute.name, (!attribute.value && (attribute.name === 'required' ||\n            attribute.name === 'multiple')) ? attribute.name : attribute.value);\n          }\n        }\n      }\n    }\n\n    function createFileInput() {\n      if (isInputTypeFile()) {\n        return elem;\n      }\n\n      var fileElem = angular.element('<input type=\"file\">');\n\n      var label = angular.element('<label>upload</label>');\n      label.css('visibility', 'hidden').css('position', 'absolute').css('overflow', 'hidden')\n        .css('width', '0px').css('height', '0px').css('border', 'none')\n        .css('margin', '0px').css('padding', '0px').attr('tabindex', '-1');\n      bindAttrToFileInput(fileElem, label);\n\n      generatedElems.push({el: elem, ref: label});\n\n      document.body.appendChild(label.append(fileElem)[0]);\n\n      return fileElem;\n    }\n\n    function clickHandler(evt) {\n      if (elem.attr('disabled')) return false;\n      if (attrGetter('ngfSelectDisabled', scope)) return;\n\n      var r = detectSwipe(evt);\n      // prevent the click if it is a swipe\n      if (r != null) return r;\n\n      resetModel(evt);\n\n      // fix for md when the element is removed from the DOM and added back #460\n      try {\n        if (!isInputTypeFile() && !document.body.contains(fileElem[0])) {\n          generatedElems.push({el: elem, ref: fileElem.parent()});\n          document.body.appendChild(fileElem.parent()[0]);\n          fileElem.bind('change', changeFn);\n        }\n      } catch (e) {/*ignore*/\n      }\n\n      if (isDelayedClickSupported(navigator.userAgent)) {\n        setTimeout(function () {\n          fileElem[0].click();\n        }, 0);\n      } else {\n        fileElem[0].click();\n      }\n\n      return false;\n    }\n\n\n    var initialTouchStartY = 0;\n    var initialTouchStartX = 0;\n\n    function detectSwipe(evt) {\n      var touches = evt.changedTouches || (evt.originalEvent && evt.originalEvent.changedTouches);\n      if (touches) {\n        if (evt.type === 'touchstart') {\n          initialTouchStartX = touches[0].clientX;\n          initialTouchStartY = touches[0].clientY;\n          return true; // don't block event default\n        } else {\n          // prevent scroll from triggering event\n          if (evt.type === 'touchend') {\n            var currentX = touches[0].clientX;\n            var currentY = touches[0].clientY;\n            if ((Math.abs(currentX - initialTouchStartX) > 20) ||\n              (Math.abs(currentY - initialTouchStartY) > 20)) {\n              evt.stopPropagation();\n              evt.preventDefault();\n              return false;\n            }\n          }\n          return true;\n        }\n      }\n    }\n\n    var fileElem = elem;\n\n    function resetModel(evt) {\n      if (upload.shouldUpdateOn('click', attr, scope) && fileElem.val()) {\n        fileElem.val(null);\n        upload.updateModel(ngModel, attr, scope, fileChangeAttr(), null, evt, true);\n      }\n    }\n\n    if (!isInputTypeFile()) {\n      fileElem = createFileInput();\n    }\n    fileElem.bind('change', changeFn);\n\n    if (!isInputTypeFile()) {\n      elem.bind('click touchstart touchend', clickHandler);\n    } else {\n      elem.bind('click', resetModel);\n    }\n\n    function ie10SameFileSelectFix(evt) {\n      if (fileElem && !fileElem.attr('__ngf_ie10_Fix_')) {\n        if (!fileElem[0].parentNode) {\n          fileElem = null;\n          return;\n        }\n        evt.preventDefault();\n        evt.stopPropagation();\n        fileElem.unbind('click');\n        var clone = fileElem.clone();\n        fileElem.replaceWith(clone);\n        fileElem = clone;\n        fileElem.attr('__ngf_ie10_Fix_', 'true');\n        fileElem.bind('change', changeFn);\n        fileElem.bind('click', ie10SameFileSelectFix);\n        fileElem[0].click();\n        return false;\n      } else {\n        fileElem.removeAttr('__ngf_ie10_Fix_');\n      }\n    }\n\n    if (navigator.appVersion.indexOf('MSIE 10') !== -1) {\n      fileElem.bind('click', ie10SameFileSelectFix);\n    }\n\n    if (ngModel) ngModel.$formatters.push(function (val) {\n      if (val == null || val.length === 0) {\n        if (fileElem.val()) {\n          fileElem.val(null);\n        }\n      }\n      return val;\n    });\n\n    scope.$on('$destroy', function () {\n      if (!isInputTypeFile()) fileElem.parent().remove();\n      angular.forEach(unwatches, function (unwatch) {\n        unwatch();\n      });\n    });\n\n    $timeout(function () {\n      for (var i = 0; i < generatedElems.length; i++) {\n        var g = generatedElems[i];\n        if (!document.body.contains(g.el[0])) {\n          generatedElems.splice(i, 1);\n          g.ref.remove();\n        }\n      }\n    });\n\n    if (window.FileAPI && window.FileAPI.ngfFixIE) {\n      window.FileAPI.ngfFixIE(elem, fileElem, changeFn);\n    }\n  }\n\n  return {\n    restrict: 'AEC',\n    require: '?ngModel',\n    link: function (scope, elem, attr, ngModel) {\n      linkFileSelect(scope, elem, attr, ngModel, $parse, $timeout, $compile, Upload);\n    }\n  };\n}]);\n\n(function () {\n\n  ngFileUpload.service('UploadDataUrl', ['UploadBase', '$timeout', '$q', function (UploadBase, $timeout, $q) {\n    var upload = UploadBase;\n    upload.base64DataUrl = function (file) {\n      if (angular.isArray(file)) {\n        var d = $q.defer(), count = 0;\n        angular.forEach(file, function (f) {\n          upload.dataUrl(f, true)['finally'](function () {\n            count++;\n            if (count === file.length) {\n              var urls = [];\n              angular.forEach(file, function (ff) {\n                urls.push(ff.$ngfDataUrl);\n              });\n              d.resolve(urls, file);\n            }\n          });\n        });\n        return d.promise;\n      } else {\n        return upload.dataUrl(file, true);\n      }\n    };\n    upload.dataUrl = function (file, disallowObjectUrl) {\n      if (!file) return upload.emptyPromise(file, file);\n      if ((disallowObjectUrl && file.$ngfDataUrl != null) || (!disallowObjectUrl && file.$ngfBlobUrl != null)) {\n        return upload.emptyPromise(disallowObjectUrl ? file.$ngfDataUrl : file.$ngfBlobUrl, file);\n      }\n      var p = disallowObjectUrl ? file.$$ngfDataUrlPromise : file.$$ngfBlobUrlPromise;\n      if (p) return p;\n\n      var deferred = $q.defer();\n      $timeout(function () {\n        if (window.FileReader && file &&\n          (!window.FileAPI || navigator.userAgent.indexOf('MSIE 8') === -1 || file.size < 20000) &&\n          (!window.FileAPI || navigator.userAgent.indexOf('MSIE 9') === -1 || file.size < 4000000)) {\n          //prefer URL.createObjectURL for handling refrences to files of all sizes\n          //since it doesnt build a large string in memory\n          var URL = window.URL || window.webkitURL;\n          if (URL && URL.createObjectURL && !disallowObjectUrl) {\n            var url;\n            try {\n              url = URL.createObjectURL(file);\n            } catch (e) {\n              $timeout(function () {\n                file.$ngfBlobUrl = '';\n                deferred.reject();\n              });\n              return;\n            }\n            $timeout(function () {\n              file.$ngfBlobUrl = url;\n              if (url) {\n                deferred.resolve(url, file);\n                upload.blobUrls = upload.blobUrls || [];\n                upload.blobUrlsTotalSize = upload.blobUrlsTotalSize || 0;\n                upload.blobUrls.push({url: url, size: file.size});\n                upload.blobUrlsTotalSize += file.size || 0;\n                var maxMemory = upload.defaults.blobUrlsMaxMemory || 268435456;\n                var maxLength = upload.defaults.blobUrlsMaxQueueSize || 200;\n                while ((upload.blobUrlsTotalSize > maxMemory || upload.blobUrls.length > maxLength) && upload.blobUrls.length > 1) {\n                  var obj = upload.blobUrls.splice(0, 1)[0];\n                  URL.revokeObjectURL(obj.url);\n                  upload.blobUrlsTotalSize -= obj.size;\n                }\n              }\n            });\n          } else {\n            var fileReader = new FileReader();\n            fileReader.onload = function (e) {\n              $timeout(function () {\n                file.$ngfDataUrl = e.target.result;\n                deferred.resolve(e.target.result, file);\n                $timeout(function () {\n                  delete file.$ngfDataUrl;\n                }, 1000);\n              });\n            };\n            fileReader.onerror = function () {\n              $timeout(function () {\n                file.$ngfDataUrl = '';\n                deferred.reject();\n              });\n            };\n            fileReader.readAsDataURL(file);\n          }\n        } else {\n          $timeout(function () {\n            file[disallowObjectUrl ? '$ngfDataUrl' : '$ngfBlobUrl'] = '';\n            deferred.reject();\n          });\n        }\n      });\n\n      if (disallowObjectUrl) {\n        p = file.$$ngfDataUrlPromise = deferred.promise;\n      } else {\n        p = file.$$ngfBlobUrlPromise = deferred.promise;\n      }\n      p['finally'](function () {\n        delete file[disallowObjectUrl ? '$$ngfDataUrlPromise' : '$$ngfBlobUrlPromise'];\n      });\n      return p;\n    };\n    return upload;\n  }]);\n\n  function getTagType(el) {\n    if (el.tagName.toLowerCase() === 'img') return 'image';\n    if (el.tagName.toLowerCase() === 'audio') return 'audio';\n    if (el.tagName.toLowerCase() === 'video') return 'video';\n    return /./;\n  }\n\n  function linkFileDirective(Upload, $timeout, scope, elem, attr, directiveName, resizeParams, isBackground) {\n    function constructDataUrl(file) {\n      var disallowObjectUrl = Upload.attrGetter('ngfNoObjectUrl', attr, scope);\n      Upload.dataUrl(file, disallowObjectUrl)['finally'](function () {\n        $timeout(function () {\n          var src = (disallowObjectUrl ? file.$ngfDataUrl : file.$ngfBlobUrl) || file.$ngfDataUrl;\n          if (isBackground) {\n            elem.css('background-image', 'url(\\'' + (src || '') + '\\')');\n          } else {\n            elem.attr('src', src);\n          }\n          if (src) {\n            elem.removeClass('ng-hide');\n          } else {\n            elem.addClass('ng-hide');\n          }\n        });\n      });\n    }\n\n    $timeout(function () {\n      var unwatch = scope.$watch(attr[directiveName], function (file) {\n        var size = resizeParams;\n        if (directiveName === 'ngfThumbnail') {\n          if (!size) {\n            size = {\n              width: elem[0].naturalWidth || elem[0].clientWidth,\n              height: elem[0].naturalHeight || elem[0].clientHeight\n            };\n          }\n          if (size.width === 0 && window.getComputedStyle) {\n            var style = getComputedStyle(elem[0]);\n            if (style.width && style.width.indexOf('px') > -1 && style.height && style.height.indexOf('px') > -1) {\n              size = {\n                width: parseInt(style.width.slice(0, -2)),\n                height: parseInt(style.height.slice(0, -2))\n              };\n            }\n          }\n        }\n\n        if (angular.isString(file)) {\n          elem.removeClass('ng-hide');\n          if (isBackground) {\n            return elem.css('background-image', 'url(\\'' + file + '\\')');\n          } else {\n            return elem.attr('src', file);\n          }\n        }\n        if (file && file.type && file.type.search(getTagType(elem[0])) === 0 &&\n          (!isBackground || file.type.indexOf('image') === 0)) {\n          if (size && Upload.isResizeSupported()) {\n            size.resizeIf = function (width, height) {\n              return Upload.attrGetter('ngfResizeIf', attr, scope,\n                {$width: width, $height: height, $file: file});\n            };\n            Upload.resize(file, size).then(\n              function (f) {\n                constructDataUrl(f);\n              }, function (e) {\n                throw e;\n              }\n            );\n          } else {\n            constructDataUrl(file);\n          }\n        } else {\n          elem.addClass('ng-hide');\n        }\n      });\n\n      scope.$on('$destroy', function () {\n        unwatch();\n      });\n    });\n  }\n\n\n  /** @namespace attr.ngfSrc */\n  /** @namespace attr.ngfNoObjectUrl */\n  ngFileUpload.directive('ngfSrc', ['Upload', '$timeout', function (Upload, $timeout) {\n    return {\n      restrict: 'AE',\n      link: function (scope, elem, attr) {\n        linkFileDirective(Upload, $timeout, scope, elem, attr, 'ngfSrc',\n          Upload.attrGetter('ngfResize', attr, scope), false);\n      }\n    };\n  }]);\n\n  /** @namespace attr.ngfBackground */\n  /** @namespace attr.ngfNoObjectUrl */\n  ngFileUpload.directive('ngfBackground', ['Upload', '$timeout', function (Upload, $timeout) {\n    return {\n      restrict: 'AE',\n      link: function (scope, elem, attr) {\n        linkFileDirective(Upload, $timeout, scope, elem, attr, 'ngfBackground',\n          Upload.attrGetter('ngfResize', attr, scope), true);\n      }\n    };\n  }]);\n\n  /** @namespace attr.ngfThumbnail */\n  /** @namespace attr.ngfAsBackground */\n  /** @namespace attr.ngfSize */\n  /** @namespace attr.ngfNoObjectUrl */\n  ngFileUpload.directive('ngfThumbnail', ['Upload', '$timeout', function (Upload, $timeout) {\n    return {\n      restrict: 'AE',\n      link: function (scope, elem, attr) {\n        var size = Upload.attrGetter('ngfSize', attr, scope);\n        linkFileDirective(Upload, $timeout, scope, elem, attr, 'ngfThumbnail', size,\n          Upload.attrGetter('ngfAsBackground', attr, scope));\n      }\n    };\n  }]);\n\n  ngFileUpload.config(['$compileProvider', function ($compileProvider) {\n    if ($compileProvider.imgSrcSanitizationWhitelist) $compileProvider.imgSrcSanitizationWhitelist(/^\\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/);\n    if ($compileProvider.aHrefSanitizationWhitelist) $compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/);\n  }]);\n\n  ngFileUpload.filter('ngfDataUrl', ['UploadDataUrl', '$sce', function (UploadDataUrl, $sce) {\n    return function (file, disallowObjectUrl, trustedUrl) {\n      if (angular.isString(file)) {\n        return $sce.trustAsResourceUrl(file);\n      }\n      var src = file && ((disallowObjectUrl ? file.$ngfDataUrl : file.$ngfBlobUrl) || file.$ngfDataUrl);\n      if (file && !src) {\n        if (!file.$ngfDataUrlFilterInProgress && angular.isObject(file)) {\n          file.$ngfDataUrlFilterInProgress = true;\n          UploadDataUrl.dataUrl(file, disallowObjectUrl);\n        }\n        return '';\n      }\n      if (file) delete file.$ngfDataUrlFilterInProgress;\n      return (file && src ? (trustedUrl ? $sce.trustAsResourceUrl(src) : src) : file) || '';\n    };\n  }]);\n\n})();\n\nngFileUpload.service('UploadValidate', ['UploadDataUrl', '$q', '$timeout', function (UploadDataUrl, $q, $timeout) {\n  var upload = UploadDataUrl;\n\n  function globStringToRegex(str) {\n    var regexp = '', excludes = [];\n    if (str.length > 2 && str[0] === '/' && str[str.length - 1] === '/') {\n      regexp = str.substring(1, str.length - 1);\n    } else {\n      var split = str.split(',');\n      if (split.length > 1) {\n        for (var i = 0; i < split.length; i++) {\n          var r = globStringToRegex(split[i]);\n          if (r.regexp) {\n            regexp += '(' + r.regexp + ')';\n            if (i < split.length - 1) {\n              regexp += '|';\n            }\n          } else {\n            excludes = excludes.concat(r.excludes);\n          }\n        }\n      } else {\n        if (str.indexOf('!') === 0) {\n          excludes.push('^((?!' + globStringToRegex(str.substring(1)).regexp + ').)*$');\n        } else {\n          if (str.indexOf('.') === 0) {\n            str = '*' + str;\n          }\n          regexp = '^' + str.replace(new RegExp('[.\\\\\\\\+*?\\\\[\\\\^\\\\]$(){}=!<>|:\\\\-]', 'g'), '\\\\$&') + '$';\n          regexp = regexp.replace(/\\\\\\*/g, '.*').replace(/\\\\\\?/g, '.');\n        }\n      }\n    }\n    return {regexp: regexp, excludes: excludes};\n  }\n\n  upload.validatePattern = function (file, val) {\n    if (!val) {\n      return true;\n    }\n    var pattern = globStringToRegex(val), valid = true;\n    if (pattern.regexp && pattern.regexp.length) {\n      var regexp = new RegExp(pattern.regexp, 'i');\n      valid = (file.type != null && regexp.test(file.type)) ||\n        (file.name != null && regexp.test(file.name));\n    }\n    var len = pattern.excludes.length;\n    while (len--) {\n      var exclude = new RegExp(pattern.excludes[len], 'i');\n      valid = valid && (file.type == null || exclude.test(file.type)) &&\n        (file.name == null || exclude.test(file.name));\n    }\n    return valid;\n  };\n\n  upload.ratioToFloat = function (val) {\n    var r = val.toString(), xIndex = r.search(/[x:]/i);\n    if (xIndex > -1) {\n      r = parseFloat(r.substring(0, xIndex)) / parseFloat(r.substring(xIndex + 1));\n    } else {\n      r = parseFloat(r);\n    }\n    return r;\n  };\n\n  upload.registerModelChangeValidator = function (ngModel, attr, scope) {\n    if (ngModel) {\n      ngModel.$formatters.push(function (files) {\n        if (ngModel.$dirty) {\n          var filesArray = files;\n          if (files && !angular.isArray(files)) {\n            filesArray = [files];\n          }\n          upload.validate(filesArray, 0, ngModel, attr, scope).then(function () {\n            upload.applyModelValidation(ngModel, filesArray);\n          });\n        }\n        return files;\n      });\n    }\n  };\n\n  function markModelAsDirty(ngModel, files) {\n    if (files != null && !ngModel.$dirty) {\n      if (ngModel.$setDirty) {\n        ngModel.$setDirty();\n      } else {\n        ngModel.$dirty = true;\n      }\n    }\n  }\n\n  upload.applyModelValidation = function (ngModel, files) {\n    markModelAsDirty(ngModel, files);\n    angular.forEach(ngModel.$ngfValidations, function (validation) {\n      ngModel.$setValidity(validation.name, validation.valid);\n    });\n  };\n\n  upload.getValidationAttr = function (attr, scope, name, validationName, file) {\n    var dName = 'ngf' + name[0].toUpperCase() + name.substr(1);\n    var val = upload.attrGetter(dName, attr, scope, {$file: file});\n    if (val == null) {\n      val = upload.attrGetter('ngfValidate', attr, scope, {$file: file});\n      if (val) {\n        var split = (validationName || name).split('.');\n        val = val[split[0]];\n        if (split.length > 1) {\n          val = val && val[split[1]];\n        }\n      }\n    }\n    return val;\n  };\n\n  upload.validate = function (files, prevLength, ngModel, attr, scope) {\n    ngModel = ngModel || {};\n    ngModel.$ngfValidations = ngModel.$ngfValidations || [];\n\n    angular.forEach(ngModel.$ngfValidations, function (v) {\n      v.valid = true;\n    });\n\n    var attrGetter = function (name, params) {\n      return upload.attrGetter(name, attr, scope, params);\n    };\n\n    var ignoredErrors = (upload.attrGetter('ngfIgnoreInvalid', attr, scope) || '').split(' ');\n    var runAllValidation = upload.attrGetter('ngfRunAllValidations', attr, scope);\n\n    if (files == null || files.length === 0) {\n      return upload.emptyPromise({'validFiles': files, 'invalidFiles': []});\n    }\n\n    files = files.length === undefined ? [files] : files.slice(0);\n    var invalidFiles = [];\n\n    function validateSync(name, validationName, fn) {\n      if (files) {\n        var i = files.length, valid = null;\n        while (i--) {\n          var file = files[i];\n          if (file) {\n            var val = upload.getValidationAttr(attr, scope, name, validationName, file);\n            if (val != null) {\n              if (!fn(file, val, i)) {\n                if (ignoredErrors.indexOf(name) === -1) {\n                  file.$error = name;\n                  (file.$errorMessages = (file.$errorMessages || {}))[name] = true;\n                  file.$errorParam = val;\n                  if (invalidFiles.indexOf(file) === -1) {\n                    invalidFiles.push(file);\n                  }\n                  if (!runAllValidation) {\n                    files.splice(i, 1);\n                  }\n                  valid = false;\n                } else {\n                  files.splice(i, 1);\n                }\n              }\n            }\n          }\n        }\n        if (valid !== null) {\n          ngModel.$ngfValidations.push({name: name, valid: valid});\n        }\n      }\n    }\n\n    validateSync('pattern', null, upload.validatePattern);\n    validateSync('minSize', 'size.min', function (file, val) {\n      return file.size + 0.1 >= upload.translateScalars(val);\n    });\n    validateSync('maxSize', 'size.max', function (file, val) {\n      return file.size - 0.1 <= upload.translateScalars(val);\n    });\n    var totalSize = 0;\n    validateSync('maxTotalSize', null, function (file, val) {\n      totalSize += file.size;\n      if (totalSize > upload.translateScalars(val)) {\n        files.splice(0, files.length);\n        return false;\n      }\n      return true;\n    });\n\n    validateSync('validateFn', null, function (file, r) {\n      return r === true || r === null || r === '';\n    });\n\n    if (!files.length) {\n      return upload.emptyPromise({'validFiles': [], 'invalidFiles': invalidFiles});\n    }\n\n    function validateAsync(name, validationName, type, asyncFn, fn) {\n      function resolveResult(defer, file, val) {\n        function resolveInternal(fn) {\n          if (fn()) {\n            if (ignoredErrors.indexOf(name) === -1) {\n              file.$error = name;\n              (file.$errorMessages = (file.$errorMessages || {}))[name] = true;\n              file.$errorParam = val;\n              if (invalidFiles.indexOf(file) === -1) {\n                invalidFiles.push(file);\n              }\n              if (!runAllValidation) {\n                var i = files.indexOf(file);\n                if (i > -1) files.splice(i, 1);\n              }\n              defer.resolve(false);\n            } else {\n              var j = files.indexOf(file);\n              if (j > -1) files.splice(j, 1);\n              defer.resolve(true);\n            }\n          } else {\n            defer.resolve(true);\n          }\n        }\n\n        if (val != null) {\n          asyncFn(file, val).then(function (d) {\n            resolveInternal(function () {\n              return !fn(d, val);\n            });\n          }, function () {\n            resolveInternal(function () {\n              return attrGetter('ngfValidateForce', {$file: file});\n            });\n          });\n        } else {\n          defer.resolve(true);\n        }\n      }\n\n      var promises = [upload.emptyPromise(true)];\n      if (files) {\n        files = files.length === undefined ? [files] : files;\n        angular.forEach(files, function (file) {\n          var defer = $q.defer();\n          promises.push(defer.promise);\n          if (type && (file.type == null || file.type.search(type) !== 0)) {\n            defer.resolve(true);\n            return;\n          }\n          if (name === 'dimensions' && upload.attrGetter('ngfDimensions', attr) != null) {\n            upload.imageDimensions(file).then(function (d) {\n              resolveResult(defer, file,\n                attrGetter('ngfDimensions', {$file: file, $width: d.width, $height: d.height}));\n            }, function () {\n              defer.resolve(false);\n            });\n          } else if (name === 'duration' && upload.attrGetter('ngfDuration', attr) != null) {\n            upload.mediaDuration(file).then(function (d) {\n              resolveResult(defer, file,\n                attrGetter('ngfDuration', {$file: file, $duration: d}));\n            }, function () {\n              defer.resolve(false);\n            });\n          } else {\n            resolveResult(defer, file,\n              upload.getValidationAttr(attr, scope, name, validationName, file));\n          }\n        });\n      }\n      var deffer = $q.defer();\n      $q.all(promises).then(function (values) {\n        var isValid = true;\n        for (var i = 0; i < values.length; i++) {\n          if (!values[i]) {\n            isValid = false;\n            break;\n          }\n        }\n        ngModel.$ngfValidations.push({name: name, valid: isValid});\n        deffer.resolve(isValid);\n      });\n      return deffer.promise;\n    }\n\n    var deffer = $q.defer();\n    var promises = [];\n\n    promises.push(validateAsync('maxHeight', 'height.max', /image/,\n      this.imageDimensions, function (d, val) {\n        return d.height <= val;\n      }));\n    promises.push(validateAsync('minHeight', 'height.min', /image/,\n      this.imageDimensions, function (d, val) {\n        return d.height >= val;\n      }));\n    promises.push(validateAsync('maxWidth', 'width.max', /image/,\n      this.imageDimensions, function (d, val) {\n        return d.width <= val;\n      }));\n    promises.push(validateAsync('minWidth', 'width.min', /image/,\n      this.imageDimensions, function (d, val) {\n        return d.width >= val;\n      }));\n    promises.push(validateAsync('dimensions', null, /image/,\n      function (file, val) {\n        return upload.emptyPromise(val);\n      }, function (r) {\n        return r;\n      }));\n    promises.push(validateAsync('ratio', null, /image/,\n      this.imageDimensions, function (d, val) {\n        var split = val.toString().split(','), valid = false;\n        for (var i = 0; i < split.length; i++) {\n          if (Math.abs((d.width / d.height) - upload.ratioToFloat(split[i])) < 0.01) {\n            valid = true;\n          }\n        }\n        return valid;\n      }));\n    promises.push(validateAsync('maxRatio', 'ratio.max', /image/,\n      this.imageDimensions, function (d, val) {\n        return (d.width / d.height) - upload.ratioToFloat(val) < 0.0001;\n      }));\n    promises.push(validateAsync('minRatio', 'ratio.min', /image/,\n      this.imageDimensions, function (d, val) {\n        return (d.width / d.height) - upload.ratioToFloat(val) > -0.0001;\n      }));\n    promises.push(validateAsync('maxDuration', 'duration.max', /audio|video/,\n      this.mediaDuration, function (d, val) {\n        return d <= upload.translateScalars(val);\n      }));\n    promises.push(validateAsync('minDuration', 'duration.min', /audio|video/,\n      this.mediaDuration, function (d, val) {\n        return d >= upload.translateScalars(val);\n      }));\n    promises.push(validateAsync('duration', null, /audio|video/,\n      function (file, val) {\n        return upload.emptyPromise(val);\n      }, function (r) {\n        return r;\n      }));\n\n    promises.push(validateAsync('validateAsyncFn', null, null,\n      function (file, val) {\n        return val;\n      }, function (r) {\n        return r === true || r === null || r === '';\n      }));\n\n    $q.all(promises).then(function () {\n\n      if (runAllValidation) {\n        for (var i = 0; i < files.length; i++) {\n          var file = files[i];\n          if (file.$error) {\n            files.splice(i--, 1);\n          }\n        }\n      }\n\n      runAllValidation = false;\n      validateSync('maxFiles', null, function (file, val, i) {\n        return prevLength + i < val;\n      });\n\n      deffer.resolve({'validFiles': files, 'invalidFiles': invalidFiles});\n    });\n    return deffer.promise;\n  };\n\n  upload.imageDimensions = function (file) {\n    if (file.$ngfWidth && file.$ngfHeight) {\n      var d = $q.defer();\n      $timeout(function () {\n        d.resolve({width: file.$ngfWidth, height: file.$ngfHeight});\n      });\n      return d.promise;\n    }\n    if (file.$ngfDimensionPromise) return file.$ngfDimensionPromise;\n\n    var deferred = $q.defer();\n    $timeout(function () {\n      if (file.type.indexOf('image') !== 0) {\n        deferred.reject('not image');\n        return;\n      }\n      upload.dataUrl(file).then(function (dataUrl) {\n        var img = angular.element('<img>').attr('src', dataUrl)\n          .css('visibility', 'hidden').css('position', 'fixed')\n          .css('max-width', 'none !important').css('max-height', 'none !important');\n\n        function success() {\n          var width = img[0].naturalWidth || img[0].clientWidth;\n          var height = img[0].naturalHeight || img[0].clientHeight;\n          img.remove();\n          file.$ngfWidth = width;\n          file.$ngfHeight = height;\n          deferred.resolve({width: width, height: height});\n        }\n\n        function error() {\n          img.remove();\n          deferred.reject('load error');\n        }\n\n        img.on('load', success);\n        img.on('error', error);\n\n        var secondsCounter = 0;\n        function checkLoadErrorInCaseOfNoCallback() {\n          $timeout(function () {\n            if (img[0].parentNode) {\n              if (img[0].clientWidth) {\n                success();\n              } else if (secondsCounter++ > 10) {\n                error();\n              } else {\n                checkLoadErrorInCaseOfNoCallback();\n              }\n            }\n          }, 1000);\n        }\n\n        checkLoadErrorInCaseOfNoCallback();\n\n        angular.element(document.getElementsByTagName('body')[0]).append(img);\n      }, function () {\n        deferred.reject('load error');\n      });\n    });\n\n    file.$ngfDimensionPromise = deferred.promise;\n    file.$ngfDimensionPromise['finally'](function () {\n      delete file.$ngfDimensionPromise;\n    });\n    return file.$ngfDimensionPromise;\n  };\n\n  upload.mediaDuration = function (file) {\n    if (file.$ngfDuration) {\n      var d = $q.defer();\n      $timeout(function () {\n        d.resolve(file.$ngfDuration);\n      });\n      return d.promise;\n    }\n    if (file.$ngfDurationPromise) return file.$ngfDurationPromise;\n\n    var deferred = $q.defer();\n    $timeout(function () {\n      if (file.type.indexOf('audio') !== 0 && file.type.indexOf('video') !== 0) {\n        deferred.reject('not media');\n        return;\n      }\n      upload.dataUrl(file).then(function (dataUrl) {\n        var el = angular.element(file.type.indexOf('audio') === 0 ? '<audio>' : '<video>')\n          .attr('src', dataUrl).css('visibility', 'none').css('position', 'fixed');\n\n        function success() {\n          var duration = el[0].duration;\n          file.$ngfDuration = duration;\n          el.remove();\n          deferred.resolve(duration);\n        }\n\n        function error() {\n          el.remove();\n          deferred.reject('load error');\n        }\n\n        el.on('loadedmetadata', success);\n        el.on('error', error);\n        var count = 0;\n\n        function checkLoadError() {\n          $timeout(function () {\n            if (el[0].parentNode) {\n              if (el[0].duration) {\n                success();\n              } else if (count > 10) {\n                error();\n              } else {\n                checkLoadError();\n              }\n            }\n          }, 1000);\n        }\n\n        checkLoadError();\n\n        angular.element(document.body).append(el);\n      }, function () {\n        deferred.reject('load error');\n      });\n    });\n\n    file.$ngfDurationPromise = deferred.promise;\n    file.$ngfDurationPromise['finally'](function () {\n      delete file.$ngfDurationPromise;\n    });\n    return file.$ngfDurationPromise;\n  };\n  return upload;\n}\n]);\n\nngFileUpload.service('UploadResize', ['UploadValidate', '$q', function (UploadValidate, $q) {\n  var upload = UploadValidate;\n\n  /**\n   * Conserve aspect ratio of the original region. Useful when shrinking/enlarging\n   * images to fit into a certain area.\n   * Source:  http://stackoverflow.com/a/14731922\n   *\n   * @param {Number} srcWidth Source area width\n   * @param {Number} srcHeight Source area height\n   * @param {Number} maxWidth Nestable area maximum available width\n   * @param {Number} maxHeight Nestable area maximum available height\n   * @return {Object} { width, height }\n   */\n  var calculateAspectRatioFit = function (srcWidth, srcHeight, maxWidth, maxHeight, centerCrop) {\n    var ratio = centerCrop ? Math.max(maxWidth / srcWidth, maxHeight / srcHeight) :\n      Math.min(maxWidth / srcWidth, maxHeight / srcHeight);\n    return {\n      width: srcWidth * ratio, height: srcHeight * ratio,\n      marginX: srcWidth * ratio - maxWidth, marginY: srcHeight * ratio - maxHeight\n    };\n  };\n\n  // Extracted from https://github.com/romelgomez/angular-firebase-image-upload/blob/master/app/scripts/fileUpload.js#L89\n  var resize = function (imagen, width, height, quality, type, ratio, centerCrop, resizeIf) {\n    var deferred = $q.defer();\n    var canvasElement = document.createElement('canvas');\n    var imageElement = document.createElement('img');\n    imageElement.setAttribute('style', 'visibility:hidden;position:fixed;z-index:-100000');\n    document.body.appendChild(imageElement);\n\n    imageElement.onload = function () {\n      var imgWidth = imageElement.width, imgHeight = imageElement.height;\n      imageElement.parentNode.removeChild(imageElement);\n      if (resizeIf != null && resizeIf(imgWidth, imgHeight) === false) {\n        deferred.reject('resizeIf');\n        return;\n      }\n      try {\n        if (ratio) {\n          var ratioFloat = upload.ratioToFloat(ratio);\n          var imgRatio = imgWidth / imgHeight;\n          if (imgRatio < ratioFloat) {\n            width = imgWidth;\n            height = width / ratioFloat;\n          } else {\n            height = imgHeight;\n            width = height * ratioFloat;\n          }\n        }\n        if (!width) {\n          width = imgWidth;\n        }\n        if (!height) {\n          height = imgHeight;\n        }\n        var dimensions = calculateAspectRatioFit(imgWidth, imgHeight, width, height, centerCrop);\n        canvasElement.width = Math.min(dimensions.width, width);\n        canvasElement.height = Math.min(dimensions.height, height);\n        var context = canvasElement.getContext('2d');\n        context.drawImage(imageElement,\n          Math.min(0, -dimensions.marginX / 2), Math.min(0, -dimensions.marginY / 2),\n          dimensions.width, dimensions.height);\n        deferred.resolve(canvasElement.toDataURL(type || 'image/WebP', quality || 0.934));\n      } catch (e) {\n        deferred.reject(e);\n      }\n    };\n    imageElement.onerror = function () {\n      imageElement.parentNode.removeChild(imageElement);\n      deferred.reject();\n    };\n    imageElement.src = imagen;\n    return deferred.promise;\n  };\n\n  upload.dataUrltoBlob = function (dataurl, name, origSize) {\n    var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\n      bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\n    while (n--) {\n      u8arr[n] = bstr.charCodeAt(n);\n    }\n    var blob = new window.Blob([u8arr], {type: mime});\n    blob.name = name;\n    blob.$ngfOrigSize = origSize;\n    return blob;\n  };\n\n  upload.isResizeSupported = function () {\n    var elem = document.createElement('canvas');\n    return window.atob && elem.getContext && elem.getContext('2d') && window.Blob;\n  };\n\n  if (upload.isResizeSupported()) {\n    // add name getter to the blob constructor prototype\n    Object.defineProperty(window.Blob.prototype, 'name', {\n      get: function () {\n        return this.$ngfName;\n      },\n      set: function (v) {\n        this.$ngfName = v;\n      },\n      configurable: true\n    });\n  }\n\n  upload.resize = function (file, options) {\n    if (file.type.indexOf('image') !== 0) return upload.emptyPromise(file);\n\n    var deferred = $q.defer();\n    upload.dataUrl(file, true).then(function (url) {\n      resize(url, options.width, options.height, options.quality, options.type || file.type,\n        options.ratio, options.centerCrop, options.resizeIf)\n        .then(function (dataUrl) {\n          if (file.type === 'image/jpeg' && options.restoreExif !== false) {\n            try {\n              dataUrl = upload.restoreExif(url, dataUrl);\n            } catch (e) {\n              setTimeout(function () {throw e;}, 1);\n            }\n          }\n          try {\n            var blob = upload.dataUrltoBlob(dataUrl, file.name, file.size);\n            deferred.resolve(blob);\n          } catch (e) {\n            deferred.reject(e);\n          }\n        }, function (r) {\n          if (r === 'resizeIf') {\n            deferred.resolve(file);\n          }\n          deferred.reject(r);\n        });\n    }, function (e) {\n      deferred.reject(e);\n    });\n    return deferred.promise;\n  };\n\n  return upload;\n}]);\n\n(function () {\n  ngFileUpload.directive('ngfDrop', ['$parse', '$timeout', '$window', 'Upload', '$http', '$q',\n    function ($parse, $timeout, $window, Upload, $http, $q) {\n      return {\n        restrict: 'AEC',\n        require: '?ngModel',\n        link: function (scope, elem, attr, ngModel) {\n          linkDrop(scope, elem, attr, ngModel, $parse, $timeout, $window, Upload, $http, $q);\n        }\n      };\n    }]);\n\n  ngFileUpload.directive('ngfNoFileDrop', function () {\n    return function (scope, elem) {\n      if (dropAvailable()) elem.css('display', 'none');\n    };\n  });\n\n  ngFileUpload.directive('ngfDropAvailable', ['$parse', '$timeout', 'Upload', function ($parse, $timeout, Upload) {\n    return function (scope, elem, attr) {\n      if (dropAvailable()) {\n        var model = $parse(Upload.attrGetter('ngfDropAvailable', attr));\n        $timeout(function () {\n          model(scope);\n          if (model.assign) {\n            model.assign(scope, true);\n          }\n        });\n      }\n    };\n  }]);\n\n  function linkDrop(scope, elem, attr, ngModel, $parse, $timeout, $window, upload, $http, $q) {\n    var available = dropAvailable();\n\n    var attrGetter = function (name, scope, params) {\n      return upload.attrGetter(name, attr, scope, params);\n    };\n\n    if (attrGetter('dropAvailable')) {\n      $timeout(function () {\n        if (scope[attrGetter('dropAvailable')]) {\n          scope[attrGetter('dropAvailable')].value = available;\n        } else {\n          scope[attrGetter('dropAvailable')] = available;\n        }\n      });\n    }\n    if (!available) {\n      if (attrGetter('ngfHideOnDropNotAvailable', scope) === true) {\n        elem.css('display', 'none');\n      }\n      return;\n    }\n\n    function isDisabled() {\n      return elem.attr('disabled') || attrGetter('ngfDropDisabled', scope);\n    }\n\n    if (attrGetter('ngfSelect') == null) {\n      upload.registerModelChangeValidator(ngModel, attr, scope);\n    }\n\n    var leaveTimeout = null;\n    var stopPropagation = $parse(attrGetter('ngfStopPropagation'));\n    var dragOverDelay = 1;\n    var actualDragOverClass;\n\n    elem[0].addEventListener('dragover', function (evt) {\n      if (isDisabled() || !upload.shouldUpdateOn('drop', attr, scope)) return;\n      evt.preventDefault();\n      if (stopPropagation(scope)) evt.stopPropagation();\n      // handling dragover events from the Chrome download bar\n      if (navigator.userAgent.indexOf('Chrome') > -1) {\n        var b = evt.dataTransfer.effectAllowed;\n        evt.dataTransfer.dropEffect = ('move' === b || 'linkMove' === b) ? 'move' : 'copy';\n      }\n      $timeout.cancel(leaveTimeout);\n      if (!actualDragOverClass) {\n        actualDragOverClass = 'C';\n        calculateDragOverClass(scope, attr, evt, function (clazz) {\n          actualDragOverClass = clazz;\n          elem.addClass(actualDragOverClass);\n          attrGetter('ngfDrag', scope, {$isDragging: true, $class: actualDragOverClass, $event: evt});\n        });\n      }\n    }, false);\n    elem[0].addEventListener('dragenter', function (evt) {\n      if (isDisabled() || !upload.shouldUpdateOn('drop', attr, scope)) return;\n      evt.preventDefault();\n      if (stopPropagation(scope)) evt.stopPropagation();\n    }, false);\n    elem[0].addEventListener('dragleave', function (evt) {\n      if (isDisabled() || !upload.shouldUpdateOn('drop', attr, scope)) return;\n      evt.preventDefault();\n      if (stopPropagation(scope)) evt.stopPropagation();\n      leaveTimeout = $timeout(function () {\n        if (actualDragOverClass) elem.removeClass(actualDragOverClass);\n        actualDragOverClass = null;\n        attrGetter('ngfDrag', scope, {$isDragging: false, $event: evt});\n      }, dragOverDelay || 100);\n    }, false);\n    elem[0].addEventListener('drop', function (evt) {\n      if (isDisabled() || !upload.shouldUpdateOn('drop', attr, scope)) return;\n      evt.preventDefault();\n      if (stopPropagation(scope)) evt.stopPropagation();\n      if (actualDragOverClass) elem.removeClass(actualDragOverClass);\n      actualDragOverClass = null;\n      extractFilesAndUpdateModel(evt.dataTransfer, evt, 'dropUrl');\n    }, false);\n    elem[0].addEventListener('paste', function (evt) {\n      if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1 &&\n        attrGetter('ngfEnableFirefoxPaste', scope)) {\n        evt.preventDefault();\n      }\n      if (isDisabled() || !upload.shouldUpdateOn('paste', attr, scope)) return;\n      extractFilesAndUpdateModel(evt.clipboardData || evt.originalEvent.clipboardData, evt, 'pasteUrl');\n    }, false);\n\n    if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1 &&\n      attrGetter('ngfEnableFirefoxPaste', scope)) {\n      elem.attr('contenteditable', true);\n      elem.on('keypress', function (e) {\n        if (!e.metaKey && !e.ctrlKey) {\n          e.preventDefault();\n        }\n      });\n    }\n\n    function extractFilesAndUpdateModel(source, evt, updateOnType) {\n      if (!source) return;\n      // html needs to be calculated on the same process otherwise the data will be wiped\n      // after promise resolve or setTimeout.\n      var html;\n      try {\n        html = source && source.getData && source.getData('text/html');\n      } catch (e) {/* Fix IE11 that throw error calling getData */\n      }\n      extractFiles(source.items, source.files, attrGetter('ngfAllowDir', scope) !== false,\n        attrGetter('multiple') || attrGetter('ngfMultiple', scope)).then(function (files) {\n        if (files.length) {\n          updateModel(files, evt);\n        } else {\n          extractFilesFromHtml(updateOnType, html).then(function (files) {\n            updateModel(files, evt);\n          });\n        }\n      });\n    }\n\n    function updateModel(files, evt) {\n      upload.updateModel(ngModel, attr, scope, attrGetter('ngfChange') || attrGetter('ngfDrop'), files, evt);\n    }\n\n    function extractFilesFromHtml(updateOn, html) {\n      if (!upload.shouldUpdateOn(updateOn, attr, scope) || typeof html !== 'string') return upload.rejectPromise([]);\n      var urls = [];\n      html.replace(/<(img src|img [^>]* src) *=\\\"([^\\\"]*)\\\"/gi, function (m, n, src) {\n        urls.push(src);\n      });\n      var promises = [], files = [];\n      if (urls.length) {\n        angular.forEach(urls, function (url) {\n          promises.push(upload.urlToBlob(url).then(function (blob) {\n            files.push(blob);\n          }));\n        });\n        var defer = $q.defer();\n        $q.all(promises).then(function () {\n          defer.resolve(files);\n        }, function (e) {\n          defer.reject(e);\n        });\n        return defer.promise;\n      }\n      return upload.emptyPromise();\n    }\n\n    function calculateDragOverClass(scope, attr, evt, callback) {\n      var obj = attrGetter('ngfDragOverClass', scope, {$event: evt}), dClass = 'dragover';\n      if (angular.isString(obj)) {\n        dClass = obj;\n      } else if (obj) {\n        if (obj.delay) dragOverDelay = obj.delay;\n        if (obj.accept || obj.reject) {\n          var items = evt.dataTransfer.items;\n          if (items == null || !items.length) {\n            dClass = obj.accept;\n          } else {\n            var pattern = obj.pattern || attrGetter('ngfPattern', scope, {$event: evt});\n            var len = items.length;\n            while (len--) {\n              if (!upload.validatePattern(items[len], pattern)) {\n                dClass = obj.reject;\n                break;\n              } else {\n                dClass = obj.accept;\n              }\n            }\n          }\n        }\n      }\n      callback(dClass);\n    }\n\n    function extractFiles(items, fileList, allowDir, multiple) {\n      var maxFiles = upload.getValidationAttr(attr, scope, 'maxFiles');\n      if (maxFiles == null) {\n        maxFiles = Number.MAX_VALUE;\n      }\n      var maxTotalSize = upload.getValidationAttr(attr, scope, 'maxTotalSize');\n      if (maxTotalSize == null) {\n        maxTotalSize = Number.MAX_VALUE;\n      }\n      var includeDir = attrGetter('ngfIncludeDir', scope);\n      var files = [], totalSize = 0;\n\n      function traverseFileTree(entry, path) {\n        var defer = $q.defer();\n        if (entry != null) {\n          if (entry.isDirectory) {\n            var promises = [upload.emptyPromise()];\n            if (includeDir) {\n              var file = {type: 'directory'};\n              file.name = file.path = (path || '') + entry.name;\n              files.push(file);\n            }\n            var dirReader = entry.createReader();\n            var entries = [];\n            var readEntries = function () {\n              dirReader.readEntries(function (results) {\n                try {\n                  if (!results.length) {\n                    angular.forEach(entries.slice(0), function (e) {\n                      if (files.length <= maxFiles && totalSize <= maxTotalSize) {\n                        promises.push(traverseFileTree(e, (path ? path : '') + entry.name + '/'));\n                      }\n                    });\n                    $q.all(promises).then(function () {\n                      defer.resolve();\n                    }, function (e) {\n                      defer.reject(e);\n                    });\n                  } else {\n                    entries = entries.concat(Array.prototype.slice.call(results || [], 0));\n                    readEntries();\n                  }\n                } catch (e) {\n                  defer.reject(e);\n                }\n              }, function (e) {\n                defer.reject(e);\n              });\n            };\n            readEntries();\n          } else {\n            entry.file(function (file) {\n              try {\n                file.path = (path ? path : '') + file.name;\n                if (includeDir) {\n                  file = upload.rename(file, file.path);\n                }\n                files.push(file);\n                totalSize += file.size;\n                defer.resolve();\n              } catch (e) {\n                defer.reject(e);\n              }\n            }, function (e) {\n              defer.reject(e);\n            });\n          }\n        }\n        return defer.promise;\n      }\n\n      var promises = [upload.emptyPromise()];\n\n      if (items && items.length > 0 && $window.location.protocol !== 'file:') {\n        for (var i = 0; i < items.length; i++) {\n          if (items[i].webkitGetAsEntry && items[i].webkitGetAsEntry() && items[i].webkitGetAsEntry().isDirectory) {\n            var entry = items[i].webkitGetAsEntry();\n            if (entry.isDirectory && !allowDir) {\n              continue;\n            }\n            if (entry != null) {\n              promises.push(traverseFileTree(entry));\n            }\n          } else {\n            var f = items[i].getAsFile();\n            if (f != null) {\n              files.push(f);\n              totalSize += f.size;\n            }\n          }\n          if (files.length > maxFiles || totalSize > maxTotalSize ||\n            (!multiple && files.length > 0)) break;\n        }\n      } else {\n        if (fileList != null) {\n          for (var j = 0; j < fileList.length; j++) {\n            var file = fileList.item(j);\n            if (file.type || file.size > 0) {\n              files.push(file);\n              totalSize += file.size;\n            }\n            if (files.length > maxFiles || totalSize > maxTotalSize ||\n              (!multiple && files.length > 0)) break;\n          }\n        }\n      }\n\n      var defer = $q.defer();\n      $q.all(promises).then(function () {\n        if (!multiple && !includeDir && files.length) {\n          var i = 0;\n          while (files[i] && files[i].type === 'directory') i++;\n          defer.resolve([files[i]]);\n        } else {\n          defer.resolve(files);\n        }\n      }, function (e) {\n        defer.reject(e);\n      });\n\n      return defer.promise;\n    }\n  }\n\n  function dropAvailable() {\n    var div = document.createElement('div');\n    return ('draggable' in div) && ('ondrop' in div) && !/Edge\\/12./i.test(navigator.userAgent);\n  }\n\n})();\n\n// customized version of https://github.com/exif-js/exif-js\nngFileUpload.service('UploadExif', ['UploadResize', '$q', function (UploadResize, $q) {\n  var upload = UploadResize;\n\n  upload.isExifSupported = function () {\n    return window.FileReader && new FileReader().readAsArrayBuffer && upload.isResizeSupported();\n  };\n\n  function applyTransform(ctx, orientation, width, height) {\n    switch (orientation) {\n      case 2:\n        return ctx.transform(-1, 0, 0, 1, width, 0);\n      case 3:\n        return ctx.transform(-1, 0, 0, -1, width, height);\n      case 4:\n        return ctx.transform(1, 0, 0, -1, 0, height);\n      case 5:\n        return ctx.transform(0, 1, 1, 0, 0, 0);\n      case 6:\n        return ctx.transform(0, 1, -1, 0, height, 0);\n      case 7:\n        return ctx.transform(0, -1, -1, 0, height, width);\n      case 8:\n        return ctx.transform(0, -1, 1, 0, 0, width);\n    }\n  }\n\n  upload.readOrientation = function (file) {\n    var defer = $q.defer();\n    var reader = new FileReader();\n    var slicedFile = file.slice ? file.slice(0, 64 * 1024) : file;\n    reader.readAsArrayBuffer(slicedFile);\n    reader.onerror = function (e) {\n      return defer.reject(e);\n    };\n    reader.onload = function (e) {\n      var result = {orientation: 1};\n      var view = new DataView(this.result);\n      if (view.getUint16(0, false) !== 0xFFD8) return defer.resolve(result);\n\n      var length = view.byteLength,\n        offset = 2;\n      while (offset < length) {\n        var marker = view.getUint16(offset, false);\n        offset += 2;\n        if (marker === 0xFFE1) {\n          if (view.getUint32(offset += 2, false) !== 0x45786966) return defer.resolve(result);\n\n          var little = view.getUint16(offset += 6, false) === 0x4949;\n          offset += view.getUint32(offset + 4, little);\n          var tags = view.getUint16(offset, little);\n          offset += 2;\n          for (var i = 0; i < tags; i++)\n            if (view.getUint16(offset + (i * 12), little) === 0x0112) {\n              var orientation = view.getUint16(offset + (i * 12) + 8, little);\n              if (orientation >= 2 && orientation <= 8) {\n                view.setUint16(offset + (i * 12) + 8, 1, little);\n                result.fixedArrayBuffer = e.target.result;\n              }\n              result.orientation = orientation;\n              return defer.resolve(result);\n            }\n        } else if ((marker & 0xFF00) !== 0xFF00) break;\n        else offset += view.getUint16(offset, false);\n      }\n      return defer.resolve(result);\n    };\n    return defer.promise;\n  };\n\n  function arrayBufferToBase64(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    var len = bytes.byteLength;\n    for (var i = 0; i < len; i++) {\n      binary += String.fromCharCode(bytes[i]);\n    }\n    return window.btoa(binary);\n  }\n\n  upload.applyExifRotation = function (file) {\n    if (file.type.indexOf('image/jpeg') !== 0) {\n      return upload.emptyPromise(file);\n    }\n\n    var deferred = $q.defer();\n    upload.readOrientation(file).then(function (result) {\n      if (result.orientation < 2 || result.orientation > 8) {\n        return deferred.resolve(file);\n      }\n      upload.dataUrl(file, true).then(function (url) {\n        var canvas = document.createElement('canvas');\n        var img = document.createElement('img');\n\n        img.onload = function () {\n          try {\n            canvas.width = result.orientation > 4 ? img.height : img.width;\n            canvas.height = result.orientation > 4 ? img.width : img.height;\n            var ctx = canvas.getContext('2d');\n            applyTransform(ctx, result.orientation, img.width, img.height);\n            ctx.drawImage(img, 0, 0);\n            var dataUrl = canvas.toDataURL(file.type || 'image/WebP', 0.934);\n            dataUrl = upload.restoreExif(arrayBufferToBase64(result.fixedArrayBuffer), dataUrl);\n            var blob = upload.dataUrltoBlob(dataUrl, file.name);\n            deferred.resolve(blob);\n          } catch (e) {\n            return deferred.reject(e);\n          }\n        };\n        img.onerror = function () {\n          deferred.reject();\n        };\n        img.src = url;\n      }, function (e) {\n        deferred.reject(e);\n      });\n    }, function (e) {\n      deferred.reject(e);\n    });\n    return deferred.promise;\n  };\n\n  upload.restoreExif = function (orig, resized) {\n    var ExifRestorer = {};\n\n    ExifRestorer.KEY_STR = 'ABCDEFGHIJKLMNOP' +\n      'QRSTUVWXYZabcdef' +\n      'ghijklmnopqrstuv' +\n      'wxyz0123456789+/' +\n      '=';\n\n    ExifRestorer.encode64 = function (input) {\n      var output = '',\n        chr1, chr2, chr3 = '',\n        enc1, enc2, enc3, enc4 = '',\n        i = 0;\n\n      do {\n        chr1 = input[i++];\n        chr2 = input[i++];\n        chr3 = input[i++];\n\n        enc1 = chr1 >> 2;\n        enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n        enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n        enc4 = chr3 & 63;\n\n        if (isNaN(chr2)) {\n          enc3 = enc4 = 64;\n        } else if (isNaN(chr3)) {\n          enc4 = 64;\n        }\n\n        output = output +\n          this.KEY_STR.charAt(enc1) +\n          this.KEY_STR.charAt(enc2) +\n          this.KEY_STR.charAt(enc3) +\n          this.KEY_STR.charAt(enc4);\n        chr1 = chr2 = chr3 = '';\n        enc1 = enc2 = enc3 = enc4 = '';\n      } while (i < input.length);\n\n      return output;\n    };\n\n    ExifRestorer.restore = function (origFileBase64, resizedFileBase64) {\n      if (origFileBase64.match('data:image/jpeg;base64,')) {\n        origFileBase64 = origFileBase64.replace('data:image/jpeg;base64,', '');\n      }\n\n      var rawImage = this.decode64(origFileBase64);\n      var segments = this.slice2Segments(rawImage);\n\n      var image = this.exifManipulation(resizedFileBase64, segments);\n\n      return 'data:image/jpeg;base64,' + this.encode64(image);\n    };\n\n\n    ExifRestorer.exifManipulation = function (resizedFileBase64, segments) {\n      var exifArray = this.getExifArray(segments),\n        newImageArray = this.insertExif(resizedFileBase64, exifArray);\n      return new Uint8Array(newImageArray);\n    };\n\n\n    ExifRestorer.getExifArray = function (segments) {\n      var seg;\n      for (var x = 0; x < segments.length; x++) {\n        seg = segments[x];\n        if (seg[0] === 255 & seg[1] === 225) //(ff e1)\n        {\n          return seg;\n        }\n      }\n      return [];\n    };\n\n\n    ExifRestorer.insertExif = function (resizedFileBase64, exifArray) {\n      var imageData = resizedFileBase64.replace('data:image/jpeg;base64,', ''),\n        buf = this.decode64(imageData),\n        separatePoint = buf.indexOf(255, 3),\n        mae = buf.slice(0, separatePoint),\n        ato = buf.slice(separatePoint),\n        array = mae;\n\n      array = array.concat(exifArray);\n      array = array.concat(ato);\n      return array;\n    };\n\n\n    ExifRestorer.slice2Segments = function (rawImageArray) {\n      var head = 0,\n        segments = [];\n\n      while (1) {\n        if (rawImageArray[head] === 255 & rawImageArray[head + 1] === 218) {\n          break;\n        }\n        if (rawImageArray[head] === 255 & rawImageArray[head + 1] === 216) {\n          head += 2;\n        }\n        else {\n          var length = rawImageArray[head + 2] * 256 + rawImageArray[head + 3],\n            endPoint = head + length + 2,\n            seg = rawImageArray.slice(head, endPoint);\n          segments.push(seg);\n          head = endPoint;\n        }\n        if (head > rawImageArray.length) {\n          break;\n        }\n      }\n\n      return segments;\n    };\n\n\n    ExifRestorer.decode64 = function (input) {\n      var chr1, chr2, chr3 = '',\n        enc1, enc2, enc3, enc4 = '',\n        i = 0,\n        buf = [];\n\n      // remove all characters that are not A-Z, a-z, 0-9, +, /, or =\n      var base64test = /[^A-Za-z0-9\\+\\/\\=]/g;\n      if (base64test.exec(input)) {\n        console.log('There were invalid base64 characters in the input text.\\n' +\n          'Valid base64 characters are A-Z, a-z, 0-9, ' + ', ' / ',and \"=\"\\n' +\n          'Expect errors in decoding.');\n      }\n      input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\n\n      do {\n        enc1 = this.KEY_STR.indexOf(input.charAt(i++));\n        enc2 = this.KEY_STR.indexOf(input.charAt(i++));\n        enc3 = this.KEY_STR.indexOf(input.charAt(i++));\n        enc4 = this.KEY_STR.indexOf(input.charAt(i++));\n\n        chr1 = (enc1 << 2) | (enc2 >> 4);\n        chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n        chr3 = ((enc3 & 3) << 6) | enc4;\n\n        buf.push(chr1);\n\n        if (enc3 !== 64) {\n          buf.push(chr2);\n        }\n        if (enc4 !== 64) {\n          buf.push(chr3);\n        }\n\n        chr1 = chr2 = chr3 = '';\n        enc1 = enc2 = enc3 = enc4 = '';\n\n      } while (i < input.length);\n\n      return buf;\n    };\n\n    return ExifRestorer.restore(orig, resized);  //<= EXIF\n  };\n\n  return upload;\n}]);\n\n","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['module', 'exports', 'angular', 'ws'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, exports, require('angular'), require('ws'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, mod.exports, global.angular, global.ws);\n    global.angularWebsocket = mod.exports;\n  }\n})(this, function (module, exports, _angular, ws) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _angular2 = _interopRequireDefault(_angular);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n  };\n\n  var Socket;\n\n  if ((typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) === 'object' && typeof require === 'function') {\n    try {\n\n      Socket = ws.Client || ws.client || ws;\n    } catch (e) {}\n  }\n\n  // Browser\n  Socket = Socket || window.WebSocket || window.MozWebSocket;\n\n  var noop = _angular2.default.noop;\n  var objectFreeze = Object.freeze ? Object.freeze : noop;\n  var objectDefineProperty = Object.defineProperty;\n  var isString = _angular2.default.isString;\n  var isFunction = _angular2.default.isFunction;\n  var isDefined = _angular2.default.isDefined;\n  var isObject = _angular2.default.isObject;\n  var isArray = _angular2.default.isArray;\n  var forEach = _angular2.default.forEach;\n  var arraySlice = Array.prototype.slice;\n  // ie8 wat\n  if (!Array.prototype.indexOf) {\n    Array.prototype.indexOf = function (elt /*, from*/) {\n      var len = this.length >>> 0;\n      var from = Number(arguments[1]) || 0;\n      from = from < 0 ? Math.ceil(from) : Math.floor(from);\n      if (from < 0) {\n        from += len;\n      }\n\n      for (; from < len; from++) {\n        if (from in this && this[from] === elt) {\n          return from;\n        }\n      }\n      return -1;\n    };\n  }\n\n  // $WebSocketProvider.$inject = ['$rootScope', '$q', '$timeout', '$websocketBackend'];\n  function $WebSocketProvider($rootScope, $q, $timeout, $websocketBackend) {\n\n    function $WebSocket(url, protocols, options) {\n      if (!options && isObject(protocols) && !isArray(protocols)) {\n        options = protocols;\n        protocols = undefined;\n      }\n\n      this.protocols = protocols;\n      this.url = url || 'Missing URL';\n      this.ssl = /(wss)/i.test(this.url);\n\n      // this.binaryType = '';\n      // this.extensions = '';\n      // this.bufferedAmount = 0;\n      // this.trasnmitting = false;\n      // this.buffer = [];\n\n      // TODO: refactor options to use isDefined\n      this.scope = options && options.scope || $rootScope;\n      this.rootScopeFailover = options && options.rootScopeFailover && true;\n      this.useApplyAsync = options && options.useApplyAsync || false;\n      this.initialTimeout = options && options.initialTimeout || 500; // 500ms\n      this.maxTimeout = options && options.maxTimeout || 5 * 60 * 1000; // 5 minutes\n      this.reconnectIfNotNormalClose = options && options.reconnectIfNotNormalClose || false;\n      this.binaryType = options && options.binaryType || 'blob';\n\n      this._reconnectAttempts = 0;\n      this.sendQueue = [];\n      this.onOpenCallbacks = [];\n      this.onMessageCallbacks = [];\n      this.onErrorCallbacks = [];\n      this.onCloseCallbacks = [];\n\n      objectFreeze(this._readyStateConstants);\n\n      if (url) {\n        this._connect();\n      } else {\n        this._setInternalState(0);\n      }\n    }\n\n    $WebSocket.prototype._readyStateConstants = {\n      'CONNECTING': 0,\n      'OPEN': 1,\n      'CLOSING': 2,\n      'CLOSED': 3,\n      'RECONNECT_ABORTED': 4\n    };\n\n    $WebSocket.prototype._normalCloseCode = 1000;\n\n    $WebSocket.prototype._reconnectableStatusCodes = [4000];\n\n    $WebSocket.prototype.safeDigest = function safeDigest(autoApply) {\n      if (autoApply && !this.scope.$$phase) {\n        this.scope.$digest();\n      }\n    };\n\n    $WebSocket.prototype.bindToScope = function bindToScope(scope) {\n      var self = this;\n      if (scope) {\n        this.scope = scope;\n        if (this.rootScopeFailover) {\n          this.scope.$on('$destroy', function () {\n            self.scope = $rootScope;\n          });\n        }\n      }\n      return self;\n    };\n\n    $WebSocket.prototype._connect = function _connect(force) {\n      if (force || !this.socket || this.socket.readyState !== this._readyStateConstants.OPEN) {\n        this.socket = $websocketBackend.create(this.url, this.protocols);\n        this.socket.onmessage = _angular2.default.bind(this, this._onMessageHandler);\n        this.socket.onopen = _angular2.default.bind(this, this._onOpenHandler);\n        this.socket.onerror = _angular2.default.bind(this, this._onErrorHandler);\n        this.socket.onclose = _angular2.default.bind(this, this._onCloseHandler);\n        this.socket.binaryType = this.binaryType;\n      }\n    };\n\n    $WebSocket.prototype.fireQueue = function fireQueue() {\n      while (this.sendQueue.length && this.socket.readyState === this._readyStateConstants.OPEN) {\n        var data = this.sendQueue.shift();\n\n        this.socket.send(isString(data.message) || this.binaryType != 'blob' ? data.message : JSON.stringify(data.message));\n        data.deferred.resolve();\n      }\n    };\n\n    $WebSocket.prototype.notifyOpenCallbacks = function notifyOpenCallbacks(event) {\n      for (var i = 0; i < this.onOpenCallbacks.length; i++) {\n        this.onOpenCallbacks[i].call(this, event);\n      }\n    };\n\n    $WebSocket.prototype.notifyCloseCallbacks = function notifyCloseCallbacks(event) {\n      for (var i = 0; i < this.onCloseCallbacks.length; i++) {\n        this.onCloseCallbacks[i].call(this, event);\n      }\n    };\n\n    $WebSocket.prototype.notifyErrorCallbacks = function notifyErrorCallbacks(event) {\n      for (var i = 0; i < this.onErrorCallbacks.length; i++) {\n        this.onErrorCallbacks[i].call(this, event);\n      }\n    };\n\n    $WebSocket.prototype.onOpen = function onOpen(cb) {\n      this.onOpenCallbacks.push(cb);\n      return this;\n    };\n\n    $WebSocket.prototype.onClose = function onClose(cb) {\n      this.onCloseCallbacks.push(cb);\n      return this;\n    };\n\n    $WebSocket.prototype.onError = function onError(cb) {\n      this.onErrorCallbacks.push(cb);\n      return this;\n    };\n\n    $WebSocket.prototype.onMessage = function onMessage(callback, options) {\n      if (!isFunction(callback)) {\n        throw new Error('Callback must be a function');\n      }\n\n      if (options && isDefined(options.filter) && !isString(options.filter) && !(options.filter instanceof RegExp)) {\n        throw new Error('Pattern must be a string or regular expression');\n      }\n\n      this.onMessageCallbacks.push({\n        fn: callback,\n        pattern: options ? options.filter : undefined,\n        autoApply: options ? options.autoApply : true\n      });\n      return this;\n    };\n\n    $WebSocket.prototype._onOpenHandler = function _onOpenHandler(event) {\n      this._reconnectAttempts = 0;\n      this.notifyOpenCallbacks(event);\n      this.fireQueue();\n    };\n\n    $WebSocket.prototype._onCloseHandler = function _onCloseHandler(event) {\n      var self = this;\n      if (self.useApplyAsync) {\n        self.scope.$applyAsync(function () {\n          self.notifyCloseCallbacks(event);\n        });\n      } else {\n        self.notifyCloseCallbacks(event);\n        self.safeDigest(true);\n      }\n      if (this.reconnectIfNotNormalClose && event.code !== this._normalCloseCode || this._reconnectableStatusCodes.indexOf(event.code) > -1) {\n        this.reconnect();\n      }\n    };\n\n    $WebSocket.prototype._onErrorHandler = function _onErrorHandler(event) {\n      var self = this;\n      if (self.useApplyAsync) {\n        self.scope.$applyAsync(function () {\n          self.notifyErrorCallbacks(event);\n        });\n      } else {\n        self.notifyErrorCallbacks(event);\n        self.safeDigest(true);\n      }\n    };\n\n    $WebSocket.prototype._onMessageHandler = function _onMessageHandler(message) {\n      var pattern;\n      var self = this;\n      var currentCallback;\n      for (var i = 0; i < self.onMessageCallbacks.length; i++) {\n        currentCallback = self.onMessageCallbacks[i];\n        pattern = currentCallback.pattern;\n        if (pattern) {\n          if (isString(pattern) && message.data === pattern) {\n            applyAsyncOrDigest(currentCallback.fn, currentCallback.autoApply, message);\n          } else if (pattern instanceof RegExp && pattern.exec(message.data)) {\n            applyAsyncOrDigest(currentCallback.fn, currentCallback.autoApply, message);\n          }\n        } else {\n          applyAsyncOrDigest(currentCallback.fn, currentCallback.autoApply, message);\n        }\n      }\n\n      function applyAsyncOrDigest(callback, autoApply, args) {\n        args = arraySlice.call(arguments, 2);\n        if (self.useApplyAsync) {\n          self.scope.$applyAsync(function () {\n            callback.apply(self, args);\n          });\n        } else {\n          callback.apply(self, args);\n          self.safeDigest(autoApply);\n        }\n      }\n    };\n\n    $WebSocket.prototype.close = function close(force) {\n      if (force || !this.socket.bufferedAmount) {\n        this.socket.close();\n      }\n      return this;\n    };\n\n    $WebSocket.prototype.send = function send(data) {\n      var deferred = $q.defer();\n      var self = this;\n      var promise = cancelableify(deferred.promise);\n\n      if (self.readyState === self._readyStateConstants.RECONNECT_ABORTED) {\n        deferred.reject('Socket connection has been closed');\n      } else {\n        self.sendQueue.push({\n          message: data,\n          deferred: deferred\n        });\n        self.fireQueue();\n      }\n\n      // Credit goes to @btford\n      function cancelableify(promise) {\n        promise.cancel = cancel;\n        var then = promise.then;\n        promise.then = function () {\n          var newPromise = then.apply(this, arguments);\n          return cancelableify(newPromise);\n        };\n        return promise;\n      }\n\n      function cancel(reason) {\n        self.sendQueue.splice(self.sendQueue.indexOf(data), 1);\n        deferred.reject(reason);\n        return self;\n      }\n\n      if ($websocketBackend.isMocked && $websocketBackend.isMocked() && $websocketBackend.isConnected(this.url)) {\n        this._onMessageHandler($websocketBackend.mockSend());\n      }\n\n      return promise;\n    };\n\n    $WebSocket.prototype.reconnect = function reconnect() {\n      this.close();\n\n      var backoffDelay = this._getBackoffDelay(++this._reconnectAttempts);\n\n      var backoffDelaySeconds = backoffDelay / 1000;\n      console.log('Reconnecting in ' + backoffDelaySeconds + ' seconds');\n\n      $timeout(_angular2.default.bind(this, this._connect), backoffDelay);\n\n      return this;\n    };\n    // Exponential Backoff Formula by Prof. Douglas Thain\n    // http://dthain.blogspot.co.uk/2009/02/exponential-backoff-in-distributed.html\n    $WebSocket.prototype._getBackoffDelay = function _getBackoffDelay(attempt) {\n      var R = Math.random() + 1;\n      var T = this.initialTimeout;\n      var F = 2;\n      var N = attempt;\n      var M = this.maxTimeout;\n\n      return Math.floor(Math.min(R * T * Math.pow(F, N), M));\n    };\n\n    $WebSocket.prototype._setInternalState = function _setInternalState(state) {\n      if (Math.floor(state) !== state || state < 0 || state > 4) {\n        throw new Error('state must be an integer between 0 and 4, got: ' + state);\n      }\n\n      // ie8 wat\n      if (!objectDefineProperty) {\n        this.readyState = state || this.socket.readyState;\n      }\n      this._internalConnectionState = state;\n\n      forEach(this.sendQueue, function (pending) {\n        pending.deferred.reject('Message cancelled due to closed socket connection');\n      });\n    };\n\n    // Read only .readyState\n    if (objectDefineProperty) {\n      objectDefineProperty($WebSocket.prototype, 'readyState', {\n        get: function get() {\n          return this._internalConnectionState || this.socket.readyState;\n        },\n        set: function set() {\n          throw new Error('The readyState property is read-only');\n        }\n      });\n    }\n\n    return function (url, protocols, options) {\n      return new $WebSocket(url, protocols, options);\n    };\n  }\n\n  // $WebSocketBackendProvider.$inject = ['$log'];\n  function $WebSocketBackendProvider($log) {\n    this.create = function create(url, protocols) {\n      var match = /wss?:\\/\\//.exec(url);\n\n      if (!match) {\n        throw new Error('Invalid url provided');\n      }\n\n      if (protocols) {\n        return new Socket(url, protocols);\n      }\n\n      return new Socket(url);\n    };\n\n    this.createWebSocketBackend = function createWebSocketBackend(url, protocols) {\n      $log.warn('Deprecated: Please use .create(url, protocols)');\n      return this.create(url, protocols);\n    };\n  }\n\n  _angular2.default.module('ngWebSocket', []).factory('$websocket', ['$rootScope', '$q', '$timeout', '$websocketBackend', $WebSocketProvider]).factory('WebSocket', ['$rootScope', '$q', '$timeout', 'WebsocketBackend', $WebSocketProvider]).service('$websocketBackend', ['$log', $WebSocketBackendProvider]).service('WebSocketBackend', ['$log', $WebSocketBackendProvider]);\n\n  _angular2.default.module('angular-websocket', ['ngWebSocket']);\n\n  exports.default = _angular2.default.module('ngWebSocket');\n  module.exports = exports['default'];\n});","//\n// randexp v0.4.5\n// Create random strings that match a given regular expression.\n//\n// Copyright (C) 2017 by Roly Fentanes (https://github.com/fent)\n// MIT License\n//\n!function(){var e=\"RandExp\",t=function(){return function e(t,n,r){function o(s,i){if(!n[s]){if(!t[s]){var u=\"function\"==typeof require&&require;if(!i&&u)return u(s,!0);if(a)return a(s,!0);var p=new Error(\"Cannot find module '\"+s+\"'\");throw p.code=\"MODULE_NOT_FOUND\",p}var h=n[s]={exports:{}};t[s][0].call(h.exports,function(e){var n=t[s][1][e];return o(n?n:e)},h,h.exports,e,t,n,r)}return n[s].exports}for(var a=\"function\"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){function r(e){return e+(97<=e&&e<=122?-32:65<=e&&e<=90?32:0)}function o(){return!this.randInt(0,1)}function a(e){return e instanceof h?e.index(this.randInt(0,e.length-1)):e[this.randInt(0,e.length-1)]}function s(e){if(e.type===p.types.CHAR)return new h(e.value);if(e.type===p.types.RANGE)return new h(e.from,e.to);for(var t=new h,n=0;n<e.set.length;n++){var o=s.call(this,e.set[n]);if(t.add(o),this.ignoreCase)for(var a=0;a<o.length;a++){var i=o.index(a),u=r(i);i!==u&&t.add(u)}}return e.not?this.defaultRange.clone().subtract(t):t}function i(e,t){\"number\"==typeof t.max&&(e.max=t.max),t.defaultRange instanceof h&&(e.defaultRange=t.defaultRange),\"function\"==typeof t.randInt&&(e.randInt=t.randInt)}function u(e,t){var n,i,p,h,c;switch(e.type){case l.ROOT:case l.GROUP:if(e.followedBy||e.notFollowedBy)return\"\";for(e.remember&&void 0===e.groupNumber&&(e.groupNumber=t.push(null)-1),n=e.options?a.call(this,e.options):e.stack,i=\"\",h=0,c=n.length;h<c;h++)i+=u.call(this,n[h],t);return e.remember&&(t[e.groupNumber]=i),i;case l.POSITION:return\"\";case l.SET:var f=s.call(this,e);return f.length?String.fromCharCode(a.call(this,f)):\"\";case l.REPETITION:for(p=this.randInt(e.min,e.max===1/0?e.min+this.max:e.max),i=\"\",h=0;h<p;h++)i+=u.call(this,e.value,t);return i;case l.REFERENCE:return t[e.value-1]||\"\";case l.CHAR:var g=this.ignoreCase&&o.call(this)?r(e.value):e.value;return String.fromCharCode(g)}}var p=e(\"ret\"),h=e(\"discontinuous-range\"),l=p.types,c=t.exports=function(e,t){if(this.defaultRange=this.defaultRange.clone(),e instanceof RegExp)this.ignoreCase=e.ignoreCase,this.multiline=e.multiline,i(this,e),e=e.source;else{if(\"string\"!=typeof e)throw new Error(\"Expected a regexp or string\");this.ignoreCase=t&&t.indexOf(\"i\")!==-1,this.multiline=t&&t.indexOf(\"m\")!==-1}this.tokens=p(e)};c.prototype.max=100,c.prototype.gen=function(){return u.call(this,this.tokens,[])},c.randexp=function(e,t){var n;return void 0===e._randexp?(n=new c(e,t),e._randexp=n):n=e._randexp,i(n,e),n.gen()},c.sugar=function(){RegExp.prototype.gen=function(){return c.randexp(this)}},c.prototype.defaultRange=new h(32,126),c.prototype.randInt=function(e,t){return e+Math.floor(Math.random()*(1+t-e))}},{\"discontinuous-range\":2,ret:3}],2:[function(e,t,n){function r(e,t){this.low=e,this.high=t,this.length=1+t-e}function o(e,t){return this instanceof o?(this.ranges=[],this.length=0,void 0!==e&&this.add(e,t),void 0):new o(e,t)}function a(e){e.length=e.ranges.reduce(function(e,t){return e+t.length},0)}r.prototype.overlaps=function(e){return!(this.high<e.low||this.low>e.high)},r.prototype.touches=function(e){return!(this.high+1<e.low||this.low-1>e.high)},r.prototype.add=function(e){return this.touches(e)&&new r(Math.min(this.low,e.low),Math.max(this.high,e.high))},r.prototype.subtract=function(e){return!!this.overlaps(e)&&(e.low<=this.low&&e.high>=this.high?[]:e.low>this.low&&e.high<this.high?[new r(this.low,e.low-1),new r(e.high+1,this.high)]:e.low<=this.low?[new r(e.high+1,this.high)]:[new r(this.low,e.low-1)])},r.prototype.toString=function(){return this.low==this.high?this.low.toString():this.low+\"-\"+this.high},r.prototype.clone=function(){return new r(this.low,this.high)},o.prototype.add=function(e,t){function n(e){for(var t=[],n=0;n<s.ranges.length&&!e.touches(s.ranges[n]);)t.push(s.ranges[n].clone()),n++;for(;n<s.ranges.length&&e.touches(s.ranges[n]);)e=e.add(s.ranges[n]),n++;for(t.push(e);n<s.ranges.length;)t.push(s.ranges[n].clone()),n++;s.ranges=t,a(s)}var s=this;return e instanceof o?e.ranges.forEach(n):e instanceof r?n(e):(void 0===t&&(t=e),n(new r(e,t))),this},o.prototype.subtract=function(e,t){function n(e){for(var t=[],n=0;n<s.ranges.length&&!e.overlaps(s.ranges[n]);)t.push(s.ranges[n].clone()),n++;for(;n<s.ranges.length&&e.overlaps(s.ranges[n]);)t=t.concat(s.ranges[n].subtract(e)),n++;for(;n<s.ranges.length;)t.push(s.ranges[n].clone()),n++;s.ranges=t,a(s)}var s=this;return e instanceof o?e.ranges.forEach(n):e instanceof r?n(e):(void 0===t&&(t=e),n(new r(e,t))),this},o.prototype.index=function(e){for(var t=0;t<this.ranges.length&&this.ranges[t].length<=e;)e-=this.ranges[t].length,t++;return t>=this.ranges.length?null:this.ranges[t].low+e},o.prototype.toString=function(){return\"[ \"+this.ranges.join(\", \")+\" ]\"},o.prototype.clone=function(){return new o(this)},t.exports=o},{}],3:[function(e,t,n){var r=e(\"./util\"),o=e(\"./types\"),a=e(\"./sets\"),s=e(\"./positions\");t.exports=function(e){var t,n,i=0,u={type:o.ROOT,stack:[]},p=u,h=u.stack,l=[],c=function(t){r.error(e,\"Nothing to repeat at column \"+(t-1))},f=r.strToChars(e);for(t=f.length;i<t;)switch(n=f[i++]){case\"\\\\\":switch(n=f[i++]){case\"b\":h.push(s.wordBoundary());break;case\"B\":h.push(s.nonWordBoundary());break;case\"w\":h.push(a.words());break;case\"W\":h.push(a.notWords());break;case\"d\":h.push(a.ints());break;case\"D\":h.push(a.notInts());break;case\"s\":h.push(a.whitespace());break;case\"S\":h.push(a.notWhitespace());break;default:/\\d/.test(n)?h.push({type:o.REFERENCE,value:parseInt(n,10)}):h.push({type:o.CHAR,value:n.charCodeAt(0)})}break;case\"^\":h.push(s.begin());break;case\"$\":h.push(s.end());break;case\"[\":var g;\"^\"===f[i]?(g=!0,i++):g=!1;var y=r.tokenizeClass(f.slice(i),e);i+=y[1],h.push({type:o.SET,set:y[0],not:g});break;case\".\":h.push(a.anyChar());break;case\"(\":var d={type:o.GROUP,stack:[],remember:!0};n=f[i],\"?\"===n&&(n=f[i+1],i+=2,\"=\"===n?d.followedBy=!0:\"!\"===n?d.notFollowedBy=!0:\":\"!==n&&r.error(e,\"Invalid group, character '\"+n+\"' after '?' at column \"+(i-1)),d.remember=!1),h.push(d),l.push(p),p=d,h=d.stack;break;case\")\":0===l.length&&r.error(e,\"Unmatched ) at column \"+(i-1)),p=l.pop(),h=p.options?p.options[p.options.length-1]:p.stack;break;case\"|\":p.options||(p.options=[p.stack],delete p.stack);var v=[];p.options.push(v),h=v;break;case\"{\":var R,C,w=/^(\\d+)(,(\\d+)?)?\\}/.exec(f.slice(i));null!==w?(0===h.length&&c(i),R=parseInt(w[1],10),C=w[2]?w[3]?parseInt(w[3],10):1/0:R,i+=w[0].length,h.push({type:o.REPETITION,min:R,max:C,value:h.pop()})):h.push({type:o.CHAR,value:123});break;case\"?\":0===h.length&&c(i),h.push({type:o.REPETITION,min:0,max:1,value:h.pop()});break;case\"+\":0===h.length&&c(i),h.push({type:o.REPETITION,min:1,max:1/0,value:h.pop()});break;case\"*\":0===h.length&&c(i),h.push({type:o.REPETITION,min:0,max:1/0,value:h.pop()});break;default:h.push({type:o.CHAR,value:n.charCodeAt(0)})}return 0!==l.length&&r.error(e,\"Unterminated group\"),u},t.exports.types=o},{\"./positions\":4,\"./sets\":5,\"./types\":6,\"./util\":7}],4:[function(e,t,n){var r=e(\"./types\");n.wordBoundary=function(){return{type:r.POSITION,value:\"b\"}},n.nonWordBoundary=function(){return{type:r.POSITION,value:\"B\"}},n.begin=function(){return{type:r.POSITION,value:\"^\"}},n.end=function(){return{type:r.POSITION,value:\"$\"}}},{\"./types\":6}],5:[function(e,t,n){var r=e(\"./types\"),o=function(){return[{type:r.RANGE,from:48,to:57}]},a=function(){return[{type:r.CHAR,value:95},{type:r.RANGE,from:97,to:122},{type:r.RANGE,from:65,to:90}].concat(o())},s=function(){return[{type:r.CHAR,value:9},{type:r.CHAR,value:10},{type:r.CHAR,value:11},{type:r.CHAR,value:12},{type:r.CHAR,value:13},{type:r.CHAR,value:32},{type:r.CHAR,value:160},{type:r.CHAR,value:5760},{type:r.CHAR,value:6158},{type:r.CHAR,value:8192},{type:r.CHAR,value:8193},{type:r.CHAR,value:8194},{type:r.CHAR,value:8195},{type:r.CHAR,value:8196},{type:r.CHAR,value:8197},{type:r.CHAR,value:8198},{type:r.CHAR,value:8199},{type:r.CHAR,value:8200},{type:r.CHAR,value:8201},{type:r.CHAR,value:8202},{type:r.CHAR,value:8232},{type:r.CHAR,value:8233},{type:r.CHAR,value:8239},{type:r.CHAR,value:8287},{type:r.CHAR,value:12288},{type:r.CHAR,value:65279}]},i=function(){return[{type:r.CHAR,value:10},{type:r.CHAR,value:13},{type:r.CHAR,value:8232},{type:r.CHAR,value:8233}]};n.words=function(){return{type:r.SET,set:a(),not:!1}},n.notWords=function(){return{type:r.SET,set:a(),not:!0}},n.ints=function(){return{type:r.SET,set:o(),not:!1}},n.notInts=function(){return{type:r.SET,set:o(),not:!0}},n.whitespace=function(){return{type:r.SET,set:s(),not:!1}},n.notWhitespace=function(){return{type:r.SET,set:s(),not:!0}},n.anyChar=function(){return{type:r.SET,set:i(),not:!0}}},{\"./types\":6}],6:[function(e,t,n){t.exports={ROOT:0,GROUP:1,POSITION:2,SET:3,RANGE:4,REPETITION:5,REFERENCE:6,CHAR:7}},{}],7:[function(e,t,n){var r=e(\"./types\"),o=e(\"./sets\"),a=\"@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^ ?\",s={0:0,t:9,n:10,v:11,f:12,r:13};n.strToChars=function(e){var t=/(\\[\\\\b\\])|(\\\\)?\\\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|(0?[0-7]{2})|c([@A-Z\\[\\\\\\]\\^?])|([0tnvfr]))/g;return e=e.replace(t,function(e,t,n,r,o,i,u,p){if(n)return e;var h=t?8:r?parseInt(r,16):o?parseInt(o,16):i?parseInt(i,8):u?a.indexOf(u):s[p],l=String.fromCharCode(h);return/[\\[\\]{}\\^$.|?*+()]/.test(l)&&(l=\"\\\\\"+l),l})},n.tokenizeClass=function(e,t){for(var a,s,i=[],u=/\\\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\\\)(.)|([^\\]\\\\]))-(?:\\\\)?([^\\]]))|(\\])|(?:\\\\)?(.)/g;null!=(a=u.exec(e));)if(a[1])i.push(o.words());else if(a[2])i.push(o.ints());else if(a[3])i.push(o.whitespace());else if(a[4])i.push(o.notWords());else if(a[5])i.push(o.notInts());else if(a[6])i.push(o.notWhitespace());else if(a[7])i.push({type:r.RANGE,from:(a[8]||a[9]).charCodeAt(0),to:a[10].charCodeAt(0)});else{if(!(s=a[12]))return[i,u.lastIndex];i.push({type:r.CHAR,value:s.charCodeAt(0)})}n.error(t,\"Unterminated character class\")},n.error=function(e,t){throw new SyntaxError(\"Invalid regular expression: /\"+e+\"/: \"+t)}},{\"./sets\":5,\"./types\":6}]},{},[1])}()(1);\"function\"==typeof define&&\"object\"==typeof define.amd?define(e,function(){return t}):\"undefined\"!=typeof window&&(window[e]=t)}();","angular.module('SER.auth', []);\n\nangular.module('SER.auth').value('userPermissions', []);\nangular.module('SER.auth').value('isSuperuser', false);\nangular.module('SER.auth').value('url403', '');\n\nangular.module('SER.auth').service('permissionService', [\n    'userPermissions',\n    'isSuperuser',\n    function (userPermissions, isSuperuser) {\n        \n        return {\n            hasPermission: function (requiredPermission) {\n\n                if (isSuperuser) {\n                    return true;\n                }\n\n                if (notValue(requiredPermission)) {\n                    return false;\n                }\n\n                return userPermissions.indexOf(requiredPermission) !== -1;\n            },\n            atLeastPermissions: function (requiredPermissions) {\n\n                if (isSuperuser) {\n                    return true;\n                }\n\n                if (hasValue(requiredPermissions)) {\n\n                    for (var index = 0; index < requiredPermissions.length; index++) {\n\n                        if (inArray(requiredPermissions[index], userPermissions)) {\n                            return true;\n                        }\n                    }\n\n                    return false;\n                }\n\n                return true;\n            },\n            hasPermissions: function (requiredPermissions) {\n\n                if (isSuperuser) {\n                    return true;\n                }\n\n                for (var index = 0; index < requiredPermissions.length; index++) {\n\n                    if (notInArray(requiredPermissions[index], userPermissions)) {\n                        return false;\n                    }\n                }\n\n                return true;\n            }\n        }\n\n    }\n]);","angular.module('SER.search', []);\n\nangular.module('SER.search').directive('serAutocomplete', ['$http', '$compile', '$document', function ($http, $compile, $document) {\n\n    return {\n        restrict: 'E',\n        scope: {\n            remoteUrl: '=',\n            keyword: '=?',\n            keywordField: '@',\n            placeholder: '=?',\n            disabled: '=?',\n            selectItem: '&?'\n        },\n        controller: ['$scope', function ($scope) {\n\n            if (notValue($scope.placeholder)) {\n                $scope.placeholder = __('search') + '...';\n            }\n\n            $scope.results = [];\n            $scope.focus = false;\n            $scope.blur = true;\n            $scope.isFetching = false;\n            $scope.showResults = false;\n\n            $scope.searchFocus = function () {\n                $scope.focus = true;\n                $scope.showResults = true;\n                $scope.blur = false;\n                $document.bind('click', $scope.checkFocus);\n            };\n\n            $scope.searchBlur = function () {\n                $scope.focus = false;\n                $scope.blur = true;\n            };\n\n            $scope.selectInternalItem = function (item) {\n                if (angular.isFunction($scope.selectItem)) {\n                    $scope.selectItem({ newValue: item });\n                }\n\n                if (hasValue($scope.keywordField)) {\n                    $scope.keyword = item[$scope.keywordField];\n                }\n\n                $scope.showResults = false;\n            };\n\n            //TODO mejorar deteccion de \"Sin resultados\"\n            $scope.fetch = function () {\n\n                $scope.isFetching = true;\n                $scope.showResults = false;\n\n                if ($scope.keyword) {\n\n                    $http.get($scope.remoteUrl + $scope.keyword).then(function (response) {\n                        $scope.results = response.data;\n                        $scope.isFetching = false;\n                        $scope.showResults = true;\n                    });\n                } else {\n                    $scope.isFetching = false;\n                    $scope.showResults = true;\n                    $scope.results = [];\n                }\n            };\n\n        }],\n        link: function (scope, element) {\n\n            var inputChangedPromise;\n\n            scope.checkFocus = function () {\n                var isChild = element[0].contains(event.target);\n                var isSelf = element[0] == event.target;\n                var isInside = isChild || isSelf;\n                if (!isInside) {\n                    scope.$apply(function () {\n                        scope.showResults = false;\n                        $document.unbind('click', scope.checkFocus);\n                    });\n                }\n            };\n\n            element.on('keyup', function (evt) {\n                if (inputChangedPromise) {\n                    clearTimeout(inputChangedPromise);\n                }\n                inputChangedPromise = setTimeout(function () {\n                    scope.$apply(function () {\n                        scope.fetch();\n                    });\n                }, 500);\n            });\n\n        },\n        template: function (element, attr) {\n\n            function getSpanAddon() {\n                var addon = element.find('addon').detach();\n                return addon.length ? '<span class=\"addon\">' + addon.html() + '</span>': '';\n            }\n\n            function getTemplateTag() {\n                var templateTag = element.find('ser-item-template').detach();\n                return templateTag.length ? templateTag.html() : element.html();\n            }\n\n            function getEmptyTag() {\n                var emptyTag = element.find('ser-empty-template').detach();\n                return emptyTag.length ? emptyTag.html() : '<div class=\"align-center\">' + __('no_results') + '</div>';\n            }\n\n            //TODO usar virtual-repeat\n            return '' +\n                '<div class=\"ser-autocomplete-wrapper\" ng-class=\"{focus: focus, blur: blur}\">' +\n\n                    '<div class=\"input-group\">' +\n                        getSpanAddon() +\n                        '<input placeholder=\"{{placeholder}}\" ng-model=\"keyword\" ng-disabled=\"disabled\" ng-focus=\"searchFocus()\" ng-blur=\"searchBlur()\" />' +\n                    '</div>' +\n\n                    '<div class=\"fetching line-loader\" ng-show=\"isFetching\"></div>' +\n\n                    '<div class=\"results\" ng-show=\"showResults\">' +\n                        '<div class=\"item\" ng-repeat=\"item in results\" ng-click=\"selectInternalItem(item)\">' + getTemplateTag() + '</div>' +\n\n                        '<div class=\"not-results\" ng-if=\"(results.length == 0) && keyword\">' +\n                            getEmptyTag() +\n                        '</div>' +\n                    '</div>' +\n                '</div>';\n        }\n    };\n\n    \n}]);","angular.module('SER.datepicker', []);\n\nangular.module('SER.datepicker').directive('serDate', ['$filter', function ($filter) {\n\n    return {\n        restrict: 'E',\n        require: ['ngModel'],\n        scope: {\n            ngModel: '=',\n            config: '='\n        },\n        controller: ['$scope', function ($scope) {\n\n            $scope.placeholder = __('select_date');\n            \n            $scope.clear = function () {\n                $scope.ngModel = null;\n            };\n\n        }],\n        link: function (scope, element) {\n\n            var tooltip_instance = element.find('.value-wrapper').tooltipster({\n                content: element.find('.picker-wrapper'),\n                delay: 0,\n                positionTracker: true,\n                trigger: 'click',\n                theme: 'tooltipster-borderless',\n                position: 'bottom',\n                interactive: true\n            });\n\n            var picker_instance = element.find('.date-wrapper').dateRangePicker({\n                inline: true,\n                container: element.find('.date-wrapper'),\n                alwaysOpen: true,\n                language: 'es',\n                singleDate: true,\n                singleMonth: true\n            }).bind('datepicker-change', function (event, obj) {\n\n                scope.$apply(function () {\n                    scope.ngModel = obj.date1;\n                });\n\n                element.find('.value-wrapper').tooltipster('close');\n\n            }).bind('datepicker-next-month-finish-clicked', function (event) {\n                element.find('.value-wrapper').tooltipster('reposition');\n            }).bind('datepicker-prev-month-finish-clicked', function (event) {\n                element.find('.value-wrapper').tooltipster('reposition');\n            });\n\n            if (scope.ngModel) {\n                picker_instance.data('dateRangePicker').setStart(scope.ngModel, true);\n            }\n\n            scope.$watch('ngModel', function (newValue, oldValue) {\n                if (newValue && newValue != oldValue) {\n                    picker_instance.data('dateRangePicker').setStart(newValue, true);\n                }\n            }, true);\n\n        },\n        template: function (element, attr) {\n\n            return '' +\n                '<div class=\"ser-date-wrapper\" ng-class=\"{open: open, \\'has-value\\': blur}\">' +\n\n                    '<div ng-class=\"{\\'bttn-group\\': ngModel}\" class=\"row center-center\">' +\n                        '<button type=\"button\" class=\"bttn value-wrapper\">{{ (ngModel | date: \\'longDate\\') || placeholder }}</button>' +\n                        '<button type=\"button\" ng-show=\"ngModel\" class=\"bttn clear\" ng-click=\"clear()\"></button>' +\n                    '</div>' +\n\n                    '<div class=\"tooltip-templates\">' +\n                        '<div class=\"picker-wrapper\">' +\n                            '<div class=\"date-wrapper\"></div>' +\n                        '</div>' +\n                    '</div>' +\n                '</div>';\n        }\n    };\n\n\n}]);\n\nangular.module('SER.datepicker').directive('serDateRange', ['$filter', function ($filter) {\n\n    return {\n        restrict: 'E',\n        require: ['ngModel'],\n        scope: {\n            ngModel: '=',\n            config: '='\n        },\n        controller: ['$scope', function ($scope) {\n\n            $scope.placeholder = __('select_date_range');\n\n            $scope.clear = function () {\n                $scope.ngModel = null;\n                $scope.placeholder = __('select_date_range');\n            };\n\n        }],\n        link: function (scope, element) {\n\n            var tooltip_instance = element.find('.value-wrapper').tooltipster({\n                content: element.find('.picker-wrapper'),\n                delay: 0,\n                positionTracker: true,\n                trigger: 'click',\n                theme: 'tooltipster-borderless',\n                position: 'bottom',\n                interactive: true\n            });\n\n            var picker_instance = element.find('.date-wrapper').dateRangePicker({\n                inline: true,\n                container: element.find('.date-wrapper'),\n                alwaysOpen: true,\n                language: 'es'\n            }).bind('datepicker-change', function (event, obj) {\n\n                scope.$apply(function () {\n\n                    obj.date1.setHours(0, 0, 0, 0);\n                    obj.date2.setHours(23, 59, 59, 0);\n                    scope.ngModel = {\n                        FromDate: obj.date1,\n                        ToDate: obj.date2\n                    };\n\n                    scope.placeholder = $filter('date')(obj.date1, 'longDate') + ' - ' + $filter('date')(obj.date2, 'longDate');\n                });\n\n                element.find('.value-wrapper').tooltipster('close');\n\n            }).bind('datepicker-next-month-finish-clicked', function (event) {\n                element.find('.value-wrapper').tooltipster('reposition');\n            }).bind('datepicker-prev-month-finish-clicked', function (event) {\n                element.find('.value-wrapper').tooltipster('reposition');\n            });\n\n            if (scope.ngModel && scope.ngModel.FromDate && scope.ngModel.ToDate) {\n                picker_instance.data('dateRangePicker').setStart(scope.ngModel.FromDate, true);\n                picker_instance.data('dateRangePicker').setEnd(scope.ngModel.ToDate, true);\n                scope.placeholder = $filter('date')(scope.ngModel.FromDate, 'longDate') + ' - ' + $filter('date')(scope.ngModel.ToDate, 'longDate');\n            }\n\n            scope.$watch('ngModel', function (newValue, oldValue) {\n                if (newValue && newValue != oldValue) {\n                    picker_instance.data('dateRangePicker').setStart(scope.ngModel.FromDate, true);\n                    picker_instance.data('dateRangePicker').setEnd(scope.ngModel.ToDate, true);\n                }\n            }, true);\n\n        },\n        template: function (element, attr) {\n\n            return '' +\n                '<div class=\"ser-date-wrapper\" ng-class=\"{open: open, \\'has-value\\': blur}\">' +\n\n                    '<div ng-class=\"{\\'bttn-group\\': ngModel}\" class=\"row center-center\">' +\n                        '<button type=\"button\" class=\"bttn value-wrapper\">{{ placeholder }}</button>' +\n                        '<button type=\"button\" ng-show=\"ngModel\" class=\"bttn clear\" ng-click=\"clear()\"></button>' +\n                    '</div>' +\n\n                    '<div class=\"tooltip-templates\">' +\n                        '<div class=\"picker-wrapper\">' +\n                            '<div class=\"date-wrapper\"></div>' +\n                        '</div>' +\n                    '</div>' +\n                '</div>';\n        }\n    };\n\n\n}]);","angular.module('SER.filters', []);\n\nangular.module('SER.filters').filter('PascalCase', [function () {\n    return function (input) {\n\n        return input\n            // Look for long acronyms and filter out the last letter\n            .replace(/([A-Z]+)([A-Z])/g, ' $1 $2')\n            // Look for lower-case letters followed by upper-case letters\n            .replace(/([a-z\\d])([A-Z])/g, '$1 $2')\n            // Look for lower-case letters followed by numbers\n            .replace(/([a-zA-Z])(\\d)/g, '$1 $2')\n            .replace(/^./, function (str) { return str.toUpperCase(); })\n            // Remove any white space left around the word\n            .trim();\n    };\n}]);\n\nangular.module('SER.filters').filter('getItem', ['$filter', function ($filter) {\n    return function (input, array, field) {\n        var fields = {};\n        fields[field] = input;\n        var resultArray = [];\n        resultArray = $filter('filter')(array, fields, true);\n        if (hasValue(resultArray) && 0 < resultArray.length) return resultArray[0];\n        return null;\n    };\n}]);\n\nangular.module('SER.filters').filter('minutesTime', [function () {\n    /**\n     * input should be a number of minutes to be parsed\n     * @param {input} number of minutes\n     * @param {type} true = 00:00:00 | false = 00:00 am or pm\n     */\n    return function (input, type) {\n        var\n            hours = parseInt(input / 60, 10),\n            minutes = (input - (hours * 60)) < 10 ? '0' + (input - (hours * 60)) : input - (hours * 60),\n            meridian = type ? ':00' : (hours >= 12 && hours !== 24 ? ' pm' : ' am');\n\n        return (!type && hours > 12 ? (hours === 24 ? '00' : (hours - 12 < 10 ? '0' : '') + (hours - 12)) : (hours < 10 ? '0' : '') + hours) + ':' + minutes + meridian;\n    };\n}]);\n\nangular.module('SER.filters').filter('timeMinutes', [function () {\n\n    return function (input) {\n        return (parseInt(input.split(':')[0]) * 60) + parseInt(input.split(':')[1]);\n    };\n\n}]);\n\nangular.module('SER.filters').filter('leadingChar', function () {\n    return function (input, width, char) {\n        char = char || '0';\n        if (hasValue(input)) {\n            input = input + '';\n            return input.length >= width ? input : new Array(width - input.length + 1).join(char) + input;\n        } else {\n            return '';\n        }\n    };\n});","var i18n = {\n    __DICT: undefined,\n    loadJSON: function (locale_json) {\n        this.__DICT = locale_json;\n    },\n    __: function (key) {\n        if (typeof this.__DICT !== 'undefined') {\n\n            if (key in this.__DICT) {\n                return this.__DICT[key];\n            } else {\n                console.warn('Locale not found for: ' + key);\n                return key;\n            }\n        } else {\n            console.error('Locale JSON file not loaded | Locale not found for: ' + key);\n        }\n\n    }\n};\n\nvar __ = function (key) {\n    return i18n.__(key);\n};\n\nangular.module('SER.i18n', []);\n\nangular.module('SER.i18n').filter('translate', function () {\n    return function (input) {\n        return i18n.__(input);\n    };\n});","angular.module('SER.image', []);\n\nangular.module('SER.image').directive('callbackImage', function () {\n    return {\n        restrict: 'A',\n        link: function (scope, element, attrs) {\n\n            element.on('dragstart', function (event) { event.preventDefault(); });\n\n            element.bind('error', function () {\n                element[0].src = attrs.callbackImage;\n            });\n\n        }\n    };\n});\n\nangular.module('SER.image').directive('retryGetImage', function () {\n    return {\n        restrict: 'A',\n        scope: {\n            retryGetImage: '@',\n            fallbackRetry: '='\n        },\n        link: function (scope, element, attrs) {\n\n            var timeout;\n\n            function retry() {\n                timeout = setTimeout(function () {\n                    element[0].src = scope.retryGetImage;\n                }, 5000);\n            }\n\n            scope.$watch('retryGetImage', function (new_value) {\n\n                clearTimeout(timeout);\n                element.unbind('load');\n                element.unbind('error');\n                element[0].src = new_value;\n                element.addClass('hidden');\n\n                element.bind('load', function () {\n                    element.removeClass('hidden');\n                    scope.fallbackRetry = false;\n                    clearTimeout(timeout);\n                    scope.$apply();\n                });\n\n                element.bind('error', function () {\n                    scope.fallbackRetry = true;\n                    retry();\n                });\n            });\n\n        }\n    };\n});\n\nangular.module('SER.image').directive('imgZoom', ['$timeout', function ($timeout) {\n    return {\n        restrict: 'E',\n        scope: {\n            image: '=',\n            options: '='\n        },\n        link: function (scope, element, attrs) {\n\n            element.find('.target').on('load', function () {\n                element.find('.loader').addClass('ng-hide');\n            });\n\n            element.find('.target').on('error', function () {\n                element.find('.loader').addClass('ng-hide');\n                scope.zoomReset();\n            });\n\n            scope.size = 'auto';\n\n            var defaults = {\n                'max-height': 'none'\n            };\n\n            angular.merge(defaults, scope.options);\n            //var clicked = false, clickY;\n            //$(element).on({\n            //    'mousemove': function (e) {\n            //        clicked && updateScrollPos(e);\n            //    },\n            //    'mousedown': function (e) {\n            //        clicked = true;\n            //        clickY = e.pageY;\n            //    },\n            //    'mouseup': function () {\n            //        clicked = false;\n            //    }\n            //});\n\n            //var updateScrollPos = function (e) {\n            //    $(element).css('cursor', 'row-resize');\n            //    $(element).scrollTop($(element).scrollTop() + (clickY - e.pageY));\n            //}\n\n            scope.zoomIn = function () {\n                scope.size = element.find('.target').width() * 1.1;\n                element.find('.target').css({\n                    'max-height': 'none',\n                    height: 'auto'\n                });\n            };\n\n            scope.zoomOut = function () {\n                scope.size = element.find('.target').width() / 1.1;\n                element.find('.target').css({\n                    'max-height': 'none',\n                    height: 'auto'\n                });\n            };\n\n            scope.zoomReset = function () {\n                scope.size = 'auto';\n                element.find('.target').css({\n                    'max-height': defaults['max-height'],\n                    height: 'auto'\n                });\n            };\n\n            scope.zoomExpand = function () {\n                scope.size = 'auto';\n                element.find('.target').css({\n                    'max-height': defaults['max-height'],\n                    height: element.height() - 2\n                });\n            };\n\n            $timeout(function () {\n                scope.zoomExpand();\n            }, 500);\n        },\n        template: function () {\n            return '' +\n                '<div class=\"controls\">' +\n                    '<button class=\"bttn icon\" ng-click=\"zoomOut()\"><i class=\"icon-zoom-out\"></i></button>' +\n                    '<button class=\"bttn icon\" ng-click=\"zoomReset()\"><i class=\"icon-zoom-actual\"></i></button>' +\n                    '<button class=\"bttn icon\" ng-click=\"zoomExpand()\"><i class=\"icon-zoom-expand\"></i></button>' +\n                    '<button class=\"bttn icon\" ng-click=\"zoomIn()\"><i class=\"icon-zoom-in\"></i></button>' +\n                '</div>' +\n                '<div class=\"loader dots\">' + __('loading') + '</div>' +\n                '<img class=\"target\" ng-src=\"{{ image }}\" ng-style=\"{width: size}\" callback-image=\"/images/' + __(\"no_image_available.svg\") + '\" />';\n        }\n    };\n}]);\n\nangular.module('SER.image').directive('zoomImage', function () {\n    return {\n        restrict: 'A',\n        link: function (scope, element, attrs) {\n\n            var defaultValues = {\n                responsive: true,\n                loadingIcon: true,\n                tint: true,\n                scrollZoom: true,\n                zoomWindowWidth: 150,\n                zoomWindowHeight: 150,\n                imageSrc: attrs.ngSrc\n            };\n\n            angular.merge(defaultValues, scope.$eval(attrs.zoomImage));\n\n            element.elevateZoom(defaultValues);\n\n        }\n    };\n});","angular.module('SER.loader', []).service('afterPromises', [\n    function () {\n\n        var afterPromises = function (topCount, callbackFunction) {\n            this.callback = callbackFunction;\n            this.topCount = topCount;\n            this.counter = 0;\n        };\n\n        afterPromises.prototype.notify = function () {\n            this.counter += 1;\n            if (this.counter == this.topCount) {\n                this.callback();\n            }\n        };\n\n        return afterPromises;\n    }\n]);\n","angular.module('SER.search').directive('remoteSearch', ['$http', function search($http) {\n\n    return {\n        restrict: 'A',\n        require: ['ngModel'],\n        scope: {\n            remoteSearchResults: '=',\n            remoteSearch: '=',\n            model: '=ngModel'\n        },\n        link: function (scope, elem, attrs, ngModel) {\n\n            var inputChangedPromise;\n\n            var fetch = function () {\n\n                scope.$apply(function () {\n                    scope.remoteSearchResults = [];\n                });\n                \n                if (scope.model) {\n                    $http.get(scope.remoteSearch + scope.model).then(function (response) {\n                        if (0 < response.data.length) {\n                            scope.remoteSearchResults = response.data;\n                        }\n                    });\n                }\n            };\n\n            elem.on('keyup', function (evt) {\n                if (inputChangedPromise) {\n                    clearTimeout(inputChangedPromise);\n                }\n                inputChangedPromise = setTimeout(function () {\n                    fetch();\n                }, 500);\n            });\n\n        }\n    };\n\n    \n}]);\n\nangular.module('SER.search').directive('ngEnter', function () {\n    return function (scope, element, attrs) {\n        element.bind('keydown keypress', function (event) {\n            if (event.which === 13) {\n                scope.$apply(function () {\n                    scope.$eval(attrs.ngEnter, { $event: event });\n                });\n                event.preventDefault();\n                element.blur();\n            }\n        });\n    };\n});\n\n//angular.module('SER.search').directive('highlightText', ['$interpolate', '$parse', function search($interpolate, $parse) {\n//    return {\n//        terminal: true,\n//        controller: 'MdHighlightCtrl',\n//        compile: function mdHighlightCompile(tElement, tAttr) {\n//            var termExpr = $parse(tAttr.mdHighlightText);\n//            var unsafeContentExpr = $interpolate(tElement.html());\n\n//            return function mdHighlightLink(scope, element, attr, ctrl) {\n//                ctrl.init(termExpr, unsafeContentExpr);\n//            };\n//        }\n//    };\n//}]);","//TODO actualizar highlighted\nangular.module('SER.selector', []).directive('selector', [\n    '$rootScope',\n    '$filter',\n    '$timeout',\n    '$window',\n    '$http',\n    '$q',\n    '$templateCache',\n    function ($rootScope, $filter, $timeout, $window, $http, $q, $templateCache) {\n\n        return {\n            restrict: 'EC',\n            replace: true,\n            transclude: true,\n            scope: {\n                value: '=model',\n                disabled: '=?disable',\n                disableSearch: '=?',\n                required: '=?require',\n                multiple: '=?multi',\n                placeholder: '@?',\n                valueAttr: '@',\n                labelAttr: '@?',\n                options: '=?',\n                dropdownClass: '@?',\n                limit: '=?',\n                rtl: '=?',\n                api: '=?',\n                change: '&?',\n                removeButton: '=?',\n                softDelete: '=?',\n                closeAfterSelection: '=?'\n            },\n            link: function (scope, element, attrs, controller, transclude) {\n            \n                var dropdown = angular.element(element[0].querySelector('.selector-dropdown'));\n                var selectInput = angular.element(element[0].querySelector('select'));\n                var originParents = element.parents();\n                var namespace = 'selector-' + Math.round(Math.random() * 1000000);\n                dropdown.attr('id', namespace);\n\n                transclude(scope, function (clone, scope) {\n                    var filter = $filter('filter'),\n                        input = angular.element(element[0].querySelector('.selector-input input')),\n                        inputCtrl = input.controller('ngModel'),\n                        selectCtrl = element.find('select').controller('ngModel'),\n                        defaults = {\n                            api: {},\n                            search: '',\n                            disableSearch: false,\n                            selectedValues: [],\n                            highlighted: 0,\n                            valueAttr: null,\n                            labelAttr: 'label',\n                            options: [],\n                            limit: Infinity,\n                            removeButton: true,\n                            closeAfterSelection: true\n                        };\n\n                    dropdown.detach();\n\n                    // Default attributes\n                    if (!angular.isDefined(scope.value) && scope.multiple) scope.value = [];\n\n                    for (var defaultsKey in defaults) {\n                        if (!angular.isDefined(scope[defaultsKey])) scope[defaultsKey] = defaults[defaultsKey];\n                    }\n\n                    // Options' utilities\n                    scope.getObjValue = function (obj, path) {\n                        var key;\n                        if (!angular.isDefined(obj) || !angular.isDefined(path)) return obj;\n                        path = angular.isArray(path) ? path : path.split('.');\n                        key = path.shift();\n\n                        if (key.indexOf('[') > 0) {\n                            var match = key.match(/(\\w+)\\[(\\d+)\\]/);\n                            if (match !== null) {\n                                obj = obj[match[1]];\n                                key = match[2];\n                            }\n                        }\n                        return path.length === 0 ? obj[key] : scope.getObjValue(obj[key], path);\n                    };\n                    scope.setObjValue = function (obj, path, value) {\n                        var key;\n                        if (!angular.isDefined(obj)) obj = {};\n                        path = angular.isArray(path) ? path : path.split('.');\n                        key = path.shift();\n\n                        if (key.indexOf('[') > 0) {\n                            var match = key.match(/(\\w+)\\[(\\d+)\\]/);\n                            if (match !== null) {\n                                obj = obj[match[1]];\n                                key = match[2];\n                            }\n                        }\n                        obj[key] = path.length === 0 ? value : scope.setObjValue(obj[key], path, value);\n                        return obj;\n                    };\n                    scope.optionValue = function (option) {\n                        return scope.valueAttr === null ? option : scope.getObjValue(option, scope.valueAttr);\n                    };\n                    scope.optionEquals = function (option, value) {\n                        return angular.equals(scope.optionValue(option), angular.isDefined(value) ? value : scope.value);\n                    };\n\n                    // Value utilities\n                    scope.setValue = function (value) {\n                        if (!scope.multiple) scope.value = scope.valueAttr === null ? value : scope.getObjValue(value || {}, scope.valueAttr);\n                        else scope.value = scope.valueAttr === null ? value || [] : (value || []).map(function (option) { return scope.getObjValue(option, scope.valueAttr); });\n                    };\n                    scope.hasValue = function () {\n                        return scope.multiple ? (scope.value || []).length > 0 : !!scope.value;\n                    };\n\n                    // Fill with options in the select\n                    scope.optionToObject = function (option) {\n                        var object = {},\n                            element = angular.element(option);\n\n                        angular.forEach(option.dataset, function (value, key) {\n                            if (!key.match(/^\\$/)) object[key] = value;\n                        });\n                        if (option.value)\n                            scope.setObjValue(object, scope.valueAttr || 'value', option.value);\n                        if (element.text())\n                            scope.setObjValue(object, scope.labelAttr, element.text().trim());\n                        scope.options.push(object);\n\n                        if (element.attr('selected') && (scope.multiple || !scope.hasValue()))\n                            if (!scope.multiple) {\n                                if (!scope.value) scope.value = scope.optionValue(object);\n                            } else {\n                                if (!scope.value) scope.value = [];\n                                scope.value.push(scope.optionValue(object));\n                            }\n                    };\n                    scope.fillWithHtml = function () {\n                        scope.options = [];\n                        angular.forEach(clone, function (element) {\n                            var tagName = (element.tagName || '').toLowerCase();\n\n                            if (tagName === 'option') scope.optionToObject(element);\n                        });\n                        scope.updateSelected();\n                    };\n\n                    // Initialization\n                    scope.initialize = function () {\n                        if (!angular.isArray(scope.options) || !scope.options.length)\n                            scope.fillWithHtml();\n                        if (scope.hasValue()) {\n                            if (!scope.multiple) {\n                                if (angular.isArray(scope.value)) scope.value = scope.value[0];\n                            } else {\n                                if (!angular.isArray(scope.value)) scope.value = [scope.value];\n                            }\n                            scope.updateSelected();\n                            scope.filterOptions();\n                            scope.updateValue();\n                        }\n                    };\n                    scope.$watch('multiple', function () {\n                        $timeout(scope.setInputWidth);\n                    });\n\n                    var dropdownPosition = function () {\n                        var label = input.parent()[0];\n\n                        var style = {\n                            top: '',\n                            bottom: '',\n                            left: label.getBoundingClientRect().left + 'px',\n                            width: label.offsetWidth + 'px'\n                        };\n\n                        if (angular.element(document.body).height() - (label.offsetHeight + label.getBoundingClientRect().top) >= 220) {\n                            style.top = label.offsetHeight + label.getBoundingClientRect().top;\n                            dropdown.removeClass('ontop');\n                        } else {\n                        \n                            style.bottom = angular.element(document.body).height() - label.getBoundingClientRect().top;\n                            dropdown.addClass('ontop');\n                        }\n\n                        dropdown.css(style);\n                    };\n\n                    // Dropdown utilities\n                    scope.showDropdown = function () {\n                        dropdownPosition();\n                        angular.element(document.body).append(dropdown);\n\n                        $timeout(function () {\n                            angular.element(window).triggerHandler('resize');\n                        }, 50);\n                    };\n                    scope.open = function () {\n                        if (scope.multiple && (scope.selectedValues || []).length >= scope.limit) return;\n                        scope.isOpen = true;\n                        scope.showDropdown();\n                        $timeout(scope.scrollToHighlighted);\n                    };\n                    scope.close = function () {\n                        scope.isOpen = false;\n                        dropdown.detach();\n                        scope.resetInput()\n                    };\n                    var highlight = function (index) {\n                        if (scope.filteredOptions.length)\n                            scope.highlighted = (scope.filteredOptions.length + index) % scope.filteredOptions.length;\n                    };\n                    var decrementHighlighted = function () {\n                        highlight(scope.highlighted - 1);\n                    };\n                    var incrementHighlighted = function () {\n                        highlight(scope.highlighted + 1);\n                    };\n                    scope.set = function (option) {\n                        if (scope.multiple && (scope.selectedValues || []).length >= scope.limit) return;\n\n                        if (!scope.multiple) scope.selectedValues = [option];\n                        else {\n                            if (!scope.selectedValues)\n                                scope.selectedValues = [];\n                            if (scope.selectedValues.indexOf(option) < 0)\n                                scope.selectedValues.push(option);\n                        }\n                        if (!scope.multiple && scope.closeAfterSelection) input.blur();\n                        highlight(scope.options.indexOf(option));\n                        scope.resetInput();\n                        selectCtrl.$setDirty();\n                    };\n                    scope.unset = function (index) {\n                        if (!scope.multiple) scope.selectedValues = [];\n                        else scope.selectedValues.splice(angular.isDefined(index) ? index : scope.selectedValues.length - 1, 1);\n                        scope.resetInput();\n                        selectCtrl.$setDirty();\n                    };\n                    scope.keydown = function (e) {\n                        switch (e.keyCode) {\n                            case KEYS.up:\n                                if (!scope.isOpen) break;\n                                decrementHighlighted();\n                                e.preventDefault();\n                                break;\n                            case KEYS.down:\n                                if (!scope.isOpen) scope.open();\n                                else incrementHighlighted();\n                                e.preventDefault();\n                                break;\n                            case KEYS.escape:\n                                highlight(0);\n                                scope.close();\n                                break;\n                            case KEYS.enter:\n                                if (scope.isOpen) {\n                                    if (scope.filteredOptions.length)\n                                        scope.set();\n                                    e.preventDefault();\n                                }\n                                break;\n                            case KEYS.backspace:\n                                if (!input.val()) {\n                                    var search = scope.getObjValue(scope.selectedValues.slice(-1)[0] || {}, scope.labelAttr || '');\n                                    scope.unset();\n                                    scope.open();\n                                    if (scope.softDelete && !scope.disableSearch)\n                                        $timeout(function () {\n                                            scope.search = search;\n                                        });\n                                    e.preventDefault();\n                                }\n                                break;\n                            case KEYS.left:\n                            case KEYS.right:\n                            case KEYS.shift:\n                            case KEYS.ctrl:\n                            case KEYS.alt:\n                            case KEYS.tab:\n                            case KEYS.leftCmd:\n                            case KEYS.rightCmd:\n                                break;\n                            default:\n                                if (!scope.multiple && scope.hasValue()) {\n                                    e.preventDefault();\n                                } else {\n                                    scope.open();\n                                    highlight(0);\n                                }\n                                break;\n                        }\n                    };\n\n                    // Filtered options\n                    scope.inOptions = function (options, value) {\n                        return options.indexOf(value) >= 0;\n                    };\n                    scope.filterOptions = function () {\n                        scope.filteredOptions = filter(scope.options || [], scope.search);\n                        if (!angular.isArray(scope.selectedValues)) scope.selectedValues = [];\n                        if (scope.multiple)\n                            scope.filteredOptions = scope.filteredOptions.filter(function (option) {\n                                return !scope.inOptions(scope.selectedValues, option);\n                            });\n                        else {\n                            var index = scope.filteredOptions.indexOf(scope.selectedValues[0]);\n                            if (index >= 0) highlight(index);\n                        }\n                    };\n\n                    // Input width utilities\n                    scope.measureWidth = function () {\n                        var width,\n                            styles = getStyles(input[0]),\n                            shadow = angular.element('<span class=\"selector-shadow\"></span>');\n                        shadow.text(input.val() || (!scope.hasValue() ? scope.placeholder : '') || '');\n                        angular.element(document.body).append(shadow);\n                        angular.forEach(['fontFamily', 'fontSize', 'fontWeight', 'fontStyle', 'letterSpacing', 'textTransform', 'wordSpacing', 'textIndent'], function (style) {\n                            shadow.css(style, styles[style]);\n                        });\n                        width = shadow[0].offsetWidth;\n                        shadow.remove();\n                        return width;\n                    };\n                    scope.setInputWidth = function () {\n                        var width = scope.measureWidth() + 1;\n                        input.css('width', width + 'px');\n                    };\n                    scope.resetInput = function () {\n                        input.val('');\n                        scope.setInputWidth();\n                        $timeout(function () { scope.search = ''; });\n                    };\n\n                    scope.$watch('[search, options, value]', function () {\n                        // hide selected items\n                        scope.filterOptions();\n                        $timeout(function () {\n                            // set input width\n                            scope.setInputWidth();\n                            // repositionate dropdown\n                            if (scope.isOpen) scope.showDropdown();\n                        });\n                    }, true);\n\n                    // Update value\n                    scope.updateValue = function (origin) {\n                        if (!angular.isDefined(origin)) origin = scope.selectedValues || [];\n                        scope.setValue(!scope.multiple ? origin[0] : origin);\n                    };\n                    scope.$watch('selectedValues', function (newValue, oldValue) {\n                        if (angular.equals(newValue, oldValue)) return;\n                        scope.updateValue();\n                        if (angular.isFunction(scope.change))\n                            scope.change(scope.multiple\n                                ? { newValue: newValue, oldValue: oldValue }\n                                : { newValue: (newValue || [])[0], oldValue: (oldValue || [])[0] });\n                    }, true);\n                    scope.$watchCollection('options', function (newValue, oldValue) {\n                        if (angular.equals(newValue, oldValue)) return;\n                        scope.updateSelected();\n                    });\n\n                    // Update selected values\n                    scope.updateSelected = function () {\n                        if (!scope.multiple) scope.selectedValues = (scope.options || []).filter(function (option) { return scope.optionEquals(option); }).slice(0, 1);\n                        else\n                            scope.selectedValues = (scope.value || []).map(function (value) {\n                                return filter(scope.options, function (option) {\n                                    return scope.optionEquals(option, value);\n                                })[0];\n                            }).filter(function (value) { return angular.isDefined(value); }).slice(0, scope.limit);\n                    };\n                    scope.$watch('value', function (newValue, oldValue) {\n                        if (angular.equals(newValue, oldValue)) return;\n                        scope.updateSelected();\n                    }, true);\n\n                    // DOM event listeners\n                    input = angular.element(element[0].querySelector('.selector-input input'))\n                        .on('focus', function () {\n                            $timeout(function () {\n                                scope.$apply(scope.open);\n                            });\n                        })\n                        .on('blur', function () {\n                            scope.close();\n                        })\n                        .on('keydown', function (e) {\n                            scope.$apply(function () {\n                                scope.keydown(e);\n                            });\n                        })\n                        .on('input', function () {\n                            scope.setInputWidth();\n                        });\n\n                    dropdown\n                        .on('mousedown', function (e) {\n                            e.preventDefault();\n                        });\n\n                    // scrolling may require the tooltip to be moved or even\n                    // repositioned in some cases\n\n                    originParents.each(function (i, parent) {\n                        angular.element(parent).on('scroll.' + namespace, function (e) {\n                            dropdownPosition();\n                        });\n                    });\n\n                    // Update select controller\n                    scope.$watch(function () { return inputCtrl.$pristine; }, function ($pristine) {\n                        selectCtrl[$pristine ? '$setPristine' : '$setDirty']();\n                    });\n                    scope.$watch(function () { return inputCtrl.$touched; }, function ($touched) {\n                        selectCtrl[$touched ? '$setTouched' : '$setUntouched']();\n                    });\n\n                    // Expose APIs\n                    angular.forEach(['open', 'close'], function (api) {\n                        scope.api[api] = scope[api];\n                    });\n                    scope.api.focus = function () {\n                        input[0].focus();\n                    };\n                    scope.api.set = function (value) {\n                        return scope.value = value;\n                    };\n                    scope.api.unset = function (value) {\n                        var values = !value ? scope.selectedValues : (scope.selectedValues || []).filter(function (option) { return scope.optionEquals(option, value); }),\n                            indexes =\n                                scope.selectedValues.map(function (option, index) {\n                                    return scope.inOptions(values, option) ? index : -1;\n                                }).filter(function (index) { return index >= 0; });\n\n                        angular.forEach(indexes, function (index, i) {\n                            scope.unset(index - i);\n                        });\n                    };\n\n                    scope.isDirty = function () {\n                        return selectInput.hasClass('ng-dirty');\n                    };\n\n                    scope.isInvalid = function () {\n                        return selectInput.hasClass('ng-invalid');\n                    };\n\n                    scope.initialize();\n                });\n\n                scope.$on('$destroy', function () {\n                    dropdown.remove();\n                    dropdown.off('mousedown');\n                    angular.element(element[0].querySelector('.selector-input input')).off('focus blur keydown input ');\n                    angular.element(document.body).off('resize.' + namespace);\n                    originParents.each(function (i, el) {\n                        $(el).off('scroll.' + namespace  + ' resize.' + namespace);\n                    });\n                    // clear the array to prevent memory leaks\n                    originParents = null;\n                });\n            },\n            template: function (element, attrs) {\n\n                var viewItemTemplate = $templateCache.get(attrs.viewItemTemplate) ? $templateCache.get(attrs.viewItemTemplate) : '<span ng-bind=\"getObjValue(option, labelAttr) || option\"></span>';\n                var dropdownItemTemplate;\n\n                if (attrs.labelAttr) {\n                    dropdownItemTemplate = '<span ng-bind=\"getObjValue(option, labelAttr) || option\"></span>';\n                } else {\n                    dropdownItemTemplate = $templateCache.get(attrs.viewItemTemplate) ? $templateCache.get(attrs.viewItemTemplate) : '<span ng-bind=\"getObjValue(option, labelAttr) || option\"></span>';\n                }\n\n                if (attrs.dropdownItemTemplate) {\n                    dropdownItemTemplate = $templateCache.get(attrs.dropdownItemTemplate) ? $templateCache.get(attrs.dropdownItemTemplate) : '<span ng-bind=\"getObjValue(option, labelAttr) || option\"></span>';\n                }\n\n                var name = '';\n\n                if (attrs.name) {\n                    name = 'name=\"' + attrs.name + '\"';\n                }\n\n                var template = $templateCache.get('selector/Base') ? $templateCache.get('selector/Base') : '' +\n                    '<div class=\"selector-container\" ng-attr-dir=\"{{rtl ? \\'rtl\\' : \\'ltr\\'}}\" ng-class=\"{open: isOpen, empty: !filteredOptions.length && !search, \\'ng-dirty\\': isDirty(), \\'ng-invalid\\': isInvalid(),multiple: multiple, \\'has-value\\': hasValue(), rtl: rtl, \\'remove-button\\': removeButton, disabled: disabled}\">' +\n                        '<select ' + name + ' ng-required=\"required && !hasValue()\" class=\"not-styled\" ng-model=\"selectedValues\" multiple style=\"display: none;\"></select>' +\n                        '<label class=\"selector-input\">' +\n                            '<ul class=\"selector-values\">' +\n                                '<li ng-repeat=\"(index, option) in selectedValues track by index\">' +\n                                    '<div>' + viewItemTemplate + '</div>' +\n                                    '<div ng-if=\"multiple\" class=\"selector-helper\" ng-click=\"!disabled && unset(index)\">' +\n                                        '<span class=\"selector-icon\"></span>' +\n                                    '</div>' +\n                                '</li>' +\n                            '</ul>' +\n                            '<input ng-model=\"search\" class=\"selector-search-input not-styled\" placeholder=\"{{!hasValue() ? placeholder : \\'\\'}}\"' +\n                                'ng-disabled=\"disabled\" ng-readonly=\"disableSearch\" ng-required=\"required && !hasValue()\" autocomplete=\"off\">' +\n                            '<div ng-if=\"!multiple\" class=\"selector-helper selector-global-helper\" ng-click=\"!disabled && removeButton && unset()\">' +\n                                '<span class=\"selector-icon\"></span>' +\n                            '</div>' +\n                        '</label>' +\n                        '<ul md-virtual-repeat-container md-auto-shrink md-top-index=\"highlighted\" class=\"selector-dropdown ' + attrs.dropdownClass + '\">' +\n                            '<li md-virtual-repeat=\"option in filteredOptions\" ng-class=\"{active: highlighted == $index}\" class=\"selector-option\" ng-click=\"set(option)\">' + dropdownItemTemplate + '</li>' +\n                        '</ul>' +\n                    '</div>';\n\n                return template;\n            }\n        };\n    }\n]);","angular.module('SER.tooltipster', []);\n\nangular.module('SER.tooltipster').directive('tooltipster', function () {\n    return {\n        restrict: 'A',\n        link: function (scope, element, attrs) {\n\n            var tooltipster_default = {\n                content: attrs.tooltipster,\n                maxWidth: 300,\n                delay: 0,\n                contentAsHTML: true,\n                positionTracker: true,\n                trigger: 'hover',\n                theme: 'tooltipster-borderless'\n            };\n\n            angular.merge(tooltipster_default, scope.$eval(attrs.tooltipsterOptions));\n            element.tooltipster(tooltipster_default);\n\n        }\n    };\n});\n\nangular.module('SER.tooltipster').directive('tooltipsterMenu', function () {\n    return {\n        restrict: 'A',\n        link: function (scope, element, attrs) {\n\n            var tooltipster_default = {\n                content: element.find('.tooltip-content'),\n                delay: 0,\n                positionTracker: true,\n                trigger: 'click',\n                theme: 'tooltipster-borderless',\n                position: 'bottom',\n                interactive: true\n            };\n\n            angular.merge(tooltipster_default, scope.$eval(attrs.tooltipsterMenu));\n            element.tooltipster(tooltipster_default);\n\n            scope.closeTooltip = function () {\n                element.tooltipster('close');\n            };\n\n            element.find('.action').on('click', function () {\n                scope.closeTooltip();\n            });\n\n        }\n    };\n});\n\nangular.module('SER.tooltipster').directive('tooltipsterHtml', function () {\n    return {\n        restrict: 'A',\n        link: function (scope, element, attrs) {\n\n            var tooltipster_default = {\n                content: element.find('.tooltip-content'),\n                delay: 0,\n                positionTracker: true,\n                trigger: 'hover',\n                theme: 'tooltipster-borderless',\n                position: 'top'\n            };\n\n            angular.merge(tooltipster_default, scope.$eval(attrs.tooltipsterHtml));\n            element.tooltipster(tooltipster_default);\n\n        }\n    };\n});","angular.module('SER.match', []).directive('match', ['$parse', function ($parse) {\n    return {\n        require: '?ngModel',\n        restrict: 'A',\n        link: function(scope, elem, attrs, ctrl) {\n            if(!ctrl || !attrs.match) {\n                return;\n            }\n\n            var matchGetter = $parse(attrs.match);\n            var caselessGetter = $parse(attrs.matchCaseless);\n            var noMatchGetter = $parse(attrs.notMatch);\n            var matchIgnoreEmptyGetter = $parse(attrs.matchIgnoreEmpty);\n\n            scope.$watch(getMatchValue, function(){\n                ctrl.$$parseAndValidate();\n            });\n\n            ctrl.$validators.match = function(modelValue, viewValue){\n              var matcher = modelValue || viewValue;\n              var match = getMatchValue();\n              var notMatch = noMatchGetter(scope);\n              var value;\n\n              if (matchIgnoreEmptyGetter(scope) && !viewValue) {\n                return true;\n              }\n\n              if(caselessGetter(scope)){\n                value = angular.lowercase(matcher) === angular.lowercase(match);\n              }else{\n                value = matcher === match;\n              }\n              /*jslint bitwise: true */\n              value ^= notMatch;\n              /*jslint bitwise: false */\n              return !!value;\n            };\n\n            function getMatchValue(){\n                var match = matchGetter(scope);\n                if(angular.isObject(match) && match.hasOwnProperty('$viewValue')){\n                    match = match.$viewValue;\n                }\n                return match;\n            }\n        }\n    };\n}]);\n","angular.module('SER.barcode', []);\n\nangular.module('SER.barcode').directive('barcode', function () {\n\n    return {\n        restrict: 'EA',\n        scope: {\n            model: '=',\n            options: '='\n        },\n        link: function (scope, element, attrs) {\n            \n            var default_options = {\n                format: \"CODE128\",\n                lineColor: \"#000000\",\n                width: 3,\n                height: 110,\n                displayValue: true\n            };\n\n            angular.merge(default_options, scope.options);\n\n            scope.$watch('model', function (new_value) {\n                JsBarcode(element[0], new_value, default_options);\n            });\n\n        }\n    };\n\n});","angular.module('SER.diff', []);\n\nangular.module('SER.diff').factory('ObjectDiff', [\n    '$sce',\n    function objectDiff($sce) {\n\n        var openChar = '{',\n            closeChar = '}',\n            service = {\n                diff: diff,\n                getPatchChanges: getPatchChanges\n            };\n\n        return service;\n\n\n        /* service methods */\n\n        /**\n         * diff between object a and b\n         * @param {Object} a\n         * @param {Object} b\n         * @param shallow\n         * @param isOwn\n         * @return {Object}\n         */\n        function diff(a, b, shallow, isOwn) {\n\n            if (a === b) {\n                return equalObj(a);\n            }\n\n            var diffValue = {};\n            var equal = true;\n\n            for (var key in a) {\n                if ((!isOwn && key in b) || (isOwn && typeof b != 'undefined' && b.hasOwnProperty(key))) {\n                    if (a[key] === b[key]) {\n                        diffValue[key] = equalObj(a[key]);\n                    } else {\n                        if (!shallow && isValidAttr(a[key], b[key])) {\n                            var valueDiff = diff(a[key], b[key], shallow, isOwn);\n                            if (valueDiff.changed == 'equal') {\n                                diffValue[key] = equalObj(a[key]);\n                            } else {\n                                equal = false;\n                                diffValue[key] = valueDiff;\n                            }\n                        } else {\n                            equal = false;\n                            diffValue[key] = {\n                                changed: 'primitive change',\n                                removed: a[key],\n                                added: b[key]\n                            }\n                        }\n                    }\n                } else {\n                    equal = false;\n                    diffValue[key] = {\n                        changed: 'removed',\n                        value: a[key]\n                    }\n                }\n            }\n\n            for (key in b) {\n                if ((!isOwn && !(key in a)) || (isOwn && typeof a != 'undefined' && !a.hasOwnProperty(key))) {\n                    equal = false;\n                    diffValue[key] = {\n                        changed: 'added',\n                        value: b[key]\n                    }\n                }\n            }\n\n            if (equal) {\n                return equalObj(a);\n            } else {\n                return {\n                    changed: 'object change',\n                    value: diffValue\n                }\n            }\n        }\n\n\n        /**\n         * diff between object a and b own properties only\n         * @param {Object} a\n         * @param {Object} b\n         * @return {Object}\n         * @param deep\n         */\n        function getPatchChanges(init_obj, mod_obj, shallow, isOwn) {\n            var _mod_obj = angular.fromJson(angular.toJson(mod_obj));\n            var _diff = diff(angular.fromJson(angular.toJson(init_obj)), _mod_obj, shallow, isOwn);\n            var result = [];\n\n            if (_diff.changed !== 'equal') {\n                angular.forEach(_diff.value, function (value, key) {\n                    if (value.changed !== 'equal') {\n                        result.push({\n                            \"op\": \"replace\",\n                            \"path\": \"/\" + key,\n                            \"value\": _mod_obj[key]\n                        });\n                    }\n                });\n            }\n\n            return result;\n\n        }\n\n        /**\n         * @param obj\n         * @returns {{changed: string, value: *}}\n         */\n        function equalObj(obj) {\n            return {\n                changed: 'equal',\n                value: obj\n            }\n        }\n\n        /**\n         * @param a\n         * @param b\n         * @returns {*|boolean}\n         */\n        function isValidAttr(a, b) {\n            var typeA = typeof a;\n            var typeB = typeof b;\n            return (a && b && (typeA == 'object' || typeA == 'function') && (typeB == 'object' || typeB == 'function'));\n        }\n\n        /**\n         * @param {string} key\n         * @return {string}\n         */\n        function stringifyObjectKey(key) {\n            return /^[a-z0-9_$]*$/i.test(key) ?\n                key :\n                JSON.stringify(key);\n        }\n\n        /**\n         * @param {string} string\n         * @return {string}\n         */\n        function escapeHTML(string) {\n            return string.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n        }\n\n        /**\n         * @param {Object} obj\n         * @return {string}\n         * @param shallow\n         */\n        function inspect(obj, shallow) {\n\n            return _inspect('', obj, shallow);\n\n            /**\n             * @param {string} accumulator\n             * @param {object} obj\n             * @see http://jsperf.com/continuation-passing-style/3\n             * @return {string}\n             * @param shallow\n             */\n            function _inspect(accumulator, obj, shallow) {\n                switch (typeof obj) {\n                    case 'object':\n                        if (!obj) {\n                            accumulator += 'null';\n                            break;\n                        }\n                        if (shallow) {\n                            accumulator += '[object]';\n                            break;\n                        }\n                        var keys = Object.keys(obj);\n                        var length = keys.length;\n                        if (length === 0) {\n                            accumulator += '<span>' + openChar + closeChar + '</span>';\n                        } else {\n                            accumulator += '<span>' + openChar + '</span>\\n<div class=\"diff-level\">';\n                            for (var i = 0; i < length; i++) {\n                                var key = keys[i];\n                                accumulator = _inspect(accumulator + stringifyObjectKey(escapeHTML(key)) + '<span>: </span>', obj[key]);\n                                if (i < length - 1) {\n                                    accumulator += '<span>,</span>\\n';\n                                }\n                            }\n                            accumulator += '\\n</div><span>' + closeChar + '</span>'\n                        }\n                        break;\n\n                    case 'string':\n                        accumulator += JSON.stringify(escapeHTML(obj));\n                        break;\n\n                    case 'undefined':\n                        accumulator += 'undefined';\n                        break;\n\n                    default:\n                        accumulator += escapeHTML(String(obj));\n                        break;\n                }\n                return accumulator;\n            }\n        }\n    }\n\n]);","angular.module('SER', [\n    // Angular modules\n    'ngAnimate',\n    'ngMessages',\n    'ngSanitize',\n    'ngResource',\n    'ngMaterial',\n    // Third Party modules\n    'ui.router',\n    'ngFileUpload',\n    'angular.filter',\n    // SER modules\n    'SER.i18n',\n    'SER.auth',\n    'SER.selector',\n    'SER.match',\n    'SER.image',\n    'SER.search',\n    'SER.tooltipster',\n    'SER.datepicker',\n    'SER.loader',\n    'SER.filters',\n    'SER.barcode',\n    'SER.diff'\n]);\n\n(function (url) {\n    // Create a new `Image` instance\n    var SerImagePowered = new Image();\n\n    SerImagePowered.onload = function () {\n        // Inside here we already have the dimensions of the loaded image\n        var style = [\n            // Hacky way of forcing image's viewport using `font-size` and `line-height`\n            'font-size: 1px;',\n            'line-height: ' + this.height + 'px;',\n\n            // Hacky way of forcing a middle/center anchor point for the image\n            'padding: ' + this.height * .5 + 'px ' + this.width * .5 + 'px;',\n\n            // Set image dimensions\n            'background-size: ' + this.width + 'px ' + this.height + 'px;',\n\n            // Set image URL\n            'background: url(' + url + ');'\n        ].join(' ');\n        \n        console.log('');\n        console.log('');\n        console.log('%c', style);\n        console.log('https://www.sersoluciones.com');\n        console.log('');\n        console.log('');\n    };\n\n    // Actually loads the image\n    SerImagePowered.src = url;\n\n})('https://s3.amazonaws.com/ser-ui/images/powered.jpg');\n\n\n//Routes & Http\nangular.module('SER').config([\n    '$urlRouterProvider',\n    '$urlMatcherFactoryProvider',\n    '$compileProvider',\n    '$resourceProvider',\n    '$httpProvider',\n    function ($urlRouterProvider, $urlMatcherFactoryProvider, $compileProvider, $resourceProvider, $httpProvider) {\n\n        $httpProvider.defaults.paramSerialize = '$httpParamSerializerJQLike';\n        $resourceProvider.defaults.stripTrailingSlashes = true;\n        $compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|ftp|mailto|skype|tel|chrome-extension):/);\n\n        $urlRouterProvider.rule(function ($injector, $location) {\n\n            var path = $location.path();\n            var hasTrailingSlash = '/' === path[path.length - 1];\n\n            if (hasTrailingSlash) {\n                //if last charcter is a slash, return the same url without the slash\n                return path.substr(0, path.length - 1);\n            }\n\n        });\n\n        var GUID_REGEXP = /^[a-f\\d]{8}-([a-f\\d]{4}-){3}[a-f\\d]{12}$/i;\n        $urlMatcherFactoryProvider.type('guid', {\n            encode: angular.identity,\n            decode: angular.identity,\n            is: function (item) {\n                return GUID_REGEXP.test(item);\n            }\n        });\n\n    }\n]);\n\nangular.module('SER').run(['$rootScope', '$sce', function ($rootScope, $sce) {\n\n    $rootScope.backHistory = function () {\n        $window.history.back();\n    };\n\n    $rootScope.__ = __;\n\n    $rootScope.isArray = angular.isArray;\n    $rootScope.isObject = angular.isObject;\n    $rootScope.isString = angular.isString;\n    $rootScope.isUndefined = angular.isUndefined;\n    $rootScope.isNumber = angular.isNumber;\n    $rootScope.isDefined = angular.isDefined;\n    $rootScope.isDate = angular.isDate;\n\n    $rootScope.hasProperty = hasProperty;\n    $rootScope.hasValue = hasValue;\n    $rootScope.notValue = notValue;\n    $rootScope.inArray = inArray;\n    $rootScope.getObjectByValue = getObjectByValue;\n    $rootScope.isEmptyObject = $.isEmptyObject;\n\n    $rootScope.bodyHeight = function () {\n        return angular.element('body').height();\n    };\n    $rootScope.browserWidth = browserWidth;\n\n    $rootScope.trustAsHtml = function (string) {\n        return $sce.trustAsHtml(string);\n    };\n\n}]);"]}